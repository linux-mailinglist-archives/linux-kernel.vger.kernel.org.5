Return-Path: <linux-kernel+bounces-61498-lists+linux-kernel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from sv.mirrors.kernel.org (sv.mirrors.kernel.org [139.178.88.99])
	by mail.lfdr.de (Postfix) with ESMTPS id B18608512EE
	for <lists+linux-kernel@lfdr.de>; Mon, 12 Feb 2024 13:05:26 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by sv.mirrors.kernel.org (Postfix) with ESMTPS id 42C362819C7
	for <lists+linux-kernel@lfdr.de>; Mon, 12 Feb 2024 12:05:25 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 0E3D03A1C9;
	Mon, 12 Feb 2024 11:59:35 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=pass (2048-bit key) header.d=ionos.com header.i=@ionos.com header.b="F3fHeZ58"
Received: from mail-lj1-f171.google.com (mail-lj1-f171.google.com [209.85.208.171])
	(using TLSv1.2 with cipher ECDHE-RSA-AES128-GCM-SHA256 (128/128 bits))
	(No client certificate requested)
	by smtp.subspace.kernel.org (Postfix) with ESMTPS id 4810B39847
	for <linux-kernel@vger.kernel.org>; Mon, 12 Feb 2024 11:55:15 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; arc=none smtp.client-ip=209.85.208.171
ARC-Seal:i=1; a=rsa-sha256; d=subspace.kernel.org; s=arc-20240116;
	t=1707739040; cv=none; b=AXERKWLxFWQsHUV8ghWOc9A7HTGY2BJuikbVgmIpVQW7tMpYPZ4nlWTyFpMWrPRP4QOmmPfb3UD+W/UM3BThZgZdw38ljkatD4b1SVR09GCwRndHqSGYYyUwnXdA68vVN7stBFQa6zR5akN0N6862hiS65N8ubrJYYetNy84lmE=
ARC-Message-Signature:i=1; a=rsa-sha256; d=subspace.kernel.org;
	s=arc-20240116; t=1707739040; c=relaxed/simple;
	bh=6ys1fXU79M/BwAi/S/glS698iA57y8dJy5L4pcBepUA=;
	h=From:To:Cc:Subject:Date:Message-Id:In-Reply-To:References:
	 MIME-Version:Content-Type; b=f7+CMtZ+UrlGHIbbpmQgkVsFO1yLwX5net9Y4LsMBeuvSn+/4rp/3rKSWyquDgIXeaUpYRYx61xv8XO8hT0l/4h22D3DqNF0ZDmRQEWaMZNonYwX35uH07FQIrF8pd3v9OlRdSU4JChR4kwsXaKuylEls3S39birNtCZ6sPwC4c=
ARC-Authentication-Results:i=1; smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=ionos.com; spf=pass smtp.mailfrom=ionos.com; dkim=pass (2048-bit key) header.d=ionos.com header.i=@ionos.com header.b=F3fHeZ58; arc=none smtp.client-ip=209.85.208.171
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=quarantine dis=none) header.from=ionos.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=ionos.com
Received: by mail-lj1-f171.google.com with SMTP id 38308e7fff4ca-2d0aabed735so40991601fa.0
        for <linux-kernel@vger.kernel.org>; Mon, 12 Feb 2024 03:55:14 -0800 (PST)
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=ionos.com; s=google; t=1707738913; x=1708343713; darn=vger.kernel.org;
        h=content-transfer-encoding:mime-version:references:in-reply-to
         :message-id:date:subject:cc:to:from:from:to:cc:subject:date
         :message-id:reply-to;
        bh=bHV0kWGPhfdCn1aRjhNjv9aMdfdhZKRpI2adplI8S9Q=;
        b=F3fHeZ58Prdft2ymJrM+eftb6MY9kHVPgtzCsncBCiorq/32gv2VlYMN7/IKAYL2Qp
         D0brOdYdKIfab8HqjxqI86+dpxAtEXruE+Axm+Bsfx27l7H2bchkKRa2Su6O/cntfn8N
         7hbQpDOW5AU+OJj61LfA0Hg/iFfkQhmwlDeWUDBAMaTaEQiKcOHMusr9th4WrYfiANE5
         TOpv+O2LpD1gpZN6R/MPPfDOe15xJyMUhLX7K4m0Rkb4HBZmU3Ctifx5/yqAoGweMDSU
         t3gHSQ/Kwc6RmNk12dEgpWCwvHnYmPXrWX5R6EJi2bQKiXSJsqlfWZ9exAcveO75b1E2
         hUNg==
X-Google-DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed;
        d=1e100.net; s=20230601; t=1707738913; x=1708343713;
        h=content-transfer-encoding:mime-version:references:in-reply-to
         :message-id:date:subject:cc:to:from:x-gm-message-state:from:to:cc
         :subject:date:message-id:reply-to;
        bh=bHV0kWGPhfdCn1aRjhNjv9aMdfdhZKRpI2adplI8S9Q=;
        b=r2OiSPODeiWyBvJoMU2hmGGiSzyh5YPxnkbkNegvOggUqC2X6YwOfHjGFg4J5dBNsC
         ph6h8zO0VT8+9ibEiAFL7ws0SBP7WtIXeyjv7syuhI4XCghKdXAjIO9VfV/6A9bSrHWV
         offwge+zMktO5+G9vAlA+0aQPFFJk40Gl7Hpb2ivwoyXDs5/O9CdPacD/I7qXLgWgeXA
         U/0KcIrJcAf9Kw4r4TzbqSZw8uU8vPSFtp5XrIjoi+69MewkXMQFGJ/bOrkWFI838JoC
         W35Bj5dcfbwXUdaB7ZgrRDlDC2mkRfW/qLwyvz9URHtNu3fLFU0IjH6C8T18OJkyeA0j
         kxBQ==
X-Gm-Message-State: AOJu0YyP9tl6N7OJLw8x6MpOJdsxMc9tnRVNdiHptpr9uNM5TiKYQdNj
	8hUoeSnrTwFmv2b/rV8ZEnWyR8VLnR0nZO3uFP/paXGemtvhGi4KQEk0SpZhqKAp3Zj8oPM3OiE
	3
X-Google-Smtp-Source: AGHT+IFpSsel+1wpTOqEVBWwFI2Vwg7J519HN/+qgwZdrnrBJM0bJuDQh//baBwNBiFScHK7VpxqKw==
X-Received: by 2002:a2e:7310:0:b0:2d0:9bbc:2395 with SMTP id o16-20020a2e7310000000b002d09bbc2395mr4630400ljc.48.1707738910825;
        Mon, 12 Feb 2024 03:55:10 -0800 (PST)
Received: from raven.blarg.de (p200300dc6f267100023064fffe740809.dip0.t-ipconnect.de. [2003:dc:6f26:7100:230:64ff:fe74:809])
        by smtp.gmail.com with ESMTPSA id m1-20020a17090607c100b00a36c3e2e52dsm139203ejc.61.2024.02.12.03.55.07
        (version=TLS1_3 cipher=TLS_AES_256_GCM_SHA384 bits=256/256);
        Mon, 12 Feb 2024 03:55:08 -0800 (PST)
From: Max Kellermann <max.kellermann@ionos.com>
To: linux-kernel@vger.kernel.org
Cc: Max Kellermann <max.kellermann@ionos.com>
Subject: [PATCH v5 01/35] include: add missing includes
Date: Mon, 12 Feb 2024 12:54:26 +0100
Message-Id: <20240212115500.2078463-2-max.kellermann@ionos.com>
X-Mailer: git-send-email 2.39.2
In-Reply-To: <20240212115500.2078463-1-max.kellermann@ionos.com>
References: <20240212115500.2078463-1-max.kellermann@ionos.com>
Precedence: bulk
X-Mailing-List: linux-kernel@vger.kernel.org
List-Id: <linux-kernel.vger.kernel.org>
List-Subscribe: <mailto:linux-kernel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-kernel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

This adds `#include` directives that are necessary, but missing, which
previously went unnnoticed because the missing headers were included
indirectly by other headers somewhere.

Signed-off-by: Max Kellermann <max.kellermann@ionos.com>
---
 arch/alpha/boot/stdio.c                                   | 1 +
 arch/alpha/kernel/bugs.c                                  | 1 +
 arch/alpha/kernel/core_marvel.c                           | 2 ++
 arch/alpha/kernel/err_marvel.c                            | 1 +
 arch/alpha/kernel/pci-sysfs.c                             | 1 +
 arch/alpha/kernel/rtc.c                                   | 1 +
 arch/alpha/kernel/setup.c                                 | 1 +
 arch/alpha/kernel/srm_env.c                               | 1 +
 arch/arc/kernel/mcip.c                                    | 1 +
 arch/arc/kernel/perf_event.c                              | 2 ++
 arch/arc/kernel/setup.c                                   | 1 +
 arch/arc/mm/cache.c                                       | 2 ++
 arch/arc/mm/tlb.c                                         | 1 +
 arch/arc/plat-axs10x/axs10x.c                             | 1 +
 arch/arm/common/bL_switcher.c                             | 3 +++
 arch/arm/include/asm/arch_gicv3.h                         | 1 +
 arch/arm/include/asm/smp.h                                | 1 +
 arch/arm/kernel/bios32.c                                  | 1 +
 arch/arm/kernel/setup.c                                   | 1 +
 arch/arm/kernel/spectre.c                                 | 1 +
 arch/arm/kernel/traps.c                                   | 1 +
 arch/arm/mach-aspeed/platsmp.c                            | 1 +
 arch/arm/mach-at91/sam_secure.c                           | 2 ++
 arch/arm/mach-ep93xx/core.c                               | 1 +
 arch/arm/mach-footbridge/common.c                         | 1 +
 arch/arm/mach-mvebu/mvebu-soc-id.c                        | 1 +
 arch/arm/mach-mvebu/pm-board.c                            | 1 +
 arch/arm/mach-mxs/mach-mxs.c                              | 1 +
 arch/arm/mach-omap1/omap-dma.c                            | 1 +
 arch/arm/mach-omap1/pm.c                                  | 1 +
 arch/arm/mach-omap2/id.c                                  | 1 +
 arch/arm/mach-omap2/sr_device.c                           | 1 +
 arch/arm/mach-orion5x/ts78xx-setup.c                      | 1 +
 arch/arm/mach-pxa/am300epd.c                              | 1 +
 arch/arm/mach-pxa/sharpsl_pm.c                            | 1 +
 arch/arm/mach-rpc/ecard.c                                 | 1 +
 arch/arm/mach-shmobile/smp-sh73a0.c                       | 1 +
 arch/arm/mach-versatile/spc.c                             | 1 +
 arch/arm/mach-zynq/common.c                               | 1 +
 arch/arm/mm/cache-l2x0-pmu.c                              | 2 ++
 arch/arm64/include/asm/mmu_context.h                      | 1 +
 arch/arm64/include/asm/syscall.h                          | 1 +
 arch/arm64/kernel/cpufeature.c                            | 2 ++
 arch/arm64/kernel/cpuinfo.c                               | 2 ++
 arch/arm64/kernel/entry-common.c                          | 1 +
 arch/arm64/kernel/ftrace.c                                | 1 +
 arch/arm64/kernel/mte.c                                   | 2 ++
 arch/arm64/kernel/probes/decode-insn.h                    | 1 +
 arch/arm64/kernel/proton-pack.c                           | 1 +
 arch/arm64/kernel/smp.c                                   | 1 +
 arch/arm64/kernel/traps.c                                 | 3 +++
 arch/arm64/kvm/arch_timer.c                               | 4 ++++
 arch/arm64/kvm/handle_exit.c                              | 1 +
 arch/arm64/kvm/hypercalls.c                               | 2 ++
 arch/arm64/kvm/pmu-emul.c                                 | 1 +
 arch/arm64/kvm/psci.c                                     | 2 ++
 arch/arm64/kvm/sys_regs.c                                 | 1 +
 arch/arm64/kvm/trng.c                                     | 1 +
 arch/arm64/kvm/vgic/vgic-mmio-v3.c                        | 2 ++
 arch/arm64/kvm/vgic/vgic-mmio.c                           | 1 +
 arch/arm64/kvm/vgic/vgic-v2.c                             | 1 +
 arch/arm64/kvm/vgic/vgic-v3.c                             | 1 +
 arch/arm64/kvm/vgic/vgic-v4.c                             | 1 +
 arch/arm64/mm/fault.c                                     | 1 +
 arch/loongarch/kernel/env.c                               | 1 +
 arch/m68k/atari/config.c                                  | 1 +
 arch/m68k/bvme6000/config.c                               | 1 +
 arch/m68k/emu/natfeat.c                                   | 1 +
 arch/m68k/emu/nfblock.c                                   | 1 +
 arch/m68k/mvme147/config.c                                | 1 +
 arch/m68k/mvme16x/config.c                                | 1 +
 arch/m68k/q40/config.c                                    | 1 +
 arch/m68k/virt/config.c                                   | 1 +
 arch/microblaze/kernel/traps.c                            | 1 +
 arch/mips/alchemy/common/dma.c                            | 1 +
 arch/mips/alchemy/common/prom.c                           | 1 +
 arch/mips/alchemy/devboards/pm.c                          | 2 ++
 arch/mips/ath79/setup.c                                   | 1 +
 arch/mips/boot/compressed/calc_vmlinuz_load_addr.c        | 1 +
 arch/mips/cavium-octeon/executive/octeon-model.c          | 1 +
 arch/mips/dec/prom/identify.c                             | 1 +
 arch/mips/fw/lib/cmdline.c                                | 1 +
 arch/mips/generic/yamon-dt.c                              | 1 +
 arch/mips/include/asm/smp-ops.h                           | 4 ++++
 arch/mips/kernel/cacheinfo.c                              | 1 +
 arch/mips/kernel/cevt-bcm1480.c                           | 1 +
 arch/mips/kernel/cevt-sb1250.c                            | 1 +
 arch/mips/kernel/jump_label.c                             | 4 ++++
 arch/mips/kernel/proc.c                                   | 1 +
 arch/mips/kernel/segment.c                                | 1 +
 arch/mips/kernel/setup.c                                  | 2 ++
 arch/mips/kernel/smp.c                                    | 1 +
 arch/mips/kernel/traps.c                                  | 1 +
 arch/mips/kernel/vpe-mt.c                                 | 2 ++
 arch/mips/lantiq/falcon/prom.c                            | 1 +
 arch/mips/lantiq/xway/prom.c                              | 1 +
 arch/mips/lantiq/xway/sysctrl.c                           | 1 +
 arch/mips/lib/iomap-pci.c                                 | 1 +
 arch/mips/loongson64/boardinfo.c                          | 1 +
 arch/mips/mm/sc-debugfs.c                                 | 1 +
 arch/mips/mti-malta/malta-dtshim.c                        | 1 +
 arch/mips/mti-malta/malta-init.c                          | 1 +
 arch/mips/mti-malta/malta-setup.c                         | 1 +
 arch/mips/pci/ops-tx4927.c                                | 1 +
 arch/mips/rb532/prom.c                                    | 1 +
 arch/mips/sgi-ip22/ip22-eisa.c                            | 1 +
 arch/mips/sgi-ip22/ip22-gio.c                             | 1 +
 arch/mips/sgi-ip27/ip27-timer.c                           | 1 +
 arch/mips/sibyte/common/cfe.c                             | 1 +
 arch/mips/sni/pcimt.c                                     | 1 +
 arch/mips/txx9/generic/setup.c                            | 2 ++
 arch/nios2/kernel/process.c                               | 1 +
 arch/nios2/platform/platform.c                            | 1 +
 arch/parisc/kernel/drivers.c                              | 2 ++
 arch/parisc/kernel/pdc_chassis.c                          | 1 +
 arch/parisc/kernel/pdt.c                                  | 1 +
 arch/parisc/kernel/toc.c                                  | 5 +++++
 arch/powerpc/boot/stdio.c                                 | 1 +
 arch/powerpc/boot/stdio.h                                 | 1 +
 arch/powerpc/include/asm/book3s/64/mmu.h                  | 1 +
 arch/powerpc/include/asm/ppc-pci.h                        | 1 +
 arch/powerpc/kernel/cacheinfo.c                           | 2 ++
 arch/powerpc/kernel/eeh.c                                 | 1 +
 arch/powerpc/kernel/eeh_event.c                           | 1 +
 arch/powerpc/kernel/eeh_sysfs.c                           | 1 +
 arch/powerpc/kernel/fadump.c                              | 2 ++
 arch/powerpc/kernel/iommu.c                               | 2 ++
 arch/powerpc/kernel/legacy_serial.c                       | 2 ++
 arch/powerpc/kernel/mce.c                                 | 1 +
 arch/powerpc/kernel/pci-common.c                          | 1 +
 arch/powerpc/kernel/pci_of_scan.c                         | 1 +
 arch/powerpc/kernel/process.c                             | 1 +
 arch/powerpc/kernel/prom.c                                | 1 +
 arch/powerpc/kernel/ptrace/ptrace-view.c                  | 1 +
 arch/powerpc/kernel/rtas-proc.c                           | 1 +
 arch/powerpc/kernel/rtas_flash.c                          | 1 +
 arch/powerpc/kernel/rtasd.c                               | 2 ++
 arch/powerpc/kernel/secure_boot.c                         | 1 +
 arch/powerpc/kernel/security.c                            | 1 +
 arch/powerpc/kernel/setup_32.c                            | 1 +
 arch/powerpc/kernel/setup_64.c                            | 1 +
 arch/powerpc/kernel/sysfs.c                               | 3 +++
 arch/powerpc/kernel/udbg.c                                | 1 +
 arch/powerpc/kernel/watchdog.c                            | 1 +
 arch/powerpc/kexec/file_load.c                            | 1 +
 arch/powerpc/kvm/book3s_64_mmu_hv.c                       | 1 +
 arch/powerpc/kvm/book3s_64_mmu_radix.c                    | 1 +
 arch/powerpc/kvm/book3s_64_vio.c                          | 1 +
 arch/powerpc/kvm/book3s_hv_builtin.c                      | 1 +
 arch/powerpc/kvm/book3s_xive.c                            | 1 +
 arch/powerpc/mm/init-common.c                             | 1 +
 arch/powerpc/mm/init_64.c                                 | 2 ++
 arch/powerpc/mm/nohash/e500_hugetlbpage.c                 | 1 +
 arch/powerpc/perf/core-book3s.c                           | 2 ++
 arch/powerpc/perf/hv-24x7.c                               | 1 +
 arch/powerpc/perf/hv-gpci.c                               | 1 +
 arch/powerpc/perf/imc-pmu.c                               | 1 +
 arch/powerpc/platforms/4xx/cpm.c                          | 1 +
 arch/powerpc/platforms/52xx/mpc52xx_gpt.c                 | 1 +
 arch/powerpc/platforms/83xx/mcu_mpc8349emitx.c            | 1 +
 arch/powerpc/platforms/83xx/misc.c                        | 1 +
 arch/powerpc/platforms/book3s/vas-api.c                   | 1 +
 arch/powerpc/platforms/cell/cbe_thermal.c                 | 1 +
 arch/powerpc/platforms/cell/spu_base.c                    | 1 +
 arch/powerpc/platforms/cell/spufs/coredump.c              | 1 +
 arch/powerpc/platforms/cell/spufs/file.c                  | 2 ++
 arch/powerpc/platforms/pasemi/setup.c                     | 1 +
 arch/powerpc/platforms/powermac/pfunc_core.c              | 1 +
 arch/powerpc/platforms/powernv/eeh-powernv.c              | 1 +
 arch/powerpc/platforms/powernv/idle.c                     | 2 ++
 arch/powerpc/platforms/powernv/opal-core.c                | 1 +
 arch/powerpc/platforms/powernv/opal-dump.c                | 1 +
 arch/powerpc/platforms/powernv/opal-elog.c                | 1 +
 arch/powerpc/platforms/powernv/opal-flash.c               | 1 +
 arch/powerpc/platforms/powernv/opal-imc.c                 | 1 +
 arch/powerpc/platforms/powernv/opal-irqchip.c             | 1 +
 arch/powerpc/platforms/powernv/opal-powercap.c            | 3 +++
 arch/powerpc/platforms/powernv/opal-psr.c                 | 3 +++
 arch/powerpc/platforms/powernv/opal-sensor-groups.c       | 3 +++
 arch/powerpc/platforms/powernv/opal-sysparam.c            | 1 +
 arch/powerpc/platforms/powernv/opal-xscom.c               | 1 +
 arch/powerpc/platforms/powernv/pci-ioda.c                 | 1 +
 arch/powerpc/platforms/powernv/pci.c                      | 1 +
 arch/powerpc/platforms/powernv/subcore.c                  | 1 +
 arch/powerpc/platforms/powernv/vas-window.c               | 1 +
 arch/powerpc/platforms/powernv/vas.c                      | 1 +
 arch/powerpc/platforms/ps3/setup.c                        | 1 +
 arch/powerpc/platforms/ps3/system-bus.c                   | 1 +
 arch/powerpc/platforms/pseries/cmm.c                      | 2 ++
 arch/powerpc/platforms/pseries/dlpar.c                    | 2 ++
 arch/powerpc/platforms/pseries/dtl.c                      | 1 +
 arch/powerpc/platforms/pseries/hotplug-cpu.c              | 1 +
 arch/powerpc/platforms/pseries/ibmebus.c                  | 1 +
 arch/powerpc/platforms/pseries/iommu.c                    | 1 +
 arch/powerpc/platforms/pseries/lpar.c                     | 2 ++
 arch/powerpc/platforms/pseries/lparcfg.c                  | 1 +
 arch/powerpc/platforms/pseries/papr_platform_attributes.c | 1 +
 arch/powerpc/platforms/pseries/papr_scm.c                 | 1 +
 arch/powerpc/platforms/pseries/power.c                    | 1 +
 arch/powerpc/platforms/pseries/pseries_energy.c           | 1 +
 arch/powerpc/platforms/pseries/reconfig.c                 | 1 +
 arch/powerpc/platforms/pseries/rtas-fadump.c              | 1 +
 arch/powerpc/platforms/pseries/setup.c                    | 1 +
 arch/powerpc/platforms/pseries/suspend.c                  | 2 ++
 arch/powerpc/platforms/pseries/vas-sysfs.c                | 2 ++
 arch/powerpc/platforms/pseries/vas.c                      | 1 +
 arch/powerpc/platforms/pseries/vio.c                      | 3 +++
 arch/powerpc/sysdev/fsl_mpic_timer_wakeup.c               | 1 +
 arch/powerpc/sysdev/fsl_msi.c                             | 1 +
 arch/powerpc/sysdev/fsl_rio.c                             | 1 +
 arch/powerpc/sysdev/xics/icp-native.c                     | 1 +
 arch/powerpc/xmon/nonstdio.c                              | 1 +
 arch/riscv/kernel/elf_kexec.c                             | 1 +
 arch/riscv/kernel/process.c                               | 1 +
 arch/riscv/kernel/sbi.c                                   | 1 +
 arch/riscv/kernel/smpboot.c                               | 1 +
 arch/riscv/kernel/traps.c                                 | 2 ++
 arch/riscv/mm/ptdump.c                                    | 1 +
 arch/s390/boot/ipl_parm.c                                 | 1 +
 arch/s390/boot/pgm_check_info.c                           | 1 +
 arch/s390/boot/string.c                                   | 1 +
 arch/s390/crypto/prng.c                                   | 1 +
 arch/s390/hypfs/inode.c                                   | 1 +
 arch/s390/include/asm/debug.h                             | 1 +
 arch/s390/kernel/debug.c                                  | 2 ++
 arch/s390/kernel/dis.c                                    | 1 +
 arch/s390/kernel/early.c                                  | 1 +
 arch/s390/kernel/ipl.c                                    | 1 +
 arch/s390/kernel/nospec-branch.c                          | 1 +
 arch/s390/kernel/nospec-sysfs.c                           | 1 +
 arch/s390/kernel/perf_cpum_sf.c                           | 2 ++
 arch/s390/kernel/perf_event.c                             | 1 +
 arch/s390/kernel/ptrace.c                                 | 1 +
 arch/s390/kernel/setup.c                                  | 1 +
 arch/s390/kernel/smp.c                                    | 1 +
 arch/s390/kernel/sysinfo.c                                | 1 +
 arch/s390/kernel/time.c                                   | 2 ++
 arch/s390/kernel/topology.c                               | 2 ++
 arch/s390/kvm/kvm-s390.c                                  | 1 +
 arch/s390/lib/spinlock.c                                  | 1 +
 arch/s390/mm/cmm.c                                        | 2 ++
 arch/s390/mm/extmem.c                                     | 1 +
 arch/s390/pci/pci_debug.c                                 | 1 +
 arch/s390/pci/pci_sysfs.c                                 | 1 +
 arch/sh/drivers/dma/dma-sysfs.c                           | 2 ++
 arch/sh/drivers/platform_early.c                          | 2 ++
 arch/sh/drivers/push-switch.c                             | 1 +
 arch/sh/kernel/cpu/sh4/sq.c                               | 1 +
 arch/sh/kernel/vsyscall/vsyscall.c                        | 1 +
 arch/sparc/kernel/chmc.c                                  | 1 +
 arch/sparc/kernel/ioport.c                                | 1 +
 arch/sparc/kernel/irq_64.c                                | 1 +
 arch/sparc/kernel/led.c                                   | 1 +
 arch/sparc/kernel/pci.c                                   | 1 +
 arch/sparc/kernel/prom_32.c                               | 1 +
 arch/sparc/kernel/prom_64.c                               | 1 +
 arch/sparc/kernel/setup_32.c                              | 1 +
 arch/sparc/kernel/sysfs.c                                 | 1 +
 arch/sparc/kernel/traps_64.c                              | 1 +
 arch/sparc/kernel/vio.c                                   | 1 +
 arch/sparc/prom/tree_32.c                                 | 1 +
 arch/sparc/vdso/vma.c                                     | 1 +
 arch/um/drivers/fd.c                                      | 1 +
 arch/um/drivers/harddog_user.c                            | 1 +
 arch/um/drivers/line.c                                    | 1 +
 arch/um/drivers/mconsole_kern.c                           | 1 +
 arch/um/drivers/net_kern.c                                | 1 +
 arch/um/drivers/net_user.c                                | 1 +
 arch/um/drivers/port_user.c                               | 1 +
 arch/um/drivers/pty.c                                     | 1 +
 arch/um/drivers/slip_user.c                               | 1 +
 arch/um/drivers/stderr_console.c                          | 1 +
 arch/um/drivers/ubd_kern.c                                | 2 ++
 arch/um/drivers/umcast_kern.c                             | 1 +
 arch/um/drivers/vde_kern.c                                | 1 +
 arch/um/drivers/vector_kern.c                             | 1 +
 arch/um/drivers/vector_transports.c                       | 1 +
 arch/um/drivers/virtio_uml.c                              | 1 +
 arch/um/drivers/xterm.c                                   | 1 +
 arch/um/kernel/exitcode.c                                 | 1 +
 arch/um/kernel/time.c                                     | 1 +
 arch/um/kernel/um_arch.c                                  | 1 +
 arch/um/os-Linux/drivers/ethertap_user.c                  | 1 +
 arch/um/os-Linux/drivers/tuntap_user.c                    | 1 +
 arch/um/os-Linux/process.c                                | 1 +
 arch/um/os-Linux/umid.c                                   | 1 +
 arch/x86/boot/boot.h                                      | 2 ++
 arch/x86/boot/compressed/error.c                          | 1 +
 arch/x86/boot/compressed/kaslr.c                          | 1 +
 arch/x86/boot/cpu.c                                       | 1 +
 arch/x86/boot/early_serial_console.c                      | 1 +
 arch/x86/boot/printf.c                                    | 1 +
 arch/x86/boot/video.c                                     | 1 +
 arch/x86/coco/tdx/tdx.c                                   | 1 +
 arch/x86/entry/common.c                                   | 1 +
 arch/x86/entry/vdso/vdso32-setup.c                        | 1 +
 arch/x86/entry/vdso/vma.c                                 | 1 +
 arch/x86/events/amd/iommu.c                               | 1 +
 arch/x86/events/amd/uncore.c                              | 2 ++
 arch/x86/events/core.c                                    | 2 ++
 arch/x86/events/intel/core.c                              | 2 ++
 arch/x86/events/intel/cstate.c                            | 1 +
 arch/x86/events/intel/pt.c                                | 1 +
 arch/x86/events/intel/uncore.c                            | 2 ++
 arch/x86/events/intel/uncore.h                            | 1 +
 arch/x86/events/intel/uncore_snbep.c                      | 1 +
 arch/x86/events/rapl.c                                    | 1 +
 arch/x86/hyperv/ivm.c                                     | 1 +
 arch/x86/include/asm/mshyperv.h                           | 1 +
 arch/x86/include/asm/sparsemem.h                          | 2 ++
 arch/x86/kernel/alternative.c                             | 1 +
 arch/x86/kernel/aperture_64.c                             | 1 +
 arch/x86/kernel/apic/vector.c                             | 1 +
 arch/x86/kernel/apic/x2apic_uv_x.c                        | 1 +
 arch/x86/kernel/apm_32.c                                  | 1 +
 arch/x86/kernel/callthunks.c                              | 1 +
 arch/x86/kernel/check.c                                   | 1 +
 arch/x86/kernel/cpu/cacheinfo.c                           | 2 ++
 arch/x86/kernel/cpu/centaur.c                             | 1 +
 arch/x86/kernel/cpu/common.c                              | 2 ++
 arch/x86/kernel/cpu/debugfs.c                             | 1 +
 arch/x86/kernel/cpu/intel.c                               | 2 ++
 arch/x86/kernel/cpu/intel_epb.c                           | 1 +
 arch/x86/kernel/cpu/mce/amd.c                             | 2 ++
 arch/x86/kernel/cpu/mce/core.c                            | 1 +
 arch/x86/kernel/cpu/mce/inject.c                          | 1 +
 arch/x86/kernel/cpu/microcode/core.c                      | 2 ++
 arch/x86/kernel/cpu/microcode/intel.c                     | 1 +
 arch/x86/kernel/cpu/mtrr/cleanup.c                        | 1 +
 arch/x86/kernel/cpu/mtrr/if.c                             | 1 +
 arch/x86/kernel/cpu/resctrl/ctrlmondata.c                 | 1 +
 arch/x86/kernel/cpu/resctrl/pseudo_lock.c                 | 2 ++
 arch/x86/kernel/cpu/resctrl/rdtgroup.c                    | 2 ++
 arch/x86/kernel/cpu/umwait.c                              | 3 +++
 arch/x86/kernel/cpu/vmware.c                              | 1 +
 arch/x86/kernel/cpuid.c                                   | 1 +
 arch/x86/kernel/e820.c                                    | 1 +
 arch/x86/kernel/early_printk.c                            | 1 +
 arch/x86/kernel/hpet.c                                    | 1 +
 arch/x86/kernel/kdebugfs.c                                | 1 +
 arch/x86/kernel/kexec-bzimage64.c                         | 1 +
 arch/x86/kernel/ksysfs.c                                  | 2 ++
 arch/x86/kernel/msr.c                                     | 1 +
 arch/x86/kernel/sev.c                                     | 1 +
 arch/x86/kernel/static_call.c                             | 1 +
 arch/x86/kernel/tsc.c                                     | 1 +
 arch/x86/kvm/mmu/mmu.c                                    | 3 +++
 arch/x86/kvm/svm/svm.c                                    | 1 +
 arch/x86/kvm/vmx/nested.c                                 | 1 +
 arch/x86/kvm/xen.c                                        | 1 +
 arch/x86/lib/delay.c                                      | 1 +
 arch/x86/mm/cpu_entry_area.c                              | 1 +
 arch/x86/mm/numa_emulation.c                              | 1 +
 arch/x86/mm/pkeys.c                                       | 2 ++
 arch/x86/mm/tlb.c                                         | 2 ++
 arch/x86/pci/bus_numa.c                                   | 1 +
 arch/x86/pci/common.c                                     | 1 +
 arch/x86/platform/efi/efi.c                               | 1 +
 arch/x86/platform/efi/fake_mem.c                          | 1 +
 arch/x86/platform/efi/quirks.c                            | 1 +
 arch/x86/platform/efi/runtime-map.c                       | 1 +
 arch/x86/platform/olpc/olpc-xo1-sci.c                     | 1 +
 arch/x86/platform/olpc/olpc-xo15-sci.c                    | 1 +
 arch/x86/platform/ts5500/ts5500.c                         | 1 +
 arch/x86/platform/uv/uv_nmi.c                             | 1 +
 arch/x86/xen/enlighten_pv.c                               | 1 +
 arch/x86/xen/setup.c                                      | 1 +
 arch/x86/xen/smp.c                                        | 1 +
 arch/x86/xen/smp_pv.c                                     | 1 +
 arch/x86/xen/spinlock.c                                   | 1 +
 arch/xtensa/kernel/stacktrace.c                           | 1 +
 arch/xtensa/platforms/iss/network.c                       | 1 +
 arch/xtensa/platforms/iss/simdisk.c                       | 1 +
 block/badblocks.c                                         | 1 +
 block/bdev.c                                              | 1 +
 block/bfq-cgroup.c                                        | 2 ++
 block/bfq-iosched.c                                       | 2 ++
 block/bfq-iosched.h                                       | 1 +
 block/bio.c                                               | 2 ++
 block/blk-cgroup.c                                        | 2 ++
 block/blk-crypto-sysfs.c                                  | 1 +
 block/blk-ia-ranges.c                                     | 2 ++
 block/blk-integrity.c                                     | 1 +
 block/blk-ioc.c                                           | 1 +
 block/blk-iocost.c                                        | 2 ++
 block/blk-iolatency.c                                     | 1 +
 block/blk-mq-debugfs.c                                    | 1 +
 block/blk-mq-sysfs.c                                      | 1 +
 block/blk-mq.c                                            | 2 ++
 block/blk-sysfs.c                                         | 2 ++
 block/blk-throttle.c                                      | 2 ++
 block/blk-timeout.c                                       | 2 ++
 block/bsg.c                                               | 2 ++
 block/disk-events.c                                       | 1 +
 block/early-lookup.c                                      | 2 ++
 block/elevator.c                                          | 1 +
 block/elevator.h                                          | 1 +
 block/genhd.c                                             | 2 ++
 block/holder.c                                            | 1 +
 block/ioctl.c                                             | 1 +
 block/kyber-iosched.c                                     | 3 +++
 block/mq-deadline.c                                       | 2 ++
 block/partitions/aix.c                                    | 1 +
 block/partitions/amiga.c                                  | 1 +
 block/partitions/check.h                                  | 1 +
 block/partitions/cmdline.c                                | 2 ++
 block/partitions/core.c                                   | 1 +
 block/partitions/ibm.c                                    | 1 +
 block/partitions/msdos.c                                  | 1 +
 block/partitions/sysv68.c                                 | 1 +
 block/t10-pi.c                                            | 1 +
 crypto/adiantum.c                                         | 1 +
 crypto/algapi.c                                           | 1 +
 crypto/asymmetric_keys/asymmetric_type.c                  | 3 +++
 crypto/asymmetric_keys/public_key.c                       | 1 +
 crypto/asymmetric_keys/selftest.c                         | 1 +
 crypto/asymmetric_keys/x509_public_key.c                  | 1 +
 crypto/async_tx/raid6test.c                               | 1 +
 crypto/authenc.c                                          | 1 +
 crypto/authencesn.c                                       | 1 +
 crypto/ccm.c                                              | 1 +
 crypto/chacha20poly1305.c                                 | 1 +
 crypto/cryptd.c                                           | 1 +
 crypto/crypto_engine.c                                    | 1 +
 crypto/ctr.c                                              | 1 +
 crypto/drbg.c                                             | 1 +
 crypto/essiv.c                                            | 1 +
 crypto/fips.c                                             | 1 +
 crypto/gcm.c                                              | 1 +
 crypto/geniv.c                                            | 1 +
 crypto/hctr2.c                                            | 1 +
 crypto/lrw.c                                              | 1 +
 crypto/lskcipher.c                                        | 1 +
 crypto/pcrypt.c                                           | 1 +
 crypto/rsa-pkcs1pad.c                                     | 1 +
 crypto/simd.c                                             | 1 +
 crypto/testmgr.c                                          | 1 +
 crypto/xts.c                                              | 1 +
 drivers/accel/drm_accel.c                                 | 1 +
 drivers/accel/habanalabs/common/command_submission.c      | 2 ++
 drivers/accel/habanalabs/common/debugfs.c                 | 2 ++
 drivers/accel/habanalabs/common/device.c                  | 2 ++
 drivers/accel/habanalabs/common/firmware_if.c             | 2 ++
 drivers/accel/habanalabs/common/habanalabs.h              | 1 +
 drivers/accel/habanalabs/common/habanalabs_ioctl.c        | 1 +
 drivers/accel/habanalabs/common/hw_queue.c                | 1 +
 drivers/accel/habanalabs/common/irq.c                     | 1 +
 drivers/accel/habanalabs/common/memory.c                  | 1 +
 drivers/accel/habanalabs/common/memory_mgr.c              | 1 +
 drivers/accel/habanalabs/common/pci/pci.c                 | 1 +
 drivers/accel/habanalabs/common/security.c                | 1 +
 drivers/accel/habanalabs/common/state_dump.c              | 1 +
 drivers/accel/habanalabs/common/sysfs.c                   | 2 ++
 drivers/accel/habanalabs/gaudi/gaudi.c                    | 3 +++
 drivers/accel/habanalabs/gaudi/gaudi_coresight.c          | 1 +
 drivers/accel/habanalabs/gaudi/gaudi_security.c           | 1 +
 drivers/accel/habanalabs/gaudi2/gaudi2.c                  | 2 ++
 drivers/accel/habanalabs/gaudi2/gaudi2_coresight.c        | 1 +
 drivers/accel/habanalabs/gaudi2/gaudi2_security.c         | 1 +
 drivers/accel/habanalabs/goya/goya.c                      | 2 ++
 drivers/accel/habanalabs/goya/goya_coresight.c            | 1 +
 drivers/accel/habanalabs/goya/goya_hwmgr.c                | 2 ++
 drivers/accel/habanalabs/goya/goya_security.c             | 1 +
 drivers/accel/ivpu/ivpu_debugfs.c                         | 1 +
 drivers/accel/ivpu/ivpu_pm.c                              | 1 +
 drivers/accel/qaic/qaic_control.c                         | 1 +
 drivers/accel/qaic/qaic_data.c                            | 1 +
 drivers/accessibility/speakup/kobjects.c                  | 2 ++
 drivers/accessibility/speakup/main.c                      | 2 ++
 drivers/accessibility/speakup/speakup_soft.c              | 3 +++
 drivers/accessibility/speakup/spk_ttyio.c                 | 1 +
 drivers/accessibility/speakup/synth.c                     | 1 +
 drivers/accessibility/speakup/varhandlers.c               | 2 ++
 drivers/acpi/acpi_extlog.c                                | 1 +
 drivers/acpi/acpi_fpdt.c                                  | 1 +
 drivers/acpi/acpi_ipmi.c                                  | 1 +
 drivers/acpi/acpi_lpit.c                                  | 1 +
 drivers/acpi/acpi_lpss.c                                  | 1 +
 drivers/acpi/acpi_memhotplug.c                            | 1 +
 drivers/acpi/acpi_pad.c                                   | 1 +
 drivers/acpi/acpi_processor.c                             | 1 +
 drivers/acpi/acpi_tad.c                                   | 2 ++
 drivers/acpi/acpi_video.c                                 | 1 +
 drivers/acpi/acpica/utprint.c                             | 1 +
 drivers/acpi/apei/einj.c                                  | 1 +
 drivers/acpi/apei/ghes.c                                  | 1 +
 drivers/acpi/battery.c                                    | 1 +
 drivers/acpi/bus.c                                        | 1 +
 drivers/acpi/button.c                                     | 1 +
 drivers/acpi/device_sysfs.c                               | 2 ++
 drivers/acpi/dock.c                                       | 1 +
 drivers/acpi/dptf/dptf_pch_fivr.c                         | 2 ++
 drivers/acpi/dptf/dptf_power.c                            | 2 ++
 drivers/acpi/ec.c                                         | 1 +
 drivers/acpi/ec_sys.c                                     | 1 +
 drivers/acpi/evged.c                                      | 1 +
 drivers/acpi/fan_attr.c                                   | 1 +
 drivers/acpi/glue.c                                       | 1 +
 drivers/acpi/mipi-disco-img.c                             | 1 +
 drivers/acpi/nfit/core.c                                  | 2 ++
 drivers/acpi/nfit/intel.c                                 | 2 ++
 drivers/acpi/osl.c                                        | 1 +
 drivers/acpi/pci_irq.c                                    | 1 +
 drivers/acpi/pci_root.c                                   | 1 +
 drivers/acpi/pci_slot.c                                   | 1 +
 drivers/acpi/pfr_telemetry.c                              | 1 +
 drivers/acpi/power.c                                      | 1 +
 drivers/acpi/proc.c                                       | 1 +
 drivers/acpi/processor_idle.c                             | 1 +
 drivers/acpi/property.c                                   | 1 +
 drivers/acpi/sbs.c                                        | 2 ++
 drivers/acpi/sleep.c                                      | 1 +
 drivers/acpi/spcr.c                                       | 1 +
 drivers/acpi/sysfs.c                                      | 1 +
 drivers/acpi/tables.c                                     | 1 +
 drivers/amba/bus.c                                        | 1 +
 drivers/android/binder.c                                  | 1 +
 drivers/ata/ahci.c                                        | 1 +
 drivers/ata/ahci_imx.c                                    | 1 +
 drivers/ata/ata_piix.c                                    | 1 +
 drivers/ata/libahci.c                                     | 2 ++
 drivers/ata/libata-acpi.c                                 | 1 +
 drivers/ata/libata-core.c                                 | 3 +++
 drivers/ata/libata-eh.c                                   | 2 ++
 drivers/ata/libata-sata.c                                 | 1 +
 drivers/ata/libata-scsi.c                                 | 2 ++
 drivers/ata/libata-transport.c                            | 1 +
 drivers/ata/pata_amd.c                                    | 1 +
 drivers/ata/pata_it821x.c                                 | 1 +
 drivers/ata/pata_parport/pata_parport.c                   | 2 ++
 drivers/ata/pata_pxa.c                                    | 1 +
 drivers/ata/sata_fsl.c                                    | 2 ++
 drivers/ata/sata_mv.c                                     | 1 +
 drivers/atm/adummy.c                                      | 1 +
 drivers/atm/atmtcp.c                                      | 1 +
 drivers/atm/eni.c                                         | 1 +
 drivers/atm/fore200e.c                                    | 1 +
 drivers/atm/he.c                                          | 1 +
 drivers/atm/idt77252.c                                    | 1 +
 drivers/atm/iphase.c                                      | 1 +
 drivers/atm/lanai.c                                       | 1 +
 drivers/atm/nicstar.c                                     | 1 +
 drivers/atm/solos-pci.c                                   | 2 ++
 drivers/auxdisplay/charlcd.c                              | 1 +
 drivers/auxdisplay/hd44780_common.c                       | 1 +
 drivers/auxdisplay/line-display.c                         | 1 +
 drivers/base/arch_topology.c                              | 1 +
 drivers/base/auxiliary.c                                  | 1 +
 drivers/base/base.h                                       | 5 +++++
 drivers/base/cacheinfo.c                                  | 1 +
 drivers/base/container.c                                  | 1 +
 drivers/base/core.c                                       | 1 +
 drivers/base/dd.c                                         | 3 +++
 drivers/base/devcoredump.c                                | 1 +
 drivers/base/devres.c                                     | 2 ++
 drivers/base/devtmpfs.c                                   | 2 ++
 drivers/base/firmware_loader/builtin/main.c               | 1 +
 drivers/base/firmware_loader/firmware.h                   | 1 +
 drivers/base/firmware_loader/main.c                       | 2 ++
 drivers/base/firmware_loader/sysfs.c                      | 1 +
 drivers/base/firmware_loader/sysfs_upload.c               | 1 +
 drivers/base/memory.c                                     | 1 +
 drivers/base/module.c                                     | 1 +
 drivers/base/node.c                                       | 1 +
 drivers/base/power/common.c                               | 1 +
 drivers/base/power/generic_ops.c                          | 1 +
 drivers/base/power/main.c                                 | 1 +
 drivers/base/power/runtime.c                              | 1 +
 drivers/base/power/sysfs.c                                | 1 +
 drivers/base/power/trace.c                                | 1 +
 drivers/base/power/wakeirq.c                              | 1 +
 drivers/base/regmap/regmap-debugfs.c                      | 2 ++
 drivers/base/regmap/regmap-kunit.c                        | 1 +
 drivers/base/soc.c                                        | 1 +
 drivers/base/swnode.c                                     | 2 ++
 drivers/base/topology.c                                   | 2 ++
 drivers/base/transport_class.c                            | 3 +++
 drivers/bcma/driver_mips.c                                | 1 +
 drivers/bcma/main.c                                       | 1 +
 drivers/bcma/scan.c                                       | 1 +
 drivers/block/amiflop.c                                   | 2 ++
 drivers/block/aoe/aoeblk.c                                | 1 +
 drivers/block/aoe/aoechr.c                                | 1 +
 drivers/block/aoe/aoecmd.c                                | 2 ++
 drivers/block/aoe/aoenet.c                                | 1 +
 drivers/block/ataflop.c                                   | 2 ++
 drivers/block/brd.c                                       | 3 +++
 drivers/block/drbd/drbd_buildtag.c                        | 1 +
 drivers/block/drbd/drbd_debugfs.c                         | 1 +
 drivers/block/drbd/drbd_int.h                             | 1 +
 drivers/block/drbd/drbd_main.c                            | 2 ++
 drivers/block/drbd/drbd_nl.c                              | 1 +
 drivers/block/drbd/drbd_receiver.c                        | 1 +
 drivers/block/drbd/drbd_state.c                           | 2 ++
 drivers/block/floppy.c                                    | 2 ++
 drivers/block/loop.c                                      | 2 ++
 drivers/block/mtip32xx/mtip32xx.c                         | 1 +
 drivers/block/nbd.c                                       | 1 +
 drivers/block/null_blk/main.c                             | 4 ++++
 drivers/block/null_blk/zoned.c                            | 1 +
 drivers/block/pktcdvd.c                                   | 2 ++
 drivers/block/ps3disk.c                                   | 2 ++
 drivers/block/ps3vram.c                                   | 2 ++
 drivers/block/rbd.c                                       | 2 ++
 drivers/block/rnbd/rnbd-clt-sysfs.c                       | 2 ++
 drivers/block/rnbd/rnbd-clt.c                             | 1 +
 drivers/block/rnbd/rnbd-srv.c                             | 4 ++++
 drivers/block/sunvdc.c                                    | 2 ++
 drivers/block/swim.c                                      | 1 +
 drivers/block/swim3.c                                     | 1 +
 drivers/block/ublk_drv.c                                  | 5 +++++
 drivers/block/virtio_blk.c                                | 2 ++
 drivers/block/xen-blkback/blkback.c                       | 3 +++
 drivers/block/xen-blkback/xenbus.c                        | 5 +++++
 drivers/block/xen-blkfront.c                              | 2 ++
 drivers/block/z2ram.c                                     | 1 +
 drivers/block/zram/zcomp.c                                | 2 ++
 drivers/block/zram/zram_drv.c                             | 3 +++
 drivers/bluetooth/ath3k.c                                 | 1 +
 drivers/bluetooth/bt3c_cs.c                               | 1 +
 drivers/bluetooth/btbcm.c                                 | 1 +
 drivers/bluetooth/btintel.c                               | 1 +
 drivers/bluetooth/btmrvl_debugfs.c                        | 2 ++
 drivers/bluetooth/btmrvl_sdio.c                           | 1 +
 drivers/bluetooth/btmtk.c                                 | 1 +
 drivers/bluetooth/btmtksdio.c                             | 1 +
 drivers/bluetooth/btnxpuart.c                             | 1 +
 drivers/bluetooth/btqca.c                                 | 1 +
 drivers/bluetooth/btrtl.c                                 | 1 +
 drivers/bluetooth/btusb.c                                 | 3 +++
 drivers/bluetooth/hci_ag6xx.c                             | 1 +
 drivers/bluetooth/hci_bcm4377.c                           | 2 ++
 drivers/bluetooth/hci_intel.c                             | 1 +
 drivers/bluetooth/hci_ll.c                                | 1 +
 drivers/bluetooth/hci_nokia.c                             | 1 +
 drivers/bluetooth/hci_qca.c                               | 1 +
 drivers/bluetooth/hci_vhci.c                              | 2 ++
 drivers/bus/brcmstb_gisb.c                                | 2 ++
 drivers/bus/bt1-apb.c                                     | 2 ++
 drivers/bus/bt1-axi.c                                     | 1 +
 drivers/bus/fsl-mc/fsl-mc-bus.c                           | 2 ++
 drivers/bus/mhi/common.h                                  | 1 +
 drivers/bus/mhi/ep/main.c                                 | 1 +
 drivers/bus/mhi/host/boot.c                               | 1 +
 drivers/bus/mhi/host/debugfs.c                            | 2 ++
 drivers/bus/mhi/host/init.c                               | 4 ++++
 drivers/bus/mhi/host/main.c                               | 2 ++
 drivers/bus/mips_cdmm.c                                   | 1 +
 drivers/bus/moxtet.c                                      | 2 ++
 drivers/bus/omap_l3_noc.c                                 | 1 +
 drivers/bus/qcom-ssc-block-bus.c                          | 1 +
 drivers/bus/sunxi-rsb.c                                   | 1 +
 drivers/bus/ti-sysc.c                                     | 1 +
 drivers/bus/uniphier-system-bus.c                         | 2 ++
 drivers/cache/sifive_ccache.c                             | 2 ++
 drivers/cdrom/cdrom.c                                     | 1 +
 drivers/cdx/cdx.c                                         | 2 ++
 drivers/char/bsr.c                                        | 1 +
 drivers/char/hpet.c                                       | 1 +
 drivers/char/hw_random/core.c                             | 3 +++
 drivers/char/hw_random/histb-rng.c                        | 2 ++
 drivers/char/hw_random/imx-rngc.c                         | 1 +
 drivers/char/hw_random/virtio-rng.c                       | 3 +++
 drivers/char/ipmi/ipmi_msghandler.c                       | 2 ++
 drivers/char/ipmi/ipmi_si_hotmod.c                        | 1 +
 drivers/char/ipmi/ipmi_ssif.c                             | 1 +
 drivers/char/ipmi/ipmi_watchdog.c                         | 1 +
 drivers/char/lp.c                                         | 1 +
 drivers/char/misc.c                                       | 1 +
 drivers/char/mwave/mwavedd.c                              | 1 +
 drivers/char/ppdev.c                                      | 2 ++
 drivers/char/ps3flash.c                                   | 1 +
 drivers/char/random.c                                     | 2 ++
 drivers/char/tlclk.c                                      | 1 +
 drivers/char/tpm/eventlog/tpm1.c                          | 1 +
 drivers/char/tpm/tpm-chip.c                               | 2 ++
 drivers/char/tpm/tpm-sysfs.c                              | 1 +
 drivers/char/tpm/tpm_ppi.c                                | 1 +
 drivers/char/virtio_console.c                             | 2 ++
 drivers/char/xillybus/xillybus_class.c                    | 1 +
 drivers/clk/at91/at91rm9200.c                             | 1 +
 drivers/clk/at91/at91sam9260.c                            | 1 +
 drivers/clk/at91/at91sam9g45.c                            | 1 +
 drivers/clk/at91/at91sam9n12.c                            | 1 +
 drivers/clk/at91/at91sam9rl.c                             | 1 +
 drivers/clk/at91/at91sam9x5.c                             | 1 +
 drivers/clk/at91/clk-main.c                               | 1 +
 drivers/clk/at91/sam9x60.c                                | 1 +
 drivers/clk/at91/sama5d2.c                                | 1 +
 drivers/clk/at91/sama5d3.c                                | 1 +
 drivers/clk/at91/sama5d4.c                                | 1 +
 drivers/clk/at91/sama7g5.c                                | 1 +
 drivers/clk/at91/sckc.c                                   | 1 +
 drivers/clk/clk-cdce925.c                                 | 1 +
 drivers/clk/clk-lmk04832.c                                | 1 +
 drivers/clk/clk-qoriq.c                                   | 1 +
 drivers/clk/clk-renesas-pcie.c                            | 1 +
 drivers/clk/clk-si521xx.c                                 | 1 +
 drivers/clk/clk-si5341.c                                  | 2 ++
 drivers/clk/clk-sp7021.c                                  | 1 +
 drivers/clk/clk-versaclock5.c                             | 1 +
 drivers/clk/clk-versaclock7.c                             | 1 +
 drivers/clk/clk_test.c                                    | 1 +
 drivers/clk/davinci/pll.c                                 | 1 +
 drivers/clk/imx/clk.c                                     | 1 +
 drivers/clk/keystone/sci-clk.c                            | 1 +
 drivers/clk/keystone/syscon-clk.c                         | 1 +
 drivers/clk/mvebu/clk-cpu.c                               | 1 +
 drivers/clk/qcom/clk-krait.h                              | 2 ++
 drivers/clk/qcom/clk-regmap-mux-div.h                     | 1 +
 drivers/clk/qcom/clk-spmi-pmic-div.c                      | 1 +
 drivers/clk/qcom/gdsc.c                                   | 1 +
 drivers/clk/qcom/krait-cc.c                               | 1 +
 drivers/clk/rockchip/clk-pll.c                            | 1 +
 drivers/clk/samsung/clk-cpu.h                             | 2 ++
 drivers/clk/samsung/clk-exynos-clkout.c                   | 1 +
 drivers/clk/st/clkgen-fsyn.c                              | 1 +
 drivers/clk/sunxi-ng/ccu_common.h                         | 1 +
 drivers/clk/tegra/clk.c                                   | 1 +
 drivers/clk/ti/adpll.c                                    | 1 +
 drivers/clk/ti/clk-dra7-atl.c                             | 1 +
 drivers/clk/ti/clk.c                                      | 1 +
 drivers/clk/ti/clkctrl.c                                  | 1 +
 drivers/clk/versatile/clk-icst.c                          | 1 +
 drivers/clk/versatile/clk-sp810.c                         | 1 +
 drivers/clk/x86/clk-pmc-atom.c                            | 1 +
 drivers/clk/zynq/clkc.c                                   | 1 +
 drivers/clk/zynqmp/clkc.c                                 | 1 +
 drivers/clocksource/acpi_pm.c                             | 1 +
 drivers/clocksource/arm_arch_timer.c                      | 1 +
 drivers/clocksource/arm_global_timer.c                    | 1 +
 drivers/clocksource/exynos_mct.c                          | 1 +
 drivers/clocksource/ingenic-sysost.c                      | 1 +
 drivers/clocksource/ingenic-timer.c                       | 1 +
 drivers/clocksource/sh_mtu2.c                             | 1 +
 drivers/clocksource/timer-goldfish.c                      | 1 +
 drivers/clocksource/timer-zevio.c                         | 1 +
 drivers/comedi/comedi_fops.c                              | 1 +
 drivers/comedi/drivers/comedi_bond.c                      | 1 +
 drivers/comedi/kcomedilib/kcomedilib_main.c               | 1 +
 drivers/connector/cn_queue.c                              | 1 +
 drivers/counter/microchip-tcb-capture.c                   | 1 +
 drivers/cpufreq/acpi-cpufreq.c                            | 2 ++
 drivers/cpufreq/amd-pstate.c                              | 1 +
 drivers/cpufreq/apple-soc-cpufreq.c                       | 1 +
 drivers/cpufreq/brcmstb-avs-cpufreq.c                     | 2 ++
 drivers/cpufreq/cpufreq.c                                 | 3 +++
 drivers/cpufreq/cpufreq_conservative.c                    | 1 +
 drivers/cpufreq/cpufreq_governor.c                        | 1 +
 drivers/cpufreq/cpufreq_governor.h                        | 2 ++
 drivers/cpufreq/cpufreq_ondemand.c                        | 1 +
 drivers/cpufreq/cpufreq_stats.c                           | 1 +
 drivers/cpufreq/cpufreq_userspace.c                       | 1 +
 drivers/cpufreq/elanfreq.c                                | 1 +
 drivers/cpufreq/freq_table.c                              | 2 ++
 drivers/cpufreq/intel_pstate.c                            | 2 ++
 drivers/cpufreq/longhaul.c                                | 1 +
 drivers/cpufreq/powernv-cpufreq.c                         | 1 +
 drivers/cpufreq/qcom-cpufreq-hw.c                         | 1 +
 drivers/cpufreq/qcom-cpufreq-nvmem.c                      | 1 +
 drivers/cpufreq/sti-cpufreq.c                             | 1 +
 drivers/cpufreq/sun50i-cpufreq-nvmem.c                    | 1 +
 drivers/cpufreq/tegra194-cpufreq.c                        | 1 +
 drivers/cpuidle/cpuidle-psci-domain.c                     | 1 +
 drivers/cpuidle/dt_idle_genpd.c                           | 2 ++
 drivers/cpuidle/poll_state.c                              | 1 +
 drivers/cpuidle/sysfs.c                                   | 2 ++
 drivers/crypto/allwinner/sun8i-ce/sun8i-ce-core.c         | 1 +
 drivers/crypto/allwinner/sun8i-ss/sun8i-ss-core.c         | 1 +
 drivers/crypto/allwinner/sun8i-ss/sun8i-ss-hash.c         | 1 +
 drivers/crypto/allwinner/sun8i-ss/sun8i-ss-prng.c         | 1 +
 drivers/crypto/amlogic/amlogic-gxl-cipher.c               | 1 +
 drivers/crypto/amlogic/amlogic-gxl-core.c                 | 1 +
 drivers/crypto/atmel-aes.c                                | 1 +
 drivers/crypto/atmel-sha.c                                | 2 ++
 drivers/crypto/axis/artpec6_crypto.c                      | 1 +
 drivers/crypto/bcm/util.c                                 | 1 +
 drivers/crypto/caam/blob_gen.c                            | 1 +
 drivers/crypto/caam/caamalg_qi2.c                         | 2 ++
 drivers/crypto/caam/caamhash.c                            | 2 ++
 drivers/crypto/caam/desc_constr.h                         | 1 +
 drivers/crypto/caam/error.c                               | 1 +
 drivers/crypto/caam/intern.h                              | 1 +
 drivers/crypto/caam/key_gen.c                             | 1 +
 drivers/crypto/caam/regs.h                                | 1 +
 drivers/crypto/cavium/nitrox/nitrox_hal.c                 | 1 +
 drivers/crypto/cavium/nitrox/nitrox_isr.c                 | 1 +
 drivers/crypto/ccp/ccp-crypto-aes-cmac.c                  | 1 +
 drivers/crypto/ccp/ccp-crypto-aes-galois.c                | 1 +
 drivers/crypto/ccp/ccp-crypto-aes-xts.c                   | 1 +
 drivers/crypto/ccp/ccp-crypto-aes.c                       | 1 +
 drivers/crypto/ccp/ccp-crypto-des3.c                      | 1 +
 drivers/crypto/ccp/ccp-crypto-main.c                      | 1 +
 drivers/crypto/ccp/ccp-crypto-rsa.c                       | 1 +
 drivers/crypto/ccp/ccp-crypto-sha.c                       | 1 +
 drivers/crypto/ccp/ccp-debugfs.c                          | 1 +
 drivers/crypto/ccp/ccp-dev-v3.c                           | 1 +
 drivers/crypto/ccp/ccp-dev-v5.c                           | 1 +
 drivers/crypto/ccp/ccp-dev.c                              | 2 ++
 drivers/crypto/ccp/ccp-dev.h                              | 1 +
 drivers/crypto/ccp/platform-access.c                      | 1 +
 drivers/crypto/ccp/psp-dev.c                              | 1 +
 drivers/crypto/ccp/sev-dev.c                              | 2 ++
 drivers/crypto/ccp/sp-dev.c                               | 1 +
 drivers/crypto/ccp/tee-dev.c                              | 1 +
 drivers/crypto/ccree/cc_aead.c                            | 1 +
 drivers/crypto/ccree/cc_cipher.c                          | 1 +
 drivers/crypto/ccree/cc_driver.c                          | 2 ++
 drivers/crypto/ccree/cc_hash.c                            | 1 +
 drivers/crypto/ccree/cc_hw_queue_defs.h                   | 1 +
 drivers/crypto/ccree/cc_request_mgr.c                     | 1 +
 drivers/crypto/chelsio/chcr_algo.c                        | 1 +
 drivers/crypto/chelsio/chcr_core.c                        | 1 +
 drivers/crypto/gemini/sl3516-ce-core.c                    | 1 +
 drivers/crypto/hifn_795x.c                                | 2 ++
 drivers/crypto/hisilicon/debugfs.c                        | 2 ++
 drivers/crypto/hisilicon/hpre/hpre_main.c                 | 2 ++
 drivers/crypto/hisilicon/qm.c                             | 3 +++
 drivers/crypto/hisilicon/sec/sec_algs.c                   | 1 +
 drivers/crypto/hisilicon/sec/sec_drv.c                    | 2 ++
 drivers/crypto/hisilicon/sec2/sec_main.c                  | 2 ++
 drivers/crypto/hisilicon/zip/zip_crypto.c                 | 2 ++
 drivers/crypto/hisilicon/zip/zip_main.c                   | 2 ++
 drivers/crypto/inside-secure/safexcel.c                   | 2 ++
 drivers/crypto/inside-secure/safexcel_hash.c              | 1 +
 drivers/crypto/inside-secure/safexcel_ring.c              | 1 +
 drivers/crypto/intel/iaa/iaa_crypto_main.c                | 2 ++
 drivers/crypto/intel/ixp4xx/ixp4xx_crypto.c               | 2 ++
 drivers/crypto/intel/keembay/ocs-aes.c                    | 1 +
 drivers/crypto/intel/keembay/ocs-hcu.c                    | 1 +
 drivers/crypto/intel/qat/qat_c3xxxvf/adf_drv.c            | 1 +
 drivers/crypto/intel/qat/qat_c62xvf/adf_drv.c             | 1 +
 drivers/crypto/intel/qat/qat_common/adf_admin.c           | 1 +
 drivers/crypto/intel/qat/qat_common/adf_cfg.c             | 1 +
 drivers/crypto/intel/qat/qat_common/adf_dbgfs.c           | 1 +
 drivers/crypto/intel/qat/qat_common/adf_gen2_config.c     | 1 +
 drivers/crypto/intel/qat/qat_common/adf_gen4_config.c     | 1 +
 drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.c    | 1 +
 drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.h    | 1 +
 drivers/crypto/intel/qat/qat_common/adf_gen4_pm.c         | 1 +
 drivers/crypto/intel/qat/qat_common/adf_gen4_pm_debugfs.c | 1 +
 drivers/crypto/intel/qat/qat_common/adf_heartbeat.c       | 1 +
 drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c | 1 +
 drivers/crypto/intel/qat/qat_common/adf_isr.c             | 1 +
 drivers/crypto/intel/qat/qat_common/adf_sysfs.c           | 1 +
 .../crypto/intel/qat/qat_common/adf_sysfs_ras_counters.c  | 1 +
 drivers/crypto/intel/qat/qat_common/adf_sysfs_rl.c        | 1 +
 drivers/crypto/intel/qat/qat_common/adf_tl_debugfs.c      | 2 ++
 drivers/crypto/intel/qat/qat_common/adf_transport.c       | 2 ++
 drivers/crypto/intel/qat/qat_common/adf_transport_debug.c | 1 +
 drivers/crypto/intel/qat/qat_common/adf_vf_isr.c          | 1 +
 drivers/crypto/intel/qat/qat_common/qat_compression.c     | 2 ++
 drivers/crypto/intel/qat/qat_common/qat_crypto.c          | 2 ++
 drivers/crypto/intel/qat/qat_common/qat_uclo.c            | 1 +
 drivers/crypto/intel/qat/qat_dh895xccvf/adf_drv.c         | 1 +
 drivers/crypto/marvell/cesa/cesa.c                        | 2 ++
 drivers/crypto/marvell/cesa/tdma.c                        | 1 +
 drivers/crypto/marvell/octeontx/otx_cptpf_ucode.c         | 2 ++
 drivers/crypto/marvell/octeontx/otx_cptvf_main.c          | 1 +
 drivers/crypto/marvell/octeontx2/otx2_cptlf.c             | 1 +
 drivers/crypto/marvell/octeontx2/otx2_cptpf_main.c        | 2 ++
 drivers/crypto/marvell/octeontx2/otx2_cptpf_ucode.c       | 2 ++
 drivers/crypto/mxs-dcp.c                                  | 1 +
 drivers/crypto/n2_core.c                                  | 1 +
 drivers/crypto/nx/nx-common-pseries.c                     | 1 +
 drivers/crypto/omap-aes.c                                 | 2 ++
 drivers/crypto/omap-sham.c                                | 2 ++
 drivers/crypto/qce/aead.c                                 | 1 +
 drivers/crypto/qce/sha.c                                  | 1 +
 drivers/crypto/qce/skcipher.c                             | 1 +
 drivers/crypto/rockchip/rk3288_crypto.c                   | 1 +
 drivers/crypto/rockchip/rk3288_crypto_ahash.c             | 1 +
 drivers/crypto/rockchip/rk3288_crypto_skcipher.c          | 1 +
 drivers/crypto/sahara.c                                   | 1 +
 drivers/crypto/stm32/stm32-hash.c                         | 1 +
 drivers/crypto/virtio/virtio_crypto_core.c                | 2 ++
 drivers/cxl/acpi.c                                        | 2 ++
 drivers/cxl/core/hdm.c                                    | 1 +
 drivers/cxl/core/mbox.c                                   | 1 +
 drivers/cxl/core/memdev.c                                 | 2 ++
 drivers/cxl/core/pmem.c                                   | 1 +
 drivers/cxl/core/port.c                                   | 3 +++
 drivers/cxl/core/region.c                                 | 2 ++
 drivers/cxl/cxl.h                                         | 3 +++
 drivers/cxl/cxlmem.h                                      | 1 +
 drivers/cxl/mem.c                                         | 1 +
 drivers/dax/bus.c                                         | 2 ++
 drivers/dax/pmem.c                                        | 1 +
 drivers/devfreq/devfreq-event.c                           | 1 +
 drivers/devfreq/devfreq.c                                 | 2 ++
 drivers/devfreq/event/rockchip-dfi.c                      | 1 +
 drivers/devfreq/governor_userspace.c                      | 1 +
 drivers/dio/dio-sysfs.c                                   | 1 +
 drivers/dma-buf/dma-heap.c                                | 1 +
 drivers/dma-buf/st-dma-fence.c                            | 1 +
 drivers/dma-buf/sw_sync.c                                 | 1 +
 drivers/dma-buf/sync_file.c                               | 1 +
 drivers/dma/acpi-dma.c                                    | 1 +
 drivers/dma/altera-msgdma.c                               | 1 +
 drivers/dma/amba-pl08x.c                                  | 1 +
 drivers/dma/apple-admac.c                                 | 1 +
 drivers/dma/bcm2835-dma.c                                 | 1 +
 drivers/dma/dmaengine.c                                   | 1 +
 drivers/dma/dw-edma/dw-edma-core.c                        | 1 +
 drivers/dma/dw-edma/dw-edma-v0-core.c                     | 1 +
 drivers/dma/dw-edma/dw-edma-v0-debugfs.c                  | 1 +
 drivers/dma/dw-edma/dw-hdma-v0-core.c                     | 1 +
 drivers/dma/dw-edma/dw-hdma-v0-debugfs.c                  | 1 +
 drivers/dma/dw/dw.c                                       | 1 +
 drivers/dma/dw/idma32.c                                   | 1 +
 drivers/dma/fsl-edma-common.c                             | 1 +
 drivers/dma/fsl-edma-main.c                               | 1 +
 drivers/dma/fsl-qdma.c                                    | 2 ++
 drivers/dma/fsl_raid.c                                    | 2 ++
 drivers/dma/fsldma.c                                      | 1 +
 drivers/dma/hisi_dma.c                                    | 2 ++
 drivers/dma/idxd/bus.c                                    | 1 +
 drivers/dma/idxd/device.c                                 | 1 +
 drivers/dma/idxd/init.c                                   | 1 +
 drivers/dma/idxd/irq.c                                    | 1 +
 drivers/dma/idxd/perfmon.c                                | 1 +
 drivers/dma/idxd/perfmon.h                                | 1 +
 drivers/dma/idxd/submit.c                                 | 1 +
 drivers/dma/idxd/sysfs.c                                  | 2 ++
 drivers/dma/ioat/dma.c                                    | 1 +
 drivers/dma/ioat/init.c                                   | 2 ++
 drivers/dma/ioat/sysfs.c                                  | 2 ++
 drivers/dma/lgm/lgm-dma.c                                 | 2 ++
 drivers/dma/ls2x-apb-dma.c                                | 1 +
 drivers/dma/mediatek/mtk-cqdma.c                          | 1 +
 drivers/dma/mediatek/mtk-hsdma.c                          | 1 +
 drivers/dma/mv_xor_v2.c                                   | 1 +
 drivers/dma/nbpfaxi.c                                     | 1 +
 drivers/dma/plx_dma.c                                     | 1 +
 drivers/dma/ppc4xx/adma.c                                 | 2 ++
 drivers/dma/ptdma/ptdma-dev.c                             | 1 +
 drivers/dma/pxa_dma.c                                     | 1 +
 drivers/dma/qcom/gpi.c                                    | 2 ++
 drivers/dma/qcom/hidma.c                                  | 1 +
 drivers/dma/qcom/hidma_dbg.c                              | 1 +
 drivers/dma/qcom/hidma_ll.c                               | 2 ++
 drivers/dma/qcom/hidma_mgmt_sys.c                         | 2 ++
 drivers/dma/sh/rcar-dmac.c                                | 1 +
 drivers/dma/sh/rz-dmac.c                                  | 1 +
 drivers/dma/sh/shdmac.c                                   | 1 +
 drivers/dma/sh/usb-dmac.c                                 | 1 +
 drivers/dma/st_fdma.c                                     | 1 +
 drivers/dma/sun6i-dma.c                                   | 1 +
 drivers/dma/tegra186-gpc-dma.c                            | 1 +
 drivers/dma/tegra20-apb-dma.c                             | 1 +
 drivers/dma/ti/cppi41.c                                   | 1 +
 drivers/dma/uniphier-xdmac.c                              | 1 +
 drivers/dma/xgene-dma.c                                   | 1 +
 drivers/dma/xilinx/xdma.c                                 | 1 +
 drivers/dma/xilinx/xilinx_dma.c                           | 1 +
 drivers/dma/xilinx/xilinx_dpdma.c                         | 3 +++
 drivers/edac/al_mc_edac.c                                 | 1 +
 drivers/edac/amd64_edac.c                                 | 2 ++
 drivers/edac/armada_xp_edac.c                             | 1 +
 drivers/edac/debugfs.c                                    | 1 +
 drivers/edac/dmc520_edac.c                                | 1 +
 drivers/edac/edac_device.c                                | 1 +
 drivers/edac/edac_device_sysfs.c                          | 2 ++
 drivers/edac/edac_mc.c                                    | 1 +
 drivers/edac/edac_mc_sysfs.c                              | 2 ++
 drivers/edac/edac_module.c                                | 1 +
 drivers/edac/edac_pci.c                                   | 1 +
 drivers/edac/edac_pci_sysfs.c                             | 2 ++
 drivers/edac/fsl_ddr_edac.c                               | 2 ++
 drivers/edac/ghes_edac.c                                  | 1 +
 drivers/edac/highbank_mc_edac.c                           | 1 +
 drivers/edac/i10nm_base.c                                 | 2 ++
 drivers/edac/i5000_edac.c                                 | 1 +
 drivers/edac/i5100_edac.c                                 | 1 +
 drivers/edac/i5400_edac.c                                 | 1 +
 drivers/edac/i7300_edac.c                                 | 1 +
 drivers/edac/i7core_edac.c                                | 2 ++
 drivers/edac/i82975x_edac.c                               | 1 +
 drivers/edac/igen6_edac.c                                 | 1 +
 drivers/edac/mpc85xx_edac.c                               | 2 ++
 drivers/edac/npcm_edac.c                                  | 1 +
 drivers/edac/octeon_edac-l2c.c                            | 1 +
 drivers/edac/octeon_edac-lmc.c                            | 2 ++
 drivers/edac/pnd2_edac.c                                  | 1 +
 drivers/edac/ppc4xx_edac.c                                | 1 +
 drivers/edac/sb_edac.c                                    | 1 +
 drivers/edac/skx_base.c                                   | 1 +
 drivers/edac/skx_common.c                                 | 1 +
 drivers/edac/synopsys_edac.c                              | 2 ++
 drivers/edac/thunderx_edac.c                              | 1 +
 drivers/edac/versal_edac.c                                | 1 +
 drivers/edac/xgene_edac.c                                 | 1 +
 drivers/edac/zynqmp_edac.c                                | 2 ++
 drivers/eisa/eisa-bus.c                                   | 2 ++
 drivers/extcon/devres.c                                   | 1 +
 drivers/extcon/extcon.c                                   | 1 +
 drivers/extcon/extcon.h                                   | 1 +
 drivers/firewire/core-device.c                            | 1 +
 drivers/firewire/ohci.c                                   | 1 +
 drivers/firewire/sbp2.c                                   | 1 +
 drivers/firmware/arm_ffa/bus.c                            | 2 ++
 drivers/firmware/arm_scmi/bus.c                           | 1 +
 drivers/firmware/arm_scmi/driver.c                        | 2 ++
 drivers/firmware/arm_scmi/powercap.c                      | 1 +
 drivers/firmware/arm_scmi/raw_mode.c                      | 3 +++
 drivers/firmware/arm_scmi/scmi_power_control.c            | 1 +
 drivers/firmware/arm_scpi.c                               | 2 ++
 drivers/firmware/broadcom/bcm47xx_nvram.c                 | 1 +
 drivers/firmware/broadcom/bcm47xx_sprom.c                 | 3 +++
 drivers/firmware/cirrus/cs_dsp.c                          | 1 +
 drivers/firmware/dmi-id.c                                 | 1 +
 drivers/firmware/dmi-sysfs.c                              | 1 +
 drivers/firmware/dmi_scan.c                               | 2 ++
 drivers/firmware/edd.c                                    | 2 ++
 drivers/firmware/efi/cper-arm.c                           | 1 +
 drivers/firmware/efi/cper-x86.c                           | 1 +
 drivers/firmware/efi/cper.c                               | 1 +
 drivers/firmware/efi/dev-path-parser.c                    | 1 +
 drivers/firmware/efi/efi-pstore.c                         | 1 +
 drivers/firmware/efi/efi.c                                | 2 ++
 drivers/firmware/efi/esrt.c                               | 1 +
 drivers/firmware/efi/libstub/efi-stub-helper.c            | 2 ++
 drivers/firmware/efi/libstub/gop.c                        | 1 +
 drivers/firmware/efi/libstub/printk.c                     | 1 +
 drivers/firmware/efi/libstub/string.c                     | 1 +
 drivers/firmware/efi/libstub/vsprintf.c                   | 1 +
 drivers/firmware/efi/runtime-wrappers.c                   | 1 +
 drivers/firmware/google/gsmi.c                            | 2 ++
 drivers/firmware/google/vpd.c                             | 1 +
 drivers/firmware/imx/imx-dsp.c                            | 1 +
 drivers/firmware/imx/imx-scu-irq.c                        | 1 +
 drivers/firmware/imx/imx-scu.c                            | 2 ++
 drivers/firmware/iscsi_ibft.c                             | 1 +
 drivers/firmware/memmap.c                                 | 1 +
 drivers/firmware/meson/meson_sm.c                         | 1 +
 drivers/firmware/microchip/mpfs-auto-update.c             | 1 +
 drivers/firmware/psci/psci_checker.c                      | 1 +
 drivers/firmware/qemu_fw_cfg.c                            | 3 +++
 drivers/firmware/raspberrypi.c                            | 1 +
 drivers/firmware/smccc/soc_id.c                           | 1 +
 drivers/firmware/stratix10-rsu.c                          | 2 ++
 drivers/firmware/tegra/bpmp-debugfs.c                     | 1 +
 drivers/firmware/tegra/bpmp-tegra186.c                    | 1 +
 drivers/firmware/tegra/bpmp-tegra210.c                    | 1 +
 drivers/firmware/tegra/bpmp.c                             | 1 +
 drivers/firmware/ti_sci.c                                 | 2 ++
 drivers/firmware/turris-mox-rwtm.c                        | 1 +
 drivers/firmware/xilinx/zynqmp-debug.c                    | 2 ++
 drivers/firmware/xilinx/zynqmp.c                          | 3 +++
 drivers/fpga/altera-cvp.c                                 | 2 ++
 drivers/fpga/altera-ps-spi.c                              | 1 +
 drivers/fpga/dfl-afu-error.c                              | 2 ++
 drivers/fpga/dfl-afu-main.c                               | 2 ++
 drivers/fpga/dfl-fme-error.c                              | 2 ++
 drivers/fpga/dfl-fme-main.c                               | 1 +
 drivers/fpga/dfl-fme-perf.c                               | 1 +
 drivers/fpga/dfl.c                                        | 3 +++
 drivers/fpga/fpga-bridge.c                                | 1 +
 drivers/fpga/fpga-mgr.c                                   | 1 +
 drivers/fpga/fpga-region.c                                | 1 +
 drivers/fpga/intel-m10-bmc-sec-update.c                   | 2 ++
 drivers/fsi/fsi-core.c                                    | 2 ++
 drivers/fsi/fsi-master-ast-cf.c                           | 2 ++
 drivers/fsi/fsi-master-gpio.c                             | 2 ++
 drivers/fsi/fsi-occ.c                                     | 1 +
 drivers/fsi/fsi-sbefifo.c                                 | 1 +
 drivers/gnss/core.c                                       | 1 +
 drivers/gpio/gpio-aggregator.c                            | 2 ++
 drivers/gpio/gpio-exar.c                                  | 1 +
 drivers/gpio/gpio-it87.c                                  | 1 +
 drivers/gpio/gpio-mockup.c                                | 2 ++
 drivers/gpio/gpio-sim.c                                   | 2 ++
 drivers/gpio/gpio-tegra.c                                 | 1 +
 drivers/gpio/gpio-tegra186.c                              | 1 +
 drivers/gpio/gpio-thunderx.c                              | 1 +
 drivers/gpio/gpiolib-acpi.c                               | 2 ++
 drivers/gpio/gpiolib-of.c                                 | 1 +
 drivers/gpio/gpiolib-swnode.c                             | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_aca.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_aldebaran.c      | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_arcturus.c       | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gc_9_4_3.c       | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10.c        | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10_3.c      | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v11.c        | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c         | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c         | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.c         | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_atombios.c              | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_bo_list.c               | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.h                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_debugfs.c               | 2 ++
 drivers/gpu/drm/amd/amdgpu/amdgpu_device.c                | 3 +++
 drivers/gpu/drm/amd/amdgpu/amdgpu_discovery.c             | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_fence.c                 | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_fru_eeprom.c            | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_gem.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_i2c.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_ih.h                    | 3 +++
 drivers/gpu/drm/amd/amdgpu/amdgpu_irq.h                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_mes.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_pmu.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/amdgpu_rap.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_ras.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.c            | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_securedisplay.c         | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_ucode.c                 | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_umsch_mm.c              | 2 ++
 drivers/gpu/drm/amd/amdgpu/amdgpu_uvd.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_vce.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/amdgpu_vpe.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/atom.c                         | 1 +
 drivers/gpu/drm/amd/amdgpu/atombios_encoders.c            | 1 +
 drivers/gpu/drm/amd/amdgpu/cik_ih.c                       | 1 +
 drivers/gpu/drm/amd/amdgpu/cik_sdma.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/cz_ih.c                        | 1 +
 drivers/gpu/drm/amd/amdgpu/dce_v10_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/dce_v11_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/dce_v6_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/dce_v8_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/gfx_v11_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/gfx_v6_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/gfx_v7_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/gfx_v8_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/gfx_v9_4_2.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/gfx_v9_4_3.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/gfxhub_v11_5_0.c               | 1 +
 drivers/gpu/drm/amd/amdgpu/gfxhub_v1_0.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/gfxhub_v1_2.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/gfxhub_v2_0.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0_3.c                | 1 +
 drivers/gpu/drm/amd/amdgpu/gmc_v10_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/gmc_v11_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/gmc_v6_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/gmc_v7_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/gmc_v8_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/gmc_v9_0.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/iceland_ih.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/ih_v6_0.c                      | 1 +
 drivers/gpu/drm/amd/amdgpu/ih_v6_1.c                      | 1 +
 drivers/gpu/drm/amd/amdgpu/imu_v11_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/jpeg_v1_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/jpeg_v2_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/jpeg_v2_5.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/jpeg_v3_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_3.c                  | 2 ++
 drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_5.c                  | 2 ++
 drivers/gpu/drm/amd/amdgpu/lsdma_v6_0.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mes_v10_1.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/mes_v11_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/mmhub_v1_0.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v1_7.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v1_8.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v2_0.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v2_3.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v3_0.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_1.c                 | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_2.c                 | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v3_3.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/mmhub_v9_4.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/navi10_ih.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v2_3.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v4_3.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v6_1.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v7_11.c                   | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v7_2.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v7_4.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v7_7.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/nbio_v7_9.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/psp_v10_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/psp_v11_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/psp_v11_0_8.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/psp_v12_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/psp_v13_0.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/psp_v13_0_4.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/psp_v3_1.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/sdma_v2_4.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/sdma_v3_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c                  | 2 ++
 drivers/gpu/drm/amd/amdgpu/sdma_v5_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/sdma_v5_2.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/sdma_v6_0.c                    | 2 ++
 drivers/gpu/drm/amd/amdgpu/si_dma.c                       | 2 ++
 drivers/gpu/drm/amd/amdgpu/si_ih.c                        | 1 +
 drivers/gpu/drm/amd/amdgpu/smu_v11_0_i2c.c                | 1 +
 drivers/gpu/drm/amd/amdgpu/tonga_ih.c                     | 1 +
 drivers/gpu/drm/amd/amdgpu/umsch_mm_v4_0.c                | 1 +
 drivers/gpu/drm/amd/amdgpu/uvd_v3_1.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/uvd_v4_2.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/uvd_v5_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/uvd_v6_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/uvd_v7_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vce_v2_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vce_v3_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vce_v4_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vcn_sw_ring.c                  | 1 +
 drivers/gpu/drm/amd/amdgpu/vcn_v1_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vcn_v2_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vcn_v3_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c                     | 2 ++
 drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/vcn_v4_0_5.c                   | 2 ++
 drivers/gpu/drm/amd/amdgpu/vega10_ih.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/vega20_ih.c                    | 1 +
 drivers/gpu/drm/amd/amdgpu/vpe_v6_1.c                     | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_crat.c                     | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_debugfs.c                  | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c          | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v10.c          | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v11.c          | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v9.c           | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c           | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_v9.c        | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_vi.c        | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_process.c                  | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_smi_events.c               | 1 +
 drivers/gpu/drm/amd/amdkfd/kfd_topology.c                 | 1 +
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c         | 4 ++++
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crc.c     | 2 ++
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_debugfs.c | 2 ++
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c    | 2 ++
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_helpers.c | 1 +
 .../gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c   | 1 +
 drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_plane.c   | 1 +
 .../drm/amd/display/dc/dcn10/dcn10_hw_sequencer_debug.c   | 1 +
 drivers/gpu/drm/amd/display/dc/dm_services.h              | 1 +
 drivers/gpu/drm/amd/display/modules/hdcp/hdcp_log.c       | 1 +
 drivers/gpu/drm/amd/pm/amdgpu_pm.c                        | 1 +
 drivers/gpu/drm/amd/pm/legacy-dpm/si_dpm.c                | 1 +
 drivers/gpu/drm/amd/pm/powerplay/amd_powerplay.c          | 1 +
 drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu10_hwmgr.c      | 1 +
 drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_hwmgr.c       | 1 +
 drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu8_hwmgr.c       | 1 +
 drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega10_hwmgr.c     | 1 +
 drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega12_hwmgr.c     | 1 +
 drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega20_hwmgr.c     | 1 +
 drivers/gpu/drm/amd/pm/powerplay/smumgr/smu10_smumgr.c    | 1 +
 drivers/gpu/drm/amd/pm/powerplay/smumgr/smu7_smumgr.c     | 1 +
 drivers/gpu/drm/amd/pm/powerplay/smumgr/vega10_smumgr.c   | 1 +
 drivers/gpu/drm/amd/pm/powerplay/smumgr/vega12_smumgr.c   | 1 +
 drivers/gpu/drm/amd/pm/powerplay/smumgr/vega20_smumgr.c   | 1 +
 drivers/gpu/drm/amd/pm/swsmu/smu11/arcturus_ppt.c         | 1 +
 drivers/gpu/drm/amd/pm/swsmu/smu11/navi10_ppt.c           | 2 ++
 drivers/gpu/drm/amd/pm/swsmu/smu11/sienna_cichlid_ppt.c   | 1 +
 drivers/gpu/drm/amd/pm/swsmu/smu11/smu_v11_0.c            | 2 ++
 drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c            | 1 +
 drivers/gpu/drm/amd/pm/swsmu/smu13/aldebaran_ppt.c        | 1 +
 drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0.c            | 2 ++
 drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c      | 1 +
 drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_6_ppt.c      | 1 +
 drivers/gpu/drm/amd/pm/swsmu/smu14/smu_v14_0.c            | 2 ++
 drivers/gpu/drm/amd/pm/swsmu/smu_cmn.c                    | 1 +
 drivers/gpu/drm/arm/display/include/malidp_io.h           | 1 +
 drivers/gpu/drm/arm/display/komeda/d71/d71_component.c    | 1 +
 drivers/gpu/drm/arm/display/komeda/komeda_color_mgmt.c    | 2 ++
 drivers/gpu/drm/arm/display/komeda/komeda_crtc.c          | 2 ++
 drivers/gpu/drm/arm/display/komeda/komeda_event.c         | 1 +
 drivers/gpu/drm/arm/display/komeda/komeda_pipeline.c      | 1 +
 drivers/gpu/drm/arm/malidp_drv.c                          | 1 +
 drivers/gpu/drm/arm/malidp_hw.c                           | 1 +
 drivers/gpu/drm/arm/malidp_planes.c                       | 1 +
 drivers/gpu/drm/armada/armada_debugfs.c                   | 1 +
 drivers/gpu/drm/aspeed/aspeed_gfx_drv.c                   | 2 ++
 drivers/gpu/drm/ast/ast_i2c.c                             | 1 +
 drivers/gpu/drm/atmel-hlcdc/atmel_hlcdc_output.c          | 1 +
 drivers/gpu/drm/bridge/aux-bridge.c                       | 1 +
 drivers/gpu/drm/bridge/aux-hpd-bridge.c                   | 1 +
 drivers/gpu/drm/bridge/cadence/cdns-dsi-core.c            | 1 +
 drivers/gpu/drm/bridge/fsl-ldb.c                          | 1 +
 drivers/gpu/drm/bridge/ite-it6505.c                       | 2 ++
 drivers/gpu/drm/bridge/nwl-dsi.c                          | 1 +
 drivers/gpu/drm/bridge/samsung-dsim.c                     | 1 +
 drivers/gpu/drm/bridge/synopsys/dw-hdmi-ahb-audio.c       | 1 +
 drivers/gpu/drm/bridge/synopsys/dw-hdmi.c                 | 1 +
 drivers/gpu/drm/display/drm_dp_aux_dev.c                  | 1 +
 drivers/gpu/drm/display/drm_dp_mst_topology.c             | 1 +
 drivers/gpu/drm/drm_atomic.c                              | 1 +
 drivers/gpu/drm/drm_atomic_helper.c                       | 1 +
 drivers/gpu/drm/drm_atomic_uapi.c                         | 1 +
 drivers/gpu/drm/drm_connector.c                           | 1 +
 drivers/gpu/drm/drm_crtc.c                                | 1 +
 drivers/gpu/drm/drm_damage_helper.c                       | 2 ++
 drivers/gpu/drm/drm_debugfs.c                             | 1 +
 drivers/gpu/drm/drm_debugfs_crc.c                         | 1 +
 drivers/gpu/drm/drm_drv.c                                 | 1 +
 drivers/gpu/drm/drm_edid.c                                | 1 +
 drivers/gpu/drm/drm_encoder.c                             | 1 +
 drivers/gpu/drm/drm_fb_helper.c                           | 1 +
 drivers/gpu/drm/drm_file.c                                | 1 +
 drivers/gpu/drm/drm_lease.c                               | 1 +
 drivers/gpu/drm/drm_mipi_dbi.c                            | 1 +
 drivers/gpu/drm/drm_mode_config.c                         | 1 +
 drivers/gpu/drm/drm_modes.c                               | 2 ++
 drivers/gpu/drm/drm_pci.c                                 | 1 +
 drivers/gpu/drm/drm_plane.c                               | 2 ++
 drivers/gpu/drm/drm_print.c                               | 1 +
 drivers/gpu/drm/drm_privacy_screen.c                      | 1 +
 drivers/gpu/drm/drm_property.c                            | 1 +
 drivers/gpu/drm/drm_syncobj.c                             | 1 +
 drivers/gpu/drm/drm_sysfs.c                               | 1 +
 drivers/gpu/drm/drm_writeback.c                           | 2 ++
 drivers/gpu/drm/etnaviv/etnaviv_gem_submit.c              | 1 +
 drivers/gpu/drm/etnaviv/etnaviv_gpu.c                     | 1 +
 drivers/gpu/drm/etnaviv/etnaviv_iommu_v2.c                | 1 +
 drivers/gpu/drm/exynos/exynos_drm_g2d.c                   | 1 +
 drivers/gpu/drm/exynos/exynos_drm_vidi.c                  | 2 ++
 drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_drv.c                 | 1 +
 drivers/gpu/drm/gma500/intel_gmbus.c                      | 1 +
 drivers/gpu/drm/gma500/intel_i2c.c                        | 1 +
 drivers/gpu/drm/gma500/oaktrail_hdmi_i2c.c                | 1 +
 drivers/gpu/drm/gma500/psb_intel_sdvo.c                   | 1 +
 drivers/gpu/drm/gud/gud_connector.c                       | 1 +
 drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_i2c.c           | 1 +
 drivers/gpu/drm/hyperv/hyperv_drm_drv.c                   | 1 +
 drivers/gpu/drm/hyperv/hyperv_drm_proto.c                 | 1 +
 drivers/gpu/drm/i915/display/hsw_ips.c                    | 2 ++
 drivers/gpu/drm/i915/display/intel_backlight.c            | 1 +
 drivers/gpu/drm/i915/display/intel_crtc_state_dump.c      | 1 +
 drivers/gpu/drm/i915/display/intel_cursor.c               | 1 +
 drivers/gpu/drm/i915/display/intel_ddi.c                  | 1 +
 drivers/gpu/drm/i915/display/intel_display.c              | 1 +
 drivers/gpu/drm/i915/display/intel_display_debugfs.c      | 3 +++
 .../gpu/drm/i915/display/intel_display_debugfs_params.c   | 2 ++
 drivers/gpu/drm/i915/display/intel_display_driver.c       | 1 +
 drivers/gpu/drm/i915/display/intel_dp.c                   | 2 ++
 drivers/gpu/drm/i915/display/intel_dp_aux.c               | 1 +
 drivers/gpu/drm/i915/display/intel_drrs.c                 | 2 ++
 drivers/gpu/drm/i915/display/intel_global_state.c         | 1 +
 drivers/gpu/drm/i915/display/intel_gmbus.c                | 1 +
 drivers/gpu/drm/i915/display/intel_hotplug.c              | 1 +
 drivers/gpu/drm/i915/display/intel_sdvo.c                 | 1 +
 drivers/gpu/drm/i915/display/intel_tc.c                   | 1 +
 drivers/gpu/drm/i915/display/intel_tv.c                   | 1 +
 drivers/gpu/drm/i915/display/intel_wm.c                   | 1 +
 drivers/gpu/drm/i915/display/skl_universal_plane.c        | 1 +
 drivers/gpu/drm/i915/display/skl_watermark.c              | 1 +
 drivers/gpu/drm/i915/gem/i915_gem_context.c               | 2 ++
 drivers/gpu/drm/i915/gem/i915_gem_create.c                | 2 ++
 drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c            | 1 +
 drivers/gpu/drm/i915/gem/i915_gem_mman.c                  | 1 +
 drivers/gpu/drm/i915/gem/i915_gem_phys.c                  | 1 +
 drivers/gpu/drm/i915/gem/i915_gem_shmem.c                 | 1 +
 drivers/gpu/drm/i915/gem/i915_gem_shrinker.c              | 1 +
 drivers/gpu/drm/i915/gem/selftests/i915_gem_client_blt.c  | 1 +
 drivers/gpu/drm/i915/gem/selftests/i915_gem_coherency.c   | 1 +
 drivers/gpu/drm/i915/gem/selftests/i915_gem_context.c     | 1 +
 drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c        | 1 +
 drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.c        | 1 +
 drivers/gpu/drm/i915/gt/gen8_engine_cs.c                  | 1 +
 drivers/gpu/drm/i915/gt/gen8_ppgtt.c                      | 1 +
 drivers/gpu/drm/i915/gt/intel_context_sseu.c              | 1 +
 drivers/gpu/drm/i915/gt/intel_engine_cs.c                 | 2 ++
 drivers/gpu/drm/i915/gt/intel_engine_user.c               | 1 +
 drivers/gpu/drm/i915/gt/intel_execlists_submission.c      | 2 ++
 drivers/gpu/drm/i915/gt/intel_ggtt.c                      | 1 +
 drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c              | 1 +
 drivers/gpu/drm/i915/gt/intel_gt.c                        | 1 +
 drivers/gpu/drm/i915/gt/intel_gt_debugfs.c                | 1 +
 drivers/gpu/drm/i915/gt/intel_gt_sysfs_pm.c               | 1 +
 drivers/gpu/drm/i915/gt/intel_gtt.c                       | 1 +
 drivers/gpu/drm/i915/gt/intel_gtt.h                       | 1 +
 drivers/gpu/drm/i915/gt/intel_lrc.c                       | 1 +
 drivers/gpu/drm/i915/gt/intel_lrc_reg.h                   | 1 +
 drivers/gpu/drm/i915/gt/intel_migrate.c                   | 1 +
 drivers/gpu/drm/i915/gt/intel_renderstate.c               | 1 +
 drivers/gpu/drm/i915/gt/intel_ring_submission.c           | 1 +
 drivers/gpu/drm/i915/gt/mock_engine.c                     | 1 +
 drivers/gpu/drm/i915/gt/selftest_execlists.c              | 1 +
 drivers/gpu/drm/i915/gt/selftest_hangcheck.c              | 2 ++
 drivers/gpu/drm/i915/gt/selftest_lrc.c                    | 1 +
 drivers/gpu/drm/i915/gt/selftest_rps.c                    | 1 +
 drivers/gpu/drm/i915/gt/selftest_timeline.c               | 1 +
 drivers/gpu/drm/i915/gt/selftest_tlb.c                    | 1 +
 drivers/gpu/drm/i915/gt/selftest_workarounds.c            | 1 +
 drivers/gpu/drm/i915/gt/sysfs_engines.c                   | 1 +
 drivers/gpu/drm/i915/gt/uc/intel_gsc_fw.c                 | 1 +
 drivers/gpu/drm/i915/gt/uc/intel_gsc_uc_heci_cmd_submit.c | 1 +
 drivers/gpu/drm/i915/gt/uc/intel_guc.c                    | 1 +
 drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c           | 1 +
 drivers/gpu/drm/i915/gt/uc/intel_guc_log_debugfs.c        | 1 +
 drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c         | 2 ++
 drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c                  | 1 +
 drivers/gpu/drm/i915/gvt/aperture_gm.c                    | 1 +
 drivers/gpu/drm/i915/gvt/cmd_parser.c                     | 1 +
 drivers/gpu/drm/i915/gvt/debugfs.c                        | 1 +
 drivers/gpu/drm/i915/gvt/firmware.c                       | 1 +
 drivers/gpu/drm/i915/gvt/handlers.c                       | 2 ++
 drivers/gpu/drm/i915/gvt/kvmgt.c                          | 1 +
 drivers/gpu/drm/i915/gvt/scheduler.c                      | 1 +
 drivers/gpu/drm/i915/gvt/trace.h                          | 1 +
 drivers/gpu/drm/i915/gvt/vgpu.c                           | 1 +
 drivers/gpu/drm/i915/i915_cmd_parser.c                    | 1 +
 drivers/gpu/drm/i915/i915_debugfs.c                       | 1 +
 drivers/gpu/drm/i915/i915_debugfs_params.c                | 1 +
 drivers/gpu/drm/i915/i915_gem.c                           | 1 +
 drivers/gpu/drm/i915/i915_gpu_error.c                     | 2 ++
 drivers/gpu/drm/i915/i915_hwmon.c                         | 2 ++
 drivers/gpu/drm/i915/i915_irq.c                           | 1 +
 drivers/gpu/drm/i915/i915_mitigations.c                   | 1 +
 drivers/gpu/drm/i915/i915_pci.c                           | 1 +
 drivers/gpu/drm/i915/i915_perf.c                          | 3 +++
 drivers/gpu/drm/i915/i915_perf_types.h                    | 1 +
 drivers/gpu/drm/i915/i915_pmu.c                           | 1 +
 drivers/gpu/drm/i915/i915_query.c                         | 1 +
 drivers/gpu/drm/i915/i915_request.c                       | 1 +
 drivers/gpu/drm/i915/i915_scatterlist.h                   | 1 +
 drivers/gpu/drm/i915/i915_syncmap.c                       | 1 +
 drivers/gpu/drm/i915/i915_user_extensions.c               | 1 +
 drivers/gpu/drm/i915/i915_vma.c                           | 1 +
 drivers/gpu/drm/i915/i915_vma.h                           | 1 +
 drivers/gpu/drm/i915/intel_memory_region.c                | 1 +
 drivers/gpu/drm/i915/pxp/intel_pxp.c                      | 1 +
 drivers/gpu/drm/i915/pxp/intel_pxp_debugfs.c              | 1 +
 drivers/gpu/drm/i915/pxp/intel_pxp_session.c              | 1 +
 drivers/gpu/drm/i915/selftests/i915_random.h              | 1 +
 drivers/gpu/drm/i915/selftests/i915_request.c             | 3 +++
 drivers/gpu/drm/i915/selftests/i915_syncmap.c             | 1 +
 drivers/gpu/drm/i915/selftests/igt_spinner.c              | 1 +
 drivers/gpu/drm/i915/soc/intel_gmch.c                     | 1 +
 drivers/gpu/drm/imagination/pvr_context.c                 | 1 +
 drivers/gpu/drm/imagination/pvr_device.c                  | 1 +
 drivers/gpu/drm/imagination/pvr_drv.c                     | 1 +
 drivers/gpu/drm/imagination/pvr_fw_trace.c                | 1 +
 drivers/gpu/drm/imagination/pvr_job.c                     | 1 +
 drivers/gpu/drm/imagination/pvr_queue.c                   | 1 +
 drivers/gpu/drm/imx/dcss/dcss-crtc.c                      | 1 +
 drivers/gpu/drm/imx/dcss/dcss-dev.c                       | 1 +
 drivers/gpu/drm/imx/ipuv3/imx-ldb.c                       | 1 +
 drivers/gpu/drm/imx/ipuv3/parallel-display.c              | 1 +
 drivers/gpu/drm/lima/lima_drv.c                           | 1 +
 drivers/gpu/drm/loongson/lsdc_i2c.c                       | 1 +
 drivers/gpu/drm/mediatek/mtk_padding.c                    | 1 +
 drivers/gpu/drm/mgag200/mgag200_i2c.c                     | 1 +
 drivers/gpu/drm/msm/adreno/a2xx_gpu.c                     | 1 +
 drivers/gpu/drm/msm/adreno/a3xx_gpu.c                     | 1 +
 drivers/gpu/drm/msm/adreno/a4xx_gpu.c                     | 1 +
 drivers/gpu/drm/msm/adreno/a5xx_gpu.c                     | 1 +
 drivers/gpu/drm/msm/adreno/a5xx_power.c                   | 1 +
 drivers/gpu/drm/msm/adreno/a6xx_gmu.c                     | 1 +
 drivers/gpu/drm/msm/adreno/a6xx_gpu.c                     | 2 ++
 drivers/gpu/drm/msm/adreno/adreno_device.c                | 1 +
 drivers/gpu/drm/msm/adreno/adreno_gpu.c                   | 1 +
 drivers/gpu/drm/msm/disp/dpu1/dpu_core_perf.c             | 2 ++
 drivers/gpu/drm/msm/disp/dpu1/dpu_crtc.c                  | 2 ++
 drivers/gpu/drm/msm/disp/dpu1/dpu_hw_sspp.c               | 1 +
 drivers/gpu/drm/msm/disp/dpu1/dpu_kms.c                   | 2 ++
 drivers/gpu/drm/msm/disp/dpu1/dpu_vbif.c                  | 1 +
 drivers/gpu/drm/msm/disp/mdp4/mdp4_crtc.c                 | 1 +
 drivers/gpu/drm/msm/disp/mdp5/mdp5_crtc.c                 | 1 +
 drivers/gpu/drm/msm/disp/msm_disp_snapshot_util.c         | 1 +
 drivers/gpu/drm/msm/dp/dp_aux.c                           | 1 +
 drivers/gpu/drm/msm/dp/dp_debug.c                         | 1 +
 drivers/gpu/drm/msm/dp/dp_display.c                       | 1 +
 drivers/gpu/drm/msm/dsi/dsi_host.c                        | 1 +
 drivers/gpu/drm/msm/dsi/phy/dsi_phy_10nm.c                | 1 +
 drivers/gpu/drm/msm/dsi/phy/dsi_phy_14nm.c                | 1 +
 drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm.c                | 1 +
 drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm_8960.c           | 1 +
 drivers/gpu/drm/msm/dsi/phy/dsi_phy_7nm.c                 | 1 +
 drivers/gpu/drm/msm/hdmi/hdmi_i2c.c                       | 1 +
 drivers/gpu/drm/msm/hdmi/hdmi_phy_8996.c                  | 1 +
 drivers/gpu/drm/msm/msm_drv.c                             | 1 +
 drivers/gpu/drm/msm/msm_drv.h                             | 1 +
 drivers/gpu/drm/msm/msm_gem.c                             | 1 +
 drivers/gpu/drm/msm/msm_gem_shrinker.c                    | 1 +
 drivers/gpu/drm/msm/msm_gem_submit.c                      | 1 +
 drivers/gpu/drm/msm/msm_gpu.h                             | 1 +
 drivers/gpu/drm/msm/msm_io_utils.c                        | 1 +
 drivers/gpu/drm/msm/msm_perf.c                            | 1 +
 drivers/gpu/drm/msm/msm_rd.c                              | 1 +
 drivers/gpu/drm/msm/msm_ringbuffer.c                      | 1 +
 drivers/gpu/drm/msm/msm_submitqueue.c                     | 1 +
 drivers/gpu/drm/mxsfb/lcdif_kms.c                         | 1 +
 drivers/gpu/drm/nouveau/dispnv50/crc.c                    | 1 +
 drivers/gpu/drm/nouveau/dispnv50/disp.c                   | 1 +
 drivers/gpu/drm/nouveau/include/nvkm/core/firmware.h      | 1 +
 drivers/gpu/drm/nouveau/include/nvkm/core/memory.h        | 1 +
 drivers/gpu/drm/nouveau/include/nvkm/core/os.h            | 1 +
 drivers/gpu/drm/nouveau/nouveau_backlight.c               | 1 +
 drivers/gpu/drm/nouveau/nouveau_bo5039.c                  | 1 +
 drivers/gpu/drm/nouveau/nouveau_bo74c1.c                  | 1 +
 drivers/gpu/drm/nouveau/nouveau_bo85b5.c                  | 1 +
 drivers/gpu/drm/nouveau/nouveau_bo9039.c                  | 1 +
 drivers/gpu/drm/nouveau/nouveau_bo90b5.c                  | 1 +
 drivers/gpu/drm/nouveau/nouveau_boa0b5.c                  | 1 +
 drivers/gpu/drm/nouveau/nouveau_chan.c                    | 1 +
 drivers/gpu/drm/nouveau/nouveau_debugfs.c                 | 1 +
 drivers/gpu/drm/nouveau/nouveau_dma.c                     | 1 +
 drivers/gpu/drm/nouveau/nouveau_dmem.c                    | 1 +
 drivers/gpu/drm/nouveau/nouveau_drm.c                     | 1 +
 drivers/gpu/drm/nouveau/nouveau_drv.h                     | 1 +
 drivers/gpu/drm/nouveau/nouveau_gem.c                     | 1 +
 drivers/gpu/drm/nouveau/nouveau_hwmon.c                   | 2 ++
 drivers/gpu/drm/nouveau/nouveau_uvmm.c                    | 1 +
 drivers/gpu/drm/nouveau/nv84_fence.c                      | 1 +
 drivers/gpu/drm/nouveau/nvc0_fence.c                      | 1 +
 drivers/gpu/drm/nouveau/nvkm/core/client.c                | 1 +
 drivers/gpu/drm/nouveau/nvkm/core/enum.c                  | 1 +
 drivers/gpu/drm/nouveau/nvkm/core/firmware.c              | 1 +
 drivers/gpu/drm/nouveau/nvkm/core/option.c                | 1 +
 drivers/gpu/drm/nouveau/nvkm/core/subdev.c                | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/device/ctrl.c         | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/device/user.c         | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/disp/gv100.c          | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/disp/ior.c            | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/disp/nv50.c           | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/dma/usergf100.c       | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/dma/usergv100.c       | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/dma/usernv50.c        | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/falcon.c              | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/fifo/g84.c            | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/fifo/ga100.c          | 3 +++
 drivers/gpu/drm/nouveau/nvkm/engine/fifo/gf100.c          | 4 ++++
 drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk104.c          | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/fifo/gv100.c          | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv50.c           | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/fifo/tu102.c          | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf100.c         | 3 +++
 drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c            | 4 ++++
 drivers/gpu/drm/nouveau/nvkm/engine/gr/gm20b.c            | 3 +++
 drivers/gpu/drm/nouveau/nvkm/engine/gr/gv100.c            | 3 +++
 drivers/gpu/drm/nouveau/nvkm/engine/pm/base.c             | 1 +
 drivers/gpu/drm/nouveau/nvkm/engine/sw/gf100.c            | 3 +++
 drivers/gpu/drm/nouveau/nvkm/engine/xtensa.c              | 1 +
 drivers/gpu/drm/nouveau/nvkm/falcon/cmdq.c                | 1 +
 drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c                | 1 +
 drivers/gpu/drm/nouveau/nvkm/falcon/qmgr.c                | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/bar/nv50.c            | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/clk/base.c            | 2 ++
 drivers/gpu/drm/nouveau/nvkm/subdev/fault/gp100.c         | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/fault/gv100.c         | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/fault/tu102.c         | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c            | 2 ++
 drivers/gpu/drm/nouveau/nvkm/subdev/i2c/aux.c             | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/i2c/bus.c             | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmm.c             | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgp100.c        | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgv100.c        | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/mxm/mxms.c            | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c            | 1 +
 drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gm20b.c           | 2 ++
 drivers/gpu/drm/nouveau/nvkm/subdev/timer/nv04.c          | 1 +
 drivers/gpu/drm/omapdrm/dss/dsi.c                         | 3 +++
 drivers/gpu/drm/omapdrm/dss/pll.c                         | 1 +
 drivers/gpu/drm/omapdrm/omap_dmm_tiler.c                  | 1 +
 drivers/gpu/drm/panel/panel-sony-acx565akm.c              | 1 +
 drivers/gpu/drm/panel/panel-tpo-td043mtea1.c              | 2 ++
 drivers/gpu/drm/panfrost/panfrost_device.c                | 1 +
 drivers/gpu/drm/panfrost/panfrost_gem_shrinker.c          | 1 +
 drivers/gpu/drm/panfrost/panfrost_job.c                   | 1 +
 drivers/gpu/drm/panfrost/panfrost_mmu.c                   | 1 +
 drivers/gpu/drm/panfrost/panfrost_perfcnt.c               | 1 +
 drivers/gpu/drm/qxl/qxl_ioctl.c                           | 1 +
 drivers/gpu/drm/radeon/atombios_crtc.c                    | 1 +
 drivers/gpu/drm/radeon/atombios_encoders.c                | 1 +
 drivers/gpu/drm/radeon/cik.c                              | 2 ++
 drivers/gpu/drm/radeon/cik_sdma.c                         | 1 +
 drivers/gpu/drm/radeon/evergreen.c                        | 1 +
 drivers/gpu/drm/radeon/evergreen_cs.c                     | 1 +
 drivers/gpu/drm/radeon/evergreen_dma.c                    | 1 +
 drivers/gpu/drm/radeon/ni.c                               | 2 ++
 drivers/gpu/drm/radeon/ni_dma.c                           | 1 +
 drivers/gpu/drm/radeon/r100.c                             | 1 +
 drivers/gpu/drm/radeon/r300.c                             | 1 +
 drivers/gpu/drm/radeon/r520.c                             | 1 +
 drivers/gpu/drm/radeon/r600.c                             | 2 ++
 drivers/gpu/drm/radeon/r600_dma.c                         | 1 +
 drivers/gpu/drm/radeon/r600_dpm.c                         | 1 +
 drivers/gpu/drm/radeon/radeon_atombios.c                  | 1 +
 drivers/gpu/drm/radeon/radeon_cursor.c                    | 1 +
 drivers/gpu/drm/radeon/radeon_fence.c                     | 1 +
 drivers/gpu/drm/radeon/radeon_i2c.c                       | 1 +
 drivers/gpu/drm/radeon/radeon_legacy_encoders.c           | 1 +
 drivers/gpu/drm/radeon/radeon_pm.c                        | 2 ++
 drivers/gpu/drm/radeon/radeon_vce.c                       | 2 ++
 drivers/gpu/drm/radeon/rs400.c                            | 1 +
 drivers/gpu/drm/radeon/rv515.c                            | 1 +
 drivers/gpu/drm/radeon/rv770.c                            | 1 +
 drivers/gpu/drm/radeon/rv770_dma.c                        | 1 +
 drivers/gpu/drm/radeon/si.c                               | 2 ++
 drivers/gpu/drm/radeon/si_dma.c                           | 1 +
 drivers/gpu/drm/radeon/uvd_v1_0.c                         | 1 +
 drivers/gpu/drm/radeon/uvd_v2_2.c                         | 1 +
 drivers/gpu/drm/radeon/vce_v1_0.c                         | 1 +
 drivers/gpu/drm/renesas/rcar-du/rcar_du_crtc.c            | 2 ++
 drivers/gpu/drm/rockchip/inno_hdmi.c                      | 1 +
 drivers/gpu/drm/rockchip/rk3066_hdmi.c                    | 1 +
 drivers/gpu/drm/rockchip/rockchip_drm_vop.c               | 1 +
 drivers/gpu/drm/rockchip/rockchip_drm_vop2.c              | 2 ++
 drivers/gpu/drm/sti/sti_plane.c                           | 1 +
 drivers/gpu/drm/sun4i/sun4i_layer.c                       | 3 +++
 drivers/gpu/drm/sun4i/sun8i_ui_layer.c                    | 1 +
 drivers/gpu/drm/sun4i/sun8i_vi_layer.c                    | 1 +
 drivers/gpu/drm/tegra/dpaux.c                             | 1 +
 drivers/gpu/drm/tegra/drm.c                               | 2 ++
 drivers/gpu/drm/tegra/hub.c                               | 2 ++
 drivers/gpu/drm/tegra/riscv.c                             | 1 +
 drivers/gpu/drm/tegra/submit.c                            | 1 +
 drivers/gpu/drm/tegra/uapi.c                              | 1 +
 drivers/gpu/drm/tests/drm_client_modeset_test.c           | 1 +
 drivers/gpu/drm/tests/drm_cmdline_parser_test.c           | 1 +
 drivers/gpu/drm/tests/drm_connector_test.c                | 1 +
 drivers/gpu/drm/tests/drm_dp_mst_helper_test.c            | 1 +
 drivers/gpu/drm/tests/drm_format_helper_test.c            | 1 +
 drivers/gpu/drm/tests/drm_plane_helper_test.c             | 1 +
 drivers/gpu/drm/tests/drm_probe_helper_test.c             | 1 +
 drivers/gpu/drm/tests/drm_rect_test.c                     | 1 +
 drivers/gpu/drm/tidss/tidss_crtc.c                        | 1 +
 drivers/gpu/drm/tidss/tidss_plane.c                       | 3 +++
 drivers/gpu/drm/tilcdc/tilcdc_crtc.c                      | 1 +
 drivers/gpu/drm/tiny/panel-mipi-dbi.c                     | 1 +
 drivers/gpu/drm/ttm/ttm_pool.c                            | 1 +
 drivers/gpu/drm/v3d/v3d_perfmon.c                         | 1 +
 drivers/gpu/drm/v3d/v3d_submit.c                          | 1 +
 drivers/gpu/drm/vc4/vc4_bo.c                              | 1 +
 drivers/gpu/drm/vc4/vc4_dsi.c                             | 1 +
 drivers/gpu/drm/vc4/vc4_gem.c                             | 1 +
 drivers/gpu/drm/vc4/vc4_hdmi.c                            | 1 +
 drivers/gpu/drm/vc4/vc4_perfmon.c                         | 1 +
 drivers/gpu/drm/vgem/vgem_fence.c                         | 1 +
 drivers/gpu/drm/virtio/virtgpu_fence.c                    | 1 +
 drivers/gpu/drm/virtio/virtgpu_ioctl.c                    | 1 +
 drivers/gpu/drm/virtio/virtgpu_submit.c                   | 1 +
 drivers/gpu/drm/vmwgfx/vmwgfx_cmdbuf.c                    | 1 +
 drivers/gpu/drm/vmwgfx/vmwgfx_drv.c                       | 1 +
 drivers/gpu/drm/vmwgfx/vmwgfx_gmrid_manager.c             | 1 +
 drivers/gpu/drm/vmwgfx/vmwgfx_msg.c                       | 1 +
 drivers/gpu/drm/xe/tests/xe_lmtt_test.c                   | 1 +
 drivers/gpu/drm/xe/xe_debugfs.c                           | 1 +
 drivers/gpu/drm/xe/xe_device_sysfs.c                      | 1 +
 drivers/gpu/drm/xe/xe_exec.c                              | 1 +
 drivers/gpu/drm/xe/xe_exec_queue.c                        | 2 ++
 drivers/gpu/drm/xe/xe_execlist.c                          | 1 +
 drivers/gpu/drm/xe/xe_gpu_scheduler.c                     | 2 ++
 drivers/gpu/drm/xe/xe_gsc.c                               | 1 +
 drivers/gpu/drm/xe/xe_gsc_submit.c                        | 1 +
 drivers/gpu/drm/xe/xe_gt.c                                | 1 +
 drivers/gpu/drm/xe/xe_gt_ccs_mode.c                       | 1 +
 drivers/gpu/drm/xe/xe_gt_debugfs.c                        | 1 +
 drivers/gpu/drm/xe/xe_gt_freq.c                           | 1 +
 drivers/gpu/drm/xe/xe_gt_idle.c                           | 1 +
 drivers/gpu/drm/xe/xe_gt_pagefault.c                      | 1 +
 drivers/gpu/drm/xe/xe_gt_tlb_invalidation.c               | 1 +
 drivers/gpu/drm/xe/xe_guc.c                               | 1 +
 drivers/gpu/drm/xe/xe_guc_ct.h                            | 2 ++
 drivers/gpu/drm/xe/xe_guc_hwconfig.c                      | 1 +
 drivers/gpu/drm/xe/xe_guc_submit.c                        | 1 +
 drivers/gpu/drm/xe/xe_hw_engine_class_sysfs.c             | 2 ++
 drivers/gpu/drm/xe/xe_hw_fence.c                          | 1 +
 drivers/gpu/drm/xe/xe_hwmon.c                             | 1 +
 drivers/gpu/drm/xe/xe_lrc.c                               | 1 +
 drivers/gpu/drm/xe/xe_migrate.c                           | 1 +
 drivers/gpu/drm/xe/xe_pci.c                               | 1 +
 drivers/gpu/drm/xe/xe_query.c                             | 1 +
 drivers/gpu/drm/xe/xe_ring_ops.c                          | 1 +
 drivers/gpu/drm/xe/xe_sync.c                              | 2 ++
 drivers/gpu/drm/xe/xe_uc_fw.c                             | 1 +
 drivers/gpu/drm/xe/xe_vm.c                                | 1 +
 drivers/gpu/drm/xe/xe_wait_user_fence.c                   | 1 +
 drivers/gpu/drm/xen/xen_drm_front.c                       | 1 +
 drivers/gpu/drm/xen/xen_drm_front_evtchnl.c               | 1 +
 drivers/gpu/drm/xlnx/zynqmp_disp.c                        | 1 +
 drivers/gpu/drm/xlnx/zynqmp_dp.c                          | 1 +
 drivers/gpu/host1x/cdma.c                                 | 1 +
 drivers/gpu/host1x/debug.c                                | 1 +
 drivers/gpu/host1x/dev.c                                  | 1 +
 drivers/gpu/host1x/hw/cdma_hw.c                           | 1 +
 drivers/gpu/host1x/hw/channel_hw.c                        | 1 +
 drivers/gpu/host1x/mipi.c                                 | 1 +
 drivers/gpu/host1x/syncpt.c                               | 1 +
 drivers/gpu/ipu-v3/ipu-image-convert.c                    | 1 +
 drivers/greybus/bundle.c                                  | 1 +
 drivers/greybus/connection.c                              | 1 +
 drivers/greybus/control.c                                 | 1 +
 drivers/greybus/es2.c                                     | 3 +++
 drivers/greybus/hd.c                                      | 1 +
 drivers/greybus/interface.c                               | 3 +++
 drivers/greybus/module.c                                  | 2 ++
 drivers/greybus/operation.c                               | 1 +
 drivers/greybus/svc.c                                     | 1 +
 drivers/hid/amd-sfh-hid/amd_sfh_hid.c                     | 1 +
 drivers/hid/hid-bigbenff.c                                | 1 +
 drivers/hid/hid-core.c                                    | 1 +
 drivers/hid/hid-corsair.c                                 | 2 ++
 drivers/hid/hid-cp2112.c                                  | 1 +
 drivers/hid/hid-debug.c                                   | 1 +
 drivers/hid/hid-ft260.c                                   | 2 ++
 drivers/hid/hid-glorious.c                                | 1 +
 drivers/hid/hid-gt683r.c                                  | 2 ++
 drivers/hid/hid-hyperv.c                                  | 1 +
 drivers/hid/hid-input.c                                   | 1 +
 drivers/hid/hid-led.c                                     | 1 +
 drivers/hid/hid-lenovo.c                                  | 2 ++
 drivers/hid/hid-lg-g15.c                                  | 2 ++
 drivers/hid/hid-lg4ff.c                                   | 2 ++
 drivers/hid/hid-logitech-dj.c                             | 1 +
 drivers/hid/hid-logitech-hidpp.c                          | 2 ++
 drivers/hid/hid-magicmouse.c                              | 1 +
 drivers/hid/hid-mcp2221.c                                 | 1 +
 drivers/hid/hid-multitouch.c                              | 2 ++
 drivers/hid/hid-ntrig.c                                   | 2 ++
 drivers/hid/hid-nvidia-shield.c                           | 1 +
 drivers/hid/hid-picolcd_core.c                            | 2 ++
 drivers/hid/hid-picolcd_debugfs.c                         | 1 +
 drivers/hid/hid-picolcd_fb.c                              | 1 +
 drivers/hid/hid-picolcd_leds.c                            | 1 +
 drivers/hid/hid-playstation.c                             | 1 +
 drivers/hid/hid-prodikeys.c                               | 1 +
 drivers/hid/hid-quirks.c                                  | 1 +
 drivers/hid/hid-roccat-arvo.c                             | 1 +
 drivers/hid/hid-roccat-isku.c                             | 2 ++
 drivers/hid/hid-roccat-kone.c                             | 2 ++
 drivers/hid/hid-roccat-koneplus.c                         | 2 ++
 drivers/hid/hid-roccat-kovaplus.c                         | 2 ++
 drivers/hid/hid-roccat-pyra.c                             | 1 +
 drivers/hid/hid-sensor-custom.c                           | 2 ++
 drivers/hid/hid-sensor-hub.c                              | 1 +
 drivers/hid/hid-sony.c                                    | 1 +
 drivers/hid/hid-steelseries.c                             | 1 +
 drivers/hid/hid-u2fzero.c                                 | 1 +
 drivers/hid/hid-uclogic-params.c                          | 1 +
 drivers/hid/hid-wiimote-core.c                            | 1 +
 drivers/hid/hid-wiimote-debug.c                           | 1 +
 drivers/hid/hid-wiimote-modules.c                         | 1 +
 drivers/hid/i2c-hid/i2c-hid-core.c                        | 1 +
 drivers/hid/intel-ish-hid/ipc/pci-ish.c                   | 1 +
 drivers/hid/intel-ish-hid/ishtp-fw-loader.c               | 1 +
 drivers/hid/intel-ish-hid/ishtp-hid.c                     | 1 +
 drivers/hid/intel-ish-hid/ishtp/bus.c                     | 2 ++
 drivers/hid/surface-hid/surface_hid_core.c                | 1 +
 drivers/hid/usbhid/hid-core.c                             | 1 +
 drivers/hid/usbhid/hiddev.c                               | 1 +
 drivers/hid/usbhid/usbkbd.c                               | 1 +
 drivers/hid/usbhid/usbmouse.c                             | 1 +
 drivers/hid/wacom_sys.c                                   | 2 ++
 drivers/hsi/controllers/omap_ssi_port.c                   | 1 +
 drivers/hsi/hsi_core.c                                    | 1 +
 drivers/hte/hte.c                                         | 1 +
 drivers/hv/channel.c                                      | 1 +
 drivers/hv/connection.c                                   | 1 +
 drivers/hv/hv_balloon.c                                   | 1 +
 drivers/hv/hv_kvp.c                                       | 1 +
 drivers/hv/hv_utils_transport.c                           | 1 +
 drivers/hv/vmbus_drv.c                                    | 1 +
 drivers/hwmon/abituguru.c                                 | 2 ++
 drivers/hwmon/abituguru3.c                                | 1 +
 drivers/hwmon/acpi_power_meter.c                          | 2 ++
 drivers/hwmon/ad7314.c                                    | 1 +
 drivers/hwmon/ad7414.c                                    | 2 ++
 drivers/hwmon/ad7418.c                                    | 2 ++
 drivers/hwmon/adc128d818.c                                | 2 ++
 drivers/hwmon/adcxx.c                                     | 2 ++
 drivers/hwmon/adm1021.c                                   | 2 ++
 drivers/hwmon/adm1025.c                                   | 2 ++
 drivers/hwmon/adm1026.c                                   | 2 ++
 drivers/hwmon/adm1029.c                                   | 2 ++
 drivers/hwmon/adm1031.c                                   | 2 ++
 drivers/hwmon/adm9240.c                                   | 2 ++
 drivers/hwmon/ads7828.c                                   | 1 +
 drivers/hwmon/ads7871.c                                   | 1 +
 drivers/hwmon/adt7411.c                                   | 2 ++
 drivers/hwmon/adt7462.c                                   | 2 ++
 drivers/hwmon/adt7470.c                                   | 2 ++
 drivers/hwmon/adt7475.c                                   | 2 ++
 drivers/hwmon/amc6821.c                                   | 2 ++
 drivers/hwmon/applesmc.c                                  | 2 ++
 drivers/hwmon/aquacomputer_d5next.c                       | 1 +
 drivers/hwmon/asb100.c                                    | 2 ++
 drivers/hwmon/asc7621.c                                   | 2 ++
 drivers/hwmon/aspeed-pwm-tacho.c                          | 2 ++
 drivers/hwmon/asus_atk0110.c                              | 1 +
 drivers/hwmon/asus_rog_ryujin.c                           | 1 +
 drivers/hwmon/atxp1.c                                     | 2 ++
 drivers/hwmon/axi-fan-control.c                           | 2 ++
 drivers/hwmon/coretemp.c                                  | 2 ++
 drivers/hwmon/corsair-cpro.c                              | 1 +
 drivers/hwmon/corsair-psu.c                               | 1 +
 drivers/hwmon/da9052-hwmon.c                              | 2 ++
 drivers/hwmon/da9055-hwmon.c                              | 1 +
 drivers/hwmon/dell-smm-hwmon.c                            | 1 +
 drivers/hwmon/dme1737.c                                   | 2 ++
 drivers/hwmon/ds1621.c                                    | 2 ++
 drivers/hwmon/ds620.c                                     | 2 ++
 drivers/hwmon/emc1403.c                                   | 2 ++
 drivers/hwmon/emc2103.c                                   | 2 ++
 drivers/hwmon/emc6w201.c                                  | 2 ++
 drivers/hwmon/f71805f.c                                   | 2 ++
 drivers/hwmon/f71882fg.c                                  | 2 ++
 drivers/hwmon/f75375s.c                                   | 2 ++
 drivers/hwmon/fam15h_power.c                              | 2 ++
 drivers/hwmon/fschmd.c                                    | 2 ++
 drivers/hwmon/g760a.c                                     | 2 ++
 drivers/hwmon/g762.c                                      | 2 ++
 drivers/hwmon/gigabyte_waterforce.c                       | 2 ++
 drivers/hwmon/gl518sm.c                                   | 2 ++
 drivers/hwmon/gl520sm.c                                   | 2 ++
 drivers/hwmon/gpio-fan.c                                  | 2 ++
 drivers/hwmon/gsc-hwmon.c                                 | 2 ++
 drivers/hwmon/hih6130.c                                   | 1 +
 drivers/hwmon/hp-wmi-sensors.c                            | 1 +
 drivers/hwmon/hwmon.c                                     | 2 ++
 drivers/hwmon/i5k_amb.c                                   | 2 ++
 drivers/hwmon/ibmaem.c                                    | 3 +++
 drivers/hwmon/ibmpex.c                                    | 4 ++++
 drivers/hwmon/ibmpowernv.c                                | 2 ++
 drivers/hwmon/iio_hwmon.c                                 | 1 +
 drivers/hwmon/ina209.c                                    | 1 +
 drivers/hwmon/ina2xx.c                                    | 1 +
 drivers/hwmon/ina3221.c                                   | 2 ++
 drivers/hwmon/it87.c                                      | 2 ++
 drivers/hwmon/lm63.c                                      | 2 ++
 drivers/hwmon/lm70.c                                      | 1 +
 drivers/hwmon/lm73.c                                      | 1 +
 drivers/hwmon/lm77.c                                      | 2 ++
 drivers/hwmon/lm78.c                                      | 2 ++
 drivers/hwmon/lm80.c                                      | 2 ++
 drivers/hwmon/lm85.c                                      | 2 ++
 drivers/hwmon/lm87.c                                      | 2 ++
 drivers/hwmon/lm90.c                                      | 1 +
 drivers/hwmon/lm92.c                                      | 2 ++
 drivers/hwmon/lm93.c                                      | 2 ++
 drivers/hwmon/lm95234.c                                   | 2 ++
 drivers/hwmon/ltc2945.c                                   | 1 +
 drivers/hwmon/ltc2947-core.c                              | 1 +
 drivers/hwmon/max1111.c                                   | 1 +
 drivers/hwmon/max16065.c                                  | 1 +
 drivers/hwmon/max1619.c                                   | 2 ++
 drivers/hwmon/max1668.c                                   | 2 ++
 drivers/hwmon/max197.c                                    | 2 ++
 drivers/hwmon/max31722.c                                  | 1 +
 drivers/hwmon/max31760.c                                  | 2 ++
 drivers/hwmon/max31827.c                                  | 2 ++
 drivers/hwmon/max6639.c                                   | 2 ++
 drivers/hwmon/max6642.c                                   | 2 ++
 drivers/hwmon/max6650.c                                   | 1 +
 drivers/hwmon/max6697.c                                   | 2 ++
 drivers/hwmon/mc13783-adc.c                               | 1 +
 drivers/hwmon/menf21bmc_hwmon.c                           | 1 +
 drivers/hwmon/mr75203.c                                   | 1 +
 drivers/hwmon/nct6683.c                                   | 2 ++
 drivers/hwmon/nct6775-core.c                              | 3 +++
 drivers/hwmon/nct6775-platform.c                          | 2 ++
 drivers/hwmon/nct7802.c                                   | 2 ++
 drivers/hwmon/npcm750-pwm-fan.c                           | 1 +
 drivers/hwmon/nsa320-hwmon.c                              | 1 +
 drivers/hwmon/nzxt-kraken3.c                              | 3 +++
 drivers/hwmon/occ/common.c                                | 2 ++
 drivers/hwmon/oxp-sensors.c                               | 1 +
 drivers/hwmon/pc87360.c                                   | 2 ++
 drivers/hwmon/pc87427.c                                   | 2 ++
 drivers/hwmon/pcf8591.c                                   | 2 ++
 drivers/hwmon/pmbus/acbel-fsg032.c                        | 1 +
 drivers/hwmon/pmbus/ibm-cffps.c                           | 1 +
 drivers/hwmon/pmbus/isl68137.c                            | 2 ++
 drivers/hwmon/pmbus/max20730.c                            | 1 +
 drivers/hwmon/pmbus/pmbus_core.c                          | 2 ++
 drivers/hwmon/pmbus/q54sj108a2.c                          | 2 ++
 drivers/hwmon/pmbus/ucd9000.c                             | 2 ++
 drivers/hwmon/pt5161l.c                                   | 1 +
 drivers/hwmon/scpi-hwmon.c                                | 1 +
 drivers/hwmon/sht15.c                                     | 2 ++
 drivers/hwmon/sht21.c                                     | 1 +
 drivers/hwmon/sht3x.c                                     | 2 ++
 drivers/hwmon/shtc1.c                                     | 1 +
 drivers/hwmon/sis5595.c                                   | 2 ++
 drivers/hwmon/smsc47b397.c                                | 1 +
 drivers/hwmon/smsc47m1.c                                  | 2 ++
 drivers/hwmon/smsc47m192.c                                | 2 ++
 drivers/hwmon/stts751.c                                   | 1 +
 drivers/hwmon/tc654.c                                     | 2 ++
 drivers/hwmon/tc74.c                                      | 1 +
 drivers/hwmon/thmc50.c                                    | 2 ++
 drivers/hwmon/ultra45_env.c                               | 2 ++
 drivers/hwmon/via-cputemp.c                               | 1 +
 drivers/hwmon/via686a.c                                   | 2 ++
 drivers/hwmon/vt1211.c                                    | 2 ++
 drivers/hwmon/vt8231.c                                    | 2 ++
 drivers/hwmon/w83627ehf.c                                 | 2 ++
 drivers/hwmon/w83627hf.c                                  | 2 ++
 drivers/hwmon/w83781d.c                                   | 2 ++
 drivers/hwmon/w83791d.c                                   | 2 ++
 drivers/hwmon/w83792d.c                                   | 2 ++
 drivers/hwmon/w83793.c                                    | 2 ++
 drivers/hwmon/w83795.c                                    | 2 ++
 drivers/hwmon/w83l785ts.c                                 | 1 +
 drivers/hwmon/w83l786ng.c                                 | 2 ++
 drivers/hwmon/wm831x-hwmon.c                              | 1 +
 drivers/hwmon/wm8350-hwmon.c                              | 1 +
 drivers/hwmon/xgene-hwmon.c                               | 1 +
 drivers/hwtracing/coresight/coresight-core.c              | 2 ++
 drivers/hwtracing/coresight/coresight-cpu-debug.c         | 1 +
 drivers/hwtracing/coresight/coresight-cti-platform.c      | 1 +
 drivers/hwtracing/coresight/coresight-cti-sysfs.c         | 2 ++
 drivers/hwtracing/coresight/coresight-etb10.c             | 2 ++
 drivers/hwtracing/coresight/coresight-etm-perf.c          | 1 +
 drivers/hwtracing/coresight/coresight-etm3x-sysfs.c       | 2 ++
 drivers/hwtracing/coresight/coresight-etm4x-sysfs.c       | 2 ++
 drivers/hwtracing/coresight/coresight-funnel.c            | 2 ++
 drivers/hwtracing/coresight/coresight-stm.c               | 2 ++
 drivers/hwtracing/coresight/coresight-syscfg-configfs.c   | 2 ++
 drivers/hwtracing/coresight/coresight-sysfs.c             | 1 +
 drivers/hwtracing/coresight/coresight-tmc-core.c          | 2 ++
 drivers/hwtracing/coresight/coresight-tpdm.c              | 1 +
 drivers/hwtracing/coresight/coresight-trbe.c              | 1 +
 drivers/hwtracing/intel_th/core.c                         | 2 ++
 drivers/hwtracing/intel_th/gth.c                          | 2 ++
 drivers/hwtracing/intel_th/msu.c                          | 2 ++
 drivers/hwtracing/intel_th/pti.c                          | 2 ++
 drivers/hwtracing/ptt/hisi_ptt.c                          | 3 +++
 drivers/hwtracing/stm/core.c                              | 1 +
 drivers/hwtracing/stm/dummy_stm.c                         | 1 +
 drivers/hwtracing/stm/heartbeat.c                         | 1 +
 drivers/hwtracing/stm/p_sys-t.c                           | 2 ++
 drivers/hwtracing/stm/policy.c                            | 1 +
 drivers/i2c/algos/i2c-algo-pca.c                          | 1 +
 drivers/i2c/busses/i2c-ali1535.c                          | 1 +
 drivers/i2c/busses/i2c-ali1563.c                          | 1 +
 drivers/i2c/busses/i2c-ali15x3.c                          | 1 +
 drivers/i2c/busses/i2c-altera.c                           | 1 +
 drivers/i2c/busses/i2c-amd-mp2-plat.c                     | 2 ++
 drivers/i2c/busses/i2c-amd756-s4882.c                     | 1 +
 drivers/i2c/busses/i2c-amd756.c                           | 1 +
 drivers/i2c/busses/i2c-amd8111.c                          | 1 +
 drivers/i2c/busses/i2c-at91-core.c                        | 1 +
 drivers/i2c/busses/i2c-axxia.c                            | 1 +
 drivers/i2c/busses/i2c-bcm-iproc.c                        | 2 ++
 drivers/i2c/busses/i2c-bcm-kona.c                         | 1 +
 drivers/i2c/busses/i2c-bcm2835.c                          | 1 +
 drivers/i2c/busses/i2c-brcmstb.c                          | 1 +
 drivers/i2c/busses/i2c-cadence.c                          | 2 ++
 drivers/i2c/busses/i2c-davinci.c                          | 1 +
 drivers/i2c/busses/i2c-designware-master.c                | 2 ++
 drivers/i2c/busses/i2c-designware-slave.c                 | 1 +
 drivers/i2c/busses/i2c-diolan-u2c.c                       | 1 +
 drivers/i2c/busses/i2c-dln2.c                             | 1 +
 drivers/i2c/busses/i2c-exynos5.c                          | 1 +
 drivers/i2c/busses/i2c-fsi.c                              | 1 +
 drivers/i2c/busses/i2c-gpio.c                             | 1 +
 drivers/i2c/busses/i2c-gxp.c                              | 1 +
 drivers/i2c/busses/i2c-hisi.c                             | 1 +
 drivers/i2c/busses/i2c-hix5hd2.c                          | 1 +
 drivers/i2c/busses/i2c-i801.c                             | 2 ++
 drivers/i2c/busses/i2c-img-scb.c                          | 1 +
 drivers/i2c/busses/i2c-isch.c                             | 1 +
 drivers/i2c/busses/i2c-ismt.c                             | 1 +
 drivers/i2c/busses/i2c-jz4780.c                           | 1 +
 drivers/i2c/busses/i2c-ljca.c                             | 1 +
 drivers/i2c/busses/i2c-mchp-pci1xxxx.c                    | 2 ++
 drivers/i2c/busses/i2c-microchip-corei2c.c                | 2 ++
 drivers/i2c/busses/i2c-mlxbf.c                            | 1 +
 drivers/i2c/busses/i2c-mpc.c                              | 1 +
 drivers/i2c/busses/i2c-nforce2-s4985.c                    | 1 +
 drivers/i2c/busses/i2c-nforce2.c                          | 1 +
 drivers/i2c/busses/i2c-nomadik.c                          | 2 ++
 drivers/i2c/busses/i2c-npcm7xx.c                          | 2 ++
 drivers/i2c/busses/i2c-owl.c                              | 2 ++
 drivers/i2c/busses/i2c-pasemi-core.c                      | 2 ++
 drivers/i2c/busses/i2c-pca-platform.c                     | 1 +
 drivers/i2c/busses/i2c-piix4.c                            | 1 +
 drivers/i2c/busses/i2c-pnx.c                              | 1 +
 drivers/i2c/busses/i2c-powermac.c                         | 1 +
 drivers/i2c/busses/i2c-qcom-cci.c                         | 1 +
 drivers/i2c/busses/i2c-qcom-geni.c                        | 1 +
 drivers/i2c/busses/i2c-qup.c                              | 1 +
 drivers/i2c/busses/i2c-robotfuzz-osif.c                   | 1 +
 drivers/i2c/busses/i2c-rzv2m.c                            | 1 +
 drivers/i2c/busses/i2c-scmi.c                             | 1 +
 drivers/i2c/busses/i2c-sh7760.c                           | 1 +
 drivers/i2c/busses/i2c-sis5595.c                          | 1 +
 drivers/i2c/busses/i2c-sis630.c                           | 1 +
 drivers/i2c/busses/i2c-sis96x.c                           | 1 +
 drivers/i2c/busses/i2c-sprd.c                             | 2 ++
 drivers/i2c/busses/i2c-st.c                               | 2 ++
 drivers/i2c/busses/i2c-stm32.c                            | 1 +
 drivers/i2c/busses/i2c-stm32f4.c                          | 2 ++
 drivers/i2c/busses/i2c-stm32f7.c                          | 2 ++
 drivers/i2c/busses/i2c-sun6i-p2wi.c                       | 1 +
 drivers/i2c/busses/i2c-synquacer.c                        | 1 +
 drivers/i2c/busses/i2c-taos-evm.c                         | 2 ++
 drivers/i2c/busses/i2c-tegra.c                            | 1 +
 drivers/i2c/busses/i2c-thunderx-pcidrv.c                  | 1 +
 drivers/i2c/busses/i2c-tiny-usb.c                         | 1 +
 drivers/i2c/busses/i2c-uniphier-f.c                       | 1 +
 drivers/i2c/busses/i2c-uniphier.c                         | 1 +
 drivers/i2c/busses/i2c-viapro.c                           | 1 +
 drivers/i2c/busses/i2c-viperboard.c                       | 1 +
 drivers/i2c/busses/i2c-virtio.c                           | 1 +
 drivers/i2c/busses/i2c-wmt.c                              | 1 +
 drivers/i2c/busses/i2c-xgene-slimpro.c                    | 2 ++
 drivers/i2c/busses/i2c-xiic.c                             | 1 +
 drivers/i2c/busses/i2c-xlp9xx.c                           | 1 +
 drivers/i2c/busses/scx200_acb.c                           | 1 +
 drivers/i2c/i2c-atr.c                                     | 1 +
 drivers/i2c/i2c-core-base.c                               | 1 +
 drivers/i2c/i2c-core.h                                    | 1 +
 drivers/i2c/i2c-dev.c                                     | 1 +
 drivers/i2c/i2c-mux.c                                     | 1 +
 drivers/i2c/muxes/i2c-demux-pinctrl.c                     | 2 ++
 drivers/i2c/muxes/i2c-mux-pca954x.c                       | 2 ++
 drivers/i3c/master.c                                      | 3 +++
 drivers/i3c/master/i3c-master-cdns.c                      | 1 +
 drivers/i3c/master/mipi-i3c-hci/cmd_v1.c                  | 1 +
 drivers/i3c/master/mipi-i3c-hci/cmd_v2.c                  | 1 +
 drivers/i3c/master/mipi-i3c-hci/core.c                    | 1 +
 drivers/i3c/master/mipi-i3c-hci/dma.c                     | 1 +
 drivers/i3c/master/mipi-i3c-hci/pio.c                     | 1 +
 drivers/idle/intel_idle.c                                 | 1 +
 drivers/iio/accel/adxl372.c                               | 1 +
 drivers/iio/accel/bma180.c                                | 1 +
 drivers/iio/accel/bmc150-accel-core.c                     | 1 +
 drivers/iio/accel/bmc150-accel-i2c.c                      | 1 +
 drivers/iio/accel/kxcjk-1013.c                            | 1 +
 drivers/iio/accel/mma8452.c                               | 1 +
 drivers/iio/accel/sca3000.c                               | 1 +
 drivers/iio/adc/ab8500-gpadc.c                            | 1 +
 drivers/iio/adc/ad4130.c                                  | 1 +
 drivers/iio/adc/ad7192.c                                  | 1 +
 drivers/iio/adc/ad7280a.c                                 | 1 +
 drivers/iio/adc/ad7606.c                                  | 2 ++
 drivers/iio/adc/ad7768-1.c                                | 2 ++
 drivers/iio/adc/ad799x.c                                  | 2 ++
 drivers/iio/adc/ad_sigma_delta.c                          | 1 +
 drivers/iio/adc/aspeed_adc.c                              | 1 +
 drivers/iio/adc/at91_adc.c                                | 1 +
 drivers/iio/adc/bcm_iproc_adc.c                           | 1 +
 drivers/iio/adc/envelope-detector.c                       | 2 ++
 drivers/iio/adc/exynos_adc.c                              | 1 +
 drivers/iio/adc/fsl-imx25-gcq.c                           | 2 ++
 drivers/iio/adc/hx711.c                                   | 1 +
 drivers/iio/adc/ina2xx-adc.c                              | 1 +
 drivers/iio/adc/max1027.c                                 | 1 +
 drivers/iio/adc/max11410.c                                | 2 ++
 drivers/iio/adc/max1363.c                                 | 2 ++
 drivers/iio/adc/mcp3422.c                                 | 1 +
 drivers/iio/adc/mcp3564.c                                 | 2 ++
 drivers/iio/adc/meson_saradc.c                            | 2 ++
 drivers/iio/adc/mt6360-adc.c                              | 1 +
 drivers/iio/adc/mxs-lradc-adc.c                           | 1 +
 drivers/iio/adc/nau7802.c                                 | 2 ++
 drivers/iio/adc/qcom-pm8xxx-xoadc.c                       | 1 +
 drivers/iio/adc/qcom-spmi-rradc.c                         | 1 +
 drivers/iio/adc/rockchip_saradc.c                         | 1 +
 drivers/iio/adc/spear_adc.c                               | 1 +
 drivers/iio/adc/stm32-adc.c                               | 2 ++
 drivers/iio/adc/stm32-dfsdm-adc.c                         | 3 +++
 drivers/iio/adc/ti-ads131e08.c                            | 1 +
 drivers/iio/adc/ti-ads8688.c                              | 1 +
 drivers/iio/adc/ti-tsc2046.c                              | 1 +
 drivers/iio/adc/twl6030-gpadc.c                           | 1 +
 drivers/iio/adc/vf610_adc.c                               | 1 +
 drivers/iio/adc/xilinx-xadc-core.c                        | 1 +
 drivers/iio/addac/ad74115.c                               | 1 +
 drivers/iio/addac/ad74413r.c                              | 1 +
 drivers/iio/cdc/ad7746.c                                  | 1 +
 drivers/iio/chemical/atlas-ezo-sensor.c                   | 1 +
 drivers/iio/chemical/scd30_core.c                         | 1 +
 drivers/iio/chemical/scd30_serial.c                       | 1 +
 drivers/iio/chemical/scd4x.c                              | 1 +
 drivers/iio/chemical/sps30.c                              | 1 +
 drivers/iio/chemical/sunrise_co2.c                        | 1 +
 drivers/iio/common/cros_ec_sensors/cros_ec_sensors_core.c | 2 ++
 drivers/iio/common/hid-sensors/hid-sensor-trigger.c       | 1 +
 drivers/iio/common/ms_sensors/ms_sensors_i2c.c            | 1 +
 drivers/iio/common/scmi_sensors/scmi_iio.c                | 1 +
 drivers/iio/common/ssp_sensors/ssp_spi.c                  | 1 +
 drivers/iio/common/st_sensors/st_sensors_core.c           | 1 +
 drivers/iio/dac/ad5064.c                                  | 1 +
 drivers/iio/dac/ad5360.c                                  | 1 +
 drivers/iio/dac/ad5380.c                                  | 1 +
 drivers/iio/dac/ad5446.c                                  | 1 +
 drivers/iio/dac/ad5504.c                                  | 1 +
 drivers/iio/dac/ad5592r-base.c                            | 1 +
 drivers/iio/dac/ad5624r_spi.c                             | 1 +
 drivers/iio/dac/ad5686.c                                  | 1 +
 drivers/iio/dac/ad5755.c                                  | 1 +
 drivers/iio/dac/ad5758.c                                  | 1 +
 drivers/iio/dac/ad5766.c                                  | 2 ++
 drivers/iio/dac/ad5770r.c                                 | 1 +
 drivers/iio/dac/ad5791.c                                  | 1 +
 drivers/iio/dac/ad7303.c                                  | 1 +
 drivers/iio/dac/ltc2632.c                                 | 1 +
 drivers/iio/dac/ltc2688.c                                 | 1 +
 drivers/iio/dac/max5821.c                                 | 1 +
 drivers/iio/dac/mcp4725.c                                 | 1 +
 drivers/iio/dac/mcp4728.c                                 | 1 +
 drivers/iio/dac/ti-dac082s085.c                           | 1 +
 drivers/iio/dac/ti-dac5571.c                              | 1 +
 drivers/iio/dac/ti-dac7311.c                              | 1 +
 drivers/iio/dummy/iio_dummy_evgen.c                       | 1 +
 drivers/iio/frequency/ad9523.c                            | 1 +
 drivers/iio/frequency/adf4350.c                           | 2 ++
 drivers/iio/frequency/adf4371.c                           | 2 ++
 drivers/iio/frequency/adf4377.c                           | 1 +
 drivers/iio/frequency/admv1013.c                          | 1 +
 drivers/iio/frequency/admv1014.c                          | 1 +
 drivers/iio/gyro/adis16136.c                              | 2 ++
 drivers/iio/humidity/hts221_core.c                        | 1 +
 drivers/iio/imu/adis16400.c                               | 1 +
 drivers/iio/imu/adis16475.c                               | 1 +
 drivers/iio/imu/adis16480.c                               | 1 +
 drivers/iio/imu/bmi323/bmi323_core.c                      | 1 +
 drivers/iio/imu/bno055/bno055.c                           | 2 ++
 drivers/iio/imu/inv_mpu6050/inv_mpu_core.c                | 2 ++
 drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_core.c              | 1 +
 drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_shub.c              | 1 +
 drivers/iio/industrialio-buffer.c                         | 2 ++
 drivers/iio/industrialio-core.c                           | 2 ++
 drivers/iio/industrialio-event.c                          | 2 ++
 drivers/iio/light/bh1750.c                                | 1 +
 drivers/iio/light/cm32181.c                               | 1 +
 drivers/iio/light/cm3232.c                                | 1 +
 drivers/iio/light/isl29018.c                              | 2 ++
 drivers/iio/light/lm3533-als.c                            | 1 +
 drivers/iio/light/ltr501.c                                | 1 +
 drivers/iio/light/lv0104cs.c                              | 1 +
 drivers/iio/light/si1133.c                                | 1 +
 drivers/iio/light/stk3310.c                               | 1 +
 drivers/iio/light/tcs3472.c                               | 1 +
 drivers/iio/light/tsl2583.c                               | 2 ++
 drivers/iio/light/tsl2772.c                               | 2 ++
 drivers/iio/light/vcnl4000.c                              | 1 +
 drivers/iio/light/zopt2201.c                              | 1 +
 drivers/iio/magnetometer/bmc150_magn.c                    | 1 +
 drivers/iio/magnetometer/hmc5843_core.c                   | 1 +
 drivers/iio/magnetometer/mag3110.c                        | 1 +
 drivers/iio/magnetometer/rm3100-core.c                    | 1 +
 drivers/iio/magnetometer/tmag5273.c                       | 1 +
 drivers/iio/position/hid-sensor-custom-intel-hinge.c      | 1 +
 drivers/iio/potentiostat/lmp91000.c                       | 1 +
 drivers/iio/pressure/bmp280-core.c                        | 1 +
 drivers/iio/pressure/dlhl60d.c                            | 1 +
 drivers/iio/pressure/mprls0025pa.c                        | 1 +
 drivers/iio/pressure/zpa2326.c                            | 1 +
 drivers/iio/proximity/as3935.c                            | 1 +
 drivers/iio/proximity/isl29501.c                          | 2 ++
 drivers/iio/proximity/mb1232.c                            | 1 +
 drivers/iio/proximity/ping.c                              | 1 +
 drivers/iio/proximity/srf04.c                             | 1 +
 drivers/iio/proximity/srf08.c                             | 2 ++
 drivers/iio/proximity/sx9324.c                            | 1 +
 drivers/iio/proximity/sx9500.c                            | 1 +
 drivers/iio/proximity/sx_common.c                         | 2 ++
 drivers/iio/proximity/vl53l0x-i2c.c                       | 1 +
 drivers/iio/resolver/ad2s1210.c                           | 2 ++
 drivers/iio/temperature/max31856.c                        | 1 +
 drivers/iio/temperature/max31865.c                        | 1 +
 drivers/iio/temperature/tsys01.c                          | 1 +
 drivers/iio/test/iio-test-format.c                        | 1 +
 drivers/iio/trigger/iio-trig-sysfs.c                      | 1 +
 drivers/iio/trigger/stm32-timer-trigger.c                 | 2 ++
 drivers/infiniband/core/addr.c                            | 1 +
 drivers/infiniband/core/cma_configfs.c                    | 2 ++
 drivers/infiniband/core/device.c                          | 2 ++
 drivers/infiniband/core/mad.c                             | 2 ++
 drivers/infiniband/core/mad_rmpp.c                        | 1 +
 drivers/infiniband/core/restrack.c                        | 1 +
 drivers/infiniband/core/sa.h                              | 1 +
 drivers/infiniband/core/sa_query.c                        | 1 +
 drivers/infiniband/core/sysfs.c                           | 2 ++
 drivers/infiniband/core/ucma.c                            | 1 +
 drivers/infiniband/core/user_mad.c                        | 1 +
 drivers/infiniband/core/uverbs_cmd.c                      | 1 +
 drivers/infiniband/core/uverbs_ioctl.c                    | 1 +
 drivers/infiniband/core/uverbs_main.c                     | 3 +++
 drivers/infiniband/core/uverbs_std_types_device.c         | 1 +
 drivers/infiniband/core/verbs.c                           | 1 +
 drivers/infiniband/hw/bnxt_re/ib_verbs.c                  | 1 +
 drivers/infiniband/hw/bnxt_re/qplib_fp.c                  | 1 +
 drivers/infiniband/hw/bnxt_re/qplib_rcfw.c                | 1 +
 drivers/infiniband/hw/cxgb4/cq.c                          | 1 +
 drivers/infiniband/hw/cxgb4/device.c                      | 2 ++
 drivers/infiniband/hw/cxgb4/provider.c                    | 1 +
 drivers/infiniband/hw/cxgb4/qp.c                          | 1 +
 drivers/infiniband/hw/cxgb4/resource.c                    | 1 +
 drivers/infiniband/hw/efa/efa_com.c                       | 2 ++
 drivers/infiniband/hw/efa/efa_main.c                      | 1 +
 drivers/infiniband/hw/erdma/erdma_cmdq.c                  | 2 ++
 drivers/infiniband/hw/erdma/erdma_eq.c                    | 2 ++
 drivers/infiniband/hw/erdma/erdma_main.c                  | 1 +
 drivers/infiniband/hw/erdma/erdma_qp.c                    | 2 ++
 drivers/infiniband/hw/erdma/erdma_verbs.c                 | 2 ++
 drivers/infiniband/hw/hfi1/affinity.c                     | 1 +
 drivers/infiniband/hw/hfi1/chip.c                         | 2 ++
 drivers/infiniband/hw/hfi1/debugfs.c                      | 2 ++
 drivers/infiniband/hw/hfi1/device.c                       | 1 +
 drivers/infiniband/hw/hfi1/driver.c                       | 1 +
 drivers/infiniband/hw/hfi1/efivar.c                       | 1 +
 drivers/infiniband/hw/hfi1/fault.c                        | 2 ++
 drivers/infiniband/hw/hfi1/file_ops.c                     | 2 ++
 drivers/infiniband/hw/hfi1/init.c                         | 1 +
 drivers/infiniband/hw/hfi1/msix.c                         | 1 +
 drivers/infiniband/hw/hfi1/pcie.c                         | 1 +
 drivers/infiniband/hw/hfi1/qsfp.c                         | 1 +
 drivers/infiniband/hw/hfi1/rc.c                           | 1 +
 drivers/infiniband/hw/hfi1/sdma.c                         | 2 ++
 drivers/infiniband/hw/hfi1/user_exp_rcv.c                 | 1 +
 drivers/infiniband/hw/hfi1/user_sdma.c                    | 1 +
 drivers/infiniband/hw/hfi1/verbs.c                        | 1 +
 drivers/infiniband/hw/hfi1/verbs_txreq.c                  | 1 +
 drivers/infiniband/hw/hfi1/vnic_sdma.c                    | 1 +
 drivers/infiniband/hw/hns/hns_roce_cmd.c                  | 1 +
 drivers/infiniband/hw/hns/hns_roce_cq.c                   | 1 +
 drivers/infiniband/hw/hns/hns_roce_hw_v2.c                | 1 +
 drivers/infiniband/hw/hns/hns_roce_main.c                 | 2 ++
 drivers/infiniband/hw/hns/hns_roce_qp.c                   | 1 +
 drivers/infiniband/hw/hns/hns_roce_srq.c                  | 1 +
 drivers/infiniband/hw/irdma/cm.c                          | 2 ++
 drivers/infiniband/hw/irdma/hw.c                          | 1 +
 drivers/infiniband/hw/irdma/utils.c                       | 1 +
 drivers/infiniband/hw/irdma/verbs.c                       | 2 ++
 drivers/infiniband/hw/mlx4/alias_GUID.c                   | 2 ++
 drivers/infiniband/hw/mlx4/mad.c                          | 1 +
 drivers/infiniband/hw/mlx4/main.c                         | 1 +
 drivers/infiniband/hw/mlx4/mcg.c                          | 1 +
 drivers/infiniband/hw/mlx4/qp.c                           | 1 +
 drivers/infiniband/hw/mlx4/sysfs.c                        | 1 +
 drivers/infiniband/hw/mlx5/cong.c                         | 2 ++
 drivers/infiniband/hw/mlx5/counters.c                     | 1 +
 drivers/infiniband/hw/mlx5/main.c                         | 3 +++
 drivers/infiniband/hw/mlx5/mr.c                           | 2 ++
 drivers/infiniband/hw/mlx5/qp.c                           | 1 +
 drivers/infiniband/hw/mlx5/qpc.c                          | 1 +
 drivers/infiniband/hw/mlx5/srq_cmd.c                      | 1 +
 drivers/infiniband/hw/mlx5/umr.c                          | 1 +
 drivers/infiniband/hw/mthca/mthca_eq.c                    | 1 +
 drivers/infiniband/hw/mthca/mthca_provider.c              | 1 +
 drivers/infiniband/hw/ocrdma/ocrdma_hw.c                  | 2 ++
 drivers/infiniband/hw/ocrdma/ocrdma_main.c                | 1 +
 drivers/infiniband/hw/ocrdma/ocrdma_stats.c               | 2 ++
 drivers/infiniband/hw/ocrdma/ocrdma_verbs.c               | 1 +
 drivers/infiniband/hw/qedr/main.c                         | 1 +
 drivers/infiniband/hw/qedr/qedr_iw_cm.c                   | 1 +
 drivers/infiniband/hw/qedr/verbs.c                        | 2 ++
 drivers/infiniband/hw/qib/qib_debugfs.c                   | 1 +
 drivers/infiniband/hw/qib/qib_diag.c                      | 2 ++
 drivers/infiniband/hw/qib/qib_file_ops.c                  | 3 +++
 drivers/infiniband/hw/qib/qib_fs.c                        | 1 +
 drivers/infiniband/hw/qib/qib_iba6120.c                   | 1 +
 drivers/infiniband/hw/qib/qib_iba7220.c                   | 1 +
 drivers/infiniband/hw/qib/qib_iba7322.c                   | 2 ++
 drivers/infiniband/hw/qib/qib_init.c                      | 1 +
 drivers/infiniband/hw/qib/qib_pcie.c                      | 1 +
 drivers/infiniband/hw/qib/qib_qsfp.c                      | 1 +
 drivers/infiniband/hw/qib/qib_sdma.c                      | 1 +
 drivers/infiniband/hw/qib/qib_sysfs.c                     | 1 +
 drivers/infiniband/hw/qib/qib_user_sdma.c                 | 1 +
 drivers/infiniband/hw/qib/qib_verbs.c                     | 1 +
 drivers/infiniband/hw/usnic/usnic_debugfs.c               | 1 +
 drivers/infiniband/hw/usnic/usnic_ib_main.c               | 2 ++
 drivers/infiniband/hw/usnic/usnic_ib_qp_grp.c             | 1 +
 drivers/infiniband/hw/usnic/usnic_ib_sysfs.c              | 1 +
 drivers/infiniband/hw/usnic/usnic_transport.c             | 1 +
 drivers/infiniband/hw/usnic/usnic_vnic.c                  | 1 +
 drivers/infiniband/hw/vmw_pvrdma/pvrdma_cmd.c             | 1 +
 drivers/infiniband/hw/vmw_pvrdma/pvrdma_cq.c              | 1 +
 drivers/infiniband/hw/vmw_pvrdma/pvrdma_main.c            | 2 ++
 drivers/infiniband/hw/vmw_pvrdma/pvrdma_qp.c              | 1 +
 drivers/infiniband/hw/vmw_pvrdma/pvrdma_srq.c             | 1 +
 drivers/infiniband/sw/rdmavt/cq.c                         | 1 +
 drivers/infiniband/sw/rdmavt/mr.c                         | 1 +
 drivers/infiniband/sw/rdmavt/qp.c                         | 1 +
 drivers/infiniband/sw/rxe/rxe_mr.c                        | 1 +
 drivers/infiniband/sw/rxe/rxe_pool.c                      | 1 +
 drivers/infiniband/sw/rxe/rxe_srq.c                       | 1 +
 drivers/infiniband/sw/siw/siw_qp.c                        | 1 +
 drivers/infiniband/sw/siw/siw_qp_tx.c                     | 2 ++
 drivers/infiniband/sw/siw/siw_verbs.c                     | 1 +
 drivers/infiniband/ulp/ipoib/ipoib_fs.c                   | 1 +
 drivers/infiniband/ulp/ipoib/ipoib_main.c                 | 3 +++
 drivers/infiniband/ulp/ipoib/ipoib_vlan.c                 | 1 +
 drivers/infiniband/ulp/iser/iscsi_iser.c                  | 3 +++
 drivers/infiniband/ulp/iser/iser_verbs.c                  | 2 ++
 drivers/infiniband/ulp/isert/ib_isert.c                   | 2 ++
 drivers/infiniband/ulp/rtrs/rtrs-clt-sysfs.c              | 1 +
 drivers/infiniband/ulp/rtrs/rtrs-clt.c                    | 2 ++
 drivers/infiniband/ulp/rtrs/rtrs-srv.c                    | 1 +
 drivers/infiniband/ulp/rtrs/rtrs.c                        | 1 +
 drivers/infiniband/ulp/srp/ib_srp.c                       | 5 +++++
 drivers/infiniband/ulp/srpt/ib_srpt.c                     | 4 ++++
 drivers/input/gameport/gameport.c                         | 1 +
 drivers/input/input-leds.c                                | 1 +
 drivers/input/input-poller.c                              | 2 ++
 drivers/input/input.c                                     | 2 ++
 drivers/input/joystick/a3d.c                              | 1 +
 drivers/input/joystick/adi.c                              | 1 +
 drivers/input/joystick/analog.c                           | 2 ++
 drivers/input/joystick/cobra.c                            | 1 +
 drivers/input/joystick/db9.c                              | 1 +
 drivers/input/joystick/fsia6b.c                           | 1 +
 drivers/input/joystick/gamecon.c                          | 1 +
 drivers/input/joystick/gf2k.c                             | 1 +
 drivers/input/joystick/grip.c                             | 1 +
 drivers/input/joystick/guillemot.c                        | 1 +
 drivers/input/joystick/interact.c                         | 1 +
 drivers/input/joystick/magellan.c                         | 1 +
 drivers/input/joystick/psxpad-spi.c                       | 1 +
 drivers/input/joystick/qwiic-joystick.c                   | 1 +
 drivers/input/joystick/sidewinder.c                       | 1 +
 drivers/input/joystick/spaceball.c                        | 1 +
 drivers/input/joystick/spaceorb.c                         | 1 +
 drivers/input/joystick/stinger.c                          | 1 +
 drivers/input/joystick/tmdc.c                             | 1 +
 drivers/input/joystick/turbografx.c                       | 1 +
 drivers/input/joystick/twidjoy.c                          | 1 +
 drivers/input/joystick/warrior.c                          | 1 +
 drivers/input/joystick/xpad.c                             | 1 +
 drivers/input/joystick/zhenhua.c                          | 1 +
 drivers/input/keyboard/applespi.c                         | 1 +
 drivers/input/keyboard/atkbd.c                            | 2 ++
 drivers/input/keyboard/gpio_keys.c                        | 1 +
 drivers/input/keyboard/lkkbd.c                            | 1 +
 drivers/input/keyboard/lm8323.c                           | 2 ++
 drivers/input/keyboard/newtonkbd.c                        | 1 +
 drivers/input/keyboard/omap-keypad.c                      | 1 +
 drivers/input/keyboard/qt2160.c                           | 1 +
 drivers/input/keyboard/stowaway.c                         | 1 +
 drivers/input/keyboard/sunkbd.c                           | 1 +
 drivers/input/keyboard/xtkbd.c                            | 1 +
 drivers/input/misc/adxl34x.c                              | 2 ++
 drivers/input/misc/ati_remote2.c                          | 2 ++
 drivers/input/misc/axp20x-pek.c                           | 2 ++
 drivers/input/misc/da9063_onkey.c                         | 1 +
 drivers/input/misc/ideapad_slidebar.c                     | 2 ++
 drivers/input/misc/ims-pcu.c                              | 2 ++
 drivers/input/misc/iqs269a.c                              | 1 +
 drivers/input/misc/iqs626a.c                              | 1 +
 drivers/input/misc/iqs7222.c                              | 2 ++
 drivers/input/misc/keyspan_remote.c                       | 1 +
 drivers/input/misc/kxtj9.c                                | 2 ++
 drivers/input/misc/pcf8574_keypad.c                       | 1 +
 drivers/input/misc/tps65218-pwrbutton.c                   | 1 +
 drivers/input/misc/tps65219-pwrbutton.c                   | 1 +
 drivers/input/misc/uinput.c                               | 1 +
 drivers/input/misc/xen-kbdfront.c                         | 1 +
 drivers/input/misc/yealink.c                              | 1 +
 drivers/input/mouse/alps.c                                | 1 +
 drivers/input/mouse/cyapa.c                               | 2 ++
 drivers/input/mouse/elan_i2c_core.c                       | 2 ++
 drivers/input/mouse/elantech.c                            | 2 ++
 drivers/input/mouse/hgpk.c                                | 2 ++
 drivers/input/mouse/lifebook.c                            | 1 +
 drivers/input/mouse/logips2pp.c                           | 2 ++
 drivers/input/mouse/psmouse-base.c                        | 2 ++
 drivers/input/mouse/sentelic.c                            | 2 ++
 drivers/input/mouse/sermouse.c                            | 1 +
 drivers/input/mouse/synaptics.c                           | 2 ++
 drivers/input/mouse/synaptics_usb.c                       | 1 +
 drivers/input/mouse/trackpoint.c                          | 2 ++
 drivers/input/mouse/vmmouse.c                             | 1 +
 drivers/input/mouse/vsxxxaa.c                             | 1 +
 drivers/input/rmi4/rmi_bus.c                              | 1 +
 drivers/input/rmi4/rmi_f01.c                              | 1 +
 drivers/input/rmi4/rmi_f03.c                              | 1 +
 drivers/input/rmi4/rmi_f34.c                              | 2 ++
 drivers/input/rmi4/rmi_f34v7.c                            | 2 ++
 drivers/input/rmi4/rmi_f54.c                              | 2 ++
 drivers/input/serio/apbps2.c                              | 1 +
 drivers/input/serio/arc_ps2.c                             | 1 +
 drivers/input/serio/ct82c710.c                            | 1 +
 drivers/input/serio/gscps2.c                              | 1 +
 drivers/input/serio/hil_mlc.c                             | 1 +
 drivers/input/serio/i8042-acpipnpio.h                     | 1 +
 drivers/input/serio/i8042.c                               | 3 +++
 drivers/input/serio/ioc3kbd.c                             | 1 +
 drivers/input/serio/maceps2.c                             | 1 +
 drivers/input/serio/parkbd.c                              | 1 +
 drivers/input/serio/ps2mult.c                             | 1 +
 drivers/input/serio/serio.c                               | 1 +
 drivers/input/serio/serio_raw.c                           | 1 +
 drivers/input/serio/serport.c                             | 1 +
 drivers/input/serio/xilinx_ps2.c                          | 1 +
 drivers/input/tablet/acecad.c                             | 1 +
 drivers/input/tablet/aiptek.c                             | 1 +
 drivers/input/tablet/pegasus_notetaker.c                  | 1 +
 drivers/input/tablet/wacom_serial4.c                      | 1 +
 drivers/input/touchscreen/ad7877.c                        | 2 ++
 drivers/input/touchscreen/ad7879.c                        | 2 ++
 drivers/input/touchscreen/ads7846.c                       | 2 ++
 drivers/input/touchscreen/atmel_mxt_ts.c                  | 2 ++
 drivers/input/touchscreen/auo-pixcir-ts.c                 | 1 +
 drivers/input/touchscreen/chipone_icn8505.c               | 1 +
 drivers/input/touchscreen/cy8ctmg110_ts.c                 | 1 +
 drivers/input/touchscreen/cyttsp4_core.c                  | 1 +
 drivers/input/touchscreen/cyttsp5.c                       | 2 ++
 drivers/input/touchscreen/cyttsp_core.c                   | 1 +
 drivers/input/touchscreen/dynapro.c                       | 1 +
 drivers/input/touchscreen/edt-ft5x06.c                    | 2 ++
 drivers/input/touchscreen/egalax_ts_serial.c              | 1 +
 drivers/input/touchscreen/elants_i2c.c                    | 2 ++
 drivers/input/touchscreen/elo.c                           | 2 ++
 drivers/input/touchscreen/exc3000.c                       | 2 ++
 drivers/input/touchscreen/fujitsu_ts.c                    | 1 +
 drivers/input/touchscreen/goodix.c                        | 3 +++
 drivers/input/touchscreen/goodix_fwupload.c               | 1 +
 drivers/input/touchscreen/gunze.c                         | 2 ++
 drivers/input/touchscreen/hampshire.c                     | 1 +
 drivers/input/touchscreen/hideep.c                        | 2 ++
 drivers/input/touchscreen/hycon-hy46xx.c                  | 1 +
 drivers/input/touchscreen/ili210x.c                       | 1 +
 drivers/input/touchscreen/inexio.c                        | 1 +
 drivers/input/touchscreen/iqs5xx.c                        | 1 +
 drivers/input/touchscreen/melfas_mip4.c                   | 1 +
 drivers/input/touchscreen/mtouch.c                        | 1 +
 drivers/input/touchscreen/penmount.c                      | 1 +
 drivers/input/touchscreen/raydium_i2c_ts.c                | 1 +
 drivers/input/touchscreen/rohm_bu21023.c                  | 2 ++
 drivers/input/touchscreen/s6sy761.c                       | 1 +
 drivers/input/touchscreen/silead.c                        | 1 +
 drivers/input/touchscreen/stmfts.c                        | 3 +++
 drivers/input/touchscreen/sun4i-ts.c                      | 2 ++
 drivers/input/touchscreen/sur40.c                         | 1 +
 drivers/input/touchscreen/touchit213.c                    | 1 +
 drivers/input/touchscreen/touchright.c                    | 1 +
 drivers/input/touchscreen/touchwin.c                      | 1 +
 drivers/input/touchscreen/tps6507x-ts.c                   | 1 +
 drivers/input/touchscreen/ts4800-ts.c                     | 1 +
 drivers/input/touchscreen/tsc2007_core.c                  | 1 +
 drivers/input/touchscreen/tsc200x-core.c                  | 1 +
 drivers/input/touchscreen/tsc40.c                         | 1 +
 drivers/input/touchscreen/usbtouchscreen.c                | 1 +
 drivers/input/touchscreen/wacom_w8001.c                   | 2 ++
 drivers/input/touchscreen/wdt87xx_i2c.c                   | 1 +
 drivers/input/touchscreen/zforce_ts.c                     | 2 ++
 drivers/interconnect/core.c                               | 1 +
 drivers/iommu/amd/debugfs.c                               | 1 +
 drivers/iommu/amd/init.c                                  | 1 +
 drivers/iommu/amd/iommu.c                                 | 1 +
 drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c                | 1 +
 drivers/iommu/dma-iommu.c                                 | 2 ++
 drivers/iommu/fsl_pamu.c                                  | 1 +
 drivers/iommu/intel/debugfs.c                             | 2 ++
 drivers/iommu/intel/dmar.c                                | 1 +
 drivers/iommu/intel/iommu.h                               | 1 +
 drivers/iommu/intel/perf.c                                | 1 +
 drivers/iommu/intel/perfmon.c                             | 1 +
 drivers/iommu/intel/svm.c                                 | 2 ++
 drivers/iommu/iommu-sysfs.c                               | 1 +
 drivers/iommu/iommu.c                                     | 4 ++++
 drivers/iommu/iommufd/device.c                            | 1 +
 drivers/iommu/iommufd/hw_pagetable.c                      | 1 +
 drivers/iommu/iommufd/io_pagetable.c                      | 2 ++
 drivers/iommu/iommufd/ioas.c                              | 1 +
 drivers/iommu/iommufd/selftest.c                          | 1 +
 drivers/iommu/iommufd/vfio_compat.c                       | 1 +
 drivers/iommu/msm_iommu.c                                 | 1 +
 drivers/iommu/mtk_iommu.c                                 | 1 +
 drivers/iommu/omap-iommu-debug.c                          | 1 +
 drivers/iommu/s390-iommu.c                                | 1 +
 drivers/iommu/sprd-iommu.c                                | 1 +
 drivers/iommu/sun50i-iommu.c                              | 1 +
 drivers/iommu/virtio-iommu.c                              | 1 +
 drivers/ipack/devices/ipoctal.c                           | 1 +
 drivers/ipack/ipack.c                                     | 1 +
 drivers/irqchip/irq-alpine-msi.c                          | 1 +
 drivers/irqchip/irq-gic-v3-its-fsl-mc-msi.c               | 1 +
 drivers/irqchip/irq-gic-v3-its-pci-msi.c                  | 1 +
 drivers/irqchip/irq-gic-v3-its-platform-msi.c             | 1 +
 drivers/irqchip/irq-gic-v3-its.c                          | 1 +
 drivers/irqchip/irq-gic-v4.c                              | 1 +
 drivers/irqchip/irq-loongson-pch-msi.c                    | 1 +
 drivers/irqchip/irq-mvebu-gicp.c                          | 1 +
 drivers/isdn/capi/capiutil.c                              | 1 +
 drivers/isdn/capi/kcapi.c                                 | 1 +
 drivers/isdn/hardware/mISDN/avmfritz.c                    | 1 +
 drivers/isdn/hardware/mISDN/hfcmulti.c                    | 1 +
 drivers/isdn/hardware/mISDN/hfcpci.c                      | 1 +
 drivers/isdn/hardware/mISDN/hfcsusb.c                     | 1 +
 drivers/isdn/hardware/mISDN/mISDNinfineon.c               | 1 +
 drivers/isdn/hardware/mISDN/mISDNipac.c                   | 1 +
 drivers/isdn/hardware/mISDN/mISDNisar.c                   | 1 +
 drivers/isdn/hardware/mISDN/netjet.c                      | 1 +
 drivers/isdn/hardware/mISDN/speedfax.c                    | 1 +
 drivers/isdn/hardware/mISDN/w6692.c                       | 1 +
 drivers/isdn/mISDN/core.c                                 | 1 +
 drivers/isdn/mISDN/dsp_cmx.c                              | 1 +
 drivers/isdn/mISDN/dsp_core.c                             | 1 +
 drivers/isdn/mISDN/dsp_hwec.c                             | 1 +
 drivers/isdn/mISDN/dsp_pipeline.c                         | 1 +
 drivers/isdn/mISDN/l1oip_core.c                           | 2 ++
 drivers/isdn/mISDN/stack.c                                | 1 +
 drivers/leds/flash/leds-max77693.c                        | 1 +
 drivers/leds/led-class-flash.c                            | 2 ++
 drivers/leds/led-class-multicolor.c                       | 1 +
 drivers/leds/led-class.c                                  | 2 ++
 drivers/leds/led-core.c                                   | 1 +
 drivers/leds/led-triggers.c                               | 1 +
 drivers/leds/leds-88pm860x.c                              | 1 +
 drivers/leds/leds-aw200xx.c                               | 1 +
 drivers/leds/leds-bd2802.c                                | 2 ++
 drivers/leds/leds-blinkm.c                                | 2 ++
 drivers/leds/leds-dac124s085.c                            | 1 +
 drivers/leds/leds-lm3530.c                                | 1 +
 drivers/leds/leds-lm3533.c                                | 1 +
 drivers/leds/leds-lm355x.c                                | 1 +
 drivers/leds/leds-lm3642.c                                | 1 +
 drivers/leds/leds-lp5521.c                                | 1 +
 drivers/leds/leds-lp5523.c                                | 2 ++
 drivers/leds/leds-lp5562.c                                | 2 ++
 drivers/leds/leds-lp55xx-common.c                         | 2 ++
 drivers/leds/leds-lp8501.c                                | 1 +
 drivers/leds/leds-max8997.c                               | 1 +
 drivers/leds/leds-mlxreg.c                                | 1 +
 drivers/leds/leds-netxbig.c                               | 2 ++
 drivers/leds/leds-ns2.c                                   | 2 ++
 drivers/leds/leds-pca955x.c                               | 1 +
 drivers/leds/leds-pca963x.c                               | 1 +
 drivers/leds/leds-ss4200.c                                | 2 ++
 drivers/leds/leds-turris-omnia.c                          | 1 +
 drivers/leds/leds-wm831x-status.c                         | 1 +
 drivers/leds/trigger/ledtrig-activity.c                   | 2 ++
 drivers/leds/trigger/ledtrig-backlight.c                  | 2 ++
 drivers/leds/trigger/ledtrig-cpu.c                        | 1 +
 drivers/leds/trigger/ledtrig-gpio.c                       | 1 +
 drivers/leds/trigger/ledtrig-heartbeat.c                  | 2 ++
 drivers/leds/trigger/ledtrig-netdev.c                     | 2 ++
 drivers/leds/trigger/ledtrig-oneshot.c                    | 2 ++
 drivers/leds/trigger/ledtrig-pattern.c                    | 1 +
 drivers/leds/trigger/ledtrig-timer.c                      | 2 ++
 drivers/leds/trigger/ledtrig-transient.c                  | 2 ++
 drivers/leds/trigger/ledtrig-tty.c                        | 2 ++
 drivers/macintosh/adb.c                                   | 1 +
 drivers/macintosh/adbhid.c                                | 1 +
 drivers/macintosh/ams/ams-input.c                         | 2 ++
 drivers/macintosh/ams/ams-pmu.c                           | 1 +
 drivers/macintosh/macio_asic.c                            | 1 +
 drivers/macintosh/macio_sysfs.c                           | 1 +
 drivers/macintosh/smu.c                                   | 1 +
 drivers/macintosh/therm_adt746x.c                         | 2 ++
 drivers/macintosh/therm_windtunnel.c                      | 1 +
 drivers/macintosh/via-pmu-backlight.c                     | 1 +
 drivers/macintosh/via-pmu.c                               | 1 +
 drivers/macintosh/windfarm_ad7417_sensor.c                | 1 +
 drivers/macintosh/windfarm_core.c                         | 2 ++
 drivers/macintosh/windfarm_mpu.h                          | 1 +
 drivers/macintosh/windfarm_smu_sat.c                      | 1 +
 drivers/mailbox/bcm-pdc-mailbox.c                         | 2 ++
 drivers/mailbox/imx-mailbox.c                             | 1 +
 drivers/mailbox/mailbox-test.c                            | 1 +
 drivers/mailbox/mailbox.c                                 | 2 ++
 drivers/mailbox/tegra-hsp.c                               | 1 +
 drivers/mailbox/ti-msgmgr.c                               | 1 +
 drivers/mcb/mcb-core.c                                    | 1 +
 drivers/mcb/mcb-parse.c                                   | 1 +
 drivers/md/bcache/bset.c                                  | 1 +
 drivers/md/bcache/btree.c                                 | 1 +
 drivers/md/bcache/debug.c                                 | 1 +
 drivers/md/bcache/extents.c                               | 1 +
 drivers/md/bcache/features.c                              | 1 +
 drivers/md/bcache/super.c                                 | 2 ++
 drivers/md/bcache/sysfs.c                                 | 2 ++
 drivers/md/bcache/sysfs.h                                 | 3 +++
 drivers/md/bcache/util.c                                  | 2 ++
 drivers/md/bcache/util.h                                  | 1 +
 drivers/md/dm-bufio.c                                     | 1 +
 drivers/md/dm-builtin.c                                   | 1 +
 drivers/md/dm-cache-policy-smq.c                          | 1 +
 drivers/md/dm-cache-target.c                              | 2 ++
 drivers/md/dm-clone-target.c                              | 1 +
 drivers/md/dm-crypt.c                                     | 2 ++
 drivers/md/dm-delay.c                                     | 1 +
 drivers/md/dm-dust.c                                      | 2 ++
 drivers/md/dm-ebs-target.c                                | 1 +
 drivers/md/dm-era-target.c                                | 2 ++
 drivers/md/dm-exception-store.c                           | 1 +
 drivers/md/dm-flakey.c                                    | 2 ++
 drivers/md/dm-ima.c                                       | 1 +
 drivers/md/dm-init.c                                      | 1 +
 drivers/md/dm-integrity.c                                 | 3 +++
 drivers/md/dm-io.c                                        | 1 +
 drivers/md/dm-ioctl.c                                     | 1 +
 drivers/md/dm-linear.c                                    | 1 +
 drivers/md/dm-log-userspace-base.c                        | 1 +
 drivers/md/dm-log-userspace-transfer.c                    | 1 +
 drivers/md/dm-log-writes.c                                | 1 +
 drivers/md/dm-log.c                                       | 1 +
 drivers/md/dm-mpath.c                                     | 1 +
 drivers/md/dm-ps-historical-service-time.c                | 1 +
 drivers/md/dm-ps-queue-length.c                           | 1 +
 drivers/md/dm-ps-round-robin.c                            | 1 +
 drivers/md/dm-ps-service-time.c                           | 1 +
 drivers/md/dm-raid.c                                      | 1 +
 drivers/md/dm-raid1.c                                     | 1 +
 drivers/md/dm-rq.c                                        | 1 +
 drivers/md/dm-snap.c                                      | 1 +
 drivers/md/dm-stats.c                                     | 1 +
 drivers/md/dm-stripe.c                                    | 2 ++
 drivers/md/dm-switch.c                                    | 1 +
 drivers/md/dm-sysfs.c                                     | 2 ++
 drivers/md/dm-table.c                                     | 2 ++
 drivers/md/dm-target.c                                    | 1 +
 drivers/md/dm-thin.c                                      | 2 ++
 drivers/md/dm-unstripe.c                                  | 2 ++
 drivers/md/dm-vdo/dedupe.c                                | 1 +
 drivers/md/dm-vdo/funnel-requestqueue.c                   | 1 +
 drivers/md/dm-vdo/thread-utils.c                          | 1 +
 drivers/md/dm-vdo/vdo.c                                   | 1 +
 drivers/md/dm-verity-fec.c                                | 1 +
 drivers/md/dm-verity-target.c                             | 4 ++++
 drivers/md/dm-writecache.c                                | 2 ++
 drivers/md/dm.c                                           | 3 +++
 drivers/md/md-autodetect.c                                | 1 +
 drivers/md/md-bitmap.c                                    | 3 +++
 drivers/md/md-cluster.c                                   | 2 ++
 drivers/md/md.c                                           | 2 ++
 drivers/md/md.h                                           | 1 +
 drivers/md/raid0.c                                        | 1 +
 drivers/md/raid1.c                                        | 1 +
 drivers/md/raid10.c                                       | 1 +
 drivers/md/raid5-cache.c                                  | 2 ++
 drivers/md/raid5-ppl.c                                    | 3 +++
 drivers/md/raid5.c                                        | 3 +++
 drivers/media/cec/core/cec-adap.c                         | 1 +
 drivers/media/cec/core/cec-core.c                         | 1 +
 drivers/media/cec/core/cec-pin-error-inj.c                | 1 +
 drivers/media/cec/core/cec-pin.c                          | 1 +
 drivers/media/cec/platform/meson/ao-cec-g12a.c            | 1 +
 drivers/media/cec/platform/s5p/exynos_hdmi_cecctrl.c      | 1 +
 drivers/media/cec/platform/seco/seco-cec.c                | 1 +
 drivers/media/cec/usb/pulse8/pulse8-cec.c                 | 1 +
 drivers/media/cec/usb/rainshadow/rainshadow-cec.c         | 2 ++
 drivers/media/common/saa7146/saa7146_core.c               | 1 +
 drivers/media/common/siano/smscoreapi.c                   | 1 +
 drivers/media/common/siano/smsdvb-main.c                  | 1 +
 drivers/media/common/siano/smsir.c                        | 1 +
 drivers/media/common/videobuf2/videobuf2-core.c           | 2 ++
 drivers/media/common/videobuf2/videobuf2-dma-contig.c     | 1 +
 drivers/media/dvb-core/dvb_net.c                          | 1 +
 drivers/media/dvb-core/dvbdev.c                           | 1 +
 drivers/media/dvb-frontends/cxd2841er.c                   | 1 +
 drivers/media/dvb-frontends/drxk_hard.c                   | 1 +
 drivers/media/i2c/adv748x/adv748x-core.c                  | 1 +
 drivers/media/i2c/adv7511-v4l2.c                          | 1 +
 drivers/media/i2c/adv7604.c                               | 1 +
 drivers/media/i2c/ccs/ccs-core.c                          | 1 +
 drivers/media/i2c/ccs/ccs-reg-access.c                    | 1 +
 drivers/media/i2c/ds90ub913.c                             | 1 +
 drivers/media/i2c/ds90ub953.c                             | 1 +
 drivers/media/i2c/ir-kbd-i2c.c                            | 1 +
 drivers/media/i2c/max9286.c                               | 2 ++
 drivers/media/i2c/msp3400-driver.c                        | 1 +
 drivers/media/i2c/s5c73m3/s5c73m3-core.c                  | 1 +
 drivers/media/i2c/s5k5baf.c                               | 1 +
 drivers/media/i2c/saa7115.c                               | 1 +
 drivers/media/i2c/tda1997x.c                              | 1 +
 drivers/media/i2c/video-i2c.c                             | 1 +
 drivers/media/mc/mc-device.c                              | 1 +
 drivers/media/mc/mc-request.c                             | 1 +
 drivers/media/mmc/siano/smssdio.c                         | 1 +
 drivers/media/pci/bt8xx/bttv-driver.c                     | 1 +
 drivers/media/pci/bt8xx/bttv-gpio.c                       | 1 +
 drivers/media/pci/bt8xx/bttv-i2c.c                        | 1 +
 drivers/media/pci/bt8xx/bttv-input.c                      | 1 +
 drivers/media/pci/cobalt/cobalt-alsa-main.c               | 1 +
 drivers/media/pci/cobalt/cobalt-driver.c                  | 1 +
 drivers/media/pci/cobalt/cobalt-i2c.c                     | 1 +
 drivers/media/pci/cobalt/cobalt-v4l2.c                    | 1 +
 drivers/media/pci/cx18/cx18-alsa-main.c                   | 1 +
 drivers/media/pci/cx18/cx18-av-core.c                     | 1 +
 drivers/media/pci/cx18/cx18-driver.c                      | 1 +
 drivers/media/pci/cx18/cx18-gpio.c                        | 1 +
 drivers/media/pci/cx18/cx18-i2c.c                         | 1 +
 drivers/media/pci/cx18/cx18-mailbox.c                     | 1 +
 drivers/media/pci/cx18/cx18-streams.c                     | 1 +
 drivers/media/pci/cx23885/cx23885-417.c                   | 1 +
 drivers/media/pci/cx23885/cx23885-alsa.c                  | 1 +
 drivers/media/pci/cx23885/cx23885-core.c                  | 1 +
 drivers/media/pci/cx23885/cx23885-input.c                 | 1 +
 drivers/media/pci/cx23885/cx23885-video.c                 | 1 +
 drivers/media/pci/cx23885/cx23888-ir.c                    | 1 +
 drivers/media/pci/cx25821/cx25821-alsa.c                  | 1 +
 drivers/media/pci/cx25821/cx25821-core.c                  | 1 +
 drivers/media/pci/cx25821/cx25821-video.c                 | 1 +
 drivers/media/pci/cx88/cx88-alsa.c                        | 1 +
 drivers/media/pci/cx88/cx88-blackbird.c                   | 1 +
 drivers/media/pci/cx88/cx88-cards.c                       | 1 +
 drivers/media/pci/cx88/cx88-core.c                        | 1 +
 drivers/media/pci/cx88/cx88-input.c                       | 1 +
 drivers/media/pci/ddbridge/ddbridge-core.c                | 1 +
 drivers/media/pci/ddbridge/ddbridge-i2c.c                 | 2 ++
 drivers/media/pci/ddbridge/ddbridge-mci.c                 | 1 +
 drivers/media/pci/dm1105/dm1105.c                         | 1 +
 drivers/media/pci/dt3155/dt3155.c                         | 1 +
 drivers/media/pci/intel/ipu-bridge.c                      | 1 +
 drivers/media/pci/intel/ipu3/ipu3-cio2.c                  | 2 ++
 drivers/media/pci/intel/ivsc/mei_ace.c                    | 1 +
 drivers/media/pci/intel/ivsc/mei_csi.c                    | 1 +
 drivers/media/pci/ivtv/ivtv-alsa-main.c                   | 1 +
 drivers/media/pci/ivtv/ivtv-gpio.c                        | 1 +
 drivers/media/pci/ivtv/ivtv-i2c.c                         | 1 +
 drivers/media/pci/ivtv/ivtv-streams.c                     | 1 +
 drivers/media/pci/mantis/mantis_input.c                   | 1 +
 drivers/media/pci/mgb4/mgb4_core.c                        | 1 +
 drivers/media/pci/mgb4/mgb4_dma.c                         | 2 ++
 drivers/media/pci/mgb4/mgb4_sysfs_in.c                    | 2 ++
 drivers/media/pci/mgb4/mgb4_sysfs_out.c                   | 2 ++
 drivers/media/pci/mgb4/mgb4_sysfs_pci.c                   | 1 +
 drivers/media/pci/mgb4/mgb4_vin.c                         | 1 +
 drivers/media/pci/mgb4/mgb4_vout.c                        | 1 +
 drivers/media/pci/netup_unidvb/netup_unidvb_core.c        | 1 +
 drivers/media/pci/netup_unidvb/netup_unidvb_spi.c         | 1 +
 drivers/media/pci/pt3/pt3.c                               | 1 +
 drivers/media/pci/saa7134/saa7134-alsa.c                  | 1 +
 drivers/media/pci/saa7134/saa7134-core.c                  | 1 +
 drivers/media/pci/saa7134/saa7134-empress.c               | 1 +
 drivers/media/pci/saa7134/saa7134-go7007.c                | 1 +
 drivers/media/pci/saa7134/saa7134-input.c                 | 1 +
 drivers/media/pci/saa7146/mxb.c                           | 1 +
 drivers/media/pci/saa7164/saa7164-core.c                  | 1 +
 drivers/media/pci/saa7164/saa7164-encoder.c               | 1 +
 drivers/media/pci/saa7164/saa7164-vbi.c                   | 1 +
 drivers/media/pci/smipcie/smipcie-ir.c                    | 1 +
 drivers/media/pci/solo6x10/solo6x10-core.c                | 2 ++
 drivers/media/pci/solo6x10/solo6x10-g723.c                | 1 +
 drivers/media/pci/solo6x10/solo6x10-i2c.c                 | 1 +
 drivers/media/pci/solo6x10/solo6x10-p2m.c                 | 1 +
 drivers/media/pci/solo6x10/solo6x10-v4l2-enc.c            | 1 +
 drivers/media/pci/solo6x10/solo6x10-v4l2.c                | 1 +
 drivers/media/pci/sta2x11/sta2x11_vip.c                   | 1 +
 drivers/media/pci/ttpci/budget-ci.c                       | 1 +
 drivers/media/pci/tw5864/tw5864-core.c                    | 1 +
 drivers/media/pci/tw5864/tw5864-video.c                   | 1 +
 drivers/media/pci/tw68/tw68-video.c                       | 1 +
 drivers/media/pci/tw686x/tw686x-audio.c                   | 1 +
 drivers/media/pci/tw686x/tw686x-core.c                    | 1 +
 drivers/media/pci/tw686x/tw686x-video.c                   | 1 +
 drivers/media/pci/zoran/videocodec.c                      | 1 +
 drivers/media/pci/zoran/zoran_card.c                      | 1 +
 drivers/media/pci/zoran/zoran_driver.c                    | 1 +
 drivers/media/pci/zoran/zr36016.c                         | 1 +
 drivers/media/pci/zoran/zr36050.c                         | 1 +
 drivers/media/pci/zoran/zr36060.c                         | 1 +
 drivers/media/platform/allegro-dvt/allegro-core.c         | 1 +
 drivers/media/platform/allegro-dvt/allegro-mail.c         | 2 ++
 drivers/media/platform/amphion/vdec.c                     | 1 +
 drivers/media/platform/amphion/venc.c                     | 1 +
 drivers/media/platform/amphion/vpu_cmds.c                 | 1 +
 drivers/media/platform/amphion/vpu_core.c                 | 1 +
 drivers/media/platform/amphion/vpu_dbg.c                  | 1 +
 drivers/media/platform/amphion/vpu_mbox.c                 | 1 +
 drivers/media/platform/amphion/vpu_msgs.c                 | 1 +
 drivers/media/platform/aspeed/aspeed-video.c              | 1 +
 drivers/media/platform/cadence/cdns-csi2rx.c              | 1 +
 drivers/media/platform/cadence/cdns-csi2tx.c              | 1 +
 drivers/media/platform/chips-media/coda/coda-bit.c        | 2 ++
 drivers/media/platform/chips-media/coda/coda-common.c     | 2 ++
 drivers/media/platform/chips-media/coda/coda-jpeg.c       | 1 +
 drivers/media/platform/chips-media/coda/imx-vdoa.c        | 1 +
 drivers/media/platform/chips-media/wave5/wave5-vpu-dec.c  | 1 +
 drivers/media/platform/chips-media/wave5/wave5-vpu-enc.c  | 1 +
 drivers/media/platform/chips-media/wave5/wave5-vpu.c      | 1 +
 drivers/media/platform/mediatek/jpeg/mtk_jpeg_core.c      | 1 +
 drivers/media/platform/mediatek/mdp/mtk_mdp_m2m.c         | 1 +
 drivers/media/platform/mediatek/mdp3/mtk-mdp3-m2m.c       | 1 +
 drivers/media/platform/mediatek/mdp3/mtk-mdp3-vpu.c       | 1 +
 .../platform/mediatek/vcodec/common/mtk_vcodec_dbgfs.c    | 1 +
 .../platform/mediatek/vcodec/decoder/mtk_vcodec_dec.c     | 1 +
 .../platform/mediatek/vcodec/decoder/mtk_vcodec_dec_drv.c | 1 +
 .../platform/mediatek/vcodec/encoder/mtk_vcodec_enc.c     | 1 +
 .../platform/mediatek/vcodec/encoder/mtk_vcodec_enc_drv.c | 1 +
 drivers/media/platform/mediatek/vpu/mtk_vpu.c             | 1 +
 drivers/media/platform/microchip/microchip-csi2dc.c       | 1 +
 drivers/media/platform/microchip/microchip-isc-base.c     | 1 +
 drivers/media/platform/microchip/microchip-isc-scaler.c   | 1 +
 drivers/media/platform/nvidia/tegra-vde/h264.c            | 1 +
 drivers/media/platform/nvidia/tegra-vde/vde.c             | 1 +
 drivers/media/platform/nxp/imx-jpeg/mxc-jpeg.c            | 1 +
 drivers/media/platform/nxp/imx-mipi-csis.c                | 1 +
 drivers/media/platform/nxp/imx-pxp.c                      | 1 +
 drivers/media/platform/nxp/imx7-media-csi.c               | 1 +
 drivers/media/platform/nxp/imx8-isi/imx8-isi-debug.c      | 1 +
 drivers/media/platform/nxp/imx8-isi/imx8-isi-hw.c         | 1 +
 drivers/media/platform/nxp/imx8-isi/imx8-isi-m2m.c        | 1 +
 drivers/media/platform/nxp/imx8-isi/imx8-isi-pipe.c       | 1 +
 drivers/media/platform/nxp/imx8-isi/imx8-isi-video.c      | 1 +
 drivers/media/platform/nxp/imx8mq-mipi-csi2.c             | 1 +
 drivers/media/platform/qcom/camss/camss-csid.c            | 1 +
 drivers/media/platform/qcom/camss/camss-csiphy.c          | 1 +
 drivers/media/platform/qcom/camss/camss-ispif.c           | 1 +
 drivers/media/platform/qcom/camss/camss-vfe-170.c         | 1 +
 drivers/media/platform/qcom/camss/camss-vfe-480.c         | 1 +
 drivers/media/platform/qcom/camss/camss-vfe-gen1.c        | 1 +
 drivers/media/platform/qcom/camss/camss-vfe.c             | 1 +
 drivers/media/platform/qcom/venus/hfi_cmds.c              | 1 +
 drivers/media/platform/qcom/venus/hfi_msgs.c              | 2 ++
 drivers/media/platform/qcom/venus/hfi_venus.c             | 1 +
 drivers/media/platform/renesas/rcar-isp.c                 | 1 +
 drivers/media/platform/renesas/rcar-vin/rcar-csi2.c       | 1 +
 drivers/media/platform/renesas/rcar-vin/rcar-v4l2.c       | 1 +
 drivers/media/platform/renesas/rcar_drif.c                | 1 +
 drivers/media/platform/renesas/rcar_fdp1.c                | 1 +
 drivers/media/platform/renesas/renesas-ceu.c              | 1 +
 drivers/media/platform/renesas/rzg2l-cru/rzg2l-csi2.c     | 1 +
 drivers/media/platform/renesas/rzg2l-cru/rzg2l-ip.c       | 1 +
 drivers/media/platform/renesas/rzg2l-cru/rzg2l-video.c    | 1 +
 drivers/media/platform/renesas/vsp1/vsp1_entity.c         | 1 +
 drivers/media/platform/renesas/vsp1/vsp1_histo.c          | 1 +
 drivers/media/platform/renesas/vsp1/vsp1_rpf.c            | 1 +
 drivers/media/platform/renesas/vsp1/vsp1_uds.c            | 1 +
 drivers/media/platform/renesas/vsp1/vsp1_uif.c            | 1 +
 drivers/media/platform/renesas/vsp1/vsp1_video.c          | 1 +
 drivers/media/platform/renesas/vsp1/vsp1_wpf.c            | 1 +
 drivers/media/platform/rockchip/rga/rga-buf.c             | 1 +
 drivers/media/platform/samsung/exynos-gsc/gsc-m2m.c       | 1 +
 drivers/media/platform/samsung/exynos4-is/fimc-capture.c  | 1 +
 drivers/media/platform/samsung/exynos4-is/fimc-isp.c      | 1 +
 drivers/media/platform/samsung/exynos4-is/fimc-lite.c     | 1 +
 drivers/media/platform/samsung/exynos4-is/fimc-m2m.c      | 1 +
 drivers/media/platform/samsung/exynos4-is/media-dev.c     | 1 +
 drivers/media/platform/samsung/exynos4-is/mipi-csis.c     | 1 +
 drivers/media/platform/samsung/s3c-camif/camif-capture.c  | 1 +
 drivers/media/platform/samsung/s3c-camif/camif-core.c     | 1 +
 drivers/media/platform/samsung/s5p-jpeg/jpeg-core.c       | 1 +
 drivers/media/platform/samsung/s5p-mfc/s5p_mfc.c          | 1 +
 drivers/media/platform/st/sti/bdisp/bdisp-debug.c         | 1 +
 drivers/media/platform/st/sti/bdisp/bdisp-v4l2.c          | 1 +
 drivers/media/platform/st/sti/c8sectpfe/c8sectpfe-core.c  | 1 +
 drivers/media/platform/st/sti/delta/delta-debug.c         | 1 +
 drivers/media/platform/st/sti/delta/delta-ipc.c           | 1 +
 drivers/media/platform/st/sti/delta/delta-mjpeg-dec.c     | 1 +
 drivers/media/platform/st/sti/delta/delta-mjpeg-hdr.c     | 1 +
 drivers/media/platform/st/sti/delta/delta-v4l2.c          | 1 +
 drivers/media/platform/st/sti/delta/delta.h               | 1 +
 drivers/media/platform/st/sti/hva/hva-debugfs.c           | 1 +
 drivers/media/platform/st/sti/hva/hva-hw.c                | 1 +
 drivers/media/platform/st/sti/hva/hva-v4l2.c              | 1 +
 drivers/media/platform/sunxi/sun4i-csi/sun4i_csi.c        | 1 +
 .../media/platform/sunxi/sun6i-csi/sun6i_csi_capture.c    | 1 +
 drivers/media/platform/sunxi/sun8i-di/sun8i-di.c          | 1 +
 drivers/media/platform/sunxi/sun8i-rotate/sun8i_rotate.c  | 1 +
 drivers/media/platform/ti/am437x/am437x-vpfe.c            | 1 +
 drivers/media/platform/ti/cal/cal-camerarx.c              | 1 +
 drivers/media/platform/ti/cal/cal-video.c                 | 1 +
 drivers/media/platform/ti/j721e-csi2rx/j721e-csi2rx.c     | 1 +
 drivers/media/platform/ti/omap/omap_vout.c                | 1 +
 drivers/media/platform/ti/omap3isp/isp.c                  | 1 +
 drivers/media/platform/ti/omap3isp/ispstat.c              | 1 +
 drivers/media/platform/ti/omap3isp/ispvideo.c             | 1 +
 drivers/media/platform/ti/vpe/vpe.c                       | 1 +
 drivers/media/platform/video-mux.c                        | 1 +
 drivers/media/platform/xilinx/xilinx-dma.c                | 1 +
 drivers/media/radio/radio-isa.c                           | 1 +
 drivers/media/radio/radio-sf16fmr2.c                      | 1 +
 drivers/media/radio/radio-shark.c                         | 1 +
 drivers/media/radio/radio-shark2.c                        | 1 +
 drivers/media/radio/radio-tea5764.c                       | 1 +
 drivers/media/radio/radio-timb.c                          | 1 +
 drivers/media/radio/radio-wl1273.c                        | 1 +
 drivers/media/radio/si470x/radio-si470x-common.c          | 1 +
 drivers/media/radio/si470x/radio-si470x-i2c.c             | 1 +
 drivers/media/radio/si470x/radio-si470x-usb.c             | 1 +
 drivers/media/radio/si4713/si4713.c                       | 1 +
 drivers/media/radio/wl128x/fmdrv_common.c                 | 2 ++
 drivers/media/radio/wl128x/fmdrv_rx.c                     | 1 +
 drivers/media/radio/wl128x/fmdrv_tx.c                     | 1 +
 drivers/media/radio/wl128x/fmdrv_v4l2.c                   | 1 +
 drivers/media/rc/ati_remote.c                             | 1 +
 drivers/media/rc/bpf-lirc.c                               | 1 +
 drivers/media/rc/ene_ir.c                                 | 1 +
 drivers/media/rc/iguanair.c                               | 1 +
 drivers/media/rc/imon.c                                   | 2 ++
 drivers/media/rc/ir_toy.c                                 | 1 +
 drivers/media/rc/mceusb.c                                 | 2 ++
 drivers/media/rc/meson-ir-tx.c                            | 1 +
 drivers/media/rc/nuvoton-cir.c                            | 2 ++
 drivers/media/rc/rc-main.c                                | 2 ++
 drivers/media/rc/redrat3.c                                | 1 +
 drivers/media/rc/xbox_remote.c                            | 1 +
 drivers/media/test-drivers/vicodec/codec-v4l2-fwht.c      | 1 +
 drivers/media/test-drivers/vicodec/vicodec-core.c         | 1 +
 drivers/media/test-drivers/vim2m.c                        | 1 +
 drivers/media/test-drivers/vimc/vimc-capture.c            | 1 +
 drivers/media/test-drivers/vimc/vimc-core.c               | 1 +
 drivers/media/test-drivers/vimc/vimc-sensor.c             | 1 +
 drivers/media/test-drivers/visl/visl-debugfs.c            | 1 +
 drivers/media/test-drivers/visl/visl-dec.c                | 1 +
 drivers/media/test-drivers/visl/visl-video.c              | 1 +
 drivers/media/test-drivers/vivid/vivid-cec.c              | 1 +
 drivers/media/test-drivers/vivid/vivid-core.c             | 1 +
 drivers/media/test-drivers/vivid/vivid-kthread-cap.c      | 1 +
 drivers/media/test-drivers/vivid/vivid-rds-gen.c          | 1 +
 drivers/media/test-drivers/vivid/vivid-vid-cap.c          | 1 +
 drivers/media/test-drivers/vivid/vivid-vid-out.c          | 1 +
 drivers/media/usb/au0828/au0828-input.c                   | 1 +
 drivers/media/usb/cx231xx/cx231xx-417.c                   | 1 +
 drivers/media/usb/cx231xx/cx231xx-cards.c                 | 1 +
 drivers/media/usb/cx231xx/cx231xx-i2c.c                   | 1 +
 drivers/media/usb/cx231xx/cx231xx-video.c                 | 1 +
 drivers/media/usb/dvb-usb-v2/usb_urb.c                    | 1 +
 drivers/media/usb/dvb-usb/cxusb-analog.c                  | 1 +
 drivers/media/usb/dvb-usb/usb-urb.c                       | 1 +
 drivers/media/usb/em28xx/em28xx-audio.c                   | 1 +
 drivers/media/usb/em28xx/em28xx-cards.c                   | 1 +
 drivers/media/usb/em28xx/em28xx-video.c                   | 1 +
 drivers/media/usb/go7007/go7007-usb.c                     | 1 +
 drivers/media/usb/gspca/gspca.c                           | 1 +
 drivers/media/usb/pvrusb2/pvrusb2-ctrl.c                  | 2 ++
 drivers/media/usb/pvrusb2/pvrusb2-debugifc.c              | 2 ++
 drivers/media/usb/pvrusb2/pvrusb2-hdw.c                   | 2 ++
 drivers/media/usb/pvrusb2/pvrusb2-std.c                   | 1 +
 drivers/media/usb/pvrusb2/pvrusb2-sysfs.c                 | 1 +
 drivers/media/usb/pvrusb2/pvrusb2-v4l2.c                  | 1 +
 drivers/media/usb/pwc/pwc-if.c                            | 1 +
 drivers/media/usb/siano/smsusb.c                          | 1 +
 drivers/media/usb/stk1160/stk1160-v4l.c                   | 1 +
 drivers/media/usb/usbtv/usbtv-audio.c                     | 1 +
 drivers/media/usb/uvc/uvc_debugfs.c                       | 1 +
 drivers/media/usb/uvc/uvc_driver.c                        | 1 +
 drivers/media/usb/uvc/uvc_video.c                         | 1 +
 drivers/media/v4l2-core/v4l2-async.c                      | 1 +
 drivers/media/v4l2-core/v4l2-dev.c                        | 2 ++
 drivers/media/v4l2-core/v4l2-device.c                     | 1 +
 drivers/media/v4l2-core/v4l2-h264.c                       | 1 +
 drivers/media/v4l2-core/v4l2-i2c.c                        | 1 +
 drivers/media/v4l2-core/v4l2-ioctl.c                      | 2 ++
 drivers/media/v4l2-core/v4l2-mem2mem.c                    | 1 +
 drivers/media/v4l2-core/v4l2-spi.c                        | 1 +
 drivers/media/v4l2-core/v4l2-subdev.c                     | 1 +
 drivers/memory/brcmstb_dpfe.c                             | 2 ++
 drivers/memory/brcmstb_memc.c                             | 2 ++
 drivers/memory/bt1-l2-ctl.c                               | 2 ++
 drivers/memory/tegra/tegra186.c                           | 1 +
 drivers/memory/tegra/tegra20.c                            | 1 +
 drivers/memory/tegra/tegra234.c                           | 1 +
 drivers/memstick/core/memstick.c                          | 2 ++
 drivers/memstick/core/ms_block.c                          | 2 ++
 drivers/memstick/core/mspro_block.c                       | 2 ++
 drivers/memstick/host/jmb38x_ms.c                         | 1 +
 drivers/memstick/host/r592.c                              | 1 +
 drivers/message/fusion/mptbase.c                          | 2 ++
 drivers/message/fusion/mptctl.c                           | 2 ++
 drivers/message/fusion/mptfc.c                            | 1 +
 drivers/message/fusion/mptsas.c                           | 1 +
 drivers/message/fusion/mptscsih.c                         | 2 ++
 drivers/message/fusion/mptspi.c                           | 1 +
 drivers/mfd/aat2870-core.c                                | 2 ++
 drivers/mfd/ab8500-core.c                                 | 1 +
 drivers/mfd/abx500-core.c                                 | 1 +
 drivers/mfd/atc260x-core.c                                | 1 +
 drivers/mfd/cs42l43-sdw.c                                 | 1 +
 drivers/mfd/cs42l43.c                                     | 1 +
 drivers/mfd/da9052-core.c                                 | 1 +
 drivers/mfd/da9052-irq.c                                  | 1 +
 drivers/mfd/dln2.c                                        | 1 +
 drivers/mfd/ezx-pcap.c                                    | 1 +
 drivers/mfd/gateworks-gsc.c                               | 2 ++
 drivers/mfd/intel-m10-bmc-core.c                          | 1 +
 drivers/mfd/intel_pmc_bxt.c                               | 2 ++
 drivers/mfd/intel_soc_pmic_bxtwc.c                        | 1 +
 drivers/mfd/ioc3.c                                        | 1 +
 drivers/mfd/ipaq-micro.c                                  | 1 +
 drivers/mfd/kempld-core.c                                 | 1 +
 drivers/mfd/lm3533-core.c                                 | 1 +
 drivers/mfd/max77620.c                                    | 1 +
 drivers/mfd/mc13xxx-core.c                                | 2 ++
 drivers/mfd/omap-usb-host.c                               | 1 +
 drivers/mfd/omap-usb-tll.c                                | 1 +
 drivers/mfd/pcf50633-core.c                               | 1 +
 drivers/mfd/qcom_rpm.c                                    | 1 +
 drivers/mfd/rave-sp.c                                     | 1 +
 drivers/mfd/sm501.c                                       | 1 +
 drivers/mfd/stm32-timers.c                                | 2 ++
 drivers/mfd/syscon.c                                      | 1 +
 drivers/mfd/timberdale.c                                  | 1 +
 drivers/mfd/tps65010.c                                    | 1 +
 drivers/mfd/tps65911-comparator.c                         | 1 +
 drivers/mfd/twl4030-irq.c                                 | 1 +
 drivers/mfd/twl6040.c                                     | 1 +
 drivers/mfd/ucb1x00-assabet.c                             | 1 +
 drivers/mfd/wm831x-auxadc.c                               | 1 +
 drivers/mfd/wm831x-otp.c                                  | 1 +
 drivers/mfd/wm8350-core.c                                 | 1 +
 drivers/misc/ad525x_dpot.c                                | 2 ++
 drivers/misc/altera-stapl/altera.c                        | 2 ++
 drivers/misc/apds9802als.c                                | 2 ++
 drivers/misc/apds990x.c                                   | 2 ++
 drivers/misc/bcm-vk/bcm_vk_dev.c                          | 1 +
 drivers/misc/bh1770glc.c                                  | 2 ++
 drivers/misc/c2port/core.c                                | 1 +
 drivers/misc/cardreader/alcor_pci.c                       | 1 +
 drivers/misc/cardreader/rtsx_pcr.c                        | 1 +
 drivers/misc/cb710/debug.c                                | 1 +
 drivers/misc/cxl/api.c                                    | 1 +
 drivers/misc/cxl/cxl.h                                    | 1 +
 drivers/misc/cxl/debugfs.c                                | 1 +
 drivers/misc/cxl/file.c                                   | 1 +
 drivers/misc/cxl/guest.c                                  | 1 +
 drivers/misc/cxl/irq.c                                    | 1 +
 drivers/misc/cxl/native.c                                 | 1 +
 drivers/misc/cxl/of.c                                     | 1 +
 drivers/misc/cxl/sysfs.c                                  | 2 ++
 drivers/misc/ds1682.c                                     | 2 ++
 drivers/misc/dw-xdata-pcie.c                              | 4 ++++
 drivers/misc/eeprom/eeprom_93xx46.c                       | 1 +
 drivers/misc/eeprom/idt_89hpesx.c                         | 2 ++
 drivers/misc/enclosure.c                                  | 2 ++
 drivers/misc/gehc-achc.c                                  | 1 +
 drivers/misc/genwqe/card_ddcb.c                           | 1 +
 drivers/misc/genwqe/card_debugfs.c                        | 1 +
 drivers/misc/genwqe/card_sysfs.c                          | 2 ++
 drivers/misc/genwqe/genwqe_driver.h                       | 1 +
 drivers/misc/hmc6352.c                                    | 2 ++
 drivers/misc/ibmasm/ibmasm.h                              | 1 +
 drivers/misc/ibmasm/ibmasmfs.c                            | 2 ++
 drivers/misc/ibmasm/module.c                              | 1 +
 drivers/misc/ics932s401.c                                 | 1 +
 drivers/misc/isl29003.c                                   | 1 +
 drivers/misc/isl29020.c                                   | 2 ++
 drivers/misc/kgdbts.c                                     | 2 ++
 drivers/misc/lattice-ecp3-config.c                        | 1 +
 drivers/misc/lis3lv02d/lis3lv02d.c                        | 2 ++
 drivers/misc/lkdtm/core.c                                 | 2 ++
 drivers/misc/lkdtm/heap.c                                 | 1 +
 drivers/misc/mei/bus.c                                    | 2 ++
 drivers/misc/mei/client.c                                 | 1 +
 drivers/misc/mei/debugfs.c                                | 1 +
 drivers/misc/mei/gsc-me.c                                 | 1 +
 drivers/misc/mei/hbm.c                                    | 1 +
 drivers/misc/mei/hw-txe.c                                 | 1 +
 drivers/misc/mei/init.c                                   | 1 +
 drivers/misc/mei/main.c                                   | 3 +++
 drivers/misc/mei/vsc-fw-loader.c                          | 1 +
 drivers/misc/nsm.c                                        | 2 ++
 drivers/misc/ocxl/afu_irq.c                               | 1 +
 drivers/misc/ocxl/core.c                                  | 1 +
 drivers/misc/ocxl/file.c                                  | 1 +
 drivers/misc/ocxl/link.c                                  | 2 ++
 drivers/misc/ocxl/ocxl_internal.h                         | 1 +
 drivers/misc/ocxl/sysfs.c                                 | 2 ++
 drivers/misc/open-dice.c                                  | 1 +
 drivers/misc/pch_phub.c                                   | 1 +
 drivers/misc/pci_endpoint_test.c                          | 4 ++++
 drivers/misc/sgi-gru/grufault.c                           | 1 +
 drivers/misc/sgi-gru/grukservices.c                       | 2 ++
 drivers/misc/sgi-gru/gruprocfs.c                          | 1 +
 drivers/misc/sgi-xp/xpc_channel.c                         | 1 +
 drivers/misc/sgi-xp/xpc_main.c                            | 1 +
 drivers/misc/smpro-misc.c                                 | 1 +
 drivers/misc/ti-st/st_kim.c                               | 2 ++
 drivers/misc/tifm_7xx1.c                                  | 1 +
 drivers/misc/tifm_core.c                                  | 1 +
 drivers/misc/tsl2550.c                                    | 2 ++
 drivers/misc/uacce/uacce.c                                | 1 +
 drivers/misc/vcpu_stall_detector.c                        | 1 +
 drivers/misc/vmw_balloon.c                                | 1 +
 drivers/misc/xilinx_sdfec.c                               | 2 ++
 drivers/misc/xilinx_tmr_manager.c                         | 1 +
 drivers/mmc/core/block.c                                  | 2 ++
 drivers/mmc/core/mmc.c                                    | 1 +
 drivers/mmc/core/mmc_test.c                               | 2 ++
 drivers/mmc/host/bcm2835.c                                | 1 +
 drivers/mmc/host/cqhci-core.c                             | 2 ++
 drivers/mmc/host/dw_mmc.c                                 | 1 +
 drivers/mmc/host/litex_mmc.c                              | 1 +
 drivers/mmc/host/meson-gx-mmc.c                           | 1 +
 drivers/mmc/host/meson-mx-sdhc-clkc.c                     | 1 +
 drivers/mmc/host/mmc_spi.c                                | 1 +
 drivers/mmc/host/moxart-mmc.c                             | 1 +
 drivers/mmc/host/mtk-sd.c                                 | 1 +
 drivers/mmc/host/omap.c                                   | 1 +
 drivers/mmc/host/omap_hsmmc.c                             | 1 +
 drivers/mmc/host/owl-mmc.c                                | 1 +
 drivers/mmc/host/renesas_sdhi_sys_dmac.c                  | 1 +
 drivers/mmc/host/rtsx_usb_sdmmc.c                         | 1 +
 drivers/mmc/host/sdhci-omap.c                             | 1 +
 drivers/mmc/host/sdhci-s3c.c                              | 1 +
 drivers/mmc/host/sdhci.c                                  | 2 ++
 drivers/mmc/host/uniphier-sd.c                            | 1 +
 drivers/mmc/host/vub300.c                                 | 2 ++
 drivers/mmc/host/wmt-sdmmc.c                              | 1 +
 drivers/most/configfs.c                                   | 2 ++
 drivers/most/core.c                                       | 1 +
 drivers/most/most_snd.c                                   | 2 ++
 drivers/most/most_usb.c                                   | 3 +++
 drivers/mtd/chips/gen_probe.c                             | 1 +
 drivers/mtd/devices/block2mtd.c                           | 4 ++++
 drivers/mtd/devices/docg3.c                               | 1 +
 drivers/mtd/devices/mtd_dataflash.c                       | 1 +
 drivers/mtd/devices/slram.c                               | 1 +
 drivers/mtd/maps/amd76xrom.c                              | 1 +
 drivers/mtd/maps/ck804xrom.c                              | 1 +
 drivers/mtd/maps/esb2rom.c                                | 1 +
 drivers/mtd/maps/ichxrom.c                                | 1 +
 drivers/mtd/maps/pcmciamtd.c                              | 1 +
 drivers/mtd/maps/sa1100-flash.c                           | 1 +
 drivers/mtd/maps/vmu-flash.c                              | 1 +
 drivers/mtd/mtd_blkdevs.c                                 | 2 ++
 drivers/mtd/mtdcore.c                                     | 1 +
 drivers/mtd/mtdoops.c                                     | 1 +
 drivers/mtd/mtdpstore.c                                   | 1 +
 drivers/mtd/mtdsuper.c                                    | 1 +
 drivers/mtd/mtdswap.c                                     | 1 +
 drivers/mtd/nand/ecc-mtk.c                                | 2 ++
 drivers/mtd/nand/ecc-mxic.c                               | 1 +
 drivers/mtd/nand/onenand/onenand_base.c                   | 1 +
 drivers/mtd/nand/onenand/onenand_omap2.c                  | 1 +
 drivers/mtd/nand/onenand/onenand_samsung.c                | 1 +
 drivers/mtd/nand/raw/arasan-nand-controller.c             | 1 +
 drivers/mtd/nand/raw/atmel/nand-controller.c              | 1 +
 drivers/mtd/nand/raw/brcmnand/brcmnand.c                  | 3 +++
 drivers/mtd/nand/raw/cadence-nand-controller.c            | 1 +
 drivers/mtd/nand/raw/cafe_nand.c                          | 1 +
 drivers/mtd/nand/raw/cs553x_nand.c                        | 1 +
 drivers/mtd/nand/raw/denali.c                             | 1 +
 drivers/mtd/nand/raw/fsl_elbc_nand.c                      | 1 +
 drivers/mtd/nand/raw/fsl_ifc_nand.c                       | 1 +
 drivers/mtd/nand/raw/gpmi-nand/gpmi-nand.c                | 1 +
 drivers/mtd/nand/raw/hisi504_nand.c                       | 1 +
 drivers/mtd/nand/raw/lpc32xx_mlc.c                        | 1 +
 drivers/mtd/nand/raw/lpc32xx_slc.c                        | 1 +
 drivers/mtd/nand/raw/marvell_nand.c                       | 1 +
 drivers/mtd/nand/raw/meson_nand.c                         | 1 +
 drivers/mtd/nand/raw/mtk_nand.c                           | 2 ++
 drivers/mtd/nand/raw/mxc_nand.c                           | 1 +
 drivers/mtd/nand/raw/mxic_nand.c                          | 1 +
 drivers/mtd/nand/raw/nandsim.c                            | 2 ++
 drivers/mtd/nand/raw/ndfc.c                               | 1 +
 drivers/mtd/nand/raw/omap2.c                              | 1 +
 drivers/mtd/nand/raw/omap_elm.c                           | 1 +
 drivers/mtd/nand/raw/qcom_nandc.c                         | 1 +
 drivers/mtd/nand/raw/r852.c                               | 1 +
 drivers/mtd/nand/raw/renesas-nand-controller.c            | 1 +
 drivers/mtd/nand/raw/rockchip-nand-controller.c           | 1 +
 drivers/mtd/nand/raw/stm32_fmc2_nand.c                    | 1 +
 drivers/mtd/nand/raw/sunxi_nand.c                         | 1 +
 drivers/mtd/nand/raw/txx9ndfmc.c                          | 1 +
 drivers/mtd/nand/raw/vf610_nfc.c                          | 1 +
 drivers/mtd/parsers/bcm47xxpart.c                         | 1 +
 drivers/mtd/parsers/cmdlinepart.c                         | 1 +
 drivers/mtd/parsers/ofpart_bcm4908.c                      | 1 +
 drivers/mtd/parsers/ofpart_linksys_ns.c                   | 1 +
 drivers/mtd/parsers/parser_imagetag.c                     | 1 +
 drivers/mtd/parsers/tplink_safeloader.c                   | 1 +
 drivers/mtd/tests/readtest.c                              | 1 +
 drivers/mtd/ubi/block.c                                   | 2 ++
 drivers/mtd/ubi/build.c                                   | 2 ++
 drivers/mtd/ubi/debug.c                                   | 2 ++
 drivers/mtd/ubi/vmt.c                                     | 1 +
 drivers/mtd/ubi/wl.c                                      | 1 +
 drivers/net/Space.c                                       | 1 +
 drivers/net/arcnet/arc-rimi.c                             | 1 +
 drivers/net/arcnet/arcnet.c                               | 1 +
 drivers/net/arcnet/com20020-isa.c                         | 1 +
 drivers/net/arcnet/com20020-pci.c                         | 1 +
 drivers/net/arcnet/com90io.c                              | 1 +
 drivers/net/arcnet/com90xx.c                              | 2 ++
 drivers/net/bonding/bond_main.c                           | 1 +
 drivers/net/bonding/bond_netlink.c                        | 1 +
 drivers/net/bonding/bond_options.c                        | 2 ++
 drivers/net/bonding/bond_sysfs.c                          | 1 +
 drivers/net/caif/caif_serial.c                            | 1 +
 drivers/net/can/at91_can.c                                | 1 +
 drivers/net/can/can327.c                                  | 1 +
 drivers/net/can/flexcan/flexcan-core.c                    | 1 +
 drivers/net/can/grcan.c                                   | 2 ++
 drivers/net/can/janz-ican3.c                              | 3 +++
 drivers/net/can/kvaser_pciefd.c                           | 1 +
 drivers/net/can/sja1000/peak_pci.c                        | 1 +
 drivers/net/can/slcan/slcan-core.c                        | 2 ++
 drivers/net/can/softing/softing_main.c                    | 2 ++
 drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c            | 1 +
 drivers/net/can/spi/mcp251xfd/mcp251xfd-ring.c            | 2 ++
 drivers/net/can/spi/mcp251xfd/mcp251xfd-rx.c              | 1 +
 drivers/net/can/spi/mcp251xfd/mcp251xfd-tef.c             | 1 +
 drivers/net/can/usb/esd_usb.c                             | 1 +
 drivers/net/can/usb/etas_es58x/es58x_devlink.c            | 1 +
 drivers/net/can/vxcan.c                                   | 1 +
 drivers/net/dsa/b53/b53_srab.c                            | 1 +
 drivers/net/dsa/bcm_sf2.c                                 | 1 +
 drivers/net/dsa/bcm_sf2_cfp.c                             | 1 +
 drivers/net/dsa/hirschmann/hellcreek_ptp.c                | 1 +
 drivers/net/dsa/lantiq_gswip.c                            | 1 +
 drivers/net/dsa/microchip/ksz9477_acl.c                   | 1 +
 drivers/net/dsa/microchip/ksz_common.c                    | 1 +
 drivers/net/dsa/microchip/ksz_ptp.c                       | 2 ++
 drivers/net/dsa/mt7530.c                                  | 1 +
 drivers/net/dsa/mv88e6xxx/chip.c                          | 1 +
 drivers/net/dsa/mv88e6xxx/global1_atu.c                   | 1 +
 drivers/net/dsa/mv88e6xxx/global1_vtu.c                   | 1 +
 drivers/net/dsa/mv88e6xxx/global2.c                       | 1 +
 drivers/net/dsa/mv88e6xxx/pcs-6185.c                      | 1 +
 drivers/net/dsa/mv88e6xxx/pcs-6352.c                      | 1 +
 drivers/net/dsa/mv88e6xxx/pcs-639x.c                      | 1 +
 drivers/net/dsa/mv88e6xxx/ptp.c                           | 1 +
 drivers/net/dsa/ocelot/felix.c                            | 1 +
 drivers/net/dsa/ocelot/felix_vsc9959.c                    | 2 ++
 drivers/net/dsa/qca/ar9331.c                              | 1 +
 drivers/net/dsa/qca/qca8k-8xxx.c                          | 2 ++
 drivers/net/dsa/qca/qca8k-leds.c                          | 1 +
 drivers/net/dsa/realtek/realtek-smi.c                     | 1 +
 drivers/net/dsa/rzn1_a5psw.c                              | 1 +
 drivers/net/dsa/sja1105/sja1105_mdio.c                    | 1 +
 drivers/net/ethernet/3com/3c515.c                         | 1 +
 drivers/net/ethernet/3com/3c589_cs.c                      | 1 +
 drivers/net/ethernet/3com/3c59x.c                         | 1 +
 drivers/net/ethernet/3com/typhoon.c                       | 1 +
 drivers/net/ethernet/8390/ax88796.c                       | 1 +
 drivers/net/ethernet/8390/etherh.c                        | 1 +
 drivers/net/ethernet/8390/ne.c                            | 1 +
 drivers/net/ethernet/8390/smc-ultra.c                     | 1 +
 drivers/net/ethernet/8390/wd.c                            | 1 +
 drivers/net/ethernet/actions/owl-emac.c                   | 1 +
 drivers/net/ethernet/adi/adin1110.c                       | 1 +
 drivers/net/ethernet/aeroflex/greth.c                     | 1 +
 drivers/net/ethernet/agere/et131x.c                       | 1 +
 drivers/net/ethernet/alteon/acenic.c                      | 1 +
 drivers/net/ethernet/altera/altera_msgdma.c               | 1 +
 drivers/net/ethernet/altera/altera_sgdma.c                | 1 +
 drivers/net/ethernet/altera/altera_tse_ethtool.c          | 1 +
 drivers/net/ethernet/altera/altera_tse_main.c             | 1 +
 drivers/net/ethernet/amazon/ena/ena_com.c                 | 2 ++
 drivers/net/ethernet/amazon/ena/ena_ethtool.c             | 1 +
 drivers/net/ethernet/amazon/ena/ena_netdev.c              | 1 +
 drivers/net/ethernet/amd/amd8111e.c                       | 1 +
 drivers/net/ethernet/amd/au1000_eth.c                     | 2 ++
 drivers/net/ethernet/amd/declance.c                       | 1 +
 drivers/net/ethernet/amd/lance.c                          | 1 +
 drivers/net/ethernet/amd/nmclan_cs.c                      | 1 +
 drivers/net/ethernet/amd/pcnet32.c                        | 1 +
 drivers/net/ethernet/amd/pds_core/adminq.c                | 1 +
 drivers/net/ethernet/amd/pds_core/auxbus.c                | 1 +
 drivers/net/ethernet/amd/pds_core/core.c                  | 1 +
 drivers/net/ethernet/amd/pds_core/dev.c                   | 1 +
 drivers/net/ethernet/amd/pds_core/devlink.c               | 1 +
 drivers/net/ethernet/amd/pds_core/main.c                  | 1 +
 drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c              | 2 ++
 drivers/net/ethernet/amd/xgbe/xgbe-dev.c                  | 2 ++
 drivers/net/ethernet/amd/xgbe/xgbe-drv.c                  | 3 +++
 drivers/net/ethernet/amd/xgbe/xgbe-ethtool.c              | 1 +
 drivers/net/ethernet/amd/xgbe/xgbe-main.c                 | 1 +
 drivers/net/ethernet/amd/xgbe/xgbe-phy-v2.c               | 1 +
 drivers/net/ethernet/amd/xgbe/xgbe-ptp.c                  | 1 +
 drivers/net/ethernet/apm/xgene-v2/ethtool.c               | 1 +
 drivers/net/ethernet/apm/xgene-v2/main.c                  | 2 ++
 drivers/net/ethernet/apm/xgene-v2/mdio.c                  | 1 +
 drivers/net/ethernet/apm/xgene-v2/ring.c                  | 1 +
 drivers/net/ethernet/apm/xgene/xgene_enet_ethtool.c       | 1 +
 drivers/net/ethernet/apm/xgene/xgene_enet_hw.c            | 1 +
 drivers/net/ethernet/apm/xgene/xgene_enet_main.c          | 1 +
 drivers/net/ethernet/apple/bmac.c                         | 1 +
 drivers/net/ethernet/aquantia/atlantic/aq_ethtool.c       | 1 +
 drivers/net/ethernet/aquantia/atlantic/aq_ptp.c           | 1 +
 drivers/net/ethernet/arc/emac_mdio.c                      | 1 +
 drivers/net/ethernet/asix/ax88796c_main.c                 | 1 +
 drivers/net/ethernet/atheros/ag71xx.c                     | 1 +
 drivers/net/ethernet/atheros/alx/main.c                   | 1 +
 drivers/net/ethernet/broadcom/asp2/bcmasp_intf.c          | 1 +
 drivers/net/ethernet/broadcom/b44.c                       | 2 ++
 drivers/net/ethernet/broadcom/bcm63xx_enet.c              | 1 +
 drivers/net/ethernet/broadcom/bcmsysport.c                | 2 ++
 drivers/net/ethernet/broadcom/bgmac-bcma-mdio.c           | 1 +
 drivers/net/ethernet/broadcom/bgmac-bcma.c                | 1 +
 drivers/net/ethernet/broadcom/bgmac.c                     | 2 ++
 drivers/net/ethernet/broadcom/bnx2.c                      | 1 +
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.c           | 1 +
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_ethtool.c       | 1 +
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c          | 1 +
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c          | 2 ++
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_self_test.c     | 1 +
 drivers/net/ethernet/broadcom/bnx2x/bnx2x_sriov.c         | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt.c                 | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt_coredump.c        | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt_debugfs.c         | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c         | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c         | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c            | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt_ptp.c             | 1 +
 drivers/net/ethernet/broadcom/bnxt/bnxt_vfr.c             | 1 +
 drivers/net/ethernet/broadcom/genet/bcmmii.c              | 1 +
 drivers/net/ethernet/broadcom/sb1250-mac.c                | 1 +
 drivers/net/ethernet/broadcom/tg3.c                       | 1 +
 drivers/net/ethernet/brocade/bna/bfa_ioc.c                | 1 +
 drivers/net/ethernet/brocade/bna/bfa_ioc.h                | 1 +
 drivers/net/ethernet/brocade/bna/bnad.c                   | 2 ++
 drivers/net/ethernet/brocade/bna/bnad_debugfs.c           | 2 ++
 drivers/net/ethernet/brocade/bna/bnad_ethtool.c           | 1 +
 drivers/net/ethernet/cadence/macb_main.c                  | 2 ++
 drivers/net/ethernet/cavium/liquidio/lio_core.c           | 2 ++
 drivers/net/ethernet/cavium/liquidio/lio_ethtool.c        | 2 ++
 drivers/net/ethernet/cavium/liquidio/lio_main.c           | 3 +++
 drivers/net/ethernet/cavium/liquidio/lio_vf_main.c        | 2 ++
 drivers/net/ethernet/cavium/liquidio/lio_vf_rep.c         | 2 ++
 drivers/net/ethernet/cavium/liquidio/octeon_console.c     | 1 +
 drivers/net/ethernet/cavium/liquidio/octeon_device.c      | 1 +
 drivers/net/ethernet/cavium/liquidio/octeon_main.h        | 1 +
 drivers/net/ethernet/cavium/liquidio/octeon_nic.c         | 1 +
 drivers/net/ethernet/cavium/liquidio/response_manager.c   | 1 +
 drivers/net/ethernet/cavium/octeon/octeon_mgmt.c          | 1 +
 drivers/net/ethernet/cavium/thunder/nic_main.c            | 1 +
 drivers/net/ethernet/cavium/thunder/nicvf_ethtool.c       | 1 +
 drivers/net/ethernet/cavium/thunder/nicvf_main.c          | 1 +
 drivers/net/ethernet/cavium/thunder/thunder_bgx.c         | 1 +
 drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c           | 2 ++
 drivers/net/ethernet/chelsio/cxgb3/cxgb3_offload.c        | 1 +
 drivers/net/ethernet/chelsio/cxgb3/t3_hw.c                | 2 ++
 drivers/net/ethernet/chelsio/cxgb4/clip_tbl.c             | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cudbg_lib.c            | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_cudbg.c          | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_debugfs.c        | 2 ++
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_ethtool.c        | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c         | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c           | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_flower.c      | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_mqprio.c      | 2 ++
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_thermal.c        | 1 +
 drivers/net/ethernet/chelsio/cxgb4/cxgb4_uld.c            | 1 +
 drivers/net/ethernet/chelsio/cxgb4/l2t.c                  | 1 +
 drivers/net/ethernet/chelsio/cxgb4/sge.c                  | 2 ++
 drivers/net/ethernet/chelsio/cxgb4/srq.c                  | 1 +
 drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c       | 1 +
 .../ethernet/chelsio/inline_crypto/ch_ktls/chcr_ktls.c    | 1 +
 drivers/net/ethernet/cirrus/cs89x0.c                      | 2 ++
 drivers/net/ethernet/cisco/enic/enic_main.c               | 1 +
 drivers/net/ethernet/cisco/enic/enic_pp.c                 | 1 +
 drivers/net/ethernet/cortina/gemini.c                     | 1 +
 drivers/net/ethernet/davicom/dm9051.c                     | 1 +
 drivers/net/ethernet/dec/tulip/tulip_core.c               | 1 +
 drivers/net/ethernet/dnet.c                               | 1 +
 drivers/net/ethernet/emulex/benet/be_cmds.c               | 3 +++
 drivers/net/ethernet/emulex/benet/be_ethtool.c            | 1 +
 drivers/net/ethernet/emulex/benet/be_main.c               | 3 +++
 drivers/net/ethernet/engleder/tsnep_ethtool.c             | 1 +
 drivers/net/ethernet/engleder/tsnep_main.c                | 2 ++
 drivers/net/ethernet/engleder/tsnep_ptp.c                 | 1 +
 drivers/net/ethernet/ethoc.c                              | 1 +
 drivers/net/ethernet/faraday/ftgmac100.c                  | 1 +
 drivers/net/ethernet/faraday/ftmac100.c                   | 1 +
 drivers/net/ethernet/fealnx.c                             | 1 +
 drivers/net/ethernet/freescale/dpaa/dpaa_eth_sysfs.c      | 1 +
 drivers/net/ethernet/freescale/dpaa/dpaa_ethtool.c        | 1 +
 drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-debugfs.c  | 1 +
 drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-devlink.c  | 1 +
 drivers/net/ethernet/freescale/dpaa2/dpaa2-ethtool.c      | 1 +
 .../net/ethernet/freescale/dpaa2/dpaa2-switch-ethtool.c   | 1 +
 drivers/net/ethernet/freescale/dpaa2/dpaa2-switch.c       | 2 ++
 drivers/net/ethernet/freescale/enetc/enetc.c              | 2 ++
 drivers/net/ethernet/freescale/enetc/enetc.h              | 1 +
 drivers/net/ethernet/freescale/enetc/enetc_cbdr.c         | 1 +
 drivers/net/ethernet/freescale/enetc/enetc_ethtool.c      | 1 +
 drivers/net/ethernet/freescale/enetc/enetc_msg.c          | 2 ++
 drivers/net/ethernet/freescale/enetc/enetc_pci_mdio.c     | 1 +
 drivers/net/ethernet/freescale/enetc/enetc_pf.c           | 2 ++
 drivers/net/ethernet/freescale/enetc/enetc_qos.c          | 1 +
 drivers/net/ethernet/freescale/enetc/enetc_vf.c           | 1 +
 drivers/net/ethernet/freescale/fec_main.c                 | 1 +
 drivers/net/ethernet/freescale/fec_mpc52xx_phy.c          | 1 +
 drivers/net/ethernet/freescale/fec_ptp.c                  | 1 +
 drivers/net/ethernet/freescale/fs_enet/mii-bitbang.c      | 1 +
 drivers/net/ethernet/freescale/fs_enet/mii-fec.c          | 1 +
 drivers/net/ethernet/freescale/fsl_pq_mdio.c              | 1 +
 drivers/net/ethernet/freescale/gianfar.c                  | 1 +
 drivers/net/ethernet/freescale/ucc_geth.c                 | 1 +
 drivers/net/ethernet/freescale/xgmac_mdio.c               | 1 +
 drivers/net/ethernet/fujitsu/fmvj18x_cs.c                 | 1 +
 drivers/net/ethernet/fungible/funcore/fun_dev.c           | 1 +
 drivers/net/ethernet/fungible/funcore/fun_queue.c         | 1 +
 drivers/net/ethernet/fungible/funeth/funeth_main.c        | 2 ++
 drivers/net/ethernet/google/gve/gve_ethtool.c             | 1 +
 drivers/net/ethernet/google/gve/gve_main.c                | 1 +
 drivers/net/ethernet/hisilicon/hip04_eth.c                | 1 +
 drivers/net/ethernet/hisilicon/hix5hd2_gmac.c             | 1 +
 drivers/net/ethernet/hisilicon/hns/hns_ae_adapt.c         | 1 +
 drivers/net/ethernet/hisilicon/hns/hns_dsaf_main.c        | 1 +
 drivers/net/ethernet/hisilicon/hns/hns_enet.c             | 1 +
 drivers/net/ethernet/hisilicon/hns/hns_ethtool.c          | 1 +
 drivers/net/ethernet/hisilicon/hns3/hnae3.h               | 1 +
 .../ethernet/hisilicon/hns3/hns3_common/hclge_comm_cmd.c  | 1 +
 .../hisilicon/hns3/hns3_common/hclge_comm_tqp_stats.c     | 1 +
 drivers/net/ethernet/hisilicon/hns3/hns3_debugfs.c        | 1 +
 drivers/net/ethernet/hisilicon/hns3/hns3_enet.c           | 1 +
 drivers/net/ethernet/hisilicon/hns3/hns3_ethtool.c        | 1 +
 .../net/ethernet/hisilicon/hns3/hns3pf/hclge_debugfs.c    | 1 +
 .../net/ethernet/hisilicon/hns3/hns3pf/hclge_devlink.c    | 1 +
 drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_main.c   | 1 +
 drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mdio.c   | 1 +
 drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_ptp.c    | 1 +
 .../net/ethernet/hisilicon/hns3/hns3vf/hclgevf_devlink.c  | 1 +
 drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_main.c | 1 +
 drivers/net/ethernet/hisilicon/hns_mdio.c                 | 1 +
 drivers/net/ethernet/huawei/hinic/hinic_debugfs.c         | 1 +
 drivers/net/ethernet/huawei/hinic/hinic_ethtool.c         | 1 +
 drivers/net/ethernet/huawei/hinic/hinic_hw_cmdq.c         | 1 +
 drivers/net/ethernet/huawei/hinic/hinic_hw_eqs.c          | 1 +
 drivers/net/ethernet/huawei/hinic/hinic_hw_mbox.c         | 1 +
 drivers/net/ethernet/huawei/hinic/hinic_port.c            | 1 +
 drivers/net/ethernet/ibm/ehea/ehea_main.c                 | 1 +
 drivers/net/ethernet/ibm/emac/core.c                      | 1 +
 drivers/net/ethernet/ibm/ibmveth.c                        | 3 +++
 drivers/net/ethernet/ibm/ibmvnic.c                        | 1 +
 drivers/net/ethernet/intel/e1000e/ethtool.c               | 1 +
 drivers/net/ethernet/intel/e1000e/netdev.c                | 1 +
 drivers/net/ethernet/intel/e1000e/ptp.c                   | 1 +
 drivers/net/ethernet/intel/fm10k/fm10k_debugfs.c          | 1 +
 drivers/net/ethernet/intel/fm10k/fm10k_ethtool.c          | 1 +
 drivers/net/ethernet/intel/fm10k/fm10k_pci.c              | 1 +
 drivers/net/ethernet/intel/i40e/i40e.h                    | 1 +
 drivers/net/ethernet/intel/i40e/i40e_adminq.c             | 1 +
 drivers/net/ethernet/intel/i40e/i40e_adminq.h             | 1 +
 drivers/net/ethernet/intel/i40e/i40e_common.c             | 2 ++
 drivers/net/ethernet/intel/i40e/i40e_ddp.c                | 1 +
 drivers/net/ethernet/intel/i40e/i40e_debugfs.c            | 1 +
 drivers/net/ethernet/intel/i40e/i40e_devlink.c            | 1 +
 drivers/net/ethernet/intel/i40e/i40e_ethtool.c            | 1 +
 drivers/net/ethernet/intel/i40e/i40e_hmc.h                | 3 +++
 drivers/net/ethernet/intel/i40e/i40e_lan_hmc.c            | 2 ++
 drivers/net/ethernet/intel/i40e/i40e_main.c               | 1 +
 drivers/net/ethernet/intel/i40e/i40e_ptp.c                | 1 +
 drivers/net/ethernet/intel/iavf/iavf_adminq.c             | 1 +
 drivers/net/ethernet/intel/iavf/iavf_common.c             | 1 +
 drivers/net/ethernet/intel/iavf/iavf_ethtool.c            | 1 +
 drivers/net/ethernet/intel/iavf/iavf_main.c               | 1 +
 drivers/net/ethernet/intel/iavf/iavf_virtchnl.c           | 1 +
 drivers/net/ethernet/intel/ice/ice_controlq.c             | 1 +
 drivers/net/ethernet/intel/ice/ice_debugfs.c              | 2 ++
 drivers/net/ethernet/intel/ice/ice_devlink.c              | 1 +
 drivers/net/ethernet/intel/ice/ice_ethtool.c              | 1 +
 drivers/net/ethernet/intel/ice/ice_main.c                 | 1 +
 drivers/net/ethernet/intel/ice/ice_ptp.c                  | 2 ++
 drivers/net/ethernet/intel/ice/ice_ptp_hw.c               | 1 +
 drivers/net/ethernet/intel/ice/ice_repr.c                 | 1 +
 drivers/net/ethernet/intel/ice/ice_sched.c                | 1 +
 drivers/net/ethernet/intel/idpf/idpf_controlq.c           | 3 +++
 drivers/net/ethernet/intel/idpf/idpf_lib.c                | 1 +
 drivers/net/ethernet/intel/idpf/idpf_txrx.c               | 1 +
 drivers/net/ethernet/intel/igb/igb_hwmon.c                | 1 +
 drivers/net/ethernet/intel/igb/igb_main.c                 | 1 +
 drivers/net/ethernet/intel/igb/igb_ptp.c                  | 1 +
 drivers/net/ethernet/intel/igbvf/netdev.c                 | 1 +
 drivers/net/ethernet/intel/igc/igc_dump.c                 | 1 +
 drivers/net/ethernet/intel/igc/igc_ethtool.c              | 1 +
 drivers/net/ethernet/intel/igc/igc_main.c                 | 1 +
 drivers/net/ethernet/intel/igc/igc_ptp.c                  | 1 +
 drivers/net/ethernet/intel/ixgbe/ixgbe_debugfs.c          | 1 +
 drivers/net/ethernet/intel/ixgbe/ixgbe_fcoe.c             | 1 +
 drivers/net/ethernet/intel/ixgbe/ixgbe_main.c             | 1 +
 drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c              | 1 +
 drivers/net/ethernet/intel/ixgbe/ixgbe_ptp.c              | 1 +
 drivers/net/ethernet/intel/ixgbe/ixgbe_sysfs.c            | 1 +
 drivers/net/ethernet/intel/ixgbevf/ethtool.c              | 1 +
 drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c         | 1 +
 drivers/net/ethernet/lantiq_etop.c                        | 1 +
 drivers/net/ethernet/marvell/mv643xx_eth.c                | 1 +
 drivers/net/ethernet/marvell/mvmdio.c                     | 1 +
 drivers/net/ethernet/marvell/mvneta_bm.c                  | 1 +
 drivers/net/ethernet/marvell/mvpp2/mvpp2_debugfs.c        | 1 +
 drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c           | 1 +
 drivers/net/ethernet/marvell/mvpp2/mvpp2_tai.c            | 1 +
 drivers/net/ethernet/marvell/octeon_ep/octep_ethtool.c    | 1 +
 drivers/net/ethernet/marvell/octeon_ep/octep_main.c       | 1 +
 drivers/net/ethernet/marvell/octeontx2/af/cgx.c           | 1 +
 drivers/net/ethernet/marvell/octeontx2/af/rvu.c           | 1 +
 drivers/net/ethernet/marvell/octeontx2/af/rvu_cpt.c       | 1 +
 drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c   | 2 ++
 drivers/net/ethernet/marvell/octeontx2/af/rvu_devlink.c   | 2 ++
 drivers/net/ethernet/marvell/octeontx2/nic/otx2_ethtool.c | 1 +
 drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c      | 1 +
 drivers/net/ethernet/marvell/octeontx2/nic/otx2_ptp.c     | 1 +
 drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c      | 1 +
 drivers/net/ethernet/marvell/prestera/prestera_devlink.c  | 1 +
 drivers/net/ethernet/marvell/prestera/prestera_ethtool.c  | 1 +
 drivers/net/ethernet/marvell/prestera/prestera_pci.c      | 1 +
 drivers/net/ethernet/marvell/pxa168_eth.c                 | 1 +
 drivers/net/ethernet/marvell/skge.c                       | 1 +
 drivers/net/ethernet/marvell/sky2.c                       | 1 +
 drivers/net/ethernet/mediatek/mtk_eth_soc.c               | 1 +
 drivers/net/ethernet/mediatek/mtk_ppe_debugfs.c           | 1 +
 drivers/net/ethernet/mediatek/mtk_star_emac.c             | 1 +
 drivers/net/ethernet/mediatek/mtk_wed_debugfs.c           | 1 +
 drivers/net/ethernet/mellanox/mlx4/cmd.c                  | 1 +
 drivers/net/ethernet/mellanox/mlx4/cq.c                   | 1 +
 drivers/net/ethernet/mellanox/mlx4/en_clock.c             | 1 +
 drivers/net/ethernet/mellanox/mlx4/en_ethtool.c           | 1 +
 drivers/net/ethernet/mellanox/mlx4/eq.c                   | 1 +
 drivers/net/ethernet/mellanox/mlx4/main.c                 | 2 ++
 drivers/net/ethernet/mellanox/mlx4/mcg.c                  | 1 +
 drivers/net/ethernet/mellanox/mlx4/qp.c                   | 1 +
 drivers/net/ethernet/mellanox/mlx4/srq.c                  | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/cmd.c             | 2 ++
 drivers/net/ethernet/mellanox/mlx5/core/cq.c              | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/debugfs.c         | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/devlink.c         | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/diag/fw_tracer.c  | 2 ++
 drivers/net/ethernet/mellanox/mlx5/core/en/mod_hdr.c      | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en/reporter_rx.c  | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c  | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec.c  | 2 ++
 .../net/ethernet/mellanox/mlx5/core/en_accel/ipsec_fs.c   | 1 +
 .../ethernet/mellanox/mlx5/core/en_accel/ipsec_offload.c  | 1 +
 .../net/ethernet/mellanox/mlx5/core/en_accel/ktls_rx.c    | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c      | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en_rep.c          | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en_selftest.c     | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/en_stats.c        | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/fpga/conn.c       | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c       | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/fpga/sdk.h        | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c        | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/hwmon.c           | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c         | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c       | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/lib/clock.c       | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/main.c            | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/pci_irq.c         | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/sf/vhca_event.c   | 1 +
 drivers/net/ethernet/mellanox/mlx5/core/steering/dr_dbg.c | 2 ++
 .../net/ethernet/mellanox/mlxbf_gige/mlxbf_gige_mdio.c    | 1 +
 drivers/net/ethernet/mellanox/mlxfw/mlxfw_fsm.c           | 1 +
 drivers/net/ethernet/mellanox/mlxsw/core.c                | 1 +
 drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c          | 2 ++
 drivers/net/ethernet/mellanox/mlxsw/core_linecards.c      | 1 +
 drivers/net/ethernet/mellanox/mlxsw/core_thermal.c        | 1 +
 drivers/net/ethernet/mellanox/mlxsw/minimal.c             | 1 +
 drivers/net/ethernet/mellanox/mlxsw/spectrum_ethtool.c    | 1 +
 drivers/net/ethernet/micrel/ks8851_common.c               | 1 +
 drivers/net/ethernet/micrel/ksz884x.c                     | 1 +
 drivers/net/ethernet/microchip/lan743x_main.c             | 1 +
 drivers/net/ethernet/microchip/lan743x_ptp.c              | 1 +
 drivers/net/ethernet/microchip/lan966x/lan966x_ethtool.c  | 1 +
 drivers/net/ethernet/microchip/lan966x/lan966x_fdma.c     | 1 +
 drivers/net/ethernet/microchip/lan966x/lan966x_main.c     | 1 +
 drivers/net/ethernet/microchip/lan966x/lan966x_ptp.c      | 2 ++
 drivers/net/ethernet/microchip/lan966x/lan966x_taprio.c   | 1 +
 drivers/net/ethernet/microchip/sparx5/sparx5_ethtool.c    | 1 +
 drivers/net/ethernet/microchip/sparx5/sparx5_main.c       | 1 +
 drivers/net/ethernet/microchip/sparx5/sparx5_netdev.c     | 1 +
 drivers/net/ethernet/microchip/sparx5/sparx5_ptp.c        | 1 +
 drivers/net/ethernet/microchip/vcap/vcap_api_debugfs.c    | 1 +
 drivers/net/ethernet/microsoft/mana/gdma_main.c           | 2 ++
 drivers/net/ethernet/microsoft/mana/hw_channel.c          | 1 +
 drivers/net/ethernet/microsoft/mana/mana_en.c             | 1 +
 drivers/net/ethernet/microsoft/mana/mana_ethtool.c        | 1 +
 drivers/net/ethernet/mscc/ocelot_ptp.c                    | 2 ++
 drivers/net/ethernet/mscc/ocelot_stats.c                  | 1 +
 drivers/net/ethernet/mscc/ocelot_vsc7514.c                | 1 +
 drivers/net/ethernet/myricom/myri10ge/myri10ge.c          | 2 ++
 drivers/net/ethernet/natsemi/natsemi.c                    | 1 +
 drivers/net/ethernet/neterion/s2io.c                      | 1 +
 drivers/net/ethernet/netronome/nfp/abm/ctrl.c             | 1 +
 drivers/net/ethernet/netronome/nfp/abm/main.c             | 1 +
 drivers/net/ethernet/netronome/nfp/devlink_param.c        | 2 ++
 drivers/net/ethernet/netronome/nfp/nfp_main.c             | 2 ++
 drivers/net/ethernet/netronome/nfp/nfp_net.h              | 1 +
 drivers/net/ethernet/netronome/nfp/nfp_net_common.c       | 1 +
 drivers/net/ethernet/netronome/nfp/nfp_net_debugfs.c      | 1 +
 drivers/net/ethernet/netronome/nfp/nfp_net_ethtool.c      | 1 +
 drivers/net/ethernet/netronome/nfp/nfp_port.c             | 1 +
 drivers/net/ethernet/netronome/nfp/nfpcore/nfp6000_pcie.c | 1 +
 drivers/net/ethernet/ni/nixge.c                           | 2 ++
 drivers/net/ethernet/nvidia/forcedeth.c                   | 2 ++
 drivers/net/ethernet/nxp/lpc_eth.c                        | 1 +
 drivers/net/ethernet/pasemi/pasemi_mac.c                  | 1 +
 drivers/net/ethernet/pensando/ionic/ionic_dev.c           | 1 +
 drivers/net/ethernet/pensando/ionic/ionic_devlink.c       | 1 +
 drivers/net/ethernet/pensando/ionic/ionic_lif.c           | 2 ++
 drivers/net/ethernet/pensando/ionic/ionic_main.c          | 1 +
 drivers/net/ethernet/pensando/ionic/ionic_phc.c           | 1 +
 drivers/net/ethernet/pensando/ionic/ionic_rx_filter.c     | 1 +
 drivers/net/ethernet/qlogic/netxen/netxen_nic_ethtool.c   | 1 +
 drivers/net/ethernet/qlogic/netxen/netxen_nic_init.c      | 1 +
 drivers/net/ethernet/qlogic/netxen/netxen_nic_main.c      | 2 ++
 drivers/net/ethernet/qlogic/qed/qed_debug.c               | 1 +
 drivers/net/ethernet/qlogic/qed/qed_dev.c                 | 1 +
 drivers/net/ethernet/qlogic/qed/qed_devlink.c             | 1 +
 drivers/net/ethernet/qlogic/qed/qed_hw.c                  | 1 +
 drivers/net/ethernet/qlogic/qed/qed_int.c                 | 1 +
 drivers/net/ethernet/qlogic/qed/qed_main.c                | 1 +
 drivers/net/ethernet/qlogic/qed/qed_mng_tlv.c             | 1 +
 drivers/net/ethernet/qlogic/qed/qed_rdma.c                | 1 +
 drivers/net/ethernet/qlogic/qed/qed_sriov.c               | 1 +
 drivers/net/ethernet/qlogic/qed/qed_vf.c                  | 1 +
 drivers/net/ethernet/qlogic/qede/qede_ethtool.c           | 1 +
 drivers/net/ethernet/qlogic/qede/qede_filter.c            | 1 +
 drivers/net/ethernet/qlogic/qede/qede_fp.c                | 1 +
 drivers/net/ethernet/qlogic/qede/qede_main.c              | 1 +
 drivers/net/ethernet/qlogic/qede/qede_ptp.c               | 1 +
 drivers/net/ethernet/qlogic/qede/qede_rdma.c              | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_83xx_hw.c       | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_ctx.c           | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c       | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_init.c          | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_io.c            | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c          | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_minidump.c      | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_common.c  | 1 +
 drivers/net/ethernet/qlogic/qlcnic/qlcnic_sysfs.c         | 2 ++
 drivers/net/ethernet/qualcomm/emac/emac-mac.c             | 1 +
 drivers/net/ethernet/qualcomm/emac/emac-phy.c             | 1 +
 drivers/net/ethernet/qualcomm/rmnet/rmnet_map_data.c      | 1 +
 drivers/net/ethernet/rdc/r6040.c                          | 1 +
 drivers/net/ethernet/realtek/r8169_main.c                 | 2 ++
 drivers/net/ethernet/renesas/ravb_main.c                  | 1 +
 drivers/net/ethernet/renesas/rswitch.c                    | 1 +
 drivers/net/ethernet/renesas/sh_eth.c                     | 1 +
 drivers/net/ethernet/samsung/sxgbe/sxgbe_dma.c            | 1 +
 drivers/net/ethernet/samsung/sxgbe/sxgbe_main.c           | 2 ++
 drivers/net/ethernet/samsung/sxgbe/sxgbe_mdio.c           | 1 +
 drivers/net/ethernet/seeq/ether3.c                        | 1 +
 drivers/net/ethernet/sfc/ef10.c                           | 1 +
 drivers/net/ethernet/sfc/ef100_nic.c                      | 1 +
 drivers/net/ethernet/sfc/ef100_rep.c                      | 1 +
 drivers/net/ethernet/sfc/efx.c                            | 1 +
 drivers/net/ethernet/sfc/efx_channels.c                   | 1 +
 drivers/net/ethernet/sfc/efx_common.c                     | 1 +
 drivers/net/ethernet/sfc/efx_devlink.c                    | 1 +
 drivers/net/ethernet/sfc/ethtool_common.c                 | 1 +
 drivers/net/ethernet/sfc/falcon/efx.c                     | 1 +
 drivers/net/ethernet/sfc/falcon/ethtool.c                 | 1 +
 drivers/net/ethernet/sfc/falcon/falcon.c                  | 1 +
 drivers/net/ethernet/sfc/falcon/falcon_boards.c           | 1 +
 drivers/net/ethernet/sfc/mcdi.c                           | 2 ++
 drivers/net/ethernet/sfc/mcdi_mon.c                       | 1 +
 drivers/net/ethernet/sfc/ptp.c                            | 1 +
 drivers/net/ethernet/sfc/siena/efx.c                      | 1 +
 drivers/net/ethernet/sfc/siena/efx_channels.c             | 1 +
 drivers/net/ethernet/sfc/siena/efx_common.c               | 1 +
 drivers/net/ethernet/sfc/siena/ethtool_common.c           | 1 +
 drivers/net/ethernet/sfc/siena/mcdi.c                     | 2 ++
 drivers/net/ethernet/sfc/siena/mcdi_mon.c                 | 1 +
 drivers/net/ethernet/sfc/siena/ptp.c                      | 1 +
 drivers/net/ethernet/sfc/siena/siena_sriov.c              | 1 +
 drivers/net/ethernet/sfc/tc_counters.c                    | 1 +
 drivers/net/ethernet/sgi/ioc3-eth.c                       | 1 +
 drivers/net/ethernet/smsc/smc9194.c                       | 1 +
 drivers/net/ethernet/smsc/smsc911x.c                      | 1 +
 drivers/net/ethernet/smsc/smsc9420.c                      | 1 +
 drivers/net/ethernet/socionext/netsec.c                   | 2 ++
 drivers/net/ethernet/socionext/sni_ave.c                  | 2 ++
 drivers/net/ethernet/stmicro/stmmac/dwmac-intel.c         | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwmac-meson8b.c       | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwmac-socfpga.c       | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c         | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwmac1000_dma.c       | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwmac100_dma.c        | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwmac4_descs.c        | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwmac4_dma.c          | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwxgmac2_descs.c      | 1 +
 drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c        | 1 +
 drivers/net/ethernet/stmicro/stmmac/stmmac_ethtool.c      | 1 +
 drivers/net/ethernet/stmicro/stmmac/stmmac_main.c         | 2 ++
 drivers/net/ethernet/stmicro/stmmac/stmmac_mdio.c         | 1 +
 drivers/net/ethernet/stmicro/stmmac/stmmac_selftests.c    | 1 +
 drivers/net/ethernet/sun/ldmvsw.c                         | 1 +
 drivers/net/ethernet/sun/niu.c                            | 1 +
 drivers/net/ethernet/sun/sunhme.c                         | 2 ++
 drivers/net/ethernet/sun/sunqe.c                          | 1 +
 drivers/net/ethernet/sun/sunvnet.c                        | 1 +
 drivers/net/ethernet/sunplus/spl2sw_mdio.c                | 1 +
 drivers/net/ethernet/synopsys/dwc-xlgmac-desc.c           | 1 +
 drivers/net/ethernet/synopsys/dwc-xlgmac-ethtool.c        | 1 +
 drivers/net/ethernet/synopsys/dwc-xlgmac-hw.c             | 1 +
 drivers/net/ethernet/synopsys/dwc-xlgmac-net.c            | 2 ++
 drivers/net/ethernet/ti/am65-cpsw-nuss.c                  | 3 +++
 drivers/net/ethernet/ti/am65-cpts.c                       | 1 +
 drivers/net/ethernet/ti/cpsw.c                            | 1 +
 drivers/net/ethernet/ti/cpsw_ethtool.c                    | 1 +
 drivers/net/ethernet/ti/cpsw_new.c                        | 1 +
 drivers/net/ethernet/ti/cpts.c                            | 1 +
 drivers/net/ethernet/ti/davinci_mdio.c                    | 1 +
 drivers/net/ethernet/ti/icssg/icss_iep.c                  | 1 +
 drivers/net/ethernet/ti/icssg/icssg_config.c              | 1 +
 drivers/net/ethernet/ti/icssg/icssg_prueth.c              | 2 ++
 drivers/net/ethernet/ti/netcp_core.c                      | 1 +
 drivers/net/ethernet/ti/tlan.c                            | 1 +
 drivers/net/ethernet/toshiba/ps3_gelic_wireless.c         | 2 ++
 drivers/net/ethernet/toshiba/tc35815.c                    | 1 +
 drivers/net/ethernet/wangxun/libwx/wx_hw.c                | 1 +
 drivers/net/ethernet/wangxun/ngbe/ngbe_main.c             | 2 ++
 drivers/net/ethernet/wangxun/ngbe/ngbe_mdio.c             | 1 +
 drivers/net/ethernet/wangxun/txgbe/txgbe_irq.c            | 1 +
 drivers/net/ethernet/wangxun/txgbe/txgbe_main.c           | 2 ++
 drivers/net/ethernet/wangxun/txgbe/txgbe_phy.c            | 1 +
 drivers/net/ethernet/wiznet/w5100.c                       | 1 +
 drivers/net/ethernet/wiznet/w5300.c                       | 1 +
 drivers/net/ethernet/xilinx/ll_temac_main.c               | 1 +
 drivers/net/ethernet/xilinx/ll_temac_mdio.c               | 1 +
 drivers/net/ethernet/xilinx/xilinx_axienet.h              | 1 +
 drivers/net/ethernet/xilinx/xilinx_axienet_main.c         | 1 +
 drivers/net/ethernet/xilinx/xilinx_axienet_mdio.c         | 1 +
 drivers/net/ethernet/xilinx/xilinx_emaclite.c             | 1 +
 drivers/net/ethernet/xircom/xirc2ps_cs.c                  | 1 +
 drivers/net/ethernet/xscale/ixp4xx_eth.c                  | 1 +
 drivers/net/fjes/fjes_ethtool.c                           | 1 +
 drivers/net/hamradio/6pack.c                              | 1 +
 drivers/net/hamradio/baycom_epp.c                         | 2 ++
 drivers/net/hamradio/baycom_par.c                         | 1 +
 drivers/net/hamradio/baycom_ser_fdx.c                     | 3 +++
 drivers/net/hamradio/baycom_ser_hdx.c                     | 2 ++
 drivers/net/hamradio/mkiss.c                              | 1 +
 drivers/net/hamradio/scc.c                                | 1 +
 drivers/net/hamradio/yam.c                                | 1 +
 drivers/net/hyperv/netvsc.c                               | 1 +
 drivers/net/hyperv/netvsc_drv.c                           | 2 ++
 drivers/net/hyperv/rndis_filter.c                         | 2 ++
 drivers/net/ieee802154/adf7242.c                          | 2 ++
 drivers/net/ieee802154/at86rf230.c                        | 1 +
 drivers/net/ieee802154/ca8210.c                           | 2 ++
 drivers/net/ieee802154/cc2520.c                           | 1 +
 drivers/net/ipa/gsi.c                                     | 2 ++
 drivers/net/ipa/gsi_trans.c                               | 1 +
 drivers/net/ipa/ipa_cmd.c                                 | 1 +
 drivers/net/ipa/ipa_endpoint.c                            | 1 +
 drivers/net/ipa/ipa_main.c                                | 1 +
 drivers/net/ipa/ipa_qmi.c                                 | 1 +
 drivers/net/ipvlan/ipvtap.c                               | 1 +
 drivers/net/macvtap.c                                     | 1 +
 drivers/net/mctp/mctp-i2c.c                               | 2 ++
 drivers/net/mctp/mctp-i3c.c                               | 1 +
 drivers/net/mctp/mctp-serial.c                            | 1 +
 drivers/net/mdio/mdio-aspeed.c                            | 1 +
 drivers/net/mdio/mdio-bcm-iproc.c                         | 1 +
 drivers/net/mdio/mdio-bcm-unimac.c                        | 1 +
 drivers/net/mdio/mdio-gpio.c                              | 1 +
 drivers/net/mdio/mdio-hisi-femac.c                        | 1 +
 drivers/net/mdio/mdio-i2c.c                               | 1 +
 drivers/net/mdio/mdio-ipq4019.c                           | 1 +
 drivers/net/mdio/mdio-ipq8064.c                           | 1 +
 drivers/net/mdio/mdio-moxart.c                            | 1 +
 drivers/net/mdio/mdio-mscc-miim.c                         | 1 +
 drivers/net/mdio/mdio-mux-bcm-iproc.c                     | 1 +
 drivers/net/mdio/mdio-mux-bcm6368.c                       | 1 +
 drivers/net/mdio/mdio-mux-meson-g12a.c                    | 1 +
 drivers/net/mdio/mdio-mux-meson-gxl.c                     | 1 +
 drivers/net/mdio/mdio-mux-multiplexer.c                   | 1 +
 drivers/net/mdio/mdio-mux.c                               | 1 +
 drivers/net/mdio/mdio-mvusb.c                             | 1 +
 drivers/net/mdio/mdio-octeon.c                            | 1 +
 drivers/net/mdio/mdio-sun4i.c                             | 1 +
 drivers/net/mdio/mdio-thunder.c                           | 1 +
 drivers/net/mdio/mdio-xgene.c                             | 1 +
 drivers/net/netconsole.c                                  | 2 ++
 drivers/net/netdevsim/bpf.c                               | 1 +
 drivers/net/netdevsim/bus.c                               | 2 ++
 drivers/net/netdevsim/dev.c                               | 3 +++
 drivers/net/netdevsim/fib.c                               | 1 +
 drivers/net/netdevsim/hwstats.c                           | 1 +
 drivers/net/netdevsim/ipsec.c                             | 1 +
 drivers/net/netdevsim/psample.c                           | 1 +
 drivers/net/phy/bcm-phy-ptp.c                             | 1 +
 drivers/net/phy/dp83640.c                                 | 1 +
 drivers/net/phy/fixed_phy.c                               | 1 +
 drivers/net/phy/micrel.c                                  | 1 +
 drivers/net/phy/mscc/mscc_macsec.c                        | 1 +
 drivers/net/phy/mscc/mscc_main.c                          | 1 +
 drivers/net/phy/phy_device.c                              | 1 +
 drivers/net/phy/phy_led_triggers.c                        | 1 +
 drivers/net/plip/plip.c                                   | 3 +++
 drivers/net/ppp/ppp_async.c                               | 1 +
 drivers/net/ppp/ppp_generic.c                             | 1 +
 drivers/net/slip/slip.c                                   | 1 +
 drivers/net/thunderbolt/main.c                            | 1 +
 drivers/net/usb/aqc111.c                                  | 1 +
 drivers/net/usb/asix_devices.c                            | 1 +
 drivers/net/usb/ax88172a.c                                | 1 +
 drivers/net/usb/cdc_ncm.c                                 | 1 +
 drivers/net/usb/hso.c                                     | 1 +
 drivers/net/usb/lan78xx.c                                 | 1 +
 drivers/net/usb/pegasus.c                                 | 1 +
 drivers/net/usb/qmi_wwan.c                                | 1 +
 drivers/net/usb/r8152.c                                   | 1 +
 drivers/net/usb/smsc95xx.c                                | 1 +
 drivers/net/usb/usbnet.c                                  | 1 +
 drivers/net/veth.c                                        | 1 +
 drivers/net/virtio_net.c                                  | 1 +
 drivers/net/vmxnet3/vmxnet3_drv.c                         | 1 +
 drivers/net/wan/c101.c                                    | 1 +
 drivers/net/wan/hdlc_ppp.c                                | 1 +
 drivers/net/wan/n2.c                                      | 1 +
 drivers/net/wireless/ath/ar5523/ar5523.c                  | 1 +
 drivers/net/wireless/ath/ath10k/ce.c                      | 1 +
 drivers/net/wireless/ath/ath10k/core.c                    | 2 ++
 drivers/net/wireless/ath/ath10k/debug.c                   | 3 +++
 drivers/net/wireless/ath/ath10k/debugfs_sta.c             | 2 ++
 drivers/net/wireless/ath/ath10k/htc.c                     | 1 +
 drivers/net/wireless/ath/ath10k/htt.c                     | 1 +
 drivers/net/wireless/ath/ath10k/htt_rx.c                  | 2 ++
 drivers/net/wireless/ath/ath10k/htt_tx.c                  | 1 +
 drivers/net/wireless/ath/ath10k/mac.c                     | 1 +
 drivers/net/wireless/ath/ath10k/pci.c                     | 1 +
 drivers/net/wireless/ath/ath10k/sdio.c                    | 2 ++
 drivers/net/wireless/ath/ath10k/snoc.c                    | 2 ++
 drivers/net/wireless/ath/ath10k/spectral.c                | 2 ++
 drivers/net/wireless/ath/ath10k/testmode.c                | 1 +
 drivers/net/wireless/ath/ath10k/thermal.c                 | 2 ++
 drivers/net/wireless/ath/ath10k/txrx.c                    | 1 +
 drivers/net/wireless/ath/ath10k/wmi-tlv.c                 | 2 ++
 drivers/net/wireless/ath/ath10k/wmi.c                     | 2 ++
 drivers/net/wireless/ath/ath10k/wow.c                     | 1 +
 drivers/net/wireless/ath/ath11k/ahb.c                     | 2 ++
 drivers/net/wireless/ath/ath11k/core.c                    | 2 ++
 drivers/net/wireless/ath/ath11k/core.h                    | 1 +
 drivers/net/wireless/ath/ath11k/dbring.c                  | 1 +
 drivers/net/wireless/ath/ath11k/debug.c                   | 1 +
 drivers/net/wireless/ath/ath11k/debugfs.c                 | 4 ++++
 drivers/net/wireless/ath/ath11k/debugfs_htt_stats.c       | 2 ++
 drivers/net/wireless/ath/ath11k/debugfs_sta.c             | 2 ++
 drivers/net/wireless/ath/ath11k/dp_rx.c                   | 1 +
 drivers/net/wireless/ath/ath11k/dp_tx.c                   | 2 ++
 drivers/net/wireless/ath/ath11k/hal_rx.c                  | 1 +
 drivers/net/wireless/ath/ath11k/htc.c                     | 1 +
 drivers/net/wireless/ath/ath11k/mac.c                     | 1 +
 drivers/net/wireless/ath/ath11k/peer.c                    | 1 +
 drivers/net/wireless/ath/ath11k/qmi.c                     | 1 +
 drivers/net/wireless/ath/ath11k/reg.c                     | 1 +
 drivers/net/wireless/ath/ath11k/spectral.c                | 2 ++
 drivers/net/wireless/ath/ath11k/thermal.c                 | 2 ++
 drivers/net/wireless/ath/ath11k/trace.h                   | 1 +
 drivers/net/wireless/ath/ath11k/wmi.c                     | 2 ++
 drivers/net/wireless/ath/ath11k/wow.c                     | 1 +
 drivers/net/wireless/ath/ath12k/core.c                    | 2 ++
 drivers/net/wireless/ath/ath12k/core.h                    | 1 +
 drivers/net/wireless/ath/ath12k/dbring.c                  | 1 +
 drivers/net/wireless/ath/ath12k/debug.c                   | 1 +
 drivers/net/wireless/ath/ath12k/dp_mon.c                  | 1 +
 drivers/net/wireless/ath/ath12k/dp_rx.c                   | 1 +
 drivers/net/wireless/ath/ath12k/dp_tx.c                   | 2 ++
 drivers/net/wireless/ath/ath12k/hal_rx.c                  | 1 +
 drivers/net/wireless/ath/ath12k/htc.c                     | 1 +
 drivers/net/wireless/ath/ath12k/mac.c                     | 1 +
 drivers/net/wireless/ath/ath12k/peer.c                    | 1 +
 drivers/net/wireless/ath/ath12k/qmi.c                     | 1 +
 drivers/net/wireless/ath/ath12k/wmi.c                     | 1 +
 drivers/net/wireless/ath/ath5k/debug.c                    | 1 +
 drivers/net/wireless/ath/ath5k/led.c                      | 1 +
 drivers/net/wireless/ath/ath5k/sysfs.c                    | 1 +
 drivers/net/wireless/ath/ath6kl/debug.c                   | 4 ++++
 drivers/net/wireless/ath/ath6kl/hif.c                     | 1 +
 drivers/net/wireless/ath/ath6kl/init.c                    | 1 +
 drivers/net/wireless/ath/ath6kl/main.c                    | 1 +
 drivers/net/wireless/ath/ath6kl/sdio.c                    | 1 +
 drivers/net/wireless/ath/ath9k/ar9003_eeprom.c            | 1 +
 drivers/net/wireless/ath/ath9k/ath9k.h                    | 1 +
 drivers/net/wireless/ath/ath9k/ath9k_pci_owl_loader.c     | 1 +
 drivers/net/wireless/ath/ath9k/channel.c                  | 1 +
 drivers/net/wireless/ath/ath9k/common-debug.c             | 1 +
 drivers/net/wireless/ath/ath9k/common-spectral.c          | 2 ++
 drivers/net/wireless/ath/ath9k/debug.c                    | 2 ++
 drivers/net/wireless/ath/ath9k/debug_sta.c                | 1 +
 drivers/net/wireless/ath/ath9k/dfs_debug.c                | 2 ++
 drivers/net/wireless/ath/ath9k/eeprom_4k.c                | 1 +
 drivers/net/wireless/ath/ath9k/eeprom_9287.c              | 1 +
 drivers/net/wireless/ath/ath9k/eeprom_def.c               | 1 +
 drivers/net/wireless/ath/ath9k/gpio.c                     | 1 +
 drivers/net/wireless/ath/ath9k/hif_usb.c                  | 2 ++
 drivers/net/wireless/ath/ath9k/htc_drv_debug.c            | 2 ++
 drivers/net/wireless/ath/ath9k/htc_drv_gpio.c             | 1 +
 drivers/net/wireless/ath/ath9k/htc_drv_init.c             | 2 ++
 drivers/net/wireless/ath/ath9k/htc_hst.c                  | 1 +
 drivers/net/wireless/ath/ath9k/hw.c                       | 1 +
 drivers/net/wireless/ath/ath9k/hw.h                       | 1 +
 drivers/net/wireless/ath/ath9k/init.c                     | 2 ++
 drivers/net/wireless/ath/ath9k/link.c                     | 1 +
 drivers/net/wireless/ath/ath9k/main.c                     | 1 +
 drivers/net/wireless/ath/ath9k/rng.c                      | 1 +
 drivers/net/wireless/ath/ath9k/tx99.c                     | 2 ++
 drivers/net/wireless/ath/ath9k/wmi.c                      | 1 +
 drivers/net/wireless/ath/ath9k/xmit.c                     | 1 +
 drivers/net/wireless/ath/carl9170/debug.c                 | 1 +
 drivers/net/wireless/ath/carl9170/led.c                   | 1 +
 drivers/net/wireless/ath/carl9170/main.c                  | 2 ++
 drivers/net/wireless/ath/carl9170/rx.c                    | 1 +
 drivers/net/wireless/ath/carl9170/tx.c                    | 1 +
 drivers/net/wireless/ath/carl9170/usb.c                   | 1 +
 drivers/net/wireless/ath/wcn36xx/debug.c                  | 1 +
 drivers/net/wireless/ath/wcn36xx/smd.c                    | 1 +
 drivers/net/wireless/ath/wil6210/debugfs.c                | 2 ++
 drivers/net/wireless/ath/wil6210/interrupt.c              | 1 +
 drivers/net/wireless/ath/wil6210/main.c                   | 2 ++
 drivers/net/wireless/ath/wil6210/pmc.c                    | 1 +
 drivers/net/wireless/ath/wil6210/txrx.h                   | 1 +
 drivers/net/wireless/ath/wil6210/txrx_edma.h              | 1 +
 drivers/net/wireless/ath/wil6210/wmi.c                    | 1 +
 drivers/net/wireless/atmel/at76c50x-usb.c                 | 1 +
 drivers/net/wireless/broadcom/b43/debugfs.c               | 1 +
 drivers/net/wireless/broadcom/b43/dma.c                   | 1 +
 drivers/net/wireless/broadcom/b43/leds.c                  | 1 +
 drivers/net/wireless/broadcom/b43/main.c                  | 2 ++
 drivers/net/wireless/broadcom/b43/sysfs.c                 | 2 ++
 drivers/net/wireless/broadcom/b43legacy/debugfs.c         | 1 +
 drivers/net/wireless/broadcom/b43legacy/leds.c            | 1 +
 drivers/net/wireless/broadcom/b43legacy/main.c            | 2 ++
 drivers/net/wireless/broadcom/b43legacy/sysfs.c           | 2 ++
 .../net/wireless/broadcom/brcm80211/brcmfmac/cfg80211.c   | 3 +++
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/chip.c   | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/dmi.c    | 1 +
 .../net/wireless/broadcom/brcm80211/brcmfmac/firmware.c   | 1 +
 .../net/wireless/broadcom/brcm80211/brcmfmac/fwsignal.c   | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/of.c     | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/p2p.c    | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c   | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c    | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmsmac/led.c    | 1 +
 .../wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c    | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmsmac/main.c   | 1 +
 drivers/net/wireless/broadcom/brcm80211/brcmutil/utils.c  | 1 +
 drivers/net/wireless/intel/ipw2x00/ipw2100.c              | 2 ++
 drivers/net/wireless/intel/ipw2x00/ipw2200.c              | 2 ++
 drivers/net/wireless/intel/ipw2x00/libipw_module.c        | 1 +
 drivers/net/wireless/intel/ipw2x00/libipw_rx.c            | 1 +
 drivers/net/wireless/intel/ipw2x00/libipw_wx.c            | 1 +
 drivers/net/wireless/intel/iwlegacy/3945-debug.c          | 1 +
 drivers/net/wireless/intel/iwlegacy/3945-mac.c            | 2 ++
 drivers/net/wireless/intel/iwlegacy/3945-rs.c             | 1 +
 drivers/net/wireless/intel/iwlegacy/4965-debug.c          | 1 +
 drivers/net/wireless/intel/iwlegacy/4965-mac.c            | 3 +++
 drivers/net/wireless/intel/iwlegacy/4965-rs.c             | 1 +
 drivers/net/wireless/intel/iwlegacy/common.c              | 1 +
 drivers/net/wireless/intel/iwlegacy/debug.c               | 1 +
 drivers/net/wireless/intel/iwlwifi/dvm/debugfs.c          | 1 +
 drivers/net/wireless/intel/iwlwifi/dvm/led.c              | 1 +
 drivers/net/wireless/intel/iwlwifi/dvm/main.c             | 1 +
 drivers/net/wireless/intel/iwlwifi/dvm/rs.c               | 1 +
 drivers/net/wireless/intel/iwlwifi/fw/api/coex.h          | 1 +
 drivers/net/wireless/intel/iwlwifi/fw/dbg.c               | 1 +
 drivers/net/wireless/intel/iwlwifi/fw/debugfs.c           | 3 +++
 drivers/net/wireless/intel/iwlwifi/fw/dump.c              | 1 +
 drivers/net/wireless/intel/iwlwifi/fw/pnvm.h              | 1 +
 drivers/net/wireless/intel/iwlwifi/fw/rs.c                | 1 +
 drivers/net/wireless/intel/iwlwifi/iwl-drv.c              | 1 +
 drivers/net/wireless/intel/iwlwifi/iwl-fh.h               | 1 +
 drivers/net/wireless/intel/iwlwifi/iwl-io.c               | 2 ++
 drivers/net/wireless/intel/iwlwifi/iwl-trans.c            | 1 +
 drivers/net/wireless/intel/iwlwifi/mvm/debugfs-vif.c      | 2 ++
 drivers/net/wireless/intel/iwlwifi/mvm/debugfs.c          | 3 +++
 drivers/net/wireless/intel/iwlwifi/mvm/led.c              | 1 +
 drivers/net/wireless/intel/iwlwifi/mvm/mac-ctxt.c         | 1 +
 drivers/net/wireless/intel/iwlwifi/mvm/ops.c              | 1 +
 drivers/net/wireless/intel/iwlwifi/mvm/power.c            | 1 +
 drivers/net/wireless/intel/iwlwifi/mvm/ptp.c              | 1 +
 drivers/net/wireless/intel/iwlwifi/mvm/rs.c               | 1 +
 drivers/net/wireless/intel/iwlwifi/mvm/tt.c               | 1 +
 drivers/net/wireless/intel/iwlwifi/pcie/trans-gen2.c      | 1 +
 drivers/net/wireless/intel/iwlwifi/pcie/trans.c           | 2 ++
 drivers/net/wireless/intel/iwlwifi/queue/tx.h             | 1 +
 drivers/net/wireless/intersil/p54/fwio.c                  | 2 ++
 drivers/net/wireless/intersil/p54/led.c                   | 1 +
 drivers/net/wireless/intersil/p54/main.c                  | 1 +
 drivers/net/wireless/intersil/p54/p54spi.c                | 1 +
 drivers/net/wireless/intersil/p54/p54usb.c                | 1 +
 drivers/net/wireless/intersil/p54/txrx.c                  | 1 +
 drivers/net/wireless/marvell/libertas/debugfs.c           | 2 ++
 drivers/net/wireless/marvell/libertas/ethtool.c           | 1 +
 drivers/net/wireless/marvell/libertas/if_sdio.c           | 1 +
 drivers/net/wireless/marvell/libertas/mesh.c              | 2 ++
 drivers/net/wireless/marvell/libertas_tf/deb_defs.h       | 1 +
 drivers/net/wireless/marvell/mwifiex/debugfs.c            | 2 ++
 drivers/net/wireless/marvell/mwifiex/main.c               | 2 ++
 drivers/net/wireless/marvell/mwifiex/pcie.c               | 2 ++
 drivers/net/wireless/marvell/mwifiex/sdio.c               | 2 ++
 drivers/net/wireless/marvell/mwifiex/sta_cmd.c            | 1 +
 drivers/net/wireless/marvell/mwifiex/sta_ioctl.c          | 1 +
 drivers/net/wireless/marvell/mwifiex/usb.c                | 1 +
 drivers/net/wireless/marvell/mwifiex/util.c               | 1 +
 drivers/net/wireless/marvell/mwl8k.c                      | 1 +
 drivers/net/wireless/mediatek/mt76/dma.c                  | 2 ++
 drivers/net/wireless/mediatek/mt76/eeprom.c               | 1 +
 drivers/net/wireless/mediatek/mt76/mac80211.c             | 1 +
 drivers/net/wireless/mediatek/mt76/mmio.c                 | 1 +
 drivers/net/wireless/mediatek/mt76/mt7603/mcu.c           | 1 +
 drivers/net/wireless/mediatek/mt76/mt7615/debugfs.c       | 2 ++
 drivers/net/wireless/mediatek/mt76/mt7615/init.c          | 1 +
 drivers/net/wireless/mediatek/mt76/mt7615/mcu.c           | 1 +
 drivers/net/wireless/mediatek/mt76/mt76_connac_mcu.c      | 1 +
 drivers/net/wireless/mediatek/mt76/mt76x02_mcu.c          | 1 +
 drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c     | 2 ++
 drivers/net/wireless/mediatek/mt76/mt7915/debugfs.c       | 2 ++
 drivers/net/wireless/mediatek/mt76/mt7915/init.c          | 2 ++
 drivers/net/wireless/mediatek/mt76/mt7915/mmio.c          | 1 +
 drivers/net/wireless/mediatek/mt76/mt7921/init.c          | 2 ++
 drivers/net/wireless/mediatek/mt76/mt7925/mcu.c           | 1 +
 drivers/net/wireless/mediatek/mt76/mt7996/debugfs.c       | 2 ++
 drivers/net/wireless/mediatek/mt76/mt7996/init.c          | 2 ++
 drivers/net/wireless/mediatek/mt76/mt7996/mcu.c           | 1 +
 drivers/net/wireless/mediatek/mt76/mt7996/mmio.c          | 1 +
 drivers/net/wireless/mediatek/mt7601u/mcu.c               | 1 +
 drivers/net/wireless/mediatek/mt7601u/usb.c               | 1 +
 drivers/net/wireless/microchip/wilc1000/cfg80211.c        | 1 +
 drivers/net/wireless/microchip/wilc1000/hif.c             | 1 +
 drivers/net/wireless/microchip/wilc1000/netdev.c          | 1 +
 drivers/net/wireless/microchip/wilc1000/wlan.c            | 1 +
 drivers/net/wireless/quantenna/qtnfmac/pcie/pcie.c        | 1 +
 drivers/net/wireless/quantenna/qtnfmac/shm_ipc.c          | 1 +
 drivers/net/wireless/quantenna/qtnfmac/trans.c            | 1 +
 drivers/net/wireless/ralink/rt2x00/rt2x00debug.c          | 2 ++
 drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c       | 1 +
 drivers/net/wireless/ralink/rt2x00/rt2x00leds.c           | 1 +
 drivers/net/wireless/realtek/rtl818x/rtl8187/leds.c       | 1 +
 drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8710b.c    | 1 +
 drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c     | 1 +
 .../net/wireless/realtek/rtlwifi/btcoexist/halbtcoutsrc.c | 1 +
 drivers/net/wireless/realtek/rtlwifi/btcoexist/rtl_btc.c  | 1 +
 drivers/net/wireless/realtek/rtlwifi/core.c               | 1 +
 drivers/net/wireless/realtek/rtlwifi/debug.c              | 1 +
 drivers/net/wireless/realtek/rtlwifi/pci.c                | 1 +
 drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c       | 1 +
 drivers/net/wireless/realtek/rtlwifi/usb.c                | 1 +
 drivers/net/wireless/realtek/rtw88/coex.c                 | 1 +
 drivers/net/wireless/realtek/rtw88/debug.c                | 2 ++
 drivers/net/wireless/realtek/rtw88/fw.c                   | 1 +
 drivers/net/wireless/realtek/rtw88/main.c                 | 1 +
 drivers/net/wireless/realtek/rtw88/ps.c                   | 1 +
 drivers/net/wireless/realtek/rtw89/core.c                 | 1 +
 drivers/net/wireless/realtek/rtw89/core.h                 | 1 +
 drivers/net/wireless/realtek/rtw89/debug.c                | 3 +++
 drivers/net/wireless/realtek/rtw89/fw.c                   | 2 ++
 drivers/net/wireless/realtek/rtw89/fw.h                   | 1 +
 drivers/net/wireless/rsi/rsi_91x_debugfs.c                | 2 ++
 drivers/net/wireless/rsi/rsi_91x_mac80211.c               | 1 +
 drivers/net/wireless/rsi/rsi_91x_main.c                   | 1 +
 drivers/net/wireless/rsi/rsi_91x_mgmt.c                   | 1 +
 drivers/net/wireless/rsi/rsi_common.h                     | 1 +
 drivers/net/wireless/silabs/wfx/bh.c                      | 1 +
 drivers/net/wireless/silabs/wfx/debug.c                   | 1 +
 drivers/net/wireless/silabs/wfx/fwio.c                    | 2 ++
 drivers/net/wireless/silabs/wfx/hif_rx.c                  | 1 +
 drivers/net/wireless/silabs/wfx/hif_tx.c                  | 1 +
 drivers/net/wireless/silabs/wfx/main.c                    | 2 ++
 drivers/net/wireless/silabs/wfx/scan.c                    | 1 +
 drivers/net/wireless/silabs/wfx/sta.c                     | 1 +
 drivers/net/wireless/silabs/wfx/traces.h                  | 1 +
 drivers/net/wireless/ti/wl1251/debugfs.c                  | 1 +
 drivers/net/wireless/ti/wl18xx/debugfs.c                  | 1 +
 drivers/net/wireless/ti/wlcore/boot.c                     | 1 +
 drivers/net/wireless/ti/wlcore/debugfs.c                  | 2 ++
 drivers/net/wireless/ti/wlcore/debugfs.h                  | 1 +
 drivers/net/wireless/ti/wlcore/main.c                     | 1 +
 drivers/net/wireless/ti/wlcore/sysfs.c                    | 2 ++
 drivers/net/wireless/virtual/mac80211_hwsim.c             | 1 +
 drivers/net/wireless/zydas/zd1211rw/zd_chip.c             | 1 +
 drivers/net/wireless/zydas/zd1211rw/zd_rf.c               | 1 +
 drivers/net/wireless/zydas/zd1211rw/zd_usb.c              | 2 ++
 drivers/net/wwan/iosm/iosm_ipc_coredump.c                 | 1 +
 drivers/net/wwan/iosm/iosm_ipc_devlink.c                  | 1 +
 drivers/net/wwan/iosm/iosm_ipc_flash.c                    | 1 +
 drivers/net/wwan/iosm/iosm_ipc_imem.c                     | 2 ++
 drivers/net/wwan/iosm/iosm_ipc_imem_ops.c                 | 1 +
 drivers/net/wwan/iosm/iosm_ipc_mux_codec.c                | 1 +
 drivers/net/wwan/iosm/iosm_ipc_pm.c                       | 1 +
 drivers/net/wwan/iosm/iosm_ipc_protocol.c                 | 1 +
 drivers/net/wwan/iosm/iosm_ipc_protocol_ops.c             | 1 +
 drivers/net/wwan/iosm/iosm_ipc_task_queue.c               | 1 +
 drivers/net/wwan/iosm/iosm_ipc_trace.c                    | 2 ++
 drivers/net/wwan/iosm/iosm_ipc_uevent.c                   | 1 +
 drivers/net/wwan/t7xx/t7xx_dpmaif.c                       | 1 +
 drivers/net/wwan/t7xx/t7xx_hif_cldma.c                    | 1 +
 drivers/net/wwan/wwan_core.c                              | 1 +
 drivers/net/wwan/wwan_hwsim.c                             | 1 +
 drivers/net/xen-netback/interface.c                       | 1 +
 drivers/net/xen-netback/xenbus.c                          | 2 ++
 drivers/net/xen-netfront.c                                | 2 ++
 drivers/nfc/nfcmrvl/fw_dnld.c                             | 1 +
 drivers/nfc/nfcmrvl/spi.c                                 | 1 +
 drivers/nfc/nfcsim.c                                      | 2 ++
 drivers/nfc/nxp-nci/core.c                                | 1 +
 drivers/nfc/pn533/pn533.c                                 | 1 +
 drivers/nfc/pn533/usb.c                                   | 1 +
 drivers/nfc/port100.c                                     | 1 +
 drivers/nfc/st-nci/se.c                                   | 2 ++
 drivers/nfc/st21nfca/core.c                               | 2 ++
 drivers/nfc/st21nfca/dep.c                                | 1 +
 drivers/nfc/st21nfca/se.c                                 | 1 +
 drivers/nfc/st21nfca/vendor_cmds.c                        | 1 +
 drivers/nfc/st95hf/core.c                                 | 1 +
 drivers/nfc/st95hf/spi.c                                  | 1 +
 drivers/ntb/core.c                                        | 1 +
 drivers/ntb/hw/amd/ntb_hw_amd.c                           | 1 +
 drivers/ntb/hw/epf/ntb_hw_epf.c                           | 1 +
 drivers/ntb/hw/idt/ntb_hw_idt.c                           | 2 ++
 drivers/ntb/hw/intel/ntb_hw_gen1.c                        | 1 +
 drivers/ntb/hw/intel/ntb_hw_gen3.c                        | 1 +
 drivers/ntb/hw/intel/ntb_hw_gen4.c                        | 1 +
 drivers/ntb/hw/mscc/ntb_hw_switchtec.c                    | 1 +
 drivers/ntb/ntb_transport.c                               | 2 ++
 drivers/ntb/test/ntb_msi_test.c                           | 2 ++
 drivers/ntb/test/ntb_perf.c                               | 3 +++
 drivers/ntb/test/ntb_tool.c                               | 2 ++
 drivers/nubus/proc.c                                      | 1 +
 drivers/nvdimm/btt.c                                      | 2 ++
 drivers/nvdimm/btt_devs.c                                 | 1 +
 drivers/nvdimm/bus.c                                      | 1 +
 drivers/nvdimm/core.c                                     | 2 ++
 drivers/nvdimm/dimm_devs.c                                | 1 +
 drivers/nvdimm/label.c                                    | 1 +
 drivers/nvdimm/namespace_devs.c                           | 1 +
 drivers/nvdimm/nd_perf.c                                  | 1 +
 drivers/nvdimm/nd_virtio.c                                | 2 ++
 drivers/nvdimm/pfn_devs.c                                 | 1 +
 drivers/nvdimm/pmem.c                                     | 2 ++
 drivers/nvdimm/region_devs.c                              | 1 +
 drivers/nvdimm/security.c                                 | 2 ++
 drivers/nvme/common/auth.c                                | 1 +
 drivers/nvme/common/keyring.c                             | 1 +
 drivers/nvme/host/apple.c                                 | 1 +
 drivers/nvme/host/core.c                                  | 1 +
 drivers/nvme/host/fabrics.c                               | 1 +
 drivers/nvme/host/fc.c                                    | 4 ++++
 drivers/nvme/host/ioctl.c                                 | 1 +
 drivers/nvme/host/multipath.c                             | 1 +
 drivers/nvme/host/nvme.h                                  | 1 +
 drivers/nvme/host/pci.c                                   | 3 +++
 drivers/nvme/host/rdma.c                                  | 1 +
 drivers/nvme/host/sysfs.c                                 | 1 +
 drivers/nvme/host/tcp.c                                   | 2 ++
 drivers/nvme/target/auth.c                                | 1 +
 drivers/nvme/target/configfs.c                            | 1 +
 drivers/nvme/target/core.c                                | 3 +++
 drivers/nvme/target/fc.c                                  | 1 +
 drivers/nvme/target/fcloop.c                              | 2 ++
 drivers/nvme/target/io-cmd-bdev.c                         | 1 +
 drivers/nvme/target/nvmet.h                               | 1 +
 drivers/nvme/target/rdma.c                                | 3 +++
 drivers/nvme/target/tcp.c                                 | 2 ++
 drivers/nvmem/brcm_nvram.c                                | 1 +
 drivers/nvmem/core.c                                      | 1 +
 drivers/nvmem/u-boot-env.c                                | 1 +
 drivers/of/address.c                                      | 2 ++
 drivers/of/base.c                                         | 2 ++
 drivers/of/dynamic.c                                      | 1 +
 drivers/of/kobj.c                                         | 2 ++
 drivers/of/module.c                                       | 1 +
 drivers/of/of_numa.c                                      | 1 +
 drivers/of/overlay.c                                      | 1 +
 drivers/of/pdt.c                                          | 1 +
 drivers/of/platform.c                                     | 1 +
 drivers/of/resolver.c                                     | 1 +
 drivers/of/unittest.c                                     | 1 +
 drivers/opp/debugfs.c                                     | 1 +
 drivers/opp/of.c                                          | 1 +
 drivers/parisc/ccio-dma.c                                 | 1 +
 drivers/parisc/dino.c                                     | 1 +
 drivers/parisc/eisa.c                                     | 1 +
 drivers/parisc/eisa_enumerator.c                          | 1 +
 drivers/parisc/lba_pci.c                                  | 1 +
 drivers/parisc/led.c                                      | 1 +
 drivers/parisc/pdc_stable.c                               | 2 ++
 drivers/parport/parport_pc.c                              | 1 +
 drivers/parport/procfs.c                                  | 1 +
 drivers/pci/controller/dwc/pci-dra7xx.c                   | 1 +
 drivers/pci/controller/dwc/pci-keystone.c                 | 2 ++
 drivers/pci/controller/dwc/pcie-designware-ep.c           | 1 +
 drivers/pci/controller/dwc/pcie-designware-host.c         | 1 +
 drivers/pci/controller/dwc/pcie-designware.c              | 2 ++
 drivers/pci/controller/dwc/pcie-qcom-ep.c                 | 1 +
 drivers/pci/controller/dwc/pcie-tegra194-acpi.c           | 1 +
 drivers/pci/controller/dwc/pcie-tegra194.c                | 1 +
 drivers/pci/controller/pci-hyperv.c                       | 2 ++
 drivers/pci/controller/pci-tegra.c                        | 1 +
 drivers/pci/controller/pci-thunder-pem.c                  | 1 +
 drivers/pci/controller/pci-xgene-msi.c                    | 1 +
 drivers/pci/controller/pci-xgene.c                        | 1 +
 drivers/pci/controller/pcie-altera-msi.c                  | 1 +
 drivers/pci/controller/pcie-apple.c                       | 1 +
 drivers/pci/controller/pcie-iproc-msi.c                   | 1 +
 drivers/pci/controller/pcie-mediatek.c                    | 1 +
 drivers/pci/controller/pcie-microchip-host.c              | 1 +
 drivers/pci/controller/pcie-mt7621.c                      | 1 +
 drivers/pci/controller/pcie-rcar-ep.c                     | 1 +
 drivers/pci/controller/pcie-rcar.c                        | 1 +
 drivers/pci/controller/pcie-rockchip.c                    | 1 +
 drivers/pci/controller/vmd.c                              | 1 +
 drivers/pci/doe.c                                         | 1 +
 drivers/pci/endpoint/functions/pci-epf-mhi.c              | 1 +
 drivers/pci/endpoint/functions/pci-epf-ntb.c              | 2 ++
 drivers/pci/endpoint/functions/pci-epf-test.c             | 1 +
 drivers/pci/endpoint/functions/pci-epf-vntb.c             | 3 +++
 drivers/pci/endpoint/pci-ep-cfs.c                         | 2 ++
 drivers/pci/endpoint/pci-epc-core.c                       | 2 ++
 drivers/pci/endpoint/pci-epf-core.c                       | 1 +
 drivers/pci/hotplug/acpiphp_core.c                        | 1 +
 drivers/pci/hotplug/cpci_hotplug_core.c                   | 1 +
 drivers/pci/hotplug/cpcihp_generic.c                      | 1 +
 drivers/pci/hotplug/cpqphp_core.c                         | 1 +
 drivers/pci/hotplug/cpqphp_sysfs.c                        | 1 +
 drivers/pci/hotplug/ibmphp_ebda.c                         | 1 +
 drivers/pci/hotplug/pci_hotplug_core.c                    | 1 +
 drivers/pci/hotplug/pciehp_core.c                         | 1 +
 drivers/pci/hotplug/pnv_php.c                             | 1 +
 drivers/pci/hotplug/rpaphp_core.c                         | 2 ++
 drivers/pci/hotplug/s390_pci_hpc.c                        | 1 +
 drivers/pci/hotplug/shpchp_core.c                         | 1 +
 drivers/pci/iov.c                                         | 2 ++
 drivers/pci/of.c                                          | 1 +
 drivers/pci/of_property.c                                 | 2 ++
 drivers/pci/p2pdma.c                                      | 2 ++
 drivers/pci/pci-bridge-emul.c                             | 1 +
 drivers/pci/pci-driver.c                                  | 2 ++
 drivers/pci/pci-stub.c                                    | 1 +
 drivers/pci/pci-sysfs.c                                   | 2 ++
 drivers/pci/pci.c                                         | 3 +++
 drivers/pci/pcie/aspm.c                                   | 2 ++
 drivers/pci/pcie/ptm.c                                    | 1 +
 drivers/pci/probe.c                                       | 1 +
 drivers/pci/proc.c                                        | 1 +
 drivers/pci/slot.c                                        | 1 +
 drivers/pci/switch/switchtec.c                            | 1 +
 drivers/pci/vgaarb.c                                      | 1 +
 drivers/pci/xen-pcifront.c                                | 1 +
 drivers/pcmcia/cs.c                                       | 1 +
 drivers/pcmcia/cs_internal.h                              | 1 +
 drivers/pcmcia/ds.c                                       | 1 +
 drivers/pcmcia/i82365.c                                   | 1 +
 drivers/pcmcia/rsrc_nonstatic.c                           | 1 +
 drivers/pcmcia/sa11xx_base.c                              | 1 +
 drivers/pcmcia/soc_common.c                               | 1 +
 drivers/pcmcia/socket_sysfs.c                             | 1 +
 drivers/peci/controller/peci-aspeed.c                     | 3 +++
 drivers/peci/controller/peci-npcm.c                       | 1 +
 drivers/peci/cpu.c                                        | 1 +
 drivers/peci/sysfs.c                                      | 1 +
 drivers/perf/alibaba_uncore_drw_pmu.c                     | 1 +
 drivers/perf/amlogic/meson_ddr_pmu_core.c                 | 1 +
 drivers/perf/apple_m1_cpu_pmu.c                           | 1 +
 drivers/perf/arm-ccn.c                                    | 1 +
 drivers/perf/arm_cspmu/arm_cspmu.c                        | 1 +
 drivers/perf/arm_pmu_acpi.c                               | 1 +
 drivers/perf/arm_pmuv3.c                                  | 2 ++
 drivers/perf/fsl_imx8_ddr_perf.c                          | 1 +
 drivers/perf/fsl_imx9_ddr_perf.c                          | 1 +
 drivers/perf/marvell_cn10k_ddr_pmu.c                      | 1 +
 drivers/perf/marvell_cn10k_tad_pmu.c                      | 1 +
 drivers/perf/thunderx2_pmu.c                              | 1 +
 drivers/perf/xgene_pmu.c                                  | 1 +
 drivers/phy/allwinner/phy-sun4i-usb.c                     | 1 +
 drivers/phy/broadcom/phy-brcm-usb.c                       | 1 +
 drivers/phy/cadence/phy-cadence-sierra.c                  | 1 +
 drivers/phy/cadence/phy-cadence-torrent.c                 | 1 +
 drivers/phy/mediatek/phy-mtk-mipi-csi-0-5.c               | 1 +
 drivers/phy/mediatek/phy-mtk-pcie.c                       | 1 +
 drivers/phy/mediatek/phy-mtk-tphy.c                       | 1 +
 drivers/phy/motorola/phy-mapphone-mdm6600.c               | 1 +
 drivers/phy/qualcomm/phy-qcom-edp.c                       | 1 +
 drivers/phy/qualcomm/phy-qcom-qmp-combo.c                 | 1 +
 drivers/phy/qualcomm/phy-qcom-qmp-ufs.c                   | 1 +
 drivers/phy/renesas/phy-rcar-gen3-usb2.c                  | 1 +
 drivers/phy/starfive/phy-jh7110-pcie.c                    | 1 +
 drivers/phy/tegra/xusb.c                                  | 1 +
 drivers/phy/ti/phy-j721e-wiz.c                            | 1 +
 drivers/phy/ti/phy-twl4030-usb.c                          | 1 +
 drivers/phy/xilinx/phy-zynqmp.c                           | 1 +
 drivers/pinctrl/bcm/pinctrl-bcm2835.c                     | 1 +
 drivers/pinctrl/core.c                                    | 1 +
 drivers/pinctrl/devicetree.c                              | 1 +
 drivers/pinctrl/freescale/pinctrl-mxs.c                   | 1 +
 drivers/pinctrl/mediatek/pinctrl-mtmips.c                 | 1 +
 drivers/pinctrl/mediatek/pinctrl-paris.c                  | 1 +
 drivers/pinctrl/mvebu/pinctrl-mvebu.c                     | 1 +
 drivers/pinctrl/nomadik/pinctrl-abx500.c                  | 1 +
 drivers/pinctrl/nomadik/pinctrl-nomadik.c                 | 1 +
 drivers/pinctrl/nxp/pinctrl-s32cc.c                       | 1 +
 drivers/pinctrl/pinctrl-amd.c                             | 1 +
 drivers/pinctrl/pinctrl-digicolor.c                       | 1 +
 drivers/pinctrl/pinctrl-equilibrium.c                     | 1 +
 drivers/pinctrl/pinctrl-falcon.c                          | 1 +
 drivers/pinctrl/pinctrl-ingenic.c                         | 1 +
 drivers/pinctrl/pinctrl-pistachio.c                       | 1 +
 drivers/pinctrl/pinctrl-st.c                              | 1 +
 drivers/pinctrl/pinmux.c                                  | 1 +
 drivers/pinctrl/qcom/pinctrl-qdf2xxx.c                    | 1 +
 drivers/pinctrl/samsung/pinctrl-samsung.c                 | 1 +
 drivers/pinctrl/sunxi/pinctrl-sunxi.c                     | 1 +
 drivers/platform/chrome/chromeos_acpi.c                   | 1 +
 drivers/platform/chrome/cros_ec_chardev.c                 | 1 +
 drivers/platform/chrome/cros_ec_debugfs.c                 | 1 +
 drivers/platform/chrome/cros_ec_lightbar.c                | 1 +
 drivers/platform/chrome/cros_ec_sysfs.c                   | 1 +
 drivers/platform/chrome/cros_usbpd_logger.c               | 1 +
 drivers/platform/chrome/wilco_ec/debugfs.c                | 1 +
 drivers/platform/chrome/wilco_ec/sysfs.c                  | 2 ++
 drivers/platform/chrome/wilco_ec/telemetry.c              | 1 +
 drivers/platform/loongarch/loongson-laptop.c              | 1 +
 drivers/platform/mellanox/mlxbf-bootctl.c                 | 2 ++
 drivers/platform/mellanox/mlxbf-pmc.c                     | 2 ++
 drivers/platform/mellanox/mlxreg-hotplug.c                | 1 +
 drivers/platform/mellanox/mlxreg-io.c                     | 2 ++
 drivers/platform/mips/cpu_hwmon.c                         | 1 +
 drivers/platform/olpc/olpc-ec.c                           | 1 +
 drivers/platform/surface/aggregator/bus.c                 | 1 +
 drivers/platform/surface/aggregator/ssh_packet_layer.c    | 1 +
 drivers/platform/surface/aggregator/ssh_packet_layer.h    | 1 +
 drivers/platform/surface/aggregator/trace.h               | 1 +
 drivers/platform/surface/surface3_power.c                 | 1 +
 drivers/platform/surface/surfacepro3_button.c             | 1 +
 drivers/platform/x86/adv_swbutton.c                       | 1 +
 drivers/platform/x86/amd/hsmp.c                           | 2 ++
 drivers/platform/x86/amd/pmf/cnqf.c                       | 1 +
 drivers/platform/x86/amd/pmf/tee-if.c                     | 2 ++
 drivers/platform/x86/apple-gmux.c                         | 1 +
 drivers/platform/x86/asus-laptop.c                        | 2 ++
 drivers/platform/x86/asus-wmi.c                           | 2 ++
 drivers/platform/x86/classmate-laptop.c                   | 2 ++
 drivers/platform/x86/compal-laptop.c                      | 2 ++
 drivers/platform/x86/dell/alienware-wmi.c                 | 2 ++
 drivers/platform/x86/dell/dcdbas.c                        | 2 ++
 drivers/platform/x86/dell/dell-laptop.c                   | 2 ++
 drivers/platform/x86/dell/dell-smbios-base.c              | 1 +
 drivers/platform/x86/dell/dell-wmi-ddv.c                  | 1 +
 .../x86/dell/dell-wmi-sysman/biosattr-interface.c         | 1 +
 .../platform/x86/dell/dell-wmi-sysman/dell-wmi-sysman.h   | 1 +
 .../platform/x86/dell/dell-wmi-sysman/enum-attributes.c   | 3 +++
 .../platform/x86/dell/dell-wmi-sysman/int-attributes.c    | 4 ++++
 .../x86/dell/dell-wmi-sysman/passobj-attributes.c         | 4 ++++
 .../x86/dell/dell-wmi-sysman/passwordattr-interface.c     | 1 +
 .../platform/x86/dell/dell-wmi-sysman/string-attributes.c | 3 +++
 drivers/platform/x86/dell/dell-wmi-sysman/sysman.c        | 2 ++
 drivers/platform/x86/dell/dell_rbu.c                      | 1 +
 drivers/platform/x86/eeepc-laptop.c                       | 1 +
 drivers/platform/x86/eeepc-wmi.c                          | 1 +
 drivers/platform/x86/fujitsu-laptop.c                     | 1 +
 drivers/platform/x86/fujitsu-tablet.c                     | 1 +
 drivers/platform/x86/hdaps.c                              | 1 +
 drivers/platform/x86/hp/hp-bioscfg/bioscfg.c              | 3 +++
 drivers/platform/x86/hp/hp-bioscfg/enum-attributes.c      | 3 +++
 drivers/platform/x86/hp/hp-bioscfg/int-attributes.c       | 4 ++++
 .../platform/x86/hp/hp-bioscfg/order-list-attributes.c    | 2 ++
 drivers/platform/x86/hp/hp-bioscfg/passwdobj-attributes.c | 3 +++
 drivers/platform/x86/hp/hp-bioscfg/spmobj-attributes.c    | 3 +++
 drivers/platform/x86/hp/hp-bioscfg/string-attributes.c    | 3 +++
 drivers/platform/x86/hp/hp-bioscfg/surestart-attributes.c | 2 ++
 drivers/platform/x86/hp/hp-wmi.c                          | 2 ++
 drivers/platform/x86/hp/tc1100-wmi.c                      | 2 ++
 drivers/platform/x86/huawei-wmi.c                         | 2 ++
 drivers/platform/x86/ibm_rtl.c                            | 1 +
 drivers/platform/x86/ideapad-laptop.c                     | 1 +
 drivers/platform/x86/intel/ifs/load.c                     | 2 ++
 drivers/platform/x86/intel/ifs/sysfs.c                    | 1 +
 drivers/platform/x86/intel/int1092/intel_sar.c            | 1 +
 drivers/platform/x86/intel/int3472/clk_and_regulator.c    | 1 +
 drivers/platform/x86/intel/int3472/led.c                  | 1 +
 drivers/platform/x86/intel/pmc/core.c                     | 1 +
 drivers/platform/x86/intel/pmt/class.c                    | 1 +
 drivers/platform/x86/intel/pmt/crashlog.c                 | 2 ++
 drivers/platform/x86/intel/pmt/telemetry.c                | 1 +
 drivers/platform/x86/intel/punit_ipc.c                    | 1 +
 drivers/platform/x86/intel/rst.c                          | 2 ++
 drivers/platform/x86/intel/telemetry/debugfs.c            | 1 +
 drivers/platform/x86/intel/tpmi.c                         | 2 ++
 .../x86/intel/uncore-frequency/uncore-frequency-common.c  | 3 +++
 .../x86/intel/uncore-frequency/uncore-frequency-common.h  | 1 +
 drivers/platform/x86/intel/wmi/sbl-fw-update.c            | 2 ++
 drivers/platform/x86/intel_scu_ipc.c                      | 1 +
 drivers/platform/x86/lg-laptop.c                          | 1 +
 drivers/platform/x86/msi-ec.c                             | 1 +
 drivers/platform/x86/msi-laptop.c                         | 1 +
 drivers/platform/x86/panasonic-laptop.c                   | 1 +
 drivers/platform/x86/samsung-laptop.c                     | 2 ++
 drivers/platform/x86/serial-multi-instantiate.c           | 1 +
 drivers/platform/x86/silicom-platform.c                   | 1 +
 drivers/platform/x86/sony-laptop.c                        | 1 +
 drivers/platform/x86/system76_acpi.c                      | 1 +
 drivers/platform/x86/think-lmi.c                          | 3 +++
 drivers/platform/x86/thinkpad_acpi.c                      | 2 ++
 drivers/platform/x86/toshiba_acpi.c                       | 2 ++
 drivers/platform/x86/toshiba_haps.c                       | 2 ++
 drivers/platform/x86/uv_sysfs.c                           | 1 +
 drivers/platform/x86/wireless-hotkey.c                    | 1 +
 drivers/platform/x86/wmi.c                                | 2 ++
 drivers/platform/x86/xo15-ebook.c                         | 1 +
 drivers/pmdomain/arm/scmi_perf_domain.c                   | 1 +
 drivers/pmdomain/core.c                                   | 2 ++
 drivers/pmdomain/governor.c                               | 1 +
 drivers/pmdomain/imx/scu-pd.c                             | 1 +
 drivers/pmdomain/qcom/cpr.c                               | 1 +
 drivers/pmdomain/ti/omap_prm.c                            | 1 +
 drivers/pmdomain/xilinx/zynqmp-pm-domains.c               | 2 ++
 drivers/pnp/card.c                                        | 1 +
 drivers/pnp/core.c                                        | 2 ++
 drivers/pnp/interface.c                                   | 2 ++
 drivers/pnp/isapnp/compat.c                               | 1 +
 drivers/pnp/isapnp/proc.c                                 | 1 +
 drivers/pnp/pnpbios/core.c                                | 1 +
 drivers/pnp/pnpbios/proc.c                                | 1 +
 drivers/pnp/support.c                                     | 2 ++
 drivers/pnp/system.c                                      | 1 +
 drivers/power/reset/at91-reset.c                          | 1 +
 drivers/power/reset/ltc2952-poweroff.c                    | 1 +
 drivers/power/reset/vexpress-poweroff.c                   | 2 ++
 drivers/power/supply/ab8500_fg.c                          | 1 +
 drivers/power/supply/bq2415x_charger.c                    | 2 ++
 drivers/power/supply/bq24190_charger.c                    | 1 +
 drivers/power/supply/bq24257_charger.c                    | 1 +
 drivers/power/supply/bq25890_charger.c                    | 1 +
 drivers/power/supply/charger-manager.c                    | 1 +
 drivers/power/supply/cros_peripheral_charger.c            | 1 +
 drivers/power/supply/cros_usbpd-charger.c                 | 1 +
 drivers/power/supply/ds2760_battery.c                     | 1 +
 drivers/power/supply/ds2780_battery.c                     | 1 +
 drivers/power/supply/ds2781_battery.c                     | 1 +
 drivers/power/supply/ds2782_battery.c                     | 1 +
 drivers/power/supply/isp1704_charger.c                    | 1 +
 drivers/power/supply/ltc4162-l-charger.c                  | 1 +
 drivers/power/supply/max14577_charger.c                   | 1 +
 drivers/power/supply/max1721x_battery.c                   | 1 +
 drivers/power/supply/max77693_charger.c                   | 1 +
 drivers/power/supply/mp2629_charger.c                     | 1 +
 drivers/power/supply/olpc_battery.c                       | 1 +
 drivers/power/supply/pcf50633-charger.c                   | 1 +
 drivers/power/supply/pmu_battery.c                        | 1 +
 drivers/power/supply/power_supply_core.c                  | 1 +
 drivers/power/supply/power_supply_leds.c                  | 1 +
 drivers/power/supply/power_supply_sysfs.c                 | 3 +++
 drivers/power/supply/qcom_battmgr.c                       | 1 +
 drivers/power/supply/sbs-battery.c                        | 1 +
 drivers/power/supply/surface_battery.c                    | 1 +
 drivers/power/supply/test_power.c                         | 1 +
 drivers/power/supply/wm831x_backup.c                      | 1 +
 drivers/power/supply/wm831x_power.c                       | 1 +
 drivers/powercap/dtpm.c                                   | 1 +
 drivers/powercap/dtpm_cpu.c                               | 1 +
 drivers/powercap/intel_rapl_common.c                      | 1 +
 drivers/powercap/powercap_sys.c                           | 1 +
 drivers/pps/clients/pps-gpio.c                            | 1 +
 drivers/pps/clients/pps-ktimer.c                          | 1 +
 drivers/pps/clients/pps-ldisc.c                           | 2 ++
 drivers/pps/clients/pps_parport.c                         | 1 +
 drivers/pps/kapi.c                                        | 1 +
 drivers/pps/pps.c                                         | 1 +
 drivers/pps/sysfs.c                                       | 1 +
 drivers/ps3/ps3av.c                                       | 2 ++
 drivers/ps3/ps3stor_lib.c                                 | 1 +
 drivers/ptp/ptp_chardev.c                                 | 1 +
 drivers/ptp/ptp_clock.c                                   | 1 +
 drivers/ptp/ptp_clockmatrix.c                             | 1 +
 drivers/ptp/ptp_fc3.c                                     | 1 +
 drivers/ptp/ptp_idt82p33.c                                | 1 +
 drivers/ptp/ptp_ocp.c                                     | 2 ++
 drivers/ptp/ptp_sysfs.c                                   | 2 ++
 drivers/ptp/ptp_vclock.c                                  | 1 +
 drivers/pwm/pwm-jz4740.c                                  | 1 +
 drivers/pwm/pwm-mediatek.c                                | 1 +
 drivers/pwm/pwm-meson.c                                   | 1 +
 drivers/pwm/sysfs.c                                       | 3 +++
 drivers/rapidio/devices/rio_mport_cdev.c                  | 2 ++
 drivers/rapidio/devices/tsi721.c                          | 1 +
 drivers/rapidio/rio-sysfs.c                               | 2 ++
 drivers/rapidio/rio_cm.c                                  | 2 ++
 drivers/rapidio/switches/idt_gen2.c                       | 1 +
 drivers/regulator/bd9571mwv-regulator.c                   | 1 +
 drivers/regulator/core.c                                  | 1 +
 drivers/regulator/da9055-regulator.c                      | 1 +
 drivers/regulator/of_regulator.c                          | 1 +
 drivers/regulator/qcom-rpmh-regulator.c                   | 1 +
 drivers/regulator/userspace-consumer.c                    | 1 +
 drivers/regulator/virtual.c                               | 2 ++
 drivers/regulator/wm831x-dcdc.c                           | 1 +
 drivers/regulator/wm831x-isink.c                          | 1 +
 drivers/regulator/wm831x-ldo.c                            | 1 +
 drivers/remoteproc/imx_dsp_rproc.c                        | 1 +
 drivers/remoteproc/keystone_remoteproc.c                  | 1 +
 drivers/remoteproc/omap_remoteproc.c                      | 1 +
 drivers/remoteproc/qcom_q6v5.c                            | 1 +
 drivers/remoteproc/qcom_q6v5_mss.c                        | 1 +
 drivers/remoteproc/qcom_sysmon.c                          | 2 ++
 drivers/remoteproc/qcom_wcnss.c                           | 1 +
 drivers/remoteproc/remoteproc_core.c                      | 1 +
 drivers/remoteproc/remoteproc_debugfs.c                   | 2 ++
 drivers/remoteproc/remoteproc_sysfs.c                     | 1 +
 drivers/rpmsg/qcom_glink_native.c                         | 1 +
 drivers/rpmsg/qcom_smd.c                                  | 1 +
 drivers/rpmsg/rpmsg_char.c                                | 1 +
 drivers/rpmsg/rpmsg_core.c                                | 2 ++
 drivers/rtc/class.c                                       | 1 +
 drivers/rtc/interface.c                                   | 1 +
 drivers/rtc/lib.c                                         | 1 +
 drivers/rtc/proc.c                                        | 1 +
 drivers/rtc/rtc-ab8500.c                                  | 1 +
 drivers/rtc/rtc-abx80x.c                                  | 1 +
 drivers/rtc/rtc-bq32k.c                                   | 2 ++
 drivers/rtc/rtc-ds1307.c                                  | 1 +
 drivers/rtc/rtc-ds1343.c                                  | 1 +
 drivers/rtc/rtc-ds1685.c                                  | 1 +
 drivers/rtc/rtc-ep93xx.c                                  | 1 +
 drivers/rtc/rtc-hid-sensor-time.c                         | 1 +
 drivers/rtc/rtc-isl1208.c                                 | 1 +
 drivers/rtc/rtc-pcf2127.c                                 | 1 +
 drivers/rtc/rtc-rs5c372.c                                 | 1 +
 drivers/rtc/rtc-rv3028.c                                  | 1 +
 drivers/rtc/rtc-rv3029c2.c                                | 2 ++
 drivers/rtc/rtc-rx8025.c                                  | 1 +
 drivers/rtc/rtc-sh.c                                      | 1 +
 drivers/rtc/rtc-starfire.c                                | 1 +
 drivers/rtc/rtc-x1205.c                                   | 1 +
 drivers/rtc/sysfs.c                                       | 1 +
 drivers/s390/block/dasd.c                                 | 1 +
 drivers/s390/block/dasd_3990_erp.c                        | 1 +
 drivers/s390/block/dasd_alias.c                           | 1 +
 drivers/s390/block/dasd_devmap.c                          | 2 ++
 drivers/s390/block/dasd_eckd.c                            | 1 +
 drivers/s390/block/dasd_fba.c                             | 1 +
 drivers/s390/block/dasd_genhd.c                           | 1 +
 drivers/s390/block/dcssblk.c                              | 1 +
 drivers/s390/block/scm_blk.c                              | 1 +
 drivers/s390/char/con3215.c                               | 1 +
 drivers/s390/char/con3270.c                               | 1 +
 drivers/s390/char/diag_ftp.c                              | 1 +
 drivers/s390/char/hmcdrv_dev.c                            | 1 +
 drivers/s390/char/sclp.c                                  | 1 +
 drivers/s390/char/sclp_cpi_sys.c                          | 2 ++
 drivers/s390/char/sclp_ftp.c                              | 1 +
 drivers/s390/char/sclp_ocf.c                              | 1 +
 drivers/s390/char/tape_3590.c                             | 1 +
 drivers/s390/char/tape_char.c                             | 1 +
 drivers/s390/char/tape_core.c                             | 1 +
 drivers/s390/char/vmlogrdr.c                              | 1 +
 drivers/s390/char/vmur.c                                  | 2 ++
 drivers/s390/char/zcore.c                                 | 1 +
 drivers/s390/cio/airq.c                                   | 1 +
 drivers/s390/cio/blacklist.c                              | 1 +
 drivers/s390/cio/ccwgroup.c                               | 2 ++
 drivers/s390/cio/chp.c                                    | 1 +
 drivers/s390/cio/chsc.c                                   | 1 +
 drivers/s390/cio/chsc_sch.c                               | 2 ++
 drivers/s390/cio/cio.c                                    | 1 +
 drivers/s390/cio/cio_inject.c                             | 2 ++
 drivers/s390/cio/cmf.c                                    | 2 ++
 drivers/s390/cio/css.c                                    | 2 ++
 drivers/s390/cio/device.c                                 | 2 ++
 drivers/s390/cio/device_pgid.c                            | 1 +
 drivers/s390/cio/device_status.c                          | 1 +
 drivers/s390/cio/qdio_debug.c                             | 2 ++
 drivers/s390/cio/qdio_debug.h                             | 1 +
 drivers/s390/cio/scm.c                                    | 1 +
 drivers/s390/cio/vfio_ccw_drv.c                           | 1 +
 drivers/s390/cio/vfio_ccw_fsm.c                           | 1 +
 drivers/s390/crypto/ap_bus.c                              | 3 +++
 drivers/s390/crypto/ap_card.c                             | 1 +
 drivers/s390/crypto/ap_queue.c                            | 1 +
 drivers/s390/crypto/vfio_ap_ops.c                         | 2 ++
 drivers/s390/crypto/zcrypt_card.c                         | 1 +
 drivers/s390/crypto/zcrypt_cex4.c                         | 1 +
 drivers/s390/crypto/zcrypt_msgtype50.c                    | 1 +
 drivers/s390/crypto/zcrypt_msgtype6.c                     | 1 +
 drivers/s390/crypto/zcrypt_queue.c                        | 1 +
 drivers/s390/net/ctcm_main.c                              | 1 +
 drivers/s390/net/ctcm_main.h                              | 1 +
 drivers/s390/net/ctcm_mpc.c                               | 1 +
 drivers/s390/net/ctcm_sysfs.c                             | 2 ++
 drivers/s390/net/lcs.c                                    | 1 +
 drivers/s390/net/lcs.h                                    | 1 +
 drivers/s390/net/netiucv.c                                | 2 ++
 drivers/s390/net/qeth_core_main.c                         | 3 +++
 drivers/s390/net/qeth_core_sys.c                          | 1 +
 drivers/s390/net/qeth_ethtool.c                           | 1 +
 drivers/s390/net/qeth_l2_main.c                           | 1 +
 drivers/s390/net/qeth_l2_sys.c                            | 1 +
 drivers/s390/net/qeth_l3_main.c                           | 1 +
 drivers/s390/net/qeth_l3_sys.c                            | 2 ++
 drivers/s390/net/smsgiucv_app.c                           | 1 +
 drivers/s390/scsi/zfcp_aux.c                              | 2 ++
 drivers/s390/scsi/zfcp_dbf.c                              | 1 +
 drivers/s390/scsi/zfcp_fc.c                               | 2 ++
 drivers/s390/scsi/zfcp_fsf.c                              | 2 ++
 drivers/s390/scsi/zfcp_scsi.c                             | 2 ++
 drivers/s390/scsi/zfcp_sysfs.c                            | 2 ++
 drivers/sbus/char/envctrl.c                               | 1 +
 drivers/scsi/3w-9xxx.c                                    | 1 +
 drivers/scsi/3w-sas.c                                     | 1 +
 drivers/scsi/3w-xxxx.c                                    | 1 +
 drivers/scsi/BusLogic.c                                   | 3 +++
 drivers/scsi/aacraid/aachba.c                             | 1 +
 drivers/scsi/aacraid/commctrl.c                           | 1 +
 drivers/scsi/aacraid/linit.c                              | 1 +
 drivers/scsi/aacraid/src.c                                | 1 +
 drivers/scsi/advansys.c                                   | 1 +
 drivers/scsi/aha152x.c                                    | 1 +
 drivers/scsi/aha1542.c                                    | 1 +
 drivers/scsi/aic7xxx/aic7770_osm.c                        | 1 +
 drivers/scsi/aic7xxx/aic79xx_core.c                       | 1 +
 drivers/scsi/aic7xxx/aic79xx_osm.c                        | 3 +++
 drivers/scsi/aic7xxx/aic79xx_osm_pci.c                    | 1 +
 drivers/scsi/aic7xxx/aic7xxx_core.c                       | 1 +
 drivers/scsi/aic7xxx/aic7xxx_osm.c                        | 3 +++
 drivers/scsi/aic7xxx/aic7xxx_osm_pci.c                    | 1 +
 drivers/scsi/aic7xxx/aicasm/aicasm.c                      | 1 +
 drivers/scsi/aic7xxx/aicasm/aicasm_gram.y                 | 1 +
 drivers/scsi/aic7xxx/aicasm/aicasm_macro_scan.l           | 1 +
 drivers/scsi/aic7xxx/aicasm/aicasm_scan.l                 | 1 +
 drivers/scsi/aic94xx/aic94xx_init.c                       | 1 +
 drivers/scsi/aic94xx/aic94xx_task.c                       | 1 +
 drivers/scsi/aic94xx/aic94xx_tmf.c                        | 1 +
 drivers/scsi/arcmsr/arcmsr_attr.c                         | 1 +
 drivers/scsi/arcmsr/arcmsr_hba.c                          | 2 ++
 drivers/scsi/arm/acornscsi.c                              | 1 +
 drivers/scsi/arm/arxescsi.c                               | 1 +
 drivers/scsi/arm/cumana_2.c                               | 1 +
 drivers/scsi/arm/eesox.c                                  | 1 +
 drivers/scsi/arm/fas216.c                                 | 1 +
 drivers/scsi/arm/powertec.c                               | 1 +
 drivers/scsi/be2iscsi/be_cmds.c                           | 2 ++
 drivers/scsi/be2iscsi/be_iscsi.c                          | 1 +
 drivers/scsi/be2iscsi/be_main.c                           | 2 ++
 drivers/scsi/be2iscsi/be_mgmt.c                           | 2 ++
 drivers/scsi/bfa/bfa_core.c                               | 1 +
 drivers/scsi/bfa/bfa_cs.h                                 | 1 +
 drivers/scsi/bfa/bfa_fcs.c                                | 1 +
 drivers/scsi/bfa/bfa_fcs_lport.c                          | 1 +
 drivers/scsi/bfa/bfa_ioc.c                                | 1 +
 drivers/scsi/bfa/bfad.c                                   | 2 ++
 drivers/scsi/bfa/bfad_attr.c                              | 2 ++
 drivers/scsi/bfa/bfad_bsg.c                               | 1 +
 drivers/scsi/bfa/bfad_debugfs.c                           | 1 +
 drivers/scsi/bfa/bfad_im.c                                | 1 +
 drivers/scsi/bnx2fc/bnx2fc_fcoe.c                         | 3 +++
 drivers/scsi/bnx2fc/bnx2fc_hwi.c                          | 1 +
 drivers/scsi/bnx2fc/bnx2fc_io.c                           | 1 +
 drivers/scsi/bnx2fc/bnx2fc_tgt.c                          | 1 +
 drivers/scsi/bnx2i/bnx2i_hwi.c                            | 1 +
 drivers/scsi/bnx2i/bnx2i_iscsi.c                          | 2 ++
 drivers/scsi/bnx2i/bnx2i_sysfs.c                          | 1 +
 drivers/scsi/ch.c                                         | 1 +
 drivers/scsi/csiostor/csio_hw.c                           | 1 +
 drivers/scsi/csiostor/csio_init.c                         | 1 +
 drivers/scsi/csiostor/csio_isr.c                          | 1 +
 drivers/scsi/csiostor/csio_lnode.c                        | 1 +
 drivers/scsi/csiostor/csio_scsi.c                         | 2 ++
 drivers/scsi/cxgbi/cxgb4i/cxgb4i.c                        | 1 +
 drivers/scsi/cxgbi/libcxgbi.c                             | 2 ++
 drivers/scsi/cxlflash/main.c                              | 3 +++
 drivers/scsi/cxlflash/ocxl_hw.c                           | 1 +
 drivers/scsi/cxlflash/superpipe.c                         | 1 +
 drivers/scsi/device_handler/scsi_dh_alua.c                | 1 +
 drivers/scsi/device_handler/scsi_dh_emc.c                 | 1 +
 drivers/scsi/elx/efct/efct_driver.c                       | 2 ++
 drivers/scsi/elx/efct/efct_hw.c                           | 2 ++
 drivers/scsi/elx/efct/efct_hw_queues.c                    | 1 +
 drivers/scsi/elx/efct/efct_lio.c                          | 2 ++
 drivers/scsi/elx/efct/efct_scsi.c                         | 1 +
 drivers/scsi/elx/efct/efct_xport.c                        | 2 ++
 drivers/scsi/elx/libefc/efc_domain.c                      | 1 +
 drivers/scsi/elx/libefc/efc_node.c                        | 1 +
 drivers/scsi/elx/libefc/efc_nport.c                       | 1 +
 drivers/scsi/elx/libefc_sli/sli4.c                        | 1 +
 drivers/scsi/elx/libefc_sli/sli4.h                        | 1 +
 drivers/scsi/esas2r/esas2r_flash.c                        | 1 +
 drivers/scsi/esas2r/esas2r_init.c                         | 2 ++
 drivers/scsi/esas2r/esas2r_log.c                          | 1 +
 drivers/scsi/esas2r/esas2r_main.c                         | 2 ++
 drivers/scsi/esas2r/esas2r_vda.c                          | 1 +
 drivers/scsi/fcoe/fcoe.c                                  | 1 +
 drivers/scsi/fcoe/fcoe_sysfs.c                            | 2 ++
 drivers/scsi/fcoe/fcoe_transport.c                        | 1 +
 drivers/scsi/fnic/fnic_debugfs.c                          | 2 ++
 drivers/scsi/fnic/fnic_isr.c                              | 1 +
 drivers/scsi/fnic/fnic_main.c                             | 1 +
 drivers/scsi/fnic/fnic_scsi.c                             | 1 +
 drivers/scsi/fnic/fnic_trace.c                            | 1 +
 drivers/scsi/hisi_sas/hisi_sas_main.c                     | 1 +
 drivers/scsi/hisi_sas/hisi_sas_v1_hw.c                    | 2 ++
 drivers/scsi/hisi_sas/hisi_sas_v2_hw.c                    | 2 ++
 drivers/scsi/hisi_sas/hisi_sas_v3_hw.c                    | 4 ++++
 drivers/scsi/hosts.c                                      | 2 ++
 drivers/scsi/hpsa.c                                       | 2 ++
 drivers/scsi/hptiop.c                                     | 1 +
 drivers/scsi/ibmvscsi/ibmvfc.c                            | 4 ++++
 drivers/scsi/ibmvscsi/ibmvscsi.c                          | 2 ++
 drivers/scsi/ibmvscsi_tgt/ibmvscsi_tgt.c                  | 4 ++++
 drivers/scsi/imm.c                                        | 1 +
 drivers/scsi/ipr.c                                        | 3 +++
 drivers/scsi/ips.c                                        | 3 +++
 drivers/scsi/isci/host.c                                  | 1 +
 drivers/scsi/isci/isci.h                                  | 1 +
 drivers/scsi/isci/remote_node_context.c                   | 1 +
 drivers/scsi/isci/request.c                               | 1 +
 drivers/scsi/isci/unsolicited_frame_control.c             | 1 +
 drivers/scsi/iscsi_boot_sysfs.c                           | 2 ++
 drivers/scsi/libfc/fc_encode.h                            | 1 +
 drivers/scsi/libfc/fc_fcp.c                               | 1 +
 drivers/scsi/libfc/fc_lport.c                             | 1 +
 drivers/scsi/libiscsi.c                                   | 1 +
 drivers/scsi/libiscsi_tcp.c                               | 1 +
 drivers/scsi/libsas/sas_ata.c                             | 1 +
 drivers/scsi/libsas/sas_expander.c                        | 2 ++
 drivers/scsi/libsas/sas_init.c                            | 3 +++
 drivers/scsi/libsas/sas_scsi_host.c                       | 2 ++
 drivers/scsi/lpfc/lpfc_attr.c                             | 3 +++
 drivers/scsi/lpfc/lpfc_ct.c                               | 1 +
 drivers/scsi/lpfc/lpfc_debugfs.c                          | 2 ++
 drivers/scsi/lpfc/lpfc_els.c                              | 1 +
 drivers/scsi/lpfc/lpfc_hbadisc.c                          | 2 ++
 drivers/scsi/lpfc/lpfc_init.c                             | 2 ++
 drivers/scsi/lpfc/lpfc_nvme.c                             | 1 +
 drivers/scsi/lpfc/lpfc_nvmet.c                            | 1 +
 drivers/scsi/lpfc/lpfc_scsi.c                             | 1 +
 drivers/scsi/lpfc/lpfc_sli.c                              | 2 ++
 drivers/scsi/megaraid.c                                   | 2 ++
 drivers/scsi/megaraid/megaraid_sas_base.c                 | 2 ++
 drivers/scsi/megaraid/megaraid_sas_debugfs.c              | 1 +
 drivers/scsi/megaraid/megaraid_sas_fusion.c               | 2 ++
 drivers/scsi/mpi3mr/mpi3mr_app.c                          | 2 ++
 drivers/scsi/mpi3mr/mpi3mr_fw.c                           | 2 ++
 drivers/scsi/mpi3mr/mpi3mr_os.c                           | 2 ++
 drivers/scsi/mpi3mr/mpi3mr_transport.c                    | 1 +
 drivers/scsi/mpt3sas/mpt3sas_base.c                       | 2 ++
 drivers/scsi/mpt3sas/mpt3sas_config.c                     | 1 +
 drivers/scsi/mpt3sas/mpt3sas_ctl.c                        | 3 +++
 drivers/scsi/mpt3sas/mpt3sas_debugfs.c                    | 1 +
 drivers/scsi/mpt3sas/mpt3sas_scsih.c                      | 2 ++
 drivers/scsi/mpt3sas/mpt3sas_transport.c                  | 1 +
 drivers/scsi/mvsas/mv_init.c                              | 1 +
 drivers/scsi/myrb.c                                       | 3 +++
 drivers/scsi/myrs.c                                       | 3 +++
 drivers/scsi/ncr53c8xx.c                                  | 2 ++
 drivers/scsi/nsp32.c                                      | 1 +
 drivers/scsi/pcmcia/nsp_cs.c                              | 1 +
 drivers/scsi/pcmcia/qlogic_stub.c                         | 1 +
 drivers/scsi/pcmcia/sym53c500_cs.c                        | 2 ++
 drivers/scsi/pm8001/pm8001_ctl.c                          | 3 +++
 drivers/scsi/pm8001/pm8001_hwi.c                          | 3 +++
 drivers/scsi/pm8001/pm8001_init.c                         | 2 ++
 drivers/scsi/pm8001/pm8001_sas.c                          | 2 ++
 drivers/scsi/pm8001/pm80xx_hwi.c                          | 3 +++
 drivers/scsi/pmcraid.c                                    | 3 +++
 drivers/scsi/ppa.c                                        | 1 +
 drivers/scsi/qedf/qedf_attr.c                             | 2 ++
 drivers/scsi/qedf/qedf_dbg.c                              | 1 +
 drivers/scsi/qedf/qedf_debugfs.c                          | 2 ++
 drivers/scsi/qedf/qedf_fip.c                              | 1 +
 drivers/scsi/qedf/qedf_io.c                               | 1 +
 drivers/scsi/qedf/qedf_main.c                             | 2 ++
 drivers/scsi/qedi/qedi_debugfs.c                          | 1 +
 drivers/scsi/qedi/qedi_iscsi.c                            | 1 +
 drivers/scsi/qedi/qedi_main.c                             | 1 +
 drivers/scsi/qedi/qedi_sysfs.c                            | 1 +
 drivers/scsi/qla1280.c                                    | 3 +++
 drivers/scsi/qla2xxx/qla_attr.c                           | 2 ++
 drivers/scsi/qla2xxx/qla_bsg.c                            | 1 +
 drivers/scsi/qla2xxx/qla_dbg.c                            | 1 +
 drivers/scsi/qla2xxx/qla_dfs.c                            | 2 ++
 drivers/scsi/qla2xxx/qla_edif.c                           | 1 +
 drivers/scsi/qla2xxx/qla_gs.c                             | 2 ++
 drivers/scsi/qla2xxx/qla_init.c                           | 2 ++
 drivers/scsi/qla2xxx/qla_inline.h                         | 1 +
 drivers/scsi/qla2xxx/qla_iocb.c                           | 1 +
 drivers/scsi/qla2xxx/qla_isr.c                            | 2 ++
 drivers/scsi/qla2xxx/qla_mbx.c                            | 1 +
 drivers/scsi/qla2xxx/qla_mid.c                            | 1 +
 drivers/scsi/qla2xxx/qla_mr.c                             | 2 ++
 drivers/scsi/qla2xxx/qla_nvme.c                           | 1 +
 drivers/scsi/qla2xxx/qla_nx.c                             | 1 +
 drivers/scsi/qla2xxx/qla_os.c                             | 2 ++
 drivers/scsi/qla2xxx/qla_sup.c                            | 1 +
 drivers/scsi/qla2xxx/qla_tmpl.c                           | 1 +
 drivers/scsi/qla2xxx/tcm_qla2xxx.c                        | 2 ++
 drivers/scsi/qla4xxx/ql4_attr.c                           | 2 ++
 drivers/scsi/qla4xxx/ql4_bsg.c                            | 1 +
 drivers/scsi/qla4xxx/ql4_isr.c                            | 1 +
 drivers/scsi/qla4xxx/ql4_mbx.c                            | 1 +
 drivers/scsi/qla4xxx/ql4_nx.c                             | 1 +
 drivers/scsi/qla4xxx/ql4_os.c                             | 2 ++
 drivers/scsi/qlogicfas.c                                  | 1 +
 drivers/scsi/qlogicpti.c                                  | 1 +
 drivers/scsi/raid_class.c                                 | 1 +
 drivers/scsi/scsi_debug.c                                 | 2 ++
 drivers/scsi/scsi_devinfo.c                               | 1 +
 drivers/scsi/scsi_error.c                                 | 1 +
 drivers/scsi/scsi_lib.c                                   | 1 +
 drivers/scsi/scsi_logging.c                               | 1 +
 drivers/scsi/scsi_proc.c                                  | 2 ++
 drivers/scsi/scsi_scan.c                                  | 1 +
 drivers/scsi/scsi_sysfs.c                                 | 2 ++
 drivers/scsi/scsi_transport_fc.c                          | 2 ++
 drivers/scsi/scsi_transport_iscsi.c                       | 2 ++
 drivers/scsi/scsi_transport_sas.c                         | 1 +
 drivers/scsi/scsi_transport_spi.c                         | 2 ++
 drivers/scsi/scsi_transport_srp.c                         | 2 ++
 drivers/scsi/sd.c                                         | 2 ++
 drivers/scsi/ses.c                                        | 1 +
 drivers/scsi/sg.c                                         | 2 ++
 drivers/scsi/sim710.c                                     | 1 +
 drivers/scsi/smartpqi/smartpqi_init.c                     | 3 +++
 drivers/scsi/snic/snic_attrs.c                            | 1 +
 drivers/scsi/snic/snic_ctl.c                              | 1 +
 drivers/scsi/snic/snic_debugfs.c                          | 2 ++
 drivers/scsi/snic/snic_io.c                               | 1 +
 drivers/scsi/snic/snic_isr.c                              | 1 +
 drivers/scsi/snic/snic_main.c                             | 1 +
 drivers/scsi/snic/snic_scsi.c                             | 1 +
 drivers/scsi/snic/snic_trc.c                              | 1 +
 drivers/scsi/snic/vnic_dev.h                              | 1 +
 drivers/scsi/sr.c                                         | 1 +
 drivers/scsi/st.c                                         | 3 +++
 drivers/scsi/stex.c                                       | 1 +
 drivers/scsi/sym53c8xx_2/sym_glue.c                       | 3 +++
 drivers/scsi/virtio_scsi.c                                | 1 +
 drivers/scsi/vmw_pvscsi.c                                 | 2 ++
 drivers/scsi/wd33c93.c                                    | 1 +
 drivers/scsi/xen-scsifront.c                              | 1 +
 drivers/sh/intc/core.c                                    | 1 +
 drivers/sh/intc/userimask.c                               | 2 ++
 drivers/siox/siox-core.c                                  | 2 ++
 drivers/slimbus/core.c                                    | 2 ++
 drivers/slimbus/messaging.c                               | 1 +
 drivers/slimbus/qcom-ctrl.c                               | 1 +
 drivers/slimbus/qcom-ngd-ctrl.c                           | 1 +
 drivers/slimbus/sched.c                                   | 1 +
 drivers/slimbus/slimbus.h                                 | 1 +
 drivers/slimbus/stream.c                                  | 1 +
 drivers/soc/amlogic/meson-gx-socinfo.c                    | 1 +
 drivers/soc/amlogic/meson-mx-socinfo.c                    | 1 +
 drivers/soc/apple/mailbox.c                               | 1 +
 drivers/soc/apple/rtkit.c                                 | 1 +
 drivers/soc/aspeed/aspeed-socinfo.c                       | 1 +
 drivers/soc/atmel/soc.c                                   | 1 +
 drivers/soc/bcm/brcmstb/biuctrl.c                         | 1 +
 drivers/soc/bcm/brcmstb/common.c                          | 1 +
 drivers/soc/dove/pmu.c                                    | 1 +
 drivers/soc/fsl/guts.c                                    | 1 +
 drivers/soc/fsl/qbman/bman.c                              | 1 +
 drivers/soc/fsl/qbman/bman_ccsr.c                         | 1 +
 drivers/soc/fsl/qbman/dpaa_sys.c                          | 1 +
 drivers/soc/fsl/qbman/qman.c                              | 1 +
 drivers/soc/fsl/qbman/qman_ccsr.c                         | 1 +
 drivers/soc/fsl/qe/qe.c                                   | 1 +
 drivers/soc/fsl/qe/qmc.c                                  | 1 +
 drivers/soc/hisilicon/kunpeng_hccs.c                      | 2 ++
 drivers/soc/imx/soc-imx.c                                 | 1 +
 drivers/soc/imx/soc-imx8m.c                               | 1 +
 drivers/soc/ixp4xx/ixp4xx-qmgr.c                          | 1 +
 drivers/soc/mediatek/mtk-svs.c                            | 1 +
 drivers/soc/microchip/mpfs-sys-controller.c               | 1 +
 drivers/soc/nuvoton/wpcm450-soc.c                         | 1 +
 drivers/soc/qcom/apr.c                                    | 1 +
 drivers/soc/qcom/llcc-qcom.c                              | 1 +
 drivers/soc/qcom/mdt_loader.c                             | 1 +
 drivers/soc/qcom/pmic_glink_altmode.c                     | 1 +
 drivers/soc/qcom/qcom-geni-se.c                           | 1 +
 drivers/soc/qcom/qcom_aoss.c                              | 2 ++
 drivers/soc/qcom/rmtfs_mem.c                              | 1 +
 drivers/soc/qcom/rpmh-rsc.c                               | 1 +
 drivers/soc/qcom/rpmh.c                                   | 1 +
 drivers/soc/qcom/smd-rpm.c                                | 1 +
 drivers/soc/qcom/smsm.c                                   | 1 +
 drivers/soc/qcom/wcnss_ctrl.c                             | 1 +
 drivers/soc/renesas/r9a06g032-smp.c                       | 1 +
 drivers/soc/renesas/renesas-soc.c                         | 1 +
 drivers/soc/tegra/cbb/tegra234-cbb.c                      | 1 +
 drivers/soc/tegra/fuse/fuse-tegra.c                       | 1 +
 drivers/soc/tegra/pmc.c                                   | 1 +
 drivers/soc/ti/k3-ringacc.c                               | 1 +
 drivers/soc/ti/k3-socinfo.c                               | 1 +
 drivers/soc/ti/knav_qmss_acc.c                            | 1 +
 drivers/soc/ti/knav_qmss_queue.c                          | 1 +
 drivers/soc/ti/pruss.c                                    | 1 +
 drivers/soc/ti/smartreflex.c                              | 1 +
 drivers/soc/ti/wkup_m3_ipc.c                              | 1 +
 drivers/soc/ux500/ux500-soc-id.c                          | 3 +++
 drivers/soc/versatile/soc-integrator.c                    | 1 +
 drivers/soc/versatile/soc-realview.c                      | 1 +
 drivers/soc/xilinx/zynqmp_power.c                         | 1 +
 drivers/soundwire/amd_manager.c                           | 1 +
 drivers/soundwire/bus.c                                   | 2 ++
 drivers/soundwire/bus_type.c                              | 1 +
 drivers/soundwire/cadence_master.c                        | 2 ++
 drivers/soundwire/debugfs.c                               | 1 +
 drivers/soundwire/intel.c                                 | 1 +
 drivers/soundwire/intel_ace2x_debugfs.c                   | 1 +
 drivers/soundwire/intel_auxdevice.c                       | 2 ++
 drivers/soundwire/master.c                                | 1 +
 drivers/soundwire/mipi_disco.c                            | 1 +
 drivers/soundwire/slave.c                                 | 2 ++
 drivers/soundwire/stream.c                                | 2 ++
 drivers/soundwire/sysfs_slave.c                           | 1 +
 drivers/soundwire/sysfs_slave_dpn.c                       | 1 +
 drivers/spi/atmel-quadspi.c                               | 2 ++
 drivers/spi/spi-at91-usart.c                              | 1 +
 drivers/spi/spi-atmel.c                                   | 1 +
 drivers/spi/spi-bcm-qspi.c                                | 1 +
 drivers/spi/spi-bcm2835.c                                 | 1 +
 drivers/spi/spi-bcm2835aux.c                              | 1 +
 drivers/spi/spi-bcm63xx-hsspi.c                           | 3 +++
 drivers/spi/spi-bcm63xx.c                                 | 1 +
 drivers/spi/spi-bcmbca-hsspi.c                            | 3 +++
 drivers/spi/spi-davinci.c                                 | 1 +
 drivers/spi/spi-dw-core.c                                 | 1 +
 drivers/spi/spi-fsl-cpm.c                                 | 1 +
 drivers/spi/spi-fsl-dspi.c                                | 1 +
 drivers/spi/spi-fsl-espi.c                                | 1 +
 drivers/spi/spi-fsl-lib.c                                 | 1 +
 drivers/spi/spi-fsl-spi.c                                 | 1 +
 drivers/spi/spi-geni-qcom.c                               | 1 +
 drivers/spi/spi-hisi-kunpeng.c                            | 1 +
 drivers/spi/spi-intel.c                                   | 1 +
 drivers/spi/spi-meson-spicc.c                             | 2 ++
 drivers/spi/spi-microchip-core-qspi.c                     | 1 +
 drivers/spi/spi-mpc52xx.c                                 | 1 +
 drivers/spi/spi-mt65xx.c                                  | 1 +
 drivers/spi/spi-mtk-snfi.c                                | 1 +
 drivers/spi/spi-mxs.c                                     | 1 +
 drivers/spi/spi-npcm-pspi.c                               | 1 +
 drivers/spi/spi-oc-tiny.c                                 | 1 +
 drivers/spi/spi-omap2-mcspi.c                             | 2 ++
 drivers/spi/spi-pci1xxxx.c                                | 1 +
 drivers/spi/spi-pic32-sqi.c                               | 1 +
 drivers/spi/spi-pic32.c                                   | 1 +
 drivers/spi/spi-ppc4xx.c                                  | 1 +
 drivers/spi/spi-pxa2xx-pci.c                              | 1 +
 drivers/spi/spi-qup.c                                     | 1 +
 drivers/spi/spi-s3c64xx.c                                 | 2 ++
 drivers/spi/spi-sh.c                                      | 1 +
 drivers/spi/spi-sifive.c                                  | 1 +
 drivers/spi/spi-slave-mt27xx.c                            | 1 +
 drivers/spi/spi-sprd.c                                    | 1 +
 drivers/spi/spi-st-ssc4.c                                 | 1 +
 drivers/spi/spi-stm32-qspi.c                              | 1 +
 drivers/spi/spi-stm32.c                                   | 1 +
 drivers/spi/spi-sun4i.c                                   | 1 +
 drivers/spi/spi-sun6i.c                                   | 1 +
 drivers/spi/spi-sunplus-sp7021.c                          | 1 +
 drivers/spi/spi-synquacer.c                               | 2 ++
 drivers/spi/spi-ti-qspi.c                                 | 1 +
 drivers/spi/spi-tle62x0.c                                 | 2 ++
 drivers/spi/spi-topcliff-pch.c                            | 1 +
 drivers/spi/spi-uniphier.c                                | 1 +
 drivers/spi/spi-xilinx.c                                  | 1 +
 drivers/spi/spi-xlp.c                                     | 1 +
 drivers/spi/spi-zynq-qspi.c                               | 1 +
 drivers/spi/spi-zynqmp-gqspi.c                            | 1 +
 drivers/spi/spi.c                                         | 2 ++
 drivers/ssb/driver_chipcommon_pmu.c                       | 1 +
 drivers/ssb/host_soc.c                                    | 1 +
 drivers/ssb/main.c                                        | 1 +
 drivers/ssb/sprom.c                                       | 2 ++
 drivers/staging/axis-fifo/axis-fifo.c                     | 2 ++
 drivers/staging/fbtft/fb_ssd1351.c                        | 1 +
 drivers/staging/fbtft/fb_st7789v.c                        | 1 +
 drivers/staging/fbtft/fbtft-core.c                        | 1 +
 drivers/staging/fbtft/fbtft-sysfs.c                       | 2 ++
 drivers/staging/fieldbus/anybuss/arcx-anybus.c            | 1 +
 drivers/staging/fieldbus/anybuss/hms-profinet.c           | 1 +
 drivers/staging/fieldbus/anybuss/host.c                   | 1 +
 drivers/staging/fieldbus/dev_core.c                       | 1 +
 drivers/staging/gdm724x/gdm_lte.c                         | 1 +
 drivers/staging/greybus/arche-apb-ctrl.c                  | 1 +
 drivers/staging/greybus/arche-platform.c                  | 1 +
 drivers/staging/greybus/audio_codec.c                     | 1 +
 drivers/staging/greybus/audio_helper.c                    | 1 +
 drivers/staging/greybus/audio_manager_module.c            | 2 ++
 drivers/staging/greybus/audio_manager_sysfs.c             | 2 ++
 drivers/staging/greybus/audio_module.c                    | 1 +
 drivers/staging/greybus/audio_topology.c                  | 1 +
 drivers/staging/greybus/bootrom.c                         | 1 +
 drivers/staging/greybus/camera.c                          | 2 ++
 drivers/staging/greybus/fw-download.c                     | 1 +
 drivers/staging/greybus/gbphy.c                           | 1 +
 drivers/staging/greybus/hid.c                             | 1 +
 drivers/staging/greybus/i2c.c                             | 1 +
 drivers/staging/greybus/light.c                           | 2 ++
 drivers/staging/greybus/loopback.c                        | 1 +
 drivers/staging/greybus/power_supply.c                    | 1 +
 drivers/staging/greybus/vibrator.c                        | 1 +
 drivers/staging/iio/accel/adis16240.c                     | 1 +
 drivers/staging/iio/adc/ad7816.c                          | 2 ++
 drivers/staging/iio/addac/adt7316.c                       | 2 ++
 drivers/staging/iio/frequency/ad9832.c                    | 1 +
 drivers/staging/iio/frequency/ad9834.c                    | 2 ++
 drivers/staging/iio/impedance-analyzer/ad5933.c           | 2 ++
 drivers/staging/ks7010/ks7010_sdio.c                      | 1 +
 drivers/staging/ks7010/ks_hostif.c                        | 2 ++
 drivers/staging/ks7010/ks_wlan_net.c                      | 1 +
 drivers/staging/media/atomisp/pci/atomisp_csi2.c          | 1 +
 drivers/staging/media/atomisp/pci/atomisp_csi2_bridge.c   | 3 +++
 drivers/staging/media/atomisp/pci/atomisp_drvfs.c         | 1 +
 drivers/staging/media/atomisp/pci/atomisp_gmin_platform.c | 2 ++
 drivers/staging/media/atomisp/pci/atomisp_ioctl.c         | 1 +
 drivers/staging/media/atomisp/pci/atomisp_subdev.c        | 1 +
 drivers/staging/media/atomisp/pci/hmm/hmm.c               | 1 +
 drivers/staging/media/atomisp/pci/runtime/bufq/src/bufq.c | 1 +
 .../media/atomisp/pci/runtime/debug/src/ia_css_debug.c    | 1 +
 drivers/staging/media/av7110/av7110_ir.c                  | 1 +
 drivers/staging/media/deprecated/atmel/atmel-isc-base.c   | 1 +
 drivers/staging/media/imx/imx-ic-prpencvf.c               | 1 +
 drivers/staging/media/imx/imx-media-capture.c             | 1 +
 drivers/staging/media/imx/imx-media-csc-scaler.c          | 1 +
 drivers/staging/media/imx/imx-media-csi.c                 | 1 +
 drivers/staging/media/imx/imx-media-dev-common.c          | 1 +
 drivers/staging/media/imx/imx-media-fim.c                 | 1 +
 drivers/staging/media/imx/imx-media-utils.c               | 1 +
 drivers/staging/media/ipu3/ipu3-v4l2.c                    | 1 +
 drivers/staging/media/omap4iss/iss_csi2.c                 | 1 +
 drivers/staging/media/omap4iss/iss_video.c                | 1 +
 drivers/staging/media/rkvdec/rkvdec.c                     | 1 +
 drivers/staging/media/starfive/camss/stf-isp.c            | 1 +
 drivers/staging/media/sunxi/cedrus/cedrus.c               | 1 +
 drivers/staging/media/sunxi/cedrus/cedrus_video.c         | 1 +
 drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_capture.c | 1 +
 drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_params.c  | 1 +
 drivers/staging/media/tegra-video/csi.c                   | 1 +
 drivers/staging/media/tegra-video/vi.c                    | 1 +
 drivers/staging/media/tegra-video/vip.c                   | 1 +
 drivers/staging/most/dim2/dim2.c                          | 2 ++
 drivers/staging/most/i2c/i2c.c                            | 2 ++
 drivers/staging/most/video/video.c                        | 1 +
 drivers/staging/olpc_dcon/olpc_dcon.c                     | 2 ++
 drivers/staging/pi433/pi433_if.c                          | 1 +
 drivers/staging/rtl8192e/rtllib.h                         | 1 +
 drivers/staging/rtl8192e/rtllib_rx.c                      | 1 +
 drivers/staging/rtl8192e/rtllib_softmac_wx.c              | 1 +
 drivers/staging/rtl8192e/rtllib_wx.c                      | 1 +
 drivers/staging/rtl8712/hal_init.c                        | 1 +
 drivers/staging/rtl8712/mlme_linux.c                      | 1 +
 drivers/staging/rtl8712/os_intfs.c                        | 1 +
 drivers/staging/rtl8712/rtl8712_cmd.c                     | 1 +
 drivers/staging/rtl8712/rtl871x_cmd.c                     | 1 +
 drivers/staging/rtl8712/rtl871x_ioctl_linux.c             | 1 +
 drivers/staging/rtl8712/rtl871x_pwrctrl.c                 | 1 +
 drivers/staging/rtl8712/usb_intf.c                        | 2 ++
 drivers/staging/rtl8712/usb_ops_linux.c                   | 1 +
 drivers/staging/rtl8712/xmit_linux.c                      | 1 +
 drivers/staging/rtl8723bs/core/rtw_cmd.c                  | 1 +
 drivers/staging/rtl8723bs/core/rtw_mlme_ext.c             | 1 +
 drivers/staging/rtl8723bs/core/rtw_pwrctrl.c              | 2 ++
 drivers/staging/rtl8723bs/core/rtw_wlan_util.c            | 1 +
 drivers/staging/rtl8723bs/core/rtw_xmit.c                 | 1 +
 drivers/staging/rtl8723bs/hal/hal_com.c                   | 1 +
 drivers/staging/rtl8723bs/hal/rtl8723b_hal_init.c         | 1 +
 drivers/staging/rtl8723bs/hal/rtl8723bs_xmit.c            | 1 +
 drivers/staging/rtl8723bs/hal/sdio_ops.c                  | 1 +
 drivers/staging/rtl8723bs/include/osdep_service.h         | 1 +
 drivers/staging/rtl8723bs/os_dep/mlme_linux.c             | 1 +
 drivers/staging/rtl8723bs/os_dep/os_intfs.c               | 2 ++
 drivers/staging/rtl8723bs/os_dep/xmit_linux.c             | 1 +
 drivers/staging/rts5208/rtsx.c                            | 2 ++
 drivers/staging/rts5208/rtsx_transport.c                  | 1 +
 .../staging/vc04_services/bcm2835-camera/bcm2835-camera.c | 2 ++
 .../staging/vc04_services/interface/vchiq_arm/vchiq_arm.c | 2 ++
 .../vc04_services/interface/vchiq_arm/vchiq_core.c        | 2 ++
 .../vc04_services/interface/vchiq_arm/vchiq_debugfs.c     | 1 +
 .../staging/vc04_services/interface/vchiq_arm/vchiq_dev.c | 1 +
 drivers/staging/vme_user/vme_tsi148.c                     | 1 +
 drivers/staging/wlan-ng/hfa384x_usb.c                     | 1 +
 drivers/staging/wlan-ng/prism2usb.c                       | 1 +
 drivers/target/iscsi/cxgbit/cxgbit_cm.c                   | 1 +
 drivers/target/iscsi/cxgbit/cxgbit_target.c               | 2 ++
 drivers/target/iscsi/iscsi_target.c                       | 2 ++
 drivers/target/iscsi/iscsi_target_auth.c                  | 3 +++
 drivers/target/iscsi/iscsi_target_configfs.c              | 2 ++
 drivers/target/iscsi/iscsi_target_erl0.c                  | 2 ++
 drivers/target/iscsi/iscsi_target_erl1.c                  | 1 +
 drivers/target/iscsi/iscsi_target_login.c                 | 3 +++
 drivers/target/iscsi/iscsi_target_nego.c                  | 1 +
 drivers/target/iscsi/iscsi_target_parameters.c            | 2 ++
 drivers/target/iscsi/iscsi_target_stat.c                  | 1 +
 drivers/target/iscsi/iscsi_target_tpg.c                   | 3 +++
 drivers/target/iscsi/iscsi_target_util.c                  | 1 +
 drivers/target/loopback/tcm_loop.c                        | 3 +++
 drivers/target/sbp/sbp_target.c                           | 2 ++
 drivers/target/target_core_alua.c                         | 3 +++
 drivers/target/target_core_configfs.c                     | 1 +
 drivers/target/target_core_device.c                       | 1 +
 drivers/target/target_core_fabric_configfs.c              | 2 ++
 drivers/target/target_core_fabric_lib.c                   | 2 ++
 drivers/target/target_core_file.c                         | 3 +++
 drivers/target/target_core_iblock.c                       | 2 ++
 drivers/target/target_core_pr.c                           | 1 +
 drivers/target/target_core_pscsi.c                        | 2 ++
 drivers/target/target_core_rd.c                           | 2 ++
 drivers/target/target_core_spc.c                          | 1 +
 drivers/target/target_core_stat.c                         | 1 +
 drivers/target/target_core_tpg.c                          | 2 ++
 drivers/target/target_core_transport.c                    | 2 ++
 drivers/target/target_core_user.c                         | 3 +++
 drivers/target/target_core_xcopy.c                        | 2 ++
 drivers/target/tcm_fc/tfc_conf.c                          | 2 ++
 drivers/target/tcm_remote/tcm_remote.c                    | 2 ++
 drivers/tee/amdtee/call.c                                 | 1 +
 drivers/tee/amdtee/core.c                                 | 1 +
 drivers/tee/optee/call.c                                  | 1 +
 drivers/tee/optee/notif.c                                 | 1 +
 drivers/tee/optee/supp.c                                  | 1 +
 drivers/tee/tee_core.c                                    | 3 +++
 drivers/thermal/cpufreq_cooling.c                         | 1 +
 drivers/thermal/cpuidle_cooling.c                         | 1 +
 drivers/thermal/devfreq_cooling.c                         | 2 ++
 drivers/thermal/gov_user_space.c                          | 2 ++
 drivers/thermal/intel/int340x_thermal/int3400_thermal.c   | 3 +++
 .../intel/int340x_thermal/processor_thermal_device.c      | 2 ++
 .../intel/int340x_thermal/processor_thermal_rfim.c        | 2 ++
 .../intel/int340x_thermal/processor_thermal_wt_hint.c     | 1 +
 .../intel/int340x_thermal/processor_thermal_wt_req.c      | 1 +
 drivers/thermal/intel/intel_bxt_pmic_thermal.c            | 1 +
 drivers/thermal/intel/intel_powerclamp.c                  | 2 ++
 drivers/thermal/intel/intel_soc_dts_iosf.c                | 1 +
 drivers/thermal/intel/therm_throt.c                       | 2 ++
 drivers/thermal/mediatek/lvts_thermal.c                   | 1 +
 drivers/thermal/qcom/tsens.c                              | 1 +
 drivers/thermal/tegra/tegra-bpmp-thermal.c                | 1 +
 drivers/thermal/thermal-generic-adc.c                     | 1 +
 drivers/thermal/thermal_core.c                            | 2 ++
 drivers/thermal/thermal_debugfs.c                         | 1 +
 drivers/thermal/thermal_hwmon.c                           | 1 +
 drivers/thermal/thermal_sysfs.c                           | 2 ++
 drivers/thunderbolt/ctl.c                                 | 1 +
 drivers/thunderbolt/debugfs.c                             | 2 ++
 drivers/thunderbolt/domain.c                              | 1 +
 drivers/thunderbolt/icm.c                                 | 2 ++
 drivers/thunderbolt/retimer.c                             | 1 +
 drivers/thunderbolt/switch.c                              | 6 ++++++
 drivers/thunderbolt/test.c                                | 1 +
 drivers/thunderbolt/usb4_port.c                           | 1 +
 drivers/thunderbolt/xdomain.c                             | 2 ++
 drivers/tty/hvc/hvc_iucv.c                                | 2 ++
 drivers/tty/hvc/hvc_xen.c                                 | 2 ++
 drivers/tty/hvc/hvcs.c                                    | 2 ++
 drivers/tty/ipwireless/hardware.c                         | 1 +
 drivers/tty/mips_ejtag_fdc.c                              | 1 +
 drivers/tty/moxa.c                                        | 1 +
 drivers/tty/n_gsm.c                                       | 1 +
 drivers/tty/nozomi.c                                      | 1 +
 drivers/tty/rpmsg_tty.c                                   | 1 +
 drivers/tty/serdev/core.c                                 | 1 +
 drivers/tty/serial/8250/8250_aspeed_vuart.c               | 1 +
 drivers/tty/serial/8250/8250_bcm7271.c                    | 2 ++
 drivers/tty/serial/8250/8250_port.c                       | 2 ++
 drivers/tty/serial/amba-pl011.c                           | 1 +
 drivers/tty/serial/earlycon.c                             | 1 +
 drivers/tty/serial/imx.c                                  | 1 +
 drivers/tty/serial/max3100.c                              | 1 +
 drivers/tty/serial/msm_serial.c                           | 1 +
 drivers/tty/serial/omap-serial.c                          | 1 +
 drivers/tty/serial/pch_uart.c                             | 1 +
 drivers/tty/serial/pic32_uart.c                           | 1 +
 drivers/tty/serial/pmac_zilog.c                           | 1 +
 drivers/tty/serial/pxa.c                                  | 1 +
 drivers/tty/serial/samsung_tty.c                          | 1 +
 drivers/tty/serial/serial_base.h                          | 2 ++
 drivers/tty/serial/serial_core.c                          | 2 ++
 drivers/tty/serial/serial_mctrl_gpio.c                    | 1 +
 drivers/tty/serial/sh-sci.c                               | 3 +++
 drivers/tty/serial/sprd_serial.c                          | 1 +
 drivers/tty/serial/suncore.c                              | 1 +
 drivers/tty/serial/sunsab.c                               | 1 +
 drivers/tty/serial/ucc_uart.c                             | 1 +
 drivers/tty/serial/vt8500_serial.c                        | 1 +
 drivers/tty/serial/xilinx_uartps.c                        | 1 +
 drivers/tty/synclink_gt.c                                 | 1 +
 drivers/tty/sysrq.c                                       | 1 +
 drivers/tty/tty_io.c                                      | 2 ++
 drivers/tty/vcc.c                                         | 1 +
 drivers/tty/vt/vt.c                                       | 2 ++
 drivers/ufs/core/ufs-debugfs.c                            | 1 +
 drivers/ufs/core/ufs-mcq.c                                | 1 +
 drivers/ufs/core/ufs-sysfs.c                              | 1 +
 drivers/ufs/core/ufshcd-crypto.h                          | 3 +++
 drivers/ufs/core/ufshcd.c                                 | 4 ++++
 drivers/ufs/host/ufs-exynos.c                             | 1 +
 drivers/ufs/host/ufs-mediatek.c                           | 1 +
 drivers/ufs/host/ufshcd-pltfrm.c                          | 1 +
 drivers/uio/uio.c                                         | 1 +
 drivers/uio/uio_fsl_elbc_gpcm.c                           | 2 ++
 drivers/uio/uio_hv_generic.c                              | 1 +
 drivers/usb/atm/cxacru.c                                  | 2 ++
 drivers/usb/atm/speedtch.c                                | 1 +
 drivers/usb/atm/usbatm.c                                  | 2 ++
 drivers/usb/c67x00/c67x00-hcd.c                           | 1 +
 drivers/usb/c67x00/c67x00-ll-hpi.c                        | 1 +
 drivers/usb/c67x00/c67x00-sched.c                         | 1 +
 drivers/usb/cdns3/cdns3-debug.h                           | 1 +
 drivers/usb/cdns3/cdns3-ep0.c                             | 2 ++
 drivers/usb/cdns3/cdns3-gadget.c                          | 3 +++
 drivers/usb/cdns3/cdnsp-debug.h                           | 2 ++
 drivers/usb/cdns3/cdnsp-gadget.c                          | 1 +
 drivers/usb/cdns3/cdnsp-ring.c                            | 1 +
 drivers/usb/chipidea/core.c                               | 1 +
 drivers/usb/chipidea/debug.c                              | 1 +
 drivers/usb/chipidea/otg_fsm.c                            | 2 ++
 drivers/usb/chipidea/udc.c                                | 1 +
 drivers/usb/class/cdc-acm.c                               | 1 +
 drivers/usb/class/usblp.c                                 | 1 +
 drivers/usb/class/usbtmc.c                                | 1 +
 drivers/usb/common/debug.c                                | 1 +
 drivers/usb/common/ulpi.c                                 | 1 +
 drivers/usb/core/buffer.c                                 | 1 +
 drivers/usb/core/devices.c                                | 1 +
 drivers/usb/core/devio.c                                  | 1 +
 drivers/usb/core/driver.c                                 | 1 +
 drivers/usb/core/endpoint.c                               | 1 +
 drivers/usb/core/file.c                                   | 1 +
 drivers/usb/core/hcd.c                                    | 3 +++
 drivers/usb/core/hub.c                                    | 1 +
 drivers/usb/core/ledtrig-usbport.c                        | 1 +
 drivers/usb/core/message.c                                | 1 +
 drivers/usb/core/port.c                                   | 1 +
 drivers/usb/core/quirks.c                                 | 1 +
 drivers/usb/core/sysfs.c                                  | 1 +
 drivers/usb/core/urb.c                                    | 1 +
 drivers/usb/core/usb.c                                    | 1 +
 drivers/usb/dwc2/debugfs.c                                | 1 +
 drivers/usb/dwc2/gadget.c                                 | 1 +
 drivers/usb/dwc2/hcd_queue.c                              | 2 ++
 drivers/usb/dwc3/core.c                                   | 1 +
 drivers/usb/dwc3/debug.h                                  | 1 +
 drivers/usb/dwc3/debugfs.c                                | 1 +
 drivers/usb/dwc3/dwc3-qcom.c                              | 1 +
 drivers/usb/dwc3/ep0.c                                    | 1 +
 drivers/usb/dwc3/gadget.c                                 | 2 ++
 drivers/usb/early/ehci-dbgp.c                             | 1 +
 drivers/usb/early/xhci-dbc.c                              | 2 ++
 drivers/usb/fotg210/fotg210-hcd.c                         | 3 +++
 drivers/usb/gadget/composite.c                            | 2 ++
 drivers/usb/gadget/configfs.c                             | 2 ++
 drivers/usb/gadget/epautoconf.c                           | 1 +
 drivers/usb/gadget/function/f_acm.c                       | 2 ++
 drivers/usb/gadget/function/f_fs.c                        | 2 ++
 drivers/usb/gadget/function/f_hid.c                       | 1 +
 drivers/usb/gadget/function/f_loopback.c                  | 2 ++
 drivers/usb/gadget/function/f_mass_storage.c              | 1 +
 drivers/usb/gadget/function/f_midi.c                      | 2 ++
 drivers/usb/gadget/function/f_midi2.c                     | 2 ++
 drivers/usb/gadget/function/f_ncm.c                       | 2 ++
 drivers/usb/gadget/function/f_obex.c                      | 1 +
 drivers/usb/gadget/function/f_printer.c                   | 2 ++
 drivers/usb/gadget/function/f_serial.c                    | 1 +
 drivers/usb/gadget/function/f_sourcesink.c                | 2 ++
 drivers/usb/gadget/function/f_tcm.c                       | 3 +++
 drivers/usb/gadget/function/f_uac1.c                      | 2 ++
 drivers/usb/gadget/function/f_uac1_legacy.c               | 2 ++
 drivers/usb/gadget/function/f_uac2.c                      | 2 ++
 drivers/usb/gadget/function/f_uvc.c                       | 1 +
 drivers/usb/gadget/function/rndis.c                       | 1 +
 drivers/usb/gadget/function/storage_common.c              | 1 +
 drivers/usb/gadget/function/u_audio.c                     | 1 +
 drivers/usb/gadget/function/u_ether.c                     | 1 +
 drivers/usb/gadget/function/u_serial.c                    | 2 ++
 drivers/usb/gadget/function/uvc_configfs.c                | 3 +++
 drivers/usb/gadget/legacy/inode.c                         | 1 +
 drivers/usb/gadget/legacy/raw_gadget.c                    | 3 +++
 drivers/usb/gadget/udc/aspeed-vhub/epn.c                  | 1 +
 drivers/usb/gadget/udc/atmel_usba_udc.c                   | 1 +
 drivers/usb/gadget/udc/bcm63xx_udc.c                      | 1 +
 drivers/usb/gadget/udc/bdc/bdc_cmd.c                      | 1 +
 drivers/usb/gadget/udc/bdc/bdc_ep.c                       | 1 +
 drivers/usb/gadget/udc/cdns2/cdns2-debug.h                | 2 ++
 drivers/usb/gadget/udc/cdns2/cdns2-ep0.c                  | 1 +
 drivers/usb/gadget/udc/cdns2/cdns2-gadget.c               | 2 ++
 drivers/usb/gadget/udc/core.c                             | 2 ++
 drivers/usb/gadget/udc/dummy_hcd.c                        | 1 +
 drivers/usb/gadget/udc/fsl_qe_udc.c                       | 1 +
 drivers/usb/gadget/udc/fsl_udc_core.c                     | 2 ++
 drivers/usb/gadget/udc/fsl_usb2_udc.h                     | 1 +
 drivers/usb/gadget/udc/m66592-udc.c                       | 1 +
 drivers/usb/gadget/udc/max3420_udc.c                      | 3 +++
 drivers/usb/gadget/udc/mv_u3d_core.c                      | 1 +
 drivers/usb/gadget/udc/mv_udc_core.c                      | 2 ++
 drivers/usb/gadget/udc/net2272.c                          | 1 +
 drivers/usb/gadget/udc/net2280.c                          | 1 +
 drivers/usb/gadget/udc/omap_udc.c                         | 2 ++
 drivers/usb/gadget/udc/pxa27x_udc.h                       | 1 +
 drivers/usb/gadget/udc/r8a66597-udc.c                     | 1 +
 drivers/usb/gadget/udc/renesas_usb3.c                     | 1 +
 drivers/usb/gadget/udc/snps_udc_core.c                    | 2 ++
 drivers/usb/gadget/udc/tegra-xudc.c                       | 1 +
 drivers/usb/gadget/udc/udc-xilinx.c                       | 2 ++
 drivers/usb/host/fhci-sched.c                             | 1 +
 drivers/usb/host/isp1362-hcd.c                            | 1 +
 drivers/usb/host/max3421-hcd.c                            | 1 +
 drivers/usb/host/ohci-pxa27x.c                            | 1 +
 drivers/usb/host/ohci-q.c                                 | 1 +
 drivers/usb/host/oxu210hp-hcd.c                           | 2 ++
 drivers/usb/host/r8a66597-hcd.c                           | 1 +
 drivers/usb/host/uhci-debug.c                             | 1 +
 drivers/usb/host/xen-hcd.c                                | 1 +
 drivers/usb/host/xhci-dbgcap.c                            | 2 ++
 drivers/usb/host/xhci-debugfs.c                           | 1 +
 drivers/usb/host/xhci-hub.c                               | 1 +
 drivers/usb/host/xhci-mem.c                               | 1 +
 drivers/usb/host/xhci-mtk-sch.c                           | 1 +
 drivers/usb/host/xhci-pci.c                               | 1 +
 drivers/usb/host/xhci-ring.c                              | 2 ++
 drivers/usb/host/xhci-tegra.c                             | 1 +
 drivers/usb/host/xhci.c                                   | 2 ++
 drivers/usb/host/xhci.h                                   | 1 +
 drivers/usb/isp1760/isp1760-hcd.c                         | 1 +
 drivers/usb/isp1760/isp1760-udc.c                         | 2 ++
 drivers/usb/misc/appledisplay.c                           | 1 +
 drivers/usb/misc/chaoskey.c                               | 1 +
 drivers/usb/misc/cypress_cy7c63.c                         | 1 +
 drivers/usb/misc/cytherm.c                                | 2 ++
 drivers/usb/misc/iowarrior.c                              | 1 +
 drivers/usb/misc/legousbtower.c                           | 1 +
 drivers/usb/misc/lvstest.c                                | 1 +
 drivers/usb/misc/onboard_usb_hub.c                        | 2 ++
 drivers/usb/misc/qcom_eud.c                               | 1 +
 drivers/usb/misc/trancevibrator.c                         | 2 ++
 drivers/usb/misc/usb-ljca.c                               | 2 ++
 drivers/usb/misc/usblcd.c                                 | 1 +
 drivers/usb/misc/usbsevseg.c                              | 2 ++
 drivers/usb/misc/usbtest.c                                | 1 +
 drivers/usb/misc/yurex.c                                  | 2 ++
 drivers/usb/mon/mon_stat.c                                | 1 +
 drivers/usb/mon/mon_text.c                                | 1 +
 drivers/usb/mtu3/mtu3_debugfs.c                           | 2 ++
 drivers/usb/mtu3/mtu3_gadget.c                            | 1 +
 drivers/usb/mtu3/mtu3_qmu.c                               | 1 +
 drivers/usb/musb/musb_core.c                              | 1 +
 drivers/usb/musb/musb_cppi41.c                            | 2 ++
 drivers/usb/musb/musb_dsps.c                              | 1 +
 drivers/usb/musb/musb_gadget.c                            | 1 +
 drivers/usb/musb/tusb6010_omap.c                          | 1 +
 drivers/usb/phy/phy-mv-usb.c                              | 1 +
 drivers/usb/phy/phy-tahvo.c                               | 1 +
 drivers/usb/phy/phy.c                                     | 1 +
 drivers/usb/renesas_usbhs/fifo.c                          | 1 +
 drivers/usb/renesas_usbhs/mod_gadget.c                    | 1 +
 drivers/usb/renesas_usbhs/mod_host.c                      | 1 +
 drivers/usb/roles/class.c                                 | 2 ++
 drivers/usb/serial/console.c                              | 1 +
 drivers/usb/serial/ftdi_sio.c                             | 2 ++
 drivers/usb/serial/io_ti.c                                | 2 ++
 drivers/usb/serial/iuu_phoenix.c                          | 2 ++
 drivers/usb/serial/mos7720.c                              | 1 +
 drivers/usb/serial/mxuport.c                              | 1 +
 drivers/usb/serial/ti_usb_3410_5052.c                     | 1 +
 drivers/usb/serial/usb-serial.c                           | 1 +
 drivers/usb/storage/onetouch.c                            | 1 +
 drivers/usb/storage/scsiglue.c                            | 2 ++
 drivers/usb/storage/sddr09.c                              | 1 +
 drivers/usb/storage/transport.c                           | 1 +
 drivers/usb/storage/uas.c                                 | 1 +
 drivers/usb/storage/usb.c                                 | 3 +++
 drivers/usb/typec/altmodes/displayport.c                  | 1 +
 drivers/usb/typec/bus.c                                   | 1 +
 drivers/usb/typec/class.c                                 | 2 ++
 drivers/usb/typec/class.h                                 | 1 +
 drivers/usb/typec/mux/intel_pmc_mux.c                     | 1 +
 drivers/usb/typec/pd.c                                    | 1 +
 drivers/usb/typec/tcpm/fusb302.c                          | 1 +
 drivers/usb/typec/tcpm/tcpm.c                             | 1 +
 drivers/usb/typec/ucsi/ucsi.c                             | 1 +
 drivers/usb/typec/ucsi/ucsi_acpi.c                        | 1 +
 drivers/usb/typec/ucsi/ucsi_ccg.c                         | 3 +++
 drivers/usb/typec/ucsi/ucsi_glink.c                       | 1 +
 drivers/usb/typec/ucsi/ucsi_stm32g0.c                     | 1 +
 drivers/usb/usbip/stub_dev.c                              | 1 +
 drivers/usb/usbip/stub_main.c                             | 1 +
 drivers/usb/usbip/usbip_common.c                          | 1 +
 drivers/usb/usbip/vhci_hcd.c                              | 1 +
 drivers/usb/usbip/vhci_sysfs.c                            | 2 ++
 drivers/usb/usbip/vudc_dev.c                              | 1 +
 drivers/usb/usbip/vudc_sysfs.c                            | 1 +
 drivers/vdpa/alibaba/eni_vdpa.c                           | 1 +
 drivers/vdpa/ifcvf/ifcvf_main.c                           | 1 +
 drivers/vdpa/mlx5/net/debug.c                             | 1 +
 drivers/vdpa/mlx5/net/mlx5_vnet.c                         | 1 +
 drivers/vdpa/pds/debugfs.c                                | 1 +
 drivers/vdpa/pds/vdpa_dev.c                               | 1 +
 drivers/vdpa/solidrun/snet_hwmon.c                        | 1 +
 drivers/vdpa/solidrun/snet_main.c                         | 1 +
 drivers/vdpa/vdpa.c                                       | 1 +
 drivers/vdpa/vdpa_user/vduse_dev.c                        | 2 ++
 drivers/vdpa/virtio_pci/vp_vdpa.c                         | 1 +
 drivers/vfio/device_cdev.c                                | 1 +
 drivers/vfio/fsl-mc/vfio_fsl_mc.c                         | 1 +
 drivers/vfio/fsl-mc/vfio_fsl_mc_intr.c                    | 1 +
 drivers/vfio/group.c                                      | 2 ++
 drivers/vfio/mdev/mdev_sysfs.c                            | 3 +++
 drivers/vfio/pci/mlx5/cmd.c                               | 2 ++
 drivers/vfio/pci/mlx5/main.c                              | 2 ++
 drivers/vfio/pci/pds/cmds.c                               | 1 +
 drivers/vfio/pci/vfio_pci.c                               | 1 +
 drivers/vfio/pci/vfio_pci_core.c                          | 1 +
 drivers/vfio/pci/vfio_pci_intrs.c                         | 1 +
 drivers/vfio/platform/vfio_amba.c                         | 1 +
 drivers/vfio/platform/vfio_platform_irq.c                 | 1 +
 drivers/vfio/vfio_main.c                                  | 2 ++
 drivers/vhost/scsi.c                                      | 3 +++
 drivers/vhost/vdpa.c                                      | 1 +
 drivers/vhost/vhost.c                                     | 2 ++
 drivers/video/backlight/88pm860x_bl.c                     | 1 +
 drivers/video/backlight/adp5520_bl.c                      | 2 ++
 drivers/video/backlight/adp8860_bl.c                      | 2 ++
 drivers/video/backlight/adp8870_bl.c                      | 2 ++
 drivers/video/backlight/backlight.c                       | 2 ++
 drivers/video/backlight/lcd.c                             | 2 ++
 drivers/video/backlight/lm3533_bl.c                       | 2 ++
 drivers/video/backlight/lm3639_bl.c                       | 1 +
 drivers/video/backlight/lp855x_bl.c                       | 1 +
 drivers/video/backlight/lp8788_bl.c                       | 1 +
 drivers/video/backlight/sky81452-backlight.c              | 2 ++
 drivers/video/fbdev/acornfb.c                             | 1 +
 drivers/video/fbdev/amifb.c                               | 1 +
 drivers/video/fbdev/atafb.c                               | 2 ++
 drivers/video/fbdev/aty/aty128fb.c                        | 2 ++
 drivers/video/fbdev/aty/atyfb_base.c                      | 2 ++
 drivers/video/fbdev/aty/radeon_backlight.c                | 1 +
 drivers/video/fbdev/aty/radeon_base.c                     | 2 ++
 drivers/video/fbdev/aty/radeon_i2c.c                      | 1 +
 drivers/video/fbdev/aty/radeon_monitor.c                  | 1 +
 drivers/video/fbdev/au1200fb.c                            | 1 +
 drivers/video/fbdev/cg14.c                                | 1 +
 drivers/video/fbdev/cg3.c                                 | 2 ++
 drivers/video/fbdev/cg6.c                                 | 1 +
 drivers/video/fbdev/controlfb.c                           | 1 +
 drivers/video/fbdev/core/fbcon.c                          | 1 +
 drivers/video/fbdev/core/fbcvt.c                          | 1 +
 drivers/video/fbdev/core/fbsysfs.c                        | 2 ++
 drivers/video/fbdev/core/modedb.c                         | 1 +
 drivers/video/fbdev/cyber2000fb.c                         | 1 +
 drivers/video/fbdev/efifb.c                               | 2 ++
 drivers/video/fbdev/fsl-diu-fb.c                          | 2 ++
 drivers/video/fbdev/geode/gx1fb_core.c                    | 1 +
 drivers/video/fbdev/grvga.c                               | 1 +
 drivers/video/fbdev/hyperv_fb.c                           | 2 ++
 drivers/video/fbdev/i740fb.c                              | 1 +
 drivers/video/fbdev/i810/i810_main.c                      | 1 +
 drivers/video/fbdev/imsttfb.c                             | 2 ++
 drivers/video/fbdev/leo.c                                 | 1 +
 drivers/video/fbdev/matrox/i2c-matroxfb.c                 | 1 +
 drivers/video/fbdev/matrox/matroxfb_base.c                | 2 ++
 drivers/video/fbdev/matrox/matroxfb_g450.c                | 1 +
 drivers/video/fbdev/matrox/matroxfb_maven.c               | 1 +
 drivers/video/fbdev/mb862xx/mb862xxfbdrv.c                | 1 +
 drivers/video/fbdev/mmp/hw/mmp_spi.c                      | 1 +
 drivers/video/fbdev/nvidia/nv_backlight.c                 | 1 +
 drivers/video/fbdev/nvidia/nvidia.c                       | 2 ++
 drivers/video/fbdev/offb.c                                | 1 +
 drivers/video/fbdev/omap/hwa742.c                         | 1 +
 drivers/video/fbdev/omap/lcdc.c                           | 1 +
 drivers/video/fbdev/omap/omapfb_main.c                    | 2 ++
 drivers/video/fbdev/omap2/omapfb/displays/panel-dsi-cm.c  | 1 +
 .../fbdev/omap2/omapfb/displays/panel-sony-acx565akm.c    | 1 +
 .../fbdev/omap2/omapfb/displays/panel-tpo-td043mtea1.c    | 2 ++
 drivers/video/fbdev/omap2/omapfb/dss/apply.c              | 1 +
 drivers/video/fbdev/omap2/omapfb/dss/dispc-compat.c       | 1 +
 drivers/video/fbdev/omap2/omapfb/dss/display-sysfs.c      | 1 +
 drivers/video/fbdev/omap2/omapfb/dss/display.c            | 1 +
 drivers/video/fbdev/omap2/omapfb/dss/dsi.c                | 2 ++
 drivers/video/fbdev/omap2/omapfb/dss/manager-sysfs.c      | 1 +
 drivers/video/fbdev/omap2/omapfb/dss/overlay-sysfs.c      | 1 +
 drivers/video/fbdev/omap2/omapfb/dss/pll.c                | 1 +
 drivers/video/fbdev/omap2/omapfb/omapfb-main.c            | 2 ++
 drivers/video/fbdev/omap2/omapfb/omapfb-sysfs.c           | 2 ++
 drivers/video/fbdev/p9100.c                               | 1 +
 drivers/video/fbdev/platinumfb.c                          | 1 +
 drivers/video/fbdev/pm2fb.c                               | 1 +
 drivers/video/fbdev/pm3fb.c                               | 1 +
 drivers/video/fbdev/pmagb-b-fb.c                          | 1 +
 drivers/video/fbdev/ps3fb.c                               | 1 +
 drivers/video/fbdev/pxafb.c                               | 3 +++
 drivers/video/fbdev/riva/fbdev.c                          | 2 ++
 drivers/video/fbdev/s3fb.c                                | 1 +
 drivers/video/fbdev/savage/savagefb_driver.c              | 1 +
 drivers/video/fbdev/sh_mobile_lcdcfb.c                    | 3 +++
 drivers/video/fbdev/sis/sis_main.c                        | 2 ++
 drivers/video/fbdev/sm501fb.c                             | 1 +
 drivers/video/fbdev/sm712fb.c                             | 1 +
 drivers/video/fbdev/ssd1307fb.c                           | 1 +
 drivers/video/fbdev/sstfb.c                               | 2 ++
 drivers/video/fbdev/stifb.c                               | 2 ++
 drivers/video/fbdev/tdfxfb.c                              | 1 +
 drivers/video/fbdev/tridentfb.c                           | 1 +
 drivers/video/fbdev/uvesafb.c                             | 2 ++
 drivers/video/fbdev/valkyriefb.c                          | 1 +
 drivers/video/fbdev/vesafb.c                              | 1 +
 drivers/video/fbdev/via/via-core.c                        | 1 +
 drivers/video/fbdev/via/via_i2c.c                         | 1 +
 drivers/video/fbdev/via/viafbdev.c                        | 1 +
 drivers/video/fbdev/wm8505fb.c                            | 2 ++
 drivers/video/of_videomode.c                              | 1 +
 drivers/video/sticore.c                                   | 1 +
 drivers/virt/acrn/hsm.c                                   | 1 +
 drivers/virt/acrn/ioeventfd.c                             | 1 +
 drivers/virt/coco/tsm.c                                   | 2 ++
 drivers/virt/vboxguest/vboxguest_core.c                   | 1 +
 drivers/virt/vboxguest/vboxguest_linux.c                  | 1 +
 drivers/virtio/virtio.c                                   | 1 +
 drivers/virtio/virtio_balloon.c                           | 1 +
 drivers/virtio/virtio_input.c                             | 1 +
 drivers/virtio/virtio_mmio.c                              | 2 ++
 drivers/virtio/virtio_pci_common.c                        | 1 +
 drivers/virtio/virtio_pci_modern.c                        | 1 +
 drivers/w1/slaves/w1_ds2405.c                             | 1 +
 drivers/w1/slaves/w1_ds2423.c                             | 1 +
 drivers/w1/slaves/w1_ds2438.c                             | 1 +
 drivers/w1/slaves/w1_ds250x.c                             | 1 +
 drivers/w1/slaves/w1_ds28e04.c                            | 1 +
 drivers/w1/slaves/w1_ds28e17.c                            | 1 +
 drivers/w1/slaves/w1_therm.c                              | 2 ++
 drivers/w1/w1.c                                           | 2 ++
 drivers/w1/w1_int.c                                       | 1 +
 drivers/watchdog/cpwd.c                                   | 1 +
 drivers/watchdog/exar_wdt.c                               | 1 +
 drivers/watchdog/f71808e_wdt.c                            | 1 +
 drivers/watchdog/mei_wdt.c                                | 1 +
 drivers/watchdog/pcwd.c                                   | 1 +
 drivers/watchdog/pcwd_pci.c                               | 1 +
 drivers/watchdog/pcwd_usb.c                               | 1 +
 drivers/xen/cpu_hotplug.c                                 | 1 +
 drivers/xen/evtchn.c                                      | 1 +
 drivers/xen/gntdev-dmabuf.c                               | 1 +
 drivers/xen/grant-table.c                                 | 1 +
 drivers/xen/manage.c                                      | 1 +
 drivers/xen/pcpu.c                                        | 2 ++
 drivers/xen/sys-hypervisor.c                              | 2 ++
 drivers/xen/xen-balloon.c                                 | 2 ++
 drivers/xen/xen-pciback/pci_stub.c                        | 1 +
 drivers/xen/xen-pciback/xenbus.c                          | 1 +
 drivers/xen/xen-scsiback.c                                | 3 +++
 drivers/xen/xenbus/xenbus_client.c                        | 2 ++
 drivers/xen/xenbus/xenbus_dev_frontend.c                  | 1 +
 drivers/xen/xenbus/xenbus_probe.c                         | 3 +++
 drivers/xen/xenbus/xenbus_probe_backend.c                 | 2 ++
 drivers/xen/xenbus/xenbus_probe_frontend.c                | 2 ++
 drivers/xen/xenbus/xenbus_xs.c                            | 2 ++
 drivers/xen/xenfs/xenstored.c                             | 1 +
 drivers/zorro/names.c                                     | 1 +
 drivers/zorro/proc.c                                      | 1 +
 drivers/zorro/zorro-sysfs.c                               | 1 +
 drivers/zorro/zorro.c                                     | 1 +
 fs/9p/cache.c                                             | 1 +
 fs/9p/v9fs.c                                              | 2 ++
 fs/9p/vfs_inode.c                                         | 1 +
 fs/adfs/dir.c                                             | 1 +
 fs/afs/addr_prefs.c                                       | 1 +
 fs/afs/dir_silly.c                                        | 1 +
 fs/afs/proc.c                                             | 1 +
 fs/afs/super.c                                            | 1 +
 fs/afs/volume.c                                           | 1 +
 fs/afs/xattr.c                                            | 1 +
 fs/aio.c                                                  | 2 ++
 fs/autofs/expire.c                                        | 1 +
 fs/autofs/waitq.c                                         | 1 +
 fs/backing-file.c                                         | 1 +
 fs/bcachefs/chardev.c                                     | 1 +
 fs/bcachefs/compress.c                                    | 1 +
 fs/bcachefs/debug.c                                       | 1 +
 fs/bcachefs/fs-io-buffered.c                              | 1 +
 fs/bcachefs/fs.c                                          | 1 +
 fs/bcachefs/fsck.c                                        | 1 +
 fs/bcachefs/move.c                                        | 1 +
 fs/bcachefs/printbuf.c                                    | 1 +
 fs/bcachefs/super-io.c                                    | 1 +
 fs/bcachefs/super.c                                       | 2 ++
 fs/bcachefs/sysfs.c                                       | 1 +
 fs/bcachefs/tests.c                                       | 2 ++
 fs/bcachefs/thread_with_file.c                            | 1 +
 fs/bcachefs/trace.h                                       | 1 +
 fs/bcachefs/util.c                                        | 1 +
 fs/bcachefs/util.h                                        | 2 ++
 fs/binfmt_misc.c                                          | 3 +++
 fs/btrfs/compression.c                                    | 1 +
 fs/btrfs/dev-replace.c                                    | 1 +
 fs/btrfs/disk-io.c                                        | 1 +
 fs/btrfs/inode.c                                          | 1 +
 fs/btrfs/ioctl.c                                          | 1 +
 fs/btrfs/ordered-data.c                                   | 1 +
 fs/btrfs/print-tree.c                                     | 1 +
 fs/btrfs/qgroup.c                                         | 2 ++
 fs/btrfs/scrub.c                                          | 1 +
 fs/btrfs/send.c                                           | 2 ++
 fs/btrfs/super.c                                          | 3 +++
 fs/btrfs/sysfs.c                                          | 4 ++++
 fs/btrfs/tests/extent-io-tests.c                          | 2 ++
 fs/btrfs/transaction.c                                    | 1 +
 fs/btrfs/volumes.c                                        | 2 ++
 fs/buffer.c                                               | 1 +
 fs/cachefiles/daemon.c                                    | 2 ++
 fs/cachefiles/key.c                                       | 1 +
 fs/cachefiles/namei.c                                     | 1 +
 fs/cachefiles/ondemand.c                                  | 2 ++
 fs/cachefiles/volume.c                                    | 1 +
 fs/ceph/addr.c                                            | 2 ++
 fs/ceph/cache.c                                           | 1 +
 fs/ceph/caps.c                                            | 1 +
 fs/ceph/crypto.c                                          | 2 ++
 fs/ceph/debugfs.c                                         | 1 +
 fs/ceph/dir.c                                             | 1 +
 fs/ceph/ioctl.c                                           | 1 +
 fs/ceph/mds_client.c                                      | 1 +
 fs/ceph/metric.h                                          | 2 ++
 fs/ceph/super.c                                           | 1 +
 fs/ceph/super.h                                           | 1 +
 fs/ceph/xattr.c                                           | 1 +
 fs/coda/coda_linux.c                                      | 1 +
 fs/configfs/dir.c                                         | 1 +
 fs/configfs/file.c                                        | 1 +
 fs/configfs/item.c                                        | 3 +++
 fs/configfs/mount.c                                       | 1 +
 fs/coredump.c                                             | 3 +++
 fs/crypto/bio.c                                           | 1 +
 fs/crypto/keyring.c                                       | 1 +
 fs/crypto/keysetup_v1.c                                   | 1 +
 fs/d_path.c                                               | 1 +
 fs/dcache.c                                               | 4 ++++
 fs/debugfs/file.c                                         | 3 +++
 fs/debugfs/inode.c                                        | 2 ++
 fs/devpts/inode.c                                         | 2 ++
 fs/direct-io.c                                            | 1 +
 fs/dlm/config.c                                           | 2 ++
 fs/dlm/debug_fs.c                                         | 1 +
 fs/dlm/lockspace.c                                        | 3 +++
 fs/dlm/lowcomms.c                                         | 1 +
 fs/dlm/member.c                                           | 1 +
 fs/dlm/recoverd.c                                         | 2 ++
 fs/dlm/user.c                                             | 1 +
 fs/ecryptfs/crypto.c                                      | 2 ++
 fs/ecryptfs/ecryptfs_kernel.h                             | 1 +
 fs/ecryptfs/kthread.c                                     | 1 +
 fs/ecryptfs/main.c                                        | 2 ++
 fs/efivarfs/vars.c                                        | 1 +
 fs/erofs/data.c                                           | 1 +
 fs/erofs/fscache.c                                        | 1 +
 fs/erofs/internal.h                                       | 1 +
 fs/erofs/super.c                                          | 1 +
 fs/erofs/sysfs.c                                          | 3 +++
 fs/erofs/utils.c                                          | 2 ++
 fs/erofs/zdata.c                                          | 2 ++
 fs/eventpoll.c                                            | 1 +
 fs/exec.c                                                 | 2 ++
 fs/ext2/super.c                                           | 1 +
 fs/ext4/extents_status.c                                  | 1 +
 fs/ext4/mballoc-test.c                                    | 1 +
 fs/ext4/mmp.c                                             | 2 ++
 fs/ext4/super.c                                           | 4 ++++
 fs/ext4/sysfs.c                                           | 3 +++
 fs/f2fs/checkpoint.c                                      | 1 +
 fs/f2fs/compress.c                                        | 1 +
 fs/f2fs/data.c                                            | 1 +
 fs/f2fs/f2fs.h                                            | 1 +
 fs/f2fs/segment.c                                         | 1 +
 fs/f2fs/shrinker.c                                        | 1 +
 fs/f2fs/super.c                                           | 3 +++
 fs/f2fs/sysfs.c                                           | 3 +++
 fs/f2fs/xattr.c                                           | 1 +
 fs/fat/dir.c                                              | 1 +
 fs/fat/inode.c                                            | 1 +
 fs/fat/namei_vfat.c                                       | 2 ++
 fs/fs_context.c                                           | 1 +
 fs/fs_parser.c                                            | 1 +
 fs/fuse/control.c                                         | 2 ++
 fs/fuse/cuse.c                                            | 1 +
 fs/fuse/file.c                                            | 1 +
 fs/fuse/ioctl.c                                           | 1 +
 fs/fuse/virtio_fs.c                                       | 2 ++
 fs/gfs2/glock.c                                           | 1 +
 fs/gfs2/lock_dlm.c                                        | 3 +++
 fs/gfs2/ops_fstype.c                                      | 2 ++
 fs/gfs2/recovery.c                                        | 2 ++
 fs/gfs2/rgrp.c                                            | 1 +
 fs/gfs2/sys.c                                             | 3 +++
 fs/gfs2/util.c                                            | 1 +
 fs/hfs/hfs_fs.h                                           | 1 +
 fs/hfsplus/dir.c                                          | 1 +
 fs/hfsplus/hfsplus_fs.h                                   | 1 +
 fs/hfsplus/wrapper.c                                      | 1 +
 fs/hostfs/hostfs_kern.c                                   | 1 +
 fs/hpfs/super.c                                           | 1 +
 fs/inode.c                                                | 1 +
 fs/iomap/buffered-io.c                                    | 1 +
 fs/iomap/direct-io.c                                      | 2 ++
 fs/isofs/dir.c                                            | 1 +
 fs/jbd2/journal.c                                         | 2 ++
 fs/jfs/jfs_logmgr.c                                       | 1 +
 fs/jfs/super.c                                            | 1 +
 fs/kernfs/dir.c                                           | 1 +
 fs/kernfs/kernfs-internal.h                               | 1 +
 fs/kernfs/mount.c                                         | 1 +
 fs/libfs.c                                                | 3 +++
 fs/lockd/clntproc.c                                       | 1 +
 fs/lockd/mon.c                                            | 1 +
 fs/lockd/svclock.c                                        | 1 +
 fs/mbcache.c                                              | 1 +
 fs/namespace.c                                            | 2 ++
 fs/netfs/buffered_read.c                                  | 1 +
 fs/netfs/buffered_write.c                                 | 1 +
 fs/netfs/iterator.c                                       | 1 +
 fs/nfs/blocklayout/dev.c                                  | 1 +
 fs/nfs/cache_lib.c                                        | 1 +
 fs/nfs/callback_proc.c                                    | 1 +
 fs/nfs/client.c                                           | 1 +
 fs/nfs/dir.c                                              | 1 +
 fs/nfs/direct.c                                           | 1 +
 fs/nfs/flexfilelayout/flexfilelayout.c                    | 1 +
 fs/nfs/fscache.c                                          | 1 +
 fs/nfs/namespace.c                                        | 1 +
 fs/nfs/nfs42proc.c                                        | 2 ++
 fs/nfs/nfs42xattr.c                                       | 1 +
 fs/nfs/nfs4file.c                                         | 1 +
 fs/nfs/nfs4idmap.c                                        | 2 ++
 fs/nfs/nfs4proc.c                                         | 1 +
 fs/nfs/nfs4session.c                                      | 1 +
 fs/nfs/nfs4state.c                                        | 2 ++
 fs/nfs/nfs4super.c                                        | 1 +
 fs/nfs/nfs4xdr.c                                          | 1 +
 fs/nfs/nfsroot.c                                          | 1 +
 fs/nfs/pnfs_nfs.c                                         | 1 +
 fs/nfs/super.c                                            | 3 +++
 fs/nfs/sysfs.c                                            | 2 ++
 fs/nfs/unlink.c                                           | 2 ++
 fs/nfs/write.c                                            | 1 +
 fs/nfsd/export.c                                          | 2 ++
 fs/nfsd/flexfilelayout.c                                  | 1 +
 fs/nfsd/flexfilelayoutxdr.c                               | 1 +
 fs/nfsd/nfs4idmap.c                                       | 2 ++
 fs/nfsd/nfs4proc.c                                        | 1 +
 fs/nfsd/nfs4recover.c                                     | 3 +++
 fs/nfsd/nfs4state.c                                       | 1 +
 fs/nfsd/nfscache.c                                        | 1 +
 fs/nfsd/nfsctl.c                                          | 2 ++
 fs/nfsd/nfsd.h                                            | 1 +
 fs/nfsd/nfsfh.c                                           | 1 +
 fs/nilfs2/segbuf.c                                        | 1 +
 fs/nilfs2/super.c                                         | 1 +
 fs/nilfs2/sysfs.c                                         | 3 +++
 fs/nsfs.c                                                 | 1 +
 fs/ntfs3/fsntfs.c                                         | 3 ++-
 fs/ntfs3/super.c                                          | 2 ++
 fs/ocfs2/cluster/heartbeat.c                              | 3 +++
 fs/ocfs2/cluster/masklog.c                                | 1 +
 fs/ocfs2/cluster/netdebug.c                               | 1 +
 fs/ocfs2/cluster/nodemanager.c                            | 2 ++
 fs/ocfs2/cluster/sys.c                                    | 1 +
 fs/ocfs2/cluster/tcp.c                                    | 1 +
 fs/ocfs2/dlm/dlmdebug.c                                   | 1 +
 fs/ocfs2/dlm/dlmdomain.c                                  | 1 +
 fs/ocfs2/dlmglue.c                                        | 2 ++
 fs/ocfs2/filecheck.c                                      | 3 +++
 fs/ocfs2/namei.c                                          | 1 +
 fs/ocfs2/ocfs2_fs.h                                       | 1 +
 fs/ocfs2/stack_user.c                                     | 2 ++
 fs/ocfs2/stackglue.c                                      | 1 +
 fs/ocfs2/super.c                                          | 1 +
 fs/orangefs/devorangefs-req.c                             | 1 +
 fs/orangefs/inode.c                                       | 1 +
 fs/orangefs/orangefs-cache.c                              | 1 +
 fs/orangefs/orangefs-debugfs.c                            | 1 +
 fs/orangefs/orangefs-kernel.h                             | 1 +
 fs/orangefs/orangefs-sysfs.c                              | 2 ++
 fs/orangefs/waitqueue.c                                   | 1 +
 fs/overlayfs/copy_up.c                                    | 1 +
 fs/overlayfs/dir.c                                        | 1 +
 fs/overlayfs/inode.c                                      | 2 ++
 fs/overlayfs/namei.c                                      | 1 +
 fs/pnode.c                                                | 1 +
 fs/proc/base.c                                            | 2 ++
 fs/proc/bootconfig.c                                      | 1 +
 fs/proc/fd.c                                              | 1 +
 fs/proc/inode.c                                           | 1 +
 fs/proc/proc_sysctl.c                                     | 2 ++
 fs/proc/root.c                                            | 3 +++
 fs/proc/self.c                                            | 1 +
 fs/proc/task_mmu.c                                        | 2 ++
 fs/proc/thread_self.c                                     | 1 +
 fs/proc/uptime.c                                          | 1 +
 fs/pstore/ftrace.c                                        | 1 +
 fs/pstore/inode.c                                         | 3 +++
 fs/pstore/platform.c                                      | 2 ++
 fs/pstore/ram.c                                           | 1 +
 fs/pstore/ram_core.c                                      | 1 +
 fs/pstore/zone.c                                          | 2 ++
 fs/quota/dquot.c                                          | 1 +
 fs/reiserfs/bitmap.c                                      | 1 +
 fs/reiserfs/journal.c                                     | 1 +
 fs/reiserfs/prints.c                                      | 1 +
 fs/reiserfs/reiserfs.h                                    | 1 +
 fs/reiserfs/super.c                                       | 1 +
 fs/reiserfs/xattr.c                                       | 2 ++
 fs/seq_file.c                                             | 3 +++
 fs/smb/client/cifs_debug.c                                | 1 +
 fs/smb/client/cifs_spnego.c                               | 1 +
 fs/smb/client/cifsacl.c                                   | 1 +
 fs/smb/client/cifsroot.c                                  | 1 +
 fs/smb/client/cifssmb.c                                   | 1 +
 fs/smb/client/connect.c                                   | 1 +
 fs/smb/client/dfs.c                                       | 1 +
 fs/smb/client/dfs_cache.c                                 | 1 +
 fs/smb/client/file.c                                      | 1 +
 fs/smb/client/fscache.c                                   | 1 +
 fs/smb/client/link.c                                      | 1 +
 fs/smb/client/misc.c                                      | 2 ++
 fs/smb/client/netmisc.c                                   | 1 +
 fs/smb/client/sess.c                                      | 1 +
 fs/smb/client/smbdirect.c                                 | 2 ++
 fs/smb/server/ndr.c                                       | 1 +
 fs/smb/server/smb2pdu.c                                   | 1 +
 fs/smb/server/transport_ipc.c                             | 1 +
 fs/smb/server/transport_rdma.c                            | 2 ++
 fs/smb/server/vfs.c                                       | 1 +
 fs/squashfs/super.c                                       | 1 +
 fs/super.c                                                | 1 +
 fs/sysctls.c                                              | 1 +
 fs/sysfs/file.c                                           | 1 +
 fs/sysfs/mount.c                                          | 1 +
 fs/tracefs/inode.c                                        | 1 +
 fs/ubifs/auth.c                                           | 1 +
 fs/ubifs/debug.c                                          | 2 ++
 fs/ubifs/io.c                                             | 1 +
 fs/ubifs/shrinker.c                                       | 2 ++
 fs/ubifs/super.c                                          | 4 ++++
 fs/ubifs/sysfs.c                                          | 4 ++++
 fs/unicode/mkutf8data.c                                   | 1 +
 fs/verity/enable.c                                        | 1 +
 fs/verity/read_metadata.c                                 | 1 +
 fs/xfs/libxfs/xfs_btree.c                                 | 1 +
 fs/xfs/scrub/stats.c                                      | 2 ++
 fs/xfs/xfs_bio_io.c                                       | 1 +
 fs/xfs/xfs_buf.c                                          | 2 ++
 fs/xfs/xfs_discard.c                                      | 1 +
 fs/xfs/xfs_dquot.c                                        | 1 +
 fs/xfs/xfs_error.c                                        | 3 +++
 fs/xfs/xfs_log.c                                          | 1 +
 fs/xfs/xfs_message.c                                      | 1 +
 fs/xfs/xfs_stats.c                                        | 1 +
 fs/xfs/xfs_super.c                                        | 1 +
 fs/xfs/xfs_sysfs.c                                        | 3 +++
 fs/zonefs/super.c                                         | 2 ++
 fs/zonefs/sysfs.c                                         | 2 ++
 include/acpi/pcc.h                                        | 4 ++++
 include/acpi/platform/aclinux.h                           | 1 +
 include/drm/drm_color_mgmt.h                              | 1 +
 include/drm/drm_connector.h                               | 1 +
 include/drm/drm_modeset_lock.h                            | 1 +
 include/drm/gpu_scheduler.h                               | 1 +
 include/kunit/test.h                                      | 1 +
 include/linux/backing-dev-defs.h                          | 5 +++++
 include/linux/backing-dev.h                               | 1 +
 include/linux/bio.h                                       | 1 +
 include/linux/blk-integrity.h                             | 1 +
 include/linux/blk-mq.h                                    | 1 +
 include/linux/blkdev.h                                    | 2 ++
 include/linux/bootconfig.h                                | 1 +
 include/linux/bpf.h                                       | 2 +-
 include/linux/bpfptr.h                                    | 1 +
 include/linux/can/dev.h                                   | 1 +
 include/linux/cpu.h                                       | 1 +
 include/linux/dev_printk.h                                | 2 ++
 include/linux/device-mapper.h                             | 1 +
 include/linux/device.h                                    | 1 +
 include/linux/device/bus.h                                | 1 +
 include/linux/device/class.h                              | 1 +
 include/linux/dma-fence.h                                 | 1 +
 include/linux/dmaengine.h                                 | 1 +
 include/linux/dtpm.h                                      | 2 ++
 include/linux/efi.h                                       | 1 +
 include/linux/entry-common.h                              | 1 +
 include/linux/extcon.h                                    | 3 +++
 include/linux/firmware.h                                  | 1 +
 include/linux/flex_proportions.h                          | 1 +
 include/linux/framer/framer-provider.h                    | 1 +
 include/linux/futex.h                                     | 1 +
 include/linux/hisi_acc_qm.h                               | 2 ++
 include/linux/hrtimer.h                                   | 3 +++
 include/linux/iio/iio.h                                   | 1 +
 include/linux/iopoll.h                                    | 1 -
 include/linux/iov_iter.h                                  | 1 +
 include/linux/ipc.h                                       | 2 ++
 include/linux/kernfs.h                                    | 1 +
 include/linux/kobject.h                                   | 1 +
 include/linux/local_lock_internal.h                       | 2 ++
 include/linux/memory_hotplug.h                            | 1 +
 include/linux/memremap.h                                  | 1 +
 include/linux/mm.h                                        | 3 +++
 include/linux/mm_types.h                                  | 2 ++
 include/linux/mnt_idmapping.h                             | 1 +
 include/linux/module.h                                    | 1 +
 include/linux/moduleparam.h                               | 2 +-
 include/linux/mtd/blktrans.h                              | 1 +
 include/linux/ndctl.h                                     | 2 ++
 include/linux/netlink.h                                   | 1 +
 include/linux/node.h                                      | 2 ++
 include/linux/notifier.h                                  | 1 +
 include/linux/ns_common.h                                 | 1 +
 include/linux/of.h                                        | 1 +
 include/linux/pci-p2pdma.h                                | 4 ++++
 include/linux/pci.h                                       | 8 ++++++++
 include/linux/percpu_counter.h                            | 2 ++
 include/linux/pm.h                                        | 5 +++++
 include/linux/pwm.h                                       | 1 +
 include/linux/quotaops.h                                  | 1 +
 include/linux/raid/pq.h                                   | 1 +
 include/linux/raid_class.h                                | 2 ++
 include/linux/regulator/coupler.h                         | 1 +
 include/linux/sched.h                                     | 1 +
 include/linux/sched/signal.h                              | 1 +
 include/linux/siphash.h                                   | 2 ++
 include/linux/slab.h                                      | 2 ++
 include/linux/socket.h                                    | 2 +-
 include/linux/soundwire/sdw.h                             | 1 +
 include/linux/spi/spi_bitbang.h                           | 2 ++
 include/linux/sprintf.h                                   | 1 +
 include/linux/srcutiny.h                                  | 8 ++++++++
 include/linux/srcutree.h                                  | 2 ++
 include/linux/stackdepot.h                                | 1 +
 include/linux/sunrpc/rpc_pipe_fs.h                        | 3 +++
 include/linux/sunrpc/svc_xprt.h                           | 1 +
 include/linux/sysfs.h                                     | 1 +
 include/linux/trace_events.h                              | 2 ++
 include/linux/trace_recursion.h                           | 1 +
 include/linux/u64_stats_sync.h                            | 2 ++
 include/linux/usb.h                                       | 1 +
 include/linux/usb/pd.h                                    | 1 +
 include/linux/wait_bit.h                                  | 3 +++
 include/linux/writeback.h                                 | 1 +
 include/linux/ww_mutex.h                                  | 2 ++
 include/linux/xarray.h                                    | 1 +
 include/media/media-device.h                              | 2 ++
 include/media/v4l2-rect.h                                 | 1 +
 include/net/netns/ipv6.h                                  | 4 ++++
 include/net/netns/mctp.h                                  | 1 +
 include/net/netns/xdp.h                                   | 1 +
 include/net/tcp.h                                         | 1 +
 include/rdma/uverbs_ioctl.h                               | 1 +
 include/sound/control.h                                   | 1 +
 include/sound/core.h                                      | 1 +
 include/sound/util_mem.h                                  | 1 +
 include/trace/events/iommu.h                              | 3 +--
 include/trace/events/power.h                              | 1 +
 include/trace/events/vmscan.h                             | 1 +
 init/calibrate.c                                          | 1 +
 init/init_task.c                                          | 1 +
 init/initramfs.c                                          | 1 +
 init/main.c                                               | 2 ++
 io_uring/cancel.c                                         | 1 +
 io_uring/io-wq.c                                          | 1 +
 io_uring/io_uring.c                                       | 2 ++
 io_uring/net.c                                            | 1 +
 io_uring/rsrc.c                                           | 1 +
 io_uring/sqpoll.c                                         | 1 +
 io_uring/timeout.h                                        | 2 ++
 ipc/ipc_sysctl.c                                          | 1 +
 ipc/mq_sysctl.c                                           | 1 +
 ipc/mqueue.c                                              | 1 +
 ipc/namespace.c                                           | 1 +
 ipc/sem.c                                                 | 1 +
 ipc/shm.c                                                 | 1 +
 ipc/util.h                                                | 1 +
 kernel/acct.c                                             | 1 +
 kernel/audit.c                                            | 2 ++
 kernel/bpf/bpf_iter.c                                     | 1 +
 kernel/bpf/bpf_struct_ops.c                               | 1 +
 kernel/bpf/btf.c                                          | 2 ++
 kernel/bpf/core.c                                         | 1 +
 kernel/bpf/cpumap.c                                       | 1 +
 kernel/bpf/hashtab.c                                      | 1 +
 kernel/bpf/helpers.c                                      | 1 +
 kernel/bpf/mprog.c                                        | 1 +
 kernel/bpf/net_namespace.c                                | 1 +
 kernel/bpf/offload.c                                      | 1 +
 kernel/bpf/syscall.c                                      | 2 ++
 kernel/cgroup/cgroup.c                                    | 2 ++
 kernel/cgroup/debug.c                                     | 1 +
 kernel/cgroup/misc.c                                      | 1 +
 kernel/cpu.c                                              | 5 +++++
 kernel/crash_reserve.c                                    | 1 +
 kernel/debug/debug_core.c                                 | 1 +
 kernel/debug/gdbstub.c                                    | 1 +
 kernel/debug/kdb/kdb_io.c                                 | 1 +
 kernel/debug/kdb/kdb_main.c                               | 2 ++
 kernel/delayacct.c                                        | 1 +
 kernel/dma/contiguous.c                                   | 3 +++
 kernel/dma/debug.c                                        | 3 +++
 kernel/dma/pool.c                                         | 1 +
 kernel/dma/swiotlb.c                                      | 1 +
 kernel/events/core.c                                      | 3 +++
 kernel/exit.c                                             | 2 ++
 kernel/fork.c                                             | 4 ++++
 kernel/futex/core.c                                       | 1 +
 kernel/futex/pi.c                                         | 1 +
 kernel/futex/requeue.c                                    | 1 +
 kernel/futex/syscalls.c                                   | 2 ++
 kernel/futex/waitwake.c                                   | 2 ++
 kernel/gcov/base.c                                        | 1 +
 kernel/gcov/fs.c                                          | 3 +++
 kernel/irq/debugfs.c                                      | 1 +
 kernel/irq/irqdesc.c                                      | 1 +
 kernel/irq/irqdomain.c                                    | 1 +
 kernel/irq/msi.c                                          | 1 +
 kernel/irq/proc.c                                         | 1 +
 kernel/jump_label.c                                       | 1 +
 kernel/kallsyms.c                                         | 1 +
 kernel/kallsyms_selftest.c                                | 1 +
 kernel/kcsan/debugfs.c                                    | 1 +
 kernel/kcsan/kcsan_test.c                                 | 1 +
 kernel/kcsan/report.c                                     | 1 +
 kernel/kprobes.c                                          | 2 ++
 kernel/ksysfs.c                                           | 2 ++
 kernel/kthread.c                                          | 1 +
 kernel/livepatch/core.c                                   | 4 ++++
 kernel/livepatch/transition.c                             | 1 +
 kernel/locking/lock_events.c                              | 1 +
 kernel/locking/lockdep.c                                  | 1 +
 kernel/locking/lockdep_proc.c                             | 1 +
 kernel/locking/locktorture.c                              | 1 +
 kernel/locking/rtmutex.c                                  | 1 +
 kernel/locking/rtmutex_common.h                           | 1 +
 kernel/locking/rwsem.c                                    | 1 +
 kernel/locking/test-ww_mutex.c                            | 1 +
 kernel/module/dups.c                                      | 1 +
 kernel/module/kmod.c                                      | 1 +
 kernel/module/main.c                                      | 3 +++
 kernel/module/stats.c                                     | 2 ++
 kernel/module/sysfs.c                                     | 2 ++
 kernel/notifier.c                                         | 1 +
 kernel/nsproxy.c                                          | 4 ++++
 kernel/padata.c                                           | 2 ++
 kernel/panic.c                                            | 5 +++++
 kernel/params.c                                           | 2 ++
 kernel/pid_namespace.c                                    | 1 +
 kernel/power/autosleep.c                                  | 1 +
 kernel/power/energy_model.c                               | 3 +++
 kernel/power/hibernate.c                                  | 3 +++
 kernel/power/main.c                                       | 2 ++
 kernel/power/suspend_test.c                               | 1 +
 kernel/power/wakelock.c                                   | 1 +
 kernel/printk/printk.c                                    | 2 ++
 kernel/profile.c                                          | 1 +
 kernel/rcu/refscale.c                                     | 1 +
 kernel/rcu/srcutiny.c                                     | 2 ++
 kernel/rcu/srcutree.c                                     | 1 +
 kernel/rcu/tasks.h                                        | 2 ++
 kernel/rcu/tree.c                                         | 4 ++++
 kernel/rcu/tree_stall.h                                   | 1 +
 kernel/rcu/update.c                                       | 1 +
 kernel/reboot.c                                           | 4 ++++
 kernel/relay.c                                            | 2 ++
 kernel/resource.c                                         | 1 +
 kernel/sched/autogroup.c                                  | 2 ++
 kernel/sched/completion.c                                 | 2 ++
 kernel/sched/core.c                                       | 4 ++++
 kernel/sched/cpufreq_schedutil.c                          | 3 +++
 kernel/sched/debug.c                                      | 2 ++
 kernel/sched/fair.c                                       | 3 +++
 kernel/sched/psi.c                                        | 3 +++
 kernel/sched/topology.c                                   | 1 +
 kernel/seccomp.c                                          | 1 +
 kernel/signal.c                                           | 2 ++
 kernel/smp.c                                              | 2 ++
 kernel/smpboot.c                                          | 1 +
 kernel/static_call_inline.c                               | 1 +
 kernel/sys.c                                              | 1 +
 kernel/sysctl.c                                           | 1 +
 kernel/time/clockevents.c                                 | 1 +
 kernel/time/clocksource.c                                 | 2 ++
 kernel/time/hrtimer.c                                     | 3 +++
 kernel/time/namespace.c                                   | 1 +
 kernel/time/ntp.c                                         | 1 +
 kernel/time/posix-stubs.c                                 | 1 +
 kernel/time/posix-timers.c                                | 1 +
 kernel/time/test_udelay.c                                 | 1 +
 kernel/time/tick-common.c                                 | 1 +
 kernel/time/tick-sched.c                                  | 2 ++
 kernel/time/timer_list.c                                  | 1 +
 kernel/trace/blktrace.c                                   | 2 ++
 kernel/trace/ftrace.c                                     | 3 +++
 kernel/trace/ring_buffer.c                                | 2 ++
 kernel/trace/ring_buffer_benchmark.c                      | 1 +
 kernel/trace/rv/rv.c                                      | 1 +
 kernel/trace/rv/rv_reactors.c                             | 1 +
 kernel/trace/trace.c                                      | 3 +++
 kernel/trace/trace_benchmark.c                            | 2 ++
 kernel/trace/trace_boot.c                                 | 2 ++
 kernel/trace/trace_event_perf.c                           | 1 +
 kernel/trace/trace_events.c                               | 2 ++
 kernel/trace/trace_events_filter.c                        | 2 ++
 kernel/trace/trace_events_hist.c                          | 2 ++
 kernel/trace/trace_events_inject.c                        | 1 +
 kernel/trace/trace_events_synth.c                         | 1 +
 kernel/trace/trace_events_trigger.c                       | 2 ++
 kernel/trace/trace_events_user.c                          | 1 +
 kernel/trace/trace_fprobe.c                               | 1 +
 kernel/trace/trace_functions.c                            | 2 ++
 kernel/trace/trace_functions_graph.c                      | 2 ++
 kernel/trace/trace_kdb.c                                  | 1 +
 kernel/trace/trace_kprobe.c                               | 1 +
 kernel/trace/trace_osnoise.c                              | 1 +
 kernel/trace/trace_probe.c                                | 2 ++
 kernel/trace/trace_selftest.c                             | 1 +
 kernel/trace/trace_seq.c                                  | 1 +
 kernel/trace/trace_stack.c                                | 1 +
 kernel/trace/trace_syscalls.c                             | 1 +
 kernel/trace/trace_uprobe.c                               | 1 +
 kernel/tsacct.c                                           | 1 +
 kernel/ucount.c                                           | 1 +
 kernel/umh.c                                              | 1 +
 kernel/user.c                                             | 2 ++
 kernel/user_namespace.c                                   | 3 +++
 kernel/vhost_task.c                                       | 1 +
 kernel/vmcore_info.c                                      | 2 ++
 kernel/watchdog.c                                         | 4 ++++
 kernel/workqueue.c                                        | 4 ++++
 lib/cpu_rmap.c                                            | 2 ++
 lib/crc-t10dif.c                                          | 1 +
 lib/crc64-rocksoft.c                                      | 1 +
 lib/digsig.c                                              | 1 +
 lib/error-inject.c                                        | 1 +
 lib/flex_proportions.c                                    | 3 +++
 lib/group_cpus.c                                          | 1 +
 lib/kasprintf.c                                           | 1 +
 lib/kobject.c                                             | 3 +++
 lib/kunit/string-stream-test.c                            | 1 +
 lib/kunit/string-stream.c                                 | 1 +
 lib/locking-selftest.c                                    | 1 +
 lib/lockref.c                                             | 2 ++
 lib/memcpy_kunit.c                                        | 1 +
 lib/objpool.c                                             | 2 ++
 lib/ref_tracker.c                                         | 1 +
 lib/seq_buf.c                                             | 2 ++
 lib/siphash.c                                             | 2 ++
 lib/smp_processor_id.c                                    | 1 +
 lib/test_dynamic_debug.c                                  | 2 ++
 lib/test_firmware.c                                       | 3 ++-
 lib/test_fprobe.c                                         | 1 +
 lib/test_kmod.c                                           | 1 +
 lib/test_lockup.c                                         | 1 +
 lib/test_maple_tree.c                                     | 1 +
 lib/test_objpool.c                                        | 3 ++-
 lib/zlib_deflate/deftree.c                                | 1 +
 mm/backing-dev.c                                          | 2 ++
 mm/damon/core.c                                           | 1 +
 mm/damon/dbgfs.c                                          | 1 +
 mm/damon/sysfs-common.c                                   | 2 ++
 mm/damon/sysfs-schemes.c                                  | 2 ++
 mm/damon/sysfs.c                                          | 2 ++
 mm/debug_page_alloc.c                                     | 1 +
 mm/folio-compat.c                                         | 1 +
 mm/huge_memory.c                                          | 1 +
 mm/hugetlb.c                                              | 3 +++
 mm/hugetlb_cgroup.c                                       | 1 +
 mm/internal.h                                             | 4 ++++
 mm/kasan/hw_tags.c                                        | 1 +
 mm/kasan/report.c                                         | 1 +
 mm/kasan/report_generic.c                                 | 1 +
 mm/kasan/tags.c                                           | 1 +
 mm/kfence/core.c                                          | 3 +++
 mm/khugepaged.c                                           | 2 ++
 mm/kmemleak.c                                             | 1 +
 mm/ksm.c                                                  | 3 +++
 mm/memcontrol.c                                           | 2 ++
 mm/memory-tiers.c                                         | 2 ++
 mm/memory_hotplug.c                                       | 3 +++
 mm/mempolicy.c                                            | 2 ++
 mm/memremap.c                                             | 1 +
 mm/memtest.c                                              | 1 +
 mm/mm_init.c                                              | 2 ++
 mm/mmap.c                                                 | 1 +
 mm/page_owner.c                                           | 1 +
 mm/page_poison.c                                          | 1 +
 mm/shmem.c                                                | 2 ++
 mm/shrinker.c                                             | 1 +
 mm/slub.c                                                 | 3 +++
 mm/swap_state.c                                           | 1 +
 mm/swapfile.c                                             | 1 +
 mm/vmalloc.c                                              | 1 +
 mm/vmscan.c                                               | 2 ++
 mm/vmstat.c                                               | 1 +
 mm/workingset.c                                           | 1 +
 mm/zswap.c                                                | 2 ++
 net/6lowpan/debugfs.c                                     | 1 +
 net/8021q/vlan.c                                          | 1 +
 net/9p/protocol.c                                         | 1 +
 net/9p/trans_fd.c                                         | 1 +
 net/9p/trans_rdma.c                                       | 1 +
 net/9p/trans_xen.c                                        | 2 ++
 net/appletalk/aarp.c                                      | 1 +
 net/atm/atm_sysfs.c                                       | 1 +
 net/atm/clip.c                                            | 1 +
 net/atm/lec.c                                             | 1 +
 net/atm/mpc.c                                             | 1 +
 net/atm/mpoa_proc.c                                       | 1 +
 net/atm/proc.c                                            | 1 +
 net/ax25/sysctl_net_ax25.c                                | 1 +
 net/batman-adv/bridge_loop_avoidance.c                    | 1 +
 net/batman-adv/gateway_client.c                           | 1 +
 net/batman-adv/main.c                                     | 1 +
 net/batman-adv/multicast.c                                | 1 +
 net/bluetooth/6lowpan.c                                   | 1 +
 net/bluetooth/cmtp/core.c                                 | 1 +
 net/bluetooth/coredump.c                                  | 1 +
 net/bluetooth/hci_debugfs.c                               | 1 +
 net/bluetooth/hci_sock.c                                  | 1 +
 net/bluetooth/hidp/core.c                                 | 1 +
 net/bluetooth/rfcomm/tty.c                                | 1 +
 net/bluetooth/selftest.c                                  | 1 +
 net/bluetooth/smp.c                                       | 1 +
 net/bpf/test_run.c                                        | 1 +
 net/bridge/br_stp_if.c                                    | 1 +
 net/bridge/br_sysfs_br.c                                  | 2 ++
 net/bridge/br_sysfs_if.c                                  | 2 ++
 net/caif/caif_usb.c                                       | 1 +
 net/caif/cfctrl.c                                         | 1 +
 net/caif/cfdbgl.c                                         | 1 +
 net/caif/cfdgml.c                                         | 1 +
 net/caif/cffrml.c                                         | 1 +
 net/caif/cfmuxl.c                                         | 1 +
 net/caif/cfrfml.c                                         | 1 +
 net/caif/cfserl.c                                         | 1 +
 net/caif/cfutill.c                                        | 1 +
 net/caif/cfveil.c                                         | 1 +
 net/caif/cfvidl.c                                         | 1 +
 net/can/bcm.c                                             | 1 +
 net/can/j1939/bus.c                                       | 2 ++
 net/can/j1939/transport.c                                 | 1 +
 net/ceph/ceph_common.c                                    | 1 +
 net/ceph/crush/mapper.c                                   | 1 +
 net/ceph/debugfs.c                                        | 1 +
 net/ceph/messenger.c                                      | 1 +
 net/ceph/mon_client.c                                     | 2 ++
 net/ceph/osd_client.c                                     | 1 +
 net/ceph/osdmap.c                                         | 1 +
 net/ceph/string_table.c                                   | 1 +
 net/core/dev.c                                            | 1 +
 net/core/drop_monitor.c                                   | 1 +
 net/core/gso_test.c                                       | 1 +
 net/core/neighbour.c                                      | 1 +
 net/core/net-sysfs.c                                      | 1 +
 net/core/netpoll.c                                        | 1 +
 net/core/netprio_cgroup.c                                 | 1 +
 net/core/pktgen.c                                         | 2 ++
 net/core/rtnetlink.c                                      | 1 +
 net/core/selftests.c                                      | 1 +
 net/core/skbuff.c                                         | 1 +
 net/core/sock.c                                           | 1 +
 net/core/sock_map.c                                       | 1 +
 net/core/sysctl_net_core.c                                | 1 +
 net/core/utils.c                                          | 1 +
 net/dccp/ccid.c                                           | 1 +
 net/devlink/port.c                                        | 1 +
 net/dns_resolver/dns_key.c                                | 1 +
 net/dsa/conduit.c                                         | 1 +
 net/dsa/trace.c                                           | 1 +
 net/dsa/user.c                                            | 1 +
 net/ethtool/ioctl.c                                       | 2 ++
 net/ethtool/netlink.c                                     | 1 +
 net/ieee802154/sysfs.c                                    | 1 +
 net/ipv4/arp.c                                            | 1 +
 net/ipv4/devinet.c                                        | 1 +
 net/ipv4/esp4.c                                           | 1 +
 net/ipv4/fib_trie.c                                       | 1 +
 net/ipv4/inet_fragment.c                                  | 1 +
 net/ipv4/ipconfig.c                                       | 2 ++
 net/ipv4/ipmr.c                                           | 1 +
 net/ipv4/sysctl_net_ipv4.c                                | 1 +
 net/ipv4/tcp.c                                            | 1 +
 net/ipv4/tcp_bpf.c                                        | 1 +
 net/ipv4/tcp_cong.c                                       | 1 +
 net/ipv4/tcp_metrics.c                                    | 1 +
 net/ipv4/tcp_ulp.c                                        | 1 +
 net/ipv4/udp.c                                            | 1 +
 net/ipv6/addrconf.c                                       | 1 +
 net/ipv6/esp6.c                                           | 1 +
 net/ipv6/ip6_tunnel.c                                     | 1 +
 net/ipv6/ip6_vti.c                                        | 1 +
 net/ipv6/ip6mr.c                                          | 1 +
 net/ipv6/proc.c                                           | 1 +
 net/iucv/af_iucv.c                                        | 1 +
 net/l2tp/l2tp_core.c                                      | 1 +
 net/mac80211/debugfs.c                                    | 2 ++
 net/mac80211/debugfs_key.c                                | 1 +
 net/mac80211/debugfs_netdev.c                             | 2 ++
 net/mac80211/debugfs_sta.c                                | 2 ++
 net/mac80211/iface.c                                      | 1 +
 net/mac80211/led.c                                        | 1 +
 net/mac80211/rc80211_minstrel_ht_debugfs.c                | 1 +
 net/mac802154/main.c                                      | 2 ++
 net/mac802154/scan.c                                      | 1 +
 net/mctp/test/route-test.c                                | 1 +
 net/mpls/af_mpls.c                                        | 1 +
 net/mptcp/crypto_test.c                                   | 1 +
 net/netfilter/ipvs/ip_vs_conn.c                           | 1 +
 net/netfilter/ipvs/ip_vs_core.c                           | 1 +
 net/netfilter/ipvs/ip_vs_ctl.c                            | 1 +
 net/netfilter/ipvs/ip_vs_ftp.c                            | 1 +
 net/netfilter/ipvs/ip_vs_proto.c                          | 1 +
 net/netfilter/nf_conntrack_amanda.c                       | 1 +
 net/netfilter/nf_conntrack_core.c                         | 1 +
 net/netfilter/nf_conntrack_helper.c                       | 1 +
 net/netfilter/nf_conntrack_irc.c                          | 1 +
 net/netfilter/nf_conntrack_sip.c                          | 1 +
 net/netfilter/nf_log.c                                    | 1 +
 net/netfilter/nf_nat_amanda.c                             | 1 +
 net/netfilter/nf_nat_ftp.c                                | 1 +
 net/netfilter/nf_nat_irc.c                                | 1 +
 net/netfilter/nf_nat_sip.c                                | 1 +
 net/netfilter/nf_tables_api.c                             | 1 +
 net/netfilter/nfnetlink_hook.c                            | 1 +
 net/netfilter/nft_osf.c                                   | 1 +
 net/netfilter/x_tables.c                                  | 1 +
 net/netrom/af_netrom.c                                    | 1 +
 net/nfc/digital_core.c                                    | 1 +
 net/nfc/digital_dep.c                                     | 1 +
 net/nfc/digital_technology.c                              | 2 ++
 net/nfc/nci/core.c                                        | 1 +
 net/nfc/nci/spi.c                                         | 1 +
 net/packet/af_packet.c                                    | 1 +
 net/rds/ib_send.c                                         | 1 +
 net/rds/tcp_send.c                                        | 1 +
 net/rfkill/core.c                                         | 1 +
 net/rose/af_rose.c                                        | 1 +
 net/rxrpc/io_thread.c                                     | 1 +
 net/rxrpc/local_event.c                                   | 1 +
 net/rxrpc/local_object.c                                  | 1 +
 net/rxrpc/proc.c                                          | 1 +
 net/rxrpc/rxperf.c                                        | 1 +
 net/rxrpc/security.c                                      | 1 +
 net/rxrpc/server_key.c                                    | 2 ++
 net/sched/act_gate.c                                      | 1 +
 net/sctp/socket.c                                         | 1 +
 net/smc/smc_core.c                                        | 1 +
 net/smc/smc_core.h                                        | 1 +
 net/smc/smc_ib.c                                          | 1 +
 net/smc/smc_ism.c                                         | 1 +
 net/smc/smc_llc.c                                         | 1 +
 net/smc/smc_wr.c                                          | 1 +
 net/sunrpc/addr.c                                         | 2 ++
 net/sunrpc/auth.c                                         | 3 +++
 net/sunrpc/auth_gss/auth_gss.c                            | 1 +
 net/sunrpc/auth_gss/gss_krb5_mech.c                       | 1 +
 net/sunrpc/auth_gss/svcauth_gss.c                         | 2 ++
 net/sunrpc/cache.c                                        | 4 ++++
 net/sunrpc/clnt.c                                         | 1 +
 net/sunrpc/debugfs.c                                      | 1 +
 net/sunrpc/svc_xprt.c                                     | 1 +
 net/sunrpc/svcauth_unix.c                                 | 1 +
 net/sunrpc/svcsock.c                                      | 2 ++
 net/sunrpc/sysctl.c                                       | 2 ++
 net/sunrpc/sysfs.c                                        | 1 +
 net/sunrpc/xprtrdma/frwr_ops.c                            | 1 +
 net/sunrpc/xprtrdma/svc_rdma.c                            | 1 +
 net/sunrpc/xprtrdma/svc_rdma_transport.c                  | 1 +
 net/sunrpc/xprtrdma/transport.c                           | 1 +
 net/sunrpc/xprtrdma/verbs.c                               | 1 +
 net/sunrpc/xprtsock.c                                     | 2 ++
 net/switchdev/switchdev.c                                 | 1 +
 net/tipc/addr.c                                           | 1 +
 net/tipc/bearer.c                                         | 1 +
 net/tipc/crypto.c                                         | 2 ++
 net/tipc/discover.c                                       | 1 +
 net/tipc/eth_media.c                                      | 1 +
 net/tipc/ib_media.c                                       | 1 +
 net/tipc/link.c                                           | 1 +
 net/tipc/netlink_compat.c                                 | 1 +
 net/tipc/node.c                                           | 1 +
 net/tipc/socket.c                                         | 1 +
 net/tipc/trace.c                                          | 1 +
 net/tipc/udp_media.c                                      | 1 +
 net/tls/tls_main.c                                        | 1 +
 net/tls/tls_sw.c                                          | 1 +
 net/unix/af_unix.c                                        | 1 +
 net/wireless/core.c                                       | 1 +
 net/wireless/debugfs.c                                    | 2 ++
 net/wireless/mlme.c                                       | 1 +
 net/wireless/reg.c                                        | 1 +
 net/wireless/scan.c                                       | 1 +
 net/wireless/sysfs.c                                      | 1 +
 net/xdp/xsk.c                                             | 1 +
 net/xfrm/espintcp.c                                       | 1 +
 net/xfrm/xfrm_state.c                                     | 1 +
 samples/ftrace/ftrace-direct-modify.c                     | 1 +
 samples/ftrace/ftrace-direct-multi-modify.c               | 1 +
 samples/ftrace/ftrace-direct-multi.c                      | 1 +
 samples/ftrace/ftrace-direct-too.c                        | 1 +
 samples/ftrace/ftrace-direct.c                            | 1 +
 samples/kobject/kobject-example.c                         | 1 +
 samples/kobject/kset-example.c                            | 1 +
 samples/trace_printk/trace-printk.c                       | 1 +
 samples/vfio-mdev/mtty.c                                  | 1 +
 security/apparmor/apparmorfs.c                            | 1 +
 security/apparmor/lib.c                                   | 1 +
 security/apparmor/lsm.c                                   | 2 ++
 security/apparmor/policy.c                                | 1 +
 security/apparmor/procattr.c                              | 1 +
 security/device_cgroup.c                                  | 2 ++
 security/integrity/digsig_asymmetric.c                    | 1 +
 security/integrity/evm/evm_crypto.c                       | 1 +
 security/integrity/evm/evm_secfs.c                        | 2 ++
 security/integrity/ima/ima_api.c                          | 1 +
 security/integrity/ima/ima_fs.c                           | 1 +
 security/integrity/ima/ima_mok.c                          | 1 +
 security/integrity/ima/ima_policy.c                       | 2 ++
 security/integrity/ima/ima_queue.c                        | 1 +
 security/integrity/ima/ima_template_lib.c                 | 1 +
 security/integrity/integrity_audit.c                      | 1 +
 security/keys/encrypted-keys/encrypted.c                  | 3 +++
 security/keys/gc.c                                        | 2 ++
 security/keys/keyctl.c                                    | 1 +
 security/keys/permission.c                                | 1 +
 security/keys/persistent.c                                | 1 +
 security/keys/proc.c                                      | 2 ++
 security/keys/process_keys.c                              | 1 +
 security/keys/request_key.c                               | 1 +
 security/keys/request_key_auth.c                          | 1 +
 security/keys/trusted-keys/trusted_core.c                 | 2 ++
 security/keys/trusted-keys/trusted_tpm1.c                 | 3 +++
 security/loadpin/loadpin.c                                | 1 +
 security/lockdown/lockdown.c                              | 1 +
 security/safesetid/securityfs.c                           | 1 +
 security/security.c                                       | 1 +
 security/selinux/avc.c                                    | 1 +
 security/selinux/hooks.c                                  | 1 +
 security/selinux/selinuxfs.c                              | 1 +
 security/selinux/ss/services.c                            | 1 +
 security/selinux/ss/sidtab.c                              | 1 +
 security/smack/smackfs.c                                  | 1 +
 security/tomoyo/audit.c                                   | 1 +
 security/tomoyo/common.c                                  | 3 +++
 security/tomoyo/domain.c                                  | 1 +
 security/tomoyo/realpath.c                                | 1 +
 security/tomoyo/util.c                                    | 2 ++
 sound/ac97/bus.c                                          | 1 +
 sound/aoa/fabrics/layout.c                                | 1 +
 sound/aoa/soundbus/i2sbus/core.c                          | 1 +
 sound/aoa/soundbus/i2sbus/pcm.c                           | 1 +
 sound/arm/aaci.c                                          | 1 +
 sound/arm/pxa2xx-ac97.c                                   | 1 +
 sound/atmel/ac97c.c                                       | 1 +
 sound/core/compress_offload.c                             | 1 +
 sound/core/control_led.c                                  | 2 ++
 sound/core/ctljack.c                                      | 1 +
 sound/core/info.c                                         | 1 +
 sound/core/init.c                                         | 1 +
 sound/core/jack.c                                         | 3 +++
 sound/core/oss/mixer_oss.c                                | 2 ++
 sound/core/oss/pcm_oss.c                                  | 2 ++
 sound/core/oss/pcm_plugin.c                               | 1 +
 sound/core/pcm.c                                          | 2 ++
 sound/core/pcm_lib.c                                      | 1 +
 sound/core/pcm_memory.c                                   | 1 +
 sound/core/pcm_timer.c                                    | 1 +
 sound/core/rawmidi.c                                      | 1 +
 sound/core/seq/oss/seq_oss_init.c                         | 1 +
 sound/core/seq/seq_clientmgr.c                            | 1 +
 sound/core/seq/seq_dummy.c                                | 1 +
 sound/core/seq/seq_midi.c                                 | 1 +
 sound/core/seq/seq_ports.c                                | 1 +
 sound/core/seq/seq_timer.c                                | 1 +
 sound/core/seq/seq_ump_client.c                           | 1 +
 sound/core/seq/seq_virmidi.c                              | 1 +
 sound/core/timer.c                                        | 1 +
 sound/core/ump.c                                          | 1 +
 sound/drivers/aloop.c                                     | 3 +++
 sound/drivers/dummy.c                                     | 2 ++
 sound/drivers/mpu401/mpu401.c                             | 1 +
 sound/drivers/mpu401/mpu401_uart.c                        | 1 +
 sound/drivers/mtpav.c                                     | 1 +
 sound/drivers/mts64.c                                     | 1 +
 sound/drivers/opl3/opl3_oss.c                             | 1 +
 sound/drivers/opl3/opl3_seq.c                             | 1 +
 sound/drivers/pcmtest.c                                   | 2 ++
 sound/drivers/pcsp/pcsp.c                                 | 1 +
 sound/drivers/pcsp/pcsp_mixer.c                           | 1 +
 sound/drivers/portman2x4.c                                | 1 +
 sound/drivers/serial-generic.c                            | 1 +
 sound/drivers/serial-u16550.c                             | 1 +
 sound/drivers/virmidi.c                                   | 1 +
 sound/drivers/vx/vx_core.c                                | 1 +
 sound/drivers/vx/vx_hwdep.c                               | 1 +
 sound/drivers/vx/vx_mixer.c                               | 1 +
 sound/firewire/bebob/bebob.c                              | 1 +
 sound/firewire/bebob/bebob_midi.c                         | 1 +
 sound/firewire/bebob/bebob_pcm.c                          | 1 +
 sound/firewire/dice/dice-midi.c                           | 1 +
 sound/firewire/dice/dice-stream.c                         | 1 +
 sound/firewire/dice/dice-transaction.c                    | 1 +
 sound/firewire/dice/dice.c                                | 2 ++
 sound/firewire/digi00x/digi00x-midi.c                     | 1 +
 sound/firewire/digi00x/digi00x-pcm.c                      | 1 +
 sound/firewire/digi00x/digi00x.c                          | 1 +
 sound/firewire/fireface/ff-midi.c                         | 1 +
 sound/firewire/fireface/ff-pcm.c                          | 1 +
 sound/firewire/fireface/ff.c                              | 1 +
 sound/firewire/fireworks/fireworks.c                      | 1 +
 sound/firewire/fireworks/fireworks_midi.c                 | 1 +
 sound/firewire/fireworks/fireworks_pcm.c                  | 1 +
 sound/firewire/isight.c                                   | 1 +
 sound/firewire/motu/motu-midi.c                           | 1 +
 sound/firewire/motu/motu.c                                | 1 +
 sound/firewire/oxfw/oxfw-midi.c                           | 1 +
 sound/firewire/oxfw/oxfw-scs1x.c                          | 1 +
 sound/firewire/oxfw/oxfw.c                                | 1 +
 sound/firewire/tascam/tascam-midi.c                       | 1 +
 sound/firewire/tascam/tascam-pcm.c                        | 1 +
 sound/firewire/tascam/tascam.c                            | 1 +
 sound/hda/ext/hdac_ext_controller.c                       | 1 +
 sound/hda/hdac_component.c                                | 1 +
 sound/hda/hdac_device.c                                   | 1 +
 sound/hda/hdac_sysfs.c                                    | 2 ++
 sound/hda/hdmi_chmap.c                                    | 1 +
 sound/hda/intel-sdw-acpi.c                                | 1 +
 sound/isa/ad1816a/ad1816a.c                               | 1 +
 sound/isa/ad1848/ad1848.c                                 | 1 +
 sound/isa/adlib.c                                         | 1 +
 sound/isa/als100.c                                        | 1 +
 sound/isa/azt2320.c                                       | 1 +
 sound/isa/cmi8328.c                                       | 1 +
 sound/isa/cmi8330.c                                       | 1 +
 sound/isa/cs423x/cs4231.c                                 | 1 +
 sound/isa/cs423x/cs4236.c                                 | 1 +
 sound/isa/es1688/es1688.c                                 | 1 +
 sound/isa/es1688/es1688_lib.c                             | 1 +
 sound/isa/es18xx.c                                        | 1 +
 sound/isa/galaxy/galaxy.c                                 | 1 +
 sound/isa/gus/gus_mem_proc.c                              | 1 +
 sound/isa/gus/gus_pcm.c                                   | 1 +
 sound/isa/gus/gusclassic.c                                | 1 +
 sound/isa/gus/gusextreme.c                                | 1 +
 sound/isa/gus/gusmax.c                                    | 1 +
 sound/isa/gus/interwave.c                                 | 1 +
 sound/isa/opl3sa2.c                                       | 1 +
 sound/isa/opti9xx/miro.c                                  | 1 +
 sound/isa/opti9xx/opti92x-ad1848.c                        | 1 +
 sound/isa/sb/jazz16.c                                     | 1 +
 sound/isa/sb/sb16.c                                       | 1 +
 sound/isa/sb/sb16_csp.c                                   | 1 +
 sound/isa/sb/sb16_main.c                                  | 1 +
 sound/isa/sb/sb8.c                                        | 1 +
 sound/isa/sb/sb8_main.c                                   | 1 +
 sound/isa/sb/sb_common.c                                  | 1 +
 sound/isa/sc6000.c                                        | 1 +
 sound/isa/sscape.c                                        | 1 +
 sound/isa/wavefront/wavefront.c                           | 1 +
 sound/mips/hal2.c                                         | 1 +
 sound/mips/sgio2audio.c                                   | 1 +
 sound/oss/dmasound/dmasound_atari.c                       | 1 +
 sound/oss/dmasound/dmasound_core.c                        | 1 +
 sound/oss/dmasound/dmasound_paula.c                       | 1 +
 sound/parisc/harmony.c                                    | 1 +
 sound/pci/ac97/ac97_codec.c                               | 2 ++
 sound/pci/ac97/ac97_proc.c                                | 1 +
 sound/pci/ad1889.c                                        | 1 +
 sound/pci/ali5451/ali5451.c                               | 1 +
 sound/pci/als300.c                                        | 1 +
 sound/pci/als4000.c                                       | 1 +
 sound/pci/asihpi/asihpi.c                                 | 1 +
 sound/pci/asihpi/hpidspcd.c                               | 1 +
 sound/pci/atiixp.c                                        | 1 +
 sound/pci/atiixp_modem.c                                  | 1 +
 sound/pci/au88x0/au88x0.c                                 | 1 +
 sound/pci/au88x0/au88x0_eq.c                              | 1 +
 sound/pci/au88x0/au88x0_mpu401.c                          | 1 +
 sound/pci/au88x0/au88x0_pcm.c                             | 1 +
 sound/pci/aw2/aw2-alsa.c                                  | 1 +
 sound/pci/azt3328.c                                       | 1 +
 sound/pci/bt87x.c                                         | 1 +
 sound/pci/ca0106/ca0106_main.c                            | 1 +
 sound/pci/ca0106/ca0106_proc.c                            | 1 +
 sound/pci/cmipci.c                                        | 1 +
 sound/pci/cs4281.c                                        | 1 +
 sound/pci/cs46xx/cs46xx.c                                 | 1 +
 sound/pci/cs46xx/cs46xx_lib.c                             | 1 +
 sound/pci/cs46xx/dsp_spos_scb_lib.c                       | 1 +
 sound/pci/cs5530.c                                        | 1 +
 sound/pci/cs5535audio/cs5535audio.c                       | 1 +
 sound/pci/ctxfi/cthw20k1.c                                | 1 +
 sound/pci/ctxfi/cthw20k2.c                                | 1 +
 sound/pci/ctxfi/xfi.c                                     | 1 +
 sound/pci/echoaudio/echoaudio.c                           | 1 +
 sound/pci/emu10k1/emu10k1.c                               | 1 +
 sound/pci/emu10k1/emu10k1x.c                              | 1 +
 sound/pci/emu10k1/emufx.c                                 | 1 +
 sound/pci/emu10k1/emuproc.c                               | 1 +
 sound/pci/ens1370.c                                       | 1 +
 sound/pci/es1938.c                                        | 1 +
 sound/pci/es1968.c                                        | 1 +
 sound/pci/fm801.c                                         | 1 +
 sound/pci/hda/cirrus_scodec_test.c                        | 1 +
 sound/pci/hda/cs35l41_hda.c                               | 1 +
 sound/pci/hda/cs35l56_hda.c                               | 1 +
 sound/pci/hda/hda_auto_parser.c                           | 1 +
 sound/pci/hda/hda_beep.c                                  | 1 +
 sound/pci/hda/hda_bind.c                                  | 1 +
 sound/pci/hda/hda_codec.c                                 | 2 ++
 sound/pci/hda/hda_component.c                             | 1 +
 sound/pci/hda/hda_cs_dsp_ctl.c                            | 1 +
 sound/pci/hda/hda_eld.c                                   | 1 +
 sound/pci/hda/hda_generic.c                               | 1 +
 sound/pci/hda/hda_hwdep.c                                 | 1 +
 sound/pci/hda/hda_intel.c                                 | 2 ++
 sound/pci/hda/hda_proc.c                                  | 1 +
 sound/pci/hda/hda_sysfs.c                                 | 2 ++
 sound/pci/hda/hda_tegra.c                                 | 1 +
 sound/pci/hda/patch_ca0132.c                              | 1 +
 sound/pci/hda/patch_hdmi.c                                | 1 +
 sound/pci/hda/patch_realtek.c                             | 1 +
 sound/pci/hda/patch_sigmatel.c                            | 1 +
 sound/pci/hda/tas2781_hda_i2c.c                           | 1 +
 sound/pci/ice1712/ice1712.c                               | 1 +
 sound/pci/ice1712/ice1724.c                               | 1 +
 sound/pci/ice1712/pontis.c                                | 1 +
 sound/pci/ice1712/prodigy_hifi.c                          | 1 +
 sound/pci/intel8x0.c                                      | 1 +
 sound/pci/intel8x0m.c                                     | 1 +
 sound/pci/korg1212/korg1212.c                             | 1 +
 sound/pci/lola/lola.c                                     | 1 +
 sound/pci/lola/lola_proc.c                                | 1 +
 sound/pci/lx6464es/lx6464es.c                             | 2 ++
 sound/pci/maestro3.c                                      | 1 +
 sound/pci/mixart/mixart.c                                 | 1 +
 sound/pci/mixart/mixart_hwdep.c                           | 1 +
 sound/pci/nm256/nm256.c                                   | 1 +
 sound/pci/oxygen/oxygen_lib.c                             | 1 +
 sound/pci/pcxhr/pcxhr.c                                   | 1 +
 sound/pci/pcxhr/pcxhr_hwdep.c                             | 1 +
 sound/pci/riptide/riptide.c                               | 1 +
 sound/pci/rme32.c                                         | 1 +
 sound/pci/rme96.c                                         | 1 +
 sound/pci/rme9652/hdsp.c                                  | 1 +
 sound/pci/rme9652/hdspm.c                                 | 1 +
 sound/pci/rme9652/rme9652.c                               | 1 +
 sound/pci/sis7019.c                                       | 1 +
 sound/pci/sonicvibes.c                                    | 1 +
 sound/pci/trident/trident.c                               | 1 +
 sound/pci/via82xx.c                                       | 1 +
 sound/pci/via82xx_modem.c                                 | 1 +
 sound/pci/vx222/vx222.c                                   | 1 +
 sound/pci/ymfpci/ymfpci.c                                 | 1 +
 sound/pci/ymfpci/ymfpci_main.c                            | 1 +
 sound/pcmcia/pdaudiocf/pdaudiocf.c                        | 1 +
 sound/pcmcia/vx/vxpocket.c                                | 1 +
 sound/ppc/powermac.c                                      | 1 +
 sound/ppc/tumbler.c                                       | 1 +
 sound/soc/amd/acp-pcm-dma.c                               | 1 +
 sound/soc/amd/acp/acp-platform.c                          | 1 +
 sound/soc/amd/ps/pci-ps.c                                 | 1 +
 sound/soc/amd/ps/ps-pdm-dma.c                             | 1 +
 sound/soc/amd/ps/ps-sdw-dma.c                             | 1 +
 sound/soc/amd/raven/acp3x-pcm-dma.c                       | 1 +
 sound/soc/amd/renoir/acp3x-pdm-dma.c                      | 1 +
 sound/soc/amd/vangogh/acp5x-pcm-dma.c                     | 1 +
 sound/soc/amd/yc/acp6x-pdm-dma.c                          | 1 +
 sound/soc/atmel/mchp-pdmc.c                               | 1 +
 sound/soc/atmel/mchp-spdifrx.c                            | 1 +
 sound/soc/bcm/cygnus-ssp.c                                | 1 +
 sound/soc/codecs/ak4613.c                                 | 1 +
 sound/soc/codecs/arizona.c                                | 1 +
 sound/soc/codecs/audio-iio-aux.c                          | 1 +
 sound/soc/codecs/cs35l45.c                                | 1 +
 sound/soc/codecs/cs35l56-sdw.c                            | 1 +
 sound/soc/codecs/cs35l56.c                                | 1 +
 sound/soc/codecs/cs42l42-sdw.c                            | 1 +
 sound/soc/codecs/cs42l43.c                                | 1 +
 sound/soc/codecs/cs42l52.c                                | 1 +
 sound/soc/codecs/cs42l56.c                                | 1 +
 sound/soc/codecs/cx20442.c                                | 1 +
 sound/soc/codecs/framer-codec.c                           | 1 +
 sound/soc/codecs/hdac_hdmi.c                              | 1 +
 sound/soc/codecs/max98363.c                               | 1 +
 sound/soc/codecs/max98373-sdw.c                           | 1 +
 sound/soc/codecs/max98390.c                               | 1 +
 sound/soc/codecs/msm8916-wcd-digital.c                    | 1 +
 sound/soc/codecs/rt1017-sdca-sdw.c                        | 1 +
 sound/soc/codecs/rt1308-sdw.c                             | 1 +
 sound/soc/codecs/rt1316-sdw.c                             | 1 +
 sound/soc/codecs/rt1318-sdw.c                             | 1 +
 sound/soc/codecs/rt5645.c                                 | 1 +
 sound/soc/codecs/rt5682-sdw.c                             | 1 +
 sound/soc/codecs/rt5682.c                                 | 1 +
 sound/soc/codecs/rt700-sdw.c                              | 1 +
 sound/soc/codecs/rt711-sdca-sdw.c                         | 1 +
 sound/soc/codecs/rt711-sdw.c                              | 1 +
 sound/soc/codecs/rt712-sdca-dmic.c                        | 1 +
 sound/soc/codecs/rt712-sdca-sdw.c                         | 1 +
 sound/soc/codecs/rt715-sdca-sdw.c                         | 1 +
 sound/soc/codecs/rt715-sdw.c                              | 1 +
 sound/soc/codecs/rt722-sdca-sdw.c                         | 1 +
 sound/soc/codecs/sma1303.c                                | 1 +
 sound/soc/codecs/tas2781-comlib.c                         | 1 +
 sound/soc/codecs/tas2781-i2c.c                            | 1 +
 sound/soc/codecs/tas5086.c                                | 1 +
 sound/soc/codecs/tas5805m.c                               | 1 +
 sound/soc/codecs/wcd9335.c                                | 1 +
 sound/soc/codecs/wcd934x.c                                | 1 +
 sound/soc/codecs/wcd938x.c                                | 1 +
 sound/soc/codecs/wcd939x.c                                | 1 +
 sound/soc/codecs/wm0010.c                                 | 1 +
 sound/soc/codecs/wm2200.c                                 | 1 +
 sound/soc/codecs/wm5100.c                                 | 1 +
 sound/soc/codecs/wm8962.c                                 | 2 ++
 sound/soc/codecs/wm8993.c                                 | 1 +
 sound/soc/codecs/wm8994.c                                 | 1 +
 sound/soc/codecs/wm_adsp.c                                | 1 +
 sound/soc/codecs/wm_hubs.c                                | 1 +
 sound/soc/codecs/wsa881x.c                                | 1 +
 sound/soc/fsl/fsl-asoc-card.c                             | 1 +
 sound/soc/fsl/fsl_asrc.c                                  | 1 +
 sound/soc/fsl/fsl_dma.c                                   | 1 +
 sound/soc/fsl/fsl_easrc.c                                 | 1 +
 sound/soc/fsl/fsl_esai.c                                  | 1 +
 sound/soc/fsl/fsl_sai.c                                   | 1 +
 sound/soc/fsl/fsl_spdif.c                                 | 1 +
 sound/soc/fsl/fsl_ssi.c                                   | 1 +
 sound/soc/fsl/fsl_utils.c                                 | 1 +
 sound/soc/fsl/imx-audio-rpmsg.c                           | 1 +
 sound/soc/fsl/imx-audmux.c                                | 1 +
 sound/soc/fsl/imx-pcm-fiq.c                               | 1 +
 sound/soc/fsl/imx-pcm-rpmsg.c                             | 1 +
 sound/soc/fsl/mpc5200_dma.c                               | 1 +
 sound/soc/generic/audio-graph-card.c                      | 1 +
 sound/soc/generic/simple-card-utils.c                     | 1 +
 sound/soc/generic/simple-card.c                           | 1 +
 sound/soc/generic/test-component.c                        | 1 +
 sound/soc/intel/atom/sst-mfld-platform-pcm.c              | 1 +
 sound/soc/intel/atom/sst/sst.c                            | 1 +
 sound/soc/intel/atom/sst/sst_acpi.c                       | 1 +
 sound/soc/intel/atom/sst/sst_pci.c                        | 1 +
 sound/soc/intel/avs/avs.h                                 | 1 +
 sound/soc/intel/avs/boards/hdaudio.c                      | 1 +
 sound/soc/intel/avs/cldma.c                               | 2 ++
 sound/soc/intel/avs/core.c                                | 1 +
 sound/soc/intel/avs/debugfs.c                             | 1 +
 sound/soc/intel/avs/ipc.c                                 | 1 +
 sound/soc/intel/avs/loader.c                              | 2 ++
 sound/soc/intel/avs/pcm.c                                 | 1 +
 sound/soc/intel/avs/topology.c                            | 1 +
 sound/soc/intel/avs/trace.h                               | 1 +
 sound/soc/intel/boards/bxt_da7219_max98357a.c             | 1 +
 sound/soc/intel/boards/bxt_rt298.c                        | 1 +
 sound/soc/intel/boards/bytcht_cx2072x.c                   | 1 +
 sound/soc/intel/boards/bytcht_da7213.c                    | 1 +
 sound/soc/intel/boards/bytcht_es8316.c                    | 2 ++
 sound/soc/intel/boards/bytcr_rt5640.c                     | 1 +
 sound/soc/intel/boards/bytcr_rt5651.c                     | 1 +
 sound/soc/intel/boards/bytcr_wm5102.c                     | 1 +
 sound/soc/intel/boards/cht_bsw_rt5645.c                   | 1 +
 sound/soc/intel/boards/cht_bsw_rt5672.c                   | 1 +
 sound/soc/intel/boards/cml_rt1011_rt5682.c                | 1 +
 sound/soc/intel/boards/glk_rt5682_max98357a.c             | 1 +
 sound/soc/intel/boards/kbl_da7219_max98357a.c             | 1 +
 sound/soc/intel/boards/kbl_da7219_max98927.c              | 1 +
 sound/soc/intel/boards/kbl_rt5660.c                       | 1 +
 sound/soc/intel/boards/kbl_rt5663_max98927.c              | 1 +
 sound/soc/intel/boards/kbl_rt5663_rt5514_max98927.c       | 1 +
 sound/soc/intel/boards/skl_hda_dsp_common.c               | 1 +
 sound/soc/intel/boards/skl_hda_dsp_generic.c              | 1 +
 sound/soc/intel/boards/skl_nau88l25_max98357a.c           | 1 +
 sound/soc/intel/boards/skl_nau88l25_ssm4567.c             | 1 +
 sound/soc/intel/boards/skl_rt286.c                        | 1 +
 sound/soc/intel/boards/sof_es8336.c                       | 1 +
 sound/soc/intel/boards/sof_maxim_common.c                 | 1 +
 sound/soc/intel/boards/sof_sdw.c                          | 1 +
 sound/soc/intel/boards/sof_sdw_cs_amp.c                   | 1 +
 sound/soc/intel/boards/sof_sdw_maxim.c                    | 1 +
 sound/soc/intel/boards/sof_sdw_rt_amp.c                   | 1 +
 sound/soc/intel/boards/sof_wm8804.c                       | 1 +
 sound/soc/intel/catpt/device.c                            | 1 +
 sound/soc/intel/catpt/ipc.c                               | 1 +
 sound/soc/intel/catpt/loader.c                            | 1 +
 sound/soc/intel/skylake/skl-debug.c                       | 1 +
 sound/soc/intel/skylake/skl-nhlt.c                        | 1 +
 sound/soc/intel/skylake/skl-sst-cldma.c                   | 1 +
 sound/soc/intel/skylake/skl-sst.c                         | 1 +
 sound/soc/intel/skylake/skl-topology.c                    | 1 +
 sound/soc/loongson/loongson_card.c                        | 1 +
 sound/soc/loongson/loongson_dma.c                         | 1 +
 sound/soc/mediatek/common/mtk-afe-fe-dai.c                | 1 +
 sound/soc/mediatek/mt2701/mt2701-afe-clock-ctrl.c         | 1 +
 sound/soc/mediatek/mt8186/mt8186-mt6366-da7219-max98357.c | 1 +
 sound/soc/mediatek/mt8186/mt8186-mt6366-rt1019-rt5682s.c  | 1 +
 sound/soc/mediatek/mt8188/mt8188-dai-etdm.c               | 1 +
 sound/soc/mediatek/mt8188/mt8188-mt6359.c                 | 1 +
 sound/soc/mediatek/mt8195/mt8195-dai-etdm.c               | 1 +
 sound/soc/mediatek/mt8195/mt8195-mt6359.c                 | 1 +
 sound/soc/meson/axg-card.c                                | 1 +
 sound/soc/qcom/qdsp6/q6apm.h                              | 1 +
 sound/soc/qcom/qdsp6/q6asm.c                              | 1 +
 sound/soc/qcom/qdsp6/topology.c                           | 1 +
 sound/soc/sh/fsi.c                                        | 1 +
 sound/soc/sh/rcar/adg.c                                   | 1 +
 sound/soc/sh/rcar/core.c                                  | 1 +
 sound/soc/sh/rcar/ctu.c                                   | 1 +
 sound/soc/sh/rcar/debugfs.c                               | 1 +
 sound/soc/sh/rcar/dvc.c                                   | 1 +
 sound/soc/sh/rcar/mix.c                                   | 1 +
 sound/soc/sh/rcar/src.c                                   | 1 +
 sound/soc/sh/rcar/ssi.c                                   | 1 +
 sound/soc/soc-component.c                                 | 1 +
 sound/soc/soc-compress.c                                  | 1 +
 sound/soc/soc-core.c                                      | 2 ++
 sound/soc/soc-dapm.c                                      | 1 +
 sound/soc/soc-pcm.c                                       | 1 +
 sound/soc/soc-topology.c                                  | 1 +
 sound/soc/sof/amd/acp-loader.c                            | 2 ++
 sound/soc/sof/amd/acp-stream.c                            | 1 +
 sound/soc/sof/debug.c                                     | 1 +
 sound/soc/sof/fw-file-profile.c                           | 1 +
 sound/soc/sof/intel/hda-ctrl.c                            | 1 +
 sound/soc/sof/intel/hda-loader-skl.c                      | 1 +
 sound/soc/sof/intel/hda-loader.c                          | 1 +
 sound/soc/sof/intel/hda-stream.c                          | 2 ++
 sound/soc/sof/intel/hda.c                                 | 1 +
 sound/soc/sof/intel/mtl.c                                 | 1 +
 sound/soc/sof/ipc3-dtrace.c                               | 1 +
 sound/soc/sof/ipc4-loader.c                               | 1 +
 sound/soc/sof/ipc4-mtrace.c                               | 1 +
 sound/soc/sof/loader.c                                    | 1 +
 sound/soc/sof/sof-audio.h                                 | 1 +
 sound/soc/sof/sof-client-ipc-flood-test.c                 | 2 ++
 sound/soc/sof/sof-client-probes.c                         | 1 +
 sound/soc/stm/stm32_adfsdm.c                              | 1 +
 sound/soc/tegra/tegra30_ahub.c                            | 1 +
 sound/soc/ti/j721e-evm.c                                  | 1 +
 sound/soc/ti/omap-mcbsp-st.c                              | 1 +
 sound/soc/ti/omap-mcbsp.c                                 | 1 +
 sound/soc/xilinx/xlnx_formatter_pcm.c                     | 1 +
 sound/sound_core.c                                        | 1 +
 sound/sparc/amd7930.c                                     | 1 +
 sound/sparc/cs4231.c                                      | 1 +
 sound/sparc/dbri.c                                        | 1 +
 sound/spi/at73c213.c                                      | 1 +
 sound/synth/emux/emux_oss.c                               | 1 +
 sound/synth/emux/emux_proc.c                              | 1 +
 sound/synth/emux/emux_seq.c                               | 1 +
 sound/usb/6fire/chip.c                                    | 1 +
 sound/usb/bcd2000/bcd2000.c                               | 1 +
 sound/usb/caiaq/device.c                                  | 1 +
 sound/usb/card.c                                          | 1 +
 sound/usb/line6/driver.c                                  | 1 +
 sound/usb/line6/toneport.c                                | 1 +
 sound/usb/midi.c                                          | 1 +
 sound/usb/midi2.c                                         | 1 +
 sound/usb/misc/ua101.c                                    | 1 +
 sound/usb/mixer.c                                         | 1 +
 sound/usb/mixer_quirks.c                                  | 1 +
 sound/usb/mixer_scarlett.c                                | 1 +
 sound/usb/mixer_scarlett2.c                               | 1 +
 sound/usb/proc.c                                          | 1 +
 sound/usb/stream.c                                        | 1 +
 sound/usb/usx2y/us122l.c                                  | 1 +
 sound/usb/usx2y/usX2Yhwdep.c                              | 1 +
 sound/usb/usx2y/usbusx2y.c                                | 1 +
 sound/usb/usx2y/usbusx2yaudio.c                           | 1 +
 sound/usb/usx2y/usx2yhwdeppcm.c                           | 1 +
 sound/virtio/virtio_card.c                                | 1 +
 sound/virtio/virtio_ctl_msg.c                             | 1 +
 sound/virtio/virtio_pcm.c                                 | 1 +
 sound/x86/intel_hdmi_audio.c                              | 1 +
 sound/xen/xen_snd_front.c                                 | 1 +
 sound/xen/xen_snd_front_cfg.c                             | 1 +
 sound/xen/xen_snd_front_evtchnl.c                         | 2 ++
 tools/testing/nvdimm/test/iomap.c                         | 2 ++
 virt/kvm/kvm_main.c                                       | 3 +++
 virt/kvm/vfio.c                                           | 1 +
 6843 files changed, 8828 insertions(+), 9 deletions(-)

diff --git a/arch/alpha/boot/stdio.c b/arch/alpha/boot/stdio.c
index faa5234b90b8..002d29be4f28 100644
--- a/arch/alpha/boot/stdio.c
+++ b/arch/alpha/boot/stdio.c
@@ -4,6 +4,7 @@
  */
 #include <linux/string.h>
 #include <linux/stdarg.h>
+#include <linux/sprintf.h>
 
 size_t strnlen(const char * s, size_t count)
 {
diff --git a/arch/alpha/kernel/bugs.c b/arch/alpha/kernel/bugs.c
index 08cc10d7fa17..5ca50e9a2cb2 100644
--- a/arch/alpha/kernel/bugs.c
+++ b/arch/alpha/kernel/bugs.c
@@ -1,6 +1,7 @@
 
 #include <asm/hwrpb.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 
 #ifdef CONFIG_SYSFS
diff --git a/arch/alpha/kernel/core_marvel.c b/arch/alpha/kernel/core_marvel.c
index e9348aec4649..c3366f9d59f5 100644
--- a/arch/alpha/kernel/core_marvel.c
+++ b/arch/alpha/kernel/core_marvel.c
@@ -8,6 +8,8 @@
 #define __EXTERN_INLINE inline
 #include <asm/io.h>
 #include <asm/core_marvel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #undef __EXTERN_INLINE
 
 #include <linux/types.h>
diff --git a/arch/alpha/kernel/err_marvel.c b/arch/alpha/kernel/err_marvel.c
index c0c0ccefc467..dcc1f39f3203 100644
--- a/arch/alpha/kernel/err_marvel.c
+++ b/arch/alpha/kernel/err_marvel.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/pci.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #include <asm/io.h>
 #include <asm/console.h>
diff --git a/arch/alpha/kernel/pci-sysfs.c b/arch/alpha/kernel/pci-sysfs.c
index 5808a66e2a81..d27743a8ea16 100644
--- a/arch/alpha/kernel/pci-sysfs.c
+++ b/arch/alpha/kernel/pci-sysfs.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
diff --git a/arch/alpha/kernel/rtc.c b/arch/alpha/kernel/rtc.c
index cfdf90bc8b3f..5587411e210a 100644
--- a/arch/alpha/kernel/rtc.c
+++ b/arch/alpha/kernel/rtc.c
@@ -9,6 +9,7 @@
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/param.h>
 #include <linux/string.h>
 #include <linux/mc146818rtc.h>
diff --git a/arch/alpha/kernel/setup.c b/arch/alpha/kernel/setup.c
index 0738f9396f95..0e5b764bd02d 100644
--- a/arch/alpha/kernel/setup.c
+++ b/arch/alpha/kernel/setup.c
@@ -13,6 +13,7 @@
 
 #include <linux/sched.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/stddef.h>
 #include <linux/unistd.h>
diff --git a/arch/alpha/kernel/srm_env.c b/arch/alpha/kernel/srm_env.c
index 217b4dca51dd..38355c9ff92e 100644
--- a/arch/alpha/kernel/srm_env.c
+++ b/arch/alpha/kernel/srm_env.c
@@ -19,6 +19,7 @@
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
 #include <asm/console.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/machvec.h>
 
diff --git a/arch/arc/kernel/mcip.c b/arch/arc/kernel/mcip.c
index 55373ca0d28b..73c365553a91 100644
--- a/arch/arc/kernel/mcip.c
+++ b/arch/arc/kernel/mcip.c
@@ -9,6 +9,7 @@
 #include <linux/irq.h>
 #include <linux/irqchip/chained_irq.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <soc/arc/mcip.h>
 #include <asm/irqflags-arcv2.h>
 #include <asm/setup.h>
diff --git a/arch/arc/kernel/perf_event.c b/arch/arc/kernel/perf_event.c
index adff957962da..9d43a9988812 100644
--- a/arch/arc/kernel/perf_event.c
+++ b/arch/arc/kernel/perf_event.c
@@ -7,12 +7,14 @@
 
 #include <linux/errno.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/perf_event.h>
 #include <linux/platform_device.h>
 #include <asm/arcregs.h>
 #include <asm/stacktrace.h>
+#include <linux/sprintf.h>
 
 /* HW holds 8 symbols + one for null terminator */
 #define ARCPMU_EVENT_NAME_LEN	9
diff --git a/arch/arc/kernel/setup.c b/arch/arc/kernel/setup.c
index d08a5092c2b4..c12753010b1f 100644
--- a/arch/arc/kernel/setup.c
+++ b/arch/arc/kernel/setup.c
@@ -17,6 +17,7 @@
 #include <linux/of_fdt.h>
 #include <linux/of.h>
 #include <linux/cache.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/mount.h>
 #include <asm/sections.h>
 #include <asm/arcregs.h>
diff --git a/arch/arc/mm/cache.c b/arch/arc/mm/cache.c
index 9106ceac323c..4dffa5e3912b 100644
--- a/arch/arc/mm/cache.c
+++ b/arch/arc/mm/cache.c
@@ -10,7 +10,9 @@
 #include <linux/mm.h>
 #include <linux/sched.h>
 #include <linux/cache.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mmu_context.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls.h>
 #include <linux/uaccess.h>
 #include <linux/pagemap.h>
diff --git a/arch/arc/mm/tlb.c b/arch/arc/mm/tlb.c
index ad702b49aeb3..cea563ba71a8 100644
--- a/arch/arc/mm/tlb.c
+++ b/arch/arc/mm/tlb.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/bug.h>
 #include <linux/mm_types.h>
+#include <linux/sprintf.h>
 
 #include <asm/arcregs.h>
 #include <asm/setup.h>
diff --git a/arch/arc/plat-axs10x/axs10x.c b/arch/arc/plat-axs10x/axs10x.c
index 1feb990a56bc..8077c5c1b898 100644
--- a/arch/arc/plat-axs10x/axs10x.c
+++ b/arch/arc/plat-axs10x/axs10x.c
@@ -7,6 +7,7 @@
 
 #include <linux/of_fdt.h>
 #include <linux/libfdt.h>
+#include <linux/sprintf.h>
 
 #include <asm/asm-offsets.h>
 #include <asm/io.h>
diff --git a/arch/arm/common/bL_switcher.c b/arch/arm/common/bL_switcher.c
index 9a9aa53547a6..efb82c054e0f 100644
--- a/arch/arm/common/bL_switcher.c
+++ b/arch/arm/common/bL_switcher.c
@@ -7,10 +7,13 @@
  */
 
 #include <linux/atomic.h>
+#include <linux/completion.h>
+#include <linux/device.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/sched/types.h>
 #include <linux/interrupt.h>
 #include <linux/cpu_pm.h>
diff --git a/arch/arm/include/asm/arch_gicv3.h b/arch/arm/include/asm/arch_gicv3.h
index 311e83038bdb..f484a0547bb1 100644
--- a/arch/arm/include/asm/arch_gicv3.h
+++ b/arch/arm/include/asm/arch_gicv3.h
@@ -14,6 +14,7 @@
 #include <asm/barrier.h>
 #include <asm/cacheflush.h>
 #include <asm/cp15.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define ICC_EOIR1			__ACCESS_CP15(c12, 0, c12, 1)
 #define ICC_DIR				__ACCESS_CP15(c12, 0, c11, 1)
diff --git a/arch/arm/include/asm/smp.h b/arch/arm/include/asm/smp.h
index 8c05a7f374d8..a9b89510d14c 100644
--- a/arch/arm/include/asm/smp.h
+++ b/arch/arm/include/asm/smp.h
@@ -17,6 +17,7 @@
 
 #define raw_smp_processor_id() (current_thread_info()->cpu)
 
+struct completion;
 struct seq_file;
 
 /*
diff --git a/arch/arm/kernel/bios32.c b/arch/arm/kernel/bios32.c
index d334c7fb672b..eb651cbb2d46 100644
--- a/arch/arm/kernel/bios32.c
+++ b/arch/arm/kernel/bios32.c
@@ -12,6 +12,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <asm/mach-types.h>
 #include <asm/mach/map.h>
diff --git a/arch/arm/kernel/setup.c b/arch/arm/kernel/setup.c
index 7b33b157fca0..d35939a51038 100644
--- a/arch/arm/kernel/setup.c
+++ b/arch/arm/kernel/setup.c
@@ -7,6 +7,7 @@
 #include <linux/efi.h>
 #include <linux/export.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/delay.h>
diff --git a/arch/arm/kernel/spectre.c b/arch/arm/kernel/spectre.c
index 0dcefc36fb7a..47c622556a36 100644
--- a/arch/arm/kernel/spectre.c
+++ b/arch/arm/kernel/spectre.c
@@ -2,6 +2,7 @@
 #include <linux/bpf.h>
 #include <linux/cpu.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include <asm/spectre.h>
 
diff --git a/arch/arm/kernel/traps.c b/arch/arm/kernel/traps.c
index 3bad79db5d6e..2671281e8514 100644
--- a/arch/arm/kernel/traps.c
+++ b/arch/arm/kernel/traps.c
@@ -13,6 +13,7 @@
 #include <linux/personality.h>
 #include <linux/kallsyms.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/hardirq.h>
 #include <linux/kdebug.h>
diff --git a/arch/arm/mach-aspeed/platsmp.c b/arch/arm/mach-aspeed/platsmp.c
index 2324becf7991..2bcf982198f4 100644
--- a/arch/arm/mach-aspeed/platsmp.c
+++ b/arch/arm/mach-aspeed/platsmp.c
@@ -6,6 +6,7 @@
 #include <linux/io.h>
 #include <linux/of.h>
 #include <linux/smp.h>
+#include <asm/spinlock.h> // for dsb_sev()
 
 #define BOOT_ADDR	0x00
 #define BOOT_SIG	0x04
diff --git a/arch/arm/mach-at91/sam_secure.c b/arch/arm/mach-at91/sam_secure.c
index f7789cbe289f..b9520102593b 100644
--- a/arch/arm/mach-at91/sam_secure.c
+++ b/arch/arm/mach-at91/sam_secure.c
@@ -4,7 +4,9 @@
  */
 
 #include <linux/arm-smccc.h>
+#include <linux/printk.h> // for pr_info()
 #include <linux/of.h>
+#include <asm/bug.h> // for WARN_ON()
 
 #include "sam_secure.h"
 
diff --git a/arch/arm/mach-ep93xx/core.c b/arch/arm/mach-ep93xx/core.c
index 71b113976420..31871df76552 100644
--- a/arch/arm/mach-ep93xx/core.c
+++ b/arch/arm/mach-ep93xx/core.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/irq.h>
 #include <linux/io.h>
diff --git a/arch/arm/mach-footbridge/common.c b/arch/arm/mach-footbridge/common.c
index 85c598708c10..ff99a2b79cd7 100644
--- a/arch/arm/mach-footbridge/common.c
+++ b/arch/arm/mach-footbridge/common.c
@@ -8,6 +8,7 @@
 #include <linux/types.h>
 #include <linux/mm.h>
 #include <linux/ioport.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/init.h>
 #include <linux/io.h>
diff --git a/arch/arm/mach-mvebu/mvebu-soc-id.c b/arch/arm/mach-mvebu/mvebu-soc-id.c
index f436c7b8c7ae..795f8efc285a 100644
--- a/arch/arm/mach-mvebu/mvebu-soc-id.c
+++ b/arch/arm/mach-mvebu/mvebu-soc-id.c
@@ -21,6 +21,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include "common.h"
 #include "mvebu-soc-id.h"
diff --git a/arch/arm/mach-mvebu/pm-board.c b/arch/arm/mach-mvebu/pm-board.c
index beec22e17e89..53d0a8b225c7 100644
--- a/arch/arm/mach-mvebu/pm-board.c
+++ b/arch/arm/mach-mvebu/pm-board.c
@@ -16,6 +16,7 @@
 #include <linux/of_address.h>
 #include <linux/slab.h>
 #include "common.h"
+#include <linux/sprintf.h>
 
 #define ARMADA_PIC_NR_GPIOS 3
 
diff --git a/arch/arm/mach-mxs/mach-mxs.c b/arch/arm/mach-mxs/mach-mxs.c
index 6e017fa306c8..8e99534eef4c 100644
--- a/arch/arm/mach-mxs/mach-mxs.c
+++ b/arch/arm/mach-mxs/mach-mxs.c
@@ -16,6 +16,7 @@
 #include <linux/of_address.h>
 #include <linux/of_platform.h>
 #include <linux/phy.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <asm/mach/arch.h>
 #include <asm/mach/map.h>
diff --git a/arch/arm/mach-omap1/omap-dma.c b/arch/arm/mach-omap1/omap-dma.c
index 9ee472f8ead1..bde4f10d19d9 100644
--- a/arch/arm/mach-omap1/omap-dma.c
+++ b/arch/arm/mach-omap1/omap-dma.c
@@ -31,6 +31,7 @@
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <linux/omap-dma.h>
 
diff --git a/arch/arm/mach-omap1/pm.c b/arch/arm/mach-omap1/pm.c
index 6a5815aa05e6..c78a9929ee76 100644
--- a/arch/arm/mach-omap1/pm.c
+++ b/arch/arm/mach-omap1/pm.c
@@ -40,6 +40,7 @@
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/module.h>
 #include <linux/io.h>
diff --git a/arch/arm/mach-omap2/id.c b/arch/arm/mach-omap2/id.c
index 7f387706368a..b369450f00b7 100644
--- a/arch/arm/mach-omap2/id.c
+++ b/arch/arm/mach-omap2/id.c
@@ -17,6 +17,7 @@
 #include <linux/io.h>
 #include <linux/random.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_SOC_BUS
 #include <linux/sys_soc.h>
diff --git a/arch/arm/mach-omap2/sr_device.c b/arch/arm/mach-omap2/sr_device.c
index d2133423b0c9..a2a1639ada86 100644
--- a/arch/arm/mach-omap2/sr_device.c
+++ b/arch/arm/mach-omap2/sr_device.c
@@ -15,6 +15,7 @@
  * Lesly A M <x0080970@ti.com>
  */
 #include <linux/power/smartreflex.h>
+#include <linux/sprintf.h>
 
 #include <linux/err.h>
 #include <linux/slab.h>
diff --git a/arch/arm/mach-orion5x/ts78xx-setup.c b/arch/arm/mach-orion5x/ts78xx-setup.c
index af810e7ccd79..460a3ec0feef 100644
--- a/arch/arm/mach-orion5x/ts78xx-setup.c
+++ b/arch/arm/mach-orion5x/ts78xx-setup.c
@@ -9,6 +9,7 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/platform_device.h>
 #include <linux/mv643xx_eth.h>
diff --git a/arch/arm/mach-pxa/am300epd.c b/arch/arm/mach-pxa/am300epd.c
index 4b55bc89db8f..c4b1b1da0fe6 100644
--- a/arch/arm/mach-pxa/am300epd.c
+++ b/arch/arm/mach-pxa/am300epd.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
diff --git a/arch/arm/mach-pxa/sharpsl_pm.c b/arch/arm/mach-pxa/sharpsl_pm.c
index 72fa2e3fd353..0f5735b56bdd 100644
--- a/arch/arm/mach-pxa/sharpsl_pm.c
+++ b/arch/arm/mach-pxa/sharpsl_pm.c
@@ -15,6 +15,7 @@
 #include <linux/interrupt.h>
 #include <linux/platform_device.h>
 #include <linux/apm-emulation.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/delay.h>
 #include <linux/leds.h>
diff --git a/arch/arm/mach-rpc/ecard.c b/arch/arm/mach-rpc/ecard.c
index c30df1097c52..88f2ed487aff 100644
--- a/arch/arm/mach-rpc/ecard.c
+++ b/arch/arm/mach-rpc/ecard.c
@@ -26,6 +26,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sched.h>
 #include <linux/sched/mm.h>
diff --git a/arch/arm/mach-shmobile/smp-sh73a0.c b/arch/arm/mach-shmobile/smp-sh73a0.c
index 9196b37ea292..5430fdb2d732 100644
--- a/arch/arm/mach-shmobile/smp-sh73a0.c
+++ b/arch/arm/mach-shmobile/smp-sh73a0.c
@@ -7,6 +7,7 @@
  */
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/ioport.h> // for request_mem_region()
 #include <linux/smp.h>
 #include <linux/io.h>
 #include <linux/delay.h>
diff --git a/arch/arm/mach-versatile/spc.c b/arch/arm/mach-versatile/spc.c
index 5e44170e1a9a..f366b8997f6f 100644
--- a/arch/arm/mach-versatile/spc.c
+++ b/arch/arm/mach-versatile/spc.c
@@ -11,6 +11,7 @@
 
 #include <linux/clk-provider.h>
 #include <linux/clkdev.h>
+#include <linux/completion.h>
 #include <linux/cpu.h>
 #include <linux/delay.h>
 #include <linux/err.h>
diff --git a/arch/arm/mach-zynq/common.c b/arch/arm/mach-zynq/common.c
index 15e8a321a713..8e97a1c7bd3b 100644
--- a/arch/arm/mach-zynq/common.c
+++ b/arch/arm/mach-zynq/common.c
@@ -23,6 +23,7 @@
 #include <linux/irqchip.h>
 #include <linux/irqchip/arm-gic.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/pgtable.h>
 
diff --git a/arch/arm/mm/cache-l2x0-pmu.c b/arch/arm/mm/cache-l2x0-pmu.c
index 993fefdc167a..083666ffa43c 100644
--- a/arch/arm/mm/cache-l2x0-pmu.c
+++ b/arch/arm/mm/cache-l2x0-pmu.c
@@ -4,10 +4,12 @@
  *
  * Copyright (C) 2016 ARM Limited
  */
+#include <linux/device.h>
 #include <linux/errno.h>
 #include <linux/hrtimer.h>
 #include <linux/io.h>
 #include <linux/list.h>
+#include <linux/kobject.h>
 #include <linux/perf_event.h>
 #include <linux/printk.h>
 #include <linux/slab.h>
diff --git a/arch/arm64/include/asm/mmu_context.h b/arch/arm64/include/asm/mmu_context.h
index 9ce4200508b1..b79da992a76e 100644
--- a/arch/arm64/include/asm/mmu_context.h
+++ b/arch/arm64/include/asm/mmu_context.h
@@ -17,6 +17,7 @@
 #include <linux/pgtable.h>
 
 #include <asm/cacheflush.h>
+#include <asm/compat.h> // for is_compat_thread()
 #include <asm/cpufeature.h>
 #include <asm/daifflags.h>
 #include <asm/proc-fns.h>
diff --git a/arch/arm64/include/asm/syscall.h b/arch/arm64/include/asm/syscall.h
index ab8e14b96f68..107ada608694 100644
--- a/arch/arm64/include/asm/syscall.h
+++ b/arch/arm64/include/asm/syscall.h
@@ -8,6 +8,7 @@
 #include <uapi/linux/audit.h>
 #include <linux/compat.h>
 #include <linux/err.h>
+#include <linux/kernel.h> // for lower_32_bits()
 
 typedef long (*syscall_fn_t)(const struct pt_regs *regs);
 
diff --git a/arch/arm64/kernel/cpufeature.c b/arch/arm64/kernel/cpufeature.c
index 0f29ac43c7a2..2649e22fbf8a 100644
--- a/arch/arm64/kernel/cpufeature.c
+++ b/arch/arm64/kernel/cpufeature.c
@@ -65,8 +65,10 @@
 #include <linux/bsearch.h>
 #include <linux/cpumask.h>
 #include <linux/crash_dump.h>
+#include <linux/device.h>
 #include <linux/kstrtox.h>
 #include <linux/sort.h>
+#include <linux/sprintf.h>
 #include <linux/stop_machine.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
diff --git a/arch/arm64/kernel/cpuinfo.c b/arch/arm64/kernel/cpuinfo.c
index 7ca3fbd200f0..2e9e1420e582 100644
--- a/arch/arm64/kernel/cpuinfo.c
+++ b/arch/arm64/kernel/cpuinfo.c
@@ -10,6 +10,7 @@
 #include <asm/cputype.h>
 #include <asm/cpufeature.h>
 #include <asm/fpsimd.h>
+#include <linux/sprintf.h>
 
 #include <linux/bitops.h>
 #include <linux/bug.h>
@@ -23,6 +24,7 @@
 #include <linux/seq_file.h>
 #include <linux/sched.h>
 #include <linux/smp.h>
+#include <linux/sysfs.h> // for __ATTR_RO()
 #include <linux/delay.h>
 
 /*
diff --git a/arch/arm64/kernel/entry-common.c b/arch/arm64/kernel/entry-common.c
index 0fc94207e69a..18736a3aa5f4 100644
--- a/arch/arm64/kernel/entry-common.c
+++ b/arch/arm64/kernel/entry-common.c
@@ -9,6 +9,7 @@
 #include <linux/kasan.h>
 #include <linux/linkage.h>
 #include <linux/lockdep.h>
+#include <linux/ftrace.h> // for CALLER_ADDR0
 #include <linux/ptrace.h>
 #include <linux/sched.h>
 #include <linux/sched/debug.h>
diff --git a/arch/arm64/kernel/ftrace.c b/arch/arm64/kernel/ftrace.c
index a650f5e11fc5..f6c271405c12 100644
--- a/arch/arm64/kernel/ftrace.c
+++ b/arch/arm64/kernel/ftrace.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/swab.h>
 #include <linux/uaccess.h>
+#include <linux/ratelimit.h>
 
 #include <asm/cacheflush.h>
 #include <asm/debug-monitors.h>
diff --git a/arch/arm64/kernel/mte.c b/arch/arm64/kernel/mte.c
index a41ef3213e1e..2b8abe086445 100644
--- a/arch/arm64/kernel/mte.c
+++ b/arch/arm64/kernel/mte.c
@@ -5,6 +5,7 @@
 
 #include <linux/bitops.h>
 #include <linux/cpu.h>
+#include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
 #include <linux/prctl.h>
@@ -13,6 +14,7 @@
 #include <linux/string.h>
 #include <linux/swap.h>
 #include <linux/swapops.h>
+#include <linux/sysfs.h>
 #include <linux/thread_info.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
diff --git a/arch/arm64/kernel/probes/decode-insn.h b/arch/arm64/kernel/probes/decode-insn.h
index 8b758c5a2062..72fb80c3c82a 100644
--- a/arch/arm64/kernel/probes/decode-insn.h
+++ b/arch/arm64/kernel/probes/decode-insn.h
@@ -9,6 +9,7 @@
 #define _ARM_KERNEL_KPROBES_ARM64_H
 
 #include <asm/kprobes.h>
+#include <asm/probes.h>
 
 /*
  * ARM strongly recommends a limit of 128 bytes between LoadExcl and
diff --git a/arch/arm64/kernel/proton-pack.c b/arch/arm64/kernel/proton-pack.c
index 6268a13a1d58..59f023041717 100644
--- a/arch/arm64/kernel/proton-pack.c
+++ b/arch/arm64/kernel/proton-pack.c
@@ -24,6 +24,7 @@
 #include <linux/nospec.h>
 #include <linux/prctl.h>
 #include <linux/sched/task_stack.h>
+#include <linux/sprintf.h>
 
 #include <asm/debug-monitors.h>
 #include <asm/insn.h>
diff --git a/arch/arm64/kernel/smp.c b/arch/arm64/kernel/smp.c
index 4ced34f62dab..94cc4ce99d76 100644
--- a/arch/arm64/kernel/smp.c
+++ b/arch/arm64/kernel/smp.c
@@ -30,6 +30,7 @@
 #include <linux/completion.h>
 #include <linux/of.h>
 #include <linux/irq_work.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/kernel_stat.h>
 #include <linux/kexec.h>
 #include <linux/kgdb.h>
diff --git a/arch/arm64/kernel/traps.c b/arch/arm64/kernel/traps.c
index 215e6d7f2df8..163aafeedf7f 100644
--- a/arch/arm64/kernel/traps.c
+++ b/arch/arm64/kernel/traps.c
@@ -8,10 +8,13 @@
 
 #include <linux/bug.h>
 #include <linux/context_tracking.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/signal.h>
 #include <linux/kallsyms.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kprobes.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/hardirq.h>
 #include <linux/kdebug.h>
diff --git a/arch/arm64/kvm/arch_timer.c b/arch/arm64/kvm/arch_timer.c
index 9dec8c419bf4..70010931a478 100644
--- a/arch/arm64/kvm/arch_timer.c
+++ b/arch/arm64/kvm/arch_timer.c
@@ -5,12 +5,16 @@
  */
 
 #include <linux/cpu.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
 #include <linux/irqdomain.h>
 #include <linux/uaccess.h>
+#include <linux/hrtimer.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/ratelimit.h>
 
 #include <clocksource/arm_arch_timer.h>
 #include <asm/arch_timer.h>
diff --git a/arch/arm64/kvm/handle_exit.c b/arch/arm64/kvm/handle_exit.c
index 617ae6dea5d5..a82b4b31bb36 100644
--- a/arch/arm64/kvm/handle_exit.c
+++ b/arch/arm64/kvm/handle_exit.c
@@ -10,6 +10,7 @@
 
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <asm/esr.h>
 #include <asm/exception.h>
diff --git a/arch/arm64/kvm/hypercalls.c b/arch/arm64/kvm/hypercalls.c
index 5763d979d8ca..25a54df14361 100644
--- a/arch/arm64/kvm/hypercalls.c
+++ b/arch/arm64/kvm/hypercalls.c
@@ -2,7 +2,9 @@
 // Copyright (C) 2019 Arm Ltd.
 
 #include <linux/arm-smccc.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kvm_host.h>
+#include <linux/ratelimit.h>
 
 #include <asm/kvm_emulate.h>
 
diff --git a/arch/arm64/kvm/pmu-emul.c b/arch/arm64/kvm/pmu-emul.c
index bf96bd656d86..990b30a43687 100644
--- a/arch/arm64/kvm/pmu-emul.c
+++ b/arch/arm64/kvm/pmu-emul.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/cpu.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
 #include <linux/list.h>
diff --git a/arch/arm64/kvm/psci.c b/arch/arm64/kvm/psci.c
index 1f69b667332b..2c590b89a1b4 100644
--- a/arch/arm64/kvm/psci.c
+++ b/arch/arm64/kvm/psci.c
@@ -5,7 +5,9 @@
  */
 
 #include <linux/arm-smccc.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/preempt.h>
+#include <linux/kernel.h> // for lower_32_bits()
 #include <linux/kvm_host.h>
 #include <linux/uaccess.h>
 #include <linux/wait.h>
diff --git a/arch/arm64/kvm/sys_regs.c b/arch/arm64/kvm/sys_regs.c
index f02b199f6f6c..26558c202709 100644
--- a/arch/arm64/kvm/sys_regs.c
+++ b/arch/arm64/kvm/sys_regs.c
@@ -12,6 +12,7 @@
 #include <linux/bitfield.h>
 #include <linux/bsearch.h>
 #include <linux/cacheinfo.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kvm_host.h>
 #include <linux/mm.h>
 #include <linux/printk.h>
diff --git a/arch/arm64/kvm/trng.c b/arch/arm64/kvm/trng.c
index 99bdd7103c9c..4e6d0a48a0f5 100644
--- a/arch/arm64/kvm/trng.c
+++ b/arch/arm64/kvm/trng.c
@@ -2,6 +2,7 @@
 // Copyright (C) 2020 Arm Ltd.
 
 #include <linux/arm-smccc.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kvm_host.h>
 
 #include <asm/kvm_emulate.h>
diff --git a/arch/arm64/kvm/vgic/vgic-mmio-v3.c b/arch/arm64/kvm/vgic/vgic-mmio-v3.c
index c15ee1df036a..17a84efac69c 100644
--- a/arch/arm64/kvm/vgic/vgic-mmio-v3.c
+++ b/arch/arm64/kvm/vgic/vgic-mmio-v3.c
@@ -5,9 +5,11 @@
 
 #include <linux/bitfield.h>
 #include <linux/irqchip/arm-gic-v3.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
 #include <linux/interrupt.h>
+#include <linux/ratelimit.h>
 #include <kvm/iodev.h>
 #include <kvm/arm_vgic.h>
 
diff --git a/arch/arm64/kvm/vgic/vgic-mmio.c b/arch/arm64/kvm/vgic/vgic-mmio.c
index cf76523a2194..bde2110e140f 100644
--- a/arch/arm64/kvm/vgic/vgic-mmio.c
+++ b/arch/arm64/kvm/vgic/vgic-mmio.c
@@ -9,6 +9,7 @@
 #include <linux/irq.h>
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
+#include <linux/ratelimit.h>
 #include <kvm/iodev.h>
 #include <kvm/arm_arch_timer.h>
 #include <kvm/arm_vgic.h>
diff --git a/arch/arm64/kvm/vgic/vgic-v2.c b/arch/arm64/kvm/vgic/vgic-v2.c
index 7e9cdb78f7ce..28adaf9ddf34 100644
--- a/arch/arm64/kvm/vgic/vgic-v2.c
+++ b/arch/arm64/kvm/vgic/vgic-v2.c
@@ -6,6 +6,7 @@
 #include <linux/irqchip/arm-gic.h>
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
+#include <linux/ratelimit.h>
 #include <kvm/arm_vgic.h>
 #include <asm/kvm_mmu.h>
 
diff --git a/arch/arm64/kvm/vgic/vgic-v3.c b/arch/arm64/kvm/vgic/vgic-v3.c
index 9465d3706ab9..dc6b5f5008fb 100644
--- a/arch/arm64/kvm/vgic/vgic-v3.c
+++ b/arch/arm64/kvm/vgic/vgic-v3.c
@@ -6,6 +6,7 @@
 #include <linux/kstrtox.h>
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
+#include <linux/ratelimit.h>
 #include <kvm/arm_vgic.h>
 #include <asm/kvm_hyp.h>
 #include <asm/kvm_mmu.h>
diff --git a/arch/arm64/kvm/vgic/vgic-v4.c b/arch/arm64/kvm/vgic/vgic-v4.c
index 74a67ad87f29..40ff8cc2b659 100644
--- a/arch/arm64/kvm/vgic/vgic-v4.c
+++ b/arch/arm64/kvm/vgic/vgic-v4.c
@@ -9,6 +9,7 @@
 #include <linux/irqdomain.h>
 #include <linux/kvm_host.h>
 #include <linux/irqchip/arm-gic-v3.h>
+#include <linux/ratelimit.h>
 
 #include "vgic.h"
 
diff --git a/arch/arm64/mm/fault.c b/arch/arm64/mm/fault.c
index 55f6455a8284..beaf009afaa1 100644
--- a/arch/arm64/mm/fault.c
+++ b/arch/arm64/mm/fault.c
@@ -10,6 +10,7 @@
 #include <linux/acpi.h>
 #include <linux/bitfield.h>
 #include <linux/extable.h>
+#include <linux/kernel.h> // for bust_spinlocks()
 #include <linux/kfence.h>
 #include <linux/signal.h>
 #include <linux/mm.h>
diff --git a/arch/loongarch/kernel/env.c b/arch/loongarch/kernel/env.c
index 2f1f5b08638f..ec0eaff5c01d 100644
--- a/arch/loongarch/kernel/env.c
+++ b/arch/loongarch/kernel/env.c
@@ -15,6 +15,7 @@
 #include <asm/loongson.h>
 #include <asm/setup.h>
 #include <asm/time.h>
+#include <linux/sprintf.h>
 
 u64 efi_system_table;
 struct loongson_system_configuration loongson_sysconf;
diff --git a/arch/m68k/atari/config.c b/arch/m68k/atari/config.c
index b48a0606a000..7c8e2b9649f6 100644
--- a/arch/m68k/atari/config.c
+++ b/arch/m68k/atari/config.c
@@ -32,6 +32,7 @@
 #include <linux/delay.h>
 #include <linux/ioport.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/usb/isp116x.h>
 #include <linux/vt_kern.h>
 #include <linux/module.h>
diff --git a/arch/m68k/bvme6000/config.c b/arch/m68k/bvme6000/config.c
index 8a2ee69a09f6..da4f83079103 100644
--- a/arch/m68k/bvme6000/config.c
+++ b/arch/m68k/bvme6000/config.c
@@ -14,6 +14,7 @@
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/clocksource.h>
 #include <linux/console.h>
diff --git a/arch/m68k/emu/natfeat.c b/arch/m68k/emu/natfeat.c
index 777c7b42a50f..edee77d28867 100644
--- a/arch/m68k/emu/natfeat.c
+++ b/arch/m68k/emu/natfeat.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/console.h>
 #include <linux/string.h>
diff --git a/arch/m68k/emu/nfblock.c b/arch/m68k/emu/nfblock.c
index a708fbd5a844..8295912d03e3 100644
--- a/arch/m68k/emu/nfblock.c
+++ b/arch/m68k/emu/nfblock.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/arch/m68k/mvme147/config.c b/arch/m68k/mvme147/config.c
index 8b5dc07f0811..893909201d34 100644
--- a/arch/m68k/mvme147/config.c
+++ b/arch/m68k/mvme147/config.c
@@ -13,6 +13,7 @@
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/clocksource.h>
 #include <linux/console.h>
diff --git a/arch/m68k/mvme16x/config.c b/arch/m68k/mvme16x/config.c
index d1fbd1704d65..e791bd60ef09 100644
--- a/arch/m68k/mvme16x/config.c
+++ b/arch/m68k/mvme16x/config.c
@@ -15,6 +15,7 @@
 #include <linux/kernel.h>
 #include <linux/mm.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/clocksource.h>
 #include <linux/console.h>
diff --git a/arch/m68k/q40/config.c b/arch/m68k/q40/config.c
index de7870ad2a30..43cce028135d 100644
--- a/arch/m68k/q40/config.c
+++ b/arch/m68k/q40/config.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
diff --git a/arch/m68k/virt/config.c b/arch/m68k/virt/config.c
index 632ba200ad42..c614fea18787 100644
--- a/arch/m68k/virt/config.c
+++ b/arch/m68k/virt/config.c
@@ -3,6 +3,7 @@
 #include <linux/reboot.h>
 #include <linux/serial_core.h>
 #include <clocksource/timer-goldfish.h>
+#include <linux/sprintf.h>
 
 #include <asm/bootinfo.h>
 #include <asm/bootinfo-virt.h>
diff --git a/arch/microblaze/kernel/traps.c b/arch/microblaze/kernel/traps.c
index 080aa769218d..f230ad83669f 100644
--- a/arch/microblaze/kernel/traps.c
+++ b/arch/microblaze/kernel/traps.c
@@ -12,6 +12,7 @@
 #include <linux/export.h>
 #include <linux/kernel.h>
 #include <linux/kallsyms.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/debug.h>
 #include <linux/debug_locks.h>
diff --git a/arch/mips/alchemy/common/dma.c b/arch/mips/alchemy/common/dma.c
index 973049b5bd61..6c0184cb0588 100644
--- a/arch/mips/alchemy/common/dma.c
+++ b/arch/mips/alchemy/common/dma.c
@@ -36,6 +36,7 @@
 #include <linux/errno.h>
 #include <linux/spinlock.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 
 #include <asm/mach-au1x00/au1000.h>
 #include <asm/mach-au1x00/au1000_dma.h>
diff --git a/arch/mips/alchemy/common/prom.c b/arch/mips/alchemy/common/prom.c
index 20d30f6265cd..82e55fcb890c 100644
--- a/arch/mips/alchemy/common/prom.c
+++ b/arch/mips/alchemy/common/prom.c
@@ -35,6 +35,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/memblock.h>
 #include <linux/sizes.h>
 #include <linux/string.h>
diff --git a/arch/mips/alchemy/devboards/pm.c b/arch/mips/alchemy/devboards/pm.c
index b17a0d199851..7f21958e9c8c 100644
--- a/arch/mips/alchemy/devboards/pm.c
+++ b/arch/mips/alchemy/devboards/pm.c
@@ -7,6 +7,8 @@
 
 #include <linux/init.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/sysfs.h>
 #include <asm/mach-au1x00/au1000.h>
diff --git a/arch/mips/ath79/setup.c b/arch/mips/ath79/setup.c
index 4e18cdcf65a0..150086c9dce1 100644
--- a/arch/mips/ath79/setup.c
+++ b/arch/mips/ath79/setup.c
@@ -18,6 +18,7 @@
 #include <linux/of_clk.h>
 #include <linux/of_fdt.h>
 #include <linux/irqchip.h>
+#include <linux/sprintf.h>
 
 #include <asm/bootinfo.h>
 #include <asm/idle.h>
diff --git a/arch/mips/boot/compressed/calc_vmlinuz_load_addr.c b/arch/mips/boot/compressed/calc_vmlinuz_load_addr.c
index 080b926d2623..962cbd73e0cb 100644
--- a/arch/mips/boot/compressed/calc_vmlinuz_load_addr.c
+++ b/arch/mips/boot/compressed/calc_vmlinuz_load_addr.c
@@ -6,6 +6,7 @@
 #include <sys/types.h>
 #include <sys/stat.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <stdint.h>
 #include <stdio.h>
 #include <stdlib.h>
diff --git a/arch/mips/cavium-octeon/executive/octeon-model.c b/arch/mips/cavium-octeon/executive/octeon-model.c
index 657dbad9644e..958636dc4ad6 100644
--- a/arch/mips/cavium-octeon/executive/octeon-model.c
+++ b/arch/mips/cavium-octeon/executive/octeon-model.c
@@ -26,6 +26,7 @@
  ***********************license end**************************************/
 
 #include <asm/octeon/octeon.h>
+#include <linux/sprintf.h>
 
 enum octeon_feature_bits __octeon_feature_bits __read_mostly;
 EXPORT_SYMBOL_GPL(__octeon_feature_bits);
diff --git a/arch/mips/dec/prom/identify.c b/arch/mips/dec/prom/identify.c
index 80cd14cd1a63..938cfd895cb4 100644
--- a/arch/mips/dec/prom/identify.c
+++ b/arch/mips/dec/prom/identify.c
@@ -7,6 +7,7 @@
  */
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mc146818rtc.h>
 #include <linux/export.h>
 #include <linux/string.h>
diff --git a/arch/mips/fw/lib/cmdline.c b/arch/mips/fw/lib/cmdline.c
index 892765b742bb..29ec2e7261ac 100644
--- a/arch/mips/fw/lib/cmdline.c
+++ b/arch/mips/fw/lib/cmdline.c
@@ -7,6 +7,7 @@
  */
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 
 #include <asm/addrspace.h>
diff --git a/arch/mips/generic/yamon-dt.c b/arch/mips/generic/yamon-dt.c
index a07a5edbcda7..179763ba58c4 100644
--- a/arch/mips/generic/yamon-dt.c
+++ b/arch/mips/generic/yamon-dt.c
@@ -9,6 +9,7 @@
 #include <linux/bug.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/libfdt.h>
 #include <linux/printk.h>
 
diff --git a/arch/mips/include/asm/smp-ops.h b/arch/mips/include/asm/smp-ops.h
index 1617b207723f..e367c359c27f 100644
--- a/arch/mips/include/asm/smp-ops.h
+++ b/arch/mips/include/asm/smp-ops.h
@@ -13,6 +13,10 @@
 
 #include <linux/errno.h>
 
+#ifdef CONFIG_MIPS_MT_SMP
+#include <asm/cpu-features.h> // for cpu_has_mipsmt
+#endif
+
 #ifdef CONFIG_SMP
 
 #include <linux/cpumask.h>
diff --git a/arch/mips/kernel/cacheinfo.c b/arch/mips/kernel/cacheinfo.c
index 495dd058231d..51e421f2516a 100644
--- a/arch/mips/kernel/cacheinfo.c
+++ b/arch/mips/kernel/cacheinfo.c
@@ -3,6 +3,7 @@
  * MIPS cacheinfo support
  */
 #include <linux/cacheinfo.h>
+#include <linux/smp.h> // for smp_processor_id(), used by current_cpu_data
 
 /* Populates leaf and increments to next leaf */
 #define populate_cache(cache, leaf, c_level, c_type)		\
diff --git a/arch/mips/kernel/cevt-bcm1480.c b/arch/mips/kernel/cevt-bcm1480.c
index d39a2963b451..52834cd0bc99 100644
--- a/arch/mips/kernel/cevt-bcm1480.c
+++ b/arch/mips/kernel/cevt-bcm1480.c
@@ -7,6 +7,7 @@
 #include <linux/percpu.h>
 #include <linux/smp.h>
 #include <linux/irq.h>
+#include <linux/sprintf.h>
 
 #include <asm/addrspace.h>
 #include <asm/io.h>
diff --git a/arch/mips/kernel/cevt-sb1250.c b/arch/mips/kernel/cevt-sb1250.c
index 0451273fab9f..f6eb0a80bf1a 100644
--- a/arch/mips/kernel/cevt-sb1250.c
+++ b/arch/mips/kernel/cevt-sb1250.c
@@ -7,6 +7,7 @@
 #include <linux/irq.h>
 #include <linux/percpu.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 
 #include <asm/addrspace.h>
 #include <asm/io.h>
diff --git a/arch/mips/kernel/jump_label.c b/arch/mips/kernel/jump_label.c
index f7978d50a2ba..db41cf40747d 100644
--- a/arch/mips/kernel/jump_label.c
+++ b/arch/mips/kernel/jump_label.c
@@ -13,6 +13,10 @@
 #include <linux/types.h>
 #include <linux/cpu.h>
 
+#ifdef CONFIG_MODULES
+#include <linux/module.h>
+#endif
+
 #include <asm/cacheflush.h>
 #include <asm/inst.h>
 
diff --git a/arch/mips/kernel/proc.c b/arch/mips/kernel/proc.c
index 8eba5a1ed664..26db6f0f2f4f 100644
--- a/arch/mips/kernel/proc.c
+++ b/arch/mips/kernel/proc.c
@@ -15,6 +15,7 @@
 #include <asm/mipsregs.h>
 #include <asm/processor.h>
 #include <asm/prom.h>
+#include <linux/sprintf.h>
 
 unsigned int vced_count, vcei_count;
 
diff --git a/arch/mips/kernel/segment.c b/arch/mips/kernel/segment.c
index 24560501c70d..06c868aa8cf4 100644
--- a/arch/mips/kernel/segment.c
+++ b/arch/mips/kernel/segment.c
@@ -12,6 +12,7 @@
 #include <asm/cpu.h>
 #include <asm/debug.h>
 #include <asm/mipsregs.h>
+#include <linux/sprintf.h>
 
 static void build_segment_config(char *str, unsigned int cfg)
 {
diff --git a/arch/mips/kernel/setup.c b/arch/mips/kernel/setup.c
index 12a1a4ffb602..b4fff3c959a6 100644
--- a/arch/mips/kernel/setup.c
+++ b/arch/mips/kernel/setup.c
@@ -13,10 +13,12 @@
 #include <linux/init.h>
 #include <linux/cpu.h>
 #include <linux/delay.h>
+#include <linux/hex.h>
 #include <linux/ioport.h>
 #include <linux/export.h>
 #include <linux/memblock.h>
 #include <linux/initrd.h>
+#include <linux/random.h> // for add_bootloader_randomness()
 #include <linux/root_dev.h>
 #include <linux/highmem.h>
 #include <linux/console.h>
diff --git a/arch/mips/kernel/smp.c b/arch/mips/kernel/smp.c
index 0b53d35a116e..a8ed1dac92f7 100644
--- a/arch/mips/kernel/smp.c
+++ b/arch/mips/kernel/smp.c
@@ -7,6 +7,7 @@
  * Copyright (C) 2000, 2001, 2003 Broadcom Corporation
  */
 #include <linux/cache.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/arch/mips/kernel/traps.c b/arch/mips/kernel/traps.c
index a1c1cb5de913..6628bf67e8f1 100644
--- a/arch/mips/kernel/traps.c
+++ b/arch/mips/kernel/traps.c
@@ -38,6 +38,7 @@
 #include <linux/kdb.h>
 #include <linux/irq.h>
 #include <linux/perf_event.h>
+#include <linux/sprintf.h>
 
 #include <asm/addrspace.h>
 #include <asm/bootinfo.h>
diff --git a/arch/mips/kernel/vpe-mt.c b/arch/mips/kernel/vpe-mt.c
index 667bc75f6420..15eedc2bb75e 100644
--- a/arch/mips/kernel/vpe-mt.c
+++ b/arch/mips/kernel/vpe-mt.c
@@ -9,8 +9,10 @@
 #include <linux/kernel.h>
 #include <linux/device.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include <asm/mipsregs.h>
 #include <asm/mipsmtregs.h>
diff --git a/arch/mips/lantiq/falcon/prom.c b/arch/mips/lantiq/falcon/prom.c
index 7b98def106e4..76d1a70d2ecc 100644
--- a/arch/mips/lantiq/falcon/prom.c
+++ b/arch/mips/lantiq/falcon/prom.c
@@ -9,6 +9,7 @@
 #include <asm/cacheflush.h>
 #include <asm/traps.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #include <lantiq_soc.h>
 
diff --git a/arch/mips/lantiq/xway/prom.c b/arch/mips/lantiq/xway/prom.c
index 544619754b41..69870a1687db 100644
--- a/arch/mips/lantiq/xway/prom.c
+++ b/arch/mips/lantiq/xway/prom.c
@@ -9,6 +9,7 @@
 #include <linux/clk.h>
 #include <asm/bootinfo.h>
 #include <asm/time.h>
+#include <linux/sprintf.h>
 
 #include <lantiq_soc.h>
 
diff --git a/arch/mips/lantiq/xway/sysctrl.c b/arch/mips/lantiq/xway/sysctrl.c
index 3ed078225222..a22c1db19518 100644
--- a/arch/mips/lantiq/xway/sysctrl.c
+++ b/arch/mips/lantiq/xway/sysctrl.c
@@ -11,6 +11,7 @@
 #include <linux/spinlock.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
+#include <linux/sprintf.h>
 
 #include <lantiq_soc.h>
 
diff --git a/arch/mips/lib/iomap-pci.c b/arch/mips/lib/iomap-pci.c
index a9cb28813f0b..0cae4b76cb41 100644
--- a/arch/mips/lib/iomap-pci.c
+++ b/arch/mips/lib/iomap-pci.c
@@ -10,6 +10,7 @@
 #include <linux/pci.h>
 #include <linux/export.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_PCI_DRIVERS_LEGACY
 
diff --git a/arch/mips/loongson64/boardinfo.c b/arch/mips/loongson64/boardinfo.c
index 280989c5a137..78aa996f4a2a 100644
--- a/arch/mips/loongson64/boardinfo.c
+++ b/arch/mips/loongson64/boardinfo.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/kobject.h>
 #include <boot_param.h>
+#include <linux/sprintf.h>
 
 static ssize_t boardinfo_show(struct kobject *kobj,
 			      struct kobj_attribute *attr, char *buf)
diff --git a/arch/mips/mm/sc-debugfs.c b/arch/mips/mm/sc-debugfs.c
index 80ff3947157d..29ec6c6cdf6a 100644
--- a/arch/mips/mm/sc-debugfs.c
+++ b/arch/mips/mm/sc-debugfs.c
@@ -6,6 +6,7 @@
 
 #include <asm/bcache.h>
 #include <asm/debug.h>
+#include <linux/kstrtox.h>
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
 #include <linux/init.h>
diff --git a/arch/mips/mti-malta/malta-dtshim.c b/arch/mips/mti-malta/malta-dtshim.c
index f451268f6c38..756d33448b49 100644
--- a/arch/mips/mti-malta/malta-dtshim.c
+++ b/arch/mips/mti-malta/malta-dtshim.c
@@ -6,6 +6,7 @@
 
 #include <linux/bug.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/libfdt.h>
 #include <linux/of_fdt.h>
 #include <linux/sizes.h>
diff --git a/arch/mips/mti-malta/malta-init.c b/arch/mips/mti-malta/malta-init.c
index 000d6d50520a..6c842d001215 100644
--- a/arch/mips/mti-malta/malta-init.c
+++ b/arch/mips/mti-malta/malta-init.c
@@ -12,6 +12,7 @@
  *          Steven J. Hill <sjhill@mips.com>
  */
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/pci_regs.h>
diff --git a/arch/mips/mti-malta/malta-setup.c b/arch/mips/mti-malta/malta-setup.c
index 3a2836e9d856..9d4cb5e41229 100644
--- a/arch/mips/mti-malta/malta-setup.c
+++ b/arch/mips/mti-malta/malta-setup.c
@@ -12,6 +12,7 @@
 #include <linux/of_fdt.h>
 #include <linux/pci.h>
 #include <linux/screen_info.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/dma-map-ops.h> /* for dma_default_coherent */
 
diff --git a/arch/mips/pci/ops-tx4927.c b/arch/mips/pci/ops-tx4927.c
index f7802f100401..d1d376a9e315 100644
--- a/arch/mips/pci/ops-tx4927.c
+++ b/arch/mips/pci/ops-tx4927.c
@@ -16,6 +16,7 @@
 #include <linux/irq.h>
 #include <asm/txx9/pci.h>
 #include <asm/txx9/tx4927pcic.h>
+#include <linux/kstrtox.h>
 
 static struct {
 	struct pci_controller *channel;
diff --git a/arch/mips/rb532/prom.c b/arch/mips/rb532/prom.c
index b11693715547..10787170d6a7 100644
--- a/arch/mips/rb532/prom.c
+++ b/arch/mips/rb532/prom.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/export.h>
 #include <linux/string.h>
diff --git a/arch/mips/sgi-ip22/ip22-eisa.c b/arch/mips/sgi-ip22/ip22-eisa.c
index f3b0e90e0135..7f89e4b87e3f 100644
--- a/arch/mips/sgi-ip22/ip22-eisa.c
+++ b/arch/mips/sgi-ip22/ip22-eisa.c
@@ -20,6 +20,7 @@
  */
 
 #include <linux/eisa.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/irq.h>
diff --git a/arch/mips/sgi-ip22/ip22-gio.c b/arch/mips/sgi-ip22/ip22-gio.c
index 81c9f0a8880b..0b1acaf714cc 100644
--- a/arch/mips/sgi-ip22/ip22-gio.c
+++ b/arch/mips/sgi-ip22/ip22-gio.c
@@ -3,6 +3,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <asm/addrspace.h>
 #include <asm/paccess.h>
diff --git a/arch/mips/sgi-ip27/ip27-timer.c b/arch/mips/sgi-ip27/ip27-timer.c
index 444b5e0e935f..2af3d21447c2 100644
--- a/arch/mips/sgi-ip27/ip27-timer.c
+++ b/arch/mips/sgi-ip27/ip27-timer.c
@@ -13,6 +13,7 @@
 #include <linux/kernel_stat.h>
 #include <linux/param.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/timex.h>
 #include <linux/mm.h>
diff --git a/arch/mips/sibyte/common/cfe.c b/arch/mips/sibyte/common/cfe.c
index 2cb90dbbe843..44e4574ae023 100644
--- a/arch/mips/sibyte/common/cfe.c
+++ b/arch/mips/sibyte/common/cfe.c
@@ -5,6 +5,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/linkage.h>
 #include <linux/mm.h>
 #include <linux/memblock.h>
diff --git a/arch/mips/sni/pcimt.c b/arch/mips/sni/pcimt.c
index 12336c2a649c..777c6a87ea6d 100644
--- a/arch/mips/sni/pcimt.c
+++ b/arch/mips/sni/pcimt.c
@@ -14,6 +14,7 @@
 #include <linux/irq.h>
 #include <linux/pci.h>
 #include <linux/serial_8250.h>
+#include <linux/sprintf.h>
 
 #include <asm/sni.h>
 #include <asm/time.h>
diff --git a/arch/mips/txx9/generic/setup.c b/arch/mips/txx9/generic/setup.c
index b098a3c76ae9..9565e2a4d30e 100644
--- a/arch/mips/txx9/generic/setup.c
+++ b/arch/mips/txx9/generic/setup.c
@@ -11,6 +11,8 @@
  */
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/string.h>
diff --git a/arch/nios2/kernel/process.c b/arch/nios2/kernel/process.c
index f84021303f6a..9baa884e1c97 100644
--- a/arch/nios2/kernel/process.c
+++ b/arch/nios2/kernel/process.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/sched.h>
 #include <linux/sched/debug.h>
 #include <linux/sched/task.h>
diff --git a/arch/nios2/platform/platform.c b/arch/nios2/platform/platform.c
index 9737a87121fa..23b555f74796 100644
--- a/arch/nios2/platform/platform.c
+++ b/arch/nios2/platform/platform.c
@@ -13,6 +13,7 @@
 #include <linux/of_fdt.h>
 #include <linux/err.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/io.h>
 #include <linux/clk-provider.h>
diff --git a/arch/parisc/kernel/drivers.c b/arch/parisc/kernel/drivers.c
index c7ff339732ba..3ed5ea95c513 100644
--- a/arch/parisc/kernel/drivers.c
+++ b/arch/parisc/kernel/drivers.c
@@ -24,8 +24,10 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/pci.h>
 #include <linux/spinlock.h>
 #include <linux/string.h>
diff --git a/arch/parisc/kernel/pdc_chassis.c b/arch/parisc/kernel/pdc_chassis.c
index d477d0177c2f..dd1cfe4fb609 100644
--- a/arch/parisc/kernel/pdc_chassis.c
+++ b/arch/parisc/kernel/pdc_chassis.c
@@ -18,6 +18,7 @@
 #endif
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/panic_notifier.h>
diff --git a/arch/parisc/kernel/pdt.c b/arch/parisc/kernel/pdt.c
index 0f9b3b5914cf..5bdfbc92dea1 100644
--- a/arch/parisc/kernel/pdt.c
+++ b/arch/parisc/kernel/pdt.c
@@ -20,6 +20,7 @@
 #include <linux/initrd.h>
 #include <linux/pgtable.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 
 #include <asm/pdc.h>
 #include <asm/pdcpat.h>
diff --git a/arch/parisc/kernel/toc.c b/arch/parisc/kernel/toc.c
index e4b48d07afbd..0e8be5fdc897 100644
--- a/arch/parisc/kernel/toc.c
+++ b/arch/parisc/kernel/toc.c
@@ -7,10 +7,15 @@
 #include <linux/delay.h>
 #include <linux/reboot.h>
 
+#ifdef CONFIG_KGDB
+#include <linux/hardirq.h> // for nmi_enter()
+#endif
+
 #include <asm/pdc.h>
 #include <asm/pdc_chassis.h>
 #include <asm/ldcw.h>
 #include <asm/processor.h>
+#include <asm/sections.h> // for dereference_function_descriptor()
 
 static unsigned int __aligned(16) toc_lock = 1;
 DEFINE_PER_CPU_PAGE_ALIGNED(char [16384], toc_stack) __visible;
diff --git a/arch/powerpc/boot/stdio.c b/arch/powerpc/boot/stdio.c
index 31eece29f56d..ea7b1937b1a5 100644
--- a/arch/powerpc/boot/stdio.c
+++ b/arch/powerpc/boot/stdio.c
@@ -7,6 +7,7 @@
 #include "string.h"
 #include "stdio.h"
 #include "ops.h"
+#include <linux/sprintf.h>
 
 size_t strnlen(const char * s, size_t count)
 {
diff --git a/arch/powerpc/boot/stdio.h b/arch/powerpc/boot/stdio.h
index 884d5959a9ae..004ce2190743 100644
--- a/arch/powerpc/boot/stdio.h
+++ b/arch/powerpc/boot/stdio.h
@@ -3,6 +3,7 @@
 #define _PPC_BOOT_STDIO_H_
 
 #include <stdarg.h>
+#include <linux/sprintf.h>
 
 #define	ENOMEM		12	/* Out of Memory */
 #define	EINVAL		22	/* Invalid argument */
diff --git a/arch/powerpc/include/asm/book3s/64/mmu.h b/arch/powerpc/include/asm/book3s/64/mmu.h
index fedbc5d38191..11201c76ee62 100644
--- a/arch/powerpc/include/asm/book3s/64/mmu.h
+++ b/arch/powerpc/include/asm/book3s/64/mmu.h
@@ -2,6 +2,7 @@
 #ifndef _ASM_POWERPC_BOOK3S_64_MMU_H_
 #define _ASM_POWERPC_BOOK3S_64_MMU_H_
 
+#include <linux/cache.h> // for __ro_after_init
 #include <asm/page.h>
 
 #ifndef __ASSEMBLY__
diff --git a/arch/powerpc/include/asm/ppc-pci.h b/arch/powerpc/include/asm/ppc-pci.h
index c3a3f3df36d1..4b6235c84655 100644
--- a/arch/powerpc/include/asm/ppc-pci.h
+++ b/arch/powerpc/include/asm/ppc-pci.h
@@ -10,6 +10,7 @@
 
 #include <linux/pci.h>
 #include <asm/pci-bridge.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 extern unsigned long isa_io_base;
 
diff --git a/arch/powerpc/kernel/cacheinfo.c b/arch/powerpc/kernel/cacheinfo.c
index f502337dd37d..bf700bc85784 100644
--- a/arch/powerpc/kernel/cacheinfo.c
+++ b/arch/powerpc/kernel/cacheinfo.c
@@ -18,6 +18,8 @@
 #include <linux/of.h>
 #include <linux/percpu.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <asm/cputhreads.h>
 #include <asm/smp.h>
 
diff --git a/arch/powerpc/kernel/eeh.c b/arch/powerpc/kernel/eeh.c
index ab316e155ea9..8c923c998d74 100644
--- a/arch/powerpc/kernel/eeh.c
+++ b/arch/powerpc/kernel/eeh.c
@@ -22,6 +22,7 @@
 #include <linux/export.h>
 #include <linux/of.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include <linux/atomic.h>
 #include <asm/eeh.h>
diff --git a/arch/powerpc/kernel/eeh_event.c b/arch/powerpc/kernel/eeh_event.c
index c23a454af08a..9a72427092c3 100644
--- a/arch/powerpc/kernel/eeh_event.c
+++ b/arch/powerpc/kernel/eeh_event.c
@@ -4,6 +4,7 @@
  * Copyright (c) 2005 Linas Vepstas <linas@linas.org>
  */
 
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/list.h>
 #include <linux/sched.h>
diff --git a/arch/powerpc/kernel/eeh_sysfs.c b/arch/powerpc/kernel/eeh_sysfs.c
index 706e1eb95efe..6c7aa18911a4 100644
--- a/arch/powerpc/kernel/eeh_sysfs.c
+++ b/arch/powerpc/kernel/eeh_sysfs.c
@@ -8,6 +8,7 @@
  */
 #include <linux/of.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <asm/ppc-pci.h>
 #include <asm/pci-bridge.h>
diff --git a/arch/powerpc/kernel/fadump.c b/arch/powerpc/kernel/fadump.c
index d14eda1e8589..d9f97652a7f1 100644
--- a/arch/powerpc/kernel/fadump.c
+++ b/arch/powerpc/kernel/fadump.c
@@ -17,9 +17,11 @@
 #include <linux/string.h>
 #include <linux/memblock.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/crash_dump.h>
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 #include <linux/cma.h>
diff --git a/arch/powerpc/kernel/iommu.c b/arch/powerpc/kernel/iommu.c
index 1ca187af2946..75aef99f2c41 100644
--- a/arch/powerpc/kernel/iommu.c
+++ b/arch/powerpc/kernel/iommu.c
@@ -11,8 +11,10 @@
 
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
+#include <linux/kref.h>
 #include <linux/mm.h>
 #include <linux/spinlock.h>
 #include <linux/string.h>
diff --git a/arch/powerpc/kernel/legacy_serial.c b/arch/powerpc/kernel/legacy_serial.c
index 1da2f6e7d2a1..e27cb72ed47f 100644
--- a/arch/powerpc/kernel/legacy_serial.c
+++ b/arch/powerpc/kernel/legacy_serial.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/serial.h>
 #include <linux/serial_8250.h>
 #include <linux/serial_core.h>
@@ -16,6 +17,7 @@
 #include <asm/pci-bridge.h>
 #include <asm/ppc-pci.h>
 #include <asm/early_ioremap.h>
+#include <linux/sprintf.h>
 
 #undef DEBUG
 
diff --git a/arch/powerpc/kernel/mce.c b/arch/powerpc/kernel/mce.c
index 219f28637a3e..7824010179a4 100644
--- a/arch/powerpc/kernel/mce.c
+++ b/arch/powerpc/kernel/mce.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt) "mce: " fmt
 
 #include <linux/hardirq.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ptrace.h>
 #include <linux/percpu.h>
diff --git a/arch/powerpc/kernel/pci-common.c b/arch/powerpc/kernel/pci-common.c
index d95a48eff412..92278e0e10da 100644
--- a/arch/powerpc/kernel/pci-common.c
+++ b/arch/powerpc/kernel/pci-common.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kref.h>
 #include <linux/pci.h>
 #include <linux/string.h>
 #include <linux/init.h>
diff --git a/arch/powerpc/kernel/pci_of_scan.c b/arch/powerpc/kernel/pci_of_scan.c
index 756043dd06e9..2d8860924c04 100644
--- a/arch/powerpc/kernel/pci_of_scan.c
+++ b/arch/powerpc/kernel/pci_of_scan.c
@@ -15,6 +15,7 @@
 #include <linux/export.h>
 #include <linux/of.h>
 #include <asm/pci-bridge.h>
+#include <linux/sprintf.h>
 
 /**
  * get_int_prop - Decode a u32 from a device tree property
diff --git a/arch/powerpc/kernel/process.c b/arch/powerpc/kernel/process.c
index 9452a54d356c..8fdce599057b 100644
--- a/arch/powerpc/kernel/process.c
+++ b/arch/powerpc/kernel/process.c
@@ -17,6 +17,7 @@
 #include <linux/sched/task_stack.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
+#include <linux/random.h>
 #include <linux/smp.h>
 #include <linux/stddef.h>
 #include <linux/unistd.h>
diff --git a/arch/powerpc/kernel/prom.c b/arch/powerpc/kernel/prom.c
index 0b5878c3125b..1f2ddc008ae6 100644
--- a/arch/powerpc/kernel/prom.c
+++ b/arch/powerpc/kernel/prom.c
@@ -12,6 +12,7 @@
 #undef DEBUG
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/threads.h>
diff --git a/arch/powerpc/kernel/ptrace/ptrace-view.c b/arch/powerpc/kernel/ptrace/ptrace-view.c
index 584cf5c3df50..d4a09e69d1e8 100644
--- a/arch/powerpc/kernel/ptrace/ptrace-view.c
+++ b/arch/powerpc/kernel/ptrace/ptrace-view.c
@@ -2,6 +2,7 @@
 
 #include <linux/regset.h>
 #include <linux/elf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/nospec.h>
 #include <linux/pkeys.h>
 
diff --git a/arch/powerpc/kernel/rtas-proc.c b/arch/powerpc/kernel/rtas-proc.c
index f38df72e64b8..1ebe3cb2c048 100644
--- a/arch/powerpc/kernel/rtas-proc.c
+++ b/arch/powerpc/kernel/rtas-proc.c
@@ -14,6 +14,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/proc_fs.h>
 #include <linux/stat.h>
diff --git a/arch/powerpc/kernel/rtas_flash.c b/arch/powerpc/kernel/rtas_flash.c
index 359577ec1680..aa166793ab61 100644
--- a/arch/powerpc/kernel/rtas_flash.c
+++ b/arch/powerpc/kernel/rtas_flash.c
@@ -15,6 +15,7 @@
 #include <linux/proc_fs.h>
 #include <linux/reboot.h>
 #include <asm/delay.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/rtas.h>
 
diff --git a/arch/powerpc/kernel/rtasd.c b/arch/powerpc/kernel/rtasd.c
index 9bba469239fc..21a8c1c0a4a4 100644
--- a/arch/powerpc/kernel/rtasd.c
+++ b/arch/powerpc/kernel/rtasd.c
@@ -7,12 +7,14 @@
 
 #include <linux/types.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/kernel.h>
 #include <linux/of.h>
 #include <linux/poll.h>
 #include <linux/proc_fs.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/spinlock.h>
 #include <linux/cpu.h>
diff --git a/arch/powerpc/kernel/secure_boot.c b/arch/powerpc/kernel/secure_boot.c
index f9af305d9579..1ffa201dcd5f 100644
--- a/arch/powerpc/kernel/secure_boot.c
+++ b/arch/powerpc/kernel/secure_boot.c
@@ -3,6 +3,7 @@
  * Copyright (C) 2019 IBM Corporation
  * Author: Nayna Jain
  */
+#include <linux/printk.h>
 #include <linux/types.h>
 #include <linux/of.h>
 #include <asm/secure_boot.h>
diff --git a/arch/powerpc/kernel/security.c b/arch/powerpc/kernel/security.c
index 4856e1a5161c..9ef1415a50b4 100644
--- a/arch/powerpc/kernel/security.c
+++ b/arch/powerpc/kernel/security.c
@@ -12,6 +12,7 @@
 #include <linux/prctl.h>
 #include <linux/seq_buf.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include <asm/asm-prototypes.h>
 #include <asm/code-patching.h>
diff --git a/arch/powerpc/kernel/setup_32.c b/arch/powerpc/kernel/setup_32.c
index b761cc1a403c..36ca0a7f2d3e 100644
--- a/arch/powerpc/kernel/setup_32.c
+++ b/arch/powerpc/kernel/setup_32.c
@@ -8,6 +8,7 @@
 #include <linux/sched.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/reboot.h>
 #include <linux/delay.h>
 #include <linux/initrd.h>
diff --git a/arch/powerpc/kernel/setup_64.c b/arch/powerpc/kernel/setup_64.c
index 2f19d5e94485..500100d92fea 100644
--- a/arch/powerpc/kernel/setup_64.c
+++ b/arch/powerpc/kernel/setup_64.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/sched.h>
 #include <linux/init.h>
diff --git a/arch/powerpc/kernel/sysfs.c b/arch/powerpc/kernel/sysfs.c
index 0f39a6b84132..01911ccb8f7a 100644
--- a/arch/powerpc/kernel/sysfs.c
+++ b/arch/powerpc/kernel/sysfs.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/device.h>
 #include <linux/cpu.h>
+#include <linux/kstrtox.h>
 #include <linux/smp.h>
 #include <linux/percpu.h>
 #include <linux/init.h>
@@ -10,6 +11,8 @@
 #include <linux/cpumask.h>
 #include <linux/notifier.h>
 #include <linux/of.h>
+#include <linux/ratelimit.h> // for WARN_RATELIMIT()
+#include <linux/sprintf.h>
 
 #include <asm/current.h>
 #include <asm/processor.h>
diff --git a/arch/powerpc/kernel/udbg.c b/arch/powerpc/kernel/udbg.c
index 92b3fc258d11..1a7b5102bc3f 100644
--- a/arch/powerpc/kernel/udbg.c
+++ b/arch/powerpc/kernel/udbg.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <asm/processor.h>
 #include <asm/udbg.h>
+#include <linux/sprintf.h>
 
 void (*udbg_putc)(char c);
 void (*udbg_flush)(void);
diff --git a/arch/powerpc/kernel/watchdog.c b/arch/powerpc/kernel/watchdog.c
index 8c464a5d8246..6d4304962477 100644
--- a/arch/powerpc/kernel/watchdog.c
+++ b/arch/powerpc/kernel/watchdog.c
@@ -19,6 +19,7 @@
 #include <linux/export.h>
 #include <linux/kprobes.h>
 #include <linux/hardirq.h>
+#include <linux/hrtimer.h>
 #include <linux/reboot.h>
 #include <linux/slab.h>
 #include <linux/kdebug.h>
diff --git a/arch/powerpc/kexec/file_load.c b/arch/powerpc/kexec/file_load.c
index 4284f76cbef5..351b807b4262 100644
--- a/arch/powerpc/kexec/file_load.c
+++ b/arch/powerpc/kexec/file_load.c
@@ -19,6 +19,7 @@
 #include <linux/of_fdt.h>
 #include <linux/libfdt.h>
 #include <asm/setup.h>
+#include <linux/sprintf.h>
 
 #define SLAVE_CODE_SIZE		256	/* First 0x100 bytes */
 
diff --git a/arch/powerpc/kvm/book3s_64_mmu_hv.c b/arch/powerpc/kvm/book3s_64_mmu_hv.c
index 2b1f0cdd8c18..f5aaf0553007 100644
--- a/arch/powerpc/kvm/book3s_64_mmu_hv.c
+++ b/arch/powerpc/kvm/book3s_64_mmu_hv.c
@@ -12,6 +12,7 @@
 #include <linux/gfp.h>
 #include <linux/slab.h>
 #include <linux/hugetlb.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/srcu.h>
 #include <linux/anon_inodes.h>
diff --git a/arch/powerpc/kvm/book3s_64_mmu_radix.c b/arch/powerpc/kvm/book3s_64_mmu_radix.c
index 4a1abb9f7c05..5371c6e299af 100644
--- a/arch/powerpc/kvm/book3s_64_mmu_radix.c
+++ b/arch/powerpc/kvm/book3s_64_mmu_radix.c
@@ -12,6 +12,7 @@
 #include <linux/file.h>
 #include <linux/debugfs.h>
 #include <linux/pgtable.h>
+#include <linux/sprintf.h>
 
 #include <asm/kvm_ppc.h>
 #include <asm/kvm_book3s.h>
diff --git a/arch/powerpc/kvm/book3s_64_vio.c b/arch/powerpc/kvm/book3s_64_vio.c
index b569ebaa590e..198c14711455 100644
--- a/arch/powerpc/kvm/book3s_64_vio.c
+++ b/arch/powerpc/kvm/book3s_64_vio.c
@@ -8,6 +8,7 @@
 
 #include <linux/types.h>
 #include <linux/string.h>
+#include <linux/kref.h>
 #include <linux/kvm.h>
 #include <linux/kvm_host.h>
 #include <linux/highmem.h>
diff --git a/arch/powerpc/kvm/book3s_hv_builtin.c b/arch/powerpc/kvm/book3s_hv_builtin.c
index fa0e3a22cac0..f31a4546d849 100644
--- a/arch/powerpc/kvm/book3s_hv_builtin.c
+++ b/arch/powerpc/kvm/book3s_hv_builtin.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/cpu.h>
+#include <linux/kstrtox.h>
 #include <linux/kvm_host.h>
 #include <linux/preempt.h>
 #include <linux/export.h>
diff --git a/arch/powerpc/kvm/book3s_xive.c b/arch/powerpc/kvm/book3s_xive.c
index 29a382249770..250564797a0d 100644
--- a/arch/powerpc/kvm/book3s_xive.c
+++ b/arch/powerpc/kvm/book3s_xive.c
@@ -13,6 +13,7 @@
 #include <linux/delay.h>
 #include <linux/percpu.h>
 #include <linux/cpumask.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/irqdomain.h>
 #include <asm/kvm_book3s.h>
diff --git a/arch/powerpc/mm/init-common.c b/arch/powerpc/mm/init-common.c
index d3a7726ecf51..081b2584960b 100644
--- a/arch/powerpc/mm/init-common.c
+++ b/arch/powerpc/mm/init-common.c
@@ -21,6 +21,7 @@
 #include <asm/pgalloc.h>
 #include <asm/kup.h>
 #include <asm/smp.h>
+#include <linux/sprintf.h>
 
 phys_addr_t memstart_addr __ro_after_init = (phys_addr_t)~0ull;
 EXPORT_SYMBOL_GPL(memstart_addr);
diff --git a/arch/powerpc/mm/init_64.c b/arch/powerpc/mm/init_64.c
index d96bbc001e73..6bb2626d9b59 100644
--- a/arch/powerpc/mm/init_64.c
+++ b/arch/powerpc/mm/init_64.c
@@ -20,6 +20,7 @@
 #include <linux/sched.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/mman.h>
@@ -37,6 +38,7 @@
 #include <linux/memblock.h>
 #include <linux/hugetlb.h>
 #include <linux/slab.h>
+#include <linux/of.h>
 #include <linux/of_fdt.h>
 #include <linux/libfdt.h>
 #include <linux/memremap.h>
diff --git a/arch/powerpc/mm/nohash/e500_hugetlbpage.c b/arch/powerpc/mm/nohash/e500_hugetlbpage.c
index a134d28a0e4d..1238bc8b35a5 100644
--- a/arch/powerpc/mm/nohash/e500_hugetlbpage.c
+++ b/arch/powerpc/mm/nohash/e500_hugetlbpage.c
@@ -8,6 +8,7 @@
  */
 #include <linux/mm.h>
 #include <linux/hugetlb.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <asm/mmu.h>
 
diff --git a/arch/powerpc/perf/core-book3s.c b/arch/powerpc/perf/core-book3s.c
index b7ff680cde96..9554b51526ef 100644
--- a/arch/powerpc/perf/core-book3s.c
+++ b/arch/powerpc/perf/core-book3s.c
@@ -5,11 +5,13 @@
  * Copyright 2008-2009 Paul Mackerras, IBM Corporation.
  */
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/clock.h>
 #include <linux/perf_event.h>
 #include <linux/percpu.h>
 #include <linux/hardirq.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/reg.h>
 #include <asm/pmc.h>
diff --git a/arch/powerpc/perf/hv-24x7.c b/arch/powerpc/perf/hv-24x7.c
index 057ec2e3451d..bb0383f89813 100644
--- a/arch/powerpc/perf/hv-24x7.c
+++ b/arch/powerpc/perf/hv-24x7.c
@@ -12,6 +12,7 @@
 #include <linux/rbtree.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <asm/cputhreads.h>
diff --git a/arch/powerpc/perf/hv-gpci.c b/arch/powerpc/perf/hv-gpci.c
index 27f18119fda1..ca6c847e0a7b 100644
--- a/arch/powerpc/perf/hv-gpci.c
+++ b/arch/powerpc/perf/hv-gpci.c
@@ -14,6 +14,7 @@
 #include <asm/firmware.h>
 #include <asm/hvcall.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #include "hv-gpci.h"
 #include "hv-common.h"
diff --git a/arch/powerpc/perf/imc-pmu.c b/arch/powerpc/perf/imc-pmu.c
index 8664a7d297ad..f8498e6827df 100644
--- a/arch/powerpc/perf/imc-pmu.c
+++ b/arch/powerpc/perf/imc-pmu.c
@@ -13,6 +13,7 @@
 #include <asm/imc-pmu.h>
 #include <asm/cputhreads.h>
 #include <asm/smp.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/spinlock.h>
 
diff --git a/arch/powerpc/platforms/4xx/cpm.c b/arch/powerpc/platforms/4xx/cpm.c
index 670f8ad4465b..e7f4e38b0939 100644
--- a/arch/powerpc/platforms/4xx/cpm.c
+++ b/arch/powerpc/platforms/4xx/cpm.c
@@ -19,6 +19,7 @@
 
 #include <linux/kernel.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/cpu.h>
 #include <linux/suspend.h>
diff --git a/arch/powerpc/platforms/52xx/mpc52xx_gpt.c b/arch/powerpc/platforms/52xx/mpc52xx_gpt.c
index 581059527c36..57b639f2ab0d 100644
--- a/arch/powerpc/platforms/52xx/mpc52xx_gpt.c
+++ b/arch/powerpc/platforms/52xx/mpc52xx_gpt.c
@@ -62,6 +62,7 @@
 #include <linux/property.h>
 #include <linux/slab.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/watchdog.h>
 #include <linux/miscdevice.h>
 #include <linux/uaccess.h>
diff --git a/arch/powerpc/platforms/83xx/mcu_mpc8349emitx.c b/arch/powerpc/platforms/83xx/mcu_mpc8349emitx.c
index 4d8fa9ed1a67..2f86b97b6564 100644
--- a/arch/powerpc/platforms/83xx/mcu_mpc8349emitx.c
+++ b/arch/powerpc/platforms/83xx/mcu_mpc8349emitx.c
@@ -19,6 +19,7 @@
 #include <linux/property.h>
 #include <linux/reboot.h>
 #include <asm/machdep.h>
+#include <linux/sprintf.h>
 
 /*
  * I don't have specifications for the MCU firmware, I found this register
diff --git a/arch/powerpc/platforms/83xx/misc.c b/arch/powerpc/platforms/83xx/misc.c
index 1135c1ab923c..dab29a13752c 100644
--- a/arch/powerpc/platforms/83xx/misc.c
+++ b/arch/powerpc/platforms/83xx/misc.c
@@ -7,6 +7,7 @@
 
 #include <linux/stddef.h>
 #include <linux/kernel.h>
+#include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/pci.h>
 
diff --git a/arch/powerpc/platforms/book3s/vas-api.c b/arch/powerpc/platforms/book3s/vas-api.c
index f381b177ea06..b6ef0038cbb7 100644
--- a/arch/powerpc/platforms/book3s/vas-api.c
+++ b/arch/powerpc/platforms/book3s/vas-api.c
@@ -11,6 +11,7 @@
 #include <linux/cdev.h>
 #include <linux/fs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/kthread.h>
 #include <linux/sched/signal.h>
diff --git a/arch/powerpc/platforms/cell/cbe_thermal.c b/arch/powerpc/platforms/cell/cbe_thermal.c
index 2f45428e32c8..818e4903ffa6 100644
--- a/arch/powerpc/platforms/cell/cbe_thermal.c
+++ b/arch/powerpc/platforms/cell/cbe_thermal.c
@@ -36,6 +36,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/cpu.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <asm/spu.h>
 #include <asm/io.h>
diff --git a/arch/powerpc/platforms/cell/spu_base.c b/arch/powerpc/platforms/cell/spu_base.c
index dea6f0f25897..1f7d1804d6d4 100644
--- a/arch/powerpc/platforms/cell/spu_base.c
+++ b/arch/powerpc/platforms/cell/spu_base.c
@@ -14,6 +14,7 @@
 #include <linux/init.h>
 #include <linux/ptrace.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/mm.h>
 #include <linux/io.h>
diff --git a/arch/powerpc/platforms/cell/spufs/coredump.c b/arch/powerpc/platforms/cell/spufs/coredump.c
index 18daafbe2e65..7074db88c2ba 100644
--- a/arch/powerpc/platforms/cell/spufs/coredump.c
+++ b/arch/powerpc/platforms/cell/spufs/coredump.c
@@ -13,6 +13,7 @@
 #include <linux/fs.h>
 #include <linux/gfp.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls.h>
 #include <linux/coredump.h>
 #include <linux/binfmts.h>
diff --git a/arch/powerpc/platforms/cell/spufs/file.c b/arch/powerpc/platforms/cell/spufs/file.c
index 02a8158c469d..0e07267b8996 100644
--- a/arch/powerpc/platforms/cell/spufs/file.c
+++ b/arch/powerpc/platforms/cell/spufs/file.c
@@ -13,11 +13,13 @@
 #include <linux/fs.h>
 #include <linux/ioctl.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/poll.h>
 #include <linux/ptrace.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <asm/io.h>
 #include <asm/time.h>
diff --git a/arch/powerpc/platforms/pasemi/setup.c b/arch/powerpc/platforms/pasemi/setup.c
index 0761d98e5be3..14168b9536b1 100644
--- a/arch/powerpc/platforms/pasemi/setup.c
+++ b/arch/powerpc/platforms/pasemi/setup.c
@@ -21,6 +21,7 @@
 #include <linux/platform_device.h>
 #include <linux/gfp.h>
 #include <linux/irqdomain.h>
+#include <linux/sprintf.h>
 
 #include <asm/iommu.h>
 #include <asm/machdep.h>
diff --git a/arch/powerpc/platforms/powermac/pfunc_core.c b/arch/powerpc/platforms/powermac/pfunc_core.c
index 22741ddfd5b2..6cd7abc6aa96 100644
--- a/arch/powerpc/platforms/powermac/pfunc_core.c
+++ b/arch/powerpc/platforms/powermac/pfunc_core.c
@@ -8,6 +8,7 @@
 
 #include <linux/delay.h>
 #include <linux/kernel.h>
+#include <linux/kref.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
 #include <linux/module.h>
diff --git a/arch/powerpc/platforms/powernv/eeh-powernv.c b/arch/powerpc/platforms/powernv/eeh-powernv.c
index af3a5d37a149..694496d26eb3 100644
--- a/arch/powerpc/platforms/powernv/eeh-powernv.c
+++ b/arch/powerpc/platforms/powernv/eeh-powernv.c
@@ -21,6 +21,7 @@
 #include <linux/sched.h>
 #include <linux/seq_file.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <asm/eeh.h>
 #include <asm/eeh_event.h>
diff --git a/arch/powerpc/platforms/powernv/idle.c b/arch/powerpc/platforms/powernv/idle.c
index ad41dffe4d92..a2c10ec61b5f 100644
--- a/arch/powerpc/platforms/powernv/idle.c
+++ b/arch/powerpc/platforms/powernv/idle.c
@@ -11,6 +11,8 @@
 #include <linux/of.h>
 #include <linux/device.h>
 #include <linux/cpu.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <asm/firmware.h>
 #include <asm/interrupt.h>
diff --git a/arch/powerpc/platforms/powernv/opal-core.c b/arch/powerpc/platforms/powernv/opal-core.c
index c9a9b759cc92..1865b2d06e8f 100644
--- a/arch/powerpc/platforms/powernv/opal-core.c
+++ b/arch/powerpc/platforms/powernv/opal-core.c
@@ -14,6 +14,7 @@
 #include <linux/elf.h>
 #include <linux/elfcore.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 #include <linux/vmcore_info.h>
diff --git a/arch/powerpc/platforms/powernv/opal-dump.c b/arch/powerpc/platforms/powernv/opal-dump.c
index 16c5860f1372..9809eb6be274 100644
--- a/arch/powerpc/platforms/powernv/opal-dump.c
+++ b/arch/powerpc/platforms/powernv/opal-dump.c
@@ -8,6 +8,7 @@
 #include <linux/kobject.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/pagemap.h>
 #include <linux/delay.h>
diff --git a/arch/powerpc/platforms/powernv/opal-elog.c b/arch/powerpc/platforms/powernv/opal-elog.c
index 554fdd7f88b8..9d4ccc2a5285 100644
--- a/arch/powerpc/platforms/powernv/opal-elog.c
+++ b/arch/powerpc/platforms/powernv/opal-elog.c
@@ -9,6 +9,7 @@
 #include <linux/interrupt.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/fs.h>
 #include <linux/vmalloc.h>
diff --git a/arch/powerpc/platforms/powernv/opal-flash.c b/arch/powerpc/platforms/powernv/opal-flash.c
index d5ea04e8e4c5..f2c01229ce53 100644
--- a/arch/powerpc/platforms/powernv/opal-flash.c
+++ b/arch/powerpc/platforms/powernv/opal-flash.c
@@ -11,6 +11,7 @@
 #include <linux/reboot.h>
 #include <linux/init.h>
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
diff --git a/arch/powerpc/platforms/powernv/opal-imc.c b/arch/powerpc/platforms/powernv/opal-imc.c
index 828fc4d88471..ee5fa53caabf 100644
--- a/arch/powerpc/platforms/powernv/opal-imc.c
+++ b/arch/powerpc/platforms/powernv/opal-imc.c
@@ -17,6 +17,7 @@
 #include <asm/io.h>
 #include <asm/imc-pmu.h>
 #include <asm/cputhreads.h>
+#include <linux/sprintf.h>
 
 static struct dentry *imc_debugfs_parent;
 
diff --git a/arch/powerpc/platforms/powernv/opal-irqchip.c b/arch/powerpc/platforms/powernv/opal-irqchip.c
index 56a1f7ce78d2..dc84f6d8ec87 100644
--- a/arch/powerpc/platforms/powernv/opal-irqchip.c
+++ b/arch/powerpc/platforms/powernv/opal-irqchip.c
@@ -19,6 +19,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 
 #include <asm/machdep.h>
 #include <asm/opal.h>
diff --git a/arch/powerpc/platforms/powernv/opal-powercap.c b/arch/powerpc/platforms/powernv/opal-powercap.c
index ea917266aa17..90307b6865b8 100644
--- a/arch/powerpc/platforms/powernv/opal-powercap.c
+++ b/arch/powerpc/platforms/powernv/opal-powercap.c
@@ -9,7 +9,10 @@
 
 #include <linux/of.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 #include <asm/opal.h>
 
diff --git a/arch/powerpc/platforms/powernv/opal-psr.c b/arch/powerpc/platforms/powernv/opal-psr.c
index 6441e17b6996..51a8fe8b5c80 100644
--- a/arch/powerpc/platforms/powernv/opal-psr.c
+++ b/arch/powerpc/platforms/powernv/opal-psr.c
@@ -9,7 +9,10 @@
 
 #include <linux/of.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 #include <asm/opal.h>
 
diff --git a/arch/powerpc/platforms/powernv/opal-sensor-groups.c b/arch/powerpc/platforms/powernv/opal-sensor-groups.c
index 9944376b115c..243d23fe2100 100644
--- a/arch/powerpc/platforms/powernv/opal-sensor-groups.c
+++ b/arch/powerpc/platforms/powernv/opal-sensor-groups.c
@@ -9,7 +9,10 @@
 
 #include <linux/of.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 #include <asm/opal.h>
 
diff --git a/arch/powerpc/platforms/powernv/opal-sysparam.c b/arch/powerpc/platforms/powernv/opal-sysparam.c
index a12312afe4ef..a04732998edc 100644
--- a/arch/powerpc/platforms/powernv/opal-sysparam.c
+++ b/arch/powerpc/platforms/powernv/opal-sysparam.c
@@ -11,6 +11,7 @@
 #include <linux/of.h>
 #include <linux/gfp.h>
 #include <linux/stat.h>
+#include <linux/sysfs.h>
 #include <asm/opal.h>
 
 #define MAX_PARAM_DATA_LEN	64
diff --git a/arch/powerpc/platforms/powernv/opal-xscom.c b/arch/powerpc/platforms/powernv/opal-xscom.c
index 748c2b97fa53..4aa47b32426f 100644
--- a/arch/powerpc/platforms/powernv/opal-xscom.c
+++ b/arch/powerpc/platforms/powernv/opal-xscom.c
@@ -13,6 +13,7 @@
 #include <linux/bug.h>
 #include <linux/gfp.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
 
diff --git a/arch/powerpc/platforms/powernv/pci-ioda.c b/arch/powerpc/platforms/powernv/pci-ioda.c
index 23f5b5093ec1..9bb5320f8429 100644
--- a/arch/powerpc/platforms/powernv/pci-ioda.c
+++ b/arch/powerpc/platforms/powernv/pci-ioda.c
@@ -11,6 +11,7 @@
 #include <linux/pci.h>
 #include <linux/crash_dump.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/memblock.h>
diff --git a/arch/powerpc/platforms/powernv/pci.c b/arch/powerpc/platforms/powernv/pci.c
index 35f566aa0424..7d5ce732527f 100644
--- a/arch/powerpc/platforms/powernv/pci.c
+++ b/arch/powerpc/platforms/powernv/pci.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kref.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
 #include <linux/string.h>
diff --git a/arch/powerpc/platforms/powernv/subcore.c b/arch/powerpc/platforms/powernv/subcore.c
index 393e747541fb..a889fae0f18f 100644
--- a/arch/powerpc/platforms/powernv/subcore.c
+++ b/arch/powerpc/platforms/powernv/subcore.c
@@ -11,6 +11,7 @@
 #include <linux/device.h>
 #include <linux/gfp.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 #include <linux/stop_machine.h>
 
 #include <asm/cputhreads.h>
diff --git a/arch/powerpc/platforms/powernv/vas-window.c b/arch/powerpc/platforms/powernv/vas-window.c
index b664838008c1..5a3e72be77dc 100644
--- a/arch/powerpc/platforms/powernv/vas-window.c
+++ b/arch/powerpc/platforms/powernv/vas-window.c
@@ -19,6 +19,7 @@
 #include <asm/vas.h>
 #include "vas.h"
 #include "copy-paste.h"
+#include <linux/sprintf.h>
 
 #define CREATE_TRACE_POINTS
 #include "vas-trace.h"
diff --git a/arch/powerpc/platforms/powernv/vas.c b/arch/powerpc/platforms/powernv/vas.c
index b65256a63e87..2aac0340c467 100644
--- a/arch/powerpc/platforms/powernv/vas.c
+++ b/arch/powerpc/platforms/powernv/vas.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/platform_device.h>
diff --git a/arch/powerpc/platforms/ps3/setup.c b/arch/powerpc/platforms/ps3/setup.c
index 5144f11359f7..e60714e0ff6b 100644
--- a/arch/powerpc/platforms/ps3/setup.c
+++ b/arch/powerpc/platforms/ps3/setup.c
@@ -14,6 +14,7 @@
 #include <linux/export.h>
 #include <linux/memblock.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <asm/machdep.h>
 #include <asm/firmware.h>
diff --git a/arch/powerpc/platforms/ps3/system-bus.c b/arch/powerpc/platforms/ps3/system-bus.c
index d6b5f5ecd515..ae2699019878 100644
--- a/arch/powerpc/platforms/ps3/system-bus.c
+++ b/arch/powerpc/platforms/ps3/system-bus.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/init.h>
 #include <linux/export.h>
 #include <linux/dma-map-ops.h>
diff --git a/arch/powerpc/platforms/pseries/cmm.c b/arch/powerpc/platforms/pseries/cmm.c
index 5f4037c1d7fe..edc98bf80a5f 100644
--- a/arch/powerpc/platforms/pseries/cmm.c
+++ b/arch/powerpc/platforms/pseries/cmm.c
@@ -11,11 +11,13 @@
 #include <linux/errno.h>
 #include <linux/fs.h>
 #include <linux/gfp.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/module.h>
 #include <linux/oom.h>
 #include <linux/reboot.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <linux/swap.h>
 #include <linux/device.h>
diff --git a/arch/powerpc/platforms/pseries/dlpar.c b/arch/powerpc/platforms/pseries/dlpar.c
index 47f8eabd1bee..0bbd561a0f87 100644
--- a/arch/powerpc/platforms/pseries/dlpar.c
+++ b/arch/powerpc/platforms/pseries/dlpar.c
@@ -10,11 +10,13 @@
 #define pr_fmt(fmt)	"dlpar: " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/notifier.h>
 #include <linux/spinlock.h>
 #include <linux/cpu.h>
 #include <linux/slab.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include "of_helpers.h"
 #include "pseries.h"
diff --git a/arch/powerpc/platforms/pseries/dtl.c b/arch/powerpc/platforms/pseries/dtl.c
index 3f1cdccebc9c..d19e34e6574a 100644
--- a/arch/powerpc/platforms/pseries/dtl.c
+++ b/arch/powerpc/platforms/pseries/dtl.c
@@ -10,6 +10,7 @@
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <asm/smp.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
 #include <asm/firmware.h>
diff --git a/arch/powerpc/platforms/pseries/hotplug-cpu.c b/arch/powerpc/platforms/pseries/hotplug-cpu.c
index e62835a12d73..4defa1e68e71 100644
--- a/arch/powerpc/platforms/pseries/hotplug-cpu.c
+++ b/arch/powerpc/platforms/pseries/hotplug-cpu.c
@@ -19,6 +19,7 @@
 #include <linux/kernel.h>
 #include <linux/interrupt.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>	/* for idle_task_exit */
 #include <linux/sched/hotplug.h>
 #include <linux/cpu.h>
diff --git a/arch/powerpc/platforms/pseries/ibmebus.c b/arch/powerpc/platforms/pseries/ibmebus.c
index 998e3aff2457..9c299fcd8574 100644
--- a/arch/powerpc/platforms/pseries/ibmebus.c
+++ b/arch/powerpc/platforms/pseries/ibmebus.c
@@ -45,6 +45,7 @@
 #include <linux/irqdomain.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
diff --git a/arch/powerpc/platforms/pseries/iommu.c b/arch/powerpc/platforms/pseries/iommu.c
index 496e16c588aa..2ad71b614ce8 100644
--- a/arch/powerpc/platforms/pseries/iommu.c
+++ b/arch/powerpc/platforms/pseries/iommu.c
@@ -13,6 +13,7 @@
 #include <linux/init.h>
 #include <linux/types.h>
 #include <linux/slab.h>
+#include <linux/kref.h>
 #include <linux/mm.h>
 #include <linux/memblock.h>
 #include <linux/spinlock.h>
diff --git a/arch/powerpc/platforms/pseries/lpar.c b/arch/powerpc/platforms/pseries/lpar.c
index 4561667832ed..0ee738fd8257 100644
--- a/arch/powerpc/platforms/pseries/lpar.c
+++ b/arch/powerpc/platforms/pseries/lpar.c
@@ -16,6 +16,8 @@
 #include <linux/export.h>
 #include <linux/jump_label.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/stop_machine.h>
 #include <linux/spinlock.h>
 #include <linux/cpuhotplug.h>
diff --git a/arch/powerpc/platforms/pseries/lparcfg.c b/arch/powerpc/platforms/pseries/lparcfg.c
index 1c151d77e74b..389b5c2d9251 100644
--- a/arch/powerpc/platforms/pseries/lparcfg.c
+++ b/arch/powerpc/platforms/pseries/lparcfg.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/types.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/proc_fs.h>
 #include <linux/init.h>
 #include <asm/papr-sysparm.h>
diff --git a/arch/powerpc/platforms/pseries/papr_platform_attributes.c b/arch/powerpc/platforms/pseries/papr_platform_attributes.c
index 526c621b098b..7112d4fd78a2 100644
--- a/arch/powerpc/platforms/pseries/papr_platform_attributes.c
+++ b/arch/powerpc/platforms/pseries/papr_platform_attributes.c
@@ -23,6 +23,7 @@
 #include <asm/hvcall.h>
 #include <asm/machdep.h>
 #include <asm/firmware.h>
+#include <linux/sprintf.h>
 
 #include "pseries.h"
 
diff --git a/arch/powerpc/platforms/pseries/papr_scm.c b/arch/powerpc/platforms/pseries/papr_scm.c
index 1a53e048ceb7..144aa54689ce 100644
--- a/arch/powerpc/platforms/pseries/papr_scm.c
+++ b/arch/powerpc/platforms/pseries/papr_scm.c
@@ -14,6 +14,7 @@
 #include <linux/delay.h>
 #include <linux/seq_buf.h>
 #include <linux/nd.h>
+#include <linux/sprintf.h>
 
 #include <asm/plpar_wrappers.h>
 #include <asm/papr_pdsm.h>
diff --git a/arch/powerpc/platforms/pseries/power.c b/arch/powerpc/platforms/pseries/power.c
index 3676cb297767..f14ed2c27961 100644
--- a/arch/powerpc/platforms/pseries/power.c
+++ b/arch/powerpc/platforms/pseries/power.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/init.h>
diff --git a/arch/powerpc/platforms/pseries/pseries_energy.c b/arch/powerpc/platforms/pseries/pseries_energy.c
index 2c661b798235..77b1d1efa306 100644
--- a/arch/powerpc/platforms/pseries/pseries_energy.c
+++ b/arch/powerpc/platforms/pseries/pseries_energy.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/init.h>
diff --git a/arch/powerpc/platforms/pseries/reconfig.c b/arch/powerpc/platforms/pseries/reconfig.c
index 599bd2c78514..430f0a535743 100644
--- a/arch/powerpc/platforms/pseries/reconfig.c
+++ b/arch/powerpc/platforms/pseries/reconfig.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/notifier.h>
 #include <linux/proc_fs.h>
 #include <linux/security.h>
diff --git a/arch/powerpc/platforms/pseries/rtas-fadump.c b/arch/powerpc/platforms/pseries/rtas-fadump.c
index b5853e9fcc3c..c5f91363fa83 100644
--- a/arch/powerpc/platforms/pseries/rtas-fadump.c
+++ b/arch/powerpc/platforms/pseries/rtas-fadump.c
@@ -11,6 +11,7 @@
 #include <linux/string.h>
 #include <linux/memblock.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/crash_dump.h>
 #include <linux/of.h>
diff --git a/arch/powerpc/platforms/pseries/setup.c b/arch/powerpc/platforms/pseries/setup.c
index ecea85c74c43..e6c521ed8bf6 100644
--- a/arch/powerpc/platforms/pseries/setup.c
+++ b/arch/powerpc/platforms/pseries/setup.c
@@ -14,6 +14,7 @@
 
 #include <linux/cpu.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
 #include <linux/kernel.h>
diff --git a/arch/powerpc/platforms/pseries/suspend.c b/arch/powerpc/platforms/pseries/suspend.c
index 382003dfdb9a..99cbf5507c83 100644
--- a/arch/powerpc/platforms/pseries/suspend.c
+++ b/arch/powerpc/platforms/pseries/suspend.c
@@ -5,6 +5,8 @@
 
 #include <linux/cpu.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/stat.h>
 #include <asm/firmware.h>
diff --git a/arch/powerpc/platforms/pseries/vas-sysfs.c b/arch/powerpc/platforms/pseries/vas-sysfs.c
index f9f682724e77..7f74a74e2eed 100644
--- a/arch/powerpc/platforms/pseries/vas-sysfs.c
+++ b/arch/powerpc/platforms/pseries/vas-sysfs.c
@@ -7,10 +7,12 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/miscdevice.h>
 #include <linux/kobject.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 
 #include "vas.h"
 
diff --git a/arch/powerpc/platforms/pseries/vas.c b/arch/powerpc/platforms/pseries/vas.c
index 71d52a670d95..303b24eae787 100644
--- a/arch/powerpc/platforms/pseries/vas.c
+++ b/arch/powerpc/platforms/pseries/vas.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
diff --git a/arch/powerpc/platforms/pseries/vio.c b/arch/powerpc/platforms/pseries/vio.c
index 2dc9cbc4bcd8..3ceb5b83faf8 100644
--- a/arch/powerpc/platforms/pseries/vio.c
+++ b/arch/powerpc/platforms/pseries/vio.c
@@ -23,7 +23,10 @@
 #include <linux/dma-map-ops.h>
 #include <linux/kobject.h>
 #include <linux/kexec.h>
+#include <linux/kref.h>
+#include <linux/kstrtox.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 
 #include <asm/iommu.h>
 #include <asm/dma.h>
diff --git a/arch/powerpc/sysdev/fsl_mpic_timer_wakeup.c b/arch/powerpc/sysdev/fsl_mpic_timer_wakeup.c
index ce6c739c51e5..783a6955ab06 100644
--- a/arch/powerpc/sysdev/fsl_mpic_timer_wakeup.c
+++ b/arch/powerpc/sysdev/fsl_mpic_timer_wakeup.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include <asm/mpic_timer.h>
 #include <asm/mpic.h>
diff --git a/arch/powerpc/sysdev/fsl_msi.c b/arch/powerpc/sysdev/fsl_msi.c
index 558ec68d768e..a164020d481b 100644
--- a/arch/powerpc/sysdev/fsl_msi.c
+++ b/arch/powerpc/sysdev/fsl_msi.c
@@ -8,6 +8,7 @@
  * The hwirq alloc and free code reuse from sysdev/mpic_msi.c
  */
 #include <linux/irq.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/msi.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
diff --git a/arch/powerpc/sysdev/fsl_rio.c b/arch/powerpc/sysdev/fsl_rio.c
index f9b214b299e7..f56f23479602 100644
--- a/arch/powerpc/sysdev/fsl_rio.c
+++ b/arch/powerpc/sysdev/fsl_rio.c
@@ -20,6 +20,7 @@
 
 #include <linux/init.h>
 #include <linux/extable.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
diff --git a/arch/powerpc/sysdev/xics/icp-native.c b/arch/powerpc/sysdev/xics/icp-native.c
index 700b67476a7d..7eafcea53db9 100644
--- a/arch/powerpc/sysdev/xics/icp-native.c
+++ b/arch/powerpc/sysdev/xics/icp-native.c
@@ -15,6 +15,7 @@
 #include <linux/of_address.h>
 #include <linux/spinlock.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <asm/io.h>
 #include <asm/smp.h>
diff --git a/arch/powerpc/xmon/nonstdio.c b/arch/powerpc/xmon/nonstdio.c
index 9b0d85bff021..e3b91bba5c2b 100644
--- a/arch/powerpc/xmon/nonstdio.c
+++ b/arch/powerpc/xmon/nonstdio.c
@@ -6,6 +6,7 @@
 #include <asm/udbg.h>
 #include <asm/time.h>
 #include "nonstdio.h"
+#include <linux/sprintf.h>
 
 static bool paginating, paginate_skipping;
 static unsigned long paginate_lpp; /* Lines Per Page */
diff --git a/arch/riscv/kernel/elf_kexec.c b/arch/riscv/kernel/elf_kexec.c
index 54260c16f991..d0600052547a 100644
--- a/arch/riscv/kernel/elf_kexec.c
+++ b/arch/riscv/kernel/elf_kexec.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/libfdt.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/memblock.h>
 #include <asm/setup.h>
diff --git a/arch/riscv/kernel/process.c b/arch/riscv/kernel/process.c
index 92922dbd5b5c..d760b506ec0f 100644
--- a/arch/riscv/kernel/process.c
+++ b/arch/riscv/kernel/process.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/cpu.h>
+#include <linux/elf.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
 #include <linux/sched/debug.h>
diff --git a/arch/riscv/kernel/sbi.c b/arch/riscv/kernel/sbi.c
index e66e0999a800..7a904dae90b7 100644
--- a/arch/riscv/kernel/sbi.c
+++ b/arch/riscv/kernel/sbi.c
@@ -7,6 +7,7 @@
 
 #include <linux/bits.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mm.h>
 #include <linux/pm.h>
 #include <linux/reboot.h>
diff --git a/arch/riscv/kernel/smpboot.c b/arch/riscv/kernel/smpboot.c
index cfbe4b840d42..12e9920b317f 100644
--- a/arch/riscv/kernel/smpboot.c
+++ b/arch/riscv/kernel/smpboot.c
@@ -10,6 +10,7 @@
 
 #include <linux/acpi.h>
 #include <linux/arch_topology.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
diff --git a/arch/riscv/kernel/traps.c b/arch/riscv/kernel/traps.c
index 868d6280cf66..1ee7627e939d 100644
--- a/arch/riscv/kernel/traps.c
+++ b/arch/riscv/kernel/traps.c
@@ -6,12 +6,14 @@
 #include <linux/cpu.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/random.h>
 #include <linux/randomize_kstack.h>
 #include <linux/sched.h>
 #include <linux/sched/debug.h>
 #include <linux/sched/signal.h>
 #include <linux/signal.h>
 #include <linux/kdebug.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/kprobes.h>
 #include <linux/uprobes.h>
diff --git a/arch/riscv/mm/ptdump.c b/arch/riscv/mm/ptdump.c
index 1289cc6d3700..f15ddb394ee0 100644
--- a/arch/riscv/mm/ptdump.c
+++ b/arch/riscv/mm/ptdump.c
@@ -8,6 +8,7 @@
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
 #include <linux/ptdump.h>
+#include <linux/sprintf.h>
 
 #include <linux/pgtable.h>
 #include <asm/kasan.h>
diff --git a/arch/s390/boot/ipl_parm.c b/arch/s390/boot/ipl_parm.c
index b24de9aabf7d..2319a7e3d07b 100644
--- a/arch/s390/boot/ipl_parm.c
+++ b/arch/s390/boot/ipl_parm.c
@@ -2,6 +2,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/pgtable.h>
 #include <asm/page-states.h>
 #include <asm/ebcdic.h>
diff --git a/arch/s390/boot/pgm_check_info.c b/arch/s390/boot/pgm_check_info.c
index 97244cd7a206..1683fa82851b 100644
--- a/arch/s390/boot/pgm_check_info.c
+++ b/arch/s390/boot/pgm_check_info.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/stdarg.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
diff --git a/arch/s390/boot/string.c b/arch/s390/boot/string.c
index faccb33b462c..e00ce47ce422 100644
--- a/arch/s390/boot/string.c
+++ b/arch/s390/boot/string.c
@@ -2,6 +2,7 @@
 #include <linux/ctype.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #undef CONFIG_KASAN
 #undef CONFIG_KASAN_GENERIC
 #include "../lib/string.c"
diff --git a/arch/s390/crypto/prng.c b/arch/s390/crypto/prng.c
index a077087bc6cc..7aa6101f55a4 100644
--- a/arch/s390/crypto/prng.c
+++ b/arch/s390/crypto/prng.c
@@ -22,6 +22,7 @@
 #include <linux/random.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include <asm/debug.h>
 #include <linux/uaccess.h>
diff --git a/arch/s390/hypfs/inode.c b/arch/s390/hypfs/inode.c
index 858beaf4a8cb..c9a6d152900a 100644
--- a/arch/s390/hypfs/inode.c
+++ b/arch/s390/hypfs/inode.c
@@ -15,6 +15,7 @@
 #include <linux/fs_context.h>
 #include <linux/fs_parser.h>
 #include <linux/namei.h>
+#include <linux/sprintf.h>
 #include <linux/vfs.h>
 #include <linux/slab.h>
 #include <linux/pagemap.h>
diff --git a/arch/s390/include/asm/debug.h b/arch/s390/include/asm/debug.h
index ccd4e148b5ed..d23627526407 100644
--- a/arch/s390/include/asm/debug.h
+++ b/arch/s390/include/asm/debug.h
@@ -10,6 +10,7 @@
 #include <linux/string.h>
 #include <linux/spinlock.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/refcount.h>
 #include <linux/fs.h>
diff --git a/arch/s390/kernel/debug.c b/arch/s390/kernel/debug.c
index 85328a0ef3b6..491142d6621d 100644
--- a/arch/s390/kernel/debug.c
+++ b/arch/s390/kernel/debug.c
@@ -16,8 +16,10 @@
 #include <linux/stddef.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sysctl.h>
 #include <linux/uaccess.h>
diff --git a/arch/s390/kernel/dis.c b/arch/s390/kernel/dis.c
index 89dc826a8d2e..5186795cea20 100644
--- a/arch/s390/kernel/dis.c
+++ b/arch/s390/kernel/dis.c
@@ -8,6 +8,7 @@
 
 #include <linux/sched.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/ptrace.h>
diff --git a/arch/s390/kernel/early.c b/arch/s390/kernel/early.c
index 2345ea332b97..a397b93bcb19 100644
--- a/arch/s390/kernel/early.c
+++ b/arch/s390/kernel/early.c
@@ -10,6 +10,7 @@
 #include <linux/compiler.h>
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/lockdep.h>
diff --git a/arch/s390/kernel/ipl.c b/arch/s390/kernel/ipl.c
index ba75f6bee774..3f1cb28006de 100644
--- a/arch/s390/kernel/ipl.c
+++ b/arch/s390/kernel/ipl.c
@@ -35,6 +35,7 @@
 #include <asm/sections.h>
 #include <asm/boot_data.h>
 #include "entry.h"
+#include <linux/sprintf.h>
 
 #define IPL_PARM_BLOCK_VERSION 0
 
diff --git a/arch/s390/kernel/nospec-branch.c b/arch/s390/kernel/nospec-branch.c
index d1b16d83e49a..b6468159f474 100644
--- a/arch/s390/kernel/nospec-branch.c
+++ b/arch/s390/kernel/nospec-branch.c
@@ -3,6 +3,7 @@
 #include <linux/device.h>
 #include <linux/cpu.h>
 #include <asm/nospec-branch.h>
+#include <linux/kstrtox.h>
 
 static int __init nobp_setup_early(char *str)
 {
diff --git a/arch/s390/kernel/nospec-sysfs.c b/arch/s390/kernel/nospec-sysfs.c
index 52d4353188ad..283f70560368 100644
--- a/arch/s390/kernel/nospec-sysfs.c
+++ b/arch/s390/kernel/nospec-sysfs.c
@@ -3,6 +3,7 @@
 #include <linux/cpu.h>
 #include <asm/facility.h>
 #include <asm/nospec-branch.h>
+#include <linux/sprintf.h>
 
 ssize_t cpu_show_spectre_v1(struct device *dev,
 			    struct device_attribute *attr, char *buf)
diff --git a/arch/s390/kernel/perf_cpum_sf.c b/arch/s390/kernel/perf_cpum_sf.c
index 06efad5b4f93..328c5599bff9 100644
--- a/arch/s390/kernel/perf_cpum_sf.c
+++ b/arch/s390/kernel/perf_cpum_sf.c
@@ -10,6 +10,7 @@
 
 #include <linux/kernel.h>
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/perf_event.h>
 #include <linux/percpu.h>
 #include <linux/pid.h>
@@ -23,6 +24,7 @@
 #include <asm/debug.h>
 #include <asm/timex.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 /* Minimum number of sample-data-block-tables:
  * At least one table is required for the sampling buffer structure.
diff --git a/arch/s390/kernel/perf_event.c b/arch/s390/kernel/perf_event.c
index dfa77da2fd2e..2726f0d98e95 100644
--- a/arch/s390/kernel/perf_event.c
+++ b/arch/s390/kernel/perf_event.c
@@ -15,6 +15,7 @@
 #include <linux/export.h>
 #include <linux/seq_file.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/compat.h>
 #include <linux/sysfs.h>
diff --git a/arch/s390/kernel/ptrace.c b/arch/s390/kernel/ptrace.c
index f1897a8bb221..901d65617111 100644
--- a/arch/s390/kernel/ptrace.c
+++ b/arch/s390/kernel/ptrace.c
@@ -9,6 +9,7 @@
 
 #include "asm/ptrace.h"
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/task_stack.h>
 #include <linux/mm.h>
diff --git a/arch/s390/kernel/setup.c b/arch/s390/kernel/setup.c
index d1f3b56e7afc..a4a0337a2d76 100644
--- a/arch/s390/kernel/setup.c
+++ b/arch/s390/kernel/setup.c
@@ -18,6 +18,7 @@
 
 #include <linux/errno.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/task.h>
 #include <linux/cpu.h>
diff --git a/arch/s390/kernel/smp.c b/arch/s390/kernel/smp.c
index c39d9f0d4b1c..314973994a32 100644
--- a/arch/s390/kernel/smp.c
+++ b/arch/s390/kernel/smp.c
@@ -59,6 +59,7 @@
 #include <asm/vdso.h>
 #include <asm/maccess.h>
 #include "entry.h"
+#include <linux/sprintf.h>
 
 enum {
 	ec_schedule = 0,
diff --git a/arch/s390/kernel/sysinfo.c b/arch/s390/kernel/sysinfo.c
index b439f17516eb..0dbccaf0cab8 100644
--- a/arch/s390/kernel/sysinfo.c
+++ b/arch/s390/kernel/sysinfo.c
@@ -21,6 +21,7 @@
 #include <asm/cpcmd.h>
 #include <asm/topology.h>
 #include <asm/fpu/api.h>
+#include <linux/sprintf.h>
 
 int topology_max_mnest;
 
diff --git a/arch/s390/kernel/time.c b/arch/s390/kernel/time.c
index fb9f31f36628..98b29810db41 100644
--- a/arch/s390/kernel/time.c
+++ b/arch/s390/kernel/time.c
@@ -18,10 +18,12 @@
 #include <linux/kernel_stat.h>
 #include <linux/errno.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/clock.h>
 #include <linux/kernel.h>
 #include <linux/param.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/interrupt.h>
diff --git a/arch/s390/kernel/topology.c b/arch/s390/kernel/topology.c
index 89e91b8ce842..0751f35dc67d 100644
--- a/arch/s390/kernel/topology.c
+++ b/arch/s390/kernel/topology.c
@@ -8,12 +8,14 @@
 
 #include <linux/workqueue.h>
 #include <linux/memblock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/sysctl.h>
 #include <linux/cpuset.h>
 #include <linux/device.h>
 #include <linux/export.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/topology.h>
 #include <linux/delay.h>
diff --git a/arch/s390/kvm/kvm-s390.c b/arch/s390/kvm/kvm-s390.c
index ea63ac769889..feeffe3e3181 100644
--- a/arch/s390/kvm/kvm-s390.c
+++ b/arch/s390/kvm/kvm-s390.c
@@ -25,6 +25,7 @@
 #include <linux/moduleparam.h>
 #include <linux/random.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/vmalloc.h>
 #include <linux/bitmap.h>
diff --git a/arch/s390/lib/spinlock.c b/arch/s390/lib/spinlock.c
index 81c53440b3e6..d78fc3ee55b6 100644
--- a/arch/s390/lib/spinlock.c
+++ b/arch/s390/lib/spinlock.c
@@ -8,6 +8,7 @@
 
 #include <linux/types.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
 #include <linux/jiffies.h>
 #include <linux/init.h>
diff --git a/arch/s390/mm/cmm.c b/arch/s390/mm/cmm.c
index f8b13f247646..fa113728e64e 100644
--- a/arch/s390/mm/cmm.c
+++ b/arch/s390/mm/cmm.c
@@ -10,10 +10,12 @@
 #include <linux/errno.h>
 #include <linux/fs.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/gfp.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/sysctl.h>
 #include <linux/swap.h>
diff --git a/arch/s390/mm/extmem.c b/arch/s390/mm/extmem.c
index 282fefe107a2..0c9c54b4a8bd 100644
--- a/arch/s390/mm/extmem.c
+++ b/arch/s390/mm/extmem.c
@@ -11,6 +11,7 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/spinlock.h>
 #include <linux/list.h>
diff --git a/arch/s390/pci/pci_debug.c b/arch/s390/pci/pci_debug.c
index 6dde2263c79d..79f7cbe46cbe 100644
--- a/arch/s390/pci/pci_debug.c
+++ b/arch/s390/pci/pci_debug.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/debugfs.h>
 #include <linux/export.h>
diff --git a/arch/s390/pci/pci_sysfs.c b/arch/s390/pci/pci_sysfs.c
index 8a7abac51816..b7af8087f483 100644
--- a/arch/s390/pci/pci_sysfs.c
+++ b/arch/s390/pci/pci_sysfs.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/pci.h>
 
diff --git a/arch/sh/drivers/dma/dma-sysfs.c b/arch/sh/drivers/dma/dma-sysfs.c
index 431bc18f0a41..dcd4d6368a2c 100644
--- a/arch/sh/drivers/dma/dma-sysfs.c
+++ b/arch/sh/drivers/dma/dma-sysfs.c
@@ -8,6 +8,8 @@
  */
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/device.h>
 #include <linux/platform_device.h>
diff --git a/arch/sh/drivers/platform_early.c b/arch/sh/drivers/platform_early.c
index 143747c45206..35b0aa51e674 100644
--- a/arch/sh/drivers/platform_early.c
+++ b/arch/sh/drivers/platform_early.c
@@ -1,8 +1,10 @@
 // SPDX--License-Identifier: GPL-2.0
 
 #include <asm/platform_early.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/pm.h>
+#include <linux/sprintf.h>
 
 static __initdata LIST_HEAD(sh_early_platform_driver_list);
 static __initdata LIST_HEAD(sh_early_platform_device_list);
diff --git a/arch/sh/drivers/push-switch.c b/arch/sh/drivers/push-switch.c
index 6ecba5f521eb..e297fa032b2a 100644
--- a/arch/sh/drivers/push-switch.c
+++ b/arch/sh/drivers/push-switch.c
@@ -10,6 +10,7 @@
 #include <linux/interrupt.h>
 #include <linux/platform_device.h>
 #include <asm/push-switch.h>
+#include <linux/sprintf.h>
 
 #define DRV_NAME "push-switch"
 #define DRV_VERSION "0.1.1"
diff --git a/arch/sh/kernel/cpu/sh4/sq.c b/arch/sh/kernel/cpu/sh4/sq.c
index d289e99dc118..d403379d5f32 100644
--- a/arch/sh/kernel/cpu/sh4/sq.c
+++ b/arch/sh/kernel/cpu/sh4/sq.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/mm.h>
 #include <linux/io.h>
diff --git a/arch/sh/kernel/vsyscall/vsyscall.c b/arch/sh/kernel/vsyscall/vsyscall.c
index 1bd85a6949c4..8828d7027007 100644
--- a/arch/sh/kernel/vsyscall/vsyscall.c
+++ b/arch/sh/kernel/vsyscall/vsyscall.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/gfp.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/elf.h>
 #include <linux/sched.h>
diff --git a/arch/sparc/kernel/chmc.c b/arch/sparc/kernel/chmc.c
index d5fad5fb04c1..47fb1bce6d56 100644
--- a/arch/sparc/kernel/chmc.c
+++ b/arch/sparc/kernel/chmc.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/list.h>
diff --git a/arch/sparc/kernel/ioport.c b/arch/sparc/kernel/ioport.c
index 5ebca5c7af1e..b3ecef642888 100644
--- a/arch/sparc/kernel/ioport.c
+++ b/arch/sparc/kernel/ioport.c
@@ -30,6 +30,7 @@
 #include <linux/sched.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ioport.h>
 #include <linux/mm.h>
diff --git a/arch/sparc/kernel/irq_64.c b/arch/sparc/kernel/irq_64.c
index 72da2e10e255..e1979ae20353 100644
--- a/arch/sparc/kernel/irq_64.c
+++ b/arch/sparc/kernel/irq_64.c
@@ -11,6 +11,7 @@
 #include <linux/ptrace.h>
 #include <linux/errno.h>
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/signal.h>
 #include <linux/mm.h>
 #include <linux/interrupt.h>
diff --git a/arch/sparc/kernel/led.c b/arch/sparc/kernel/led.c
index ab657b359789..73c8e7c6e932 100644
--- a/arch/sparc/kernel/led.c
+++ b/arch/sparc/kernel/led.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/proc_fs.h>
diff --git a/arch/sparc/kernel/pci.c b/arch/sparc/kernel/pci.c
index f66005ce4cb5..7edbe193c092 100644
--- a/arch/sparc/kernel/pci.c
+++ b/arch/sparc/kernel/pci.c
@@ -11,6 +11,7 @@
 
 #include <linux/export.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sched.h>
 #include <linux/capability.h>
diff --git a/arch/sparc/kernel/prom_32.c b/arch/sparc/kernel/prom_32.c
index 3df960c137f7..cbd8b9d868b1 100644
--- a/arch/sparc/kernel/prom_32.c
+++ b/arch/sparc/kernel/prom_32.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/mm.h>
diff --git a/arch/sparc/kernel/prom_64.c b/arch/sparc/kernel/prom_64.c
index 998aa693d491..29fd52002bea 100644
--- a/arch/sparc/kernel/prom_64.c
+++ b/arch/sparc/kernel/prom_64.c
@@ -13,6 +13,7 @@
 
 #include <linux/memblock.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/cpu.h>
diff --git a/arch/sparc/kernel/setup_32.c b/arch/sparc/kernel/setup_32.c
index e3b72a7b46d3..27c25f88b28a 100644
--- a/arch/sparc/kernel/setup_32.c
+++ b/arch/sparc/kernel/setup_32.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
diff --git a/arch/sparc/kernel/sysfs.c b/arch/sparc/kernel/sysfs.c
index f19487e4cc71..8ef03bcdb7bd 100644
--- a/arch/sparc/kernel/sysfs.c
+++ b/arch/sparc/kernel/sysfs.c
@@ -9,6 +9,7 @@
 #include <linux/smp.h>
 #include <linux/percpu.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 
 #include <asm/cpudata.h>
 #include <asm/hypervisor.h>
diff --git a/arch/sparc/kernel/traps_64.c b/arch/sparc/kernel/traps_64.c
index dd048023bff5..3d6a55e98b2a 100644
--- a/arch/sparc/kernel/traps_64.c
+++ b/arch/sparc/kernel/traps_64.c
@@ -25,6 +25,7 @@
 #include <linux/reboot.h>
 #include <linux/gfp.h>
 #include <linux/context_tracking.h>
+#include <linux/sprintf.h>
 
 #include <asm/smp.h>
 #include <asm/delay.h>
diff --git a/arch/sparc/kernel/vio.c b/arch/sparc/kernel/vio.c
index b78df3a15a72..641d6dba767b 100644
--- a/arch/sparc/kernel/vio.c
+++ b/arch/sparc/kernel/vio.c
@@ -15,6 +15,7 @@
 #include <linux/irq.h>
 #include <linux/export.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 
 #include <asm/mdesc.h>
 #include <asm/vio.h>
diff --git a/arch/sparc/prom/tree_32.c b/arch/sparc/prom/tree_32.c
index 0fed89375b74..66f03b18fea5 100644
--- a/arch/sparc/prom/tree_32.c
+++ b/arch/sparc/prom/tree_32.c
@@ -9,6 +9,7 @@
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/ctype.h>
 #include <linux/module.h>
diff --git a/arch/sparc/vdso/vma.c b/arch/sparc/vdso/vma.c
index 136c78f28f8b..69155a0c4b5c 100644
--- a/arch/sparc/vdso/vma.c
+++ b/arch/sparc/vdso/vma.c
@@ -10,6 +10,7 @@
 
 #include <linux/mm.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/init.h>
diff --git a/arch/um/drivers/fd.c b/arch/um/drivers/fd.c
index 082d739dc052..6c4fe2da6d68 100644
--- a/arch/um/drivers/fd.c
+++ b/arch/um/drivers/fd.c
@@ -7,6 +7,7 @@
 #include <stdlib.h>
 #include <unistd.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <termios.h>
 #include "chan_user.h"
 #include <os.h>
diff --git a/arch/um/drivers/harddog_user.c b/arch/um/drivers/harddog_user.c
index 9ed89304975e..432ba01b42ff 100644
--- a/arch/um/drivers/harddog_user.c
+++ b/arch/um/drivers/harddog_user.c
@@ -6,6 +6,7 @@
 #include <stdio.h>
 #include <unistd.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <os.h>
 #include "harddog.h"
 
diff --git a/arch/um/drivers/line.c b/arch/um/drivers/line.c
index ffc5cb92fa36..23328a4961ea 100644
--- a/arch/um/drivers/line.c
+++ b/arch/um/drivers/line.c
@@ -5,6 +5,7 @@
 
 #include <linux/irqreturn.h>
 #include <linux/kd.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/signal.h>
 #include <linux/slab.h>
 
diff --git a/arch/um/drivers/mconsole_kern.c b/arch/um/drivers/mconsole_kern.c
index ff4bda95b9c7..4ee56626b604 100644
--- a/arch/um/drivers/mconsole_kern.c
+++ b/arch/um/drivers/mconsole_kern.c
@@ -6,6 +6,7 @@
 
 #include <linux/console.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/interrupt.h>
 #include <linux/list.h>
diff --git a/arch/um/drivers/net_kern.c b/arch/um/drivers/net_kern.c
index 77c4afb8ab90..d2c95a55456c 100644
--- a/arch/um/drivers/net_kern.c
+++ b/arch/um/drivers/net_kern.c
@@ -11,6 +11,7 @@
 #include <linux/ethtool.h>
 #include <linux/inetdevice.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/netdevice.h>
 #include <linux/platform_device.h>
diff --git a/arch/um/drivers/net_user.c b/arch/um/drivers/net_user.c
index 4c9576452ab0..aa3522783b8e 100644
--- a/arch/um/drivers/net_user.c
+++ b/arch/um/drivers/net_user.c
@@ -7,6 +7,7 @@
 #include <unistd.h>
 #include <stdarg.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <stddef.h>
 #include <string.h>
 #include <sys/socket.h>
diff --git a/arch/um/drivers/port_user.c b/arch/um/drivers/port_user.c
index 3c62ae81df62..104df35e4777 100644
--- a/arch/um/drivers/port_user.c
+++ b/arch/um/drivers/port_user.c
@@ -7,6 +7,7 @@
 #include <stdlib.h>
 #include <string.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <termios.h>
 #include <unistd.h>
 #include <netinet/in.h>
diff --git a/arch/um/drivers/pty.c b/arch/um/drivers/pty.c
index 39c60068cfdf..bf5b612a6088 100644
--- a/arch/um/drivers/pty.c
+++ b/arch/um/drivers/pty.c
@@ -8,6 +8,7 @@
 #include <unistd.h>
 #include <errno.h>
 #include <fcntl.h>
+#include <linux/sprintf.h>
 #include <string.h>
 #include <termios.h>
 #include <sys/stat.h>
diff --git a/arch/um/drivers/slip_user.c b/arch/um/drivers/slip_user.c
index 7334019c9e60..dcfdb42ba0e6 100644
--- a/arch/um/drivers/slip_user.c
+++ b/arch/um/drivers/slip_user.c
@@ -8,6 +8,7 @@
 #include <unistd.h>
 #include <errno.h>
 #include <fcntl.h>
+#include <linux/sprintf.h>
 #include <string.h>
 #include <termios.h>
 #include <sys/wait.h>
diff --git a/arch/um/drivers/stderr_console.c b/arch/um/drivers/stderr_console.c
index ecc3a5814932..5084194c1902 100644
--- a/arch/um/drivers/stderr_console.c
+++ b/arch/um/drivers/stderr_console.c
@@ -2,6 +2,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/console.h>
+#include <linux/kstrtox.h>
 
 #include "chan_user.h"
 
diff --git a/arch/um/drivers/ubd_kern.c b/arch/um/drivers/ubd_kern.c
index 92ee2697ff39..c8a3d0aba21f 100644
--- a/arch/um/drivers/ubd_kern.c
+++ b/arch/um/drivers/ubd_kern.c
@@ -27,12 +27,14 @@
 #include <linux/blk-mq.h>
 #include <linux/ata.h>
 #include <linux/hdreg.h>
+#include <linux/kstrtox.h>
 #include <linux/major.h>
 #include <linux/cdrom.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
 #include <linux/ctype.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/platform_device.h>
 #include <linux/scatterlist.h>
diff --git a/arch/um/drivers/umcast_kern.c b/arch/um/drivers/umcast_kern.c
index 595a54f2b9c6..cf42c42f4d74 100644
--- a/arch/um/drivers/umcast_kern.c
+++ b/arch/um/drivers/umcast_kern.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include "umcast.h"
 #include <net_kern.h>
diff --git a/arch/um/drivers/vde_kern.c b/arch/um/drivers/vde_kern.c
index bc6f22cbfb35..08b54a80db77 100644
--- a/arch/um/drivers/vde_kern.c
+++ b/arch/um/drivers/vde_kern.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <net_kern.h>
 #include <net_user.h>
diff --git a/arch/um/drivers/vector_kern.c b/arch/um/drivers/vector_kern.c
index dc2feae789cb..a2fa60b3df69 100644
--- a/arch/um/drivers/vector_kern.c
+++ b/arch/um/drivers/vector_kern.c
@@ -13,6 +13,7 @@
 #include <linux/ethtool.h>
 #include <linux/inetdevice.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/netdevice.h>
 #include <linux/platform_device.h>
diff --git a/arch/um/drivers/vector_transports.c b/arch/um/drivers/vector_transports.c
index 0794d23f07cb..24ed7a01937f 100644
--- a/arch/um/drivers/vector_transports.c
+++ b/arch/um/drivers/vector_transports.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/etherdevice.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
diff --git a/arch/um/drivers/virtio_uml.c b/arch/um/drivers/virtio_uml.c
index 8adca2000e51..13c65fd6c2cf 100644
--- a/arch/um/drivers/virtio_uml.c
+++ b/arch/um/drivers/virtio_uml.c
@@ -24,6 +24,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_config.h>
 #include <linux/virtio_ring.h>
diff --git a/arch/um/drivers/xterm.c b/arch/um/drivers/xterm.c
index 6918de5e2956..35ff0260d142 100644
--- a/arch/um/drivers/xterm.c
+++ b/arch/um/drivers/xterm.c
@@ -8,6 +8,7 @@
 #include <stdlib.h>
 #include <unistd.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <string.h>
 #include <termios.h>
 #include "chan_user.h"
diff --git a/arch/um/kernel/exitcode.c b/arch/um/kernel/exitcode.c
index 43edc2aa57e4..f38c16d4a520 100644
--- a/arch/um/kernel/exitcode.c
+++ b/arch/um/kernel/exitcode.c
@@ -6,6 +6,7 @@
 #include <linux/ctype.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
diff --git a/arch/um/kernel/time.c b/arch/um/kernel/time.c
index 3e270da6b6f6..79bc98d91e8d 100644
--- a/arch/um/kernel/time.c
+++ b/arch/um/kernel/time.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/sched.h>
 #include <linux/spinlock.h>
diff --git a/arch/um/kernel/um_arch.c b/arch/um/kernel/um_arch.c
index 7a9820797eae..50f5699a7541 100644
--- a/arch/um/kernel/um_arch.c
+++ b/arch/um/kernel/um_arch.c
@@ -6,6 +6,7 @@
 #include <linux/cpu.h>
 #include <linux/delay.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/ctype.h>
 #include <linux/module.h>
diff --git a/arch/um/os-Linux/drivers/ethertap_user.c b/arch/um/os-Linux/drivers/ethertap_user.c
index bdf215c0eca7..29374f900b95 100644
--- a/arch/um/os-Linux/drivers/ethertap_user.c
+++ b/arch/um/os-Linux/drivers/ethertap_user.c
@@ -9,6 +9,7 @@
 #include <stdio.h>
 #include <unistd.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <string.h>
 #include <sys/socket.h>
 #include <sys/wait.h>
diff --git a/arch/um/os-Linux/drivers/tuntap_user.c b/arch/um/os-Linux/drivers/tuntap_user.c
index 91f0e27ca3a6..8855a4d6bac5 100644
--- a/arch/um/os-Linux/drivers/tuntap_user.c
+++ b/arch/um/os-Linux/drivers/tuntap_user.c
@@ -6,6 +6,7 @@
 #include <stdio.h>
 #include <unistd.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <string.h>
 #include <linux/if_tun.h>
 #include <net/if.h>
diff --git a/arch/um/os-Linux/process.c b/arch/um/os-Linux/process.c
index e52dd37ddadc..9321587bbc17 100644
--- a/arch/um/os-Linux/process.c
+++ b/arch/um/os-Linux/process.c
@@ -8,6 +8,7 @@
 #include <stdlib.h>
 #include <unistd.h>
 #include <errno.h>
+#include <linux/sprintf.h>
 #include <signal.h>
 #include <fcntl.h>
 #include <sys/mman.h>
diff --git a/arch/um/os-Linux/umid.c b/arch/um/os-Linux/umid.c
index e09d65b05d1c..1fceee4f6bae 100644
--- a/arch/um/os-Linux/umid.c
+++ b/arch/um/os-Linux/umid.c
@@ -8,6 +8,7 @@
 #include <dirent.h>
 #include <errno.h>
 #include <fcntl.h>
+#include <linux/sprintf.h>
 #include <signal.h>
 #include <string.h>
 #include <unistd.h>
diff --git a/arch/x86/boot/boot.h b/arch/x86/boot/boot.h
index 148ba5c5106e..cb4e272812a6 100644
--- a/arch/x86/boot/boot.h
+++ b/arch/x86/boot/boot.h
@@ -27,6 +27,8 @@
 #include "ctype.h"
 #include "cpuflags.h"
 #include "io.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /* Useful macros */
 #define ARRAY_SIZE(x) (sizeof(x) / sizeof(*(x)))
diff --git a/arch/x86/boot/compressed/error.c b/arch/x86/boot/compressed/error.c
index 19a8251de506..18a84b361506 100644
--- a/arch/x86/boot/compressed/error.c
+++ b/arch/x86/boot/compressed/error.c
@@ -6,6 +6,7 @@
  */
 #include "misc.h"
 #include "error.h"
+#include <linux/sprintf.h>
 
 void warn(const char *m)
 {
diff --git a/arch/x86/boot/compressed/kaslr.c b/arch/x86/boot/compressed/kaslr.c
index dec961c6d16a..11e28e4ccf2d 100644
--- a/arch/x86/boot/compressed/kaslr.c
+++ b/arch/x86/boot/compressed/kaslr.c
@@ -23,6 +23,7 @@
 #include "error.h"
 #include "../string.h"
 #include "efi.h"
+#include <linux/kstrtox.h>
 
 #include <generated/compile.h>
 #include <linux/module.h>
diff --git a/arch/x86/boot/cpu.c b/arch/x86/boot/cpu.c
index feb6dbd7ca86..7045495ba7d7 100644
--- a/arch/x86/boot/cpu.c
+++ b/arch/x86/boot/cpu.c
@@ -15,6 +15,7 @@
 
 #include "boot.h"
 #include "cpustr.h"
+#include <linux/sprintf.h>
 
 static char *cpu_name(int level)
 {
diff --git a/arch/x86/boot/early_serial_console.c b/arch/x86/boot/early_serial_console.c
index 023bf1c3de8b..b0cba2698075 100644
--- a/arch/x86/boot/early_serial_console.c
+++ b/arch/x86/boot/early_serial_console.c
@@ -4,6 +4,7 @@
  * included from both the compressed kernel and the regular kernel.
  */
 #include "boot.h"
+#include <linux/kstrtox.h>
 
 #define DEFAULT_SERIAL_PORT 0x3f8 /* ttyS0 */
 
diff --git a/arch/x86/boot/printf.c b/arch/x86/boot/printf.c
index 1237beeb9540..1facbf24a274 100644
--- a/arch/x86/boot/printf.c
+++ b/arch/x86/boot/printf.c
@@ -14,6 +14,7 @@
  */
 
 #include "boot.h"
+#include <linux/sprintf.h>
 
 static int skip_atoi(const char **s)
 {
diff --git a/arch/x86/boot/video.c b/arch/x86/boot/video.c
index f2e96905b3fe..b3e4f3a4099f 100644
--- a/arch/x86/boot/video.c
+++ b/arch/x86/boot/video.c
@@ -12,6 +12,7 @@
  */
 
 #include <uapi/asm/boot.h>
+#include <linux/sprintf.h>
 
 #include "boot.h"
 #include "video.h"
diff --git a/arch/x86/coco/tdx/tdx.c b/arch/x86/coco/tdx/tdx.c
index c1cb90369915..9624a35a9934 100644
--- a/arch/x86/coco/tdx/tdx.c
+++ b/arch/x86/coco/tdx/tdx.c
@@ -14,6 +14,7 @@
 #include <asm/insn.h>
 #include <asm/insn-eval.h>
 #include <asm/pgtable.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /* MMIO direction */
 #define EPT_READ	0
diff --git a/arch/x86/entry/common.c b/arch/x86/entry/common.c
index 6356060caaf3..434adddf8f2a 100644
--- a/arch/x86/entry/common.c
+++ b/arch/x86/entry/common.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/task_stack.h>
 #include <linux/entry-common.h>
diff --git a/arch/x86/entry/vdso/vdso32-setup.c b/arch/x86/entry/vdso/vdso32-setup.c
index 76e4e74f35b5..5c6b60dea810 100644
--- a/arch/x86/entry/vdso/vdso32-setup.c
+++ b/arch/x86/entry/vdso/vdso32-setup.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/smp.h>
 #include <linux/kernel.h>
 #include <linux/mm_types.h>
diff --git a/arch/x86/entry/vdso/vma.c b/arch/x86/entry/vdso/vma.c
index 7645730dc228..4c6a54d19d85 100644
--- a/arch/x86/entry/vdso/vma.c
+++ b/arch/x86/entry/vdso/vma.c
@@ -6,6 +6,7 @@
  */
 #include <linux/mm.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/task_stack.h>
 #include <linux/slab.h>
diff --git a/arch/x86/events/amd/iommu.c b/arch/x86/events/amd/iommu.c
index b15f7b950d2e..84b8e42bbb8d 100644
--- a/arch/x86/events/amd/iommu.c
+++ b/arch/x86/events/amd/iommu.c
@@ -15,6 +15,7 @@
 #include <linux/cpumask.h>
 #include <linux/slab.h>
 #include <linux/amd-iommu.h>
+#include <linux/sprintf.h>
 
 #include "../perf_event.h"
 #include "iommu.h"
diff --git a/arch/x86/events/amd/uncore.c b/arch/x86/events/amd/uncore.c
index 5bf03c575812..3201de7bbb5a 100644
--- a/arch/x86/events/amd/uncore.c
+++ b/arch/x86/events/amd/uncore.c
@@ -7,12 +7,14 @@
 
 #include <linux/perf_event.h>
 #include <linux/percpu.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/cpu.h>
 #include <linux/cpumask.h>
 #include <linux/cpufeature.h>
+#include <linux/device.h>
 #include <linux/smp.h>
 
 #include <asm/perf_event.h>
diff --git a/arch/x86/events/core.c b/arch/x86/events/core.c
index 09050641ce5d..8a9c9a0fc8a6 100644
--- a/arch/x86/events/core.c
+++ b/arch/x86/events/core.c
@@ -14,6 +14,7 @@
 
 #include <linux/perf_event.h>
 #include <linux/capability.h>
+#include <linux/kstrtox.h>
 #include <linux/notifier.h>
 #include <linux/hardirq.h>
 #include <linux/kprobes.h>
@@ -22,6 +23,7 @@
 #include <linux/kdebug.h>
 #include <linux/sched/mm.h>
 #include <linux/sched/clock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/slab.h>
 #include <linux/cpu.h>
diff --git a/arch/x86/events/intel/core.c b/arch/x86/events/intel/core.c
index 3804f21ab049..eb22866dd192 100644
--- a/arch/x86/events/intel/core.c
+++ b/arch/x86/events/intel/core.c
@@ -11,10 +11,12 @@
 #include <linux/stddef.h>
 #include <linux/types.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/export.h>
 #include <linux/nmi.h>
 #include <linux/kvm_host.h>
+#include <linux/sprintf.h>
 
 #include <asm/cpufeature.h>
 #include <asm/hardirq.h>
diff --git a/arch/x86/events/intel/cstate.c b/arch/x86/events/intel/cstate.c
index 4b50a3a9818a..04be9feb7aef 100644
--- a/arch/x86/events/intel/cstate.c
+++ b/arch/x86/events/intel/cstate.c
@@ -113,6 +113,7 @@
 #include <asm/intel-family.h>
 #include "../perf_event.h"
 #include "../probe.h"
+#include <linux/sprintf.h>
 
 MODULE_LICENSE("GPL");
 
diff --git a/arch/x86/events/intel/pt.c b/arch/x86/events/intel/pt.c
index 8e2a12235e62..740284a8455b 100644
--- a/arch/x86/events/intel/pt.c
+++ b/arch/x86/events/intel/pt.c
@@ -17,6 +17,7 @@
 #include <linux/limits.h>
 #include <linux/slab.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include <asm/perf_event.h>
 #include <asm/insn.h>
diff --git a/arch/x86/events/intel/uncore.c b/arch/x86/events/intel/uncore.c
index 7927c0b832fa..ff2c9c6e11cb 100644
--- a/arch/x86/events/intel/uncore.c
+++ b/arch/x86/events/intel/uncore.c
@@ -1,5 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
+#include <linux/hrtimer.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <asm/cpu_device_id.h>
 #include <asm/intel-family.h>
diff --git a/arch/x86/events/intel/uncore.h b/arch/x86/events/intel/uncore.h
index 4838502d89ae..b3dc35ad1234 100644
--- a/arch/x86/events/intel/uncore.h
+++ b/arch/x86/events/intel/uncore.h
@@ -4,6 +4,7 @@
 #include <asm/apicdef.h>
 #include <asm/intel-family.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/sprintf.h>
 
 #include <linux/perf_event.h>
 #include "../perf_event.h"
diff --git a/arch/x86/events/intel/uncore_snbep.c b/arch/x86/events/intel/uncore_snbep.c
index a96496bef678..6fb67d1a170b 100644
--- a/arch/x86/events/intel/uncore_snbep.c
+++ b/arch/x86/events/intel/uncore_snbep.c
@@ -2,6 +2,7 @@
 /* SandyBridge-EP/IvyTown uncore support */
 #include "uncore.h"
 #include "uncore_discovery.h"
+#include <linux/sprintf.h>
 
 /* SNB-EP pci bus to socket mapping */
 #define SNBEP_CPUNODEID			0x40
diff --git a/arch/x86/events/rapl.c b/arch/x86/events/rapl.c
index 8d98d468b976..030629d12298 100644
--- a/arch/x86/events/rapl.c
+++ b/arch/x86/events/rapl.c
@@ -55,6 +55,7 @@
 
 #define pr_fmt(fmt) "RAPL PMU: " fmt
 
+#include <linux/hrtimer.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/perf_event.h>
diff --git a/arch/x86/hyperv/ivm.c b/arch/x86/hyperv/ivm.c
index 7dcbf153ad72..6cfc724a1c26 100644
--- a/arch/x86/hyperv/ivm.c
+++ b/arch/x86/hyperv/ivm.c
@@ -8,6 +8,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/hyperv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <asm/svm.h>
diff --git a/arch/x86/include/asm/mshyperv.h b/arch/x86/include/asm/mshyperv.h
index ce4ce8720d55..8af2adc24cd2 100644
--- a/arch/x86/include/asm/mshyperv.h
+++ b/arch/x86/include/asm/mshyperv.h
@@ -10,6 +10,7 @@
 #include <asm/nospec-branch.h>
 #include <asm/paravirt.h>
 #include <asm/mshyperv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * Hyper-V always provides a single IO-APIC at this MMIO address.
diff --git a/arch/x86/include/asm/sparsemem.h b/arch/x86/include/asm/sparsemem.h
index 1be13b2dfe8b..c889a7360eac 100644
--- a/arch/x86/include/asm/sparsemem.h
+++ b/arch/x86/include/asm/sparsemem.h
@@ -16,6 +16,8 @@
  *
  */
 
+#include <asm/pgtable_types.h> // for pgtable_l5_enabled()
+
 #ifdef CONFIG_X86_32
 # ifdef CONFIG_X86_PAE
 #  define SECTION_SIZE_BITS	29
diff --git a/arch/x86/kernel/alternative.c b/arch/x86/kernel/alternative.c
index 45a280f2161c..6fa2c7e4c30e 100644
--- a/arch/x86/kernel/alternative.c
+++ b/arch/x86/kernel/alternative.c
@@ -8,6 +8,7 @@
 #include <linux/list.h>
 #include <linux/stringify.h>
 #include <linux/highmem.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/vmalloc.h>
 #include <linux/memory.h>
diff --git a/arch/x86/kernel/aperture_64.c b/arch/x86/kernel/aperture_64.c
index 89c0c8a3fc7e..66c745b120df 100644
--- a/arch/x86/kernel/aperture_64.c
+++ b/arch/x86/kernel/aperture_64.c
@@ -15,6 +15,7 @@
 
 #include <linux/kernel.h>
 #include <linux/kcore.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/memblock.h>
diff --git a/arch/x86/kernel/apic/vector.c b/arch/x86/kernel/apic/vector.c
index 185738c72766..66fff83fa589 100644
--- a/arch/x86/kernel/apic/vector.c
+++ b/arch/x86/kernel/apic/vector.c
@@ -9,6 +9,7 @@
  */
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/init.h>
 #include <linux/compiler.h>
diff --git a/arch/x86/kernel/apic/x2apic_uv_x.c b/arch/x86/kernel/apic/x2apic_uv_x.c
index f1766b18dcd0..e21e3178998f 100644
--- a/arch/x86/kernel/apic/x2apic_uv_x.c
+++ b/arch/x86/kernel/apic/x2apic_uv_x.c
@@ -17,6 +17,7 @@
 #include <linux/pci.h>
 #include <linux/acpi.h>
 #include <linux/efi.h>
+#include <linux/sprintf.h>
 
 #include <asm/e820/api.h>
 #include <asm/uv/uv_mmrs.h>
diff --git a/arch/x86/kernel/apm_32.c b/arch/x86/kernel/apm_32.c
index 76a5ced278c2..a7d77845eeaa 100644
--- a/arch/x86/kernel/apm_32.c
+++ b/arch/x86/kernel/apm_32.c
@@ -195,6 +195,7 @@
 #define pr_fmt(fmt) "apm: " fmt
 
 #include <linux/module.h>
+#include <linux/kstrtox.h>
 
 #include <linux/poll.h>
 #include <linux/types.h>
diff --git a/arch/x86/kernel/callthunks.c b/arch/x86/kernel/callthunks.c
index cf7e5be1b844..3fa77e038da0 100644
--- a/arch/x86/kernel/callthunks.c
+++ b/arch/x86/kernel/callthunks.c
@@ -6,6 +6,7 @@
 #include <linux/kallsyms.h>
 #include <linux/memory.h>
 #include <linux/moduleloader.h>
+#include <linux/sprintf.h>
 #include <linux/static_call.h>
 
 #include <asm/alternative.h>
diff --git a/arch/x86/kernel/check.c b/arch/x86/kernel/check.c
index 5136e6818da8..28d117e870a6 100644
--- a/arch/x86/kernel/check.c
+++ b/arch/x86/kernel/check.c
@@ -3,6 +3,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/kthread.h>
 #include <linux/workqueue.h>
diff --git a/arch/x86/kernel/cpu/cacheinfo.c b/arch/x86/kernel/cpu/cacheinfo.c
index c131c412db89..1372d8992e4a 100644
--- a/arch/x86/kernel/cpu/cacheinfo.c
+++ b/arch/x86/kernel/cpu/cacheinfo.c
@@ -12,8 +12,10 @@
 #include <linux/cacheinfo.h>
 #include <linux/cpu.h>
 #include <linux/cpuhotplug.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/capability.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/pci.h>
 #include <linux/stop_machine.h>
diff --git a/arch/x86/kernel/cpu/centaur.c b/arch/x86/kernel/cpu/centaur.c
index 345f7d905db6..1281633e1d6e 100644
--- a/arch/x86/kernel/cpu/centaur.c
+++ b/arch/x86/kernel/cpu/centaur.c
@@ -2,6 +2,7 @@
 
 #include <linux/sched.h>
 #include <linux/sched/clock.h>
+#include <linux/sprintf.h>
 
 #include <asm/cpu.h>
 #include <asm/cpufeature.h>
diff --git a/arch/x86/kernel/cpu/common.c b/arch/x86/kernel/cpu/common.c
index 0da70e940345..57a87631bdc5 100644
--- a/arch/x86/kernel/cpu/common.c
+++ b/arch/x86/kernel/cpu/common.c
@@ -7,7 +7,9 @@
 #include <linux/bitops.h>
 #include <linux/kernel.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/percpu.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/delay.h>
diff --git a/arch/x86/kernel/cpu/debugfs.c b/arch/x86/kernel/cpu/debugfs.c
index 0c179d684b3b..09739d6b3892 100644
--- a/arch/x86/kernel/cpu/debugfs.c
+++ b/arch/x86/kernel/cpu/debugfs.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include <asm/apic.h>
 #include <asm/processor.h>
diff --git a/arch/x86/kernel/cpu/intel.c b/arch/x86/kernel/cpu/intel.c
index a927a8fc9624..b357e2dc2712 100644
--- a/arch/x86/kernel/cpu/intel.c
+++ b/arch/x86/kernel/cpu/intel.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/kernel.h>
 #include <linux/pgtable.h>
+#include <linux/sprintf.h>
 
 #include <linux/string.h>
 #include <linux/bitops.h>
@@ -11,6 +12,7 @@
 #include <linux/thread_info.h>
 #include <linux/init.h>
 #include <linux/uaccess.h>
+#include <linux/ratelimit.h>
 #include <linux/workqueue.h>
 #include <linux/delay.h>
 #include <linux/cpuhotplug.h>
diff --git a/arch/x86/kernel/cpu/intel_epb.c b/arch/x86/kernel/cpu/intel_epb.c
index f18d35fe27a9..df7305e2e211 100644
--- a/arch/x86/kernel/cpu/intel_epb.c
+++ b/arch/x86/kernel/cpu/intel_epb.c
@@ -12,6 +12,7 @@
 #include <linux/cpu.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/syscore_ops.h>
 #include <linux/pm.h>
diff --git a/arch/x86/kernel/cpu/mce/amd.c b/arch/x86/kernel/cpu/mce/amd.c
index 2b46eb0fdf3a..fd33217c3e0d 100644
--- a/arch/x86/kernel/cpu/mce/amd.c
+++ b/arch/x86/kernel/cpu/mce/amd.c
@@ -8,11 +8,13 @@
  *  All MC4_MISCi registers are shared between cores on a node.
  */
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/notifier.h>
 #include <linux/kobject.h>
 #include <linux/percpu.h>
 #include <linux/errno.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 #include <linux/init.h>
diff --git a/arch/x86/kernel/cpu/mce/core.c b/arch/x86/kernel/cpu/mce/core.c
index b5cc557cfc37..ff6c6d9897db 100644
--- a/arch/x86/kernel/cpu/mce/core.c
+++ b/arch/x86/kernel/cpu/mce/core.c
@@ -15,6 +15,7 @@
 #include <linux/ratelimit.h>
 #include <linux/rcupdate.h>
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/kdebug.h>
 #include <linux/kernel.h>
diff --git a/arch/x86/kernel/cpu/mce/inject.c b/arch/x86/kernel/cpu/mce/inject.c
index 72f0695c3dc1..e59fafb76f29 100644
--- a/arch/x86/kernel/cpu/mce/inject.c
+++ b/arch/x86/kernel/cpu/mce/inject.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/notifier.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <asm/amd_nb.h>
diff --git a/arch/x86/kernel/cpu/microcode/core.c b/arch/x86/kernel/cpu/microcode/core.c
index 232026a239a6..ac18fa6b3499 100644
--- a/arch/x86/kernel/cpu/microcode/core.c
+++ b/arch/x86/kernel/cpu/microcode/core.c
@@ -18,6 +18,7 @@
 #define pr_fmt(fmt) "microcode: " fmt
 
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/stop_machine.h>
 #include <linux/syscore_ops.h>
 #include <linux/miscdevice.h>
@@ -26,6 +27,7 @@
 #include <linux/cpumask.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/cpu.h>
 #include <linux/nmi.h>
diff --git a/arch/x86/kernel/cpu/microcode/intel.c b/arch/x86/kernel/cpu/microcode/intel.c
index 857e608af641..c514ad2fcf94 100644
--- a/arch/x86/kernel/cpu/microcode/intel.c
+++ b/arch/x86/kernel/cpu/microcode/intel.c
@@ -13,6 +13,7 @@
 #define pr_fmt(fmt) "microcode: " fmt
 #include <linux/earlycpio.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/initrd.h>
 #include <linux/kernel.h>
diff --git a/arch/x86/kernel/cpu/mtrr/cleanup.c b/arch/x86/kernel/cpu/mtrr/cleanup.c
index 18cf79d6e2c5..f68f8b44ea3a 100644
--- a/arch/x86/kernel/cpu/mtrr/cleanup.c
+++ b/arch/x86/kernel/cpu/mtrr/cleanup.c
@@ -18,6 +18,7 @@
  * Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
  */
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/smp.h>
 #include <linux/cpu.h>
diff --git a/arch/x86/kernel/cpu/mtrr/if.c b/arch/x86/kernel/cpu/mtrr/if.c
index a5c506f6da7f..342b6eb06123 100644
--- a/arch/x86/kernel/cpu/mtrr/if.c
+++ b/arch/x86/kernel/cpu/mtrr/if.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/capability.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/uaccess.h>
 #include <linux/proc_fs.h>
diff --git a/arch/x86/kernel/cpu/resctrl/ctrlmondata.c b/arch/x86/kernel/cpu/resctrl/ctrlmondata.c
index beccb0e87ba7..e38b9695cc11 100644
--- a/arch/x86/kernel/cpu/resctrl/ctrlmondata.c
+++ b/arch/x86/kernel/cpu/resctrl/ctrlmondata.c
@@ -17,6 +17,7 @@
 
 #include <linux/cpu.h>
 #include <linux/kernfs.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include "internal.h"
diff --git a/arch/x86/kernel/cpu/resctrl/pseudo_lock.c b/arch/x86/kernel/cpu/resctrl/pseudo_lock.c
index 8f559eeae08e..7499f81f334d 100644
--- a/arch/x86/kernel/cpu/resctrl/pseudo_lock.c
+++ b/arch/x86/kernel/cpu/resctrl/pseudo_lock.c
@@ -15,11 +15,13 @@
 #include <linux/cpu.h>
 #include <linux/cpumask.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/mman.h>
 #include <linux/perf_event.h>
 #include <linux/pm_qos.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <asm/cacheflush.h>
diff --git a/arch/x86/kernel/cpu/resctrl/rdtgroup.c b/arch/x86/kernel/cpu/resctrl/rdtgroup.c
index aa24343f1d23..6bff9dd5dca7 100644
--- a/arch/x86/kernel/cpu/resctrl/rdtgroup.c
+++ b/arch/x86/kernel/cpu/resctrl/rdtgroup.c
@@ -17,6 +17,8 @@
 #include <linux/debugfs.h>
 #include <linux/fs.h>
 #include <linux/fs_parser.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/kernfs.h>
 #include <linux/seq_buf.h>
diff --git a/arch/x86/kernel/cpu/umwait.c b/arch/x86/kernel/cpu/umwait.c
index 2293efd6ffa6..edd867e7aaa4 100644
--- a/arch/x86/kernel/cpu/umwait.c
+++ b/arch/x86/kernel/cpu/umwait.c
@@ -2,6 +2,9 @@
 #include <linux/syscore_ops.h>
 #include <linux/suspend.h>
 #include <linux/cpu.h>
+#include <linux/device.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <asm/msr.h>
 #include <asm/mwait.h>
diff --git a/arch/x86/kernel/cpu/vmware.c b/arch/x86/kernel/cpu/vmware.c
index 11f83d07925e..e66ee645c956 100644
--- a/arch/x86/kernel/cpu/vmware.c
+++ b/arch/x86/kernel/cpu/vmware.c
@@ -26,6 +26,7 @@
 #include <linux/export.h>
 #include <linux/clocksource.h>
 #include <linux/cpu.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/reboot.h>
 #include <linux/static_call.h>
 #include <asm/div64.h>
diff --git a/arch/x86/kernel/cpuid.c b/arch/x86/kernel/cpuid.c
index dae436253de4..3707c626e235 100644
--- a/arch/x86/kernel/cpuid.c
+++ b/arch/x86/kernel/cpuid.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/types.h>
 #include <linux/errno.h>
diff --git a/arch/x86/kernel/e820.c b/arch/x86/kernel/e820.c
index fb8cf953380d..c6ae00a62b6d 100644
--- a/arch/x86/kernel/e820.c
+++ b/arch/x86/kernel/e820.c
@@ -10,6 +10,7 @@
  * allocation code routines via a platform independent interface (memblock, etc.).
  */
 #include <linux/crash_dump.h>
+#include <linux/kstrtox.h>
 #include <linux/memblock.h>
 #include <linux/suspend.h>
 #include <linux/acpi.h>
diff --git a/arch/x86/kernel/early_printk.c b/arch/x86/kernel/early_printk.c
index 44f937015e1e..451eee1211aa 100644
--- a/arch/x86/kernel/early_printk.c
+++ b/arch/x86/kernel/early_printk.c
@@ -2,6 +2,7 @@
 #include <linux/console.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/screen_info.h>
 #include <linux/usb/ch9.h>
diff --git a/arch/x86/kernel/hpet.c b/arch/x86/kernel/hpet.c
index a38d0c93a66e..35e275052142 100644
--- a/arch/x86/kernel/hpet.c
+++ b/arch/x86/kernel/hpet.c
@@ -6,6 +6,7 @@
 #include <linux/hpet.h>
 #include <linux/cpu.h>
 #include <linux/irq.h>
+#include <linux/sprintf.h>
 
 #include <asm/irq_remapping.h>
 #include <asm/hpet.h>
diff --git a/arch/x86/kernel/kdebugfs.c b/arch/x86/kernel/kdebugfs.c
index e2e89bebcbc3..7c54dd5f6b49 100644
--- a/arch/x86/kernel/kdebugfs.c
+++ b/arch/x86/kernel/kdebugfs.c
@@ -6,6 +6,7 @@
  *	Huang Ying <ying.huang@intel.com>
  */
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/export.h>
 #include <linux/slab.h>
diff --git a/arch/x86/kernel/kexec-bzimage64.c b/arch/x86/kernel/kexec-bzimage64.c
index b55737b83a84..3d1162d1a615 100644
--- a/arch/x86/kernel/kexec-bzimage64.c
+++ b/arch/x86/kernel/kexec-bzimage64.c
@@ -18,6 +18,7 @@
 #include <linux/mm.h>
 #include <linux/efi.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 
 #include <asm/bootparam.h>
 #include <asm/setup.h>
diff --git a/arch/x86/kernel/ksysfs.c b/arch/x86/kernel/ksysfs.c
index 257892fcefa7..805069cd8a6e 100644
--- a/arch/x86/kernel/ksysfs.c
+++ b/arch/x86/kernel/ksysfs.c
@@ -9,6 +9,8 @@
  */
 
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 #include <linux/init.h>
diff --git a/arch/x86/kernel/msr.c b/arch/x86/kernel/msr.c
index e17c16c54a37..86a2d22c2e88 100644
--- a/arch/x86/kernel/msr.c
+++ b/arch/x86/kernel/msr.c
@@ -20,6 +20,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/types.h>
 #include <linux/errno.h>
diff --git a/arch/x86/kernel/sev.c b/arch/x86/kernel/sev.c
index 1ef7ae806a01..94129530f4f1 100644
--- a/arch/x86/kernel/sev.c
+++ b/arch/x86/kernel/sev.c
@@ -12,6 +12,7 @@
 #include <linux/sched/debug.h>	/* For show_regs() */
 #include <linux/percpu-defs.h>
 #include <linux/cc_platform.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/printk.h>
 #include <linux/mm_types.h>
 #include <linux/set_memory.h>
diff --git a/arch/x86/kernel/static_call.c b/arch/x86/kernel/static_call.c
index 4eefaac64c6c..abef26cd13df 100644
--- a/arch/x86/kernel/static_call.c
+++ b/arch/x86/kernel/static_call.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/static_call.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/memory.h>
 #include <linux/bug.h>
 #include <asm/text-patching.h>
diff --git a/arch/x86/kernel/tsc.c b/arch/x86/kernel/tsc.c
index d45084c6a15e..42c8fbdf189c 100644
--- a/arch/x86/kernel/tsc.c
+++ b/arch/x86/kernel/tsc.c
@@ -2,6 +2,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/clock.h>
 #include <linux/init.h>
diff --git a/arch/x86/kvm/mmu/mmu.c b/arch/x86/kvm/mmu/mmu.c
index 08991c25f9e3..5b12413ba072 100644
--- a/arch/x86/kvm/mmu/mmu.c
+++ b/arch/x86/kvm/mmu/mmu.c
@@ -28,6 +28,8 @@
 #include "page_track.h"
 #include "cpuid.h"
 #include "spte.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 
 #include <linux/kvm_host.h>
 #include <linux/types.h>
@@ -36,6 +38,7 @@
 #include <linux/highmem.h>
 #include <linux/moduleparam.h>
 #include <linux/export.h>
+#include <linux/shrinker.h>
 #include <linux/swap.h>
 #include <linux/hugetlb.h>
 #include <linux/compiler.h>
diff --git a/arch/x86/kvm/svm/svm.c b/arch/x86/kvm/svm/svm.c
index 272d5ed37ce7..35f2def1f1b5 100644
--- a/arch/x86/kvm/svm/svm.c
+++ b/arch/x86/kvm/svm/svm.c
@@ -1,6 +1,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kvm_host.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "irq.h"
 #include "mmu.h"
diff --git a/arch/x86/kvm/vmx/nested.c b/arch/x86/kvm/vmx/nested.c
index 994e014f8a50..bb6419bfe4dd 100644
--- a/arch/x86/kvm/vmx/nested.c
+++ b/arch/x86/kvm/vmx/nested.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
+#include <linux/hrtimer.h>
 #include <linux/objtool.h>
 #include <linux/percpu.h>
 
diff --git a/arch/x86/kvm/xen.c b/arch/x86/kvm/xen.c
index 4b4e738c6f1b..d2056ae8f34d 100644
--- a/arch/x86/kvm/xen.c
+++ b/arch/x86/kvm/xen.c
@@ -13,6 +13,7 @@
 #include "lapic.h"
 
 #include <linux/eventfd.h>
+#include <linux/hrtimer.h>
 #include <linux/kvm_host.h>
 #include <linux/sched/stat.h>
 
diff --git a/arch/x86/lib/delay.c b/arch/x86/lib/delay.c
index 23f81ca3f06b..2b264b6f648e 100644
--- a/arch/x86/lib/delay.c
+++ b/arch/x86/lib/delay.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/sched.h>
 #include <linux/timex.h>
 #include <linux/preempt.h>
diff --git a/arch/x86/mm/cpu_entry_area.c b/arch/x86/mm/cpu_entry_area.c
index e91500a80963..81d98c501d14 100644
--- a/arch/x86/mm/cpu_entry_area.c
+++ b/arch/x86/mm/cpu_entry_area.c
@@ -5,6 +5,7 @@
 #include <linux/kallsyms.h>
 #include <linux/kcore.h>
 #include <linux/pgtable.h>
+#include <linux/random.h>
 
 #include <asm/cpu_entry_area.h>
 #include <asm/fixmap.h>
diff --git a/arch/x86/mm/numa_emulation.c b/arch/x86/mm/numa_emulation.c
index 9a9305367fdd..7a5272f1ebf6 100644
--- a/arch/x86/mm/numa_emulation.c
+++ b/arch/x86/mm/numa_emulation.c
@@ -4,6 +4,7 @@
  */
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/topology.h>
 #include <linux/memblock.h>
 #include <asm/dma.h>
diff --git a/arch/x86/mm/pkeys.c b/arch/x86/mm/pkeys.c
index 7418c367e328..7ac38c0f7c16 100644
--- a/arch/x86/mm/pkeys.c
+++ b/arch/x86/mm/pkeys.c
@@ -4,8 +4,10 @@
  * Copyright (c) 2015, Intel Corporation.
  */
 #include <linux/debugfs.h>		/* debugfs_create_u32()		*/
+#include <linux/kstrtox.h>
 #include <linux/mm_types.h>             /* mm_struct, vma, etc...       */
 #include <linux/pkeys.h>                /* PKEY_*                       */
+#include <linux/sprintf.h>
 #include <uapi/asm-generic/mman-common.h>
 
 #include <asm/cpufeature.h>             /* boot_cpu_has, ...            */
diff --git a/arch/x86/mm/tlb.c b/arch/x86/mm/tlb.c
index 55f40cb97048..9a39f7c5538f 100644
--- a/arch/x86/mm/tlb.c
+++ b/arch/x86/mm/tlb.c
@@ -1,5 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/mm.h>
 #include <linux/spinlock.h>
diff --git a/arch/x86/pci/bus_numa.c b/arch/x86/pci/bus_numa.c
index e4a525e59eaf..bd8621ecf2a1 100644
--- a/arch/x86/pci/bus_numa.c
+++ b/arch/x86/pci/bus_numa.c
@@ -2,6 +2,7 @@
 #include <linux/init.h>
 #include <linux/pci.h>
 #include <linux/range.h>
+#include <linux/sprintf.h>
 
 #include "bus_numa.h"
 
diff --git a/arch/x86/pci/common.c b/arch/x86/pci/common.c
index ddb798603201..567fa523dd0a 100644
--- a/arch/x86/pci/common.c
+++ b/arch/x86/pci/common.c
@@ -11,6 +11,7 @@
 #include <linux/ioport.h>
 #include <linux/init.h>
 #include <linux/dmi.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 
 #include <asm/acpi.h>
diff --git a/arch/x86/platform/efi/efi.c b/arch/x86/platform/efi/efi.c
index f090ec972d7b..ad37fe19237b 100644
--- a/arch/x86/platform/efi/efi.c
+++ b/arch/x86/platform/efi/efi.c
@@ -39,6 +39,7 @@
 #include <linux/memblock.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/time.h>
 #include <linux/io.h>
diff --git a/arch/x86/platform/efi/fake_mem.c b/arch/x86/platform/efi/fake_mem.c
index 41d57cad3d84..087eed2ef44a 100644
--- a/arch/x86/platform/efi/fake_mem.c
+++ b/arch/x86/platform/efi/fake_mem.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/efi.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/memblock.h>
 #include <linux/types.h>
 #include <linux/sort.h>
diff --git a/arch/x86/platform/efi/quirks.c b/arch/x86/platform/efi/quirks.c
index f0cc00032751..7652b8c078b7 100644
--- a/arch/x86/platform/efi/quirks.c
+++ b/arch/x86/platform/efi/quirks.c
@@ -6,6 +6,7 @@
 #include <linux/string.h>
 #include <linux/time.h>
 #include <linux/types.h>
+#include <linux/completion.h>
 #include <linux/efi.h>
 #include <linux/slab.h>
 #include <linux/memblock.h>
diff --git a/arch/x86/platform/efi/runtime-map.c b/arch/x86/platform/efi/runtime-map.c
index a6f02cef3ca2..a6c7a3480d1a 100644
--- a/arch/x86/platform/efi/runtime-map.c
+++ b/arch/x86/platform/efi/runtime-map.c
@@ -5,6 +5,7 @@
 
 #include <linux/string.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/types.h>
 #include <linux/efi.h>
diff --git a/arch/x86/platform/olpc/olpc-xo1-sci.c b/arch/x86/platform/olpc/olpc-xo1-sci.c
index 89f25af4b3c3..aa2995eac58c 100644
--- a/arch/x86/platform/olpc/olpc-xo1-sci.c
+++ b/arch/x86/platform/olpc/olpc-xo1-sci.c
@@ -16,6 +16,7 @@
 #include <linux/pm.h>
 #include <linux/pm_wakeup.h>
 #include <linux/power_supply.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/workqueue.h>
 #include <linux/olpc-ec.h>
diff --git a/arch/x86/platform/olpc/olpc-xo15-sci.c b/arch/x86/platform/olpc/olpc-xo15-sci.c
index 68244a3422d1..8be38726abbf 100644
--- a/arch/x86/platform/olpc/olpc-xo15-sci.c
+++ b/arch/x86/platform/olpc/olpc-xo15-sci.c
@@ -7,6 +7,7 @@
 
 #include <linux/device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/power_supply.h>
 #include <linux/olpc-ec.h>
diff --git a/arch/x86/platform/ts5500/ts5500.c b/arch/x86/platform/ts5500/ts5500.c
index 0b67da056fd9..0f65ccfe330e 100644
--- a/arch/x86/platform/ts5500/ts5500.c
+++ b/arch/x86/platform/ts5500/ts5500.c
@@ -22,6 +22,7 @@
 #include <linux/platform_data/max197.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Product code register */
 #define TS5500_PRODUCT_CODE_ADDR	0x74
diff --git a/arch/x86/platform/uv/uv_nmi.c b/arch/x86/platform/uv/uv_nmi.c
index 5c50e550ab63..d174f9383c5b 100644
--- a/arch/x86/platform/uv/uv_nmi.c
+++ b/arch/x86/platform/uv/uv_nmi.c
@@ -17,6 +17,7 @@
 #include <linux/sched.h>
 #include <linux/sched/debug.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/clocksource.h>
 
diff --git a/arch/x86/xen/enlighten_pv.c b/arch/x86/xen/enlighten_pv.c
index aeb33e0a3f76..df989bc4ae82 100644
--- a/arch/x86/xen/enlighten_pv.c
+++ b/arch/x86/xen/enlighten_pv.c
@@ -15,6 +15,7 @@
 #include <linux/cpu.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/smp.h>
 #include <linux/preempt.h>
 #include <linux/hardirq.h>
diff --git a/arch/x86/xen/setup.c b/arch/x86/xen/setup.c
index b3e37961065a..938055c07837 100644
--- a/arch/x86/xen/setup.c
+++ b/arch/x86/xen/setup.c
@@ -7,6 +7,7 @@
 
 #include <linux/init.h>
 #include <linux/iscsi_ibft.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/kstrtox.h>
 #include <linux/mm.h>
diff --git a/arch/x86/xen/smp.c b/arch/x86/xen/smp.c
index 4b0d6fff88de..37f4d545e035 100644
--- a/arch/x86/xen/smp.c
+++ b/arch/x86/xen/smp.c
@@ -4,6 +4,7 @@
 #include <linux/slab.h>
 #include <linux/cpumask.h>
 #include <linux/percpu.h>
+#include <linux/sprintf.h>
 
 #include <xen/events.h>
 
diff --git a/arch/x86/xen/smp_pv.c b/arch/x86/xen/smp_pv.c
index a0f07bbfcd6e..9fa4fe19d70a 100644
--- a/arch/x86/xen/smp_pv.c
+++ b/arch/x86/xen/smp_pv.c
@@ -19,6 +19,7 @@
 #include <linux/slab.h>
 #include <linux/smp.h>
 #include <linux/irq_work.h>
+#include <linux/sprintf.h>
 #include <linux/tick.h>
 #include <linux/nmi.h>
 #include <linux/cpuhotplug.h>
diff --git a/arch/x86/xen/spinlock.c b/arch/x86/xen/spinlock.c
index 5c6fc16e4b92..4b14eff21408 100644
--- a/arch/x86/xen/spinlock.c
+++ b/arch/x86/xen/spinlock.c
@@ -7,6 +7,7 @@
 #include <linux/spinlock.h>
 #include <linux/slab.h>
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 
 #include <asm/paravirt.h>
 #include <asm/qspinlock.h>
diff --git a/arch/xtensa/kernel/stacktrace.c b/arch/xtensa/kernel/stacktrace.c
index 831ffb648bda..0e9fc7243dbb 100644
--- a/arch/xtensa/kernel/stacktrace.c
+++ b/arch/xtensa/kernel/stacktrace.c
@@ -9,6 +9,7 @@
  * Copyright (C) 2015 Cadence Design Systems Inc.
  */
 #include <linux/export.h>
+#include <linux/kernel.h> // for kernel_text_address()
 #include <linux/sched.h>
 #include <linux/stacktrace.h>
 
diff --git a/arch/xtensa/platforms/iss/network.c b/arch/xtensa/platforms/iss/network.c
index e89f27f2bb18..2a913fd1b931 100644
--- a/arch/xtensa/platforms/iss/network.c
+++ b/arch/xtensa/platforms/iss/network.c
@@ -15,6 +15,7 @@
 
 #include <linux/list.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
 #include <linux/timer.h>
diff --git a/arch/xtensa/platforms/iss/simdisk.c b/arch/xtensa/platforms/iss/simdisk.c
index 178cf96ca10a..1d86784ec394 100644
--- a/arch/xtensa/platforms/iss/simdisk.c
+++ b/arch/xtensa/platforms/iss/simdisk.c
@@ -13,6 +13,7 @@
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/blkdev.h>
 #include <linux/bio.h>
diff --git a/block/badblocks.c b/block/badblocks.c
index db4ec8b9b2a8..37edef26a44e 100644
--- a/block/badblocks.c
+++ b/block/badblocks.c
@@ -12,6 +12,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/types.h>
 #include <linux/slab.h>
diff --git a/block/bdev.c b/block/bdev.c
index fd5f230006ed..5454c6ef4e7b 100644
--- a/block/bdev.c
+++ b/block/bdev.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
 #include <linux/kmod.h>
diff --git a/block/bfq-cgroup.c b/block/bfq-cgroup.c
index d442ee358fc2..b2edfc1a38bf 100644
--- a/block/bfq-cgroup.c
+++ b/block/bfq-cgroup.c
@@ -6,11 +6,13 @@
 #include <linux/slab.h>
 #include <linux/blkdev.h>
 #include <linux/cgroup.h>
+#include <linux/kstrtox.h>
 #include <linux/ktime.h>
 #include <linux/rbtree.h>
 #include <linux/ioprio.h>
 #include <linux/sbitmap.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "elevator.h"
 #include "bfq-iosched.h"
diff --git a/block/bfq-iosched.c b/block/bfq-iosched.c
index 4b88a54a9b76..3a978409659e 100644
--- a/block/bfq-iosched.c
+++ b/block/bfq-iosched.c
@@ -117,12 +117,14 @@
 #include <linux/slab.h>
 #include <linux/blkdev.h>
 #include <linux/cgroup.h>
+#include <linux/kstrtox.h>
 #include <linux/ktime.h>
 #include <linux/rbtree.h>
 #include <linux/ioprio.h>
 #include <linux/sbitmap.h>
 #include <linux/delay.h>
 #include <linux/backing-dev.h>
+#include <linux/sprintf.h>
 
 #include <trace/events/block.h>
 
diff --git a/block/bfq-iosched.h b/block/bfq-iosched.h
index 467e8cfc41a2..dec868bf4d38 100644
--- a/block/bfq-iosched.h
+++ b/block/bfq-iosched.h
@@ -8,6 +8,7 @@
 
 #include <linux/blktrace_api.h>
 #include <linux/hrtimer.h>
+#include <linux/sprintf.h>
 
 #include "blk-cgroup-rwstat.h"
 
diff --git a/block/bio.c b/block/bio.c
index 00847ff1415c..13d00e0cb7b3 100644
--- a/block/bio.c
+++ b/block/bio.c
@@ -3,9 +3,11 @@
  * Copyright (C) 2001 Jens Axboe <axboe@kernel.dk>
  */
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/swap.h>
 #include <linux/bio.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/uio.h>
 #include <linux/iocontext.h>
 #include <linux/slab.h>
diff --git a/block/blk-cgroup.c b/block/blk-cgroup.c
index bdbb557feb5a..119ab8f40a33 100644
--- a/block/blk-cgroup.c
+++ b/block/blk-cgroup.c
@@ -29,10 +29,12 @@
 #include <linux/resume_user_mode.h>
 #include <linux/psi.h>
 #include <linux/part_stat.h>
+#include <linux/hrtimer.h>
 #include "blk.h"
 #include "blk-cgroup.h"
 #include "blk-ioprio.h"
 #include "blk-throttle.h"
+#include <linux/sprintf.h>
 
 static void __blkcg_rstat_flush(struct blkcg *blkcg, int cpu);
 
diff --git a/block/blk-crypto-sysfs.c b/block/blk-crypto-sysfs.c
index a304434489ba..233d04b9116b 100644
--- a/block/blk-crypto-sysfs.c
+++ b/block/blk-crypto-sysfs.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/blk-crypto-profile.h>
+#include <linux/sysfs.h>
 
 #include "blk-crypto-internal.h"
 
diff --git a/block/blk-ia-ranges.c b/block/blk-ia-ranges.c
index c9eb4241e048..0ab9601b7afe 100644
--- a/block/blk-ia-ranges.c
+++ b/block/blk-ia-ranges.c
@@ -7,6 +7,8 @@
 #include <linux/kernel.h>
 #include <linux/blkdev.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <linux/init.h>
 
 #include "blk.h"
diff --git a/block/blk-integrity.c b/block/blk-integrity.c
index d4e9b4556d14..826fe37cf64c 100644
--- a/block/blk-integrity.c
+++ b/block/blk-integrity.c
@@ -8,6 +8,7 @@
 
 #include <linux/blk-integrity.h>
 #include <linux/backing-dev.h>
+#include <linux/kstrtox.h>
 #include <linux/mempool.h>
 #include <linux/bio.h>
 #include <linux/scatterlist.h>
diff --git a/block/blk-ioc.c b/block/blk-ioc.c
index 25dd4db11121..73a6de71e3a6 100644
--- a/block/blk-ioc.c
+++ b/block/blk-ioc.c
@@ -7,6 +7,7 @@
 #include <linux/init.h>
 #include <linux/bio.h>
 #include <linux/blkdev.h>
+#include <linux/radix-tree.h>
 #include <linux/slab.h>
 #include <linux/security.h>
 #include <linux/sched/task.h>
diff --git a/block/blk-iocost.c b/block/blk-iocost.c
index 9a85bfbbc45a..2e3d9ad8f1ce 100644
--- a/block/blk-iocost.c
+++ b/block/blk-iocost.c
@@ -174,10 +174,12 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/time64.h>
 #include <linux/parser.h>
 #include <linux/sched/signal.h>
+#include <linux/hrtimer.h>
 #include <asm/local.h>
 #include <asm/local64.h>
 #include "blk-rq-qos.h"
diff --git a/block/blk-iolatency.c b/block/blk-iolatency.c
index ebb522788d97..f7ee0a70b608 100644
--- a/block/blk-iolatency.c
+++ b/block/blk-iolatency.c
@@ -68,6 +68,7 @@
 #include <linux/blk_types.h>
 #include <linux/backing-dev.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/memcontrol.h>
 #include <linux/sched/loadavg.h>
diff --git a/block/blk-mq-debugfs.c b/block/blk-mq-debugfs.c
index 94668e72ab09..093fe6b5164a 100644
--- a/block/blk-mq-debugfs.c
+++ b/block/blk-mq-debugfs.c
@@ -6,6 +6,7 @@
 #include <linux/kernel.h>
 #include <linux/blkdev.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "blk.h"
 #include "blk-mq.h"
diff --git a/block/blk-mq-sysfs.c b/block/blk-mq-sysfs.c
index 156e9bb07abf..62e648b1ceb0 100644
--- a/block/blk-mq-sysfs.c
+++ b/block/blk-mq-sysfs.c
@@ -7,6 +7,7 @@
 #include <linux/mm.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/smp.h>
 
diff --git a/block/blk-mq.c b/block/blk-mq.c
index 6d2f7b5caa01..fab5c970cd83 100644
--- a/block/blk-mq.c
+++ b/block/blk-mq.c
@@ -11,6 +11,7 @@
 #include <linux/bio.h>
 #include <linux/blkdev.h>
 #include <linux/blk-integrity.h>
+#include <linux/completion.h>
 #include <linux/kmemleak.h>
 #include <linux/mm.h>
 #include <linux/init.h>
@@ -21,6 +22,7 @@
 #include <linux/llist.h>
 #include <linux/cpu.h>
 #include <linux/cache.h>
+#include <linux/completion.h>
 #include <linux/sched/sysctl.h>
 #include <linux/sched/topology.h>
 #include <linux/sched/signal.h>
diff --git a/block/blk-sysfs.c b/block/blk-sysfs.c
index 6b2429cad81a..74c22563008b 100644
--- a/block/blk-sysfs.c
+++ b/block/blk-sysfs.c
@@ -3,6 +3,7 @@
  * Functions related to sysfs handling
  */
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/bio.h>
@@ -10,6 +11,7 @@
 #include <linux/backing-dev.h>
 #include <linux/blktrace_api.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "blk.h"
 #include "blk-mq.h"
diff --git a/block/blk-throttle.c b/block/blk-throttle.c
index f4850a6f860b..5977dfef6cf2 100644
--- a/block/blk-throttle.c
+++ b/block/blk-throttle.c
@@ -14,6 +14,8 @@
 #include "blk-cgroup-rwstat.h"
 #include "blk-stat.h"
 #include "blk-throttle.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /* Max dispatch from a group in 1 round */
 #define THROTL_GRP_QUANTUM 8
diff --git a/block/blk-timeout.c b/block/blk-timeout.c
index 1b8de0417fc1..987fc49579bb 100644
--- a/block/blk-timeout.c
+++ b/block/blk-timeout.c
@@ -3,9 +3,11 @@
  * Functions related to generic timeout handling of requests.
  */
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/fault-inject.h>
+#include <linux/sprintf.h>
 
 #include "blk.h"
 #include "blk-mq.h"
diff --git a/block/bsg.c b/block/bsg.c
index 72157a59b788..65bc7a55eee9 100644
--- a/block/bsg.c
+++ b/block/bsg.c
@@ -7,11 +7,13 @@
 #include <linux/file.h>
 #include <linux/blkdev.h>
 #include <linux/cdev.h>
+#include <linux/device.h>
 #include <linux/jiffies.h>
 #include <linux/percpu.h>
 #include <linux/idr.h>
 #include <linux/bsg.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_ioctl.h>
diff --git a/block/disk-events.c b/block/disk-events.c
index 2f697224386a..e26081d267db 100644
--- a/block/disk-events.c
+++ b/block/disk-events.c
@@ -6,6 +6,7 @@
 #include <linux/moduleparam.h>
 #include <linux/blkdev.h>
 #include "blk.h"
+#include <linux/sprintf.h>
 
 struct disk_events {
 	struct list_head	node;		/* all disk_event's */
diff --git a/block/early-lookup.c b/block/early-lookup.c
index 3effbd0d35e9..0862a56c25ac 100644
--- a/block/early-lookup.c
+++ b/block/early-lookup.c
@@ -5,6 +5,8 @@
  */
 #include <linux/blkdev.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 struct uuidcmp {
 	const char *uuid;
diff --git a/block/elevator.c b/block/elevator.c
index 5ff093cb3cf8..9e44402f8c27 100644
--- a/block/elevator.c
+++ b/block/elevator.c
@@ -33,6 +33,7 @@
 #include <linux/compiler.h>
 #include <linux/blktrace_api.h>
 #include <linux/hash.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/pm_runtime.h>
 
diff --git a/block/elevator.h b/block/elevator.h
index 7ca3d7b6ed82..6c107132d536 100644
--- a/block/elevator.h
+++ b/block/elevator.h
@@ -4,6 +4,7 @@
 
 #include <linux/percpu.h>
 #include <linux/hashtable.h>
+#include <linux/module.h>
 #include "blk-mq.h"
 
 struct io_cq;
diff --git a/block/genhd.c b/block/genhd.c
index a911d2969c07..3e0d4c4ed18d 100644
--- a/block/genhd.c
+++ b/block/genhd.c
@@ -7,6 +7,7 @@
 
 #include <linux/module.h>
 #include <linux/ctype.h>
+#include <linux/file.h> // for fput()
 #include <linux/fs.h>
 #include <linux/kdev_t.h>
 #include <linux/kernel.h>
@@ -26,6 +27,7 @@
 #include <linux/badblocks.h>
 #include <linux/part_stat.h>
 #include <linux/blktrace_api.h>
+#include <linux/sprintf.h>
 
 #include "blk-throttle.h"
 #include "blk.h"
diff --git a/block/holder.c b/block/holder.c
index 37d18c13d958..a9affd4757cd 100644
--- a/block/holder.c
+++ b/block/holder.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/blkdev.h>
 #include <linux/slab.h>
+#include <linux/sysfs.h>
 
 struct bd_holder_disk {
 	struct list_head	list;
diff --git a/block/ioctl.c b/block/ioctl.c
index 4c8aebee595f..b1893453317a 100644
--- a/block/ioctl.c
+++ b/block/ioctl.c
@@ -7,6 +7,7 @@
 #include <linux/blkpg.h>
 #include <linux/hdreg.h>
 #include <linux/backing-dev.h>
+#include <linux/file.h> // for fput()
 #include <linux/fs.h>
 #include <linux/blktrace_api.h>
 #include <linux/pr.h>
diff --git a/block/kyber-iosched.c b/block/kyber-iosched.c
index 4155594aefc6..05f1b437e5a7 100644
--- a/block/kyber-iosched.c
+++ b/block/kyber-iosched.c
@@ -8,8 +8,11 @@
 
 #include <linux/kernel.h>
 #include <linux/blkdev.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/sbitmap.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 #include <trace/events/block.h>
 
diff --git a/block/mq-deadline.c b/block/mq-deadline.c
index f958e79277b8..7643472912ab 100644
--- a/block/mq-deadline.c
+++ b/block/mq-deadline.c
@@ -9,12 +9,14 @@
 #include <linux/fs.h>
 #include <linux/blkdev.h>
 #include <linux/bio.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/compiler.h>
 #include <linux/rbtree.h>
 #include <linux/sbitmap.h>
+#include <linux/sysfs.h>
 
 #include <trace/events/block.h>
 
diff --git a/block/partitions/aix.c b/block/partitions/aix.c
index 85f4b967565e..55789cd0db6f 100644
--- a/block/partitions/aix.c
+++ b/block/partitions/aix.c
@@ -6,6 +6,7 @@
  */
 
 #include "check.h"
+#include <linux/sprintf.h>
 
 struct lvm_rec {
 	char lvm_id[4]; /* "_LVM" */
diff --git a/block/partitions/amiga.c b/block/partitions/amiga.c
index 506921095412..d93ea81c92ab 100644
--- a/block/partitions/amiga.c
+++ b/block/partitions/amiga.c
@@ -13,6 +13,7 @@
 #include <linux/types.h>
 #include <linux/mm_types.h>
 #include <linux/overflow.h>
+#include <linux/sprintf.h>
 #include <linux/affs_hardblocks.h>
 
 #include "check.h"
diff --git a/block/partitions/check.h b/block/partitions/check.h
index 8d70a880c372..a2b76220ee7d 100644
--- a/block/partitions/check.h
+++ b/block/partitions/check.h
@@ -1,5 +1,6 @@
 /* SPDX-License-Identifier: GPL-2.0 */
 #include <linux/pagemap.h>
+#include <linux/sprintf.h>
 #include <linux/blkdev.h>
 #include "../blk.h"
 
diff --git a/block/partitions/cmdline.c b/block/partitions/cmdline.c
index c03bc105e575..4ef34e88d345 100644
--- a/block/partitions/cmdline.c
+++ b/block/partitions/cmdline.c
@@ -16,8 +16,10 @@
  */
 #include <linux/blkdev.h>
 #include <linux/fs.h>
+#include <linux/kernel.h> // for memparse()
 #include <linux/slab.h>
 #include "check.h"
+#include <linux/sprintf.h>
 
 
 /* partition flags */
diff --git a/block/partitions/core.c b/block/partitions/core.c
index 5f5ed5c75f04..8917707963f3 100644
--- a/block/partitions/core.c
+++ b/block/partitions/core.c
@@ -8,6 +8,7 @@
 #include <linux/major.h>
 #include <linux/slab.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/raid/detect.h>
 #include "check.h"
diff --git a/block/partitions/ibm.c b/block/partitions/ibm.c
index 82d9c4c3fb41..4f4e47add536 100644
--- a/block/partitions/ibm.c
+++ b/block/partitions/ibm.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <asm/dasd.h>
 #include <asm/ebcdic.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/vtoc.h>
 #include <linux/module.h>
diff --git a/block/partitions/msdos.c b/block/partitions/msdos.c
index b5d5c229cc3b..8099324a3387 100644
--- a/block/partitions/msdos.c
+++ b/block/partitions/msdos.c
@@ -27,6 +27,7 @@
  */
 #include <linux/msdos_fs.h>
 #include <linux/msdos_partition.h>
+#include <linux/sprintf.h>
 
 #include "check.h"
 #include "efi.h"
diff --git a/block/partitions/sysv68.c b/block/partitions/sysv68.c
index 6f6257fd4eb4..873c9e256447 100644
--- a/block/partitions/sysv68.c
+++ b/block/partitions/sysv68.c
@@ -6,6 +6,7 @@
  */
 
 #include "check.h"
+#include <linux/sprintf.h>
 
 /*
  *	Volume ID structure: on first 256-bytes sector of disk
diff --git a/block/t10-pi.c b/block/t10-pi.c
index 914d8cddd43a..fac68bf6e7ef 100644
--- a/block/t10-pi.c
+++ b/block/t10-pi.c
@@ -8,6 +8,7 @@
 #include <linux/blk-integrity.h>
 #include <linux/crc-t10dif.h>
 #include <linux/crc64.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <net/checksum.h>
 #include <asm/unaligned.h>
diff --git a/crypto/adiantum.c b/crypto/adiantum.c
index 60f3883b736a..10aa1e3e525a 100644
--- a/crypto/adiantum.c
+++ b/crypto/adiantum.c
@@ -39,6 +39,7 @@
 #include <crypto/nhpoly1305.h>
 #include <crypto/scatterwalk.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 /*
  * Size of right-hand part of input data, in bytes; also the size of the block
diff --git a/crypto/algapi.c b/crypto/algapi.c
index 85bc279b4233..a6a5c09d8620 100644
--- a/crypto/algapi.c
+++ b/crypto/algapi.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/workqueue.h>
 
diff --git a/crypto/asymmetric_keys/asymmetric_type.c b/crypto/asymmetric_keys/asymmetric_type.c
index a5da8ccd353e..e10f61b3d4f4 100644
--- a/crypto/asymmetric_keys/asymmetric_type.c
+++ b/crypto/asymmetric_keys/asymmetric_type.c
@@ -9,7 +9,10 @@
 #include <keys/asymmetric-subtype.h>
 #include <keys/asymmetric-parser.h>
 #include <crypto/public_key.h>
+#include <linux/hex.h>
 #include <linux/seq_file.h>
+#include <linux/hex.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/ctype.h>
diff --git a/crypto/asymmetric_keys/public_key.c b/crypto/asymmetric_keys/public_key.c
index e5f22691febd..9a87dd7b534e 100644
--- a/crypto/asymmetric_keys/public_key.c
+++ b/crypto/asymmetric_keys/public_key.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 MODULE_DESCRIPTION("In-software asymmetric public-key subtype");
diff --git a/crypto/asymmetric_keys/selftest.c b/crypto/asymmetric_keys/selftest.c
index c50da7ef90ae..37b3a72a11d7 100644
--- a/crypto/asymmetric_keys/selftest.c
+++ b/crypto/asymmetric_keys/selftest.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/key.h>
 #include <linux/module.h>
+#include <linux/uidgid.h>
 #include "x509_parser.h"
 
 struct certs_test {
diff --git a/crypto/asymmetric_keys/x509_public_key.c b/crypto/asymmetric_keys/x509_public_key.c
index 6a4f00be22fc..53dc795156de 100644
--- a/crypto/asymmetric_keys/x509_public_key.c
+++ b/crypto/asymmetric_keys/x509_public_key.c
@@ -11,6 +11,7 @@
 #include <keys/asymmetric-parser.h>
 #include <keys/asymmetric-subtype.h>
 #include <keys/system_keyring.h>
+#include <linux/hex.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
diff --git a/crypto/async_tx/raid6test.c b/crypto/async_tx/raid6test.c
index d3fbee1e03e5..0b01feb578da 100644
--- a/crypto/async_tx/raid6test.c
+++ b/crypto/async_tx/raid6test.c
@@ -7,6 +7,7 @@
  * 	Copyright 2002-2007 H. Peter Anvin
  */
 #include <linux/async_tx.h>
+#include <linux/completion.h>
 #include <linux/gfp.h>
 #include <linux/mm.h>
 #include <linux/random.h>
diff --git a/crypto/authenc.c b/crypto/authenc.c
index 3aaf3ab4e360..46b6216d795a 100644
--- a/crypto/authenc.c
+++ b/crypto/authenc.c
@@ -18,6 +18,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 struct authenc_instance_ctx {
 	struct crypto_ahash_spawn auth;
diff --git a/crypto/authencesn.c b/crypto/authencesn.c
index 2cc933e2f790..9d76eb157b78 100644
--- a/crypto/authencesn.c
+++ b/crypto/authencesn.c
@@ -21,6 +21,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 struct authenc_esn_instance_ctx {
 	struct crypto_ahash_spawn auth;
diff --git a/crypto/ccm.c b/crypto/ccm.c
index 36f0acec32e1..c2b59a820ec7 100644
--- a/crypto/ccm.c
+++ b/crypto/ccm.c
@@ -15,6 +15,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct ccm_instance_ctx {
 	struct crypto_skcipher_spawn ctr;
diff --git a/crypto/chacha20poly1305.c b/crypto/chacha20poly1305.c
index 9e4651330852..abe3894824c7 100644
--- a/crypto/chacha20poly1305.c
+++ b/crypto/chacha20poly1305.c
@@ -15,6 +15,7 @@
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 struct chachapoly_instance_ctx {
 	struct crypto_skcipher_spawn chacha;
diff --git a/crypto/cryptd.c b/crypto/cryptd.c
index 31d022d47f7a..8d630561282e 100644
--- a/crypto/cryptd.c
+++ b/crypto/cryptd.c
@@ -25,6 +25,7 @@
 #include <linux/scatterlist.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 static unsigned int cryptd_max_cpu_qlen = 1000;
diff --git a/crypto/crypto_engine.c b/crypto/crypto_engine.c
index e60a0eb628e8..acd6dfc6010d 100644
--- a/crypto/crypto_engine.c
+++ b/crypto/crypto_engine.c
@@ -18,6 +18,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/sched/types.h>
 #include "internal.h"
 
diff --git a/crypto/ctr.c b/crypto/ctr.c
index 1420496062d5..7d82d7a7efe0 100644
--- a/crypto/ctr.c
+++ b/crypto/ctr.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct crypto_rfc3686_ctx {
 	struct crypto_skcipher *child;
diff --git a/crypto/drbg.c b/crypto/drbg.c
index 3addce90930c..e36c0e1ed288 100644
--- a/crypto/drbg.c
+++ b/crypto/drbg.c
@@ -101,6 +101,7 @@
 #include <crypto/internal/cipher.h>
 #include <linux/kernel.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 /***************************************************************
  * Backend cipher definitions available to DRBG
diff --git a/crypto/essiv.c b/crypto/essiv.c
index e63fc6442e32..a18d9475b2a5 100644
--- a/crypto/essiv.c
+++ b/crypto/essiv.c
@@ -35,6 +35,7 @@
 #include <crypto/internal/skcipher.h>
 #include <crypto/scatterwalk.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/crypto/fips.c b/crypto/fips.c
index 92fd506abb21..b49a1bd153f9 100644
--- a/crypto/fips.c
+++ b/crypto/fips.c
@@ -8,6 +8,7 @@
 #include <linux/export.h>
 #include <linux/fips.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/sysctl.h>
diff --git a/crypto/gcm.c b/crypto/gcm.c
index 84f7c23d14e4..de733b063487 100644
--- a/crypto/gcm.c
+++ b/crypto/gcm.c
@@ -18,6 +18,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct gcm_instance_ctx {
 	struct crypto_skcipher_spawn ctr;
diff --git a/crypto/geniv.c b/crypto/geniv.c
index bee4621b4f12..88fa3bd54a0e 100644
--- a/crypto/geniv.c
+++ b/crypto/geniv.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 static int aead_geniv_setkey(struct crypto_aead *tfm,
 			     const u8 *key, unsigned int keylen)
diff --git a/crypto/hctr2.c b/crypto/hctr2.c
index 87e7547ad186..46a2c9cc3cc3 100644
--- a/crypto/hctr2.c
+++ b/crypto/hctr2.c
@@ -22,6 +22,7 @@
 #include <crypto/polyval.h>
 #include <crypto/scatterwalk.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define BLOCKCIPHER_BLOCK_SIZE		16
 
diff --git a/crypto/lrw.c b/crypto/lrw.c
index e216fbf2b786..5ffc030140bc 100644
--- a/crypto/lrw.c
+++ b/crypto/lrw.c
@@ -21,6 +21,7 @@
 #include <linux/module.h>
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <crypto/b128ops.h>
 #include <crypto/gf128mul.h>
diff --git a/crypto/lskcipher.c b/crypto/lskcipher.c
index 0b6dd8aa21f2..9430ddfc574a 100644
--- a/crypto/lskcipher.c
+++ b/crypto/lskcipher.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <net/netlink.h>
 #include "skcipher.h"
diff --git a/crypto/pcrypt.c b/crypto/pcrypt.c
index d0d954fe9d54..f26d7fa57474 100644
--- a/crypto/pcrypt.c
+++ b/crypto/pcrypt.c
@@ -16,6 +16,7 @@
 #include <linux/kobject.h>
 #include <linux/cpu.h>
 #include <crypto/pcrypt.h>
+#include <linux/sprintf.h>
 
 static struct padata_instance *pencrypt;
 static struct padata_instance *pdecrypt;
diff --git a/crypto/rsa-pkcs1pad.c b/crypto/rsa-pkcs1pad.c
index cd501195f34a..f6e2b52cca6f 100644
--- a/crypto/rsa-pkcs1pad.c
+++ b/crypto/rsa-pkcs1pad.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/random.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 
 /*
  * Hash algorithm OIDs plus ASN.1 DER wrappings [RFC4880 sec 5.2.2].
diff --git a/crypto/simd.c b/crypto/simd.c
index edaa479a1ec5..8cfe205d8364 100644
--- a/crypto/simd.c
+++ b/crypto/simd.c
@@ -35,6 +35,7 @@
 #include <linux/module.h>
 #include <linux/preempt.h>
 #include <asm/simd.h>
+#include <linux/sprintf.h>
 
 /* skcipher support */
 
diff --git a/crypto/testmgr.c b/crypto/testmgr.c
index 3dddd288ca02..3d68f1dbb9df 100644
--- a/crypto/testmgr.c
+++ b/crypto/testmgr.c
@@ -26,6 +26,7 @@
 #include <linux/random.h>
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/uio.h>
 #include <crypto/rng.h>
diff --git a/crypto/xts.c b/crypto/xts.c
index 672e1a3f0b0c..f8d3ead1ddff 100644
--- a/crypto/xts.c
+++ b/crypto/xts.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <crypto/xts.h>
 #include <crypto/b128ops.h>
diff --git a/drivers/accel/drm_accel.c b/drivers/accel/drm_accel.c
index 24cac4c0274b..6c1417548de7 100644
--- a/drivers/accel/drm_accel.c
+++ b/drivers/accel/drm_accel.c
@@ -9,6 +9,7 @@
 #include <linux/debugfs.h>
 #include <linux/device.h>
 #include <linux/idr.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_accel.h>
 #include <drm/drm_auth.h>
diff --git a/drivers/accel/habanalabs/common/command_submission.c b/drivers/accel/habanalabs/common/command_submission.c
index 39e23d625a3c..dde1dd3c1845 100644
--- a/drivers/accel/habanalabs/common/command_submission.c
+++ b/drivers/accel/habanalabs/common/command_submission.c
@@ -7,6 +7,8 @@
 
 #include <uapi/drm/habanalabs_accel.h>
 #include "habanalabs.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <linux/uaccess.h>
 #include <linux/slab.h>
diff --git a/drivers/accel/habanalabs/common/debugfs.c b/drivers/accel/habanalabs/common/debugfs.c
index 01f071d52570..22224f8f3a19 100644
--- a/drivers/accel/habanalabs/common/debugfs.c
+++ b/drivers/accel/habanalabs/common/debugfs.c
@@ -7,6 +7,8 @@
 
 #include "habanalabs.h"
 #include "../include/hw_ip/mmu/mmu_general.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/pci.h>
 #include <linux/uaccess.h>
diff --git a/drivers/accel/habanalabs/common/device.c b/drivers/accel/habanalabs/common/device.c
index 3b9e8a21d7df..5ed7a7dc63a8 100644
--- a/drivers/accel/habanalabs/common/device.c
+++ b/drivers/accel/habanalabs/common/device.c
@@ -9,6 +9,8 @@
 
 #include <uapi/drm/habanalabs_accel.h>
 #include "habanalabs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include <linux/pci.h>
 #include <linux/hwmon.h>
diff --git a/drivers/accel/habanalabs/common/firmware_if.c b/drivers/accel/habanalabs/common/firmware_if.c
index 3558a6a8e192..2df1f4b4ff2a 100644
--- a/drivers/accel/habanalabs/common/firmware_if.c
+++ b/drivers/accel/habanalabs/common/firmware_if.c
@@ -7,6 +7,8 @@
 
 #include "habanalabs.h"
 #include <linux/habanalabs/hl_boot_if.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 
 #include <linux/firmware.h>
 #include <linux/crc32.h>
diff --git a/drivers/accel/habanalabs/common/habanalabs.h b/drivers/accel/habanalabs/common/habanalabs.h
index 7397ce86b7f0..ed8c7683fb5c 100644
--- a/drivers/accel/habanalabs/common/habanalabs.h
+++ b/drivers/accel/habanalabs/common/habanalabs.h
@@ -11,6 +11,7 @@
 #include <linux/habanalabs/cpucp_if.h>
 #include "../include/common/qman_if.h"
 #include "../include/hw_ip/mmu/mmu_general.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <uapi/drm/habanalabs_accel.h>
 
 #include <linux/cdev.h>
diff --git a/drivers/accel/habanalabs/common/habanalabs_ioctl.c b/drivers/accel/habanalabs/common/habanalabs_ioctl.c
index 1dd6e23172ca..6d0a87acf0fe 100644
--- a/drivers/accel/habanalabs/common/habanalabs_ioctl.c
+++ b/drivers/accel/habanalabs/common/habanalabs_ioctl.c
@@ -9,6 +9,7 @@
 
 #include <uapi/drm/habanalabs_accel.h>
 #include "habanalabs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/fs.h>
 #include <linux/kernel.h>
diff --git a/drivers/accel/habanalabs/common/hw_queue.c b/drivers/accel/habanalabs/common/hw_queue.c
index 3d04a7507cce..aa9c87e83a71 100644
--- a/drivers/accel/habanalabs/common/hw_queue.c
+++ b/drivers/accel/habanalabs/common/hw_queue.c
@@ -7,6 +7,7 @@
 
 #include "habanalabs.h"
 
+#include <linux/completion.h>
 #include <linux/slab.h>
 
 /*
diff --git a/drivers/accel/habanalabs/common/irq.c b/drivers/accel/habanalabs/common/irq.c
index 978b7f4d5eeb..4d599a36dcd2 100644
--- a/drivers/accel/habanalabs/common/irq.c
+++ b/drivers/accel/habanalabs/common/irq.c
@@ -6,6 +6,7 @@
  */
 
 #include "habanalabs.h"
+#include <linux/completion.h>
 
 #include <linux/slab.h>
 
diff --git a/drivers/accel/habanalabs/common/memory.c b/drivers/accel/habanalabs/common/memory.c
index 3348ad12c237..e4785e1d1a0b 100644
--- a/drivers/accel/habanalabs/common/memory.c
+++ b/drivers/accel/habanalabs/common/memory.c
@@ -8,6 +8,7 @@
 #include <uapi/drm/habanalabs_accel.h>
 #include "habanalabs.h"
 #include "../include/hw_ip/mmu/mmu_general.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/uaccess.h>
 #include <linux/slab.h>
diff --git a/drivers/accel/habanalabs/common/memory_mgr.c b/drivers/accel/habanalabs/common/memory_mgr.c
index c4d84df355b0..c197e598b009 100644
--- a/drivers/accel/habanalabs/common/memory_mgr.c
+++ b/drivers/accel/habanalabs/common/memory_mgr.c
@@ -6,6 +6,7 @@
  */
 
 #include "habanalabs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /**
  * hl_mmap_mem_buf_get - increase the buffer refcount and return a pointer to
diff --git a/drivers/accel/habanalabs/common/pci/pci.c b/drivers/accel/habanalabs/common/pci/pci.c
index 191e0e3cf3a5..2f4c6b1d717a 100644
--- a/drivers/accel/habanalabs/common/pci/pci.c
+++ b/drivers/accel/habanalabs/common/pci/pci.c
@@ -7,6 +7,7 @@
 
 #include "../habanalabs.h"
 #include "../../include/hw_ip/pci/pci_general.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/pci.h>
 
diff --git a/drivers/accel/habanalabs/common/security.c b/drivers/accel/habanalabs/common/security.c
index fe913965dbad..470a1917cb35 100644
--- a/drivers/accel/habanalabs/common/security.c
+++ b/drivers/accel/habanalabs/common/security.c
@@ -6,6 +6,7 @@
  */
 
 #include "habanalabs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static const char * const hl_glbl_error_cause[HL_MAX_NUM_OF_GLBL_ERR_CAUSE] = {
 	"Error due to un-priv read",
diff --git a/drivers/accel/habanalabs/common/state_dump.c b/drivers/accel/habanalabs/common/state_dump.c
index 3a9931f24259..56a546beeebf 100644
--- a/drivers/accel/habanalabs/common/state_dump.c
+++ b/drivers/accel/habanalabs/common/state_dump.c
@@ -8,6 +8,7 @@
 #include <linux/vmalloc.h>
 #include <uapi/drm/habanalabs_accel.h>
 #include "habanalabs.h"
+#include <linux/sprintf.h>
 
 /**
  * hl_format_as_binary - helper function, format an integer as binary
diff --git a/drivers/accel/habanalabs/common/sysfs.c b/drivers/accel/habanalabs/common/sysfs.c
index 8a9f98832157..7afc65356357 100644
--- a/drivers/accel/habanalabs/common/sysfs.c
+++ b/drivers/accel/habanalabs/common/sysfs.c
@@ -6,6 +6,8 @@
  */
 
 #include "habanalabs.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/pci.h>
 #include <linux/types.h>
diff --git a/drivers/accel/habanalabs/gaudi/gaudi.c b/drivers/accel/habanalabs/gaudi/gaudi.c
index dde3839fe0e0..512e756f789a 100644
--- a/drivers/accel/habanalabs/gaudi/gaudi.c
+++ b/drivers/accel/habanalabs/gaudi/gaudi.c
@@ -12,9 +12,12 @@
 #include "../include/gaudi/gaudi_fw_if.h"
 #include "../include/gaudi/gaudi_reg_map.h"
 #include "../include/gaudi/gaudi_async_ids_map_extended.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/hwmon.h>
 #include <linux/iommu.h>
diff --git a/drivers/accel/habanalabs/gaudi/gaudi_coresight.c b/drivers/accel/habanalabs/gaudi/gaudi_coresight.c
index 1168fefa33f4..fb43f34fb071 100644
--- a/drivers/accel/habanalabs/gaudi/gaudi_coresight.c
+++ b/drivers/accel/habanalabs/gaudi/gaudi_coresight.c
@@ -10,6 +10,7 @@
 #include "../include/gaudi/asic_reg/gaudi_regs.h"
 #include "../include/gaudi/gaudi_masks.h"
 #include "../include/gaudi/gaudi_reg_map.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <uapi/drm/habanalabs_accel.h>
 
diff --git a/drivers/accel/habanalabs/gaudi/gaudi_security.c b/drivers/accel/habanalabs/gaudi/gaudi_security.c
index 81a3c79a8bc6..2df948d81e38 100644
--- a/drivers/accel/habanalabs/gaudi/gaudi_security.c
+++ b/drivers/accel/habanalabs/gaudi/gaudi_security.c
@@ -7,6 +7,7 @@
 
 #include "gaudiP.h"
 #include "../include/gaudi/asic_reg/gaudi_regs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define GAUDI_NUMBER_OF_LBW_RR_REGS	28
 #define GAUDI_NUMBER_OF_HBW_RR_REGS	24
diff --git a/drivers/accel/habanalabs/gaudi2/gaudi2.c b/drivers/accel/habanalabs/gaudi2/gaudi2.c
index 1f061209ae21..d6652a06446b 100644
--- a/drivers/accel/habanalabs/gaudi2/gaudi2.c
+++ b/drivers/accel/habanalabs/gaudi2/gaudi2.c
@@ -14,6 +14,8 @@
 #include "../include/gaudi2/gaudi2_reg_map.h"
 #include "../include/gaudi2/gaudi2_async_ids_map_extended.h"
 #include "../include/gaudi2/arc/gaudi2_arc_common_packets.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/pci.h>
diff --git a/drivers/accel/habanalabs/gaudi2/gaudi2_coresight.c b/drivers/accel/habanalabs/gaudi2/gaudi2_coresight.c
index 2423620ff358..97bce939f889 100644
--- a/drivers/accel/habanalabs/gaudi2/gaudi2_coresight.c
+++ b/drivers/accel/habanalabs/gaudi2/gaudi2_coresight.c
@@ -5,6 +5,7 @@
  * All Rights Reserved.
  */
 #include "gaudi2_coresight_regs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <uapi/drm/habanalabs_accel.h>
 
 #define GAUDI2_PLDM_CORESIGHT_TIMEOUT_USEC	(CORESIGHT_TIMEOUT_USEC * 2000)
diff --git a/drivers/accel/habanalabs/gaudi2/gaudi2_security.c b/drivers/accel/habanalabs/gaudi2/gaudi2_security.c
index 34bf80c5a44b..5d411dae55f4 100644
--- a/drivers/accel/habanalabs/gaudi2/gaudi2_security.c
+++ b/drivers/accel/habanalabs/gaudi2/gaudi2_security.c
@@ -7,6 +7,7 @@
 
 #include "gaudi2P.h"
 #include "../include/gaudi2/asic_reg/gaudi2_regs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define UNSET_GLBL_SEC_BIT(array, b) ((array)[((b) / 32)] |= (1 << ((b) % 32)))
 
diff --git a/drivers/accel/habanalabs/goya/goya.c b/drivers/accel/habanalabs/goya/goya.c
index 1322cb330c57..a325c6bba5c4 100644
--- a/drivers/accel/habanalabs/goya/goya.c
+++ b/drivers/accel/habanalabs/goya/goya.c
@@ -10,6 +10,8 @@
 #include "../include/hw_ip/mmu/mmu_v1_0.h"
 #include "../include/goya/asic_reg/goya_masks.h"
 #include "../include/goya/goya_reg_map.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include <linux/pci.h>
 #include <linux/hwmon.h>
diff --git a/drivers/accel/habanalabs/goya/goya_coresight.c b/drivers/accel/habanalabs/goya/goya_coresight.c
index 3827ea4c02f7..5f922e3a431f 100644
--- a/drivers/accel/habanalabs/goya/goya_coresight.c
+++ b/drivers/accel/habanalabs/goya/goya_coresight.c
@@ -9,6 +9,7 @@
 #include "../include/goya/goya_coresight.h"
 #include "../include/goya/asic_reg/goya_regs.h"
 #include "../include/goya/asic_reg/goya_masks.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <uapi/drm/habanalabs_accel.h>
 
diff --git a/drivers/accel/habanalabs/goya/goya_hwmgr.c b/drivers/accel/habanalabs/goya/goya_hwmgr.c
index b595721751c1..6499fdabf310 100644
--- a/drivers/accel/habanalabs/goya/goya_hwmgr.c
+++ b/drivers/accel/habanalabs/goya/goya_hwmgr.c
@@ -6,6 +6,8 @@
  */
 
 #include "goyaP.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 void goya_set_pll_profile(struct hl_device *hdev, enum hl_pll_frequency freq)
 {
diff --git a/drivers/accel/habanalabs/goya/goya_security.c b/drivers/accel/habanalabs/goya/goya_security.c
index 14c3bae3ccdc..5a2b6493dd48 100644
--- a/drivers/accel/habanalabs/goya/goya_security.c
+++ b/drivers/accel/habanalabs/goya/goya_security.c
@@ -7,6 +7,7 @@
 
 #include "goyaP.h"
 #include "../include/goya/asic_reg/goya_regs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * goya_set_block_as_protected - set the given block as protected
diff --git a/drivers/accel/ivpu/ivpu_debugfs.c b/drivers/accel/ivpu/ivpu_debugfs.c
index 7cb962e21453..f2dfebf71cca 100644
--- a/drivers/accel/ivpu/ivpu_debugfs.c
+++ b/drivers/accel/ivpu/ivpu_debugfs.c
@@ -6,6 +6,7 @@
 #include <drm/drm_debugfs.h>
 #include <drm/drm_file.h>
 #include <drm/drm_print.h>
+#include <linux/kstrtox.h>
 
 #include <uapi/drm/ivpu_accel.h>
 
diff --git a/drivers/accel/ivpu/ivpu_pm.c b/drivers/accel/ivpu/ivpu_pm.c
index f501f27ebafd..8484f7d3bb4d 100644
--- a/drivers/accel/ivpu/ivpu_pm.c
+++ b/drivers/accel/ivpu/ivpu_pm.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/highmem.h>
+#include <linux/kobject.h>
 #include <linux/moduleparam.h>
 #include <linux/pci.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/accel/qaic/qaic_control.c b/drivers/accel/qaic/qaic_control.c
index 9e8a8cbadf6b..4d64aa59ac63 100644
--- a/drivers/accel/qaic/qaic_control.c
+++ b/drivers/accel/qaic/qaic_control.c
@@ -8,6 +8,7 @@
 #include <linux/crc32.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/kref.h>
 #include <linux/list.h>
 #include <linux/mhi.h>
diff --git a/drivers/accel/qaic/qaic_data.c b/drivers/accel/qaic/qaic_data.c
index 2459fe4a3f95..10765dce8772 100644
--- a/drivers/accel/qaic/qaic_data.c
+++ b/drivers/accel/qaic/qaic_data.c
@@ -10,6 +10,7 @@
 #include <linux/dma-buf.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/kref.h>
 #include <linux/list.h>
 #include <linux/math64.h>
diff --git a/drivers/accessibility/speakup/kobjects.c b/drivers/accessibility/speakup/kobjects.c
index 0dfdb6608e02..143706379a01 100644
--- a/drivers/accessibility/speakup/kobjects.c
+++ b/drivers/accessibility/speakup/kobjects.c
@@ -15,6 +15,8 @@
 #include <linux/slab.h>		/* For kmalloc. */
 #include <linux/kernel.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/string_helpers.h>
 #include <linux/sysfs.h>
diff --git a/drivers/accessibility/speakup/main.c b/drivers/accessibility/speakup/main.c
index 1fbc9b921c4f..8e37e04b5070 100644
--- a/drivers/accessibility/speakup/main.c
+++ b/drivers/accessibility/speakup/main.c
@@ -10,6 +10,8 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/vt.h>
 #include <linux/tty.h>
 #include <linux/mm.h>		/* __get_free_page() and friends */
diff --git a/drivers/accessibility/speakup/speakup_soft.c b/drivers/accessibility/speakup/speakup_soft.c
index 6d446824677b..4cb8fb4b9513 100644
--- a/drivers/accessibility/speakup/speakup_soft.c
+++ b/drivers/accessibility/speakup/speakup_soft.c
@@ -10,8 +10,11 @@
  */
 
 #include <linux/unistd.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/miscdevice.h>	/* for misc_register, and MISC_DYNAMIC_MINOR */
 #include <linux/poll.h>		/* for poll_wait() */
+#include <linux/sprintf.h>
 
 /* schedule(), signal_pending(), TASK_INTERRUPTIBLE */
 #include <linux/sched/signal.h>
diff --git a/drivers/accessibility/speakup/spk_ttyio.c b/drivers/accessibility/speakup/spk_ttyio.c
index 4c0a6e1f019d..739ff5cc2403 100644
--- a/drivers/accessibility/speakup/spk_ttyio.c
+++ b/drivers/accessibility/speakup/spk_ttyio.c
@@ -3,6 +3,7 @@
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "speakup.h"
 #include "spk_types.h"
diff --git a/drivers/accessibility/speakup/synth.c b/drivers/accessibility/speakup/synth.c
index eea2a2fa4f01..a0351331abdd 100644
--- a/drivers/accessibility/speakup/synth.c
+++ b/drivers/accessibility/speakup/synth.c
@@ -9,6 +9,7 @@
 #include <linux/delay.h>	/* for loops_per_sec */
 #include <linux/kmod.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>	/* for copy_from_user */
 #include <linux/sched.h>
 #include <linux/timer.h>
diff --git a/drivers/accessibility/speakup/varhandlers.c b/drivers/accessibility/speakup/varhandlers.c
index 462f8d879053..991b4ba108c8 100644
--- a/drivers/accessibility/speakup/varhandlers.c
+++ b/drivers/accessibility/speakup/varhandlers.c
@@ -3,6 +3,8 @@
 #include "spk_types.h"
 #include "spk_priv.h"
 #include "speakup.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static struct st_var_header var_headers[] = {
 	{ "version", VERSION, VAR_PROC, NULL, NULL },
diff --git a/drivers/acpi/acpi_extlog.c b/drivers/acpi/acpi_extlog.c
index ca87a0939135..ffa604b04790 100644
--- a/drivers/acpi/acpi_extlog.c
+++ b/drivers/acpi/acpi_extlog.c
@@ -15,6 +15,7 @@
 #include <acpi/ghes.h>
 #include <asm/cpu.h>
 #include <asm/mce.h>
+#include <linux/sprintf.h>
 
 #include "apei/apei-internal.h"
 #include <ras/ras_event.h>
diff --git a/drivers/acpi/acpi_fpdt.c b/drivers/acpi/acpi_fpdt.c
index 271092f2700a..6af5437e7421 100644
--- a/drivers/acpi/acpi_fpdt.c
+++ b/drivers/acpi/acpi_fpdt.c
@@ -9,6 +9,7 @@
 #define pr_fmt(fmt) "ACPI FPDT: " fmt
 
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 /*
  * FPDT contains ACPI table header and a number of fpdt_subtable_entries.
diff --git a/drivers/acpi/acpi_ipmi.c b/drivers/acpi/acpi_ipmi.c
index 0555f68c2dfd..31b360db74a1 100644
--- a/drivers/acpi/acpi_ipmi.c
+++ b/drivers/acpi/acpi_ipmi.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/ipmi.h>
 #include <linux/spinlock.h>
 
diff --git a/drivers/acpi/acpi_lpit.c b/drivers/acpi/acpi_lpit.c
index 794962c5c88e..90143205a4c7 100644
--- a/drivers/acpi/acpi_lpit.c
+++ b/drivers/acpi/acpi_lpit.c
@@ -11,6 +11,7 @@
 #include <asm/msr.h>
 #include <asm/tsc.h>
 #include "internal.h"
+#include <linux/sprintf.h>
 
 struct lpit_residency_info {
 	struct acpi_generic_address gaddr;
diff --git a/drivers/acpi/acpi_lpss.c b/drivers/acpi/acpi_lpss.c
index 04e273167e92..3c1c57fba1bb 100644
--- a/drivers/acpi/acpi_lpss.c
+++ b/drivers/acpi/acpi_lpss.c
@@ -22,6 +22,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/pwm.h>
 #include <linux/pxa2xx_ssp.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/delay.h>
 
diff --git a/drivers/acpi/acpi_memhotplug.c b/drivers/acpi/acpi_memhotplug.c
index d0c1a71007d0..8cbf67417d79 100644
--- a/drivers/acpi/acpi_memhotplug.c
+++ b/drivers/acpi/acpi_memhotplug.c
@@ -15,6 +15,7 @@
 #include <linux/acpi.h>
 #include <linux/memory.h>
 #include <linux/memory_hotplug.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/drivers/acpi/acpi_pad.c b/drivers/acpi/acpi_pad.c
index bd1ad07f0290..df79eb55bbfb 100644
--- a/drivers/acpi/acpi_pad.c
+++ b/drivers/acpi/acpi_pad.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/cpumask.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/types.h>
diff --git a/drivers/acpi/acpi_processor.c b/drivers/acpi/acpi_processor.c
index 4fe2ef54088c..10732266f5e6 100644
--- a/drivers/acpi/acpi_processor.c
+++ b/drivers/acpi/acpi_processor.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <acpi/processor.h>
 
diff --git a/drivers/acpi/acpi_tad.c b/drivers/acpi/acpi_tad.c
index 33c3b16af556..95495a9a1f4e 100644
--- a/drivers/acpi/acpi_tad.c
+++ b/drivers/acpi/acpi_tad.c
@@ -22,9 +22,11 @@
 
 #include <linux/acpi.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 
 MODULE_LICENSE("GPL v2");
diff --git a/drivers/acpi/acpi_video.c b/drivers/acpi/acpi_video.c
index 1fda30388297..6b3b0a49b28d 100644
--- a/drivers/acpi/acpi_video.c
+++ b/drivers/acpi/acpi_video.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/mutex.h>
diff --git a/drivers/acpi/acpica/utprint.c b/drivers/acpi/acpica/utprint.c
index 42b30b9f9312..1dce4cbe9b92 100644
--- a/drivers/acpi/acpica/utprint.c
+++ b/drivers/acpi/acpica/utprint.c
@@ -9,6 +9,7 @@
 
 #include <acpi/acpi.h>
 #include "accommon.h"
+#include <linux/sprintf.h>
 
 #define _COMPONENT          ACPI_UTILITIES
 ACPI_MODULE_NAME("utprint")
diff --git a/drivers/acpi/apei/einj.c b/drivers/acpi/apei/einj.c
index 89fb9331c611..d9d1bc739622 100644
--- a/drivers/acpi/apei/einj.c
+++ b/drivers/acpi/apei/einj.c
@@ -22,6 +22,7 @@
 #include <linux/delay.h>
 #include <linux/mm.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include "apei-internal.h"
 
diff --git a/drivers/acpi/apei/ghes.c b/drivers/acpi/apei/ghes.c
index fe825a432c5b..21cc318f235b 100644
--- a/drivers/acpi/apei/ghes.c
+++ b/drivers/acpi/apei/ghes.c
@@ -24,6 +24,7 @@
 #include <linux/acpi.h>
 #include <linux/io.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/cper.h>
 #include <linux/cxl-event.h>
diff --git a/drivers/acpi/battery.c b/drivers/acpi/battery.c
index b379401ff1c2..6acb3a7184c4 100644
--- a/drivers/acpi/battery.c
+++ b/drivers/acpi/battery.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/types.h>
 
diff --git a/drivers/acpi/bus.c b/drivers/acpi/bus.c
index 569bd15f211b..aa3b65ae546d 100644
--- a/drivers/acpi/bus.c
+++ b/drivers/acpi/bus.c
@@ -19,6 +19,7 @@
 #include <linux/acpi.h>
 #include <linux/slab.h>
 #include <linux/regulator/machine.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/reboot.h>
 #include <linux/delay.h>
diff --git a/drivers/acpi/button.c b/drivers/acpi/button.c
index cc61020756be..cad76c6b6606 100644
--- a/drivers/acpi/button.c
+++ b/drivers/acpi/button.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
diff --git a/drivers/acpi/device_sysfs.c b/drivers/acpi/device_sysfs.c
index 23373faa35ec..3e9e562ba823 100644
--- a/drivers/acpi/device_sysfs.c
+++ b/drivers/acpi/device_sysfs.c
@@ -12,9 +12,11 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/export.h>
 #include <linux/nls.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/drivers/acpi/dock.c b/drivers/acpi/dock.c
index a89bdbe00184..ff14596e2b52 100644
--- a/drivers/acpi/dock.c
+++ b/drivers/acpi/dock.c
@@ -11,6 +11,7 @@
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/notifier.h>
 #include <linux/platform_device.h>
diff --git a/drivers/acpi/dptf/dptf_pch_fivr.c b/drivers/acpi/dptf/dptf_pch_fivr.c
index 4919e7abe93f..4f3ab318990b 100644
--- a/drivers/acpi/dptf/dptf_pch_fivr.c
+++ b/drivers/acpi/dptf/dptf_pch_fivr.c
@@ -6,8 +6,10 @@
 
 #include <linux/acpi.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 struct pch_fivr_resp {
 	u64 status;
diff --git a/drivers/acpi/dptf/dptf_power.c b/drivers/acpi/dptf/dptf_power.c
index 86561eda939f..0212a5909953 100644
--- a/drivers/acpi/dptf/dptf_power.c
+++ b/drivers/acpi/dptf/dptf_power.c
@@ -5,9 +5,11 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/acpi.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 /*
  * Presentation of attributes which are defined for INT3407 and INT3532.
diff --git a/drivers/acpi/ec.c b/drivers/acpi/ec.c
index dbdee2924594..bb4f4c935e60 100644
--- a/drivers/acpi/ec.c
+++ b/drivers/acpi/ec.c
@@ -19,6 +19,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
diff --git a/drivers/acpi/ec_sys.c b/drivers/acpi/ec_sys.c
index c074a0fae059..edc4ab6acceb 100644
--- a/drivers/acpi/ec_sys.c
+++ b/drivers/acpi/ec_sys.c
@@ -11,6 +11,7 @@
 #include <linux/acpi.h>
 #include <linux/debugfs.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include "internal.h"
 
diff --git a/drivers/acpi/evged.c b/drivers/acpi/evged.c
index fe6b6792c8bb..5c97984b5d5f 100644
--- a/drivers/acpi/evged.c
+++ b/drivers/acpi/evged.c
@@ -37,6 +37,7 @@
 #include <linux/list.h>
 #include <linux/platform_device.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #define MODULE_NAME	"acpi-ged"
 
diff --git a/drivers/acpi/fan_attr.c b/drivers/acpi/fan_attr.c
index f4f6e2381f1d..51f6f7337801 100644
--- a/drivers/acpi/fan_attr.c
+++ b/drivers/acpi/fan_attr.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #include "fan.h"
 
diff --git a/drivers/acpi/glue.c b/drivers/acpi/glue.c
index a194f30876c5..c8f247d9b766 100644
--- a/drivers/acpi/glue.c
+++ b/drivers/acpi/glue.c
@@ -20,6 +20,7 @@
 #include <linux/pci.h>
 #include <linux/pci-acpi.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/drivers/acpi/mipi-disco-img.c b/drivers/acpi/mipi-disco-img.c
index 7286cf4579bc..20d38b6ace2b 100644
--- a/drivers/acpi/mipi-disco-img.c
+++ b/drivers/acpi/mipi-disco-img.c
@@ -23,6 +23,7 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/overflow.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/string.h>
diff --git a/drivers/acpi/nfit/core.c b/drivers/acpi/nfit/core.c
index d4595d1985b1..8af3a8f23259 100644
--- a/drivers/acpi/nfit/core.c
+++ b/drivers/acpi/nfit/core.c
@@ -8,8 +8,10 @@
 #include <linux/nospec.h>
 #include <linux/mutex.h>
 #include <linux/ndctl.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/acpi.h>
 #include <linux/sort.h>
diff --git a/drivers/acpi/nfit/intel.c b/drivers/acpi/nfit/intel.c
index 3902759abcba..9508fa903594 100644
--- a/drivers/acpi/nfit/intel.c
+++ b/drivers/acpi/nfit/intel.c
@@ -3,10 +3,12 @@
 #include <linux/libnvdimm.h>
 #include <linux/ndctl.h>
 #include <linux/acpi.h>
+#include <linux/kstrtox.h>
 #include <linux/memregion.h>
 #include <asm/smp.h>
 #include "intel.h"
 #include "nfit.h"
+#include <linux/sprintf.h>
 
 static ssize_t firmware_activate_noidle_show(struct device *dev,
 		struct device_attribute *attr, char *buf)
diff --git a/drivers/acpi/osl.c b/drivers/acpi/osl.c
index 70af3fbbebe5..1c7bf377ea81 100644
--- a/drivers/acpi/osl.c
+++ b/drivers/acpi/osl.c
@@ -13,6 +13,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
 #include <linux/highmem.h>
diff --git a/drivers/acpi/pci_irq.c b/drivers/acpi/pci_irq.c
index ff30ceca2203..5325151f8586 100644
--- a/drivers/acpi/pci_irq.c
+++ b/drivers/acpi/pci_irq.c
@@ -15,6 +15,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/spinlock.h>
 #include <linux/pm.h>
diff --git a/drivers/acpi/pci_root.c b/drivers/acpi/pci_root.c
index 58b89b8d950e..28a24060ed43 100644
--- a/drivers/acpi/pci_root.c
+++ b/drivers/acpi/pci_root.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mutex.h>
 #include <linux/pm.h>
diff --git a/drivers/acpi/pci_slot.c b/drivers/acpi/pci_slot.c
index d6cb2c27a23b..092b58fdd5be 100644
--- a/drivers/acpi/pci_slot.c
+++ b/drivers/acpi/pci_slot.c
@@ -19,6 +19,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/pci.h>
diff --git a/drivers/acpi/pfr_telemetry.c b/drivers/acpi/pfr_telemetry.c
index 843f678ade0c..c7d9208e78c0 100644
--- a/drivers/acpi/pfr_telemetry.c
+++ b/drivers/acpi/pfr_telemetry.c
@@ -15,6 +15,7 @@
 #include <linux/errno.h>
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/idr.h>
 #include <linux/miscdevice.h>
 #include <linux/module.h>
 #include <linux/mm.h>
diff --git a/drivers/acpi/power.c b/drivers/acpi/power.c
index c2c70139c4f1..0ae9c53e0819 100644
--- a/drivers/acpi/power.c
+++ b/drivers/acpi/power.c
@@ -27,6 +27,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/acpi/proc.c b/drivers/acpi/proc.c
index 4322f2da6d10..c937f53b86c3 100644
--- a/drivers/acpi/proc.c
+++ b/drivers/acpi/proc.c
@@ -2,6 +2,7 @@
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/bcd.h>
 #include <linux/acpi.h>
diff --git a/drivers/acpi/processor_idle.c b/drivers/acpi/processor_idle.c
index 55437f5e0c3a..860888dc7f01 100644
--- a/drivers/acpi/processor_idle.c
+++ b/drivers/acpi/processor_idle.c
@@ -17,6 +17,7 @@
 #include <linux/dmi.h>
 #include <linux/sched.h>       /* need_resched() */
 #include <linux/sort.h>
+#include <linux/sprintf.h>
 #include <linux/tick.h>
 #include <linux/cpuidle.h>
 #include <linux/cpu.h>
diff --git a/drivers/acpi/property.c b/drivers/acpi/property.c
index a6ead5204046..945a67130db8 100644
--- a/drivers/acpi/property.c
+++ b/drivers/acpi/property.c
@@ -14,6 +14,7 @@
 #define pr_fmt(fmt) "ACPI: " fmt
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/export.h>
 
diff --git a/drivers/acpi/sbs.c b/drivers/acpi/sbs.c
index 94e3c000df2e..d3f6c94c26f0 100644
--- a/drivers/acpi/sbs.c
+++ b/drivers/acpi/sbs.c
@@ -14,6 +14,8 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
+#include <linux/sprintf.h>
 
 #include <linux/acpi.h>
 #include <linux/timer.h>
diff --git a/drivers/acpi/sleep.c b/drivers/acpi/sleep.c
index 808484d11209..ece0f652b7cc 100644
--- a/drivers/acpi/sleep.c
+++ b/drivers/acpi/sleep.c
@@ -15,6 +15,7 @@
 #include <linux/dmi.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/reboot.h>
 #include <linux/acpi.h>
diff --git a/drivers/acpi/spcr.c b/drivers/acpi/spcr.c
index cd36a97b0ea2..5a952d88607e 100644
--- a/drivers/acpi/spcr.c
+++ b/drivers/acpi/spcr.c
@@ -11,6 +11,7 @@
 #include <linux/console.h>
 #include <linux/kernel.h>
 #include <linux/serial_core.h>
+#include <linux/sprintf.h>
 
 /*
  * Erratum 44 for QDF2432v1 and QDF2400v1 SoCs describes the BUSY bit as
diff --git a/drivers/acpi/sysfs.c b/drivers/acpi/sysfs.c
index 687524b50085..c513758e8ad3 100644
--- a/drivers/acpi/sysfs.c
+++ b/drivers/acpi/sysfs.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/kstrtox.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/drivers/acpi/tables.c b/drivers/acpi/tables.c
index b07f7d091d13..5b59cf8f4ccd 100644
--- a/drivers/acpi/tables.c
+++ b/drivers/acpi/tables.c
@@ -11,6 +11,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/smp.h>
 #include <linux/string.h>
 #include <linux/types.h>
diff --git a/drivers/amba/bus.c b/drivers/amba/bus.c
index a24c152bfaac..aee10001c481 100644
--- a/drivers/amba/bus.c
+++ b/drivers/amba/bus.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/io.h>
diff --git a/drivers/android/binder.c b/drivers/android/binder.c
index bad28cf42010..b7366c3197ff 100644
--- a/drivers/android/binder.c
+++ b/drivers/android/binder.c
@@ -57,6 +57,7 @@
 #include <linux/sched/signal.h>
 #include <linux/sched/mm.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/uaccess.h>
 #include <linux/pid_namespace.h>
diff --git a/drivers/ata/ahci.c b/drivers/ata/ahci.c
index ae0a592e2185..9e6b4dd6b6cf 100644
--- a/drivers/ata/ahci.c
+++ b/drivers/ata/ahci.c
@@ -26,6 +26,7 @@
 #include <linux/device.h>
 #include <linux/dmi.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_cmnd.h>
 #include <linux/libata.h>
diff --git a/drivers/ata/ahci_imx.c b/drivers/ata/ahci_imx.c
index cb768f66f0a7..f6540c021254 100644
--- a/drivers/ata/ahci_imx.c
+++ b/drivers/ata/ahci_imx.c
@@ -19,6 +19,7 @@
 #include <linux/libata.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include "ahci.h"
 
diff --git a/drivers/ata/ata_piix.c b/drivers/ata/ata_piix.c
index ec3c5bd1f813..e2b6ef6d1e4c 100644
--- a/drivers/ata/ata_piix.c
+++ b/drivers/ata/ata_piix.c
@@ -74,6 +74,7 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_host.h>
 #include <linux/libata.h>
 #include <linux/dmi.h>
diff --git a/drivers/ata/libahci.c b/drivers/ata/libahci.c
index fca376f03c9e..f2d6c9416c22 100644
--- a/drivers/ata/libahci.c
+++ b/drivers/ata/libahci.c
@@ -19,6 +19,7 @@
 #include <linux/bitops.h>
 #include <linux/kernel.h>
 #include <linux/gfp.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/nospec.h>
 #include <linux/blkdev.h>
@@ -26,6 +27,7 @@
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_cmnd.h>
 #include <linux/libata.h>
diff --git a/drivers/ata/libata-acpi.c b/drivers/ata/libata-acpi.c
index d36e71f475ab..dcab7503a1b6 100644
--- a/drivers/ata/libata-acpi.c
+++ b/drivers/ata/libata-acpi.c
@@ -18,6 +18,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_device.h>
 #include "libata.h"
 
diff --git a/drivers/ata/libata-core.c b/drivers/ata/libata-core.c
index 09ed67772fae..0e8b78e69042 100644
--- a/drivers/ata/libata-core.c
+++ b/drivers/ata/libata-core.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/init.h>
@@ -33,7 +34,9 @@
 #include <linux/mm.h>
 #include <linux/spinlock.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/time.h>
 #include <linux/interrupt.h>
diff --git a/drivers/ata/libata-eh.c b/drivers/ata/libata-eh.c
index b0d6e69c4a5b..e9a48d68ee9d 100644
--- a/drivers/ata/libata-eh.c
+++ b/drivers/ata/libata-eh.c
@@ -13,8 +13,10 @@
 
 #include <linux/kernel.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/export.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_eh.h>
diff --git a/drivers/ata/libata-sata.c b/drivers/ata/libata-sata.c
index 0fb1934875f2..5eaf2b8cb9f7 100644
--- a/drivers/ata/libata-sata.c
+++ b/drivers/ata/libata-sata.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/ata/libata-scsi.c b/drivers/ata/libata-scsi.c
index 0a0f483124c3..0966a6c81a94 100644
--- a/drivers/ata/libata-scsi.c
+++ b/drivers/ata/libata-scsi.c
@@ -14,6 +14,8 @@
  */
 
 #include <linux/compat.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/kernel.h>
 #include <linux/blkdev.h>
diff --git a/drivers/ata/libata-transport.c b/drivers/ata/libata-transport.c
index 3e49a877500e..dd8d504234b7 100644
--- a/drivers/ata/libata-transport.c
+++ b/drivers/ata/libata-transport.c
@@ -28,6 +28,7 @@
 #include <linux/blkdev.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_transport.h>
 #include <linux/libata.h>
 #include <linux/hdreg.h>
diff --git a/drivers/ata/pata_amd.c b/drivers/ata/pata_amd.c
index 5b02b89748b7..0bc3c31ac55c 100644
--- a/drivers/ata/pata_amd.c
+++ b/drivers/ata/pata_amd.c
@@ -20,6 +20,7 @@
 #include <linux/pci.h>
 #include <linux/blkdev.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_host.h>
 #include <linux/libata.h>
 
diff --git a/drivers/ata/pata_it821x.c b/drivers/ata/pata_it821x.c
index 2fe3fb6102ce..3e14d2c1ba81 100644
--- a/drivers/ata/pata_it821x.c
+++ b/drivers/ata/pata_it821x.c
@@ -75,6 +75,7 @@
 #include <linux/blkdev.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_host.h>
 #include <linux/libata.h>
 
diff --git a/drivers/ata/pata_parport/pata_parport.c b/drivers/ata/pata_parport/pata_parport.c
index 9a2cb9ca9d1d..c490aa790fb4 100644
--- a/drivers/ata/pata_parport/pata_parport.c
+++ b/drivers/ata/pata_parport/pata_parport.c
@@ -3,10 +3,12 @@
  * Copyright 2023 Ondrej Zary
  * based on paride.c by Grant R. Guenther <grant@torque.net>
  */
+#include <linux/idr.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/parport.h>
 #include "pata_parport.h"
+#include <linux/sprintf.h>
 
 #define DRV_NAME "pata_parport"
 
diff --git a/drivers/ata/pata_pxa.c b/drivers/ata/pata_pxa.c
index 538bd3423d85..03deafdf99ea 100644
--- a/drivers/ata/pata_pxa.c
+++ b/drivers/ata/pata_pxa.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/ata.h>
+#include <linux/completion.h>
 #include <linux/libata.h>
 #include <linux/platform_device.h>
 #include <linux/dmaengine.h>
diff --git a/drivers/ata/sata_fsl.c b/drivers/ata/sata_fsl.c
index 01aa05f4c3f5..18db7242b85b 100644
--- a/drivers/ata/sata_fsl.c
+++ b/drivers/ata/sata_fsl.c
@@ -11,12 +11,14 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/ata/sata_mv.c b/drivers/ata/sata_mv.c
index e82786c63fbd..c3c5c27dc8ff 100644
--- a/drivers/ata/sata_mv.c
+++ b/drivers/ata/sata_mv.c
@@ -55,6 +55,7 @@
 #include <linux/gfp.h>
 #include <linux/of.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/atm/adummy.c b/drivers/atm/adummy.c
index 8157925af824..23a3d1162bd1 100644
--- a/drivers/atm/adummy.c
+++ b/drivers/atm/adummy.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/skbuff.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/delay.h>
diff --git a/drivers/atm/atmtcp.c b/drivers/atm/atmtcp.c
index d4aa0f353b6c..2de58822d32e 100644
--- a/drivers/atm/atmtcp.c
+++ b/drivers/atm/atmtcp.c
@@ -5,6 +5,7 @@
 
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/atmdev.h>
 #include <linux/atm_tcp.h>
diff --git a/drivers/atm/eni.c b/drivers/atm/eni.c
index 3011cf1a84a9..259603d0ac9b 100644
--- a/drivers/atm/eni.c
+++ b/drivers/atm/eni.c
@@ -13,6 +13,7 @@
 #include <linux/atmdev.h>
 #include <linux/sonet.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/delay.h>
 #include <linux/uio.h>
diff --git a/drivers/atm/fore200e.c b/drivers/atm/fore200e.c
index 50d8ce20ae5b..640f81c16888 100644
--- a/drivers/atm/fore200e.c
+++ b/drivers/atm/fore200e.c
@@ -31,6 +31,7 @@
 #include <asm/irq.h>
 #include <asm/dma.h>
 #include <asm/byteorder.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/atomic.h>
 
diff --git a/drivers/atm/he.c b/drivers/atm/he.c
index ad91cc6a34fc..1bb5413bfd6f 100644
--- a/drivers/atm/he.c
+++ b/drivers/atm/he.c
@@ -58,6 +58,7 @@
 #include <linux/skbuff.h>
 #include <linux/pci.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/delay.h>
diff --git a/drivers/atm/idt77252.c b/drivers/atm/idt77252.c
index e7f713cd70d3..f033b52a7868 100644
--- a/drivers/atm/idt77252.c
+++ b/drivers/atm/idt77252.c
@@ -31,6 +31,7 @@
 #include <linux/poison.h>
 #include <linux/skbuff.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/netdevice.h>
 #include <linux/atmdev.h>
diff --git a/drivers/atm/iphase.c b/drivers/atm/iphase.c
index d213adcefe33..d28709f97407 100644
--- a/drivers/atm/iphase.c
+++ b/drivers/atm/iphase.c
@@ -50,6 +50,7 @@
 #include <linux/ctype.h>
 #include <linux/sonet.h>  
 #include <linux/skbuff.h>  
+#include <linux/sprintf.h>
 #include <linux/time.h>  
 #include <linux/delay.h>  
 #include <linux/uio.h>  
diff --git a/drivers/atm/lanai.c b/drivers/atm/lanai.c
index 32d7aa141d96..2fa08fde86c4 100644
--- a/drivers/atm/lanai.c
+++ b/drivers/atm/lanai.c
@@ -62,6 +62,7 @@
 #include <linux/init.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 
 /* -------------------- TUNABLE PARAMATERS: */
 
diff --git a/drivers/atm/nicstar.c b/drivers/atm/nicstar.c
index 27153d6bc781..c5da8a5dd5a4 100644
--- a/drivers/atm/nicstar.c
+++ b/drivers/atm/nicstar.c
@@ -40,6 +40,7 @@
 #include <linux/atm.h>
 #include <linux/pci.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/delay.h>
diff --git a/drivers/atm/solos-pci.c b/drivers/atm/solos-pci.c
index d3c30a28c410..44d919d1eab8 100644
--- a/drivers/atm/solos-pci.c
+++ b/drivers/atm/solos-pci.c
@@ -16,10 +16,12 @@
 #define VERBOSE_DEBUG
 
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/atm.h>
diff --git a/drivers/auxdisplay/charlcd.c b/drivers/auxdisplay/charlcd.c
index 6d309e4971b6..ea54b23d040f 100644
--- a/drivers/auxdisplay/charlcd.c
+++ b/drivers/auxdisplay/charlcd.c
@@ -9,6 +9,7 @@
 #include <linux/atomic.h>
 #include <linux/ctype.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/miscdevice.h>
 #include <linux/module.h>
 #include <linux/notifier.h>
diff --git a/drivers/auxdisplay/hd44780_common.c b/drivers/auxdisplay/hd44780_common.c
index 7cbf375b0fa5..2cffe29a1233 100644
--- a/drivers/auxdisplay/hd44780_common.c
+++ b/drivers/auxdisplay/hd44780_common.c
@@ -1,4 +1,5 @@
 // SPDX-License-Identifier: GPL-2.0-or-later
+#include <linux/hex.h>
 #include <linux/module.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
diff --git a/drivers/auxdisplay/line-display.c b/drivers/auxdisplay/line-display.c
index 03e7f104aa1a..582aab840b4b 100644
--- a/drivers/auxdisplay/line-display.c
+++ b/drivers/auxdisplay/line-display.c
@@ -9,6 +9,7 @@
  */
 
 #include <generated/utsrelease.h>
+#include <linux/kstrtox.h>
 
 #include <linux/device.h>
 #include <linux/module.h>
diff --git a/drivers/base/arch_topology.c b/drivers/base/arch_topology.c
index 024b78a0cfc1..71fa3411de28 100644
--- a/drivers/base/arch_topology.c
+++ b/drivers/base/arch_topology.c
@@ -19,6 +19,7 @@
 #include <linux/init.h>
 #include <linux/rcupdate.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 
 #define CREATE_TRACE_POINTS
diff --git a/drivers/base/auxiliary.c b/drivers/base/auxiliary.c
index d3a2c40c2f12..a1f99005cd8d 100644
--- a/drivers/base/auxiliary.c
+++ b/drivers/base/auxiliary.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/pm_domain.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/auxiliary_bus.h>
 #include "base.h"
diff --git a/drivers/base/base.h b/drivers/base/base.h
index eb4c0ace9242..344e7e4012ab 100644
--- a/drivers/base/base.h
+++ b/drivers/base/base.h
@@ -10,7 +10,12 @@
  * shared outside of the drivers/base/ directory.
  *
  */
+
+#include <linux/klist.h>
+#include <linux/kobject.h>
 #include <linux/notifier.h>
+#include <linux/device/bus.h>
+#include <linux/device/driver.h>
 
 /**
  * struct subsys_private - structure to hold the private to the driver core portions of the bus_type/class structure.
diff --git a/drivers/base/cacheinfo.c b/drivers/base/cacheinfo.c
index 23b8cba4a2a3..57e9c326cbaf 100644
--- a/drivers/base/cacheinfo.c
+++ b/drivers/base/cacheinfo.c
@@ -13,6 +13,7 @@
 #include <linux/compiler.h>
 #include <linux/cpu.h>
 #include <linux/device.h>
+#include <linux/gfp.h> // for setup_pcp_cacheinfo()
 #include <linux/init.h>
 #include <linux/of.h>
 #include <linux/sched.h>
diff --git a/drivers/base/container.c b/drivers/base/container.c
index f40588ebc3f5..8ef783dfd76d 100644
--- a/drivers/base/container.c
+++ b/drivers/base/container.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/container.h>
+#include <linux/device.h>
 
 #include "base.h"
 
diff --git a/drivers/base/core.c b/drivers/base/core.c
index 9828da9b933c..e3e8bbf42004 100644
--- a/drivers/base/core.c
+++ b/drivers/base/core.c
@@ -27,6 +27,7 @@
 #include <linux/netdevice.h>
 #include <linux/sched/signal.h>
 #include <linux/sched/mm.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/swiotlb.h>
 #include <linux/sysfs.h>
diff --git a/drivers/base/dd.c b/drivers/base/dd.c
index 85152537dbf1..d22cf6770f6a 100644
--- a/drivers/base/dd.c
+++ b/drivers/base/dd.c
@@ -21,8 +21,11 @@
 #include <linux/delay.h>
 #include <linux/dma-map-ops.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for parse_option_str()
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/async.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/base/devcoredump.c b/drivers/base/devcoredump.c
index 7e2d1f0d903a..8767542733d4 100644
--- a/drivers/base/devcoredump.c
+++ b/drivers/base/devcoredump.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/devcoredump.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/slab.h>
 #include <linux/fs.h>
diff --git a/drivers/base/devres.c b/drivers/base/devres.c
index 3df0025d12aa..01a6c1bcaab7 100644
--- a/drivers/base/devres.c
+++ b/drivers/base/devres.c
@@ -7,8 +7,10 @@
  */
 
 #include <linux/device.h>
+#include <linux/gfp.h> // for free_pages()
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/percpu.h>
 
 #include <asm/sections.h>
diff --git a/drivers/base/devtmpfs.c b/drivers/base/devtmpfs.c
index b848764ef018..0fa71999ce00 100644
--- a/drivers/base/devtmpfs.c
+++ b/drivers/base/devtmpfs.c
@@ -16,10 +16,12 @@
 #define pr_fmt(fmt) "devtmpfs: " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/syscalls.h>
 #include <linux/mount.h>
 #include <linux/device.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/namei.h>
 #include <linux/fs.h>
 #include <linux/shmem_fs.h>
diff --git a/drivers/base/firmware_loader/builtin/main.c b/drivers/base/firmware_loader/builtin/main.c
index a065c3150897..13bb529ddadf 100644
--- a/drivers/base/firmware_loader/builtin/main.c
+++ b/drivers/base/firmware_loader/builtin/main.c
@@ -2,6 +2,7 @@
 /* Builtin firmware support */
 
 #include <linux/firmware.h>
+#include <linux/string.h> // for memcpy()
 #include "../firmware.h"
 
 /* Only if FW_LOADER=y */
diff --git a/drivers/base/firmware_loader/firmware.h b/drivers/base/firmware_loader/firmware.h
index e891742ba264..9e0c5a01b076 100644
--- a/drivers/base/firmware_loader/firmware.h
+++ b/drivers/base/firmware_loader/firmware.h
@@ -3,6 +3,7 @@
 #define __FIRMWARE_LOADER_H
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/types.h>
 #include <linux/kref.h>
diff --git a/drivers/base/firmware_loader/main.c b/drivers/base/firmware_loader/main.c
index ea28102d421e..89c80f7c5cd3 100644
--- a/drivers/base/firmware_loader/main.c
+++ b/drivers/base/firmware_loader/main.c
@@ -11,11 +11,13 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/capability.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/kernel_read_file.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/initrd.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/vmalloc.h>
 #include <linux/interrupt.h>
diff --git a/drivers/base/firmware_loader/sysfs.c b/drivers/base/firmware_loader/sysfs.c
index c9c93b47d9a5..06ee2f8d9774 100644
--- a/drivers/base/firmware_loader/sysfs.c
+++ b/drivers/base/firmware_loader/sysfs.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <linux/highmem.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/security.h>
 #include <linux/slab.h>
diff --git a/drivers/base/firmware_loader/sysfs_upload.c b/drivers/base/firmware_loader/sysfs_upload.c
index 829270067d16..cb4c6140aa5e 100644
--- a/drivers/base/firmware_loader/sysfs_upload.c
+++ b/drivers/base/firmware_loader/sysfs_upload.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <linux/firmware.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 
diff --git a/drivers/base/memory.c b/drivers/base/memory.c
index c0436f46cfb7..58fefdb8e3b0 100644
--- a/drivers/base/memory.c
+++ b/drivers/base/memory.c
@@ -13,6 +13,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/topology.h>
 #include <linux/capability.h>
 #include <linux/device.h>
diff --git a/drivers/base/module.c b/drivers/base/module.c
index 46ad4d636731..e104233f9fde 100644
--- a/drivers/base/module.c
+++ b/drivers/base/module.c
@@ -6,6 +6,7 @@
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include "base.h"
 
diff --git a/drivers/base/node.c b/drivers/base/node.c
index ba27f25d2b81..760884502a64 100644
--- a/drivers/base/node.c
+++ b/drivers/base/node.c
@@ -11,6 +11,7 @@
 #include <linux/notifier.h>
 #include <linux/node.h>
 #include <linux/hugetlb.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/compaction.h>
 #include <linux/cpumask.h>
 #include <linux/topology.h>
diff --git a/drivers/base/power/common.c b/drivers/base/power/common.c
index 327d168dd37a..845ad934c803 100644
--- a/drivers/base/power/common.c
+++ b/drivers/base/power/common.c
@@ -8,6 +8,7 @@
 #include <linux/device.h>
 #include <linux/export.h>
 #include <linux/slab.h>
+#include <linux/of.h>
 #include <linux/pm_clock.h>
 #include <linux/acpi.h>
 #include <linux/pm_domain.h>
diff --git a/drivers/base/power/generic_ops.c b/drivers/base/power/generic_ops.c
index 4fa525668cb7..26ea77e104a8 100644
--- a/drivers/base/power/generic_ops.c
+++ b/drivers/base/power/generic_ops.c
@@ -7,6 +7,7 @@
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
 #include <linux/export.h>
+#include <linux/completion.h>
 
 #ifdef CONFIG_PM
 /**
diff --git a/drivers/base/power/main.c b/drivers/base/power/main.c
index 5679f966f676..3d10163d9294 100644
--- a/drivers/base/power/main.c
+++ b/drivers/base/power/main.c
@@ -29,6 +29,7 @@
 #include <linux/sched.h>
 #include <linux/sched/debug.h>
 #include <linux/async.h>
+#include <linux/completion.h>
 #include <linux/suspend.h>
 #include <trace/events/power.h>
 #include <linux/cpufreq.h>
diff --git a/drivers/base/power/runtime.c b/drivers/base/power/runtime.c
index 05793c9fbb84..0013ce8f976b 100644
--- a/drivers/base/power/runtime.c
+++ b/drivers/base/power/runtime.c
@@ -12,6 +12,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/pm_wakeirq.h>
 #include <linux/rculist.h>
+#include <linux/refcount.h>
 #include <trace/events/rpm.h>
 
 #include "../base.h"
diff --git a/drivers/base/power/sysfs.c b/drivers/base/power/sysfs.c
index a1474fb67db9..d3acf0a8ee06 100644
--- a/drivers/base/power/sysfs.c
+++ b/drivers/base/power/sysfs.c
@@ -2,6 +2,7 @@
 /* sysfs entries for device PM */
 #include <linux/device.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/export.h>
 #include <linux/pm_qos.h>
diff --git a/drivers/base/power/trace.c b/drivers/base/power/trace.c
index cd6e559648b2..0bac9ed93a94 100644
--- a/drivers/base/power/trace.c
+++ b/drivers/base/power/trace.c
@@ -12,6 +12,7 @@
 #include <linux/pm-trace.h>
 #include <linux/export.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/init.h>
 
diff --git a/drivers/base/power/wakeirq.c b/drivers/base/power/wakeirq.c
index 42171f766dcb..19a3d35ba1a1 100644
--- a/drivers/base/power/wakeirq.c
+++ b/drivers/base/power/wakeirq.c
@@ -6,6 +6,7 @@
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
 #include <linux/pm_wakeirq.h>
+#include <linux/sprintf.h>
 
 #include "power.h"
 
diff --git a/drivers/base/regmap/regmap-debugfs.c b/drivers/base/regmap/regmap-debugfs.c
index fb84cda92a75..b0c47cfe4889 100644
--- a/drivers/base/regmap/regmap-debugfs.c
+++ b/drivers/base/regmap/regmap-debugfs.c
@@ -9,6 +9,8 @@
 #include <linux/slab.h>
 #include <linux/mutex.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/device.h>
 #include <linux/list.h>
diff --git a/drivers/base/regmap/regmap-kunit.c b/drivers/base/regmap/regmap-kunit.c
index 4eb18f5d3265..3b7d13ce4c4d 100644
--- a/drivers/base/regmap/regmap-kunit.c
+++ b/drivers/base/regmap/regmap-kunit.c
@@ -5,6 +5,7 @@
 // Copyright 2023 Arm Ltd
 
 #include <kunit/test.h>
+#include <linux/random.h>
 #include "internal.h"
 
 #define BLOCK_TEST_SIZE 12
diff --git a/drivers/base/soc.c b/drivers/base/soc.c
index 282c38aece0d..45365cf04fcd 100644
--- a/drivers/base/soc.c
+++ b/drivers/base/soc.c
@@ -13,6 +13,7 @@
 #include <linux/idr.h>
 #include <linux/spinlock.h>
 #include <linux/sys_soc.h>
+#include <linux/device.h>
 #include <linux/err.h>
 #include <linux/glob.h>
 
diff --git a/drivers/base/swnode.c b/drivers/base/swnode.c
index 36512fb75a20..0bac377434c9 100644
--- a/drivers/base/swnode.c
+++ b/drivers/base/swnode.c
@@ -7,7 +7,9 @@
  */
 
 #include <linux/device.h>
+#include <linux/idr.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/property.h>
 #include <linux/slab.h>
 
diff --git a/drivers/base/topology.c b/drivers/base/topology.c
index 89f98be5c5b9..0526c0ee6640 100644
--- a/drivers/base/topology.c
+++ b/drivers/base/topology.c
@@ -10,8 +10,10 @@
  */
 #include <linux/mm.h>
 #include <linux/cpu.h>
+#include <linux/device.h>
 #include <linux/module.h>
 #include <linux/hardirq.h>
+#include <linux/sysfs.h>
 #include <linux/topology.h>
 
 #define define_id_show_func(name, fmt)					\
diff --git a/drivers/base/transport_class.c b/drivers/base/transport_class.c
index 09ee2a1e35bb..902b2d74cad8 100644
--- a/drivers/base/transport_class.c
+++ b/drivers/base/transport_class.c
@@ -26,9 +26,12 @@
  * transport class is framed entirely in terms of generic devices to
  * allow it to be used by any physical HBA in the system.
  */
+
+#include <linux/device.h>
 #include <linux/export.h>
 #include <linux/attribute_container.h>
 #include <linux/transport_class.h>
+#include <linux/sysfs.h>
 
 static int transport_remove_classdev(struct attribute_container *cont,
 				     struct device *dev,
diff --git a/drivers/bcma/driver_mips.c b/drivers/bcma/driver_mips.c
index 9be0806eb033..5822b2ecf1c0 100644
--- a/drivers/bcma/driver_mips.c
+++ b/drivers/bcma/driver_mips.c
@@ -11,6 +11,7 @@
  */
 
 #include "bcma_private.h"
+#include <linux/sprintf.h>
 
 #include <linux/bcma/bcma.h>
 
diff --git a/drivers/bcma/main.c b/drivers/bcma/main.c
index 6b5d34919c72..66606f5424eb 100644
--- a/drivers/bcma/main.c
+++ b/drivers/bcma/main.c
@@ -16,6 +16,7 @@
 #include <linux/of_irq.h>
 #include <linux/of_device.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("Broadcom's specific AMBA driver");
 MODULE_LICENSE("GPL");
diff --git a/drivers/bcma/scan.c b/drivers/bcma/scan.c
index 26d12a7e6ca0..d7095be76880 100644
--- a/drivers/bcma/scan.c
+++ b/drivers/bcma/scan.c
@@ -7,6 +7,7 @@
 
 #include "scan.h"
 #include "bcma_private.h"
+#include <linux/sprintf.h>
 
 #include <linux/bcma/bcma.h>
 #include <linux/bcma/bcma_regs.h>
diff --git a/drivers/block/amiflop.c b/drivers/block/amiflop.c
index 2b98114a9fe0..6046fcfe3891 100644
--- a/drivers/block/amiflop.c
+++ b/drivers/block/amiflop.c
@@ -56,6 +56,8 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/fd.h>
 #include <linux/hdreg.h>
diff --git a/drivers/block/aoe/aoeblk.c b/drivers/block/aoe/aoeblk.c
index b1b47d88f5db..c36474c04c9f 100644
--- a/drivers/block/aoe/aoeblk.c
+++ b/drivers/block/aoe/aoeblk.c
@@ -17,6 +17,7 @@
 #include <linux/export.h>
 #include <linux/moduleparam.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <scsi/sg.h>
 #include "aoe.h"
 
diff --git a/drivers/block/aoe/aoechr.c b/drivers/block/aoe/aoechr.c
index a42c4bcc85ba..8702cc4c7117 100644
--- a/drivers/block/aoe/aoechr.c
+++ b/drivers/block/aoe/aoechr.c
@@ -13,6 +13,7 @@
 #include <linux/skbuff.h>
 #include <linux/export.h>
 #include "aoe.h"
+#include <linux/sprintf.h>
 
 enum {
 	//MINOR_STAT = 1, (moved to sysfs)
diff --git a/drivers/block/aoe/aoecmd.c b/drivers/block/aoe/aoecmd.c
index d7317425be51..0e1fcf5b2c0d 100644
--- a/drivers/block/aoe/aoecmd.c
+++ b/drivers/block/aoe/aoecmd.c
@@ -5,12 +5,14 @@
  */
 
 #include <linux/ata.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <linux/hdreg.h>
 #include <linux/blk-mq.h>
 #include <linux/skbuff.h>
 #include <linux/netdevice.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/kthread.h>
 #include <net/net_namespace.h>
diff --git a/drivers/block/aoe/aoenet.c b/drivers/block/aoe/aoenet.c
index c51ea95bc2ce..3f56dbb3436a 100644
--- a/drivers/block/aoe/aoenet.c
+++ b/drivers/block/aoe/aoenet.c
@@ -9,6 +9,7 @@
 #include <linux/blkdev.h>
 #include <linux/netdevice.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <net/net_namespace.h>
 #include <asm/unaligned.h>
 #include "aoe.h"
diff --git a/drivers/block/ataflop.c b/drivers/block/ataflop.c
index 50949207798d..096ee2348feb 100644
--- a/drivers/block/ataflop.c
+++ b/drivers/block/ataflop.c
@@ -63,6 +63,8 @@
  */
 
 #include <linux/module.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/fd.h>
 #include <linux/delay.h>
diff --git a/drivers/block/brd.c b/drivers/block/brd.c
index 970bd6ff38c4..57bffa51dcf6 100644
--- a/drivers/block/brd.c
+++ b/drivers/block/brd.c
@@ -11,6 +11,7 @@
 
 #include <linux/init.h>
 #include <linux/initrd.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/major.h>
@@ -19,9 +20,11 @@
 #include <linux/highmem.h>
 #include <linux/mutex.h>
 #include <linux/pagemap.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 #include <linux/fs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/backing-dev.h>
 #include <linux/debugfs.h>
 
diff --git a/drivers/block/drbd/drbd_buildtag.c b/drivers/block/drbd/drbd_buildtag.c
index cb1aa66d7d5d..8a9a07cf4f1f 100644
--- a/drivers/block/drbd/drbd_buildtag.c
+++ b/drivers/block/drbd/drbd_buildtag.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/drbd_config.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 const char *drbd_buildtag(void)
 {
diff --git a/drivers/block/drbd/drbd_debugfs.c b/drivers/block/drbd/drbd_debugfs.c
index 12460b584bcb..f26f3ec78d52 100644
--- a/drivers/block/drbd/drbd_debugfs.c
+++ b/drivers/block/drbd/drbd_debugfs.c
@@ -4,6 +4,7 @@
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/jiffies.h>
 #include <linux/list.h>
diff --git a/drivers/block/drbd/drbd_int.h b/drivers/block/drbd/drbd_int.h
index 94dc0a235919..b4e149debc02 100644
--- a/drivers/block/drbd/drbd_int.h
+++ b/drivers/block/drbd/drbd_int.h
@@ -15,6 +15,7 @@
 #define _DRBD_INT_H
 
 #include <crypto/hash.h>
+#include <linux/bio.h>
 #include <linux/compiler.h>
 #include <linux/types.h>
 #include <linux/list.h>
diff --git a/drivers/block/drbd/drbd_main.c b/drivers/block/drbd/drbd_main.c
index 6bc86106c7b2..b5f2039787f1 100644
--- a/drivers/block/drbd/drbd_main.c
+++ b/drivers/block/drbd/drbd_main.c
@@ -19,8 +19,10 @@
 #include <linux/module.h>
 #include <linux/jiffies.h>
 #include <linux/drbd.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/types.h>
+#include <linux/completion.h>
 #include <net/sock.h>
 #include <linux/ctype.h>
 #include <linux/mutex.h>
diff --git a/drivers/block/drbd/drbd_nl.c b/drivers/block/drbd/drbd_nl.c
index 6aed67278e8b..8df214c005e1 100644
--- a/drivers/block/drbd/drbd_nl.c
+++ b/drivers/block/drbd/drbd_nl.c
@@ -28,6 +28,7 @@
 #include <asm/unaligned.h>
 #include <linux/drbd_limits.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 
 #include <net/genetlink.h>
 
diff --git a/drivers/block/drbd/drbd_receiver.c b/drivers/block/drbd/drbd_receiver.c
index 0c9f54197768..d39e26de62c7 100644
--- a/drivers/block/drbd/drbd_receiver.c
+++ b/drivers/block/drbd/drbd_receiver.c
@@ -12,6 +12,7 @@
 
 
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <linux/uaccess.h>
 #include <net/sock.h>
diff --git a/drivers/block/drbd/drbd_state.c b/drivers/block/drbd/drbd_state.c
index 287a8d1d3f70..c5b2a25dcfd9 100644
--- a/drivers/block/drbd/drbd_state.c
+++ b/drivers/block/drbd/drbd_state.c
@@ -18,6 +18,8 @@
 #include "drbd_protocol.h"
 #include "drbd_req.h"
 #include "drbd_state_change.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 struct after_state_chg_work {
 	struct drbd_work w;
diff --git a/drivers/block/floppy.c b/drivers/block/floppy.c
index d0e41d52d6a9..a367073811df 100644
--- a/drivers/block/floppy.c
+++ b/drivers/block/floppy.c
@@ -167,6 +167,7 @@ static int print_unex = 1;
 #include <linux/sched.h>
 #include <linux/fs.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/workqueue.h>
 #include <linux/fdreg.h>
@@ -176,6 +177,7 @@ static int print_unex = 1;
 #include <linux/slab.h>
 #include <linux/mm.h>
 #include <linux/bio.h>
+#include <linux/completion.h>
 #include <linux/string.h>
 #include <linux/jiffies.h>
 #include <linux/fcntl.h>
diff --git a/drivers/block/loop.c b/drivers/block/loop.c
index f8145499da38..24af3801ffd6 100644
--- a/drivers/block/loop.c
+++ b/drivers/block/loop.c
@@ -6,8 +6,10 @@
 #include <linux/moduleparam.h>
 #include <linux/sched.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/file.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/errno.h>
 #include <linux/major.h>
diff --git a/drivers/block/mtip32xx/mtip32xx.c b/drivers/block/mtip32xx/mtip32xx.c
index b200950e8fb5..6ab06a5fb60c 100644
--- a/drivers/block/mtip32xx/mtip32xx.c
+++ b/drivers/block/mtip32xx/mtip32xx.c
@@ -13,6 +13,7 @@
 #include <linux/ata.h>
 #include <linux/delay.h>
 #include <linux/hdreg.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/random.h>
 #include <linux/smp.h>
diff --git a/drivers/block/nbd.c b/drivers/block/nbd.c
index 33a8f37bb6a1..594e1ed9701e 100644
--- a/drivers/block/nbd.c
+++ b/drivers/block/nbd.c
@@ -14,6 +14,7 @@
 #define pr_fmt(fmt) "nbd: " fmt
 
 #include <linux/major.h>
+#include <linux/sprintf.h>
 
 #include <linux/blkdev.h>
 #include <linux/module.h>
diff --git a/drivers/block/null_blk/main.c b/drivers/block/null_blk/main.c
index d5a373f085eb..c69429d76b41 100644
--- a/drivers/block/null_blk/main.c
+++ b/drivers/block/null_blk/main.c
@@ -4,10 +4,14 @@
  * Shaohua Li <shli@fb.com>
  */
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
+#include <linux/kstrtox.h>
 #include <linux/moduleparam.h>
 #include <linux/sched.h>
 #include <linux/fs.h>
+#include <linux/idr.h>
 #include <linux/init.h>
 #include "null_blk.h"
 
diff --git a/drivers/block/null_blk/zoned.c b/drivers/block/null_blk/zoned.c
index 6f5e0994862e..3ef9b2c27ea8 100644
--- a/drivers/block/null_blk/zoned.c
+++ b/drivers/block/null_blk/zoned.c
@@ -2,6 +2,7 @@
 #include <linux/vmalloc.h>
 #include <linux/bitmap.h>
 #include "null_blk.h"
+#include <linux/kstrtox.h>
 
 #define CREATE_TRACE_POINTS
 #include "trace.h"
diff --git a/drivers/block/pktcdvd.c b/drivers/block/pktcdvd.c
index c21444716e43..395d648798f1 100644
--- a/drivers/block/pktcdvd.c
+++ b/drivers/block/pktcdvd.c
@@ -54,6 +54,7 @@
 #include <linux/file.h>
 #include <linux/freezer.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/miscdevice.h>
 #include <linux/module.h>
@@ -64,6 +65,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/block/ps3disk.c b/drivers/block/ps3disk.c
index 36d7b36c60c7..0f52d4fd0766 100644
--- a/drivers/block/ps3disk.c
+++ b/drivers/block/ps3disk.c
@@ -8,8 +8,10 @@
 
 #include <linux/ata.h>
 #include <linux/blk-mq.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <asm/lv1call.h>
 #include <asm/ps3stor.h>
diff --git a/drivers/block/ps3vram.c b/drivers/block/ps3vram.c
index 38d42af01b25..db2dffd44ff7 100644
--- a/drivers/block/ps3vram.c
+++ b/drivers/block/ps3vram.c
@@ -9,6 +9,7 @@
  * Added support RSX DMA Vivien Chappelier <vivien.chappelier@free.fr>
  */
 
+#include <linux/bio.h>
 #include <linux/blkdev.h>
 #include <linux/delay.h>
 #include <linux/module.h>
@@ -18,6 +19,7 @@
 
 #include <asm/cell-regs.h>
 #include <asm/firmware.h>
+#include <asm/io.h> // for iowrite32be()
 #include <asm/lv1call.h>
 #include <asm/ps3.h>
 #include <asm/ps3gpu.h>
diff --git a/drivers/block/rbd.c b/drivers/block/rbd.c
index 00ca8a1d8c46..4b035ed96912 100644
--- a/drivers/block/rbd.c
+++ b/drivers/block/rbd.c
@@ -34,8 +34,10 @@
 #include <linux/ceph/cls_lock_client.h>
 #include <linux/ceph/striper.h>
 #include <linux/ceph/decode.h>
+#include <linux/completion.h>
 #include <linux/fs_parser.h>
 #include <linux/bsearch.h>
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/device.h>
diff --git a/drivers/block/rnbd/rnbd-clt-sysfs.c b/drivers/block/rnbd/rnbd-clt-sysfs.c
index 39887556cf95..f627d0d7b43a 100644
--- a/drivers/block/rnbd/rnbd-clt-sysfs.c
+++ b/drivers/block/rnbd/rnbd-clt-sysfs.c
@@ -12,10 +12,12 @@
 
 #include <linux/types.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/parser.h>
 #include <linux/module.h>
 #include <linux/in6.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/device.h>
 #include <rdma/ib.h>
diff --git a/drivers/block/rnbd/rnbd-clt.c b/drivers/block/rnbd/rnbd-clt.c
index 4044c369d22a..802c50784a67 100644
--- a/drivers/block/rnbd/rnbd-clt.c
+++ b/drivers/block/rnbd/rnbd-clt.c
@@ -15,6 +15,7 @@
 #include <linux/hdreg.h>
 #include <linux/scatterlist.h>
 #include <linux/idr.h>
+#include <linux/sprintf.h>
 
 #include "rnbd-clt.h"
 
diff --git a/drivers/block/rnbd/rnbd-srv.c b/drivers/block/rnbd/rnbd-srv.c
index f6e3a3c4b76c..dd3f033df034 100644
--- a/drivers/block/rnbd/rnbd-srv.c
+++ b/drivers/block/rnbd/rnbd-srv.c
@@ -11,6 +11,10 @@
 
 #include <linux/module.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
+#include <linux/file.h> // for fput()
+#include <linux/kobject.h>
+#include <linux/sprintf.h>
 
 #include "rnbd-srv.h"
 #include "rnbd-srv-trace.h"
diff --git a/drivers/block/sunvdc.c b/drivers/block/sunvdc.c
index 7bf4b48e2282..f06d49db9580 100644
--- a/drivers/block/sunvdc.c
+++ b/drivers/block/sunvdc.c
@@ -6,8 +6,10 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/blk-mq.h>
+#include <linux/completion.h>
 #include <linux/hdreg.h>
 #include <linux/cdrom.h>
 #include <linux/slab.h>
diff --git a/drivers/block/swim.c b/drivers/block/swim.c
index f85b6af414b4..cd6d17e15abb 100644
--- a/drivers/block/swim.c
+++ b/drivers/block/swim.c
@@ -22,6 +22,7 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <asm/mac_via.h>
 
diff --git a/drivers/block/swim3.c b/drivers/block/swim3.c
index c2bc85826358..12f7c1449303 100644
--- a/drivers/block/swim3.c
+++ b/drivers/block/swim3.c
@@ -17,6 +17,7 @@
 #include <linux/stddef.h>
 #include <linux/kernel.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/delay.h>
 #include <linux/fd.h>
diff --git a/drivers/block/ublk_drv.c b/drivers/block/ublk_drv.c
index 1dfb2e77898b..a984e9afe926 100644
--- a/drivers/block/ublk_drv.c
+++ b/drivers/block/ublk_drv.c
@@ -13,13 +13,16 @@
 #include <linux/moduleparam.h>
 #include <linux/sched.h>
 #include <linux/fs.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/pagemap.h>
 #include <linux/file.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/errno.h>
 #include <linux/major.h>
 #include <linux/wait.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/init.h>
 #include <linux/swap.h>
 #include <linux/slab.h>
@@ -43,6 +46,8 @@
 #include <asm/page.h>
 #include <linux/task_work.h>
 #include <linux/namei.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
+#include <linux/kobject.h>
 #include <linux/kref.h>
 #include <uapi/linux/ublk_cmd.h>
 
diff --git a/drivers/block/virtio_blk.c b/drivers/block/virtio_blk.c
index 2bf14a0e2815..6e4063962da6 100644
--- a/drivers/block/virtio_blk.c
+++ b/drivers/block/virtio_blk.c
@@ -3,10 +3,12 @@
 #include <linux/spinlock.h>
 #include <linux/slab.h>
 #include <linux/blkdev.h>
+#include <linux/bvec.h>
 #include <linux/hdreg.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_blk.h>
 #include <linux/scatterlist.h>
diff --git a/drivers/block/xen-blkback/blkback.c b/drivers/block/xen-blkback/blkback.c
index 944576d582fb..932e05e44775 100644
--- a/drivers/block/xen-blkback/blkback.c
+++ b/drivers/block/xen-blkback/blkback.c
@@ -37,11 +37,14 @@
 #define pr_fmt(fmt) "xen-blkback: " fmt
 
 #include <linux/spinlock.h>
+#include <linux/highmem.h>
 #include <linux/kthread.h>
 #include <linux/list.h>
 #include <linux/delay.h>
 #include <linux/freezer.h>
 #include <linux/bitmap.h>
+#include <linux/bio.h>
+#include <linux/completion.h>
 
 #include <xen/events.h>
 #include <xen/page.h>
diff --git a/drivers/block/xen-blkback/xenbus.c b/drivers/block/xen-blkback/xenbus.c
index 0621878940ae..21cffe04fbc8 100644
--- a/drivers/block/xen-blkback/xenbus.c
+++ b/drivers/block/xen-blkback/xenbus.c
@@ -8,12 +8,17 @@
 
 #define pr_fmt(fmt) "xen-blkback: " fmt
 
+#include <linux/file.h> // for fput()
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/pagemap.h>
+#include <linux/sprintf.h>
 #include <xen/events.h>
 #include <xen/grant_table.h>
 #include "common.h"
+#include <linux/completion.h>
 
 /* On the XenBus the max length of 'ring-ref%u'. */
 #define RINGREF_NAME_LEN (20)
diff --git a/drivers/block/xen-blkfront.c b/drivers/block/xen-blkfront.c
index 434fab306777..ef253466812a 100644
--- a/drivers/block/xen-blkfront.c
+++ b/drivers/block/xen-blkfront.c
@@ -40,6 +40,7 @@
 #include <linux/blk-mq.h>
 #include <linux/hdreg.h>
 #include <linux/cdrom.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/major.h>
@@ -47,6 +48,7 @@
 #include <linux/scatterlist.h>
 #include <linux/bitmap.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/sched/mm.h>
 
diff --git a/drivers/block/z2ram.c b/drivers/block/z2ram.c
index 11493167b0a8..1e59d20b2aee 100644
--- a/drivers/block/z2ram.c
+++ b/drivers/block/z2ram.c
@@ -28,6 +28,7 @@
 #define DEVICE_NAME "Z2RAM"
 
 #include <linux/major.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/block/zram/zcomp.c b/drivers/block/zram/zcomp.c
index 55af4efd7983..97477f15fb01 100644
--- a/drivers/block/zram/zcomp.c
+++ b/drivers/block/zram/zcomp.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/err.h>
 #include <linux/slab.h>
@@ -11,6 +12,7 @@
 #include <linux/sched.h>
 #include <linux/cpu.h>
 #include <linux/crypto.h>
+#include <linux/gfp.h> // for free_pages()
 
 #include "zcomp.h"
 
diff --git a/drivers/block/zram/zram_drv.c b/drivers/block/zram/zram_drv.c
index 44e563a3be80..bb687688fdfd 100644
--- a/drivers/block/zram/zram_drv.c
+++ b/drivers/block/zram/zram_drv.c
@@ -22,9 +22,12 @@
 #include <linux/blkdev.h>
 #include <linux/buffer_head.h>
 #include <linux/device.h>
+#include <linux/file.h> // for fput()
 #include <linux/highmem.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/backing-dev.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/vmalloc.h>
 #include <linux/err.h>
diff --git a/drivers/bluetooth/ath3k.c b/drivers/bluetooth/ath3k.c
index 88262d3a9392..4b2232fdd90c 100644
--- a/drivers/bluetooth/ath3k.c
+++ b/drivers/bluetooth/ath3k.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/firmware.h>
diff --git a/drivers/bluetooth/bt3c_cs.c b/drivers/bluetooth/bt3c_cs.c
index 54713833951a..2d8632482250 100644
--- a/drivers/bluetooth/bt3c_cs.c
+++ b/drivers/bluetooth/bt3c_cs.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/kstrtox.h>
 
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/bluetooth/btbcm.c b/drivers/bluetooth/btbcm.c
index 0a5445ac5e1b..4bd66615066f 100644
--- a/drivers/bluetooth/btbcm.c
+++ b/drivers/bluetooth/btbcm.c
@@ -12,6 +12,7 @@
 #include <linux/dmi.h>
 #include <linux/of.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/drivers/bluetooth/btintel.c b/drivers/bluetooth/btintel.c
index e5b043d96207..1bf716b5f2c6 100644
--- a/drivers/bluetooth/btintel.c
+++ b/drivers/bluetooth/btintel.c
@@ -12,6 +12,7 @@
 #include <linux/acpi.h>
 #include <acpi/acpi_bus.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/drivers/bluetooth/btmrvl_debugfs.c b/drivers/bluetooth/btmrvl_debugfs.c
index 32329a2e526f..fbeea50c34ee 100644
--- a/drivers/bluetooth/btmrvl_debugfs.c
+++ b/drivers/bluetooth/btmrvl_debugfs.c
@@ -6,7 +6,9 @@
  **/
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/drivers/bluetooth/btmrvl_sdio.c b/drivers/bluetooth/btmrvl_sdio.c
index d76c799553aa..b1ec00f3fbf1 100644
--- a/drivers/bluetooth/btmrvl_sdio.c
+++ b/drivers/bluetooth/btmrvl_sdio.c
@@ -7,6 +7,7 @@
 
 #include <linux/firmware.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 
 #include <linux/mmc/sdio_ids.h>
diff --git a/drivers/bluetooth/btmtk.c b/drivers/bluetooth/btmtk.c
index aaabb732082c..c25d5ed23b1f 100644
--- a/drivers/bluetooth/btmtk.c
+++ b/drivers/bluetooth/btmtk.c
@@ -4,6 +4,7 @@
  */
 #include <linux/module.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/drivers/bluetooth/btmtksdio.c b/drivers/bluetooth/btmtksdio.c
index ff4868c83cd8..046764dcd5a1 100644
--- a/drivers/bluetooth/btmtksdio.c
+++ b/drivers/bluetooth/btmtksdio.c
@@ -20,6 +20,7 @@
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 
 #include <linux/mmc/host.h>
 #include <linux/mmc/sdio_ids.h>
diff --git a/drivers/bluetooth/btnxpuart.c b/drivers/bluetooth/btnxpuart.c
index 5c89a936e2b7..726fa49d78d9 100644
--- a/drivers/bluetooth/btnxpuart.c
+++ b/drivers/bluetooth/btnxpuart.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 #include <linux/serdev.h>
 #include <linux/of.h>
diff --git a/drivers/bluetooth/btqca.c b/drivers/bluetooth/btqca.c
index b40b32fa7f1c..0e62049bef48 100644
--- a/drivers/bluetooth/btqca.c
+++ b/drivers/bluetooth/btqca.c
@@ -6,6 +6,7 @@
  */
 #include <linux/module.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <net/bluetooth/bluetooth.h>
diff --git a/drivers/bluetooth/btrtl.c b/drivers/bluetooth/btrtl.c
index cc50de69e8dc..61b6eecd2b88 100644
--- a/drivers/bluetooth/btrtl.c
+++ b/drivers/bluetooth/btrtl.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/firmware.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #include <net/bluetooth/bluetooth.h>
diff --git a/drivers/bluetooth/btusb.c b/drivers/bluetooth/btusb.c
index edfb49bbaa28..0d79cc404e1d 100644
--- a/drivers/bluetooth/btusb.c
+++ b/drivers/bluetooth/btusb.c
@@ -7,13 +7,16 @@
  */
 
 #include <linux/dmi.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/quirks.h>
 #include <linux/firmware.h>
 #include <linux/iopoll.h>
 #include <linux/of_device.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/gpio/consumer.h>
 #include <linux/debugfs.h>
diff --git a/drivers/bluetooth/hci_ag6xx.c b/drivers/bluetooth/hci_ag6xx.c
index 2d40302409ff..d34169681b31 100644
--- a/drivers/bluetooth/hci_ag6xx.c
+++ b/drivers/bluetooth/hci_ag6xx.c
@@ -11,6 +11,7 @@
 #include <linux/skbuff.h>
 #include <linux/firmware.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 
 #include <net/bluetooth/bluetooth.h>
diff --git a/drivers/bluetooth/hci_bcm4377.c b/drivers/bluetooth/hci_bcm4377.c
index 9a7243d5db71..a214483da913 100644
--- a/drivers/bluetooth/hci_bcm4377.c
+++ b/drivers/bluetooth/hci_bcm4377.c
@@ -11,11 +11,13 @@
 #include <linux/dma-mapping.h>
 #include <linux/dmi.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/msi.h>
 #include <linux/of.h>
 #include <linux/pci.h>
 #include <linux/printk.h>
+#include <linux/sprintf.h>
 
 #include <asm/unaligned.h>
 
diff --git a/drivers/bluetooth/hci_intel.c b/drivers/bluetooth/hci_intel.c
index 78afb9a348e7..49ef051d3ce3 100644
--- a/drivers/bluetooth/hci_intel.c
+++ b/drivers/bluetooth/hci_intel.c
@@ -11,6 +11,7 @@
 #include <linux/skbuff.h>
 #include <linux/firmware.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/tty.h>
 #include <linux/platform_device.h>
diff --git a/drivers/bluetooth/hci_ll.c b/drivers/bluetooth/hci_ll.c
index 4a0b5c3160c2..efaf44ba7a3a 100644
--- a/drivers/bluetooth/hci_ll.c
+++ b/drivers/bluetooth/hci_ll.c
@@ -16,6 +16,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/sched.h>
diff --git a/drivers/bluetooth/hci_nokia.c b/drivers/bluetooth/hci_nokia.c
index 97da0b2bfd17..6b2871dc69f6 100644
--- a/drivers/bluetooth/hci_nokia.c
+++ b/drivers/bluetooth/hci_nokia.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/errno.h>
 #include <linux/firmware.h>
 #include <linux/gpio/consumer.h>
diff --git a/drivers/bluetooth/hci_qca.c b/drivers/bluetooth/hci_qca.c
index edd2a81b4d5e..09d64a39750b 100644
--- a/drivers/bluetooth/hci_qca.c
+++ b/drivers/bluetooth/hci_qca.c
@@ -33,6 +33,7 @@
 #include <linux/serdev.h>
 #include <linux/mutex.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/drivers/bluetooth/hci_vhci.c b/drivers/bluetooth/hci_vhci.c
index 572d68d52965..2a444cb0fea5 100644
--- a/drivers/bluetooth/hci_vhci.c
+++ b/drivers/bluetooth/hci_vhci.c
@@ -10,6 +10,8 @@
 
 #include <linux/module.h>
 #include <asm/unaligned.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/atomic.h>
 #include <linux/kernel.h>
diff --git a/drivers/bus/brcmstb_gisb.c b/drivers/bus/brcmstb_gisb.c
index 65ae758f3194..3d42f9d1eda0 100644
--- a/drivers/bus/brcmstb_gisb.c
+++ b/drivers/bus/brcmstb_gisb.c
@@ -4,6 +4,8 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/panic_notifier.h>
diff --git a/drivers/bus/bt1-apb.c b/drivers/bus/bt1-apb.c
index e97c1d1c7578..ebfbd688a394 100644
--- a/drivers/bus/bt1-apb.c
+++ b/drivers/bus/bt1-apb.c
@@ -9,7 +9,9 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/atomic.h>
diff --git a/drivers/bus/bt1-axi.c b/drivers/bus/bt1-axi.c
index 4007e7322cf2..7375af69ede4 100644
--- a/drivers/bus/bt1-axi.c
+++ b/drivers/bus/bt1-axi.c
@@ -10,6 +10,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/bitfield.h>
 #include <linux/device.h>
diff --git a/drivers/bus/fsl-mc/fsl-mc-bus.c b/drivers/bus/fsl-mc/fsl-mc-bus.c
index 78b96cd63de9..d4b216d01a73 100644
--- a/drivers/bus/fsl-mc/fsl-mc-bus.c
+++ b/drivers/bus/fsl-mc/fsl-mc-bus.c
@@ -14,6 +14,7 @@
 #include <linux/of_device.h>
 #include <linux/of_address.h>
 #include <linux/ioport.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/limits.h>
@@ -22,6 +23,7 @@
 #include <linux/acpi.h>
 #include <linux/iommu.h>
 #include <linux/dma-map-ops.h>
+#include <linux/sprintf.h>
 
 #include "fsl-mc-private.h"
 
diff --git a/drivers/bus/mhi/common.h b/drivers/bus/mhi/common.h
index dda340aaed95..e82ddfd76167 100644
--- a/drivers/bus/mhi/common.h
+++ b/drivers/bus/mhi/common.h
@@ -8,6 +8,7 @@
 #define _MHI_COMMON_H
 
 #include <linux/bitfield.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mhi.h>
 
 /* MHI registers */
diff --git a/drivers/bus/mhi/ep/main.c b/drivers/bus/mhi/ep/main.c
index 8d7a4102bdb7..e1b63a76968d 100644
--- a/drivers/bus/mhi/ep/main.c
+++ b/drivers/bus/mhi/ep/main.c
@@ -9,6 +9,7 @@
 #include <linux/bitfield.h>
 #include <linux/delay.h>
 #include <linux/dma-direction.h>
+#include <linux/idr.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/irq.h>
diff --git a/drivers/bus/mhi/host/boot.c b/drivers/bus/mhi/host/boot.c
index dedd29ca8db3..c5d0daead95f 100644
--- a/drivers/bus/mhi/host/boot.c
+++ b/drivers/bus/mhi/host/boot.c
@@ -9,6 +9,7 @@
 #include <linux/dma-direction.h>
 #include <linux/dma-mapping.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/interrupt.h>
 #include <linux/list.h>
 #include <linux/mhi.h>
diff --git a/drivers/bus/mhi/host/debugfs.c b/drivers/bus/mhi/host/debugfs.c
index cfec7811dfbb..986f37e9cf9e 100644
--- a/drivers/bus/mhi/host/debugfs.c
+++ b/drivers/bus/mhi/host/debugfs.c
@@ -7,9 +7,11 @@
 #include <linux/debugfs.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/mhi.h>
 #include <linux/module.h>
+#include <linux/kstrtox.h>
 #include "internal.h"
 
 static int mhi_debugfs_states_show(struct seq_file *m, void *d)
diff --git a/drivers/bus/mhi/host/init.c b/drivers/bus/mhi/host/init.c
index 944da46e6f11..7f68aa45c361 100644
--- a/drivers/bus/mhi/host/init.c
+++ b/drivers/bus/mhi/host/init.c
@@ -5,13 +5,17 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/device.h>
 #include <linux/dma-direction.h>
 #include <linux/dma-mapping.h>
 #include <linux/idr.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/list.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kobject.h>
 #include <linux/mhi.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
diff --git a/drivers/bus/mhi/host/main.c b/drivers/bus/mhi/host/main.c
index 2d38f6005da6..b4870c99db54 100644
--- a/drivers/bus/mhi/host/main.c
+++ b/drivers/bus/mhi/host/main.c
@@ -4,11 +4,13 @@
  *
  */
 
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/dma-direction.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/list.h>
 #include <linux/mhi.h>
 #include <linux/module.h>
diff --git a/drivers/bus/mips_cdmm.c b/drivers/bus/mips_cdmm.c
index 554e1992edd4..174b595e07f6 100644
--- a/drivers/bus/mips_cdmm.c
+++ b/drivers/bus/mips_cdmm.c
@@ -21,6 +21,7 @@
 #include <asm/cdmm.h>
 #include <asm/hazards.h>
 #include <asm/mipsregs.h>
+#include <linux/sprintf.h>
 
 /* Access control and status register fields */
 #define CDMM_ACSR_DEVTYPE_SHIFT	24
diff --git a/drivers/bus/moxtet.c b/drivers/bus/moxtet.c
index 641c1a6adc8a..84a3cd7f795c 100644
--- a/drivers/bus/moxtet.c
+++ b/drivers/bus/moxtet.c
@@ -8,6 +8,7 @@
 #include <dt-bindings/bus/moxtet.h>
 #include <linux/bitops.h>
 #include <linux/debugfs.h>
+#include <linux/hex.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/moxtet.h>
@@ -15,6 +16,7 @@
 #include <linux/of_device.h>
 #include <linux/of_irq.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 /*
  * @name:	module name for sysfs
diff --git a/drivers/bus/omap_l3_noc.c b/drivers/bus/omap_l3_noc.c
index eb1ba6319fda..dea3c077e932 100644
--- a/drivers/bus/omap_l3_noc.c
+++ b/drivers/bus/omap_l3_noc.c
@@ -15,6 +15,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "omap_l3_noc.h"
 
diff --git a/drivers/bus/qcom-ssc-block-bus.c b/drivers/bus/qcom-ssc-block-bus.c
index 5931974a21fa..908f80e33ee4 100644
--- a/drivers/bus/qcom-ssc-block-bus.c
+++ b/drivers/bus/qcom-ssc-block-bus.c
@@ -6,6 +6,7 @@
 #include <linux/io.h>
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/pm_clock.h>
diff --git a/drivers/bus/sunxi-rsb.c b/drivers/bus/sunxi-rsb.c
index 1e29ba76615d..fddd833fcc8a 100644
--- a/drivers/bus/sunxi-rsb.c
+++ b/drivers/bus/sunxi-rsb.c
@@ -32,6 +32,7 @@
 
 #include <linux/clk.h>
 #include <linux/clk/clk-conf.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/bus/ti-sysc.c b/drivers/bus/ti-sysc.c
index 245e5e827d0d..1ccc5794c027 100644
--- a/drivers/bus/ti-sysc.c
+++ b/drivers/bus/ti-sysc.c
@@ -17,6 +17,7 @@
 #include <linux/of_address.h>
 #include <linux/of_platform.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/timekeeping.h>
 #include <linux/iopoll.h>
diff --git a/drivers/bus/uniphier-system-bus.c b/drivers/bus/uniphier-system-bus.c
index cb5c89ce7b86..8cffdb089a6b 100644
--- a/drivers/bus/uniphier-system-bus.c
+++ b/drivers/bus/uniphier-system-bus.c
@@ -4,7 +4,9 @@
  */
 
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/log2.h>
+#include <linux/kernel.h> // for upper_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
diff --git a/drivers/cache/sifive_ccache.c b/drivers/cache/sifive_ccache.c
index 89ed6cd6b059..2d0ed4218130 100644
--- a/drivers/cache/sifive_ccache.c
+++ b/drivers/cache/sifive_ccache.c
@@ -11,6 +11,7 @@
 #include <linux/align.h>
 #include <linux/debugfs.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/of_irq.h>
 #include <linux/of_address.h>
 #include <linux/device.h>
@@ -18,6 +19,7 @@
 #include <asm/cacheflush.h>
 #include <asm/cacheinfo.h>
 #include <asm/dma-noncoherent.h>
+#include <linux/sprintf.h>
 #include <soc/sifive/sifive_ccache.h>
 
 #define SIFIVE_CCACHE_DIRECCFIX_LOW 0x100
diff --git a/drivers/cdrom/cdrom.c b/drivers/cdrom/cdrom.c
index a5e07270e0d4..00056e824705 100644
--- a/drivers/cdrom/cdrom.c
+++ b/drivers/cdrom/cdrom.c
@@ -260,6 +260,7 @@
 #include <linux/module.h>
 #include <linux/fs.h>
 #include <linux/major.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
diff --git a/drivers/cdx/cdx.c b/drivers/cdx/cdx.c
index b74d76afccb6..d1ea36e23f2c 100644
--- a/drivers/cdx/cdx.c
+++ b/drivers/cdx/cdx.c
@@ -57,6 +57,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/of_platform.h>
@@ -69,6 +70,7 @@
 #include <linux/dma-map-ops.h>
 #include <linux/debugfs.h>
 #include "cdx.h"
+#include <linux/sprintf.h>
 
 /* Default DMA mask for devices on a CDX bus */
 #define CDX_DEFAULT_DMA_MASK	(~0ULL)
diff --git a/drivers/char/bsr.c b/drivers/char/bsr.c
index 70d31aed9011..4c35262bc794 100644
--- a/drivers/char/bsr.c
+++ b/drivers/char/bsr.c
@@ -17,6 +17,7 @@
 #include <linux/mm.h>
 #include <linux/slab.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 /*
  This driver exposes a special register which can be used for fast
diff --git a/drivers/char/hpet.c b/drivers/char/hpet.c
index 9c90b1d2c036..891775acde4e 100644
--- a/drivers/char/hpet.c
+++ b/drivers/char/hpet.c
@@ -10,6 +10,7 @@
 
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/miscdevice.h>
 #include <linux/major.h>
diff --git a/drivers/char/hw_random/core.c b/drivers/char/hw_random/core.c
index a3bbdd6e60fc..415e09a77022 100644
--- a/drivers/char/hw_random/core.c
+++ b/drivers/char/hw_random/core.c
@@ -10,12 +10,14 @@
  * of the GNU General Public License, incorporated herein by reference.
  */
 
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/fs.h>
 #include <linux/hw_random.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/miscdevice.h>
 #include <linux/module.h>
@@ -23,6 +25,7 @@
 #include <linux/sched.h>
 #include <linux/sched/signal.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/char/hw_random/histb-rng.c b/drivers/char/hw_random/histb-rng.c
index f652e1135e4b..bfbccffc75d0 100644
--- a/drivers/char/hw_random/histb-rng.c
+++ b/drivers/char/hw_random/histb-rng.c
@@ -8,9 +8,11 @@
 #include <linux/io.h>
 #include <linux/iopoll.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define RNG_CTRL		0x0
 #define  RNG_SOURCE			GENMASK(1, 0)
diff --git a/drivers/char/hw_random/imx-rngc.c b/drivers/char/hw_random/imx-rngc.c
index 118a72acb99b..47ca36b963dd 100644
--- a/drivers/char/hw_random/imx-rngc.c
+++ b/drivers/char/hw_random/imx-rngc.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/platform_device.h>
 #include <linux/interrupt.h>
diff --git a/drivers/char/hw_random/virtio-rng.c b/drivers/char/hw_random/virtio-rng.c
index 7a4b45393acb..63d947e9fcd9 100644
--- a/drivers/char/hw_random/virtio-rng.c
+++ b/drivers/char/hw_random/virtio-rng.c
@@ -5,10 +5,13 @@
  */
 
 #include <asm/barrier.h>
+#include <linux/completion.h>
 #include <linux/err.h>
+#include <linux/idr.h> // for DEFINE_IDA
 #include <linux/hw_random.h>
 #include <linux/scatterlist.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_rng.h>
 #include <linux/module.h>
diff --git a/drivers/char/ipmi/ipmi_msghandler.c b/drivers/char/ipmi/ipmi_msghandler.c
index b0eedc4595b3..dee055371123 100644
--- a/drivers/char/ipmi/ipmi_msghandler.c
+++ b/drivers/char/ipmi/ipmi_msghandler.c
@@ -23,6 +23,7 @@
 #include <linux/spinlock.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/idr.h> // for DEFINE_IDA
 #include <linux/ipmi.h>
 #include <linux/ipmi_smi.h>
 #include <linux/notifier.h>
@@ -31,6 +32,7 @@
 #include <linux/rcupdate.h>
 #include <linux/interrupt.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/uuid.h>
 #include <linux/nospec.h>
diff --git a/drivers/char/ipmi/ipmi_si_hotmod.c b/drivers/char/ipmi/ipmi_si_hotmod.c
index 6b12a83ccd4c..b3fc0e54f1e8 100644
--- a/drivers/char/ipmi/ipmi_si_hotmod.c
+++ b/drivers/char/ipmi/ipmi_si_hotmod.c
@@ -13,6 +13,7 @@
 #include <linux/atomic.h>
 #include "ipmi_si.h"
 #include "ipmi_plat_data.h"
+#include <linux/kstrtox.h>
 
 static int hotmod_handler(const char *val, const struct kernel_param *kp);
 
diff --git a/drivers/char/ipmi/ipmi_ssif.c b/drivers/char/ipmi/ipmi_ssif.c
index 1f7600c361e6..a583e1fb9dd2 100644
--- a/drivers/char/ipmi/ipmi_ssif.c
+++ b/drivers/char/ipmi/ipmi_ssif.c
@@ -29,6 +29,7 @@
 #include <linux/modversions.h>
 #endif
 
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/sched.h>
diff --git a/drivers/char/ipmi/ipmi_watchdog.c b/drivers/char/ipmi/ipmi_watchdog.c
index 9a459257489f..80add7dab78c 100644
--- a/drivers/char/ipmi/ipmi_watchdog.c
+++ b/drivers/char/ipmi/ipmi_watchdog.c
@@ -17,6 +17,7 @@
 #include <linux/moduleparam.h>
 #include <linux/ipmi.h>
 #include <linux/ipmi_smi.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/watchdog.h>
 #include <linux/miscdevice.h>
diff --git a/drivers/char/lp.c b/drivers/char/lp.c
index 2f171d14b9b5..7be6b4785330 100644
--- a/drivers/char/lp.c
+++ b/drivers/char/lp.c
@@ -114,6 +114,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 
 #include <linux/errno.h>
 #include <linux/kernel.h>
diff --git a/drivers/char/misc.c b/drivers/char/misc.c
index 541edc26ec89..d141e0d4dc94 100644
--- a/drivers/char/misc.c
+++ b/drivers/char/misc.c
@@ -45,6 +45,7 @@
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
 #include <linux/stat.h>
+#include <linux/idr.h>
 #include <linux/init.h>
 #include <linux/device.h>
 #include <linux/tty.h>
diff --git a/drivers/char/mwave/mwavedd.c b/drivers/char/mwave/mwavedd.c
index 11272d605ecd..9c47032b5839 100644
--- a/drivers/char/mwave/mwavedd.c
+++ b/drivers/char/mwave/mwavedd.c
@@ -64,6 +64,7 @@
 #include "mwavedd.h"
 #include "3780i.h"
 #include "tp3780i.h"
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("3780i Advanced Communications Processor (Mwave) driver");
 MODULE_AUTHOR("Mike Sullivan and Paul Schroeder");
diff --git a/drivers/char/ppdev.c b/drivers/char/ppdev.c
index ee951b265213..bb497c45ea5a 100644
--- a/drivers/char/ppdev.c
+++ b/drivers/char/ppdev.c
@@ -53,6 +53,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/idr.h>
 #include <linux/init.h>
 #include <linux/sched/signal.h>
 #include <linux/device.h>
@@ -64,6 +65,7 @@
 #include <linux/major.h>
 #include <linux/ppdev.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/compat.h>
 
diff --git a/drivers/char/ps3flash.c b/drivers/char/ps3flash.c
index 23871cde41fb..aab7d2c3c7b1 100644
--- a/drivers/char/ps3flash.c
+++ b/drivers/char/ps3flash.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <asm/lv1call.h>
 #include <asm/ps3stor.h>
diff --git a/drivers/char/random.c b/drivers/char/random.c
index 456be28ba67c..1e6c184e0e10 100644
--- a/drivers/char/random.c
+++ b/drivers/char/random.c
@@ -28,7 +28,9 @@
 #include <linux/utsname.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/major.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/fcntl.h>
 #include <linux/slab.h>
diff --git a/drivers/char/tlclk.c b/drivers/char/tlclk.c
index 896a3550fba9..0e10d742deda 100644
--- a/drivers/char/tlclk.c
+++ b/drivers/char/tlclk.c
@@ -38,6 +38,7 @@
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/sysfs.h>
 #include <linux/device.h>
diff --git a/drivers/char/tpm/eventlog/tpm1.c b/drivers/char/tpm/eventlog/tpm1.c
index 12ee42a31c71..80ff000d4722 100644
--- a/drivers/char/tpm/eventlog/tpm1.c
+++ b/drivers/char/tpm/eventlog/tpm1.c
@@ -21,6 +21,7 @@
 #include <linux/security.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tpm_eventlog.h>
 
 #include "../tpm.h"
diff --git a/drivers/char/tpm/tpm-chip.c b/drivers/char/tpm/tpm-chip.c
index 42b1062e33cd..b0c05856c814 100644
--- a/drivers/char/tpm/tpm-chip.c
+++ b/drivers/char/tpm/tpm-chip.c
@@ -20,7 +20,9 @@
 #include <linux/mutex.h>
 #include <linux/spinlock.h>
 #include <linux/freezer.h>
+#include <linux/idr.h>
 #include <linux/major.h>
+#include <linux/sprintf.h>
 #include <linux/tpm_eventlog.h>
 #include <linux/hw_random.h>
 #include "tpm.h"
diff --git a/drivers/char/tpm/tpm-sysfs.c b/drivers/char/tpm/tpm-sysfs.c
index 54c71473aa29..52bb762ffe27 100644
--- a/drivers/char/tpm/tpm-sysfs.c
+++ b/drivers/char/tpm/tpm-sysfs.c
@@ -14,6 +14,7 @@
  */
 #include <linux/device.h>
 #include "tpm.h"
+#include <linux/sprintf.h>
 
 struct tpm_readpubek_out {
 	u8 algorithm[4];
diff --git a/drivers/char/tpm/tpm_ppi.c b/drivers/char/tpm/tpm_ppi.c
index bc7b1b4501b3..b6a9fe41df2b 100644
--- a/drivers/char/tpm/tpm_ppi.c
+++ b/drivers/char/tpm/tpm_ppi.c
@@ -15,6 +15,7 @@
 
 #include <linux/acpi.h>
 #include "tpm.h"
+#include <linux/sprintf.h>
 
 #define TPM_PPI_REVISION_ID_1	1
 #define TPM_PPI_REVISION_ID_2	2
diff --git a/drivers/char/virtio_console.c b/drivers/char/virtio_console.c
index 035f89f1a251..fb84811ef91e 100644
--- a/drivers/char/virtio_console.c
+++ b/drivers/char/virtio_console.c
@@ -5,6 +5,7 @@
  * Copyright (C) 2009, 2010, 2011 Amit Shah <amit.shah@redhat.com>
  */
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/completion.h>
 #include <linux/device.h>
@@ -20,6 +21,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_console.h>
 #include <linux/wait.h>
diff --git a/drivers/char/xillybus/xillybus_class.c b/drivers/char/xillybus/xillybus_class.c
index c92a628e389e..9f84261e735a 100644
--- a/drivers/char/xillybus/xillybus_class.c
+++ b/drivers/char/xillybus/xillybus_class.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/list.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include "xillybus_class.h"
 
diff --git a/drivers/clk/at91/at91rm9200.c b/drivers/clk/at91/at91rm9200.c
index 3f19e737ae4d..0b0dc6222239 100644
--- a/drivers/clk/at91/at91rm9200.c
+++ b/drivers/clk/at91/at91rm9200.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/at91sam9260.c b/drivers/clk/at91/at91sam9260.c
index 0799a13060ea..07f9d824ee3a 100644
--- a/drivers/clk/at91/at91sam9260.c
+++ b/drivers/clk/at91/at91sam9260.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/at91sam9g45.c b/drivers/clk/at91/at91sam9g45.c
index f45a7b80f7d8..33a5a4b71a3d 100644
--- a/drivers/clk/at91/at91sam9g45.c
+++ b/drivers/clk/at91/at91sam9g45.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/at91sam9n12.c b/drivers/clk/at91/at91sam9n12.c
index 751786184ae2..075511e4b72d 100644
--- a/drivers/clk/at91/at91sam9n12.c
+++ b/drivers/clk/at91/at91sam9n12.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/at91sam9rl.c b/drivers/clk/at91/at91sam9rl.c
index 969f809e7d65..9575781330be 100644
--- a/drivers/clk/at91/at91sam9rl.c
+++ b/drivers/clk/at91/at91sam9rl.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/at91sam9x5.c b/drivers/clk/at91/at91sam9x5.c
index 3b801d12fac0..3b280e2bbf61 100644
--- a/drivers/clk/at91/at91sam9x5.c
+++ b/drivers/clk/at91/at91sam9x5.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/clk-main.c b/drivers/clk/at91/clk-main.c
index 9b462becc693..1957c941607d 100644
--- a/drivers/clk/at91/clk-main.c
+++ b/drivers/clk/at91/clk-main.c
@@ -7,6 +7,7 @@
 #include <linux/clkdev.h>
 #include <linux/clk/at91_pmc.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/mfd/syscon.h>
 #include <linux/regmap.h>
 
diff --git a/drivers/clk/at91/sam9x60.c b/drivers/clk/at91/sam9x60.c
index e309cbf3cb9a..6664e8d6b6fe 100644
--- a/drivers/clk/at91/sam9x60.c
+++ b/drivers/clk/at91/sam9x60.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/sama5d2.c b/drivers/clk/at91/sama5d2.c
index c16594fce90c..779c410e0e56 100644
--- a/drivers/clk/at91/sama5d2.c
+++ b/drivers/clk/at91/sama5d2.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/sama5d3.c b/drivers/clk/at91/sama5d3.c
index 522ce6031446..e8c2e97bdcfd 100644
--- a/drivers/clk/at91/sama5d3.c
+++ b/drivers/clk/at91/sama5d3.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/sama5d4.c b/drivers/clk/at91/sama5d4.c
index 160c0bddb6a3..7880939b73cc 100644
--- a/drivers/clk/at91/sama5d4.c
+++ b/drivers/clk/at91/sama5d4.c
@@ -2,6 +2,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/sama7g5.c b/drivers/clk/at91/sama7g5.c
index 91b5c6f14819..c56993a5144d 100644
--- a/drivers/clk/at91/sama7g5.c
+++ b/drivers/clk/at91/sama7g5.c
@@ -11,6 +11,7 @@
 #include <linux/clk-provider.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/at91.h>
 
diff --git a/drivers/clk/at91/sckc.c b/drivers/clk/at91/sckc.c
index 7741d8f3dbee..f5c5633e6ed4 100644
--- a/drivers/clk/at91/sckc.c
+++ b/drivers/clk/at91/sckc.c
@@ -8,6 +8,7 @@
 #include <linux/clk-provider.h>
 #include <linux/clkdev.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/io.h>
diff --git a/drivers/clk/clk-cdce925.c b/drivers/clk/clk-cdce925.c
index b0122093c6ff..d6c7efe75706 100644
--- a/drivers/clk/clk-cdce925.c
+++ b/drivers/clk/clk-cdce925.c
@@ -19,6 +19,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
 #include <linux/gcd.h>
+#include <linux/sprintf.h>
 
 /* Each chip has different number of PLLs and outputs, for example:
  * The CECE925 has 2 PLLs which can be routed through dividers to 5 outputs.
diff --git a/drivers/clk/clk-lmk04832.c b/drivers/clk/clk-lmk04832.c
index 99b271c1278a..a2acaa915946 100644
--- a/drivers/clk/clk-lmk04832.c
+++ b/drivers/clk/clk-lmk04832.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/regmap.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 /* 0x000 - 0x00d System Functions */
 #define LMK04832_REG_RST3W		0x000
diff --git a/drivers/clk/clk-qoriq.c b/drivers/clk/clk-qoriq.c
index 4dcde305944c..37fab3cb61be 100644
--- a/drivers/clk/clk-qoriq.c
+++ b/drivers/clk/clk-qoriq.c
@@ -20,6 +20,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define PLL_DIV1	0
 #define PLL_DIV2	1
diff --git a/drivers/clk/clk-renesas-pcie.c b/drivers/clk/clk-renesas-pcie.c
index 53e21ac302e6..f1d5a0e85a01 100644
--- a/drivers/clk/clk-renesas-pcie.c
+++ b/drivers/clk/clk-renesas-pcie.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #define RS9_REG_OE				0x0
 #define RS9_REG_SS				0x1
diff --git a/drivers/clk/clk-si521xx.c b/drivers/clk/clk-si521xx.c
index 4f7b74f889f1..f6160f206a1a 100644
--- a/drivers/clk/clk-si521xx.c
+++ b/drivers/clk/clk-si521xx.c
@@ -20,6 +20,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* OE1 and OE2 register */
 #define SI521XX_REG_OE(n)			(((n) & 0x1) + 1)
diff --git a/drivers/clk/clk-si5341.c b/drivers/clk/clk-si5341.c
index 6e8dd7387cfd..987f4583d4b1 100644
--- a/drivers/clk/clk-si5341.c
+++ b/drivers/clk/clk-si5341.c
@@ -15,6 +15,7 @@
 #include <linux/clk-provider.h>
 #include <linux/delay.h>
 #include <linux/gcd.h>
+#include <linux/kstrtox.h>
 #include <linux/math64.h>
 #include <linux/i2c.h>
 #include <linux/module.h>
@@ -22,6 +23,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #define SI5341_NUM_INPUTS 4
 
diff --git a/drivers/clk/clk-sp7021.c b/drivers/clk/clk-sp7021.c
index 7cb7d501d7a6..78e196002133 100644
--- a/drivers/clk/clk-sp7021.c
+++ b/drivers/clk/clk-sp7021.c
@@ -11,6 +11,7 @@
 #include <linux/io.h>
 #include <linux/err.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/sunplus,sp7021-clkc.h>
 
diff --git a/drivers/clk/clk-versaclock5.c b/drivers/clk/clk-versaclock5.c
index 6d31cd54d7cf..64acebe921a6 100644
--- a/drivers/clk/clk-versaclock5.c
+++ b/drivers/clk/clk-versaclock5.c
@@ -22,6 +22,7 @@
 #include <linux/property.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/versaclock.h>
 
diff --git a/drivers/clk/clk-versaclock7.c b/drivers/clk/clk-versaclock7.c
index f323263e32c3..a56101ceefc0 100644
--- a/drivers/clk/clk-versaclock7.c
+++ b/drivers/clk/clk-versaclock7.c
@@ -16,6 +16,7 @@
 #include <linux/of.h>
 #include <linux/property.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/swab.h>
 
 /*
diff --git a/drivers/clk/clk_test.c b/drivers/clk/clk_test.c
index 39e2b5ff4f51..7e82134758b2 100644
--- a/drivers/clk/clk_test.c
+++ b/drivers/clk/clk_test.c
@@ -4,6 +4,7 @@
  */
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
+#include <linux/sched.h> // for TASK_INTERRUPTIBLE
 
 /* Needed for clk_hw_get_clk() */
 #include "clk.h"
diff --git a/drivers/clk/davinci/pll.c b/drivers/clk/davinci/pll.c
index 5bbbb3a66477..53091badb6a5 100644
--- a/drivers/clk/davinci/pll.c
+++ b/drivers/clk/davinci/pll.c
@@ -24,6 +24,7 @@
 #include <linux/property.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "pll.h"
diff --git a/drivers/clk/imx/clk.c b/drivers/clk/imx/clk.c
index e35496af5ceb..443acd962b75 100644
--- a/drivers/clk/imx/clk.c
+++ b/drivers/clk/imx/clk.c
@@ -8,6 +8,7 @@
 #include <linux/of.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include "clk.h"
 
 #define CCM_CCDR			0x4
diff --git a/drivers/clk/keystone/sci-clk.c b/drivers/clk/keystone/sci-clk.c
index 35fe197dd303..402d4d28d6de 100644
--- a/drivers/clk/keystone/sci-clk.c
+++ b/drivers/clk/keystone/sci-clk.c
@@ -15,6 +15,7 @@
 #include <linux/soc/ti/ti_sci_protocol.h>
 #include <linux/bsearch.h>
 #include <linux/list_sort.h>
+#include <linux/sprintf.h>
 
 #define SCI_CLK_SSC_ENABLE		BIT(0)
 #define SCI_CLK_ALLOW_FREQ_CHANGE	BIT(1)
diff --git a/drivers/clk/keystone/syscon-clk.c b/drivers/clk/keystone/syscon-clk.c
index 935d9a2d8c2b..0972d5dc9e9b 100644
--- a/drivers/clk/keystone/syscon-clk.c
+++ b/drivers/clk/keystone/syscon-clk.c
@@ -10,6 +10,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct ti_syscon_gate_clk_priv {
 	struct clk_hw hw;
diff --git a/drivers/clk/mvebu/clk-cpu.c b/drivers/clk/mvebu/clk-cpu.c
index db2b38c21304..731437085ac0 100644
--- a/drivers/clk/mvebu/clk-cpu.c
+++ b/drivers/clk/mvebu/clk-cpu.c
@@ -17,6 +17,7 @@
 #include <linux/delay.h>
 #include <linux/mvebu-pmsu.h>
 #include <asm/smp_plat.h>
+#include <linux/sprintf.h>
 
 #define SYS_CTRL_CLK_DIVIDER_CTRL_OFFSET               0x0
 #define   SYS_CTRL_CLK_DIVIDER_CTRL_RESET_ALL          0xff
diff --git a/drivers/clk/qcom/clk-krait.h b/drivers/clk/qcom/clk-krait.h
index f930538c539e..37939d359923 100644
--- a/drivers/clk/qcom/clk-krait.h
+++ b/drivers/clk/qcom/clk-krait.h
@@ -4,6 +4,8 @@
 #define __QCOM_CLK_KRAIT_H
 
 #include <linux/clk-provider.h>
+#include <linux/notifier.h>
+#include <linux/types.h>
 
 struct krait_mux_clk {
 	unsigned int	*parent_map;
diff --git a/drivers/clk/qcom/clk-regmap-mux-div.h b/drivers/clk/qcom/clk-regmap-mux-div.h
index 4df6c8d24c24..49417def20de 100644
--- a/drivers/clk/qcom/clk-regmap-mux-div.h
+++ b/drivers/clk/qcom/clk-regmap-mux-div.h
@@ -8,6 +8,7 @@
 #define __QCOM_CLK_REGMAP_MUX_DIV_H__
 
 #include <linux/clk-provider.h>
+#include <linux/notifier.h>
 #include "clk-regmap.h"
 
 /**
diff --git a/drivers/clk/qcom/clk-spmi-pmic-div.c b/drivers/clk/qcom/clk-spmi-pmic-div.c
index f394031eb0e5..7f01f62170b9 100644
--- a/drivers/clk/qcom/clk-spmi-pmic-div.c
+++ b/drivers/clk/qcom/clk-spmi-pmic-div.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #define REG_DIV_CTL1			0x43
diff --git a/drivers/clk/qcom/gdsc.c b/drivers/clk/qcom/gdsc.c
index e7a4068b9f39..463478cd0a79 100644
--- a/drivers/clk/qcom/gdsc.c
+++ b/drivers/clk/qcom/gdsc.c
@@ -5,6 +5,7 @@
 
 #include <linux/bitops.h>
 #include <linux/delay.h>
+#include <linux/device.h>
 #include <linux/err.h>
 #include <linux/export.h>
 #include <linux/jiffies.h>
diff --git a/drivers/clk/qcom/krait-cc.c b/drivers/clk/qcom/krait-cc.c
index ae325f4e1047..f8595e6bad9d 100644
--- a/drivers/clk/qcom/krait-cc.c
+++ b/drivers/clk/qcom/krait-cc.c
@@ -12,6 +12,7 @@
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "clk-krait.h"
 
diff --git a/drivers/clk/rockchip/clk-pll.c b/drivers/clk/rockchip/clk-pll.c
index 2d42eb628926..58b0ea8a41e6 100644
--- a/drivers/clk/rockchip/clk-pll.c
+++ b/drivers/clk/rockchip/clk-pll.c
@@ -9,6 +9,7 @@
 
 #include <asm/div64.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/io.h>
 #include <linux/delay.h>
 #include <linux/clk-provider.h>
diff --git a/drivers/clk/samsung/clk-cpu.h b/drivers/clk/samsung/clk-cpu.h
index 0164bd9ad021..39ddf58a0172 100644
--- a/drivers/clk/samsung/clk-cpu.h
+++ b/drivers/clk/samsung/clk-cpu.h
@@ -10,6 +10,8 @@
 
 #include "clk.h"
 
+#include <linux/notifier.h>
+
 /**
  * struct exynos_cpuclk_cfg_data - config data to setup cpu clocks
  * @prate: frequency of the primary parent clock (in KHz)
diff --git a/drivers/clk/samsung/clk-exynos-clkout.c b/drivers/clk/samsung/clk-exynos-clkout.c
index 3484e6cc80ad..6699384aa85a 100644
--- a/drivers/clk/samsung/clk-exynos-clkout.c
+++ b/drivers/clk/samsung/clk-exynos-clkout.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #define EXYNOS_CLKOUT_NR_CLKS		1
 #define EXYNOS_CLKOUT_PARENTS		32
diff --git a/drivers/clk/st/clkgen-fsyn.c b/drivers/clk/st/clkgen-fsyn.c
index 40df1db102a7..20b20e697352 100644
--- a/drivers/clk/st/clkgen-fsyn.c
+++ b/drivers/clk/st/clkgen-fsyn.c
@@ -13,6 +13,7 @@
 #include <linux/of_address.h>
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
+#include <linux/sprintf.h>
 
 #include "clkgen.h"
 
diff --git a/drivers/clk/sunxi-ng/ccu_common.h b/drivers/clk/sunxi-ng/ccu_common.h
index 942a72c09437..2edb4a23283c 100644
--- a/drivers/clk/sunxi-ng/ccu_common.h
+++ b/drivers/clk/sunxi-ng/ccu_common.h
@@ -8,6 +8,7 @@
 
 #include <linux/compiler.h>
 #include <linux/clk-provider.h>
+#include <linux/notifier.h>
 
 #define CCU_FEATURE_FRACTIONAL		BIT(0)
 #define CCU_FEATURE_VARIABLE_PREDIV	BIT(1)
diff --git a/drivers/clk/tegra/clk.c b/drivers/clk/tegra/clk.c
index 19037346f522..7775bdba2791 100644
--- a/drivers/clk/tegra/clk.c
+++ b/drivers/clk/tegra/clk.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset-controller.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include <soc/tegra/fuse.h>
diff --git a/drivers/clk/ti/adpll.c b/drivers/clk/ti/adpll.c
index 6121020b4b38..a1ec50183294 100644
--- a/drivers/clk/ti/adpll.c
+++ b/drivers/clk/ti/adpll.c
@@ -11,6 +11,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #define ADPLL_PLLSS_MMR_LOCK_OFFSET	0x00	/* Managed by MPPULL */
diff --git a/drivers/clk/ti/clk-dra7-atl.c b/drivers/clk/ti/clk-dra7-atl.c
index d964e3affd42..c19d4f0abd1c 100644
--- a/drivers/clk/ti/clk-dra7-atl.c
+++ b/drivers/clk/ti/clk-dra7-atl.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/clk/ti.h>
+#include <linux/sprintf.h>
 
 #include "clock.h"
 
diff --git a/drivers/clk/ti/clk.c b/drivers/clk/ti/clk.c
index 1862958ab412..6c8f5f4669b0 100644
--- a/drivers/clk/ti/clk.c
+++ b/drivers/clk/ti/clk.c
@@ -12,6 +12,7 @@
 #include <linux/clkdev.h>
 #include <linux/clk/ti.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/list.h>
diff --git a/drivers/clk/ti/clkctrl.c b/drivers/clk/ti/clkctrl.c
index 607e34d8e289..ecf65b1da86c 100644
--- a/drivers/clk/ti/clkctrl.c
+++ b/drivers/clk/ti/clkctrl.c
@@ -13,6 +13,7 @@
 #include <linux/of_address.h>
 #include <linux/clk/ti.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/timekeeping.h>
 #include "clock.h"
diff --git a/drivers/clk/versatile/clk-icst.c b/drivers/clk/versatile/clk-icst.c
index d5cb372f0901..da98194bef46 100644
--- a/drivers/clk/versatile/clk-icst.c
+++ b/drivers/clk/versatile/clk-icst.c
@@ -18,6 +18,7 @@
 #include <linux/io.h>
 #include <linux/regmap.h>
 #include <linux/mfd/syscon.h>
+#include <linux/sprintf.h>
 
 #include "icst.h"
 #include "clk-icst.h"
diff --git a/drivers/clk/versatile/clk-sp810.c b/drivers/clk/versatile/clk-sp810.c
index 45adac1b4630..f96d0b3c5d47 100644
--- a/drivers/clk/versatile/clk-sp810.c
+++ b/drivers/clk/versatile/clk-sp810.c
@@ -6,6 +6,7 @@
 
 #include <linux/amba/sp810.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
 #include <linux/err.h>
diff --git a/drivers/clk/x86/clk-pmc-atom.c b/drivers/clk/x86/clk-pmc-atom.c
index 2974dd0ec6f4..a9c3ee209488 100644
--- a/drivers/clk/x86/clk-pmc-atom.c
+++ b/drivers/clk/x86/clk-pmc-atom.c
@@ -13,6 +13,7 @@
 #include <linux/platform_data/x86/clk-pmc-atom.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define PLT_CLK_NAME_BASE	"pmc_plt_clk"
 
diff --git a/drivers/clk/zynq/clkc.c b/drivers/clk/zynq/clkc.c
index 7bdeaff2bfd6..32f26ef431ff 100644
--- a/drivers/clk/zynq/clkc.c
+++ b/drivers/clk/zynq/clkc.c
@@ -13,6 +13,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/io.h>
 
diff --git a/drivers/clk/zynqmp/clkc.c b/drivers/clk/zynqmp/clkc.c
index a91d98e238c2..65c8f775a9aa 100644
--- a/drivers/clk/zynqmp/clkc.c
+++ b/drivers/clk/zynqmp/clkc.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include "clk-zynqmp.h"
diff --git a/drivers/clocksource/acpi_pm.c b/drivers/clocksource/acpi_pm.c
index 82338773602c..5a9664ef0851 100644
--- a/drivers/clocksource/acpi_pm.c
+++ b/drivers/clocksource/acpi_pm.c
@@ -17,6 +17,7 @@
 
 #include <linux/acpi_pmtmr.h>
 #include <linux/clocksource.h>
+#include <linux/kstrtox.h>
 #include <linux/timex.h>
 #include <linux/errno.h>
 #include <linux/init.h>
diff --git a/drivers/clocksource/arm_arch_timer.c b/drivers/clocksource/arm_arch_timer.c
index e054de92de91..8b7b272ca5d3 100644
--- a/drivers/clocksource/arm_arch_timer.c
+++ b/drivers/clocksource/arm_arch_timer.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/smp.h>
 #include <linux/cpu.h>
 #include <linux/cpu_pm.h>
diff --git a/drivers/clocksource/arm_global_timer.c b/drivers/clocksource/arm_global_timer.c
index 44a61dc6f932..243029619feb 100644
--- a/drivers/clocksource/arm_global_timer.c
+++ b/drivers/clocksource/arm_global_timer.c
@@ -16,6 +16,7 @@
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of.h>
 #include <linux/of_irq.h>
 #include <linux/of_address.h>
diff --git a/drivers/clocksource/exynos_mct.c b/drivers/clocksource/exynos_mct.c
index ef8cb1b71be4..ba7c1728171a 100644
--- a/drivers/clocksource/exynos_mct.c
+++ b/drivers/clocksource/exynos_mct.c
@@ -20,6 +20,7 @@
 #include <linux/of_address.h>
 #include <linux/clocksource.h>
 #include <linux/sched_clock.h>
+#include <linux/sprintf.h>
 
 #define EXYNOS4_MCTREG(x)		(x)
 #define EXYNOS4_MCT_G_CNT_L		EXYNOS4_MCTREG(0x100)
diff --git a/drivers/clocksource/ingenic-sysost.c b/drivers/clocksource/ingenic-sysost.c
index cb6fc2f152d4..0e1e6f28e436 100644
--- a/drivers/clocksource/ingenic-sysost.c
+++ b/drivers/clocksource/ingenic-sysost.c
@@ -16,6 +16,7 @@
 #include <linux/of_irq.h>
 #include <linux/sched_clock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/syscore_ops.h>
 
 #include <dt-bindings/clock/ingenic,sysost.h>
diff --git a/drivers/clocksource/ingenic-timer.c b/drivers/clocksource/ingenic-timer.c
index 154ee5f7954a..1e283666ba9d 100644
--- a/drivers/clocksource/ingenic-timer.c
+++ b/drivers/clocksource/ingenic-timer.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/sched_clock.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/clock/ingenic,tcu.h>
 
diff --git a/drivers/clocksource/sh_mtu2.c b/drivers/clocksource/sh_mtu2.c
index 34872df5458a..c20952a60358 100644
--- a/drivers/clocksource/sh_mtu2.c
+++ b/drivers/clocksource/sh_mtu2.c
@@ -22,6 +22,7 @@
 #include <linux/sh_timer.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_SUPERH
 #include <asm/platform_early.h>
diff --git a/drivers/clocksource/timer-goldfish.c b/drivers/clocksource/timer-goldfish.c
index 0512d5eabc82..bc7e04890184 100644
--- a/drivers/clocksource/timer-goldfish.c
+++ b/drivers/clocksource/timer-goldfish.c
@@ -4,6 +4,7 @@
 #include <linux/ioport.h>
 #include <linux/clocksource.h>
 #include <linux/clockchips.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/goldfish.h>
diff --git a/drivers/clocksource/timer-zevio.c b/drivers/clocksource/timer-zevio.c
index ecaa3568841c..1af16efc1dce 100644
--- a/drivers/clocksource/timer-zevio.c
+++ b/drivers/clocksource/timer-zevio.c
@@ -15,6 +15,7 @@
 #include <linux/cpumask.h>
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define IO_CURRENT_VAL	0x00
 #define IO_DIVIDER	0x04
diff --git a/drivers/comedi/comedi_fops.c b/drivers/comedi/comedi_fops.c
index 1b481731df96..8e0ab06e3494 100644
--- a/drivers/comedi/comedi_fops.c
+++ b/drivers/comedi/comedi_fops.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/signal.h>
 #include <linux/fcntl.h>
 #include <linux/delay.h>
diff --git a/drivers/comedi/drivers/comedi_bond.c b/drivers/comedi/drivers/comedi_bond.c
index 78c39fa84177..15a4b3d7f778 100644
--- a/drivers/comedi/drivers/comedi_bond.c
+++ b/drivers/comedi/drivers/comedi_bond.c
@@ -38,6 +38,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/comedi.h>
diff --git a/drivers/comedi/kcomedilib/kcomedilib_main.c b/drivers/comedi/kcomedilib/kcomedilib_main.c
index 43fbe1a63b14..96c6f4d22e63 100644
--- a/drivers/comedi/kcomedilib/kcomedilib_main.c
+++ b/drivers/comedi/kcomedilib/kcomedilib_main.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/kstrtox.h>
 
 #include <linux/errno.h>
 #include <linux/kernel.h>
diff --git a/drivers/connector/cn_queue.c b/drivers/connector/cn_queue.c
index 996f025eb63c..69285dc49b9f 100644
--- a/drivers/connector/cn_queue.c
+++ b/drivers/connector/cn_queue.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
diff --git a/drivers/counter/microchip-tcb-capture.c b/drivers/counter/microchip-tcb-capture.c
index b3e615cbd2ca..58dfadf921ab 100644
--- a/drivers/counter/microchip-tcb-capture.c
+++ b/drivers/counter/microchip-tcb-capture.c
@@ -12,6 +12,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <soc/at91/atmel_tcb.h>
 
 #define ATMEL_TC_CMR_MASK	(ATMEL_TC_LDRA_RISING | ATMEL_TC_LDRB_FALLING | \
diff --git a/drivers/cpufreq/acpi-cpufreq.c b/drivers/cpufreq/acpi-cpufreq.c
index 37f1cdf46d29..a1580a23856f 100644
--- a/drivers/cpufreq/acpi-cpufreq.c
+++ b/drivers/cpufreq/acpi-cpufreq.c
@@ -11,6 +11,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/smp.h>
@@ -19,6 +20,7 @@
 #include <linux/compiler.h>
 #include <linux/dmi.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/platform_device.h>
 
diff --git a/drivers/cpufreq/amd-pstate.c b/drivers/cpufreq/amd-pstate.c
index 08e112444c27..28fc12d59f20 100644
--- a/drivers/cpufreq/amd-pstate.c
+++ b/drivers/cpufreq/amd-pstate.c
@@ -34,6 +34,7 @@
 #include <linux/acpi.h>
 #include <linux/io.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/static_call.h>
 #include <linux/amd-pstate.h>
diff --git a/drivers/cpufreq/apple-soc-cpufreq.c b/drivers/cpufreq/apple-soc-cpufreq.c
index 021f423705e1..f1bb29fc6182 100644
--- a/drivers/cpufreq/apple-soc-cpufreq.c
+++ b/drivers/cpufreq/apple-soc-cpufreq.c
@@ -13,6 +13,7 @@
 #include <linux/cpufreq.h>
 #include <linux/cpumask.h>
 #include <linux/delay.h>
+#include <linux/device.h>
 #include <linux/err.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
diff --git a/drivers/cpufreq/brcmstb-avs-cpufreq.c b/drivers/cpufreq/brcmstb-avs-cpufreq.c
index 1a1857b0a6f4..109b87b55800 100644
--- a/drivers/cpufreq/brcmstb-avs-cpufreq.c
+++ b/drivers/cpufreq/brcmstb-avs-cpufreq.c
@@ -41,6 +41,7 @@
  * way that is expected by existing tools.
  */
 
+#include <linux/completion.h>
 #include <linux/cpufreq.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
@@ -49,6 +50,7 @@
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
 #include <linux/semaphore.h>
+#include <linux/sprintf.h>
 
 /* Max number of arguments AVS calls take */
 #define AVS_MAX_CMD_ARGS	4
diff --git a/drivers/cpufreq/cpufreq.c b/drivers/cpufreq/cpufreq.c
index 44db4f59c4cc..2bbeac34e9d7 100644
--- a/drivers/cpufreq/cpufreq.c
+++ b/drivers/cpufreq/cpufreq.c
@@ -21,15 +21,18 @@
 #include <linux/device.h>
 #include <linux/init.h>
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/pm_qos.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/syscore_ops.h>
 #include <linux/tick.h>
 #include <linux/units.h>
 #include <trace/events/power.h>
+#include <linux/completion.h>
 
 static LIST_HEAD(cpufreq_policy_list);
 
diff --git a/drivers/cpufreq/cpufreq_conservative.c b/drivers/cpufreq/cpufreq_conservative.c
index 56500b25d77c..c84cea7a0eb6 100644
--- a/drivers/cpufreq/cpufreq_conservative.c
+++ b/drivers/cpufreq/cpufreq_conservative.c
@@ -10,6 +10,7 @@
 
 #include <linux/slab.h>
 #include "cpufreq_governor.h"
+#include <linux/sprintf.h>
 
 struct cs_policy_dbs_info {
 	struct policy_dbs_info policy_dbs;
diff --git a/drivers/cpufreq/cpufreq_governor.c b/drivers/cpufreq/cpufreq_governor.c
index af44ee6a6430..aad3cb80536c 100644
--- a/drivers/cpufreq/cpufreq_governor.c
+++ b/drivers/cpufreq/cpufreq_governor.c
@@ -16,6 +16,7 @@
 #include <linux/export.h>
 #include <linux/kernel_stat.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "cpufreq_governor.h"
 
diff --git a/drivers/cpufreq/cpufreq_governor.h b/drivers/cpufreq/cpufreq_governor.h
index 168c23fd7fca..bc64e391e44a 100644
--- a/drivers/cpufreq/cpufreq_governor.h
+++ b/drivers/cpufreq/cpufreq_governor.h
@@ -18,6 +18,8 @@
 #include <linux/irq_work.h>
 #include <linux/cpufreq.h>
 #include <linux/sched/cpufreq.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <linux/kernel_stat.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/cpufreq/cpufreq_ondemand.c b/drivers/cpufreq/cpufreq_ondemand.c
index c52d19d67557..eaf3ba37f855 100644
--- a/drivers/cpufreq/cpufreq_ondemand.c
+++ b/drivers/cpufreq/cpufreq_ondemand.c
@@ -12,6 +12,7 @@
 #include <linux/cpu.h>
 #include <linux/percpu-defs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tick.h>
 #include <linux/sched/cpufreq.h>
 
diff --git a/drivers/cpufreq/cpufreq_stats.c b/drivers/cpufreq/cpufreq_stats.c
index 40a9ff18da06..3b36defd3e0c 100644
--- a/drivers/cpufreq/cpufreq_stats.c
+++ b/drivers/cpufreq/cpufreq_stats.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/sched/clock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct cpufreq_stats {
 	unsigned int total_trans;
diff --git a/drivers/cpufreq/cpufreq_userspace.c b/drivers/cpufreq/cpufreq_userspace.c
index 2c42fee76daa..1d09ef3b1302 100644
--- a/drivers/cpufreq/cpufreq_userspace.c
+++ b/drivers/cpufreq/cpufreq_userspace.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct userspace_policy {
 	unsigned int is_managed;
diff --git a/drivers/cpufreq/elanfreq.c b/drivers/cpufreq/elanfreq.c
index 4ce5eb35dc46..c8505487b8e7 100644
--- a/drivers/cpufreq/elanfreq.c
+++ b/drivers/cpufreq/elanfreq.c
@@ -14,6 +14,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 
diff --git a/drivers/cpufreq/freq_table.c b/drivers/cpufreq/freq_table.c
index c4d4643b6ca6..76e2193456cd 100644
--- a/drivers/cpufreq/freq_table.c
+++ b/drivers/cpufreq/freq_table.c
@@ -9,6 +9,8 @@
 
 #include <linux/cpufreq.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 /*********************************************************************
  *                     FREQUENCY TABLE HELPERS                       *
diff --git a/drivers/cpufreq/intel_pstate.c b/drivers/cpufreq/intel_pstate.c
index ca94e60e705a..9419bd630f8b 100644
--- a/drivers/cpufreq/intel_pstate.c
+++ b/drivers/cpufreq/intel_pstate.c
@@ -10,9 +10,11 @@
 
 #include <linux/kernel.h>
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/ktime.h>
 #include <linux/hrtimer.h>
+#include <linux/sprintf.h>
 #include <linux/tick.h>
 #include <linux/slab.h>
 #include <linux/sched/cpufreq.h>
diff --git a/drivers/cpufreq/longhaul.c b/drivers/cpufreq/longhaul.c
index 4c57c6725c13..55664dec8ad7 100644
--- a/drivers/cpufreq/longhaul.c
+++ b/drivers/cpufreq/longhaul.c
@@ -30,6 +30,7 @@
 #include <linux/cpufreq.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/timex.h>
diff --git a/drivers/cpufreq/powernv-cpufreq.c b/drivers/cpufreq/powernv-cpufreq.c
index fddbd1ea1635..a126de747192 100644
--- a/drivers/cpufreq/powernv-cpufreq.c
+++ b/drivers/cpufreq/powernv-cpufreq.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt)	"powernv-cpufreq: " fmt
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/cpumask.h>
 #include <linux/module.h>
diff --git a/drivers/cpufreq/qcom-cpufreq-hw.c b/drivers/cpufreq/qcom-cpufreq-hw.c
index 70b0f21968a0..1b2184436bf6 100644
--- a/drivers/cpufreq/qcom-cpufreq-hw.c
+++ b/drivers/cpufreq/qcom-cpufreq-hw.c
@@ -16,6 +16,7 @@
 #include <linux/pm_opp.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 
 #define LUT_MAX_ENTRIES			40U
diff --git a/drivers/cpufreq/qcom-cpufreq-nvmem.c b/drivers/cpufreq/qcom-cpufreq-nvmem.c
index ea05d9d67490..d4e000c42fa3 100644
--- a/drivers/cpufreq/qcom-cpufreq-nvmem.c
+++ b/drivers/cpufreq/qcom-cpufreq-nvmem.c
@@ -29,6 +29,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/soc/qcom/smem.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/arm/qcom,ids.h>
 
diff --git a/drivers/cpufreq/sti-cpufreq.c b/drivers/cpufreq/sti-cpufreq.c
index 9c542e723a15..ae43aad4a23a 100644
--- a/drivers/cpufreq/sti-cpufreq.c
+++ b/drivers/cpufreq/sti-cpufreq.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_opp.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #define VERSION_ELEMENTS	3
 #define MAX_PCODE_NAME_LEN	7
diff --git a/drivers/cpufreq/sun50i-cpufreq-nvmem.c b/drivers/cpufreq/sun50i-cpufreq-nvmem.c
index 32a9c88f8ff6..a73fea456e0c 100644
--- a/drivers/cpufreq/sun50i-cpufreq-nvmem.c
+++ b/drivers/cpufreq/sun50i-cpufreq-nvmem.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_opp.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define MAX_NAME_LEN	7
 
diff --git a/drivers/cpufreq/tegra194-cpufreq.c b/drivers/cpufreq/tegra194-cpufreq.c
index 59865ea455a8..0a29eb78e6fb 100644
--- a/drivers/cpufreq/tegra194-cpufreq.c
+++ b/drivers/cpufreq/tegra194-cpufreq.c
@@ -6,6 +6,7 @@
 #include <linux/cpu.h>
 #include <linux/cpufreq.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
diff --git a/drivers/cpuidle/cpuidle-psci-domain.c b/drivers/cpuidle/cpuidle-psci-domain.c
index b88af1262f1a..e59c5f388ddd 100644
--- a/drivers/cpuidle/cpuidle-psci-domain.c
+++ b/drivers/cpuidle/cpuidle-psci-domain.c
@@ -12,6 +12,7 @@
 #include <linux/cpu.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_domain.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/cpuidle/dt_idle_genpd.c b/drivers/cpuidle/dt_idle_genpd.c
index 1af63c189039..cf9815804585 100644
--- a/drivers/cpuidle/dt_idle_genpd.c
+++ b/drivers/cpuidle/dt_idle_genpd.c
@@ -14,9 +14,11 @@
 #include <linux/cpu.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/of.h>
 #include <linux/pm_domain.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include "dt_idle_genpd.h"
diff --git a/drivers/cpuidle/poll_state.c b/drivers/cpuidle/poll_state.c
index 9b6d90a72601..9a0e5501eee2 100644
--- a/drivers/cpuidle/poll_state.c
+++ b/drivers/cpuidle/poll_state.c
@@ -7,6 +7,7 @@
 #include <linux/sched.h>
 #include <linux/sched/clock.h>
 #include <linux/sched/idle.h>
+#include <linux/sprintf.h>
 
 #define POLL_IDLE_RELAX_COUNT	200
 
diff --git a/drivers/cpuidle/sysfs.c b/drivers/cpuidle/sysfs.c
index d6f5da61cb7d..9c9217c7fd97 100644
--- a/drivers/cpuidle/sysfs.c
+++ b/drivers/cpuidle/sysfs.c
@@ -8,6 +8,8 @@
 
 #include <linux/kernel.h>
 #include <linux/cpuidle.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 #include <linux/cpu.h>
diff --git a/drivers/crypto/allwinner/sun8i-ce/sun8i-ce-core.c b/drivers/crypto/allwinner/sun8i-ce/sun8i-ce-core.c
index 0408b2d5d533..87eb130c98f9 100644
--- a/drivers/crypto/allwinner/sun8i-ce/sun8i-ce-core.c
+++ b/drivers/crypto/allwinner/sun8i-ce/sun8i-ce-core.c
@@ -15,6 +15,7 @@
 #include <crypto/internal/rng.h>
 #include <crypto/internal/skcipher.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
diff --git a/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-core.c b/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-core.c
index 0dbc0220146c..28bb0567242d 100644
--- a/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-core.c
+++ b/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-core.c
@@ -14,6 +14,7 @@
 #include <crypto/internal/rng.h>
 #include <crypto/internal/skcipher.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
diff --git a/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-hash.c b/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-hash.c
index 753f67a36dc5..fdd24a79ddab 100644
--- a/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-hash.c
+++ b/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-hash.c
@@ -17,6 +17,7 @@
 #include <crypto/sha1.h>
 #include <crypto/sha2.h>
 #include <linux/bottom_half.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
 #include <linux/kernel.h>
diff --git a/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-prng.c b/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-prng.c
index a923cfc6553f..ea97aa333628 100644
--- a/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-prng.c
+++ b/drivers/crypto/allwinner/sun8i-ss/sun8i-ss-prng.c
@@ -10,6 +10,7 @@
  * You could find a link for the datasheet in Documentation/arch/arm/sunxi.rst
  */
 #include "sun8i-ss.h"
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
diff --git a/drivers/crypto/amlogic/amlogic-gxl-cipher.c b/drivers/crypto/amlogic/amlogic-gxl-cipher.c
index 29048da6f50a..0e49657e545e 100644
--- a/drivers/crypto/amlogic/amlogic-gxl-cipher.c
+++ b/drivers/crypto/amlogic/amlogic-gxl-cipher.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <crypto/scatterwalk.h>
+#include <linux/completion.h>
 #include <linux/scatterlist.h>
 #include <linux/dma-mapping.h>
 #include <crypto/internal/skcipher.h>
diff --git a/drivers/crypto/amlogic/amlogic-gxl-core.c b/drivers/crypto/amlogic/amlogic-gxl-core.c
index f54ab0d0b1e8..8cef2bd41c19 100644
--- a/drivers/crypto/amlogic/amlogic-gxl-core.c
+++ b/drivers/crypto/amlogic/amlogic-gxl-core.c
@@ -10,6 +10,7 @@
 #include <crypto/engine.h>
 #include <crypto/internal/skcipher.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
 #include <linux/interrupt.h>
diff --git a/drivers/crypto/atmel-aes.c b/drivers/crypto/atmel-aes.c
index 8bd64fc37e75..eeaa07fe3eb6 100644
--- a/drivers/crypto/atmel-aes.c
+++ b/drivers/crypto/atmel-aes.c
@@ -19,6 +19,7 @@
 #include <linux/io.h>
 #include <linux/hw_random.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <linux/device.h>
 #include <linux/dmaengine.h>
diff --git a/drivers/crypto/atmel-sha.c b/drivers/crypto/atmel-sha.c
index f4cd6158a4f7..03dec86b15e9 100644
--- a/drivers/crypto/atmel-sha.c
+++ b/drivers/crypto/atmel-sha.c
@@ -16,9 +16,11 @@
 #include <linux/slab.h>
 #include <linux/err.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/hw_random.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <linux/device.h>
 #include <linux/dmaengine.h>
diff --git a/drivers/crypto/axis/artpec6_crypto.c b/drivers/crypto/axis/artpec6_crypto.c
index dbc1d483f2af..2d705cc5384a 100644
--- a/drivers/crypto/axis/artpec6_crypto.c
+++ b/drivers/crypto/axis/artpec6_crypto.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt)     KBUILD_MODNAME ": " fmt
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/crypto.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
diff --git a/drivers/crypto/bcm/util.c b/drivers/crypto/bcm/util.c
index d5d9cabea55a..01d01b27ec1e 100644
--- a/drivers/crypto/bcm/util.c
+++ b/drivers/crypto/bcm/util.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "cipher.h"
 #include "util.h"
diff --git a/drivers/crypto/caam/blob_gen.c b/drivers/crypto/caam/blob_gen.c
index 87781c1534ee..25bc3638a08f 100644
--- a/drivers/crypto/caam/blob_gen.c
+++ b/drivers/crypto/caam/blob_gen.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt) "caam blob_gen: " fmt
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <soc/fsl/caam-blob.h>
 
diff --git a/drivers/crypto/caam/caamalg_qi2.c b/drivers/crypto/caam/caamalg_qi2.c
index a4f6884416a0..e2cee7f6933e 100644
--- a/drivers/crypto/caam/caamalg_qi2.c
+++ b/drivers/crypto/caam/caamalg_qi2.c
@@ -16,9 +16,11 @@
 #include "caamalg_desc.h"
 #include "caamhash_desc.h"
 #include "dpseci-debugfs.h"
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/fsl/mc.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <soc/fsl/dpaa2-io.h>
 #include <soc/fsl/dpaa2-fd.h>
 #include <crypto/xts.h>
diff --git a/drivers/crypto/caam/caamhash.c b/drivers/crypto/caam/caamhash.c
index fdd724228c2f..d749af56d897 100644
--- a/drivers/crypto/caam/caamhash.c
+++ b/drivers/crypto/caam/caamhash.c
@@ -56,6 +56,8 @@
  */
 
 #include "compat.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "regs.h"
 #include "intern.h"
diff --git a/drivers/crypto/caam/desc_constr.h b/drivers/crypto/caam/desc_constr.h
index 824c94d44f94..38351af3ac49 100644
--- a/drivers/crypto/caam/desc_constr.h
+++ b/drivers/crypto/caam/desc_constr.h
@@ -11,6 +11,7 @@
 
 #include "desc.h"
 #include "regs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define IMMEDIATE (1 << 23)
 #define CAAM_CMD_SZ sizeof(u32)
diff --git a/drivers/crypto/caam/error.c b/drivers/crypto/caam/error.c
index 72db90176b1a..326f2aaa1330 100644
--- a/drivers/crypto/caam/error.c
+++ b/drivers/crypto/caam/error.c
@@ -9,6 +9,7 @@
 #include "regs.h"
 #include "desc.h"
 #include "error.h"
+#include <linux/sprintf.h>
 
 #ifdef DEBUG
 #include <linux/highmem.h>
diff --git a/drivers/crypto/caam/intern.h b/drivers/crypto/caam/intern.h
index e51320150872..cae021596d7d 100644
--- a/drivers/crypto/caam/intern.h
+++ b/drivers/crypto/caam/intern.h
@@ -12,6 +12,7 @@
 
 #include "ctrl.h"
 #include <crypto/engine.h>
+#include <linux/of.h>
 
 /* Currently comes from Kconfig param as a ^2 (driver-required) */
 #define JOBR_DEPTH (1 << CONFIG_CRYPTO_DEV_FSL_CAAM_RINGSIZE)
diff --git a/drivers/crypto/caam/key_gen.c b/drivers/crypto/caam/key_gen.c
index 88cc4fe2a585..aac3382654ad 100644
--- a/drivers/crypto/caam/key_gen.c
+++ b/drivers/crypto/caam/key_gen.c
@@ -10,6 +10,7 @@
 #include "error.h"
 #include "desc_constr.h"
 #include "key_gen.h"
+#include <linux/completion.h>
 
 void split_key_done(struct device *dev, u32 *desc, u32 err,
 			   void *context)
diff --git a/drivers/crypto/caam/regs.h b/drivers/crypto/caam/regs.h
index 873df9de9890..583bb06f26bb 100644
--- a/drivers/crypto/caam/regs.h
+++ b/drivers/crypto/caam/regs.h
@@ -13,6 +13,7 @@
 #include <linux/bitops.h>
 #include <linux/io.h>
 #include <linux/io-64-nonatomic-hi-lo.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * Architecture-specific register access methods
diff --git a/drivers/crypto/cavium/nitrox/nitrox_hal.c b/drivers/crypto/cavium/nitrox/nitrox_hal.c
index 1b5abdb6cc5e..999af098adc9 100644
--- a/drivers/crypto/cavium/nitrox/nitrox_hal.c
+++ b/drivers/crypto/cavium/nitrox/nitrox_hal.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "nitrox_dev.h"
 #include "nitrox_csr.h"
diff --git a/drivers/crypto/cavium/nitrox/nitrox_isr.c b/drivers/crypto/cavium/nitrox/nitrox_isr.c
index f19e520da6d0..cdcec686ff01 100644
--- a/drivers/crypto/cavium/nitrox/nitrox_isr.c
+++ b/drivers/crypto/cavium/nitrox/nitrox_isr.c
@@ -2,6 +2,7 @@
 #include <linux/pci.h>
 #include <linux/printk.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "nitrox_dev.h"
 #include "nitrox_csr.h"
diff --git a/drivers/crypto/ccp/ccp-crypto-aes-cmac.c b/drivers/crypto/ccp/ccp-crypto-aes-cmac.c
index d8426bdf3190..45163912d885 100644
--- a/drivers/crypto/ccp/ccp-crypto-aes-cmac.c
+++ b/drivers/crypto/ccp/ccp-crypto-aes-cmac.c
@@ -11,6 +11,7 @@
 #include <linux/sched.h>
 #include <linux/delay.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/crypto.h>
 #include <crypto/algapi.h>
 #include <crypto/aes.h>
diff --git a/drivers/crypto/ccp/ccp-crypto-aes-galois.c b/drivers/crypto/ccp/ccp-crypto-aes-galois.c
index b1dbb8cea559..fea39986950c 100644
--- a/drivers/crypto/ccp/ccp-crypto-aes-galois.c
+++ b/drivers/crypto/ccp/ccp-crypto-aes-galois.c
@@ -11,6 +11,7 @@
 #include <linux/sched.h>
 #include <linux/delay.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/crypto.h>
 #include <crypto/internal/aead.h>
 #include <crypto/algapi.h>
diff --git a/drivers/crypto/ccp/ccp-crypto-aes-xts.c b/drivers/crypto/ccp/ccp-crypto-aes-xts.c
index 93f735d6b02b..c68043a360de 100644
--- a/drivers/crypto/ccp/ccp-crypto-aes-xts.c
+++ b/drivers/crypto/ccp/ccp-crypto-aes-xts.c
@@ -16,6 +16,7 @@
 #include <crypto/xts.h>
 #include <crypto/internal/skcipher.h>
 #include <crypto/scatterwalk.h>
+#include <linux/sprintf.h>
 
 #include "ccp-crypto.h"
 
diff --git a/drivers/crypto/ccp/ccp-crypto-aes.c b/drivers/crypto/ccp/ccp-crypto-aes.c
index d11daaf47f06..d1288e780a24 100644
--- a/drivers/crypto/ccp/ccp-crypto-aes.c
+++ b/drivers/crypto/ccp/ccp-crypto-aes.c
@@ -11,6 +11,7 @@
 #include <linux/sched.h>
 #include <linux/delay.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/crypto.h>
 #include <crypto/algapi.h>
 #include <crypto/aes.h>
diff --git a/drivers/crypto/ccp/ccp-crypto-des3.c b/drivers/crypto/ccp/ccp-crypto-des3.c
index afae30adb703..d0397b16a445 100644
--- a/drivers/crypto/ccp/ccp-crypto-des3.c
+++ b/drivers/crypto/ccp/ccp-crypto-des3.c
@@ -11,6 +11,7 @@
 #include <linux/sched.h>
 #include <linux/delay.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/crypto.h>
 #include <crypto/algapi.h>
 #include <crypto/scatterwalk.h>
diff --git a/drivers/crypto/ccp/ccp-crypto-main.c b/drivers/crypto/ccp/ccp-crypto-main.c
index ecd58b38c46e..27134d99e3dd 100644
--- a/drivers/crypto/ccp/ccp-crypto-main.c
+++ b/drivers/crypto/ccp/ccp-crypto-main.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/list.h>
 #include <linux/ccp.h>
+#include <linux/completion.h>
 #include <linux/scatterlist.h>
 #include <crypto/internal/hash.h>
 #include <crypto/internal/akcipher.h>
diff --git a/drivers/crypto/ccp/ccp-crypto-rsa.c b/drivers/crypto/ccp/ccp-crypto-rsa.c
index a14f85512cf4..d1f00d202e4d 100644
--- a/drivers/crypto/ccp/ccp-crypto-rsa.c
+++ b/drivers/crypto/ccp/ccp-crypto-rsa.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/sched.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/crypto.h>
 #include <crypto/algapi.h>
 #include <crypto/internal/rsa.h>
diff --git a/drivers/crypto/ccp/ccp-crypto-sha.c b/drivers/crypto/ccp/ccp-crypto-sha.c
index fa3ae8e78f6f..933d3c455818 100644
--- a/drivers/crypto/ccp/ccp-crypto-sha.c
+++ b/drivers/crypto/ccp/ccp-crypto-sha.c
@@ -12,6 +12,7 @@
 #include <linux/sched.h>
 #include <linux/delay.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/crypto.h>
 #include <crypto/algapi.h>
 #include <crypto/hash.h>
diff --git a/drivers/crypto/ccp/ccp-debugfs.c b/drivers/crypto/ccp/ccp-debugfs.c
index a1055554b47a..6ef0d48982d3 100644
--- a/drivers/crypto/ccp/ccp-debugfs.c
+++ b/drivers/crypto/ccp/ccp-debugfs.c
@@ -9,6 +9,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/ccp.h>
+#include <linux/sprintf.h>
 
 #include "ccp-dev.h"
 
diff --git a/drivers/crypto/ccp/ccp-dev-v3.c b/drivers/crypto/ccp/ccp-dev-v3.c
index fe69053b2394..51f9ecf9c527 100644
--- a/drivers/crypto/ccp/ccp-dev-v3.c
+++ b/drivers/crypto/ccp/ccp-dev-v3.c
@@ -13,6 +13,7 @@
 #include <linux/kthread.h>
 #include <linux/interrupt.h>
 #include <linux/ccp.h>
+#include <linux/sprintf.h>
 
 #include "ccp-dev.h"
 
diff --git a/drivers/crypto/ccp/ccp-dev-v5.c b/drivers/crypto/ccp/ccp-dev-v5.c
index 7b73332d6aa1..aaa9a4f93f22 100644
--- a/drivers/crypto/ccp/ccp-dev-v5.c
+++ b/drivers/crypto/ccp/ccp-dev-v5.c
@@ -13,6 +13,7 @@
 #include <linux/interrupt.h>
 #include <linux/compiler.h>
 #include <linux/ccp.h>
+#include <linux/sprintf.h>
 
 #include "ccp-dev.h"
 
diff --git a/drivers/crypto/ccp/ccp-dev.c b/drivers/crypto/ccp/ccp-dev.c
index c531d13d971f..eb0f8531ae31 100644
--- a/drivers/crypto/ccp/ccp-dev.c
+++ b/drivers/crypto/ccp/ccp-dev.c
@@ -15,12 +15,14 @@
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
 #include <linux/spinlock_types.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mutex.h>
 #include <linux/delay.h>
 #include <linux/hw_random.h>
 #include <linux/cpu.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #ifdef CONFIG_X86
 #include <asm/cpu_device_id.h>
 #endif
diff --git a/drivers/crypto/ccp/ccp-dev.h b/drivers/crypto/ccp/ccp-dev.h
index 83350e2d9821..6deb683b1109 100644
--- a/drivers/crypto/ccp/ccp-dev.h
+++ b/drivers/crypto/ccp/ccp-dev.h
@@ -12,6 +12,7 @@
 #define __CCP_DEV_H__
 
 #include <linux/device.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/spinlock.h>
 #include <linux/mutex.h>
 #include <linux/list.h>
diff --git a/drivers/crypto/ccp/platform-access.c b/drivers/crypto/ccp/platform-access.c
index 94367bc49e35..1da51aa97480 100644
--- a/drivers/crypto/ccp/platform-access.c
+++ b/drivers/crypto/ccp/platform-access.c
@@ -14,6 +14,7 @@
 #include <linux/bitfield.h>
 #include <linux/errno.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mutex.h>
 
 #include "platform-access.h"
diff --git a/drivers/crypto/ccp/psp-dev.c b/drivers/crypto/ccp/psp-dev.c
index 124a2e0c8999..94df80c202b0 100644
--- a/drivers/crypto/ccp/psp-dev.c
+++ b/drivers/crypto/ccp/psp-dev.c
@@ -12,6 +12,7 @@
 #include <linux/mutex.h>
 #include <linux/bitfield.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "sp-dev.h"
 #include "psp-dev.h"
diff --git a/drivers/crypto/ccp/sev-dev.c b/drivers/crypto/ccp/sev-dev.c
index f44efbb89c34..1d270281012e 100644
--- a/drivers/crypto/ccp/sev-dev.c
+++ b/drivers/crypto/ccp/sev-dev.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/kthread.h>
@@ -15,6 +16,7 @@
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
 #include <linux/spinlock_types.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mutex.h>
 #include <linux/delay.h>
diff --git a/drivers/crypto/ccp/sp-dev.c b/drivers/crypto/ccp/sp-dev.c
index 7eb3e4668286..c5db26fdd3e4 100644
--- a/drivers/crypto/ccp/sp-dev.c
+++ b/drivers/crypto/ccp/sp-dev.c
@@ -16,6 +16,7 @@
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
 #include <linux/spinlock_types.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ccp.h>
 
diff --git a/drivers/crypto/ccp/tee-dev.c b/drivers/crypto/ccp/tee-dev.c
index 5e1d80724678..714a518e1c0b 100644
--- a/drivers/crypto/ccp/tee-dev.c
+++ b/drivers/crypto/ccp/tee-dev.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/types.h>
 #include <linux/mutex.h>
 #include <linux/delay.h>
diff --git a/drivers/crypto/ccree/cc_aead.c b/drivers/crypto/ccree/cc_aead.c
index 5ef39d682389..2691fd855b5d 100644
--- a/drivers/crypto/ccree/cc_aead.c
+++ b/drivers/crypto/ccree/cc_aead.c
@@ -15,6 +15,7 @@
 #include "cc_request_mgr.h"
 #include "cc_hash.h"
 #include "cc_sram_mgr.h"
+#include <linux/sprintf.h>
 
 #define template_aead	template_u.aead
 
diff --git a/drivers/crypto/ccree/cc_cipher.c b/drivers/crypto/ccree/cc_cipher.c
index cd66a580e8b6..ffb49147cae5 100644
--- a/drivers/crypto/ccree/cc_cipher.c
+++ b/drivers/crypto/ccree/cc_cipher.c
@@ -9,6 +9,7 @@
 #include <crypto/xts.h>
 #include <crypto/sm4.h>
 #include <crypto/scatterwalk.h>
+#include <linux/sprintf.h>
 
 #include "cc_driver.h"
 #include "cc_lli_defs.h"
diff --git a/drivers/crypto/ccree/cc_driver.c b/drivers/crypto/ccree/cc_driver.c
index 9177b54bb0f5..587ee3b60c1d 100644
--- a/drivers/crypto/ccree/cc_driver.c
+++ b/drivers/crypto/ccree/cc_driver.c
@@ -3,6 +3,8 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/crypto.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/crypto/ccree/cc_hash.c b/drivers/crypto/ccree/cc_hash.c
index f418162932fe..c2ddb1a06dbd 100644
--- a/drivers/crypto/ccree/cc_hash.c
+++ b/drivers/crypto/ccree/cc_hash.c
@@ -8,6 +8,7 @@
 #include <crypto/md5.h>
 #include <crypto/sm3.h>
 #include <crypto/internal/hash.h>
+#include <linux/sprintf.h>
 
 #include "cc_driver.h"
 #include "cc_request_mgr.h"
diff --git a/drivers/crypto/ccree/cc_hw_queue_defs.h b/drivers/crypto/ccree/cc_hw_queue_defs.h
index 15df58c66911..eeaa3595a2e2 100644
--- a/drivers/crypto/ccree/cc_hw_queue_defs.h
+++ b/drivers/crypto/ccree/cc_hw_queue_defs.h
@@ -5,6 +5,7 @@
 #define __CC_HW_QUEUE_DEFS_H__
 
 #include <linux/types.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "cc_kernel_regs.h"
 #include <linux/bitfield.h>
diff --git a/drivers/crypto/ccree/cc_request_mgr.c b/drivers/crypto/ccree/cc_request_mgr.c
index 887162df50f9..45ce64294587 100644
--- a/drivers/crypto/ccree/cc_request_mgr.c
+++ b/drivers/crypto/ccree/cc_request_mgr.c
@@ -7,6 +7,7 @@
 #include "cc_buffer_mgr.h"
 #include "cc_request_mgr.h"
 #include "cc_pm.h"
+#include <linux/completion.h>
 
 #define CC_MAX_POLL_ITER	10
 /* The highest descriptor count in used */
diff --git a/drivers/crypto/chelsio/chcr_algo.c b/drivers/crypto/chelsio/chcr_algo.c
index 177428480c7d..4f924f95b213 100644
--- a/drivers/crypto/chelsio/chcr_algo.c
+++ b/drivers/crypto/chelsio/chcr_algo.c
@@ -48,6 +48,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/highmem.h>
 #include <linux/scatterlist.h>
+#include <linux/completion.h>
 
 #include <crypto/aes.h>
 #include <crypto/algapi.h>
diff --git a/drivers/crypto/chelsio/chcr_core.c b/drivers/crypto/chelsio/chcr_core.c
index 39c70e6255f9..c1eb80dc4e2a 100644
--- a/drivers/crypto/chelsio/chcr_core.c
+++ b/drivers/crypto/chelsio/chcr_core.c
@@ -18,6 +18,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/skbuff.h>
+#include <linux/completion.h>
 
 #include <crypto/aes.h>
 #include <crypto/hash.h>
diff --git a/drivers/crypto/gemini/sl3516-ce-core.c b/drivers/crypto/gemini/sl3516-ce-core.c
index 1d1a889599bb..ea45a9d83390 100644
--- a/drivers/crypto/gemini/sl3516-ce-core.c
+++ b/drivers/crypto/gemini/sl3516-ce-core.c
@@ -11,6 +11,7 @@
 #include <crypto/internal/rng.h>
 #include <crypto/internal/skcipher.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/dev_printk.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/crypto/hifn_795x.c b/drivers/crypto/hifn_795x.c
index b4a4ec35bce0..cd2c403dd319 100644
--- a/drivers/crypto/hifn_795x.c
+++ b/drivers/crypto/hifn_795x.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/mod_devicetable.h>
@@ -19,6 +20,7 @@
 #include <linux/crypto.h>
 #include <linux/hw_random.h>
 #include <linux/ktime.h>
+#include <linux/sprintf.h>
 
 #include <crypto/algapi.h>
 #include <crypto/internal/des.h>
diff --git a/drivers/crypto/hisilicon/debugfs.c b/drivers/crypto/hisilicon/debugfs.c
index 06e67eda409f..0ce98dc3bea1 100644
--- a/drivers/crypto/hisilicon/debugfs.c
+++ b/drivers/crypto/hisilicon/debugfs.c
@@ -2,6 +2,8 @@
 /* Copyright (c) 2022 HiSilicon Limited. */
 #include <linux/hisi_acc_qm.h>
 #include "qm_common.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define QM_DFX_BASE			0x0100000
 #define QM_DFX_STATE1			0x0104000
diff --git a/drivers/crypto/hisilicon/hpre/hpre_main.c b/drivers/crypto/hisilicon/hpre/hpre_main.c
index d93aa6630a57..79c162d88fe5 100644
--- a/drivers/crypto/hisilicon/hpre/hpre_main.c
+++ b/drivers/crypto/hisilicon/hpre/hpre_main.c
@@ -6,9 +6,11 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/topology.h>
 #include <linux/uacce.h>
 #include "hpre.h"
diff --git a/drivers/crypto/hisilicon/qm.c b/drivers/crypto/hisilicon/qm.c
index 4b20b94e6371..46c5410b1dc3 100644
--- a/drivers/crypto/hisilicon/qm.c
+++ b/drivers/crypto/hisilicon/qm.c
@@ -7,10 +7,13 @@
 #include <linux/idr.h>
 #include <linux/io.h>
 #include <linux/irqreturn.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/log2.h>
 #include <linux/pm_runtime.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uacce.h>
 #include <linux/uaccess.h>
 #include <uapi/misc/uacce/hisi_qm.h>
diff --git a/drivers/crypto/hisilicon/sec/sec_algs.c b/drivers/crypto/hisilicon/sec/sec_algs.c
index 1189effcdad0..c0dbfbca6c47 100644
--- a/drivers/crypto/hisilicon/sec/sec_algs.c
+++ b/drivers/crypto/hisilicon/sec/sec_algs.c
@@ -3,6 +3,7 @@
 #include <linux/crypto.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmapool.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
diff --git a/drivers/crypto/hisilicon/sec/sec_drv.c b/drivers/crypto/hisilicon/sec/sec_drv.c
index afdddf87cc34..31ef8b101ecd 100644
--- a/drivers/crypto/hisilicon/sec/sec_drv.c
+++ b/drivers/crypto/hisilicon/sec/sec_drv.c
@@ -15,11 +15,13 @@
 #include <linux/interrupt.h>
 #include <linux/irq.h>
 #include <linux/irqreturn.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "sec_drv.h"
 
diff --git a/drivers/crypto/hisilicon/sec2/sec_main.c b/drivers/crypto/hisilicon/sec2/sec_main.c
index c290d8937b19..1e4697a28634 100644
--- a/drivers/crypto/hisilicon/sec2/sec_main.c
+++ b/drivers/crypto/hisilicon/sec2/sec_main.c
@@ -8,10 +8,12 @@
 #include <linux/io.h>
 #include <linux/iommu.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/pm_runtime.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/topology.h>
 #include <linux/uacce.h>
 
diff --git a/drivers/crypto/hisilicon/zip/zip_crypto.c b/drivers/crypto/hisilicon/zip/zip_crypto.c
index c650c741a18d..8ed772f135cb 100644
--- a/drivers/crypto/hisilicon/zip/zip_crypto.c
+++ b/drivers/crypto/hisilicon/zip/zip_crypto.c
@@ -4,6 +4,8 @@
 #include <linux/bitfield.h>
 #include <linux/bitmap.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/scatterlist.h>
 #include "zip.h"
 
diff --git a/drivers/crypto/hisilicon/zip/zip_main.c b/drivers/crypto/hisilicon/zip/zip_main.c
index c065fd867161..181dcffee96c 100644
--- a/drivers/crypto/hisilicon/zip/zip_main.c
+++ b/drivers/crypto/hisilicon/zip/zip_main.c
@@ -6,10 +6,12 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/pm_runtime.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/topology.h>
 #include <linux/uacce.h>
 #include "zip.h"
diff --git a/drivers/crypto/inside-secure/safexcel.c b/drivers/crypto/inside-secure/safexcel.c
index f5c1912aa564..258d8a16fe61 100644
--- a/drivers/crypto/inside-secure/safexcel.c
+++ b/drivers/crypto/inside-secure/safexcel.c
@@ -11,11 +11,13 @@
 #include <linux/dmapool.h>
 #include <linux/firmware.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of_platform.h>
 #include <linux/of_irq.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include <crypto/internal/aead.h>
diff --git a/drivers/crypto/inside-secure/safexcel_hash.c b/drivers/crypto/inside-secure/safexcel_hash.c
index e17577b785c3..a1172b1bbb21 100644
--- a/drivers/crypto/inside-secure/safexcel_hash.c
+++ b/drivers/crypto/inside-secure/safexcel_hash.c
@@ -14,6 +14,7 @@
 #include <crypto/skcipher.h>
 #include <crypto/sm3.h>
 #include <crypto/internal/cipher.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmapool.h>
diff --git a/drivers/crypto/inside-secure/safexcel_ring.c b/drivers/crypto/inside-secure/safexcel_ring.c
index 90f15032c8df..0ba83f8dfcf3 100644
--- a/drivers/crypto/inside-secure/safexcel_ring.c
+++ b/drivers/crypto/inside-secure/safexcel_ring.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/spinlock.h>
 
 #include "safexcel.h"
diff --git a/drivers/crypto/intel/iaa/iaa_crypto_main.c b/drivers/crypto/intel/iaa/iaa_crypto_main.c
index 39a5fc905c4d..8878641d3d66 100644
--- a/drivers/crypto/intel/iaa/iaa_crypto_main.c
+++ b/drivers/crypto/intel/iaa/iaa_crypto_main.c
@@ -3,10 +3,12 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/device.h>
 #include <linux/iommu.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/idxd.h>
 #include <linux/highmem.h>
 #include <linux/sched/smt.h>
diff --git a/drivers/crypto/intel/ixp4xx/ixp4xx_crypto.c b/drivers/crypto/intel/ixp4xx/ixp4xx_crypto.c
index f8a77bff8844..b60ce4125f5b 100644
--- a/drivers/crypto/intel/ixp4xx/ixp4xx_crypto.c
+++ b/drivers/crypto/intel/ixp4xx/ixp4xx_crypto.c
@@ -16,6 +16,8 @@
 #include <linux/gfp.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <crypto/ctr.h>
 #include <crypto/internal/des.h>
diff --git a/drivers/crypto/intel/keembay/ocs-aes.c b/drivers/crypto/intel/keembay/ocs-aes.c
index be9f32fc8f42..9b3314241078 100644
--- a/drivers/crypto/intel/keembay/ocs-aes.c
+++ b/drivers/crypto/intel/keembay/ocs-aes.c
@@ -10,6 +10,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/swab.h>
+#include <linux/completion.h>
 
 #include <asm/byteorder.h>
 #include <asm/errno.h>
diff --git a/drivers/crypto/intel/keembay/ocs-hcu.c b/drivers/crypto/intel/keembay/ocs-hcu.c
index deb9bd460ee6..f475a8b400b3 100644
--- a/drivers/crypto/intel/keembay/ocs-hcu.c
+++ b/drivers/crypto/intel/keembay/ocs-hcu.c
@@ -10,6 +10,7 @@
 #include <linux/iopoll.h>
 #include <linux/irq.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <crypto/sha2.h>
 
diff --git a/drivers/crypto/intel/qat/qat_c3xxxvf/adf_drv.c b/drivers/crypto/intel/qat/qat_c3xxxvf/adf_drv.c
index a8de9cd09c05..fddfa65dfaa3 100644
--- a/drivers/crypto/intel/qat/qat_c3xxxvf/adf_drv.c
+++ b/drivers/crypto/intel/qat/qat_c3xxxvf/adf_drv.c
@@ -18,6 +18,7 @@
 #include <adf_cfg.h>
 #include <adf_dbgfs.h>
 #include "adf_c3xxxvf_hw_data.h"
+#include <linux/completion.h>
 
 static const struct pci_device_id adf_pci_tbl[] = {
 	{ PCI_VDEVICE(INTEL, PCI_DEVICE_ID_INTEL_QAT_C3XXX_VF), },
diff --git a/drivers/crypto/intel/qat/qat_c62xvf/adf_drv.c b/drivers/crypto/intel/qat/qat_c62xvf/adf_drv.c
index 53b8ddb63364..7acf3925b70a 100644
--- a/drivers/crypto/intel/qat/qat_c62xvf/adf_drv.c
+++ b/drivers/crypto/intel/qat/qat_c62xvf/adf_drv.c
@@ -18,6 +18,7 @@
 #include <adf_cfg.h>
 #include <adf_dbgfs.h>
 #include "adf_c62xvf_hw_data.h"
+#include <linux/completion.h>
 
 static const struct pci_device_id adf_pci_tbl[] = {
 	{ PCI_VDEVICE(INTEL, PCI_DEVICE_ID_INTEL_QAT_C62X_VF), },
diff --git a/drivers/crypto/intel/qat/qat_common/adf_admin.c b/drivers/crypto/intel/qat/qat_common/adf_admin.c
index acad526eb741..b8e4f1b9c343 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_admin.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_admin.c
@@ -4,6 +4,7 @@
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 #include <linux/dma-mapping.h>
 #include "adf_accel_devices.h"
diff --git a/drivers/crypto/intel/qat/qat_common/adf_cfg.c b/drivers/crypto/intel/qat/qat_common/adf_cfg.c
index 8836f015c39c..aa08b9d31420 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_cfg.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_cfg.c
@@ -7,6 +7,7 @@
 #include "adf_accel_devices.h"
 #include "adf_cfg.h"
 #include "adf_common_drv.h"
+#include <linux/sprintf.h>
 
 static DEFINE_MUTEX(qat_cfg_read_lock);
 
diff --git a/drivers/crypto/intel/qat/qat_common/adf_dbgfs.c b/drivers/crypto/intel/qat/qat_common/adf_dbgfs.c
index c42f5c25aabd..f6116d87aece 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_dbgfs.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_dbgfs.c
@@ -11,6 +11,7 @@
 #include "adf_heartbeat_dbgfs.h"
 #include "adf_pm_dbgfs.h"
 #include "adf_tl_debugfs.h"
+#include <linux/sprintf.h>
 
 /**
  * adf_dbgfs_init() - add persistent debugfs entries
diff --git a/drivers/crypto/intel/qat/qat_common/adf_gen2_config.c b/drivers/crypto/intel/qat/qat_common/adf_gen2_config.c
index c27ff6d18e11..cc9d4591fccc 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_gen2_config.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_gen2_config.c
@@ -9,6 +9,7 @@
 #include "qat_compression.h"
 #include "adf_heartbeat.h"
 #include "adf_transport_access_macros.h"
+#include <linux/sprintf.h>
 
 static int adf_gen2_crypto_dev_config(struct adf_accel_dev *accel_dev)
 {
diff --git a/drivers/crypto/intel/qat/qat_common/adf_gen4_config.c b/drivers/crypto/intel/qat/qat_common/adf_gen4_config.c
index fe1f3d727dc5..d160b27c7bef 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_gen4_config.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_gen4_config.c
@@ -10,6 +10,7 @@
 #include "adf_transport_access_macros.h"
 #include "qat_compression.h"
 #include "qat_crypto.h"
+#include <linux/sprintf.h>
 
 static int adf_crypto_dev_config(struct adf_accel_dev *accel_dev)
 {
diff --git a/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.c b/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.c
index f752653ccb47..eff92de9ce46 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.c
@@ -6,6 +6,7 @@
 #include "adf_common_drv.h"
 #include "adf_gen4_hw_data.h"
 #include "adf_gen4_pm.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static u64 build_csr_ring_base_addr(dma_addr_t addr, u32 size)
 {
diff --git a/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.h b/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.h
index 7d8a774cadc8..bcb379dc498d 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.h
+++ b/drivers/crypto/intel/qat/qat_common/adf_gen4_hw_data.h
@@ -4,6 +4,7 @@
 #define ADF_GEN4_HW_CSR_DATA_H_
 
 #include <linux/units.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "adf_accel_devices.h"
 #include "adf_cfg_common.h"
diff --git a/drivers/crypto/intel/qat/qat_common/adf_gen4_pm.c b/drivers/crypto/intel/qat/qat_common/adf_gen4_pm.c
index 5dafd9a270db..225bac6e1c2c 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_gen4_pm.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_gen4_pm.c
@@ -3,6 +3,7 @@
 #include <linux/bitfield.h>
 #include <linux/iopoll.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 
 #include "adf_accel_devices.h"
 #include "adf_admin.h"
diff --git a/drivers/crypto/intel/qat/qat_common/adf_gen4_pm_debugfs.c b/drivers/crypto/intel/qat/qat_common/adf_gen4_pm_debugfs.c
index ee0b5079de3e..9652a906ca41 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_gen4_pm_debugfs.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_gen4_pm_debugfs.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2023 Intel Corporation */
 #include <linux/dma-mapping.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/stringify.h>
 
diff --git a/drivers/crypto/intel/qat/qat_common/adf_heartbeat.c b/drivers/crypto/intel/qat/qat_common/adf_heartbeat.c
index b19aa1ef8eee..79ec6247af7f 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_heartbeat.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_heartbeat.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/kstrtox.h>
 #include <linux/overflow.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/types.h>
diff --git a/drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c b/drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c
index 5cd6c2d6f90a..0c95c516eb43 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c
@@ -7,6 +7,7 @@
 #include <linux/fs.h>
 #include <linux/kernel.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include "adf_admin.h"
 #include "adf_cfg.h"
diff --git a/drivers/crypto/intel/qat/qat_common/adf_isr.c b/drivers/crypto/intel/qat/qat_common/adf_isr.c
index 020d213f4c99..eac5bbb27561 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_isr.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_isr.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2014 - 2020 Intel Corporation */
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
diff --git a/drivers/crypto/intel/qat/qat_common/adf_sysfs.c b/drivers/crypto/intel/qat/qat_common/adf_sysfs.c
index 4e7f70d4049d..8568882e26e1 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_sysfs.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_sysfs.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2022 Intel Corporation */
 #include <linux/device.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include "adf_accel_devices.h"
 #include "adf_cfg.h"
diff --git a/drivers/crypto/intel/qat/qat_common/adf_sysfs_ras_counters.c b/drivers/crypto/intel/qat/qat_common/adf_sysfs_ras_counters.c
index e97c67c87b3c..438dd615a8b8 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_sysfs_ras_counters.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_sysfs_ras_counters.c
@@ -3,6 +3,7 @@
 
 #include <linux/sysfs.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include "adf_common_drv.h"
diff --git a/drivers/crypto/intel/qat/qat_common/adf_sysfs_rl.c b/drivers/crypto/intel/qat/qat_common/adf_sysfs_rl.c
index bedb514d4e30..55012e1fc167 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_sysfs_rl.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_sysfs_rl.c
@@ -4,6 +4,7 @@
 #define dev_fmt(fmt) "RateLimiting: " fmt
 
 #include <linux/dev_printk.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
diff --git a/drivers/crypto/intel/qat/qat_common/adf_tl_debugfs.c b/drivers/crypto/intel/qat/qat_common/adf_tl_debugfs.c
index c8241f5a0a26..739861f0beb1 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_tl_debugfs.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_tl_debugfs.c
@@ -8,10 +8,12 @@
 #include <linux/dcache.h>
 #include <linux/file.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/math64.h>
 #include <linux/mutex.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 
 #include "adf_accel_devices.h"
diff --git a/drivers/crypto/intel/qat/qat_common/adf_transport.c b/drivers/crypto/intel/qat/qat_common/adf_transport.c
index 630d0483c4e0..ca61c88d3edc 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_transport.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_transport.c
@@ -1,12 +1,14 @@
 // SPDX-License-Identifier: (BSD-3-Clause OR GPL-2.0-only)
 /* Copyright(c) 2014 - 2020 Intel Corporation */
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/nospec.h>
 #include "adf_accel_devices.h"
 #include "adf_transport_internal.h"
 #include "adf_transport_access_macros.h"
 #include "adf_cfg.h"
 #include "adf_common_drv.h"
+#include <linux/sprintf.h>
 
 #define ADF_MAX_RING_THRESHOLD		80
 #define ADF_PERCENT(tot, percent)	(((tot) * (percent)) / 100)
diff --git a/drivers/crypto/intel/qat/qat_common/adf_transport_debug.c b/drivers/crypto/intel/qat/qat_common/adf_transport_debug.c
index e2dd568b87b5..0f276be5676c 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_transport_debug.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_transport_debug.c
@@ -6,6 +6,7 @@
 #include "adf_accel_devices.h"
 #include "adf_transport_internal.h"
 #include "adf_transport_access_macros.h"
+#include <linux/sprintf.h>
 
 static DEFINE_MUTEX(ring_read_lock);
 static DEFINE_MUTEX(bank_read_lock);
diff --git a/drivers/crypto/intel/qat/qat_common/adf_vf_isr.c b/drivers/crypto/intel/qat/qat_common/adf_vf_isr.c
index b05c3957a160..618d8f41500d 100644
--- a/drivers/crypto/intel/qat/qat_common/adf_vf_isr.c
+++ b/drivers/crypto/intel/qat/qat_common/adf_vf_isr.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2014 - 2020 Intel Corporation */
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
diff --git a/drivers/crypto/intel/qat/qat_common/qat_compression.c b/drivers/crypto/intel/qat/qat_common/qat_compression.c
index 7842a9f22178..b8b6e6444cbe 100644
--- a/drivers/crypto/intel/qat/qat_common/qat_compression.c
+++ b/drivers/crypto/intel/qat/qat_common/qat_compression.c
@@ -10,6 +10,8 @@
 #include "adf_cfg_strings.h"
 #include "qat_compression.h"
 #include "icp_qat_fw.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define SEC ADF_KERNEL_SEC
 
diff --git a/drivers/crypto/intel/qat/qat_common/qat_crypto.c b/drivers/crypto/intel/qat/qat_common/qat_crypto.c
index 40c8e74d1cf9..b1c6ac5a38da 100644
--- a/drivers/crypto/intel/qat/qat_common/qat_crypto.c
+++ b/drivers/crypto/intel/qat/qat_common/qat_crypto.c
@@ -10,6 +10,8 @@
 #include "adf_gen2_hw_data.h"
 #include "qat_crypto.h"
 #include "icp_qat_fw.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define SEC ADF_KERNEL_SEC
 
diff --git a/drivers/crypto/intel/qat/qat_common/qat_uclo.c b/drivers/crypto/intel/qat/qat_common/qat_uclo.c
index ad2c64af7427..958ef1df66ce 100644
--- a/drivers/crypto/intel/qat/qat_common/qat_uclo.c
+++ b/drivers/crypto/intel/qat/qat_common/qat_uclo.c
@@ -4,6 +4,7 @@
 #include <linux/ctype.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pci_ids.h>
 #include "adf_accel_devices.h"
 #include "adf_common_drv.h"
diff --git a/drivers/crypto/intel/qat/qat_dh895xccvf/adf_drv.c b/drivers/crypto/intel/qat/qat_dh895xccvf/adf_drv.c
index d59cb1ba2ad5..449d3c6299dd 100644
--- a/drivers/crypto/intel/qat/qat_dh895xccvf/adf_drv.c
+++ b/drivers/crypto/intel/qat/qat_dh895xccvf/adf_drv.c
@@ -18,6 +18,7 @@
 #include <adf_cfg.h>
 #include <adf_dbgfs.h>
 #include "adf_dh895xccvf_hw_data.h"
+#include <linux/completion.h>
 
 static const struct pci_device_id adf_pci_tbl[] = {
 	{ PCI_VDEVICE(INTEL, PCI_DEVICE_ID_INTEL_QAT_DH895XCC_VF), },
diff --git a/drivers/crypto/marvell/cesa/cesa.c b/drivers/crypto/marvell/cesa/cesa.c
index 5fd31ba715c2..564dbc62c37a 100644
--- a/drivers/crypto/marvell/cesa/cesa.c
+++ b/drivers/crypto/marvell/cesa/cesa.c
@@ -23,9 +23,11 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 
 #include "cesa.h"
 
diff --git a/drivers/crypto/marvell/cesa/tdma.c b/drivers/crypto/marvell/cesa/tdma.c
index 388a06e180d6..ea88822d1343 100644
--- a/drivers/crypto/marvell/cesa/tdma.c
+++ b/drivers/crypto/marvell/cesa/tdma.c
@@ -11,6 +11,7 @@
  */
 
 #include "cesa.h"
+#include <linux/completion.h>
 
 bool mv_cesa_req_dma_iter_next_transfer(struct mv_cesa_dma_iter *iter,
 					struct mv_cesa_sg_dma_iter *sgiter,
diff --git a/drivers/crypto/marvell/octeontx/otx_cptpf_ucode.c b/drivers/crypto/marvell/octeontx/otx_cptpf_ucode.c
index c4250e5fcf8f..fde5fe99782a 100644
--- a/drivers/crypto/marvell/octeontx/otx_cptpf_ucode.c
+++ b/drivers/crypto/marvell/octeontx/otx_cptpf_ucode.c
@@ -13,6 +13,8 @@
 #include "otx_cpt_common.h"
 #include "otx_cptpf_ucode.h"
 #include "otx_cptpf.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define CSR_DELAY 30
 /* Tar archive defines */
diff --git a/drivers/crypto/marvell/octeontx/otx_cptvf_main.c b/drivers/crypto/marvell/octeontx/otx_cptvf_main.c
index 88a41d1ca5f6..30b2591550bc 100644
--- a/drivers/crypto/marvell/octeontx/otx_cptvf_main.c
+++ b/drivers/crypto/marvell/octeontx/otx_cptvf_main.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include "otx_cptvf.h"
 #include "otx_cptvf_algs.h"
diff --git a/drivers/crypto/marvell/octeontx2/otx2_cptlf.c b/drivers/crypto/marvell/octeontx2/otx2_cptlf.c
index b52728e3c0d1..d6fb2116037f 100644
--- a/drivers/crypto/marvell/octeontx2/otx2_cptlf.c
+++ b/drivers/crypto/marvell/octeontx2/otx2_cptlf.c
@@ -4,6 +4,7 @@
 #include "otx2_cpt_common.h"
 #include "otx2_cptlf.h"
 #include "rvu_reg.h"
+#include <linux/sprintf.h>
 
 #define CPT_TIMER_HOLD 0x03F
 #define CPT_COUNT_HOLD 32
diff --git a/drivers/crypto/marvell/octeontx2/otx2_cptpf_main.c b/drivers/crypto/marvell/octeontx2/otx2_cptpf_main.c
index 400e36d9908f..f3114ae2f228 100644
--- a/drivers/crypto/marvell/octeontx2/otx2_cptpf_main.c
+++ b/drivers/crypto/marvell/octeontx2/otx2_cptpf_main.c
@@ -9,6 +9,8 @@
 #include "otx2_cptpf.h"
 #include "cn10k_cpt.h"
 #include "rvu_reg.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define OTX2_CPT_DRV_NAME    "rvu_cptpf"
 #define OTX2_CPT_DRV_STRING  "Marvell RVU CPT Physical Function Driver"
diff --git a/drivers/crypto/marvell/octeontx2/otx2_cptpf_ucode.c b/drivers/crypto/marvell/octeontx2/otx2_cptpf_ucode.c
index 5c9484646172..aa43647d1380 100644
--- a/drivers/crypto/marvell/octeontx2/otx2_cptpf_ucode.c
+++ b/drivers/crypto/marvell/octeontx2/otx2_cptpf_ucode.c
@@ -9,6 +9,8 @@
 #include "otx2_cptlf.h"
 #include "otx2_cpt_reqmgr.h"
 #include "rvu_reg.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define CSR_DELAY 30
 
diff --git a/drivers/crypto/mxs-dcp.c b/drivers/crypto/mxs-dcp.c
index 2b3ebe0db3a6..8f8a18e1dc92 100644
--- a/drivers/crypto/mxs-dcp.c
+++ b/drivers/crypto/mxs-dcp.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/stmp_device.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 
 #include <crypto/aes.h>
 #include <crypto/sha1.h>
diff --git a/drivers/crypto/n2_core.c b/drivers/crypto/n2_core.c
index 7a3083debc2b..4df8b26b8122 100644
--- a/drivers/crypto/n2_core.c
+++ b/drivers/crypto/n2_core.c
@@ -23,6 +23,7 @@
 #include <linux/mutex.h>
 #include <linux/delay.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #include <crypto/internal/hash.h>
 #include <crypto/internal/skcipher.h>
diff --git a/drivers/crypto/nx/nx-common-pseries.c b/drivers/crypto/nx/nx-common-pseries.c
index 35f2d0d8507e..4c168d68fe28 100644
--- a/drivers/crypto/nx/nx-common-pseries.c
+++ b/drivers/crypto/nx/nx-common-pseries.c
@@ -11,6 +11,7 @@
 #include <asm/vio.h>
 #include <asm/hvcall.h>
 #include <asm/vas.h>
+#include <linux/sprintf.h>
 
 #include "nx-842.h"
 #include "nx_csbcpb.h" /* struct nx_csbcpb */
diff --git a/drivers/crypto/omap-aes.c b/drivers/crypto/omap-aes.c
index bad1adacbc84..feeabd1b49dc 100644
--- a/drivers/crypto/omap-aes.c
+++ b/drivers/crypto/omap-aes.c
@@ -26,12 +26,14 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include "omap-crypto.h"
diff --git a/drivers/crypto/omap-sham.c b/drivers/crypto/omap-sham.c
index 5bcd9ab0f72a..c835260f7ecf 100644
--- a/drivers/crypto/omap-sham.c
+++ b/drivers/crypto/omap-sham.c
@@ -28,6 +28,7 @@
 #include <linux/io.h>
 #include <linux/irq.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
@@ -36,6 +37,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #define MD5_DIGEST_SIZE			16
diff --git a/drivers/crypto/qce/aead.c b/drivers/crypto/qce/aead.c
index 7d811728f047..b64ed1a7319b 100644
--- a/drivers/crypto/qce/aead.c
+++ b/drivers/crypto/qce/aead.c
@@ -13,6 +13,7 @@
 #include <crypto/sha2.h>
 #include <crypto/scatterwalk.h>
 #include "aead.h"
+#include <linux/sprintf.h>
 
 #define CCM_NONCE_ADATA_SHIFT		6
 #define CCM_NONCE_AUTHSIZE_SHIFT	3
diff --git a/drivers/crypto/qce/sha.c b/drivers/crypto/qce/sha.c
index fc72af8aa9a7..3333b0a07a00 100644
--- a/drivers/crypto/qce/sha.c
+++ b/drivers/crypto/qce/sha.c
@@ -7,6 +7,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <crypto/internal/hash.h>
+#include <linux/sprintf.h>
 
 #include "common.h"
 #include "core.h"
diff --git a/drivers/crypto/qce/skcipher.c b/drivers/crypto/qce/skcipher.c
index 5b493fdc1e74..f0d89ddf2e32 100644
--- a/drivers/crypto/qce/skcipher.c
+++ b/drivers/crypto/qce/skcipher.c
@@ -7,6 +7,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <crypto/aes.h>
diff --git a/drivers/crypto/rockchip/rk3288_crypto.c b/drivers/crypto/rockchip/rk3288_crypto.c
index 70edf40bc523..0f62ff8625f1 100644
--- a/drivers/crypto/rockchip/rk3288_crypto.c
+++ b/drivers/crypto/rockchip/rk3288_crypto.c
@@ -14,6 +14,7 @@
 #include <crypto/internal/hash.h>
 #include <crypto/internal/skcipher.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
diff --git a/drivers/crypto/rockchip/rk3288_crypto_ahash.c b/drivers/crypto/rockchip/rk3288_crypto_ahash.c
index 1b13b4aa16ec..108915f44ad6 100644
--- a/drivers/crypto/rockchip/rk3288_crypto_ahash.c
+++ b/drivers/crypto/rockchip/rk3288_crypto_ahash.c
@@ -11,6 +11,7 @@
 
 #include <asm/unaligned.h>
 #include <crypto/internal/hash.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/iopoll.h>
diff --git a/drivers/crypto/rockchip/rk3288_crypto_skcipher.c b/drivers/crypto/rockchip/rk3288_crypto_skcipher.c
index 9393e10671c2..8f7023635a6b 100644
--- a/drivers/crypto/rockchip/rk3288_crypto_skcipher.c
+++ b/drivers/crypto/rockchip/rk3288_crypto_skcipher.c
@@ -12,6 +12,7 @@
 #include <crypto/engine.h>
 #include <crypto/internal/skcipher.h>
 #include <crypto/scatterwalk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/kernel.h>
diff --git a/drivers/crypto/sahara.c b/drivers/crypto/sahara.c
index 3423b5cde1c7..4dbde839e7f7 100644
--- a/drivers/crypto/sahara.c
+++ b/drivers/crypto/sahara.c
@@ -18,6 +18,7 @@
 #include <crypto/engine.h>
 #include <crypto/sha1.h>
 #include <crypto/sha2.h>
+#include <linux/completion.h>
 
 #include <linux/clk.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/crypto/stm32/stm32-hash.c b/drivers/crypto/stm32/stm32-hash.c
index 34e0d7e381a8..0049505398dc 100644
--- a/drivers/crypto/stm32/stm32-hash.c
+++ b/drivers/crypto/stm32/stm32-hash.c
@@ -14,6 +14,7 @@
 #include <crypto/sha2.h>
 #include <crypto/sha3.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
diff --git a/drivers/crypto/virtio/virtio_crypto_core.c b/drivers/crypto/virtio/virtio_crypto_core.c
index 6a67d70e7f1c..baef5c96c866 100644
--- a/drivers/crypto/virtio/virtio_crypto_core.c
+++ b/drivers/crypto/virtio/virtio_crypto_core.c
@@ -6,8 +6,10 @@
 
 #include <linux/err.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/virtio_config.h>
 #include <linux/cpu.h>
+#include <linux/completion.h>
 
 #include <uapi/linux/virtio_crypto.h>
 #include "virtio_crypto_common.h"
diff --git a/drivers/cxl/acpi.c b/drivers/cxl/acpi.c
index dcf2b39e1048..a0d1cd66166e 100644
--- a/drivers/cxl/acpi.c
+++ b/drivers/cxl/acpi.c
@@ -5,11 +5,13 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/acpi.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/node.h>
 #include <asm/div64.h>
 #include "cxlpci.h"
 #include "cxl.h"
+#include <linux/sprintf.h>
 
 #define CXL_RCRB_SIZE	SZ_8K
 
diff --git a/drivers/cxl/core/hdm.c b/drivers/cxl/core/hdm.c
index 7d97790b893d..53000facca00 100644
--- a/drivers/cxl/core/hdm.c
+++ b/drivers/cxl/core/hdm.c
@@ -3,6 +3,7 @@
 #include <linux/seq_file.h>
 #include <linux/device.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "cxlmem.h"
 #include "core.h"
diff --git a/drivers/cxl/core/mbox.c b/drivers/cxl/core/mbox.c
index 9adda4795eb7..e8bbcafa82a1 100644
--- a/drivers/cxl/core/mbox.c
+++ b/drivers/cxl/core/mbox.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2020 Intel Corporation. All rights reserved. */
 #include <linux/security.h>
 #include <linux/debugfs.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/ktime.h>
 #include <linux/mutex.h>
 #include <asm/unaligned.h>
diff --git a/drivers/cxl/core/memdev.c b/drivers/cxl/core/memdev.c
index d4e259f3a7e9..17c348d0b202 100644
--- a/drivers/cxl/core/memdev.c
+++ b/drivers/cxl/core/memdev.c
@@ -4,12 +4,14 @@
 #include <linux/io-64-nonatomic-lo-hi.h>
 #include <linux/firmware.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/idr.h>
 #include <linux/pci.h>
 #include <cxlmem.h>
 #include "trace.h"
 #include "core.h"
+#include <linux/sprintf.h>
 
 static DECLARE_RWSEM(cxl_memdev_rwsem);
 
diff --git a/drivers/cxl/core/pmem.c b/drivers/cxl/core/pmem.c
index e69625a8d6a1..9eb885b91b27 100644
--- a/drivers/cxl/core/pmem.c
+++ b/drivers/cxl/core/pmem.c
@@ -6,6 +6,7 @@
 #include <cxlmem.h>
 #include <cxl.h>
 #include "core.h"
+#include <linux/sprintf.h>
 
 /**
  * DOC: cxl pmem
diff --git a/drivers/cxl/core/port.c b/drivers/cxl/core/port.c
index e59d9d37aa65..a3713b26e2da 100644
--- a/drivers/cxl/core/port.c
+++ b/drivers/cxl/core/port.c
@@ -1,7 +1,10 @@
 // SPDX-License-Identifier: GPL-2.0-only
 /* Copyright(c) 2020 Intel Corporation. All rights reserved. */
 #include <linux/platform_device.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/memregion.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/debugfs.h>
 #include <linux/device.h>
diff --git a/drivers/cxl/core/region.c b/drivers/cxl/core/region.c
index 4c7fd2d5cccb..43e1c648cb90 100644
--- a/drivers/cxl/core/region.c
+++ b/drivers/cxl/core/region.c
@@ -3,8 +3,10 @@
 #include <linux/memregion.h>
 #include <linux/genalloc.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include <linux/sort.h>
 #include <linux/idr.h>
diff --git a/drivers/cxl/cxl.h b/drivers/cxl/cxl.h
index 003feebab79b..0f4a9fe037b4 100644
--- a/drivers/cxl/cxl.h
+++ b/drivers/cxl/cxl.h
@@ -7,9 +7,12 @@
 #include <linux/libnvdimm.h>
 #include <linux/bitfield.h>
 #include <linux/bitops.h>
+#include <linux/device/driver.h>
 #include <linux/log2.h>
 #include <linux/node.h>
+#include <linux/idr.h>
 #include <linux/io.h>
+#include <linux/range.h>
 
 /**
  * DOC: cxl objects
diff --git a/drivers/cxl/cxlmem.h b/drivers/cxl/cxlmem.h
index 20fb3b35e89e..7d12844aff91 100644
--- a/drivers/cxl/cxlmem.h
+++ b/drivers/cxl/cxlmem.h
@@ -7,6 +7,7 @@
 #include <linux/uuid.h>
 #include <linux/rcuwait.h>
 #include <linux/cxl-event.h>
+#include <linux/ioport.h>
 #include <linux/node.h>
 #include "cxl.h"
 
diff --git a/drivers/cxl/mem.c b/drivers/cxl/mem.c
index 0c79d9ce877c..44a4fe35af30 100644
--- a/drivers/cxl/mem.c
+++ b/drivers/cxl/mem.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2022 Intel Corporation. All rights reserved. */
 #include <linux/debugfs.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 
diff --git a/drivers/dax/bus.c b/drivers/dax/bus.c
index 27c86d0ca711..ee5277a8f723 100644
--- a/drivers/dax/bus.c
+++ b/drivers/dax/bus.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2017-2018 Intel Corporation. All rights reserved. */
 #include <linux/memremap.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/list.h>
 #include <linux/slab.h>
@@ -9,6 +10,7 @@
 #include <linux/io.h>
 #include "dax-private.h"
 #include "bus.h"
+#include <linux/sprintf.h>
 
 static DEFINE_MUTEX(dax_bus_lock);
 
diff --git a/drivers/dax/pmem.c b/drivers/dax/pmem.c
index f3c6c67b8412..94fd9fdb6c58 100644
--- a/drivers/dax/pmem.c
+++ b/drivers/dax/pmem.c
@@ -6,6 +6,7 @@
 #include "../nvdimm/pfn.h"
 #include "../nvdimm/nd.h"
 #include "bus.h"
+#include <linux/sprintf.h>
 
 static struct dev_dax *__dax_pmem_probe(struct device *dev)
 {
diff --git a/drivers/devfreq/devfreq-event.c b/drivers/devfreq/devfreq-event.c
index 3ebac2496679..649971baca70 100644
--- a/drivers/devfreq/devfreq-event.c
+++ b/drivers/devfreq/devfreq-event.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/list.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 static struct class *devfreq_event_class;
 
diff --git a/drivers/devfreq/devfreq.c b/drivers/devfreq/devfreq.c
index 98657d3b9435..2da451eb7ffb 100644
--- a/drivers/devfreq/devfreq.c
+++ b/drivers/devfreq/devfreq.c
@@ -9,6 +9,7 @@
 
 #include <linux/kernel.h>
 #include <linux/kmod.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/debugfs.h>
 #include <linux/devfreq_cooling.h>
@@ -17,6 +18,7 @@
 #include <linux/init.h>
 #include <linux/export.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/pm_opp.h>
 #include <linux/devfreq.h>
diff --git a/drivers/devfreq/event/rockchip-dfi.c b/drivers/devfreq/event/rockchip-dfi.c
index e2a1e4463b6f..35eeb63180f7 100644
--- a/drivers/devfreq/event/rockchip-dfi.c
+++ b/drivers/devfreq/event/rockchip-dfi.c
@@ -22,6 +22,7 @@
 #include <linux/bitfield.h>
 #include <linux/bits.h>
 #include <linux/perf_event.h>
+#include <linux/hrtimer.h>
 
 #include <soc/rockchip/rockchip_grf.h>
 #include <soc/rockchip/rk3399_grf.h>
diff --git a/drivers/devfreq/governor_userspace.c b/drivers/devfreq/governor_userspace.c
index d69672ccacc4..4c9c4623749b 100644
--- a/drivers/devfreq/governor_userspace.c
+++ b/drivers/devfreq/governor_userspace.c
@@ -13,6 +13,7 @@
 #include <linux/mutex.h>
 #include <linux/module.h>
 #include "governor.h"
+#include <linux/sprintf.h>
 
 struct userspace_data {
 	unsigned long user_frequency;
diff --git a/drivers/dio/dio-sysfs.c b/drivers/dio/dio-sysfs.c
index ee1a3b59bd4e..951b73b99f2d 100644
--- a/drivers/dio/dio-sysfs.c
+++ b/drivers/dio/dio-sysfs.c
@@ -13,6 +13,7 @@
 
 #include <linux/kernel.h>
 #include <linux/dio.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 
 /* show configuration fields */
diff --git a/drivers/dma-buf/dma-heap.c b/drivers/dma-buf/dma-heap.c
index 84ae708fafe7..8580a766fc7d 100644
--- a/drivers/dma-buf/dma-heap.c
+++ b/drivers/dma-buf/dma-heap.c
@@ -11,6 +11,7 @@
 #include <linux/device.h>
 #include <linux/dma-buf.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 #include <linux/list.h>
 #include <linux/slab.h>
diff --git a/drivers/dma-buf/st-dma-fence.c b/drivers/dma-buf/st-dma-fence.c
index b7c6f7ea9e0c..28e5f4cebf5c 100644
--- a/drivers/dma-buf/st-dma-fence.c
+++ b/drivers/dma-buf/st-dma-fence.c
@@ -11,6 +11,7 @@
 #include <linux/sched/signal.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/timer.h>
 
 #include "selftest.h"
 
diff --git a/drivers/dma-buf/sw_sync.c b/drivers/dma-buf/sw_sync.c
index c353029789cf..c25dcf809440 100644
--- a/drivers/dma-buf/sw_sync.c
+++ b/drivers/dma-buf/sw_sync.c
@@ -7,6 +7,7 @@
 
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/slab.h>
 #include <linux/sync_file.h>
diff --git a/drivers/dma-buf/sync_file.c b/drivers/dma-buf/sync_file.c
index d9b1c1b2a72b..4f7607843173 100644
--- a/drivers/dma-buf/sync_file.c
+++ b/drivers/dma-buf/sync_file.c
@@ -13,6 +13,7 @@
 #include <linux/poll.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/anon_inodes.h>
 #include <linux/sync_file.h>
diff --git a/drivers/dma/acpi-dma.c b/drivers/dma/acpi-dma.c
index 5906eae26e2a..c102afaadced 100644
--- a/drivers/dma/acpi-dma.c
+++ b/drivers/dma/acpi-dma.c
@@ -12,6 +12,7 @@
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/list.h>
diff --git a/drivers/dma/altera-msgdma.c b/drivers/dma/altera-msgdma.c
index a8e3615235b8..7d8e4f1f18fa 100644
--- a/drivers/dma/altera-msgdma.c
+++ b/drivers/dma/altera-msgdma.c
@@ -16,6 +16,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
diff --git a/drivers/dma/amba-pl08x.c b/drivers/dma/amba-pl08x.c
index eea8bd33b4b7..8cfafbab7062 100644
--- a/drivers/dma/amba-pl08x.c
+++ b/drivers/dma/amba-pl08x.c
@@ -77,6 +77,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/amba/pl080.h>
 
 #include "dmaengine.h"
diff --git a/drivers/dma/apple-admac.c b/drivers/dma/apple-admac.c
index 9588773dd2eb..70e9db568ab2 100644
--- a/drivers/dma/apple-admac.c
+++ b/drivers/dma/apple-admac.c
@@ -9,6 +9,7 @@
 #include <linux/bitfield.h>
 #include <linux/device.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_dma.h>
diff --git a/drivers/dma/bcm2835-dma.c b/drivers/dma/bcm2835-dma.c
index 9d74fe97452e..5fa0408c4ad8 100644
--- a/drivers/dma/bcm2835-dma.c
+++ b/drivers/dma/bcm2835-dma.c
@@ -31,6 +31,7 @@
 #include <linux/spinlock.h>
 #include <linux/of.h>
 #include <linux/of_dma.h>
+#include <linux/sprintf.h>
 
 #include "virt-dma.h"
 
diff --git a/drivers/dma/dmaengine.c b/drivers/dma/dmaengine.c
index 491b22240221..054276760c72 100644
--- a/drivers/dma/dmaengine.c
+++ b/drivers/dma/dmaengine.c
@@ -52,6 +52,7 @@
 #include <linux/of_dma.h>
 #include <linux/mempool.h>
 #include <linux/numa.h>
+#include <linux/sprintf.h>
 
 #include "dmaengine.h"
 
diff --git a/drivers/dma/dw-edma/dw-edma-core.c b/drivers/dma/dw-edma/dw-edma-core.c
index 68236247059d..b83839cf4d58 100644
--- a/drivers/dma/dw-edma/dw-edma-core.c
+++ b/drivers/dma/dw-edma/dw-edma-core.c
@@ -15,6 +15,7 @@
 #include <linux/irq.h>
 #include <linux/dma/edma.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 
 #include "dw-edma-core.h"
 #include "dw-edma-v0-core.h"
diff --git a/drivers/dma/dw-edma/dw-edma-v0-core.c b/drivers/dma/dw-edma/dw-edma-v0-core.c
index b75fdaffad9a..15b3d0b4cef6 100644
--- a/drivers/dma/dw-edma/dw-edma-v0-core.c
+++ b/drivers/dma/dw-edma/dw-edma-v0-core.c
@@ -9,6 +9,7 @@
 #include <linux/bitfield.h>
 #include <linux/irqreturn.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "dw-edma-core.h"
 #include "dw-edma-v0-core.h"
diff --git a/drivers/dma/dw-edma/dw-edma-v0-debugfs.c b/drivers/dma/dw-edma/dw-edma-v0-debugfs.c
index 406f169b09a7..19fb86b4d6ec 100644
--- a/drivers/dma/dw-edma/dw-edma-v0-debugfs.c
+++ b/drivers/dma/dw-edma/dw-edma-v0-debugfs.c
@@ -8,6 +8,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 
 #include "dw-edma-v0-debugfs.h"
 #include "dw-edma-v0-regs.h"
diff --git a/drivers/dma/dw-edma/dw-hdma-v0-core.c b/drivers/dma/dw-edma/dw-hdma-v0-core.c
index 10e8f0715114..a00cce8de098 100644
--- a/drivers/dma/dw-edma/dw-hdma-v0-core.c
+++ b/drivers/dma/dw-edma/dw-hdma-v0-core.c
@@ -7,6 +7,7 @@
 #include <linux/bitfield.h>
 #include <linux/irqreturn.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/kernel.h> // for lower_32_bits(), upper_32_bits()
 
 #include "dw-edma-core.h"
 #include "dw-hdma-v0-core.h"
diff --git a/drivers/dma/dw-edma/dw-hdma-v0-debugfs.c b/drivers/dma/dw-edma/dw-hdma-v0-debugfs.c
index dcdc57fe976c..c1f2eb50aa0f 100644
--- a/drivers/dma/dw-edma/dw-hdma-v0-debugfs.c
+++ b/drivers/dma/dw-edma/dw-hdma-v0-debugfs.c
@@ -8,6 +8,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 
 #include "dw-hdma-v0-debugfs.h"
 #include "dw-hdma-v0-regs.h"
diff --git a/drivers/dma/dw/dw.c b/drivers/dma/dw/dw.c
index a4862263ff14..83b8acad34ab 100644
--- a/drivers/dma/dw/dw.c
+++ b/drivers/dma/dw/dw.c
@@ -7,6 +7,7 @@
 #include <linux/dmaengine.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "internal.h"
diff --git a/drivers/dma/dw/idma32.c b/drivers/dma/dw/idma32.c
index 58f4078d83fe..ffbc299b1426 100644
--- a/drivers/dma/dw/idma32.c
+++ b/drivers/dma/dw/idma32.c
@@ -7,6 +7,7 @@
 #include <linux/io.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "internal.h"
diff --git a/drivers/dma/fsl-edma-common.c b/drivers/dma/fsl-edma-common.c
index b18faa7cfedb..61041b492767 100644
--- a/drivers/dma/fsl-edma-common.c
+++ b/drivers/dma/fsl-edma-common.c
@@ -4,6 +4,7 @@
 // Copyright (c) 2017 Sysam, Angelo Dureghello  <angelo@sysam.it>
 
 #include <linux/dmapool.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/dma/fsl-edma-main.c b/drivers/dma/fsl-edma-main.c
index 8fff86c16614..a1f1ce58e2c2 100644
--- a/drivers/dma/fsl-edma-main.c
+++ b/drivers/dma/fsl-edma-main.c
@@ -19,6 +19,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/pm_domain.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #include "fsl-edma-common.h"
 
diff --git a/drivers/dma/fsl-qdma.c b/drivers/dma/fsl-qdma.c
index 1e3bf6f30f78..ec98c053bc3a 100644
--- a/drivers/dma/fsl-qdma.c
+++ b/drivers/dma/fsl-qdma.c
@@ -13,10 +13,12 @@
 
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of.h>
 #include <linux/of_dma.h>
 #include <linux/dma-mapping.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "virt-dma.h"
 #include "fsldma.h"
diff --git a/drivers/dma/fsl_raid.c b/drivers/dma/fsl_raid.c
index 014ff523d5ec..ab037f51531a 100644
--- a/drivers/dma/fsl_raid.c
+++ b/drivers/dma/fsl_raid.c
@@ -59,6 +59,7 @@
  *	thread.
  */
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_irq.h>
@@ -70,6 +71,7 @@
 #include <linux/io.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "dmaengine.h"
 #include "fsl_raid.h"
diff --git a/drivers/dma/fsldma.c b/drivers/dma/fsldma.c
index 18a6c4bf6275..042d2f3ea333 100644
--- a/drivers/dma/fsldma.c
+++ b/drivers/dma/fsldma.c
@@ -35,6 +35,7 @@
 #include <linux/fsldma.h>
 #include "dmaengine.h"
 #include "fsldma.h"
+#include <linux/sprintf.h>
 
 #define chan_dbg(chan, fmt, arg...)					\
 	dev_dbg(chan->dev, "%s: " fmt, chan->name, ##arg)
diff --git a/drivers/dma/hisi_dma.c b/drivers/dma/hisi_dma.c
index 4c47bff81064..8f1e6a5198aa 100644
--- a/drivers/dma/hisi_dma.c
+++ b/drivers/dma/hisi_dma.c
@@ -5,10 +5,12 @@
 #include <linux/dmaengine.h>
 #include <linux/init.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/spinlock.h>
 #include "virt-dma.h"
+#include <linux/sprintf.h>
 
 /* HiSilicon DMA register common field define */
 #define HISI_DMA_Q_SQ_BASE_L			0x0
diff --git a/drivers/dma/idxd/bus.c b/drivers/dma/idxd/bus.c
index 0c9e689a2e77..ee68e2b6404e 100644
--- a/drivers/dma/idxd/bus.c
+++ b/drivers/dma/idxd/bus.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2021 Intel Corporation. All rights rsvd. */
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/device.h>
 #include "idxd.h"
diff --git a/drivers/dma/idxd/device.c b/drivers/dma/idxd/device.c
index ecfdf4a8f1f8..5be6b82ea685 100644
--- a/drivers/dma/idxd/device.c
+++ b/drivers/dma/idxd/device.c
@@ -11,6 +11,7 @@
 #include "../dmaengine.h"
 #include "idxd.h"
 #include "registers.h"
+#include <linux/completion.h>
 
 static void idxd_cmd_exec(struct idxd_device *idxd, int cmd_code, u32 operand,
 			  u32 *status);
diff --git a/drivers/dma/idxd/init.c b/drivers/dma/idxd/init.c
index 14df1f1347a8..4f5d3319f979 100644
--- a/drivers/dma/idxd/init.c
+++ b/drivers/dma/idxd/init.c
@@ -20,6 +20,7 @@
 #include "registers.h"
 #include "idxd.h"
 #include "perfmon.h"
+#include <linux/completion.h>
 
 MODULE_VERSION(IDXD_DRIVER_VERSION);
 MODULE_LICENSE("GPL v2");
diff --git a/drivers/dma/idxd/irq.c b/drivers/dma/idxd/irq.c
index c8a0aa874b11..cfcfbd4374f7 100644
--- a/drivers/dma/idxd/irq.c
+++ b/drivers/dma/idxd/irq.c
@@ -13,6 +13,7 @@
 #include "../dmaengine.h"
 #include "idxd.h"
 #include "registers.h"
+#include <linux/completion.h>
 
 enum irq_work_type {
 	IRQ_WORK_NORMAL = 0,
diff --git a/drivers/dma/idxd/perfmon.c b/drivers/dma/idxd/perfmon.c
index 4dd9c0d979c3..7ae5f5c2958b 100644
--- a/drivers/dma/idxd/perfmon.c
+++ b/drivers/dma/idxd/perfmon.c
@@ -5,6 +5,7 @@
 #include <linux/io-64-nonatomic-lo-hi.h>
 #include "idxd.h"
 #include "perfmon.h"
+#include <linux/sprintf.h>
 
 static ssize_t cpumask_show(struct device *dev, struct device_attribute *attr,
 			    char *buf);
diff --git a/drivers/dma/idxd/perfmon.h b/drivers/dma/idxd/perfmon.h
index 9a081a1bc605..6a27e2a0ba09 100644
--- a/drivers/dma/idxd/perfmon.h
+++ b/drivers/dma/idxd/perfmon.h
@@ -9,6 +9,7 @@
 #include <linux/sbitmap.h>
 #include <linux/dmaengine.h>
 #include <linux/percpu-rwsem.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/cdev.h>
 #include <linux/uuid.h>
diff --git a/drivers/dma/idxd/submit.c b/drivers/dma/idxd/submit.c
index 817a564413b0..d99b1f96e953 100644
--- a/drivers/dma/idxd/submit.c
+++ b/drivers/dma/idxd/submit.c
@@ -7,6 +7,7 @@
 #include <uapi/linux/idxd.h>
 #include "idxd.h"
 #include "registers.h"
+#include <linux/completion.h>
 
 static struct idxd_desc *__get_desc(struct idxd_wq *wq, int idx, int cpu)
 {
diff --git a/drivers/dma/idxd/sysfs.c b/drivers/dma/idxd/sysfs.c
index 523ae0dff7d4..c104a42b8710 100644
--- a/drivers/dma/idxd/sysfs.c
+++ b/drivers/dma/idxd/sysfs.c
@@ -2,10 +2,12 @@
 /* Copyright(c) 2019 Intel Corporation. All rights rsvd. */
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/device.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/idxd.h>
 #include "registers.h"
 #include "idxd.h"
diff --git a/drivers/dma/ioat/dma.c b/drivers/dma/ioat/dma.c
index 79d8957f9e60..d8a84d49dda1 100644
--- a/drivers/dma/ioat/dma.c
+++ b/drivers/dma/ioat/dma.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
diff --git a/drivers/dma/ioat/init.c b/drivers/dma/ioat/init.c
index 9c364e92cb82..a4b3905272bf 100644
--- a/drivers/dma/ioat/init.c
+++ b/drivers/dma/ioat/init.c
@@ -12,6 +12,7 @@
 #include <linux/dmaengine.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/prefetch.h>
 #include <linux/dca.h>
@@ -19,6 +20,7 @@
 #include "dma.h"
 #include "registers.h"
 #include "hw.h"
+#include <linux/completion.h>
 
 #include "../dmaengine.h"
 
diff --git a/drivers/dma/ioat/sysfs.c b/drivers/dma/ioat/sysfs.c
index 168adf28c5b1..ad82378ad2fd 100644
--- a/drivers/dma/ioat/sysfs.c
+++ b/drivers/dma/ioat/sysfs.c
@@ -5,12 +5,14 @@
  */
 
 #include <linux/init.h>
+#include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/dmaengine.h>
 #include <linux/pci.h>
 #include "dma.h"
 #include "registers.h"
 #include "hw.h"
+#include <linux/sprintf.h>
 
 #include "../dmaengine.h"
 
diff --git a/drivers/dma/lgm/lgm-dma.c b/drivers/dma/lgm/lgm-dma.c
index 4117c7b67e9c..2fc2f40ea9df 100644
--- a/drivers/dma/lgm/lgm-dma.c
+++ b/drivers/dma/lgm/lgm-dma.c
@@ -14,10 +14,12 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of_dma.h>
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include "../dmaengine.h"
 #include "../virt-dma.h"
diff --git a/drivers/dma/ls2x-apb-dma.c b/drivers/dma/ls2x-apb-dma.c
index a49913f3ed3f..94b44c39cfa8 100644
--- a/drivers/dma/ls2x-apb-dma.c
+++ b/drivers/dma/ls2x-apb-dma.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_dma.h>
diff --git a/drivers/dma/mediatek/mtk-cqdma.c b/drivers/dma/mediatek/mtk-cqdma.c
index 529100c5b9f5..894eadeebe3a 100644
--- a/drivers/dma/mediatek/mtk-cqdma.c
+++ b/drivers/dma/mediatek/mtk-cqdma.c
@@ -10,6 +10,7 @@
 
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
diff --git a/drivers/dma/mediatek/mtk-hsdma.c b/drivers/dma/mediatek/mtk-hsdma.c
index 36ff11e909ea..2d3fee7c908e 100644
--- a/drivers/dma/mediatek/mtk-hsdma.c
+++ b/drivers/dma/mediatek/mtk-hsdma.c
@@ -10,6 +10,7 @@
 
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
diff --git a/drivers/dma/mv_xor_v2.c b/drivers/dma/mv_xor_v2.c
index 1ebfbe88e733..77dc08ab8f0f 100644
--- a/drivers/dma/mv_xor_v2.c
+++ b/drivers/dma/mv_xor_v2.c
@@ -8,6 +8,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/msi.h>
 #include <linux/of.h>
diff --git a/drivers/dma/nbpfaxi.c b/drivers/dma/nbpfaxi.c
index c08916339aa7..053b735c663f 100644
--- a/drivers/dma/nbpfaxi.c
+++ b/drivers/dma/nbpfaxi.c
@@ -18,6 +18,7 @@
 #include <linux/of_dma.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/dma/nbpfaxi.h>
 
diff --git a/drivers/dma/plx_dma.c b/drivers/dma/plx_dma.c
index 34b6416c3287..252a83be5da1 100644
--- a/drivers/dma/plx_dma.c
+++ b/drivers/dma/plx_dma.c
@@ -6,6 +6,7 @@
  */
 
 #include "dmaengine.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/circ_buf.h>
 #include <linux/dmaengine.h>
diff --git a/drivers/dma/ppc4xx/adma.c b/drivers/dma/ppc4xx/adma.c
index bbb60a970dab..16a146f11781 100644
--- a/drivers/dma/ppc4xx/adma.c
+++ b/drivers/dma/ppc4xx/adma.c
@@ -16,8 +16,10 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/async_tx.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/spinlock.h>
diff --git a/drivers/dma/ptdma/ptdma-dev.c b/drivers/dma/ptdma/ptdma-dev.c
index a2bf13ff18b6..b6712ab14ff9 100644
--- a/drivers/dma/ptdma/ptdma-dev.c
+++ b/drivers/dma/ptdma/ptdma-dev.c
@@ -16,6 +16,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "ptdma.h"
 
diff --git a/drivers/dma/pxa_dma.c b/drivers/dma/pxa_dma.c
index 31f8da810c05..c56df374856e 100644
--- a/drivers/dma/pxa_dma.c
+++ b/drivers/dma/pxa_dma.c
@@ -6,6 +6,7 @@
 #include <linux/err.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/dma/qcom/gpi.c b/drivers/dma/qcom/gpi.c
index 1c93864e0e4d..3364e868314b 100644
--- a/drivers/dma/qcom/gpi.c
+++ b/drivers/dma/qcom/gpi.c
@@ -6,8 +6,10 @@
 
 #include <dt-bindings/dma/qcom-gpi.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of_dma.h>
 #include <linux/platform_device.h>
diff --git a/drivers/dma/qcom/hidma.c b/drivers/dma/qcom/hidma.c
index d63b93dc7047..1336d6435a91 100644
--- a/drivers/dma/qcom/hidma.c
+++ b/drivers/dma/qcom/hidma.c
@@ -58,6 +58,7 @@
 #include <linux/atomic.h>
 #include <linux/pm_runtime.h>
 #include <linux/msi.h>
+#include <linux/sprintf.h>
 
 #include "../dmaengine.h"
 #include "hidma.h"
diff --git a/drivers/dma/qcom/hidma_dbg.c b/drivers/dma/qcom/hidma_dbg.c
index ce87c7937a0e..4f425cf4b776 100644
--- a/drivers/dma/qcom/hidma_dbg.c
+++ b/drivers/dma/qcom/hidma_dbg.c
@@ -9,6 +9,7 @@
 #include <linux/device.h>
 #include <linux/list.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "hidma.h"
 
diff --git a/drivers/dma/qcom/hidma_ll.c b/drivers/dma/qcom/hidma_ll.c
index 53244e0e34a3..bef519c19c41 100644
--- a/drivers/dma/qcom/hidma_ll.c
+++ b/drivers/dma/qcom/hidma_ll.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/dmaengine.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/mm.h>
@@ -14,6 +15,7 @@
 #include <linux/delay.h>
 #include <linux/atomic.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kfifo.h>
 #include <linux/bitops.h>
 
diff --git a/drivers/dma/qcom/hidma_mgmt_sys.c b/drivers/dma/qcom/hidma_mgmt_sys.c
index 930eae0a6257..c64d019b4445 100644
--- a/drivers/dma/qcom/hidma_mgmt_sys.c
+++ b/drivers/dma/qcom/hidma_mgmt_sys.c
@@ -7,6 +7,8 @@
 
 #include <linux/sysfs.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "hidma_mgmt.h"
 
diff --git a/drivers/dma/sh/rcar-dmac.c b/drivers/dma/sh/rcar-dmac.c
index 40482cb73d79..75f8c85db8e2 100644
--- a/drivers/dma/sh/rcar-dmac.c
+++ b/drivers/dma/sh/rcar-dmac.c
@@ -21,6 +21,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "../dmaengine.h"
 
diff --git a/drivers/dma/sh/rz-dmac.c b/drivers/dma/sh/rz-dmac.c
index 1f1e86ba5c66..b91cb128b783 100644
--- a/drivers/dma/sh/rz-dmac.c
+++ b/drivers/dma/sh/rz-dmac.c
@@ -24,6 +24,7 @@
 #include <linux/reset.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "../dmaengine.h"
 #include "../virt-dma.h"
diff --git a/drivers/dma/sh/shdmac.c b/drivers/dma/sh/shdmac.c
index 7cc9eb2217e8..8420d1f51c5d 100644
--- a/drivers/dma/sh/shdmac.c
+++ b/drivers/dma/sh/shdmac.c
@@ -29,6 +29,7 @@
 #include <linux/sh_dma.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "../dmaengine.h"
 #include "shdma.h"
diff --git a/drivers/dma/sh/usb-dmac.c b/drivers/dma/sh/usb-dmac.c
index f7cd0cad056c..b62d783e00b6 100644
--- a/drivers/dma/sh/usb-dmac.c
+++ b/drivers/dma/sh/usb-dmac.c
@@ -22,6 +22,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "../dmaengine.h"
 #include "../virt-dma.h"
diff --git a/drivers/dma/st_fdma.c b/drivers/dma/st_fdma.c
index 8880b5e336f8..f65400ef3f75 100644
--- a/drivers/dma/st_fdma.c
+++ b/drivers/dma/st_fdma.c
@@ -17,6 +17,7 @@
 #include <linux/interrupt.h>
 #include <linux/remoteproc.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "st_fdma.h"
 
diff --git a/drivers/dma/sun6i-dma.c b/drivers/dma/sun6i-dma.c
index 583bf49031cf..28bc7b2996d5 100644
--- a/drivers/dma/sun6i-dma.c
+++ b/drivers/dma/sun6i-dma.c
@@ -13,6 +13,7 @@
 #include <linux/dmaengine.h>
 #include <linux/dmapool.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_dma.h>
diff --git a/drivers/dma/tegra186-gpc-dma.c b/drivers/dma/tegra186-gpc-dma.c
index 88547a23825b..cee14883756e 100644
--- a/drivers/dma/tegra186-gpc-dma.c
+++ b/drivers/dma/tegra186-gpc-dma.c
@@ -20,6 +20,7 @@
 #include <linux/slab.h>
 #include <dt-bindings/memory/tegra186-mc.h>
 #include "virt-dma.h"
+#include <linux/sprintf.h>
 
 /* CSR register */
 #define TEGRA_GPCDMA_CHAN_CSR			0x00
diff --git a/drivers/dma/tegra20-apb-dma.c b/drivers/dma/tegra20-apb-dma.c
index ac69778827f2..ed6067904140 100644
--- a/drivers/dma/tegra20-apb-dma.c
+++ b/drivers/dma/tegra20-apb-dma.c
@@ -23,6 +23,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #include "dmaengine.h"
diff --git a/drivers/dma/ti/cppi41.c b/drivers/dma/ti/cppi41.c
index 7e0b06b5dff0..29288e5c7676 100644
--- a/drivers/dma/ti/cppi41.c
+++ b/drivers/dma/ti/cppi41.c
@@ -2,6 +2,7 @@
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/platform_device.h>
 #include <linux/module.h>
 #include <linux/of.h>
diff --git a/drivers/dma/uniphier-xdmac.c b/drivers/dma/uniphier-xdmac.c
index 3ce2dc2ad9de..16f15b695054 100644
--- a/drivers/dma/uniphier-xdmac.c
+++ b/drivers/dma/uniphier-xdmac.c
@@ -8,6 +8,7 @@
 #include <linux/bitops.h>
 #include <linux/bitfield.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_dma.h>
diff --git a/drivers/dma/xgene-dma.c b/drivers/dma/xgene-dma.c
index fd4397adeb79..d461a963003c 100644
--- a/drivers/dma/xgene-dma.c
+++ b/drivers/dma/xgene-dma.c
@@ -21,6 +21,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "dmaengine.h"
 
diff --git a/drivers/dma/xilinx/xdma.c b/drivers/dma/xilinx/xdma.c
index 170017ff2aad..e9fc83149226 100644
--- a/drivers/dma/xilinx/xdma.c
+++ b/drivers/dma/xilinx/xdma.c
@@ -23,6 +23,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/bitfield.h>
 #include <linux/dmapool.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/regmap.h>
 #include <linux/dmaengine.h>
 #include <linux/dma/amd_xdma.h>
diff --git a/drivers/dma/xilinx/xilinx_dma.c b/drivers/dma/xilinx/xilinx_dma.c
index 5eb51ae93e89..81768c511cb7 100644
--- a/drivers/dma/xilinx/xilinx_dma.c
+++ b/drivers/dma/xilinx/xilinx_dma.c
@@ -40,6 +40,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_dma.h>
diff --git a/drivers/dma/xilinx/xilinx_dpdma.c b/drivers/dma/xilinx/xilinx_dpdma.c
index b82815e64d24..04780b9934bb 100644
--- a/drivers/dma/xilinx/xilinx_dpdma.c
+++ b/drivers/dma/xilinx/xilinx_dpdma.c
@@ -16,6 +16,8 @@
 #include <linux/dmaengine.h>
 #include <linux/dmapool.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_dma.h>
@@ -23,6 +25,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #include <dt-bindings/dma/xlnx-zynqmp-dpdma.h>
diff --git a/drivers/edac/al_mc_edac.c b/drivers/edac/al_mc_edac.c
index 178b9e581a72..dc82fdcd0e15 100644
--- a/drivers/edac/al_mc_edac.c
+++ b/drivers/edac/al_mc_edac.c
@@ -9,6 +9,7 @@
 #include <linux/platform_device.h>
 #include <linux/spinlock.h>
 #include "edac_module.h"
+#include <linux/sprintf.h>
 
 /* Registers Offset */
 #define AL_MC_ECC_CFG		0x70
diff --git a/drivers/edac/amd64_edac.c b/drivers/edac/amd64_edac.c
index ee2f3ff15ab7..5d5e440dcda9 100644
--- a/drivers/edac/amd64_edac.c
+++ b/drivers/edac/amd64_edac.c
@@ -2,6 +2,8 @@
 #include <linux/ras.h>
 #include "amd64_edac.h"
 #include <asm/amd_nb.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static struct edac_pci_ctl_info *pci_ctl;
 
diff --git a/drivers/edac/armada_xp_edac.c b/drivers/edac/armada_xp_edac.c
index 25517c99b3ea..f8ae3944f02e 100644
--- a/drivers/edac/armada_xp_edac.c
+++ b/drivers/edac/armada_xp_edac.c
@@ -8,6 +8,7 @@
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <asm/hardware/cache-l2x0.h>
 #include <asm/hardware/cache-aurora-l2.h>
diff --git a/drivers/edac/debugfs.c b/drivers/edac/debugfs.c
index 4804332d9946..4666be48babe 100644
--- a/drivers/edac/debugfs.c
+++ b/drivers/edac/debugfs.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include "edac_module.h"
+#include <linux/sprintf.h>
 
 static struct dentry *edac_debugfs;
 
diff --git a/drivers/edac/dmc520_edac.c b/drivers/edac/dmc520_edac.c
index 4e30b989a1a4..7299e26b30f5 100644
--- a/drivers/edac/dmc520_edac.c
+++ b/drivers/edac/dmc520_edac.c
@@ -21,6 +21,7 @@
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include "edac_mc.h"
+#include <linux/sprintf.h>
 
 /* DMC-520 registers */
 #define REG_OFFSET_FEATURE_CONFIG			0x130
diff --git a/drivers/edac/edac_device.c b/drivers/edac/edac_device.c
index 0689e1510721..3f6f4c30e072 100644
--- a/drivers/edac/edac_device.c
+++ b/drivers/edac/edac_device.c
@@ -13,6 +13,7 @@
  */
 
 #include <asm/page.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/ctype.h>
 #include <linux/highmem.h>
diff --git a/drivers/edac/edac_device_sysfs.c b/drivers/edac/edac_device_sysfs.c
index 237a542e045a..32ae3779c676 100644
--- a/drivers/edac/edac_device_sysfs.c
+++ b/drivers/edac/edac_device_sysfs.c
@@ -11,9 +11,11 @@
  */
 
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/edac.h>
+#include <linux/sprintf.h>
 
 #include "edac_device.h"
 #include "edac_module.h"
diff --git a/drivers/edac/edac_mc.c b/drivers/edac/edac_mc.c
index d6eed727b0cd..aabb49757f2c 100644
--- a/drivers/edac/edac_mc.c
+++ b/drivers/edac/edac_mc.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/proc_fs.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/smp.h>
 #include <linux/init.h>
diff --git a/drivers/edac/edac_mc_sysfs.c b/drivers/edac/edac_mc_sysfs.c
index 5116873c3330..dbd671e2c685 100644
--- a/drivers/edac/edac_mc_sysfs.c
+++ b/drivers/edac/edac_mc_sysfs.c
@@ -13,10 +13,12 @@
  */
 
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/edac.h>
 #include <linux/bug.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "edac_mc.h"
diff --git a/drivers/edac/edac_module.c b/drivers/edac/edac_module.c
index 1c9f62382666..f553ec659e3f 100644
--- a/drivers/edac/edac_module.c
+++ b/drivers/edac/edac_module.c
@@ -11,6 +11,7 @@
  *
  */
 #include <linux/edac.h>
+#include <linux/kstrtox.h>
 
 #include "edac_mc.h"
 #include "edac_module.h"
diff --git a/drivers/edac/edac_pci.c b/drivers/edac/edac_pci.c
index 64c142aecca7..a454da8c37c6 100644
--- a/drivers/edac/edac_pci.c
+++ b/drivers/edac/edac_pci.c
@@ -7,6 +7,7 @@
  * 2007 (c) MontaVista Software, Inc.
  */
 #include <asm/page.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/ctype.h>
 #include <linux/highmem.h>
diff --git a/drivers/edac/edac_pci_sysfs.c b/drivers/edac/edac_pci_sysfs.c
index 7b44afcf48db..015e0a7edd96 100644
--- a/drivers/edac/edac_pci_sysfs.c
+++ b/drivers/edac/edac_pci_sysfs.c
@@ -8,8 +8,10 @@
  */
 #include <linux/module.h>
 #include <linux/edac.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 
 #include "edac_pci.h"
 #include "edac_module.h"
diff --git a/drivers/edac/fsl_ddr_edac.c b/drivers/edac/fsl_ddr_edac.c
index d148d262d0d4..90478fdd6c93 100644
--- a/drivers/edac/fsl_ddr_edac.c
+++ b/drivers/edac/fsl_ddr_edac.c
@@ -17,10 +17,12 @@
 #include <linux/interrupt.h>
 #include <linux/ctype.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/edac.h>
 #include <linux/smp.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 
 #include <linux/of.h>
 #include <linux/of_address.h>
diff --git a/drivers/edac/ghes_edac.c b/drivers/edac/ghes_edac.c
index cf2b618c1ada..343672adfc36 100644
--- a/drivers/edac/ghes_edac.c
+++ b/drivers/edac/ghes_edac.c
@@ -13,6 +13,7 @@
 #include <linux/edac.h>
 #include <linux/dmi.h>
 #include "edac_module.h"
+#include <linux/sprintf.h>
 #include <ras/ras_event.h>
 #include <linux/notifier.h>
 
diff --git a/drivers/edac/highbank_mc_edac.c b/drivers/edac/highbank_mc_edac.c
index 1c5b888ab11d..74ac4f7c71d5 100644
--- a/drivers/edac/highbank_mc_edac.c
+++ b/drivers/edac/highbank_mc_edac.c
@@ -7,6 +7,7 @@
 #include <linux/ctype.h>
 #include <linux/edac.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/platform_device.h>
diff --git a/drivers/edac/i10nm_base.c b/drivers/edac/i10nm_base.c
index 3fd22a1eb1a9..72968bf70a05 100644
--- a/drivers/edac/i10nm_base.c
+++ b/drivers/edac/i10nm_base.c
@@ -12,6 +12,8 @@
 #include <asm/mce.h>
 #include "edac_module.h"
 #include "skx_common.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define I10NM_REVISION	"v0.0.6"
 #define EDAC_MOD_STR	"i10nm_edac"
diff --git a/drivers/edac/i5000_edac.c b/drivers/edac/i5000_edac.c
index 4b5a71f8739d..674418a44482 100644
--- a/drivers/edac/i5000_edac.c
+++ b/drivers/edac/i5000_edac.c
@@ -21,6 +21,7 @@
 #include <linux/slab.h>
 #include <linux/edac.h>
 #include <asm/mmzone.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/i5100_edac.c b/drivers/edac/i5100_edac.c
index d470afe65001..65a7db632b69 100644
--- a/drivers/edac/i5100_edac.c
+++ b/drivers/edac/i5100_edac.c
@@ -28,6 +28,7 @@
 #include <linux/delay.h>
 #include <linux/mmzone.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/i5400_edac.c b/drivers/edac/i5400_edac.c
index 49b4499269fb..030090e36acf 100644
--- a/drivers/edac/i5400_edac.c
+++ b/drivers/edac/i5400_edac.c
@@ -31,6 +31,7 @@
 #include <linux/slab.h>
 #include <linux/edac.h>
 #include <linux/mmzone.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/i7300_edac.c b/drivers/edac/i7300_edac.c
index 61adaa872ba7..21f6449633de 100644
--- a/drivers/edac/i7300_edac.c
+++ b/drivers/edac/i7300_edac.c
@@ -23,6 +23,7 @@
 #include <linux/slab.h>
 #include <linux/edac.h>
 #include <linux/mmzone.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/i7core_edac.c b/drivers/edac/i7core_edac.c
index 91e0a88ef904..f1b5aece3827 100644
--- a/drivers/edac/i7core_edac.c
+++ b/drivers/edac/i7core_edac.c
@@ -25,6 +25,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/pci_ids.h>
 #include <linux/slab.h>
@@ -36,6 +37,7 @@
 #include <asm/mce.h>
 #include <asm/processor.h>
 #include <asm/div64.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/i82975x_edac.c b/drivers/edac/i82975x_edac.c
index d99f005832cf..a6214e8a2d31 100644
--- a/drivers/edac/i82975x_edac.c
+++ b/drivers/edac/i82975x_edac.c
@@ -15,6 +15,7 @@
 #include <linux/pci_ids.h>
 #include <linux/edac.h>
 #include "edac_module.h"
+#include <linux/sprintf.h>
 
 #define EDAC_MOD_STR		"i82975x_edac"
 
diff --git a/drivers/edac/igen6_edac.c b/drivers/edac/igen6_edac.c
index cdd8480e7368..ef2fdf535aa3 100644
--- a/drivers/edac/igen6_edac.c
+++ b/drivers/edac/igen6_edac.c
@@ -23,6 +23,7 @@
 #include <asm/mach_traps.h>
 #include <asm/nmi.h>
 #include <asm/mce.h>
+#include <linux/sprintf.h>
 
 #include "edac_mc.h"
 #include "edac_module.h"
diff --git a/drivers/edac/mpc85xx_edac.c b/drivers/edac/mpc85xx_edac.c
index c1bc53f4e184..49f8826f950b 100644
--- a/drivers/edac/mpc85xx_edac.c
+++ b/drivers/edac/mpc85xx_edac.c
@@ -16,11 +16,13 @@
 #include <linux/interrupt.h>
 #include <linux/ctype.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/edac.h>
 #include <linux/smp.h>
 #include <linux/gfp.h>
 #include <linux/fsl/edac.h>
+#include <linux/sprintf.h>
 
 #include <linux/of.h>
 #include <linux/of_address.h>
diff --git a/drivers/edac/npcm_edac.c b/drivers/edac/npcm_edac.c
index 2e2133b784e9..c38f0b95d666 100644
--- a/drivers/edac/npcm_edac.c
+++ b/drivers/edac/npcm_edac.c
@@ -7,6 +7,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include "edac_module.h"
+#include <linux/sprintf.h>
 
 #define EDAC_MOD_NAME			"npcm-edac"
 #define EDAC_MSG_SIZE			256
diff --git a/drivers/edac/octeon_edac-l2c.c b/drivers/edac/octeon_edac-l2c.c
index 4015eb9af6fe..3c5afe5f7ff5 100644
--- a/drivers/edac/octeon_edac-l2c.c
+++ b/drivers/edac/octeon_edac-l2c.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/edac.h>
+#include <linux/sprintf.h>
 
 #include <asm/octeon/cvmx.h>
 
diff --git a/drivers/edac/octeon_edac-lmc.c b/drivers/edac/octeon_edac-lmc.c
index 18615cbcd9ea..cb161b7e2b14 100644
--- a/drivers/edac/octeon_edac-lmc.c
+++ b/drivers/edac/octeon_edac-lmc.c
@@ -11,10 +11,12 @@
  */
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/edac.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 
 #include <asm/octeon/octeon.h>
 #include <asm/octeon/cvmx-lmcx-defs.h>
diff --git a/drivers/edac/pnd2_edac.c b/drivers/edac/pnd2_edac.c
index 2afcd148fcf8..2ec70761dbe5 100644
--- a/drivers/edac/pnd2_edac.c
+++ b/drivers/edac/pnd2_edac.c
@@ -29,6 +29,7 @@
 #include <linux/sizes.h>
 #include <linux/slab.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_data/x86/p2sb.h>
 
diff --git a/drivers/edac/ppc4xx_edac.c b/drivers/edac/ppc4xx_edac.c
index 1eea3341a916..223b4c099d59 100644
--- a/drivers/edac/ppc4xx_edac.c
+++ b/drivers/edac/ppc4xx_edac.c
@@ -13,6 +13,7 @@
 #include <linux/of_device.h>
 #include <linux/of_irq.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include <asm/dcr.h>
diff --git a/drivers/edac/sb_edac.c b/drivers/edac/sb_edac.c
index 26cca5a9322d..87ecb6b9c969 100644
--- a/drivers/edac/sb_edac.c
+++ b/drivers/edac/sb_edac.c
@@ -24,6 +24,7 @@
 #include <asm/intel-family.h>
 #include <asm/processor.h>
 #include <asm/mce.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/skx_base.c b/drivers/edac/skx_base.c
index 0a862336a7ce..ebec5371bca1 100644
--- a/drivers/edac/skx_base.c
+++ b/drivers/edac/skx_base.c
@@ -9,6 +9,7 @@
 #include <asm/cpu_device_id.h>
 #include <asm/intel-family.h>
 #include <asm/mce.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 #include "skx_common.h"
diff --git a/drivers/edac/skx_common.c b/drivers/edac/skx_common.c
index 9c5b6f8bd8bd..c709e5775aa0 100644
--- a/drivers/edac/skx_common.c
+++ b/drivers/edac/skx_common.c
@@ -21,6 +21,7 @@
 #include <asm/mce.h>
 #include "edac_module.h"
 #include "skx_common.h"
+#include <linux/sprintf.h>
 
 static const char * const component_names[] = {
 	[INDEX_SOCKET]		= "ProcessorSocketId",
diff --git a/drivers/edac/synopsys_edac.c b/drivers/edac/synopsys_edac.c
index 5527055b0964..d7cb9786ee56 100644
--- a/drivers/edac/synopsys_edac.c
+++ b/drivers/edac/synopsys_edac.c
@@ -7,10 +7,12 @@
  */
 
 #include <linux/edac.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/interrupt.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/thunderx_edac.c b/drivers/edac/thunderx_edac.c
index 90d46e5c4ff0..e99ce19e6574 100644
--- a/drivers/edac/thunderx_edac.c
+++ b/drivers/edac/thunderx_edac.c
@@ -13,6 +13,7 @@
 #include <linux/pci.h>
 #include <linux/edac.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/stop_machine.h>
 #include <linux/delay.h>
diff --git a/drivers/edac/versal_edac.c b/drivers/edac/versal_edac.c
index 62caf454b567..94f4c49d49c3 100644
--- a/drivers/edac/versal_edac.c
+++ b/drivers/edac/versal_edac.c
@@ -14,6 +14,7 @@
 #include <linux/sizes.h>
 #include <linux/firmware/xlnx-zynqmp.h>
 #include <linux/firmware/xlnx-event-manager.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/xgene_edac.c b/drivers/edac/xgene_edac.c
index 1b50f8160013..945d95909504 100644
--- a/drivers/edac/xgene_edac.c
+++ b/drivers/edac/xgene_edac.c
@@ -15,6 +15,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/edac/zynqmp_edac.c b/drivers/edac/zynqmp_edac.c
index 2d9a5cfd8931..29a93a89de1e 100644
--- a/drivers/edac/zynqmp_edac.c
+++ b/drivers/edac/zynqmp_edac.c
@@ -7,10 +7,12 @@
 
 #include <linux/edac.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "edac_module.h"
 
diff --git a/drivers/eisa/eisa-bus.c b/drivers/eisa/eisa-bus.c
index 33f0ba11c6ad..3fdb5a2ad469 100644
--- a/drivers/eisa/eisa-bus.c
+++ b/drivers/eisa/eisa-bus.c
@@ -8,12 +8,14 @@
 #include <linux/kernel.h>
 #include <linux/device.h>
 #include <linux/eisa.h>
+#include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/ioport.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #define SLOT_ADDRESS(r,n) (r->bus_base_addr + (0x1000 * n))
 
diff --git a/drivers/extcon/devres.c b/drivers/extcon/devres.c
index f9d52e8ec5cf..a22c2374fd7a 100644
--- a/drivers/extcon/devres.c
+++ b/drivers/extcon/devres.c
@@ -7,6 +7,7 @@
  */
 
 #include "extcon.h"
+#include <linux/device.h>
 
 static int devm_extcon_dev_match(struct device *dev, void *res, void *data)
 {
diff --git a/drivers/extcon/extcon.c b/drivers/extcon/extcon.c
index e7f55c021e56..b2406068f54f 100644
--- a/drivers/extcon/extcon.c
+++ b/drivers/extcon/extcon.c
@@ -15,6 +15,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/idr.h>
 #include <linux/init.h>
diff --git a/drivers/extcon/extcon.h b/drivers/extcon/extcon.h
index 946182687786..b2e0f715d81c 100644
--- a/drivers/extcon/extcon.h
+++ b/drivers/extcon/extcon.h
@@ -2,6 +2,7 @@
 #ifndef __LINUX_EXTCON_INTERNAL_H__
 #define __LINUX_EXTCON_INTERNAL_H__
 
+#include <linux/device.h>
 #include <linux/extcon-provider.h>
 
 /**
diff --git a/drivers/firewire/core-device.c b/drivers/firewire/core-device.c
index c0976f6268d3..42dccaa6476b 100644
--- a/drivers/firewire/core-device.c
+++ b/drivers/firewire/core-device.c
@@ -23,6 +23,7 @@
 #include <linux/rwsem.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/firewire/ohci.c b/drivers/firewire/ohci.c
index 9db9290c3269..a81d6ce634cc 100644
--- a/drivers/firewire/ohci.c
+++ b/drivers/firewire/ohci.c
@@ -26,6 +26,7 @@
 #include <linux/pci_ids.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/time.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/firewire/sbp2.c b/drivers/firewire/sbp2.c
index e779d866022b..efe0f7a09fac 100644
--- a/drivers/firewire/sbp2.c
+++ b/drivers/firewire/sbp2.c
@@ -34,6 +34,7 @@
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/stringify.h>
 #include <linux/workqueue.h>
diff --git a/drivers/firmware/arm_ffa/bus.c b/drivers/firmware/arm_ffa/bus.c
index 1c7940ba5539..cc75cd6ced67 100644
--- a/drivers/firmware/arm_ffa/bus.c
+++ b/drivers/firmware/arm_ffa/bus.c
@@ -8,9 +8,11 @@
 #include <linux/arm_ffa.h>
 #include <linux/device.h>
 #include <linux/fs.h>
+#include <linux/idr.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "common.h"
diff --git a/drivers/firmware/arm_scmi/bus.c b/drivers/firmware/arm_scmi/bus.c
index c15928b8c5cc..4e63209e35de 100644
--- a/drivers/firmware/arm_scmi/bus.c
+++ b/drivers/firmware/arm_scmi/bus.c
@@ -8,6 +8,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/atomic.h>
+#include <linux/idr.h>
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/of.h>
diff --git a/drivers/firmware/arm_scmi/driver.c b/drivers/firmware/arm_scmi/driver.c
index 3ea64b22cf0d..9305ef83b91d 100644
--- a/drivers/firmware/arm_scmi/driver.c
+++ b/drivers/firmware/arm_scmi/driver.c
@@ -17,6 +17,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/bitmap.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/device.h>
 #include <linux/export.h>
@@ -33,6 +34,7 @@
 #include <linux/processor.h>
 #include <linux/refcount.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "common.h"
 #include "notify.h"
diff --git a/drivers/firmware/arm_scmi/powercap.c b/drivers/firmware/arm_scmi/powercap.c
index a4c6cd4716fe..354657af6b1a 100644
--- a/drivers/firmware/arm_scmi/powercap.c
+++ b/drivers/firmware/arm_scmi/powercap.c
@@ -9,6 +9,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/scmi_protocol.h>
 
diff --git a/drivers/firmware/arm_scmi/raw_mode.c b/drivers/firmware/arm_scmi/raw_mode.c
index 350573518503..8b3584513173 100644
--- a/drivers/firmware/arm_scmi/raw_mode.c
+++ b/drivers/firmware/arm_scmi/raw_mode.c
@@ -107,6 +107,7 @@
  */
 
 #include <linux/bitmap.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/device.h>
@@ -114,11 +115,13 @@
 #include <linux/io.h>
 #include <linux/kernel.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/poll.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 
 #include "common.h"
diff --git a/drivers/firmware/arm_scmi/scmi_power_control.c b/drivers/firmware/arm_scmi/scmi_power_control.c
index 6eb7d2a4b6b1..22fcca791745 100644
--- a/drivers/firmware/arm_scmi/scmi_power_control.c
+++ b/drivers/firmware/arm_scmi/scmi_power_control.c
@@ -43,6 +43,7 @@
  * possibly emitted by the platform will be ignored.
  */
 
+#include <linux/kernel.h> // for system_state
 #include <linux/math.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/firmware/arm_scpi.c b/drivers/firmware/arm_scpi.c
index 94a6b4e667de..7bef046b324f 100644
--- a/drivers/firmware/arm_scpi.c
+++ b/drivers/firmware/arm_scpi.c
@@ -18,6 +18,7 @@
 
 #include <linux/bitmap.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/export.h>
@@ -37,6 +38,7 @@
 #include <linux/slab.h>
 #include <linux/sort.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #define CMD_ID_MASK		GENMASK(6, 0)
 #define CMD_TOKEN_ID_MASK	GENMASK(15, 8)
diff --git a/drivers/firmware/broadcom/bcm47xx_nvram.c b/drivers/firmware/broadcom/bcm47xx_nvram.c
index 0ea5206be4c9..04ccf0122cca 100644
--- a/drivers/firmware/broadcom/bcm47xx_nvram.c
+++ b/drivers/firmware/broadcom/bcm47xx_nvram.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/drivers/firmware/broadcom/bcm47xx_sprom.c b/drivers/firmware/broadcom/bcm47xx_sprom.c
index 14fbcd11657c..12d81e1bbfb4 100644
--- a/drivers/firmware/broadcom/bcm47xx_sprom.c
+++ b/drivers/firmware/broadcom/bcm47xx_sprom.c
@@ -30,7 +30,10 @@
 #include <linux/bcm47xx_sprom.h>
 #include <linux/bcma/bcma.h>
 #include <linux/etherdevice.h>
+#include <linux/hex.h>
 #include <linux/if_ether.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/ssb/ssb.h>
 
 static void create_key(const char *prefix, const char *postfix,
diff --git a/drivers/firmware/cirrus/cs_dsp.c b/drivers/firmware/cirrus/cs_dsp.c
index 79d4254d1f9b..65d739b7d9ce 100644
--- a/drivers/firmware/cirrus/cs_dsp.c
+++ b/drivers/firmware/cirrus/cs_dsp.c
@@ -16,6 +16,7 @@
 #include <linux/moduleparam.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <linux/firmware/cirrus/cs_dsp.h>
diff --git a/drivers/firmware/dmi-id.c b/drivers/firmware/dmi-id.c
index 5f3a3e913d28..6a59b70d42df 100644
--- a/drivers/firmware/dmi-id.c
+++ b/drivers/firmware/dmi-id.c
@@ -11,6 +11,7 @@
 #include <linux/dmi.h>
 #include <linux/device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct dmi_device_attribute{
 	struct device_attribute dev_attr;
diff --git a/drivers/firmware/dmi-sysfs.c b/drivers/firmware/dmi-sysfs.c
index 8d91997036e4..b6a72128e818 100644
--- a/drivers/firmware/dmi-sysfs.c
+++ b/drivers/firmware/dmi-sysfs.c
@@ -19,6 +19,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kobject.h>
 #include <linux/dmi.h>
diff --git a/drivers/firmware/dmi_scan.c b/drivers/firmware/dmi_scan.c
index 015c95a825d3..ea33543f578a 100644
--- a/drivers/firmware/dmi_scan.c
+++ b/drivers/firmware/dmi_scan.c
@@ -2,6 +2,7 @@
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
 #include <linux/dmi.h>
@@ -10,6 +11,7 @@
 #include <linux/random.h>
 #include <asm/dmi.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #ifndef SMBIOS_ENTRY_POINT_SCAN_START
 #define SMBIOS_ENTRY_POINT_SCAN_START 0xF0000
diff --git a/drivers/firmware/edd.c b/drivers/firmware/edd.c
index 55dec4eb2c00..4c5379ffe53f 100644
--- a/drivers/firmware/edd.c
+++ b/drivers/firmware/edd.c
@@ -20,7 +20,9 @@
  * the list of BIOSs which have been reported to implement EDD.
  */
 
+#include <linux/kobject.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/init.h>
diff --git a/drivers/firmware/efi/cper-arm.c b/drivers/firmware/efi/cper-arm.c
index fa9c1c3bf168..e60fe8113182 100644
--- a/drivers/firmware/efi/cper-arm.c
+++ b/drivers/firmware/efi/cper-arm.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/cper.h>
 #include <linux/dmi.h>
diff --git a/drivers/firmware/efi/cper-x86.c b/drivers/firmware/efi/cper-x86.c
index 438ed9eff6d0..c377bc3e6b03 100644
--- a/drivers/firmware/efi/cper-x86.c
+++ b/drivers/firmware/efi/cper-x86.c
@@ -3,6 +3,7 @@
 
 #include <linux/cper.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 /*
  * We don't need a "CPER_IA" prefix since these are all locally defined.
diff --git a/drivers/firmware/efi/cper.c b/drivers/firmware/efi/cper.c
index 9b3884ff81e6..6bab8aa3bcbf 100644
--- a/drivers/firmware/efi/cper.c
+++ b/drivers/firmware/efi/cper.c
@@ -14,6 +14,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/cper.h>
 #include <linux/dmi.h>
diff --git a/drivers/firmware/efi/dev-path-parser.c b/drivers/firmware/efi/dev-path-parser.c
index 937be269fee8..25ba6abc607a 100644
--- a/drivers/firmware/efi/dev-path-parser.c
+++ b/drivers/firmware/efi/dev-path-parser.c
@@ -11,6 +11,7 @@
 #include <linux/acpi.h>
 #include <linux/efi.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 static long __init parse_acpi_path(const struct efi_dev_path *node,
 				   struct device *parent, struct device **child)
diff --git a/drivers/firmware/efi/efi-pstore.c b/drivers/firmware/efi/efi-pstore.c
index 833cbb995dd3..27cc8dd14809 100644
--- a/drivers/firmware/efi/efi-pstore.c
+++ b/drivers/firmware/efi/efi-pstore.c
@@ -4,6 +4,7 @@
 #include <linux/module.h>
 #include <linux/pstore.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/ucs2_string.h>
 
 MODULE_IMPORT_NS(EFIVAR);
diff --git a/drivers/firmware/efi/efi.c b/drivers/firmware/efi/efi.c
index 4fcda50acfa4..58cfad6d9714 100644
--- a/drivers/firmware/efi/efi.c
+++ b/drivers/firmware/efi/efi.c
@@ -23,12 +23,14 @@
 #include <linux/of.h>
 #include <linux/initrd.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for parse_option_str()
 #include <linux/kexec.h>
 #include <linux/platform_device.h>
 #include <linux/random.h>
 #include <linux/reboot.h>
 #include <linux/slab.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 #include <linux/ucs2_string.h>
 #include <linux/memblock.h>
 #include <linux/security.h>
diff --git a/drivers/firmware/efi/esrt.c b/drivers/firmware/efi/esrt.c
index 7a81c0ce4780..bddcfc2f5bb1 100644
--- a/drivers/firmware/efi/esrt.c
+++ b/drivers/firmware/efi/esrt.c
@@ -23,6 +23,7 @@
 #include <linux/list.h>
 #include <linux/memblock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include <asm/io.h>
diff --git a/drivers/firmware/efi/libstub/efi-stub-helper.c b/drivers/firmware/efi/libstub/efi-stub-helper.c
index bfa30625f5d0..00fcd49f3d08 100644
--- a/drivers/firmware/efi/libstub/efi-stub-helper.c
+++ b/drivers/firmware/efi/libstub/efi-stub-helper.c
@@ -8,7 +8,9 @@
  */
 
 #include <linux/stdarg.h>
+#include <linux/sprintf.h>
 
+#include <linux/ctype.h>
 #include <linux/efi.h>
 #include <linux/kernel.h>
 #include <asm/efi.h>
diff --git a/drivers/firmware/efi/libstub/gop.c b/drivers/firmware/efi/libstub/gop.c
index ea5da307d542..0d7c8ac2bf19 100644
--- a/drivers/firmware/efi/libstub/gop.c
+++ b/drivers/firmware/efi/libstub/gop.c
@@ -8,6 +8,7 @@
 #include <linux/bitops.h>
 #include <linux/ctype.h>
 #include <linux/efi.h>
+#include <linux/kstrtox.h>
 #include <linux/screen_info.h>
 #include <linux/string.h>
 #include <asm/efi.h>
diff --git a/drivers/firmware/efi/libstub/printk.c b/drivers/firmware/efi/libstub/printk.c
index 3a67a2cea7bd..e59d739d7212 100644
--- a/drivers/firmware/efi/libstub/printk.c
+++ b/drivers/firmware/efi/libstub/printk.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <linux/stdarg.h>
+#include <linux/sprintf.h>
 
 #include <linux/ctype.h>
 #include <linux/efi.h>
diff --git a/drivers/firmware/efi/libstub/string.c b/drivers/firmware/efi/libstub/string.c
index 168fe8e79abc..abfedf026991 100644
--- a/drivers/firmware/efi/libstub/string.c
+++ b/drivers/firmware/efi/libstub/string.c
@@ -8,6 +8,7 @@
 
 #include <linux/ctype.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/string.h>
 
diff --git a/drivers/firmware/efi/libstub/vsprintf.c b/drivers/firmware/efi/libstub/vsprintf.c
index 71c71c222346..51ad7dde5f2e 100644
--- a/drivers/firmware/efi/libstub/vsprintf.c
+++ b/drivers/firmware/efi/libstub/vsprintf.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/stdarg.h>
+#include <linux/sprintf.h>
 
 #include <linux/compiler.h>
 #include <linux/ctype.h>
diff --git a/drivers/firmware/efi/runtime-wrappers.c b/drivers/firmware/efi/runtime-wrappers.c
index 5d56bc40a79d..035f6f88cf90 100644
--- a/drivers/firmware/efi/runtime-wrappers.c
+++ b/drivers/firmware/efi/runtime-wrappers.c
@@ -25,6 +25,7 @@
 #define pr_fmt(fmt)	"efi: " fmt
 
 #include <linux/bug.h>
+#include <linux/completion.h>
 #include <linux/efi.h>
 #include <linux/irqflags.h>
 #include <linux/mutex.h>
diff --git a/drivers/firmware/google/gsmi.c b/drivers/firmware/google/gsmi.c
index 96ea1fa76d35..d65166d26c11 100644
--- a/drivers/firmware/google/gsmi.c
+++ b/drivers/firmware/google/gsmi.c
@@ -10,6 +10,7 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/platform_device.h>
@@ -26,6 +27,7 @@
 #include <linux/uaccess.h>
 #include <linux/dmi.h>
 #include <linux/kdebug.h>
+#include <linux/kobject.h>
 #include <linux/reboot.h>
 #include <linux/efi.h>
 #include <linux/module.h>
diff --git a/drivers/firmware/google/vpd.c b/drivers/firmware/google/vpd.c
index ee6e08c0592b..5b6e1f0d8779 100644
--- a/drivers/firmware/google/vpd.c
+++ b/drivers/firmware/google/vpd.c
@@ -17,6 +17,7 @@
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include "coreboot_table.h"
diff --git a/drivers/firmware/imx/imx-dsp.c b/drivers/firmware/imx/imx-dsp.c
index 01c8ef14eaec..022a6916a8ab 100644
--- a/drivers/firmware/imx/imx-dsp.c
+++ b/drivers/firmware/imx/imx-dsp.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /*
  * imx_dsp_ring_doorbell - triggers an interrupt on the other side (DSP)
diff --git a/drivers/firmware/imx/imx-scu-irq.c b/drivers/firmware/imx/imx-scu-irq.c
index 6125cccc9ba7..e2519267db7b 100644
--- a/drivers/firmware/imx/imx-scu-irq.c
+++ b/drivers/firmware/imx/imx-scu-irq.c
@@ -12,6 +12,7 @@
 #include <linux/kobject.h>
 #include <linux/mailbox_client.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/sysfs.h>
 
diff --git a/drivers/firmware/imx/imx-scu.c b/drivers/firmware/imx/imx-scu.c
index 1dd4362ef9a3..7c8c42dd6e3d 100644
--- a/drivers/firmware/imx/imx-scu.c
+++ b/drivers/firmware/imx/imx-scu.c
@@ -7,6 +7,7 @@
  *
  */
 
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/firmware/imx/ipc.h>
 #include <linux/firmware/imx/sci.h>
@@ -19,6 +20,7 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define SCU_MU_CHAN_NUM		8
 #define MAX_RX_TIMEOUT		(msecs_to_jiffies(3000))
diff --git a/drivers/firmware/iscsi_ibft.c b/drivers/firmware/iscsi_ibft.c
index 6e9788324fea..7f3986e47ae4 100644
--- a/drivers/firmware/iscsi_ibft.c
+++ b/drivers/firmware/iscsi_ibft.c
@@ -69,6 +69,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/string.h>
 #include <linux/types.h>
diff --git a/drivers/firmware/memmap.c b/drivers/firmware/memmap.c
index 8e59be3782cb..0ca8c54c6673 100644
--- a/drivers/firmware/memmap.c
+++ b/drivers/firmware/memmap.c
@@ -9,6 +9,7 @@
 #include <linux/firmware-map.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/memblock.h>
 #include <linux/slab.h>
diff --git a/drivers/firmware/meson/meson_sm.c b/drivers/firmware/meson/meson_sm.c
index 5d7f62fe1d5f..2c08388c79b9 100644
--- a/drivers/firmware/meson/meson_sm.c
+++ b/drivers/firmware/meson/meson_sm.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/printk.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sizes.h>
  #include <linux/slab.h>
diff --git a/drivers/firmware/microchip/mpfs-auto-update.c b/drivers/firmware/microchip/mpfs-auto-update.c
index 81f5f62e34fc..5d9f6c44baec 100644
--- a/drivers/firmware/microchip/mpfs-auto-update.c
+++ b/drivers/firmware/microchip/mpfs-auto-update.c
@@ -16,6 +16,7 @@
 #include <linux/mtd/mtd.h>
 #include <linux/platform_device.h>
 #include <linux/sizes.h>
+#include <linux/completion.h>
 
 #include <soc/microchip/mpfs.h>
 
diff --git a/drivers/firmware/psci/psci_checker.c b/drivers/firmware/psci/psci_checker.c
index 116eb465cdb4..0834a00b1ff5 100644
--- a/drivers/firmware/psci/psci_checker.c
+++ b/drivers/firmware/psci/psci_checker.c
@@ -11,6 +11,7 @@
 #include <linux/cpu.h>
 #include <linux/cpuidle.h>
 #include <linux/cpu_pm.h>
+#include <linux/gfp.h> // for __get_free_page(), free_page()
 #include <linux/kernel.h>
 #include <linux/kthread.h>
 #include <uapi/linux/sched/types.h>
diff --git a/drivers/firmware/qemu_fw_cfg.c b/drivers/firmware/qemu_fw_cfg.c
index 5f43dfa22f79..256dcae752e5 100644
--- a/drivers/firmware/qemu_fw_cfg.c
+++ b/drivers/firmware/qemu_fw_cfg.c
@@ -34,6 +34,9 @@
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/ioport.h>
+#include <linux/kernel.h> // for memparse()
+#include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/qemu_fw_cfg.h>
 #include <linux/delay.h>
 #include <linux/crash_dump.h>
diff --git a/drivers/firmware/raspberrypi.c b/drivers/firmware/raspberrypi.c
index 322aada20f74..6e0d7c93a17d 100644
--- a/drivers/firmware/raspberrypi.c
+++ b/drivers/firmware/raspberrypi.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <soc/bcm2835/raspberrypi-firmware.h>
+#include <linux/completion.h>
 
 #define MBOX_MSG(chan, data28)		(((data28) & ~0xf) | ((chan) & 0xf))
 #define MBOX_CHAN(msg)			((msg) & 0xf)
diff --git a/drivers/firmware/smccc/soc_id.c b/drivers/firmware/smccc/soc_id.c
index 1990263fbba0..35eaf3b207df 100644
--- a/drivers/firmware/smccc/soc_id.c
+++ b/drivers/firmware/smccc/soc_id.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #define SMCCC_SOC_ID_JEP106_BANK_IDX_MASK	GENMASK(30, 24)
diff --git a/drivers/firmware/stratix10-rsu.c b/drivers/firmware/stratix10-rsu.c
index e20cee9c2d32..3c07b03afd57 100644
--- a/drivers/firmware/stratix10-rsu.c
+++ b/drivers/firmware/stratix10-rsu.c
@@ -7,11 +7,13 @@
 #include <linux/bitfield.h>
 #include <linux/completion.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/firmware/intel/stratix10-svc-client.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 
diff --git a/drivers/firmware/tegra/bpmp-debugfs.c b/drivers/firmware/tegra/bpmp-debugfs.c
index bbcdd9fed3fb..db4dac8da0f5 100644
--- a/drivers/firmware/tegra/bpmp-debugfs.c
+++ b/drivers/firmware/tegra/bpmp-debugfs.c
@@ -5,6 +5,7 @@
 #include <linux/debugfs.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <soc/tegra/bpmp.h>
diff --git a/drivers/firmware/tegra/bpmp-tegra186.c b/drivers/firmware/tegra/bpmp-tegra186.c
index 6f0d0511b486..f7b057aaa483 100644
--- a/drivers/firmware/tegra/bpmp-tegra186.c
+++ b/drivers/firmware/tegra/bpmp-tegra186.c
@@ -8,6 +8,7 @@
 #include <linux/mailbox_client.h>
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
+#include <linux/completion.h>
 
 #include <soc/tegra/bpmp.h>
 #include <soc/tegra/bpmp-abi.h>
diff --git a/drivers/firmware/tegra/bpmp-tegra210.c b/drivers/firmware/tegra/bpmp-tegra210.c
index 6295f5640c15..d5c11615ba6a 100644
--- a/drivers/firmware/tegra/bpmp-tegra210.c
+++ b/drivers/firmware/tegra/bpmp-tegra210.c
@@ -8,6 +8,7 @@
 #include <linux/io.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/completion.h>
 
 #include <soc/tegra/bpmp.h>
 
diff --git a/drivers/firmware/tegra/bpmp.c b/drivers/firmware/tegra/bpmp.c
index c1590d3aa9cb..235df5674387 100644
--- a/drivers/firmware/tegra/bpmp.c
+++ b/drivers/firmware/tegra/bpmp.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk/tegra.h>
+#include <linux/completion.h>
 #include <linux/genalloc.h>
 #include <linux/mailbox_client.h>
 #include <linux/module.h>
diff --git a/drivers/firmware/ti_sci.c b/drivers/firmware/ti_sci.c
index 8b9a2556de16..d26fba4a38e5 100644
--- a/drivers/firmware/ti_sci.c
+++ b/drivers/firmware/ti_sci.c
@@ -9,6 +9,7 @@
 #define pr_fmt(fmt) "%s: " fmt, __func__
 
 #include <linux/bitmap.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/export.h>
 #include <linux/io.h>
@@ -25,6 +26,7 @@
 #include <linux/soc/ti/ti-msgmgr.h>
 #include <linux/soc/ti/ti_sci_protocol.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 
 #include "ti_sci.h"
 
diff --git a/drivers/firmware/turris-mox-rwtm.c b/drivers/firmware/turris-mox-rwtm.c
index 31d962cdd6eb..9d3d42034ab7 100644
--- a/drivers/firmware/turris-mox-rwtm.c
+++ b/drivers/firmware/turris-mox-rwtm.c
@@ -16,6 +16,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME		"turris-mox-rwtm"
 
diff --git a/drivers/firmware/xilinx/zynqmp-debug.c b/drivers/firmware/xilinx/zynqmp-debug.c
index 8528850af889..4afcb0853d58 100644
--- a/drivers/firmware/xilinx/zynqmp-debug.c
+++ b/drivers/firmware/xilinx/zynqmp-debug.c
@@ -11,8 +11,10 @@
  */
 
 #include <linux/compiler.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/debugfs.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/firmware/xilinx/zynqmp.c b/drivers/firmware/xilinx/zynqmp.c
index 79789f0563f6..7290cbf906cc 100644
--- a/drivers/firmware/xilinx/zynqmp.c
+++ b/drivers/firmware/xilinx/zynqmp.c
@@ -14,12 +14,15 @@
 #include <linux/compiler.h>
 #include <linux/device.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/mfd/core.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/hashtable.h>
 
diff --git a/drivers/fpga/altera-cvp.c b/drivers/fpga/altera-cvp.c
index 4ffb9da537d8..79b08db0f78c 100644
--- a/drivers/fpga/altera-cvp.c
+++ b/drivers/fpga/altera-cvp.c
@@ -13,9 +13,11 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/fpga/fpga-mgr.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 
 #define CVP_BAR		0	/* BAR used for data transfer in memory mode */
 #define CVP_DUMMY_WR	244	/* dummy writes to clear CvP state machine */
diff --git a/drivers/fpga/altera-ps-spi.c b/drivers/fpga/altera-ps-spi.c
index 740980e7cef8..fdab062ebd7b 100644
--- a/drivers/fpga/altera-ps-spi.c
+++ b/drivers/fpga/altera-ps-spi.c
@@ -21,6 +21,7 @@
 #include <linux/of.h>
 #include <linux/spi/spi.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 
 enum altera_ps_devtype {
 	CYCLONE5,
diff --git a/drivers/fpga/dfl-afu-error.c b/drivers/fpga/dfl-afu-error.c
index ab7be6217368..c0cacf4bdd82 100644
--- a/drivers/fpga/dfl-afu-error.c
+++ b/drivers/fpga/dfl-afu-error.c
@@ -15,6 +15,8 @@
  */
 
 #include <linux/fpga-dfl.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "dfl-afu.h"
diff --git a/drivers/fpga/dfl-afu-main.c b/drivers/fpga/dfl-afu-main.c
index c0a75ca360d6..9e75011decd5 100644
--- a/drivers/fpga/dfl-afu-main.c
+++ b/drivers/fpga/dfl-afu-main.c
@@ -15,7 +15,9 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/fpga-dfl.h>
 
diff --git a/drivers/fpga/dfl-fme-error.c b/drivers/fpga/dfl-fme-error.c
index 51c2892ec06d..aca25536827b 100644
--- a/drivers/fpga/dfl-fme-error.c
+++ b/drivers/fpga/dfl-fme-error.c
@@ -16,6 +16,8 @@
  */
 
 #include <linux/fpga-dfl.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "dfl.h"
diff --git a/drivers/fpga/dfl-fme-main.c b/drivers/fpga/dfl-fme-main.c
index a2b5da0093da..627d5dcab958 100644
--- a/drivers/fpga/dfl-fme-main.c
+++ b/drivers/fpga/dfl-fme-main.c
@@ -18,6 +18,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/units.h>
 #include <linux/fpga-dfl.h>
diff --git a/drivers/fpga/dfl-fme-perf.c b/drivers/fpga/dfl-fme-perf.c
index 7422d2bc6f37..cbbc25167bfa 100644
--- a/drivers/fpga/dfl-fme-perf.c
+++ b/drivers/fpga/dfl-fme-perf.c
@@ -19,6 +19,7 @@
 #include <linux/perf_event.h>
 #include "dfl.h"
 #include "dfl-fme.h"
+#include <linux/sprintf.h>
 
 /*
  * Performance Counter Registers for Cache.
diff --git a/drivers/fpga/dfl.c b/drivers/fpga/dfl.c
index 094ee97ea26c..f3c37918a72e 100644
--- a/drivers/fpga/dfl.c
+++ b/drivers/fpga/dfl.c
@@ -12,8 +12,11 @@
  */
 #include <linux/dfl.h>
 #include <linux/fpga-dfl.h>
+#include <linux/idr.h>
+#include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/overflow.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "dfl.h"
diff --git a/drivers/fpga/fpga-bridge.c b/drivers/fpga/fpga-bridge.c
index a024be2b84e2..a257a1e0dac5 100644
--- a/drivers/fpga/fpga-bridge.c
+++ b/drivers/fpga/fpga-bridge.c
@@ -12,6 +12,7 @@
 #include <linux/of_platform.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 static DEFINE_IDA(fpga_bridge_ida);
 static const struct class fpga_bridge_class;
diff --git a/drivers/fpga/fpga-mgr.c b/drivers/fpga/fpga-mgr.c
index d7bfbdfdf2fc..1301f71ddeb0 100644
--- a/drivers/fpga/fpga-mgr.c
+++ b/drivers/fpga/fpga-mgr.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/scatterlist.h>
 #include <linux/highmem.h>
+#include <linux/sprintf.h>
 
 static DEFINE_IDA(fpga_mgr_ida);
 static const struct class fpga_mgr_class;
diff --git a/drivers/fpga/fpga-region.c b/drivers/fpga/fpga-region.c
index b364a929425c..9d67737cf8c8 100644
--- a/drivers/fpga/fpga-region.c
+++ b/drivers/fpga/fpga-region.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 static DEFINE_IDA(fpga_region_ida);
 static const struct class fpga_region_class;
diff --git a/drivers/fpga/intel-m10-bmc-sec-update.c b/drivers/fpga/intel-m10-bmc-sec-update.c
index 89851b133709..d37d12018cee 100644
--- a/drivers/fpga/intel-m10-bmc-sec-update.c
+++ b/drivers/fpga/intel-m10-bmc-sec-update.c
@@ -13,6 +13,8 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/xarray.h>
 
 struct m10bmc_sec;
 
diff --git a/drivers/fsi/fsi-core.c b/drivers/fsi/fsi-core.c
index 097d5a780264..6c603c4a1adb 100644
--- a/drivers/fsi/fsi-core.c
+++ b/drivers/fsi/fsi-core.c
@@ -14,6 +14,7 @@
 #include <linux/device.h>
 #include <linux/fsi.h>
 #include <linux/idr.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
@@ -22,6 +23,7 @@
 #include <linux/bitops.h>
 #include <linux/cdev.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "fsi-master.h"
diff --git a/drivers/fsi/fsi-master-ast-cf.c b/drivers/fsi/fsi-master-ast-cf.c
index 812dfa9a9140..bc4c0feb1533 100644
--- a/drivers/fsi/fsi-master-ast-cf.c
+++ b/drivers/fsi/fsi-master-ast-cf.c
@@ -11,6 +11,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/io.h>
 #include <linux/irqflags.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
@@ -21,6 +22,7 @@
 #include <linux/mfd/syscon.h>
 #include <linux/of_address.h>
 #include <linux/genalloc.h>
+#include <linux/sprintf.h>
 
 #include "fsi-master.h"
 #include "cf-fsi-fw.h"
diff --git a/drivers/fsi/fsi-master-gpio.c b/drivers/fsi/fsi-master-gpio.c
index ed03da4f2447..453a1b0e47ad 100644
--- a/drivers/fsi/fsi-master-gpio.c
+++ b/drivers/fsi/fsi-master-gpio.c
@@ -10,10 +10,12 @@
 #include <linux/gpio/consumer.h>
 #include <linux/io.h>
 #include <linux/irqflags.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "fsi-master.h"
 
diff --git a/drivers/fsi/fsi-occ.c b/drivers/fsi/fsi-occ.c
index da35ca9e84a6..737067e7a800 100644
--- a/drivers/fsi/fsi-occ.c
+++ b/drivers/fsi/fsi-occ.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/unaligned.h>
 
diff --git a/drivers/fsi/fsi-sbefifo.c b/drivers/fsi/fsi-sbefifo.c
index 0385476bfb03..a347b3a9a1c8 100644
--- a/drivers/fsi/fsi-sbefifo.c
+++ b/drivers/fsi/fsi-sbefifo.c
@@ -26,6 +26,7 @@
 #include <linux/platform_device.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/delay.h>
 #include <linux/uio.h>
diff --git a/drivers/gnss/core.c b/drivers/gnss/core.c
index 48f2ee0f78c4..9635feeb9a8e 100644
--- a/drivers/gnss/core.c
+++ b/drivers/gnss/core.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/poll.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/wait.h>
 
diff --git a/drivers/gpio/gpio-aggregator.c b/drivers/gpio/gpio-aggregator.c
index 38e0fff9afe7..ab61d7a4a035 100644
--- a/drivers/gpio/gpio-aggregator.c
+++ b/drivers/gpio/gpio-aggregator.c
@@ -13,6 +13,7 @@
 #include <linux/delay.h>
 #include <linux/idr.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
@@ -21,6 +22,7 @@
 #include <linux/property.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <linux/gpio/consumer.h>
diff --git a/drivers/gpio/gpio-exar.c b/drivers/gpio/gpio-exar.c
index 5170fe7599cd..3b1ccae4ff48 100644
--- a/drivers/gpio/gpio-exar.c
+++ b/drivers/gpio/gpio-exar.c
@@ -15,6 +15,7 @@
 #include <linux/pci.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #define EXAR_OFFSET_MPIOLVL_LO 0x90
 #define EXAR_OFFSET_MPIOSEL_LO 0x93
diff --git a/drivers/gpio/gpio-it87.c b/drivers/gpio/gpio-it87.c
index f332341fd4c8..88de49590daf 100644
--- a/drivers/gpio/gpio-it87.c
+++ b/drivers/gpio/gpio-it87.c
@@ -20,6 +20,7 @@
 #include <linux/ioport.h>
 #include <linux/slab.h>
 #include <linux/gpio/driver.h>
+#include <linux/sprintf.h>
 
 /* Chip Id numbers */
 #define NO_DEV_ID	0xffff
diff --git a/drivers/gpio/gpio-mockup.c b/drivers/gpio/gpio-mockup.c
index 455eecf6380e..1843c8d83783 100644
--- a/drivers/gpio/gpio-mockup.c
+++ b/drivers/gpio/gpio-mockup.c
@@ -17,12 +17,14 @@
 #include <linux/irq.h>
 #include <linux/irq_sim.h>
 #include <linux/irqdomain.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/gpio/gpio-sim.c b/drivers/gpio/gpio-sim.c
index c4106e37e6db..43b7a1d31cda 100644
--- a/drivers/gpio/gpio-sim.c
+++ b/drivers/gpio/gpio-sim.c
@@ -21,6 +21,7 @@
 #include <linux/irq.h>
 #include <linux/irq_sim.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/minmax.h>
 #include <linux/mod_devicetable.h>
@@ -31,6 +32,7 @@
 #include <linux/property.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/string_helpers.h>
 #include <linux/sysfs.h>
diff --git a/drivers/gpio/gpio-tegra.c b/drivers/gpio/gpio-tegra.c
index ea5f9cc14bc4..c632bd6d1adf 100644
--- a/drivers/gpio/gpio-tegra.c
+++ b/drivers/gpio/gpio-tegra.c
@@ -23,6 +23,7 @@
 #include <linux/irqchip/chained_irq.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/pm.h>
+#include <linux/ratelimit.h>
 
 #define GPIO_BANK(x)		((x) >> 5)
 #define GPIO_PORT(x)		(((x) >> 3) & 0x3)
diff --git a/drivers/gpio/gpio-tegra186.c b/drivers/gpio/gpio-tegra186.c
index d87dd06db40d..02d138cf9e59 100644
--- a/drivers/gpio/gpio-tegra186.c
+++ b/drivers/gpio/gpio-tegra186.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/ratelimit.h>
 #include <linux/seq_file.h>
 
 #include <dt-bindings/gpio/tegra186-gpio.h>
diff --git a/drivers/gpio/gpio-thunderx.c b/drivers/gpio/gpio-thunderx.c
index 8521c6aacace..cd439802a552 100644
--- a/drivers/gpio/gpio-thunderx.c
+++ b/drivers/gpio/gpio-thunderx.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/spinlock.h>
+#include <linux/ratelimit.h>
 
 #define GPIO_RX_DAT	0x0
 #define GPIO_TX_SET	0x8
diff --git a/drivers/gpio/gpiolib-acpi.c b/drivers/gpio/gpiolib-acpi.c
index cd3e9657cc36..a15e185858f5 100644
--- a/drivers/gpio/gpiolib-acpi.c
+++ b/drivers/gpio/gpiolib-acpi.c
@@ -13,8 +13,10 @@
 #include <linux/export.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/pinctrl/pinctrl.h>
+#include <linux/sprintf.h>
 
 #include <linux/gpio/consumer.h>
 #include <linux/gpio/driver.h>
diff --git a/drivers/gpio/gpiolib-of.c b/drivers/gpio/gpiolib-of.c
index 77509aa19900..ef04a96ad838 100644
--- a/drivers/gpio/gpiolib-of.c
+++ b/drivers/gpio/gpiolib-of.c
@@ -17,6 +17,7 @@
 #include <linux/of_gpio.h>
 #include <linux/pinctrl/pinctrl.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <linux/gpio/consumer.h>
diff --git a/drivers/gpio/gpiolib-swnode.c b/drivers/gpio/gpiolib-swnode.c
index fa52bdb1a29a..a8efa9359826 100644
--- a/drivers/gpio/gpiolib-swnode.c
+++ b/drivers/gpio/gpiolib-swnode.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/printk.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <linux/gpio/consumer.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_aca.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_aca.c
index 493982f94649..f54d0d165652 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_aca.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_aca.c
@@ -25,6 +25,7 @@
 #include "amdgpu.h"
 #include "amdgpu_aca.h"
 #include "amdgpu_ras.h"
+#include <linux/sprintf.h>
 
 #define ACA_BANK_HWID(type, hwid, mcatype) [ACA_HWIP_TYPE_##type] = {hwid, mcatype}
 
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c
index 2deebece810e..bade1b5f4665 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c
@@ -26,6 +26,7 @@
 #include <linux/acpi.h>
 #include <linux/backlight.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 #include <linux/power_supply.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_aldebaran.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_aldebaran.c
index aff08321e976..dad3153596b4 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_aldebaran.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_aldebaran.c
@@ -26,6 +26,7 @@
 #include "amdgpu_amdkfd_aldebaran.h"
 #include "gc/gc_9_4_2_offset.h"
 #include "gc/gc_9_4_2_sh_mask.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <uapi/linux/kfd_ioctl.h>
 
 /*
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_arcturus.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_arcturus.c
index 3a3f3ce09f00..e646665a5078 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_arcturus.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_arcturus.c
@@ -21,6 +21,7 @@
  */
 #include <linux/module.h>
 #include <linux/fdtable.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/uaccess.h>
 #include <linux/firmware.h>
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gc_9_4_3.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gc_9_4_3.c
index a5c7259cf2a3..854309ee2524 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gc_9_4_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gc_9_4_3.c
@@ -33,6 +33,7 @@
 #include "soc15.h"
 #include "sdma/sdma_4_4_2_offset.h"
 #include "sdma/sdma_4_4_2_sh_mask.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <uapi/linux/kfd_ioctl.h>
 
 static inline struct v9_sdma_mqd *get_sdma_mqd(void *mqd)
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10.c
index 69810b3f1c63..51d422658ec5 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10.c
@@ -32,6 +32,7 @@
 #include "v10_structs.h"
 #include "nv.h"
 #include "nvd.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <uapi/linux/kfd_ioctl.h>
 
 enum hqd_dequeue_request_type {
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10_3.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10_3.c
index 8c8437a4383f..d402164a3423 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10_3.c
@@ -33,6 +33,7 @@
 #include "v10_structs.h"
 #include "nv.h"
 #include "nvd.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 enum hqd_dequeue_request_type {
 	NO_ACTION = 0,
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v11.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v11.c
index b61a32d6af4b..5d00a03eef55 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v11.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v11.c
@@ -30,6 +30,7 @@
 #include "soc15d.h"
 #include "v11_structs.h"
 #include "soc21.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <uapi/linux/kfd_ioctl.h>
 
 enum hqd_dequeue_request_type {
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c
index ca4a6b82817f..072a0b9c911c 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v7.c
@@ -33,6 +33,7 @@
 #include "gmc/gmc_7_1_d.h"
 #include "gmc/gmc_7_1_sh_mask.h"
 #include "cik_structs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 enum hqd_dequeue_request_type {
 	NO_ACTION = 0,
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c
index 0f3e2944edd7..b79a6063062d 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v8.c
@@ -32,6 +32,7 @@
 #include "gmc/gmc_8_1_d.h"
 #include "vi_structs.h"
 #include "vid.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 enum hqd_dequeue_request_type {
 	NO_ACTION = 0,
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.c
index 5a35a8ca8922..d275991461d5 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.c
@@ -38,6 +38,7 @@
 #include "soc15d.h"
 #include "gfx_v9_0.h"
 #include "amdgpu_amdkfd_gfx_v9.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <uapi/linux/kfd_ioctl.h>
 
 enum hqd_dequeue_request_type {
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_atombios.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_atombios.c
index 52b12c1718eb..6691bfeb219f 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_atombios.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_atombios.c
@@ -30,6 +30,7 @@
 #include "amdgpu_atomfirmware.h"
 #include "amdgpu_i2c.h"
 #include "amdgpu_display.h"
+#include <linux/sprintf.h>
 
 #include "atom.h"
 #include "atom-bits.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_bo_list.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_bo_list.c
index 702f6610d024..84281d0b42e5 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_bo_list.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_bo_list.c
@@ -28,6 +28,7 @@
  *    Christian Knig <deathsimple@vodafone.de>
  */
 
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sort.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c
index 0a4b09709cfb..dfa729ee679b 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/pagemap.h>
 #include <linux/sync_file.h>
 #include <linux/dma-buf.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.h b/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.h
index 85376baaa92f..441cf05fcd6a 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.h
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_ctx.h
@@ -23,6 +23,7 @@
 #ifndef __AMDGPU_CTX_H__
 #define __AMDGPU_CTX_H__
 
+#include <linux/idr.h>
 #include <linux/ktime.h>
 #include <linux/types.h>
 
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_debugfs.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_debugfs.c
index 1afbb2e932c6..458af0db4fc4 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_debugfs.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_debugfs.c
@@ -25,8 +25,10 @@
 
 #include <linux/kthread.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/pm_runtime.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_pm.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
index d534e192e260..f94172ddd8dc 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
@@ -29,11 +29,14 @@
 #include <linux/kthread.h>
 #include <linux/module.h>
 #include <linux/console.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/iommu.h>
 #include <linux/pci.h>
 #include <linux/pci-p2pdma.h>
 #include <linux/apple-gmux.h>
+#include <linux/ratelimit.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_aperture.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_discovery.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_discovery.c
index 118288b64487..54eb1eb9383f 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_discovery.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_discovery.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_discovery.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_fence.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_fence.c
index 70bff8cecfda..65fec85b119c 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_fence.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_fence.c
@@ -30,6 +30,7 @@
  */
 #include <linux/seq_file.h>
 #include <linux/atomic.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/wait.h>
 #include <linux/kref.h>
 #include <linux/slab.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_fru_eeprom.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_fru_eeprom.c
index a08c148b13f9..fce82eccb3c0 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_fru_eeprom.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_fru_eeprom.c
@@ -21,6 +21,7 @@
  *
  */
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_i2c.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_gem.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_gem.c
index 22aeee8adb71..4d28e2ff6880 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_gem.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_gem.c
@@ -25,6 +25,7 @@
  *          Alex Deucher
  *          Jerome Glisse
  */
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/ktime.h>
 #include <linux/module.h>
 #include <linux/pagemap.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c
index 78229b61c233..4589441c7be3 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c
@@ -30,6 +30,7 @@
 #include "amdgpu_ras.h"
 #include "amdgpu_xcp.h"
 #include "amdgpu_xgmi.h"
+#include <linux/sprintf.h>
 
 /* delay 0.1 second to enable gfx off feature */
 #define GFX_OFF_DELAY_ENABLE         msecs_to_jiffies(100)
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_i2c.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_i2c.c
index d79cb13e1aa8..1c71de2263f0 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_i2c.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_i2c.c
@@ -26,6 +26,7 @@
 
 #include <linux/export.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_edid.h>
 #include <drm/amdgpu_drm.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_ih.h b/drivers/gpu/drm/amd/amdgpu/amdgpu_ih.h
index 508f02eb0cf8..59a5bc9b1120 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_ih.h
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_ih.h
@@ -24,6 +24,9 @@
 #ifndef __AMDGPU_IH_H__
 #define __AMDGPU_IH_H__
 
+#include <linux/types.h>
+#include <linux/wait.h>
+
 /* Maximum number of IVs processed at once */
 #define AMDGPU_IH_MAX_NUM_IVS	32
 
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_irq.h b/drivers/gpu/drm/amd/amdgpu/amdgpu_irq.h
index 04c0b4fa17a4..700fbce1db5e 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_irq.h
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_irq.h
@@ -25,6 +25,7 @@
 #define __AMDGPU_IRQ_H__
 
 #include <linux/irqdomain.h>
+#include <linux/workqueue_types.h>
 #include "soc15_ih_clientid.h"
 #include "amdgpu_ih.h"
 
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_mes.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_mes.c
index a98e03e0a51f..3639c7d2b95d 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_mes.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_mes.c
@@ -23,6 +23,7 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_exec.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu_mes.h"
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_pmu.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_pmu.c
index 6e91ea1de5aa..618a720d2da5 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_pmu.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_pmu.c
@@ -25,6 +25,7 @@
 #include <linux/init.h>
 #include "amdgpu.h"
 #include "amdgpu_pmu.h"
+#include <linux/sprintf.h>
 
 #define PMU_NAME_SIZE 32
 #define NUM_FORMATS_AMDGPU_PMU		4
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c
index d9e5eb24341d..953750b214f4 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c
@@ -25,6 +25,8 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_psp.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_rap.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_rap.c
index 123bcf5c2bb1..66c77596202a 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_rap.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_rap.c
@@ -22,6 +22,7 @@
  *
  */
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/pm_runtime.h>
 
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_ras.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_ras.c
index 46f3d1013e8c..62d198ee8744 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_ras.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_ras.c
@@ -22,8 +22,10 @@
  *
  */
 #include <linux/debugfs.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/list.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/reboot.h>
 #include <linux/syscalls.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.c
index 2fde93b00cab..6317f45c9230 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.c
@@ -29,6 +29,7 @@
 #include "amdgpu_eeprom.h"
 #include "amdgpu_atomfirmware.h"
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "amdgpu_reset.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c
index 5505d646f43a..1a6e314a3f16 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c
@@ -28,6 +28,7 @@
  */
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
 
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.c
index 1d9d187de6ee..b3d017c1f0f5 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.c
@@ -25,6 +25,7 @@
 #include "amdgpu.h"
 #include "amdgpu_sdma.h"
 #include "amdgpu_ras.h"
+#include <linux/sprintf.h>
 
 #define AMDGPU_CSA_SDMA_SIZE 64
 /* SDMA CSA reside in the 3rd page of CSA */
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_securedisplay.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_securedisplay.c
index 8ed0e073656f..2bf064b35c77 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_securedisplay.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_securedisplay.c
@@ -23,6 +23,7 @@
  */
 #include <linux/debugfs.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_securedisplay.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_ucode.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_ucode.c
index 3e12763e477a..8a3341a204a1 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_ucode.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_ucode.c
@@ -24,6 +24,7 @@
 #include <linux/firmware.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_umsch_mm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_umsch_mm.c
index ab820cf52668..c0176c7d5c57 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_umsch_mm.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_umsch_mm.c
@@ -24,6 +24,8 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_exec.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_umsch_mm.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_uvd.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_uvd.c
index 07d930339b07..7e65dc26cf15 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_uvd.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_uvd.c
@@ -29,6 +29,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 
 #include <drm/drm.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_vce.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_vce.c
index 59acf424a078..3afdec75880b 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_vce.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_vce.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 
 #include <drm/drm.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c
index f300d4a4457d..022eab952571 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c
@@ -25,11 +25,13 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/dmi.h>
 #include <linux/pci.h>
 #include <linux/debugfs.h>
 #include <drm/drm_drv.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_pm.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_vpe.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_vpe.c
index b9a15d51eb5c..694abd177d3d 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_vpe.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_vpe.c
@@ -22,6 +22,8 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.c
index 20d51f6c9bb8..b52acc111cb4 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.c
@@ -32,6 +32,7 @@
 #include "xgmi/xgmi_6_1_0_sh_mask.h"
 #include "wafl/wafl2_4_0_0_smn.h"
 #include "wafl/wafl2_4_0_0_sh_mask.h"
+#include <linux/sprintf.h>
 
 #include "amdgpu_reset.h"
 
diff --git a/drivers/gpu/drm/amd/amdgpu/atom.c b/drivers/gpu/drm/amd/amdgpu/atom.c
index b888613f653f..b260e1a2289b 100644
--- a/drivers/gpu/drm/amd/amdgpu/atom.c
+++ b/drivers/gpu/drm/amd/amdgpu/atom.c
@@ -26,6 +26,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/string_helpers.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <asm/unaligned.h>
 
diff --git a/drivers/gpu/drm/amd/amdgpu/atombios_encoders.c b/drivers/gpu/drm/amd/amdgpu/atombios_encoders.c
index 25feab188dfe..2c2fc6d041c6 100644
--- a/drivers/gpu/drm/amd/amdgpu/atombios_encoders.c
+++ b/drivers/gpu/drm/amd/amdgpu/atombios_encoders.c
@@ -25,6 +25,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <acpi/video.h>
 
diff --git a/drivers/gpu/drm/amd/amdgpu/cik_ih.c b/drivers/gpu/drm/amd/amdgpu/cik_ih.c
index f24e34dc33d1..54a1dcea723e 100644
--- a/drivers/gpu/drm/amd/amdgpu/cik_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/cik_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/cik_sdma.c b/drivers/gpu/drm/amd/amdgpu/cik_sdma.c
index a3fccc4c1f43..01611468e004 100644
--- a/drivers/gpu/drm/amd/amdgpu/cik_sdma.c
+++ b/drivers/gpu/drm/amd/amdgpu/cik_sdma.c
@@ -23,7 +23,9 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/cz_ih.c b/drivers/gpu/drm/amd/amdgpu/cz_ih.c
index c19681492efa..26239938359e 100644
--- a/drivers/gpu/drm/amd/amdgpu/cz_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/cz_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/dce_v10_0.c b/drivers/gpu/drm/amd/amdgpu/dce_v10_0.c
index 221af054d874..3329155053be 100644
--- a/drivers/gpu/drm/amd/amdgpu/dce_v10_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/dce_v10_0.c
@@ -26,6 +26,7 @@
 #include <drm/drm_modeset_helper.h>
 #include <drm/drm_modeset_helper_vtables.h>
 #include <drm/drm_vblank.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_pm.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/dce_v11_0.c b/drivers/gpu/drm/amd/amdgpu/dce_v11_0.c
index 69e8b0db6cf7..495ba94f4009 100644
--- a/drivers/gpu/drm/amd/amdgpu/dce_v11_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/dce_v11_0.c
@@ -26,6 +26,7 @@
 #include <drm/drm_modeset_helper.h>
 #include <drm/drm_modeset_helper_vtables.h>
 #include <drm/drm_vblank.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_pm.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/dce_v6_0.c b/drivers/gpu/drm/amd/amdgpu/dce_v6_0.c
index 60d40201fdd1..f2f23e673ab3 100644
--- a/drivers/gpu/drm/amd/amdgpu/dce_v6_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/dce_v6_0.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_edid.h>
 #include <drm/drm_fourcc.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/dce_v8_0.c b/drivers/gpu/drm/amd/amdgpu/dce_v8_0.c
index 5a5fcc45e452..84883cd1916e 100644
--- a/drivers/gpu/drm/amd/amdgpu/dce_v8_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/dce_v8_0.c
@@ -26,6 +26,7 @@
 #include <drm/drm_modeset_helper.h>
 #include <drm/drm_modeset_helper_vtables.h>
 #include <drm/drm_vblank.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_pm.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c b/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c
index b02d63328f1c..6bb451453e70 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c
@@ -31,6 +31,7 @@
 #include "amdgpu_psp.h"
 #include "nv.h"
 #include "nvd.h"
+#include <linux/sprintf.h>
 
 #include "gc/gc_10_1_0_offset.h"
 #include "gc/gc_10_1_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v11_0.c b/drivers/gpu/drm/amd/amdgpu/gfx_v11_0.c
index 2fb1342d5bd9..f249338ddfac 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v11_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v11_0.c
@@ -33,6 +33,7 @@
 #include "imu_v11_0.h"
 #include "soc21.h"
 #include "nvd.h"
+#include <linux/sprintf.h>
 
 #include "gc/gc_11_0_0_offset.h"
 #include "gc/gc_11_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v6_0.c b/drivers/gpu/drm/amd/amdgpu/gfx_v6_0.c
index 34f9211b2679..e69eabf237e9 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v6_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v6_0.c
@@ -21,7 +21,9 @@
  *
  */
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v7_0.c b/drivers/gpu/drm/amd/amdgpu/gfx_v7_0.c
index 86a4865b1ae5..4819f41cd01c 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v7_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v7_0.c
@@ -22,7 +22,9 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v8_0.c b/drivers/gpu/drm/amd/amdgpu/gfx_v8_0.c
index ea174b76ee70..53367e323a20 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v8_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v8_0.c
@@ -26,6 +26,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_gfx.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c b/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c
index 169d45268ef6..7211a0c5ff12 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c
@@ -26,6 +26,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_gfx.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_2.c b/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_2.c
index 065b2bd5f5a6..7aaca6973b89 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_2.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_2.c
@@ -23,6 +23,8 @@
 #include "amdgpu.h"
 #include "soc15.h"
 #include "soc15d.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "gc/gc_9_4_2_offset.h"
 #include "gc/gc_9_4_2_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_3.c b/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_3.c
index aace4594a603..f96535a38fe2 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfx_v9_4_3.c
@@ -21,6 +21,8 @@
  *
  */
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_gfx.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfxhub_v11_5_0.c b/drivers/gpu/drm/amd/amdgpu/gfxhub_v11_5_0.c
index f9949fedfbb9..a71b28349f5f 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfxhub_v11_5_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfxhub_v11_5_0.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "gfxhub_v11_5_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gc/gc_11_5_0_offset.h"
 #include "gc/gc_11_5_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_0.c b/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_0.c
index 22175da0e16a..13eff2ef1f67 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_0.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "gfxhub_v1_0.h"
 #include "gfxhub_v1_1.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gc/gc_9_0_offset.h"
 #include "gc/gc_9_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_2.c b/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_2.c
index 49aecdcee006..3a3fc6839190 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_2.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfxhub_v1_2.c
@@ -24,6 +24,7 @@
 #include "amdgpu_xcp.h"
 #include "gfxhub_v1_2.h"
 #include "gfxhub_v1_1.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gc/gc_9_4_3_offset.h"
 #include "gc/gc_9_4_3_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_0.c b/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_0.c
index 793faf62cb07..b60a2cec2ad6 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_0.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "gfxhub_v2_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gc/gc_10_1_0_offset.h"
 #include "gc/gc_10_1_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c b/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c
index cd0e8a321e46..0e42639433cb 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "gfxhub_v2_1.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gc/gc_10_3_0_offset.h"
 #include "gc/gc_10_3_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0.c b/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0.c
index abe30c8bd2ba..2a275027e022 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "gfxhub_v3_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gc/gc_11_0_0_offset.h"
 #include "gc/gc_11_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0_3.c b/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0_3.c
index b3ef6e71811f..0987be9f3540 100644
--- a/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0_3.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "gfxhub_v3_0_3.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gc/gc_11_0_3_offset.h"
 #include "gc/gc_11_0_3_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gmc_v10_0.c b/drivers/gpu/drm/amd/amdgpu/gmc_v10_0.c
index db89d13bd80d..1ab935e08204 100644
--- a/drivers/gpu/drm/amd/amdgpu/gmc_v10_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gmc_v10_0.c
@@ -21,6 +21,7 @@
  *
  */
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 
 #include <drm/drm_cache.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/gmc_v11_0.c b/drivers/gpu/drm/amd/amdgpu/gmc_v11_0.c
index 6c68135cac9f..384c69f23d89 100644
--- a/drivers/gpu/drm/amd/amdgpu/gmc_v11_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gmc_v11_0.c
@@ -21,6 +21,7 @@
  *
  */
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 
 #include <drm/drm_cache.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/gmc_v6_0.c b/drivers/gpu/drm/amd/amdgpu/gmc_v6_0.c
index 23b478639921..a96d7aba23ac 100644
--- a/drivers/gpu/drm/amd/amdgpu/gmc_v6_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gmc_v6_0.c
@@ -24,6 +24,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_cache.h>
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gmc_v7_0.c b/drivers/gpu/drm/amd/amdgpu/gmc_v7_0.c
index 3da7b6a2b00d..3303078b4d84 100644
--- a/drivers/gpu/drm/amd/amdgpu/gmc_v7_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gmc_v7_0.c
@@ -24,6 +24,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_cache.h>
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gmc_v8_0.c b/drivers/gpu/drm/amd/amdgpu/gmc_v8_0.c
index 969a9e867170..9fa926ac204c 100644
--- a/drivers/gpu/drm/amd/amdgpu/gmc_v8_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gmc_v8_0.c
@@ -24,6 +24,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_cache.h>
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/gmc_v9_0.c b/drivers/gpu/drm/amd/amdgpu/gmc_v9_0.c
index d442ae85162d..6c387731d42a 100644
--- a/drivers/gpu/drm/amd/amdgpu/gmc_v9_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/gmc_v9_0.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 
 #include <drm/drm_cache.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/iceland_ih.c b/drivers/gpu/drm/amd/amdgpu/iceland_ih.c
index 2c02ae69883d..369cfc6fea40 100644
--- a/drivers/gpu/drm/amd/amdgpu/iceland_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/iceland_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/ih_v6_0.c b/drivers/gpu/drm/amd/amdgpu/ih_v6_0.c
index ad4ad39f128f..a08fa277b36e 100644
--- a/drivers/gpu/drm/amd/amdgpu/ih_v6_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/ih_v6_0.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/ih_v6_1.c b/drivers/gpu/drm/amd/amdgpu/ih_v6_1.c
index b8da0fc29378..b85fc29de520 100644
--- a/drivers/gpu/drm/amd/amdgpu/ih_v6_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/ih_v6_1.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/imu_v11_0.c b/drivers/gpu/drm/amd/amdgpu/imu_v11_0.c
index c0bdab3bf0e4..e44113447fe2 100644
--- a/drivers/gpu/drm/amd/amdgpu/imu_v11_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/imu_v11_0.c
@@ -25,6 +25,7 @@
 #include "amdgpu.h"
 #include "amdgpu_imu.h"
 #include "amdgpu_dpm.h"
+#include <linux/sprintf.h>
 
 #include "imu_v11_0_3.h"
 
diff --git a/drivers/gpu/drm/amd/amdgpu/jpeg_v1_0.c b/drivers/gpu/drm/amd/amdgpu/jpeg_v1_0.c
index 77595e9622da..a0adcb5675d5 100644
--- a/drivers/gpu/drm/amd/amdgpu/jpeg_v1_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/jpeg_v1_0.c
@@ -27,6 +27,8 @@
 #include "soc15d.h"
 #include "vcn_v1_0.h"
 #include "jpeg_v1_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_1_0_offset.h"
 #include "vcn/vcn_1_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/jpeg_v2_0.c b/drivers/gpu/drm/amd/amdgpu/jpeg_v2_0.c
index 1c8116d75f63..06b9ec2d3e5f 100644
--- a/drivers/gpu/drm/amd/amdgpu/jpeg_v2_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/jpeg_v2_0.c
@@ -27,6 +27,8 @@
 #include "soc15.h"
 #include "soc15d.h"
 #include "jpeg_v2_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_2_0_0_offset.h"
 #include "vcn/vcn_2_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/jpeg_v2_5.c b/drivers/gpu/drm/amd/amdgpu/jpeg_v2_5.c
index 99cd49ee8ef6..287c953d56ee 100644
--- a/drivers/gpu/drm/amd/amdgpu/jpeg_v2_5.c
+++ b/drivers/gpu/drm/amd/amdgpu/jpeg_v2_5.c
@@ -27,6 +27,8 @@
 #include "soc15d.h"
 #include "jpeg_v2_0.h"
 #include "jpeg_v2_5.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_2_5_offset.h"
 #include "vcn/vcn_2_5_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/jpeg_v3_0.c b/drivers/gpu/drm/amd/amdgpu/jpeg_v3_0.c
index a92481da60cd..3b8aa1b71a23 100644
--- a/drivers/gpu/drm/amd/amdgpu/jpeg_v3_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/jpeg_v3_0.c
@@ -27,6 +27,8 @@
 #include "soc15.h"
 #include "soc15d.h"
 #include "jpeg_v2_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_3_0_0_offset.h"
 #include "vcn/vcn_3_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.c b/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.c
index 88ea58d5c4ab..088d713d6798 100644
--- a/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.c
@@ -29,6 +29,8 @@
 #include "jpeg_v2_0.h"
 #include "jpeg_v4_0.h"
 #include "mmsch_v4_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_4_0_0_offset.h"
 #include "vcn/vcn_4_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_3.c b/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_3.c
index 82b6b62c170b..3b119f50dae1 100644
--- a/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_3.c
@@ -27,6 +27,8 @@
 #include "soc15d.h"
 #include "jpeg_v4_0_3.h"
 #include "mmsch_v4_0_3.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_4_0_3_offset.h"
 #include "vcn/vcn_4_0_3_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_5.c b/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_5.c
index 78b74daf4eeb..ec0e9222fb7b 100644
--- a/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_5.c
+++ b/drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_5.c
@@ -29,6 +29,8 @@
 #include "jpeg_v2_0.h"
 #include "jpeg_v4_0_5.h"
 #include "mmsch_v4_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_4_0_5_offset.h"
 #include "vcn/vcn_4_0_5_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/lsdma_v6_0.c b/drivers/gpu/drm/amd/amdgpu/lsdma_v6_0.c
index 1a285b531881..344b68f69d16 100644
--- a/drivers/gpu/drm/amd/amdgpu/lsdma_v6_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/lsdma_v6_0.c
@@ -25,6 +25,7 @@
 #include "amdgpu.h"
 #include "lsdma_v6_0.h"
 #include "amdgpu_lsdma.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "lsdma/lsdma_6_0_0_offset.h"
 #include "lsdma/lsdma_6_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mes_v10_1.c b/drivers/gpu/drm/amd/amdgpu/mes_v10_1.c
index 1e5ad1e08d2a..a708f06b518b 100644
--- a/drivers/gpu/drm/amd/amdgpu/mes_v10_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/mes_v10_1.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include "amdgpu.h"
 #include "soc15_common.h"
@@ -31,6 +32,7 @@
 #include "gc/gc_10_1_0_default.h"
 #include "v10_structs.h"
 #include "mes_api_def.h"
+#include <linux/sprintf.h>
 
 #define mmCP_MES_IC_OP_CNTL_Sienna_Cichlid               0x2820
 #define mmCP_MES_IC_OP_CNTL_Sienna_Cichlid_BASE_IDX      1
diff --git a/drivers/gpu/drm/amd/amdgpu/mes_v11_0.c b/drivers/gpu/drm/amd/amdgpu/mes_v11_0.c
index 26d71a22395d..c7fb4b3b9007 100644
--- a/drivers/gpu/drm/amd/amdgpu/mes_v11_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/mes_v11_0.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include "amdgpu.h"
 #include "soc15_common.h"
@@ -31,6 +32,7 @@
 #include "gc/gc_11_0_0_default.h"
 #include "v11_structs.h"
 #include "mes_v11_api_def.h"
+#include <linux/sprintf.h>
 
 MODULE_FIRMWARE("amdgpu/gc_11_0_0_mes.bin");
 MODULE_FIRMWARE("amdgpu/gc_11_0_0_mes_2.bin");
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v1_0.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v1_0.c
index e3ddd22aa172..48aa7446d64a 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v1_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v1_0.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_ras.h"
 #include "mmhub_v1_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_1_0_offset.h"
 #include "mmhub/mmhub_1_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v1_7.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v1_7.c
index 92432cd2c0c7..63d7f407b4cd 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v1_7.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v1_7.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_ras.h"
 #include "mmhub_v1_7.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_1_7_offset.h"
 #include "mmhub/mmhub_1_7_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v1_8.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v1_8.c
index c0fc44cdd658..78fe4d1fe38b 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v1_8.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v1_8.c
@@ -22,6 +22,7 @@
  */
 #include "amdgpu.h"
 #include "mmhub_v1_8.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_1_8_0_offset.h"
 #include "mmhub/mmhub_1_8_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v2_0.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v2_0.c
index 02fd45261399..c713ccad31f6 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v2_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v2_0.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "mmhub_v2_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_2_0_0_offset.h"
 #include "mmhub/mmhub_2_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v2_3.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v2_3.c
index 5eb8122e2746..421cb9a70b53 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v2_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v2_3.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "mmhub_v2_3.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_2_3_0_offset.h"
 #include "mmhub/mmhub_2_3_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0.c
index 7d5242df58a5..338d1baae682 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "mmhub_v3_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_3_0_0_offset.h"
 #include "mmhub/mmhub_3_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_1.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_1.c
index 134c4ec10887..2bdefe7f937c 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_1.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "mmhub_v3_0_1.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_3_0_1_offset.h"
 #include "mmhub/mmhub_3_0_1_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_2.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_2.c
index f0f182f033b9..c1970be478c9 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_2.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_2.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "mmhub_v3_0_2.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_3_0_2_offset.h"
 #include "mmhub/mmhub_3_0_2_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_3.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_3.c
index dc4812ecc98d..09c3c5329291 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v3_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v3_3.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "mmhub_v3_3.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_3_3_0_offset.h"
 #include "mmhub/mmhub_3_3_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/mmhub_v9_4.c b/drivers/gpu/drm/amd/amdgpu/mmhub_v9_4.c
index 1b7da4aff2b8..e99968f56228 100644
--- a/drivers/gpu/drm/amd/amdgpu/mmhub_v9_4.c
+++ b/drivers/gpu/drm/amd/amdgpu/mmhub_v9_4.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_ras.h"
 #include "mmhub_v9_4.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mmhub/mmhub_9_4_1_offset.h"
 #include "mmhub/mmhub_9_4_1_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/navi10_ih.c b/drivers/gpu/drm/amd/amdgpu/navi10_ih.c
index 4178f4e5dad7..6619840dad81 100644
--- a/drivers/gpu/drm/amd/amdgpu/navi10_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/navi10_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v2_3.c b/drivers/gpu/drm/amd/amdgpu/nbio_v2_3.c
index df218d5ca775..f055c2452262 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v2_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v2_3.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_atombios.h"
 #include "nbio_v2_3.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_2_3_default.h"
 #include "nbio/nbio_2_3_offset.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v4_3.c b/drivers/gpu/drm/amd/amdgpu/nbio_v4_3.c
index a3622897e3fe..596db1a5e82b 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v4_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v4_3.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_atombios.h"
 #include "nbio_v4_3.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_4_3_0_offset.h"
 #include "nbio/nbio_4_3_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v6_1.c b/drivers/gpu/drm/amd/amdgpu/nbio_v6_1.c
index 37615a77287b..f2a739d7a274 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v6_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v6_1.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_atombios.h"
 #include "nbio_v6_1.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_6_1_default.h"
 #include "nbio/nbio_6_1_offset.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v7_11.c b/drivers/gpu/drm/amd/amdgpu/nbio_v7_11.c
index 1f52b4b1db03..bf369b7e96b8 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v7_11.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v7_11.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_atombios.h"
 #include "nbio_v7_11.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_7_11_0_offset.h"
 #include "nbio/nbio_7_11_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v7_2.c b/drivers/gpu/drm/amd/amdgpu/nbio_v7_2.c
index e962821ae6a1..f3b9d74b0323 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v7_2.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v7_2.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_atombios.h"
 #include "nbio_v7_2.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_7_2_0_offset.h"
 #include "nbio/nbio_7_2_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v7_4.c b/drivers/gpu/drm/amd/amdgpu/nbio_v7_4.c
index 19986ff6a48d..e1cd1d4c26a8 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v7_4.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v7_4.c
@@ -24,6 +24,7 @@
 #include "amdgpu_atombios.h"
 #include "nbio_v7_4.h"
 #include "amdgpu_ras.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_7_4_offset.h"
 #include "nbio/nbio_7_4_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v7_7.c b/drivers/gpu/drm/amd/amdgpu/nbio_v7_7.c
index 4df1055e640a..d63a241a2541 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v7_7.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v7_7.c
@@ -23,6 +23,7 @@
 #include "amdgpu.h"
 #include "amdgpu_atombios.h"
 #include "nbio_v7_7.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_7_7_0_offset.h"
 #include "nbio/nbio_7_7_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/nbio_v7_9.c b/drivers/gpu/drm/amd/amdgpu/nbio_v7_9.c
index b4723d68eab0..05a475ea6a6d 100644
--- a/drivers/gpu/drm/amd/amdgpu/nbio_v7_9.c
+++ b/drivers/gpu/drm/amd/amdgpu/nbio_v7_9.c
@@ -24,6 +24,7 @@
 #include "amdgpu_atombios.h"
 #include "nbio_v7_9.h"
 #include "amdgpu_ras.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nbio/nbio_7_9_0_offset.h"
 #include "nbio/nbio_7_9_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/psp_v10_0.c b/drivers/gpu/drm/amd/amdgpu/psp_v10_0.c
index 145186a1e48f..dcabe2a752d8 100644
--- a/drivers/gpu/drm/amd/amdgpu/psp_v10_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/psp_v10_0.c
@@ -24,6 +24,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 
diff --git a/drivers/gpu/drm/amd/amdgpu/psp_v11_0.c b/drivers/gpu/drm/amd/amdgpu/psp_v11_0.c
index efa37e3b7931..7661227ba2f6 100644
--- a/drivers/gpu/drm/amd/amdgpu/psp_v11_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/psp_v11_0.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/vmalloc.h>
 #include <drm/drm_drv.h>
diff --git a/drivers/gpu/drm/amd/amdgpu/psp_v11_0_8.c b/drivers/gpu/drm/amd/amdgpu/psp_v11_0_8.c
index 5697760a819b..c9a4724cc07c 100644
--- a/drivers/gpu/drm/amd/amdgpu/psp_v11_0_8.c
+++ b/drivers/gpu/drm/amd/amdgpu/psp_v11_0_8.c
@@ -25,6 +25,7 @@
 #include "amdgpu_ucode.h"
 #include "soc15_common.h"
 #include "psp_v11_0_8.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mp/mp_11_0_8_offset.h"
 
diff --git a/drivers/gpu/drm/amd/amdgpu/psp_v12_0.c b/drivers/gpu/drm/amd/amdgpu/psp_v12_0.c
index fcd708eae75c..f4933923bda7 100644
--- a/drivers/gpu/drm/amd/amdgpu/psp_v12_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/psp_v12_0.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include "amdgpu.h"
 #include "amdgpu_psp.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/psp_v13_0.c b/drivers/gpu/drm/amd/amdgpu/psp_v13_0.c
index 722b6066ce07..9a7941a53d34 100644
--- a/drivers/gpu/drm/amd/amdgpu/psp_v13_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/psp_v13_0.c
@@ -21,6 +21,7 @@
  *
  */
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/vmalloc.h>
 #include "amdgpu.h"
 #include "amdgpu_psp.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/psp_v13_0_4.c b/drivers/gpu/drm/amd/amdgpu/psp_v13_0_4.c
index eaa5512a21da..b2be55bb1cf3 100644
--- a/drivers/gpu/drm/amd/amdgpu/psp_v13_0_4.c
+++ b/drivers/gpu/drm/amd/amdgpu/psp_v13_0_4.c
@@ -25,6 +25,7 @@
 #include "amdgpu_ucode.h"
 #include "soc15_common.h"
 #include "psp_v13_0_4.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mp/mp_13_0_4_offset.h"
 #include "mp/mp_13_0_4_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/psp_v3_1.c b/drivers/gpu/drm/amd/amdgpu/psp_v3_1.c
index f6b75e3e47ff..6fb2b212706a 100644
--- a/drivers/gpu/drm/amd/amdgpu/psp_v3_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/psp_v3_1.c
@@ -24,6 +24,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 
diff --git a/drivers/gpu/drm/amd/amdgpu/sdma_v2_4.c b/drivers/gpu/drm/amd/amdgpu/sdma_v2_4.c
index 07e19caf2bc1..a0e753fa99db 100644
--- a/drivers/gpu/drm/amd/amdgpu/sdma_v2_4.c
+++ b/drivers/gpu/drm/amd/amdgpu/sdma_v2_4.c
@@ -24,7 +24,9 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/sdma_v3_0.c b/drivers/gpu/drm/amd/amdgpu/sdma_v3_0.c
index 2ad615be4bb3..7218c8597a16 100644
--- a/drivers/gpu/drm/amd/amdgpu/sdma_v3_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/sdma_v3_0.c
@@ -24,7 +24,9 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c b/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c
index 3d68dd5523c6..72aee6b8a653 100644
--- a/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c
@@ -23,8 +23,10 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c b/drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c
index 47916cc26901..d9c22f3cab54 100644
--- a/drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c
+++ b/drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c
@@ -23,8 +23,10 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_xcp.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/sdma_v5_0.c b/drivers/gpu/drm/amd/amdgpu/sdma_v5_0.c
index 3c485e5a531a..916d51d2f124 100644
--- a/drivers/gpu/drm/amd/amdgpu/sdma_v5_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/sdma_v5_0.c
@@ -23,8 +23,10 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/sdma_v5_2.c b/drivers/gpu/drm/amd/amdgpu/sdma_v5_2.c
index 0058f3f7cf6e..ccbbda4d6781 100644
--- a/drivers/gpu/drm/amd/amdgpu/sdma_v5_2.c
+++ b/drivers/gpu/drm/amd/amdgpu/sdma_v5_2.c
@@ -23,8 +23,10 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/sdma_v6_0.c b/drivers/gpu/drm/amd/amdgpu/sdma_v6_0.c
index 3c7ddd219de8..8f841d75dd2d 100644
--- a/drivers/gpu/drm/amd/amdgpu/sdma_v6_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/sdma_v6_0.c
@@ -23,8 +23,10 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/si_dma.c b/drivers/gpu/drm/amd/amdgpu/si_dma.c
index 9aa0e11ee673..82be89e43af4 100644
--- a/drivers/gpu/drm/amd/amdgpu/si_dma.c
+++ b/drivers/gpu/drm/amd/amdgpu/si_dma.c
@@ -26,6 +26,8 @@
 #include "amdgpu_trace.h"
 #include "si.h"
 #include "sid.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 const u32 sdma_offsets[SDMA_MAX_INSTANCE] =
 {
diff --git a/drivers/gpu/drm/amd/amdgpu/si_ih.c b/drivers/gpu/drm/amd/amdgpu/si_ih.c
index cada9f300a7f..ea245ba235b1 100644
--- a/drivers/gpu/drm/amd/amdgpu/si_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/si_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/smu_v11_0_i2c.c b/drivers/gpu/drm/amd/amdgpu/smu_v11_0_i2c.c
index dd2d66090d23..c0723fe9863c 100644
--- a/drivers/gpu/drm/amd/amdgpu/smu_v11_0_i2c.c
+++ b/drivers/gpu/drm/amd/amdgpu/smu_v11_0_i2c.c
@@ -23,6 +23,7 @@
 
 #include "smuio/smuio_11_0_0_offset.h"
 #include "smuio/smuio_11_0_0_sh_mask.h"
+#include <linux/sprintf.h>
 
 #include "smu_v11_0_i2c.h"
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/tonga_ih.c b/drivers/gpu/drm/amd/amdgpu/tonga_ih.c
index 450b6e831509..0b715f56b30d 100644
--- a/drivers/gpu/drm/amd/amdgpu/tonga_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/tonga_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/umsch_mm_v4_0.c b/drivers/gpu/drm/amd/amdgpu/umsch_mm_v4_0.c
index 8e7b763cfdb7..9814b3c59055 100644
--- a/drivers/gpu/drm/amd/amdgpu/umsch_mm_v4_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/umsch_mm_v4_0.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include "amdgpu.h"
 #include "soc15_common.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/uvd_v3_1.c b/drivers/gpu/drm/amd/amdgpu/uvd_v3_1.c
index a6006f231c65..77ecc3fefe37 100644
--- a/drivers/gpu/drm/amd/amdgpu/uvd_v3_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/uvd_v3_1.c
@@ -23,6 +23,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_uvd.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/uvd_v4_2.c b/drivers/gpu/drm/amd/amdgpu/uvd_v4_2.c
index 1aa09ad7bbe3..bf425d8d4f31 100644
--- a/drivers/gpu/drm/amd/amdgpu/uvd_v4_2.c
+++ b/drivers/gpu/drm/amd/amdgpu/uvd_v4_2.c
@@ -23,6 +23,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_uvd.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/uvd_v5_0.c b/drivers/gpu/drm/amd/amdgpu/uvd_v5_0.c
index f8b229b75435..b234f29bdd81 100644
--- a/drivers/gpu/drm/amd/amdgpu/uvd_v5_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/uvd_v5_0.c
@@ -24,6 +24,8 @@
 
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_uvd.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/uvd_v6_0.c b/drivers/gpu/drm/amd/amdgpu/uvd_v6_0.c
index a9a6880f44e3..c4324bea8bd7 100644
--- a/drivers/gpu/drm/amd/amdgpu/uvd_v6_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/uvd_v6_0.c
@@ -23,6 +23,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_uvd.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/uvd_v7_0.c b/drivers/gpu/drm/amd/amdgpu/uvd_v7_0.c
index 6068b784dc69..4f217e6ac85e 100644
--- a/drivers/gpu/drm/amd/amdgpu/uvd_v7_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/uvd_v7_0.c
@@ -22,6 +22,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_uvd.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vce_v2_0.c b/drivers/gpu/drm/amd/amdgpu/vce_v2_0.c
index a08e7abca423..70e27ac7f0ef 100644
--- a/drivers/gpu/drm/amd/amdgpu/vce_v2_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vce_v2_0.c
@@ -26,6 +26,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_vce.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vce_v3_0.c b/drivers/gpu/drm/amd/amdgpu/vce_v3_0.c
index f4760748d349..f9d6c991fe12 100644
--- a/drivers/gpu/drm/amd/amdgpu/vce_v3_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vce_v3_0.c
@@ -26,6 +26,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_vce.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vce_v4_0.c b/drivers/gpu/drm/amd/amdgpu/vce_v4_0.c
index 06d787385ad4..ec7e69520d9e 100644
--- a/drivers/gpu/drm/amd/amdgpu/vce_v4_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vce_v4_0.c
@@ -26,6 +26,8 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_vce.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_sw_ring.c b/drivers/gpu/drm/amd/amdgpu/vcn_sw_ring.c
index 2b9ddb3d2fe1..d3dd365df07c 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_sw_ring.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_sw_ring.c
@@ -23,6 +23,7 @@
 
 #include "amdgpu.h"
 #include "vcn_sw_ring.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 void vcn_dec_sw_ring_emit_fence(struct amdgpu_ring *ring, u64 addr,
 	u64 seq, uint32_t flags)
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_v1_0.c b/drivers/gpu/drm/amd/amdgpu/vcn_v1_0.c
index 25ba27151ac0..19ea061f5ac4 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v1_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v1_0.c
@@ -22,6 +22,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_cs.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_v2_0.c b/drivers/gpu/drm/amd/amdgpu/vcn_v2_0.c
index 18794394c5a0..4a3147e6f322 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v2_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v2_0.c
@@ -23,6 +23,8 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_vcn.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c b/drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c
index aba403d71806..0d2480c138cc 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c
@@ -23,6 +23,8 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_vcn.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_v3_0.c b/drivers/gpu/drm/amd/amdgpu/vcn_v3_0.c
index e02af4de521c..c09370f62c51 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v3_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v3_0.c
@@ -31,6 +31,8 @@
 #include "vcn_v2_0.h"
 #include "mmsch_v3_0.h"
 #include "vcn_sw_ring.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_3_0_0_offset.h"
 #include "vcn/vcn_3_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c b/drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
index 8ab01ae919d2..61c4d4232628 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c
@@ -32,6 +32,8 @@
 #include "vcn_v2_0.h"
 #include "mmsch_v4_0.h"
 #include "vcn_v4_0.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_4_0_0_offset.h"
 #include "vcn/vcn_4_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.c b/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.c
index 810bbfccd6f2..63133a82caea 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.c
@@ -23,6 +23,8 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_vcn.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_5.c b/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_5.c
index 49e4c3c09aca..77be9d9686b1 100644
--- a/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_5.c
+++ b/drivers/gpu/drm/amd/amdgpu/vcn_v4_0_5.c
@@ -32,6 +32,8 @@
 #include "vcn_v2_0.h"
 #include "mmsch_v4_0.h"
 #include "vcn_v4_0_5.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "vcn/vcn_4_0_5_offset.h"
 #include "vcn/vcn_4_0_5_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vega10_ih.c b/drivers/gpu/drm/amd/amdgpu/vega10_ih.c
index bf68e18e3824..b98567dfb324 100644
--- a/drivers/gpu/drm/amd/amdgpu/vega10_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/vega10_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vega20_ih.c b/drivers/gpu/drm/amd/amdgpu/vega20_ih.c
index db66e6cccaf2..ae14131fdf50 100644
--- a/drivers/gpu/drm/amd/amdgpu/vega20_ih.c
+++ b/drivers/gpu/drm/amd/amdgpu/vega20_ih.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ih.h"
diff --git a/drivers/gpu/drm/amd/amdgpu/vpe_v6_1.c b/drivers/gpu/drm/amd/amdgpu/vpe_v6_1.c
index d20060a51e05..59e00f7eed56 100644
--- a/drivers/gpu/drm/amd/amdgpu/vpe_v6_1.c
+++ b/drivers/gpu/drm/amd/amdgpu/vpe_v6_1.c
@@ -22,6 +22,7 @@
 
 #include <linux/firmware.h>
 #include <drm/drm_drv.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "amdgpu_ucode.h"
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_crat.c b/drivers/gpu/drm/amd/amdkfd/kfd_crat.c
index 002b08fa632f..1ac917461ec1 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_crat.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_crat.c
@@ -28,6 +28,7 @@
 #include "kfd_topology.h"
 #include "amdgpu.h"
 #include "amdgpu_amdkfd.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /* GPU Processor ID base for dGPUs for which VCRAT needs to be created.
  * GPU processor ID are expressed with Bit[31]=1.
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_debugfs.c b/drivers/gpu/drm/amd/amdkfd/kfd_debugfs.c
index 4a5a0a4e00f2..c0fab5ba9203 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_debugfs.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_debugfs.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/uaccess.h>
 
 #include "kfd_priv.h"
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c
index 1a4a69943c71..698f3d510952 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_cik.c
@@ -25,6 +25,7 @@
 #include <linux/printk.h>
 #include <linux/slab.h>
 #include <linux/mm_types.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "kfd_priv.h"
 #include "kfd_mqd_manager.h"
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v10.c b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v10.c
index 22cbfa1bdadd..1c39ea3cfeb7 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v10.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v10.c
@@ -31,6 +31,7 @@
 #include "gc/gc_10_1_0_offset.h"
 #include "gc/gc_10_1_0_sh_mask.h"
 #include "amdgpu_amdkfd.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static inline struct v10_compute_mqd *get_mqd(void *mqd)
 {
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v11.c b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v11.c
index d722cbd31783..b7880036fbe0 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v11.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v11.c
@@ -30,6 +30,7 @@
 #include "gc/gc_11_0_0_offset.h"
 #include "gc/gc_11_0_0_sh_mask.h"
 #include "amdgpu_amdkfd.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static inline struct v11_compute_mqd *get_mqd(void *mqd)
 {
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v9.c b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v9.c
index 42d881809dc7..c4656c8cd6c7 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v9.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v9.c
@@ -33,6 +33,7 @@
 #include "sdma0/sdma0_4_0_sh_mask.h"
 #include "amdgpu_amdkfd.h"
 #include "kfd_device_queue_manager.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void update_mqd(struct mqd_manager *mm, void *mqd,
 		       struct queue_properties *q,
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c
index 3e1a574d4ea6..d1327ba44121 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_vi.c
@@ -25,6 +25,7 @@
 #include <linux/printk.h>
 #include <linux/slab.h>
 #include <linux/mm_types.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "kfd_priv.h"
 #include "kfd_mqd_manager.h"
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_v9.c b/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_v9.c
index 8ee2bedd301a..5711dcc17571 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_v9.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_v9.c
@@ -28,6 +28,7 @@
 #include "kfd_pm4_headers_aldebaran.h"
 #include "kfd_pm4_opcodes.h"
 #include "gc/gc_10_1_0_sh_mask.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int pm_map_process_v9(struct packet_manager *pm,
 		uint32_t *buffer, struct qcm_process_device *qpd)
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_vi.c b/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_vi.c
index c1199d06d131..9405c79339c8 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_vi.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_vi.c
@@ -26,6 +26,7 @@
 #include "kfd_device_queue_manager.h"
 #include "kfd_pm4_headers_vi.h"
 #include "kfd_pm4_opcodes.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 unsigned int pm_build_pm4_header(unsigned int opcode, size_t packet_size)
 {
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_process.c b/drivers/gpu/drm/amd/amdkfd/kfd_process.c
index 717a60d7a4ea..72a3e013ecf2 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_process.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_process.c
@@ -35,6 +35,7 @@
 #include <linux/pm_runtime.h>
 #include "amdgpu_amdkfd.h"
 #include "amdgpu.h"
+#include <linux/sprintf.h>
 
 struct mm_struct;
 
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_smi_events.c b/drivers/gpu/drm/amd/amdkfd/kfd_smi_events.c
index d9953c2b2661..6e21ec544a47 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_smi_events.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_smi_events.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/poll.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/anon_inodes.h>
 #include <uapi/linux/kfd_ioctl.h>
diff --git a/drivers/gpu/drm/amd/amdkfd/kfd_topology.c b/drivers/gpu/drm/amd/amdkfd/kfd_topology.c
index 0136c27ef49f..2ff678d21783 100644
--- a/drivers/gpu/drm/amd/amdkfd/kfd_topology.c
+++ b/drivers/gpu/drm/amd/amdkfd/kfd_topology.c
@@ -31,6 +31,7 @@
 #include <linux/log2.h>
 #include <linux/dmi.h>
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 
 #include "kfd_priv.h"
 #include "kfd_crat.h"
diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
index 467796d97313..fb34c24cdf96 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c
@@ -44,6 +44,10 @@
 #include "link_service_types.h"
 #include "link/protocols/link_dp_capability.h"
 #include "link/protocols/link_ddc.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "vid.h"
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crc.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crc.c
index f936a35fa9eb..e6a9107bbe15 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crc.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crc.c
@@ -31,6 +31,8 @@
 #include "dc.h"
 #include "amdgpu_securedisplay.h"
 
+#include <linux/completion.h>
+
 static const char *const pipe_crc_sources[] = {
 	"none",
 	"crtc",
diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_debugfs.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_debugfs.c
index eee4945653e2..24801ca8feca 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_debugfs.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_debugfs.c
@@ -25,6 +25,8 @@
 
 #include <linux/string_helpers.h>
 #include <linux/uaccess.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "dc.h"
 #include "amdgpu.h"
diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c
index b54d646a7c73..2c24271f0926 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c
@@ -30,6 +30,8 @@
 #include <drm/display/drm_hdcp_helper.h>
 #include "hdcp_psp.h"
 
+#include <linux/completion.h>
+
 /*
  * If the SRM version being loaded is less than or equal to the
  * currently loaded SRM, psp will return 0xFFFF as the version
diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_helpers.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_helpers.c
index 85b7f58a7f35..0de65a46c1d9 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_helpers.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_helpers.c
@@ -26,6 +26,7 @@
 #include <linux/string.h>
 #include <linux/acpi.h>
 #include <linux/i2c.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_probe_helper.h>
diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c
index 941e96f100f4..656ac8ee8df9 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c
@@ -34,6 +34,7 @@
 #include "amdgpu_dm.h"
 #include "amdgpu_dm_mst_types.h"
 #include "amdgpu_dm_hdcp.h"
+#include <linux/sprintf.h>
 
 #include "dc.h"
 #include "dm_helpers.h"
diff --git a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_plane.c b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_plane.c
index 8a4c40b4c27e..f7cecedc2935 100644
--- a/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_plane.c
+++ b/drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_plane.c
@@ -29,6 +29,7 @@
 #include <drm/drm_gem_atomic_helper.h>
 #include <drm/drm_plane_helper.h>
 #include <drm/drm_fourcc.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "amdgpu.h"
 #include "dal_asic_id.h"
diff --git a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hw_sequencer_debug.c b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hw_sequencer_debug.c
index 9033b39e0e0c..5b2761aef68e 100644
--- a/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hw_sequencer_debug.c
+++ b/drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hw_sequencer_debug.c
@@ -44,6 +44,7 @@
 #include "dcn10_hubbub.h"
 #include "dcn10_cm_common.h"
 #include "clk_mgr.h"
+#include <linux/sprintf.h>
 
 __printf(3, 4)
 unsigned int snprintf_count(char *pbuf, unsigned int bufsize, char *fmt, ...)
diff --git a/drivers/gpu/drm/amd/display/dc/dm_services.h b/drivers/gpu/drm/amd/display/dc/dm_services.h
index d0eed3b4771e..817854e565e0 100644
--- a/drivers/gpu/drm/amd/display/dc/dm_services.h
+++ b/drivers/gpu/drm/amd/display/dc/dm_services.h
@@ -35,6 +35,7 @@
 #include "dm_services_types.h"
 #include "logger_interface.h"
 #include "link_service_types.h"
+#include <linux/sprintf.h>
 
 #undef DEPRECATED
 
diff --git a/drivers/gpu/drm/amd/display/modules/hdcp/hdcp_log.c b/drivers/gpu/drm/amd/display/modules/hdcp/hdcp_log.c
index 6b3b5f610907..43a7e1f02e1b 100644
--- a/drivers/gpu/drm/amd/display/modules/hdcp/hdcp_log.c
+++ b/drivers/gpu/drm/amd/display/modules/hdcp/hdcp_log.c
@@ -25,6 +25,7 @@
 
 
 #include "hdcp.h"
+#include <linux/sprintf.h>
 
 void mod_hdcp_dump_binary_message(uint8_t *msg, uint32_t msg_size,
 		uint8_t *buf, uint32_t buf_size)
diff --git a/drivers/gpu/drm/amd/pm/amdgpu_pm.c b/drivers/gpu/drm/amd/pm/amdgpu_pm.c
index 087d57850304..656c4f358b19 100644
--- a/drivers/gpu/drm/amd/pm/amdgpu_pm.c
+++ b/drivers/gpu/drm/amd/pm/amdgpu_pm.c
@@ -28,6 +28,7 @@
 #include "amdgpu_pm.h"
 #include "amdgpu_dpm.h"
 #include "atom.h"
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
diff --git a/drivers/gpu/drm/amd/pm/legacy-dpm/si_dpm.c b/drivers/gpu/drm/amd/pm/legacy-dpm/si_dpm.c
index df4f20293c16..fcd60acb6b8d 100644
--- a/drivers/gpu/drm/amd/pm/legacy-dpm/si_dpm.c
+++ b/drivers/gpu/drm/amd/pm/legacy-dpm/si_dpm.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amdgpu.h"
 #include "amdgpu_pm.h"
diff --git a/drivers/gpu/drm/amd/pm/powerplay/amd_powerplay.c b/drivers/gpu/drm/amd/pm/powerplay/amd_powerplay.c
index aed0e2cefbf9..ed1e70af06ea 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/amd_powerplay.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/amd_powerplay.c
@@ -21,6 +21,7 @@
  *
  */
 #include "pp_debug.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/gfp.h>
diff --git a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu10_hwmgr.c b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu10_hwmgr.c
index 02ba68d7c654..0f3a0ac943fe 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu10_hwmgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu10_hwmgr.c
@@ -21,6 +21,7 @@
  *
  */
 #include "pp_debug.h"
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
diff --git a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_hwmgr.c b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_hwmgr.c
index aa91730e4eaf..8881fa59b8e9 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_hwmgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_hwmgr.c
@@ -26,6 +26,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <asm/div64.h>
+#include <linux/sprintf.h>
 #if IS_ENABLED(CONFIG_X86_64)
 #include <asm/intel-family.h>
 #endif
diff --git a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu8_hwmgr.c b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu8_hwmgr.c
index b015a601b385..58dba0a0a386 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu8_hwmgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu8_hwmgr.c
@@ -21,6 +21,7 @@
  *
  */
 #include "pp_debug.h"
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
diff --git a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega10_hwmgr.c b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega10_hwmgr.c
index 6d6bc6a380b3..484af648e7a1 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega10_hwmgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega10_hwmgr.c
@@ -25,6 +25,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "hwmgr.h"
 #include "amd_powerplay.h"
diff --git a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega12_hwmgr.c b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega12_hwmgr.c
index 460067933de2..a1f50d87ea77 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega12_hwmgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega12_hwmgr.c
@@ -24,6 +24,7 @@
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "hwmgr.h"
 #include "amd_powerplay.h"
diff --git a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega20_hwmgr.c b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega20_hwmgr.c
index 3b33af30eb0f..57fff153adcf 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega20_hwmgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega20_hwmgr.c
@@ -24,6 +24,7 @@
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "hwmgr.h"
 #include "amd_powerplay.h"
diff --git a/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu10_smumgr.c b/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu10_smumgr.c
index 7eeab84d421a..937c315db850 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu10_smumgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu10_smumgr.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "smumgr.h"
 #include "smu10_inc.h"
diff --git a/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu7_smumgr.c b/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu7_smumgr.c
index 5a010cd38303..d7fc6a0be262 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu7_smumgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/smumgr/smu7_smumgr.c
@@ -30,6 +30,7 @@
 #include "smu7_ppsmc.h"
 #include "smu7_smumgr.h"
 #include "smu7_common.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "polaris10_pwrvirus.h"
 
diff --git a/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega10_smumgr.c b/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega10_smumgr.c
index a70d73896649..d801708530e1 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega10_smumgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega10_smumgr.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "smumgr.h"
 #include "vega10_inc.h"
diff --git a/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega12_smumgr.c b/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega12_smumgr.c
index b52ce135d84d..ba6c11b16fee 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega12_smumgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega12_smumgr.c
@@ -30,6 +30,7 @@
 #include "vega12/smu9_driver_if.h"
 #include "ppatomctrl.h"
 #include "pp_debug.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 
 /*
diff --git a/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega20_smumgr.c b/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega20_smumgr.c
index a5c95b180672..0f584174d945 100644
--- a/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega20_smumgr.c
+++ b/drivers/gpu/drm/amd/pm/powerplay/smumgr/vega20_smumgr.c
@@ -32,6 +32,7 @@
 #include "smu_ucode_xfer_vi.h"
 #include "smu7_smumgr.h"
 #include "vega20_hwmgr.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "smu_v11_0_i2c.h"
 
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu11/arcturus_ppt.c b/drivers/gpu/drm/amd/pm/swsmu/smu11/arcturus_ppt.c
index 4cd43bbec910..cc9ec576ea31 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu11/arcturus_ppt.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu11/arcturus_ppt.c
@@ -46,6 +46,7 @@
 #include <linux/pci.h>
 #include "amdgpu_ras.h"
 #include "smu_cmn.h"
+#include <linux/sprintf.h>
 
 /*
  * DO NOT use these for err/warn/info/debug messages.
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu11/navi10_ppt.c b/drivers/gpu/drm/amd/pm/swsmu/smu11/navi10_ppt.c
index 8d1d29ffb0f1..ccb415b5d185 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu11/navi10_ppt.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu11/navi10_ppt.c
@@ -24,6 +24,7 @@
 #define SWSMU_CODE_LAYER_L2
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 #include <linux/i2c.h>
 #include "amdgpu.h"
@@ -43,6 +44,7 @@
 #include "nbio/nbio_2_3_sh_mask.h"
 #include "thm/thm_11_0_2_offset.h"
 #include "thm/thm_11_0_2_sh_mask.h"
+#include <linux/sprintf.h>
 
 #include "asic_reg/mp/mp_11_0_sh_mask.h"
 #include "smu_cmn.h"
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu11/sienna_cichlid_ppt.c b/drivers/gpu/drm/amd/pm/swsmu/smu11/sienna_cichlid_ppt.c
index 21fc033528fa..46d926b59d6b 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu11/sienna_cichlid_ppt.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu11/sienna_cichlid_ppt.c
@@ -45,6 +45,7 @@
 #include "thm/thm_11_0_2_sh_mask.h"
 #include "mp/mp_11_0_offset.h"
 #include "mp/mp_11_0_sh_mask.h"
+#include <linux/sprintf.h>
 
 #include "asic_reg/mp/mp_11_0_sh_mask.h"
 #include "amdgpu_ras.h"
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu11/smu_v11_0.c b/drivers/gpu/drm/amd/pm/swsmu/smu11/smu_v11_0.c
index f6545093bfc1..468d4a31edcf 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu11/smu_v11_0.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu11/smu_v11_0.c
@@ -21,9 +21,11 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 
 #define SMU_11_0_PARTIAL_PPTABLE
 #define SWSMU_CODE_LAYER_L3
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c b/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c
index ed15f5a0fd11..57dd89ecd57c 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu12/smu_v12_0.c
@@ -32,6 +32,7 @@
 #include "soc15_common.h"
 #include "atom.h"
 #include "smu_cmn.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "asic_reg/mp/mp_12_0_0_offset.h"
 #include "asic_reg/mp/mp_12_0_0_sh_mask.h"
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu13/aldebaran_ppt.c b/drivers/gpu/drm/amd/pm/swsmu/smu13/aldebaran_ppt.c
index dd9bcbd630a1..f544a863639d 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu13/aldebaran_ppt.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu13/aldebaran_ppt.c
@@ -46,6 +46,7 @@
 #include "amdgpu_ras.h"
 #include "smu_cmn.h"
 #include "mp/mp_13_0_2_offset.h"
+#include <linux/sprintf.h>
 
 /*
  * DO NOT use these for err/warn/info/debug messages.
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0.c b/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0.c
index 48170bb5112e..b807e0cc5313 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0.c
@@ -21,9 +21,11 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 
 #define SMU_13_0_PARTIAL_PPTABLE
 #define SWSMU_CODE_LAYER_L3
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c b/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c
index a9954ffc02c5..377566cd8661 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c
@@ -42,6 +42,7 @@
 #include "nbio/nbio_4_3_0_sh_mask.h"
 #include "mp/mp_13_0_0_offset.h"
 #include "mp/mp_13_0_0_sh_mask.h"
+#include <linux/sprintf.h>
 
 #include "asic_reg/mp/mp_13_0_0_sh_mask.h"
 #include "smu_cmn.h"
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_6_ppt.c b/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_6_ppt.c
index 1b96158b63bf..e91b72dcfab7 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_6_ppt.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_6_ppt.c
@@ -50,6 +50,7 @@
 #include "mp/mp_13_0_6_offset.h"
 #include "mp/mp_13_0_6_sh_mask.h"
 #include "umc_v12_0.h"
+#include <linux/sprintf.h>
 
 #undef MP1_Public
 #undef smnMP1_FIRMWARE_FLAGS
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu14/smu_v14_0.c b/drivers/gpu/drm/amd/pm/swsmu/smu14/smu_v14_0.c
index 2aa7e9945a0b..cbcfa0c4615b 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu14/smu_v14_0.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu14/smu_v14_0.c
@@ -21,9 +21,11 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 
 #define SWSMU_CODE_LAYER_L3
 
diff --git a/drivers/gpu/drm/amd/pm/swsmu/smu_cmn.c b/drivers/gpu/drm/amd/pm/swsmu/smu_cmn.c
index b8dbd4e25348..1153bcfb6930 100644
--- a/drivers/gpu/drm/amd/pm/swsmu/smu_cmn.c
+++ b/drivers/gpu/drm/amd/pm/swsmu/smu_cmn.c
@@ -26,6 +26,7 @@
 #include "amdgpu_smu.h"
 #include "smu_cmn.h"
 #include "soc15_common.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * DO NOT use these for err/warn/info/debug messages.
diff --git a/drivers/gpu/drm/arm/display/include/malidp_io.h b/drivers/gpu/drm/arm/display/include/malidp_io.h
index 9440dff94212..ecfd650b2ff2 100644
--- a/drivers/gpu/drm/arm/display/include/malidp_io.h
+++ b/drivers/gpu/drm/arm/display/include/malidp_io.h
@@ -8,6 +8,7 @@
 #define _MALIDP_IO_H_
 
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static inline u32
 malidp_read32(u32 __iomem *base, u32 offset)
diff --git a/drivers/gpu/drm/arm/display/komeda/d71/d71_component.c b/drivers/gpu/drm/arm/display/komeda/d71/d71_component.c
index 42510fdea27e..cebb9ed49d6f 100644
--- a/drivers/gpu/drm/arm/display/komeda/d71/d71_component.c
+++ b/drivers/gpu/drm/arm/display/komeda/d71/d71_component.c
@@ -9,6 +9,7 @@
 #include "malidp_io.h"
 #include "komeda_framebuffer.h"
 #include "komeda_color_mgmt.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void get_resources_id(u32 hw_id, u32 *pipe_id, u32 *comp_id)
 {
diff --git a/drivers/gpu/drm/arm/display/komeda/komeda_color_mgmt.c b/drivers/gpu/drm/arm/display/komeda/komeda_color_mgmt.c
index d8e449e6ebda..28df5859897c 100644
--- a/drivers/gpu/drm/arm/display/komeda/komeda_color_mgmt.c
+++ b/drivers/gpu/drm/arm/display/komeda/komeda_color_mgmt.c
@@ -7,6 +7,8 @@
 
 #include "komeda_color_mgmt.h"
 
+#include <linux/array_size.h> // for ARRAY_SIZE()
+
 /* 10bit precision YUV2RGB matrix */
 static const s32 yuv2rgb_bt601_narrow[KOMEDA_N_YUV2RGB_COEFFS] = {
 	1192,    0, 1634,
diff --git a/drivers/gpu/drm/arm/display/komeda/komeda_crtc.c b/drivers/gpu/drm/arm/display/komeda/komeda_crtc.c
index 2c661f28410e..8e414229fe7c 100644
--- a/drivers/gpu/drm/arm/display/komeda/komeda_crtc.c
+++ b/drivers/gpu/drm/arm/display/komeda/komeda_crtc.c
@@ -5,8 +5,10 @@
  *
  */
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/pm_runtime.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/arm/display/komeda/komeda_event.c b/drivers/gpu/drm/arm/display/komeda/komeda_event.c
index 53f944e66dfc..e93aafacd58c 100644
--- a/drivers/gpu/drm/arm/display/komeda/komeda_event.c
+++ b/drivers/gpu/drm/arm/display/komeda/komeda_event.c
@@ -6,6 +6,7 @@
  */
 #include <drm/drm_atomic.h>
 #include <drm/drm_print.h>
+#include <linux/sprintf.h>
 
 #include "komeda_dev.h"
 
diff --git a/drivers/gpu/drm/arm/display/komeda/komeda_pipeline.c b/drivers/gpu/drm/arm/display/komeda/komeda_pipeline.c
index 4b7d94961527..7f4ff48d5583 100644
--- a/drivers/gpu/drm/arm/display/komeda/komeda_pipeline.c
+++ b/drivers/gpu/drm/arm/display/komeda/komeda_pipeline.c
@@ -5,6 +5,7 @@
  *
  */
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_print.h>
 
diff --git a/drivers/gpu/drm/arm/malidp_drv.c b/drivers/gpu/drm/arm/malidp_drv.c
index 6682131d2910..f3ba789f1db0 100644
--- a/drivers/gpu/drm/arm/malidp_drv.c
+++ b/drivers/gpu/drm/arm/malidp_drv.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/arm/malidp_hw.c b/drivers/gpu/drm/arm/malidp_hw.c
index 9b845d3f34e1..9274bd83726a 100644
--- a/drivers/gpu/drm/arm/malidp_hw.c
+++ b/drivers/gpu/drm/arm/malidp_hw.c
@@ -10,6 +10,7 @@
 
 #include <linux/clk.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/types.h>
 #include <linux/io.h>
 
diff --git a/drivers/gpu/drm/arm/malidp_planes.c b/drivers/gpu/drm/arm/malidp_planes.c
index 34547edf1ee3..7a7c388e6695 100644
--- a/drivers/gpu/drm/arm/malidp_planes.c
+++ b/drivers/gpu/drm/arm/malidp_planes.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/platform_device.h>
 
 #include <drm/drm_atomic.h>
diff --git a/drivers/gpu/drm/armada/armada_debugfs.c b/drivers/gpu/drm/armada/armada_debugfs.c
index 29f4b52e3c8d..de4a3d29757b 100644
--- a/drivers/gpu/drm/armada/armada_debugfs.c
+++ b/drivers/gpu/drm/armada/armada_debugfs.c
@@ -7,6 +7,7 @@
 #include <linux/ctype.h>
 #include <linux/module.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <drm/drm_debugfs.h>
diff --git a/drivers/gpu/drm/aspeed/aspeed_gfx_drv.c b/drivers/gpu/drm/aspeed/aspeed_gfx_drv.c
index a7a6b70220eb..4e3a9cf54bf6 100644
--- a/drivers/gpu/drm/aspeed/aspeed_gfx_drv.c
+++ b/drivers/gpu/drm/aspeed/aspeed_gfx_drv.c
@@ -4,6 +4,7 @@
 #include <linux/clk.h>
 #include <linux/dma-mapping.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
@@ -12,6 +13,7 @@
 #include <linux/property.h>
 #include <linux/regmap.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_device.h>
diff --git a/drivers/gpu/drm/ast/ast_i2c.c b/drivers/gpu/drm/ast/ast_i2c.c
index e5d3f7121de4..d7ce38426fa2 100644
--- a/drivers/gpu/drm/ast/ast_i2c.c
+++ b/drivers/gpu/drm/ast/ast_i2c.c
@@ -23,6 +23,7 @@
 
 #include <drm/drm_managed.h>
 #include <drm/drm_print.h>
+#include <linux/sprintf.h>
 
 #include "ast_drv.h"
 
diff --git a/drivers/gpu/drm/atmel-hlcdc/atmel_hlcdc_output.c b/drivers/gpu/drm/atmel-hlcdc/atmel_hlcdc_output.c
index 50fee6a93964..2f5b6b9f026a 100644
--- a/drivers/gpu/drm/atmel-hlcdc/atmel_hlcdc_output.c
+++ b/drivers/gpu/drm/atmel-hlcdc/atmel_hlcdc_output.c
@@ -8,6 +8,7 @@
  * Author: Boris BREZILLON <boris.brezillon@free-electrons.com>
  */
 
+#include <linux/device.h> // for devm_kzalloc()
 #include <linux/media-bus-format.h>
 #include <linux/of.h>
 #include <linux/of_graph.h>
diff --git a/drivers/gpu/drm/bridge/aux-bridge.c b/drivers/gpu/drm/bridge/aux-bridge.c
index b29980f95379..f21f7080b7ee 100644
--- a/drivers/gpu/drm/bridge/aux-bridge.c
+++ b/drivers/gpu/drm/bridge/aux-bridge.c
@@ -7,6 +7,7 @@
 #include <linux/auxiliary_bus.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/slab.h>
 
 #include <drm/drm_bridge.h>
 #include <drm/bridge/aux-bridge.h>
diff --git a/drivers/gpu/drm/bridge/aux-hpd-bridge.c b/drivers/gpu/drm/bridge/aux-hpd-bridge.c
index bb55f697a181..30b468061c01 100644
--- a/drivers/gpu/drm/bridge/aux-hpd-bridge.c
+++ b/drivers/gpu/drm/bridge/aux-hpd-bridge.c
@@ -7,6 +7,7 @@
 #include <linux/auxiliary_bus.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/slab.h>
 
 #include <drm/drm_bridge.h>
 #include <drm/bridge/aux-bridge.h>
diff --git a/drivers/gpu/drm/bridge/cadence/cdns-dsi-core.c b/drivers/gpu/drm/bridge/cadence/cdns-dsi-core.c
index 7457d38622b0..50e1197658eb 100644
--- a/drivers/gpu/drm/bridge/cadence/cdns-dsi-core.c
+++ b/drivers/gpu/drm/bridge/cadence/cdns-dsi-core.c
@@ -8,6 +8,7 @@
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_drv.h>
 #include <drm/drm_probe_helper.h>
+#include <linux/completion.h>
 #include <video/mipi_display.h>
 
 #include <linux/clk.h>
diff --git a/drivers/gpu/drm/bridge/fsl-ldb.c b/drivers/gpu/drm/bridge/fsl-ldb.c
index 0e4bac7dd04f..2bcafd0fb28a 100644
--- a/drivers/gpu/drm/bridge/fsl-ldb.c
+++ b/drivers/gpu/drm/bridge/fsl-ldb.c
@@ -11,6 +11,7 @@
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/slab.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_bridge.h>
diff --git a/drivers/gpu/drm/bridge/ite-it6505.c b/drivers/gpu/drm/bridge/ite-it6505.c
index b589136ca6da..1e25488f68f6 100644
--- a/drivers/gpu/drm/bridge/ite-it6505.c
+++ b/drivers/gpu/drm/bridge/ite-it6505.c
@@ -3,6 +3,7 @@
  * Copyright (c) 2020, The Linux Foundation. All rights reserved.
  */
 #include <linux/bits.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
@@ -16,6 +17,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/wait.h>
 
diff --git a/drivers/gpu/drm/bridge/nwl-dsi.c b/drivers/gpu/drm/bridge/nwl-dsi.c
index 8d54091ec66e..3792fb965b9d 100644
--- a/drivers/gpu/drm/bridge/nwl-dsi.c
+++ b/drivers/gpu/drm/bridge/nwl-dsi.c
@@ -9,6 +9,7 @@
 #include <linux/bitfield.h>
 #include <linux/bits.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/irq.h>
 #include <linux/math64.h>
 #include <linux/mfd/syscon.h>
diff --git a/drivers/gpu/drm/bridge/samsung-dsim.c b/drivers/gpu/drm/bridge/samsung-dsim.c
index 95fedc68b0ae..0097056f5f2a 100644
--- a/drivers/gpu/drm/bridge/samsung-dsim.c
+++ b/drivers/gpu/drm/bridge/samsung-dsim.c
@@ -11,6 +11,7 @@
  */
 
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include <linux/clk.h>
 #include <linux/delay.h>
diff --git a/drivers/gpu/drm/bridge/synopsys/dw-hdmi-ahb-audio.c b/drivers/gpu/drm/bridge/synopsys/dw-hdmi-ahb-audio.c
index 67b8d17a722a..71a36dec4003 100644
--- a/drivers/gpu/drm/bridge/synopsys/dw-hdmi-ahb-audio.c
+++ b/drivers/gpu/drm/bridge/synopsys/dw-hdmi-ahb-audio.c
@@ -10,6 +10,7 @@
 #include <linux/platform_device.h>
 #include <drm/bridge/dw_hdmi.h>
 #include <drm/drm_edid.h>
+#include <linux/sprintf.h>
 
 #include <sound/asoundef.h>
 #include <sound/core.h>
diff --git a/drivers/gpu/drm/bridge/synopsys/dw-hdmi.c b/drivers/gpu/drm/bridge/synopsys/dw-hdmi.c
index ca74a20015b3..05fb86775d75 100644
--- a/drivers/gpu/drm/bridge/synopsys/dw-hdmi.c
+++ b/drivers/gpu/drm/bridge/synopsys/dw-hdmi.c
@@ -7,6 +7,7 @@
  * Copyright (C) 2010, Guennadi Liakhovetski <g.liakhovetski@gmx.de>
  */
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/hdmi.h>
diff --git a/drivers/gpu/drm/display/drm_dp_aux_dev.c b/drivers/gpu/drm/display/drm_dp_aux_dev.c
index 29555b9f03c8..fb3d32a8ac62 100644
--- a/drivers/gpu/drm/display/drm_dp_aux_dev.c
+++ b/drivers/gpu/drm/display/drm_dp_aux_dev.c
@@ -32,6 +32,7 @@
 #include <linux/module.h>
 #include <linux/sched/signal.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/uio.h>
 
diff --git a/drivers/gpu/drm/display/drm_dp_mst_topology.c b/drivers/gpu/drm/display/drm_dp_mst_topology.c
index f7c6b60629c2..8dc653f108f5 100644
--- a/drivers/gpu/drm/display/drm_dp_mst_topology.c
+++ b/drivers/gpu/drm/display/drm_dp_mst_topology.c
@@ -30,6 +30,7 @@
 #include <linux/sched.h>
 #include <linux/seq_file.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #if IS_ENABLED(CONFIG_DRM_DEBUG_DP_MST_TOPOLOGY_REFS)
 #include <linux/stacktrace.h>
diff --git a/drivers/gpu/drm/drm_atomic.c b/drivers/gpu/drm/drm_atomic.c
index a91737adf8e7..895147a810bb 100644
--- a/drivers/gpu/drm/drm_atomic.c
+++ b/drivers/gpu/drm/drm_atomic.c
@@ -28,6 +28,7 @@
 
 
 #include <linux/sync_file.h>
+#include <linux/completion.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_uapi.h>
diff --git a/drivers/gpu/drm/drm_atomic_helper.c b/drivers/gpu/drm/drm_atomic_helper.c
index 39ef0a6addeb..b791384a8b31 100644
--- a/drivers/gpu/drm/drm_atomic_helper.c
+++ b/drivers/gpu/drm/drm_atomic_helper.c
@@ -27,6 +27,7 @@
 
 #include <linux/dma-fence.h>
 #include <linux/ktime.h>
+#include <linux/completion.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/drm_atomic_uapi.c b/drivers/gpu/drm/drm_atomic_uapi.c
index 29d4940188d4..5a18e059530b 100644
--- a/drivers/gpu/drm/drm_atomic_uapi.c
+++ b/drivers/gpu/drm/drm_atomic_uapi.c
@@ -34,6 +34,7 @@
 #include <drm/drm_drv.h>
 #include <drm/drm_writeback.h>
 #include <drm/drm_vblank.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <linux/dma-fence.h>
 #include <linux/uaccess.h>
diff --git a/drivers/gpu/drm/drm_connector.c b/drivers/gpu/drm/drm_connector.c
index b0516505f7ae..ae90134336db 100644
--- a/drivers/gpu/drm/drm_connector.c
+++ b/drivers/gpu/drm/drm_connector.c
@@ -32,6 +32,7 @@
 #include <drm/drm_privacy_screen_consumer.h>
 #include <drm/drm_sysfs.h>
 #include <drm/drm_utils.h>
+#include <linux/sprintf.h>
 
 #include <linux/property.h>
 #include <linux/uaccess.h>
diff --git a/drivers/gpu/drm/drm_crtc.c b/drivers/gpu/drm/drm_crtc.c
index cb90e70d85e8..62223865751e 100644
--- a/drivers/gpu/drm/drm_crtc.c
+++ b/drivers/gpu/drm/drm_crtc.c
@@ -34,6 +34,7 @@
 #include <linux/slab.h>
 #include <linux/export.h>
 #include <linux/dma-fence.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <drm/drm_blend.h>
 #include <drm/drm_crtc.h>
diff --git a/drivers/gpu/drm/drm_damage_helper.c b/drivers/gpu/drm/drm_damage_helper.c
index afb02aae707b..ebd3fe609beb 100644
--- a/drivers/gpu/drm/drm_damage_helper.c
+++ b/drivers/gpu/drm/drm_damage_helper.c
@@ -35,6 +35,8 @@
 #include <drm/drm_device.h>
 #include <drm/drm_framebuffer.h>
 
+#include <linux/slab.h>
+
 static void convert_clip_rect_to_rect(const struct drm_clip_rect *src,
 				      struct drm_mode_rect *dest,
 				      uint32_t num_clips, uint32_t src_inc)
diff --git a/drivers/gpu/drm/drm_debugfs.c b/drivers/gpu/drm/drm_debugfs.c
index 08fcefd804bc..e2ec2b0a5579 100644
--- a/drivers/gpu/drm/drm_debugfs.c
+++ b/drivers/gpu/drm/drm_debugfs.c
@@ -27,6 +27,7 @@
 #include <linux/export.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <drm/drm_atomic.h>
diff --git a/drivers/gpu/drm/drm_debugfs_crc.c b/drivers/gpu/drm/drm_debugfs_crc.c
index bbc3bc4ba844..8af5d8510701 100644
--- a/drivers/gpu/drm/drm_debugfs_crc.c
+++ b/drivers/gpu/drm/drm_debugfs_crc.c
@@ -30,6 +30,7 @@
 #include <linux/ctype.h>
 #include <linux/debugfs.h>
 #include <linux/poll.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <drm/drm_crtc.h>
diff --git a/drivers/gpu/drm/drm_drv.c b/drivers/gpu/drm/drm_drv.c
index 243cacb3575c..06f96722c02e 100644
--- a/drivers/gpu/drm/drm_drv.c
+++ b/drivers/gpu/drm/drm_drv.c
@@ -33,6 +33,7 @@
 #include <linux/mount.h>
 #include <linux/pseudo_fs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/srcu.h>
 
 #include <drm/drm_accel.h>
diff --git a/drivers/gpu/drm/drm_edid.c b/drivers/gpu/drm/drm_edid.c
index 923c4423151c..3a627ddb343f 100644
--- a/drivers/gpu/drm/drm_edid.c
+++ b/drivers/gpu/drm/drm_edid.c
@@ -36,6 +36,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vga_switcheroo.h>
 
 #include <drm/drm_displayid.h>
diff --git a/drivers/gpu/drm/drm_encoder.c b/drivers/gpu/drm/drm_encoder.c
index 8f2bc6a28482..101f10c5b170 100644
--- a/drivers/gpu/drm/drm_encoder.c
+++ b/drivers/gpu/drm/drm_encoder.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_bridge.h>
 #include <drm/drm_device.h>
diff --git a/drivers/gpu/drm/drm_fb_helper.c b/drivers/gpu/drm/drm_fb_helper.c
index d612133e2cf7..a8a541458360 100644
--- a/drivers/gpu/drm/drm_fb_helper.c
+++ b/drivers/gpu/drm/drm_fb_helper.c
@@ -31,6 +31,7 @@
 
 #include <linux/console.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/sysrq.h>
 #include <linux/vga_switcheroo.h>
 
diff --git a/drivers/gpu/drm/drm_file.c b/drivers/gpu/drm/drm_file.c
index 8c87287c3e16..4441b8ed437f 100644
--- a/drivers/gpu/drm/drm_file.c
+++ b/drivers/gpu/drm/drm_file.c
@@ -32,6 +32,7 @@
  */
 
 #include <linux/anon_inodes.h>
+#include <linux/completion.h>
 #include <linux/dma-fence.h>
 #include <linux/file.h>
 #include <linux/module.h>
diff --git a/drivers/gpu/drm/drm_lease.c b/drivers/gpu/drm/drm_lease.c
index 94375c6a5425..07d22babc3e9 100644
--- a/drivers/gpu/drm/drm_lease.c
+++ b/drivers/gpu/drm/drm_lease.c
@@ -3,6 +3,7 @@
  * Copyright  2017 Keith Packard <keithp@keithp.com>
  */
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/uaccess.h>
 
 #include <drm/drm_auth.h>
diff --git a/drivers/gpu/drm/drm_mipi_dbi.c b/drivers/gpu/drm/drm_mipi_dbi.c
index daac649aabdb..3792b4cf1721 100644
--- a/drivers/gpu/drm/drm_mipi_dbi.c
+++ b/drivers/gpu/drm/drm_mipi_dbi.c
@@ -9,6 +9,7 @@
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/gpio/consumer.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/regulator/consumer.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/gpu/drm/drm_mode_config.c b/drivers/gpu/drm/drm_mode_config.c
index 8525ef851540..1707026c3d89 100644
--- a/drivers/gpu/drm/drm_mode_config.c
+++ b/drivers/gpu/drm/drm_mode_config.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/uaccess.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_drv.h>
 #include <drm/drm_encoder.h>
diff --git a/drivers/gpu/drm/drm_modes.c b/drivers/gpu/drm/drm_modes.c
index c4f88c3a93b7..e65a92073ac2 100644
--- a/drivers/gpu/drm/drm_modes.c
+++ b/drivers/gpu/drm/drm_modes.c
@@ -33,9 +33,11 @@
 #include <linux/ctype.h>
 #include <linux/export.h>
 #include <linux/fb.h> /* for KHZ2PICOS() */
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/list_sort.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <video/of_display_timing.h>
 #include <video/of_videomode.h>
diff --git a/drivers/gpu/drm/drm_pci.c b/drivers/gpu/drm/drm_pci.c
index c585f1e8803e..37e90f6e7229 100644
--- a/drivers/gpu/drm/drm_pci.c
+++ b/drivers/gpu/drm/drm_pci.c
@@ -28,6 +28,7 @@
 #include <linux/mutex.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_auth.h>
 #include <drm/drm.h>
diff --git a/drivers/gpu/drm/drm_plane.c b/drivers/gpu/drm/drm_plane.c
index 672c655c7a8e..86676cae860b 100644
--- a/drivers/gpu/drm/drm_plane.c
+++ b/drivers/gpu/drm/drm_plane.c
@@ -21,7 +21,9 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_plane.h>
 #include <drm/drm_drv.h>
diff --git a/drivers/gpu/drm/drm_print.c b/drivers/gpu/drm/drm_print.c
index 5b93c11895bb..ae5ef10819b1 100644
--- a/drivers/gpu/drm/drm_print.c
+++ b/drivers/gpu/drm/drm_print.c
@@ -24,6 +24,7 @@
  */
 
 #include <linux/stdarg.h>
+#include <linux/sprintf.h>
 
 #include <linux/io.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/gpu/drm/drm_privacy_screen.c b/drivers/gpu/drm/drm_privacy_screen.c
index 6cc39e30781f..5091f9226200 100644
--- a/drivers/gpu/drm/drm_privacy_screen.c
+++ b/drivers/gpu/drm/drm_privacy_screen.c
@@ -16,6 +16,7 @@
 #include <drm/drm_privacy_screen_consumer.h>
 #include <drm/drm_privacy_screen_driver.h>
 #include "drm_internal.h"
+#include <linux/sprintf.h>
 
 /**
  * DOC: overview
diff --git a/drivers/gpu/drm/drm_property.c b/drivers/gpu/drm/drm_property.c
index 596272149a35..7ec79180f40d 100644
--- a/drivers/gpu/drm/drm_property.c
+++ b/drivers/gpu/drm/drm_property.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/uaccess.h>
 
 #include <drm/drm_crtc.h>
diff --git a/drivers/gpu/drm/drm_syncobj.c b/drivers/gpu/drm/drm_syncobj.c
index 84101baeecc6..30cf293d2e1f 100644
--- a/drivers/gpu/drm/drm_syncobj.c
+++ b/drivers/gpu/drm/drm_syncobj.c
@@ -197,6 +197,7 @@
 #include <linux/eventfd.h>
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sched/signal.h>
 #include <linux/sync_file.h>
 #include <linux/uaccess.h>
diff --git a/drivers/gpu/drm/drm_sysfs.c b/drivers/gpu/drm/drm_sysfs.c
index a953f69a34b6..ee33688279ba 100644
--- a/drivers/gpu/drm/drm_sysfs.c
+++ b/drivers/gpu/drm/drm_sysfs.c
@@ -20,6 +20,7 @@
 #include <linux/kdev_t.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_accel.h>
 #include <drm/drm_connector.h>
diff --git a/drivers/gpu/drm/drm_writeback.c b/drivers/gpu/drm/drm_writeback.c
index a031c335bdb9..78c49b128b11 100644
--- a/drivers/gpu/drm/drm_writeback.c
+++ b/drivers/gpu/drm/drm_writeback.c
@@ -10,6 +10,8 @@
  */
 
 #include <linux/dma-fence.h>
+#include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_crtc.h>
 #include <drm/drm_device.h>
diff --git a/drivers/gpu/drm/etnaviv/etnaviv_gem_submit.c b/drivers/gpu/drm/etnaviv/etnaviv_gem_submit.c
index 3d0f8d182506..60cffc0ef555 100644
--- a/drivers/gpu/drm/etnaviv/etnaviv_gem_submit.c
+++ b/drivers/gpu/drm/etnaviv/etnaviv_gem_submit.c
@@ -6,6 +6,7 @@
 #include <drm/drm_file.h>
 #include <linux/dma-fence-array.h>
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/pm_runtime.h>
 #include <linux/dma-resv.h>
 #include <linux/sync_file.h>
diff --git a/drivers/gpu/drm/etnaviv/etnaviv_gpu.c b/drivers/gpu/drm/etnaviv/etnaviv_gpu.c
index 734412aae94d..5f284d961e61 100644
--- a/drivers/gpu/drm/etnaviv/etnaviv_gpu.c
+++ b/drivers/gpu/drm/etnaviv/etnaviv_gpu.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/component.h>
 #include <linux/delay.h>
 #include <linux/dma-fence.h>
diff --git a/drivers/gpu/drm/etnaviv/etnaviv_iommu_v2.c b/drivers/gpu/drm/etnaviv/etnaviv_iommu_v2.c
index d664ae29ae20..efadb1e0edc7 100644
--- a/drivers/gpu/drm/etnaviv/etnaviv_iommu_v2.c
+++ b/drivers/gpu/drm/etnaviv/etnaviv_iommu_v2.c
@@ -5,6 +5,7 @@
 
 #include <linux/bitops.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/platform_device.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
diff --git a/drivers/gpu/drm/exynos/exynos_drm_g2d.c b/drivers/gpu/drm/exynos/exynos_drm_g2d.c
index f3138423612e..47758670ecf6 100644
--- a/drivers/gpu/drm/exynos/exynos_drm_g2d.c
+++ b/drivers/gpu/drm/exynos/exynos_drm_g2d.c
@@ -6,6 +6,7 @@
 
 #include <linux/refcount.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/component.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/gpu/drm/exynos/exynos_drm_vidi.c b/drivers/gpu/drm/exynos/exynos_drm_vidi.c
index 00382f28748a..2195ff37edb8 100644
--- a/drivers/gpu/drm/exynos/exynos_drm_vidi.c
+++ b/drivers/gpu/drm/exynos/exynos_drm_vidi.c
@@ -8,7 +8,9 @@
 
 #include <linux/component.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_drv.c b/drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_drv.c
index ab6c0c6cd0e2..8464ceb7e885 100644
--- a/drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_drv.c
+++ b/drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_drv.c
@@ -17,6 +17,7 @@
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_drv.h>
diff --git a/drivers/gpu/drm/gma500/intel_gmbus.c b/drivers/gpu/drm/gma500/intel_gmbus.c
index aa45509859f2..ae835ba19989 100644
--- a/drivers/gpu/drm/gma500/intel_gmbus.c
+++ b/drivers/gpu/drm/gma500/intel_gmbus.c
@@ -31,6 +31,7 @@
 #include <linux/i2c-algo-bit.h>
 #include <linux/i2c.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "psb_drv.h"
 #include "psb_intel_drv.h"
diff --git a/drivers/gpu/drm/gma500/intel_i2c.c b/drivers/gpu/drm/gma500/intel_i2c.c
index 9d02a7b6d9a3..cbe9917f48d5 100644
--- a/drivers/gpu/drm/gma500/intel_i2c.c
+++ b/drivers/gpu/drm/gma500/intel_i2c.c
@@ -10,6 +10,7 @@
 #include <linux/export.h>
 #include <linux/i2c-algo-bit.h>
 #include <linux/i2c.h>
+#include <linux/sprintf.h>
 
 #include "psb_drv.h"
 #include "psb_intel_reg.h"
diff --git a/drivers/gpu/drm/gma500/oaktrail_hdmi_i2c.c b/drivers/gpu/drm/gma500/oaktrail_hdmi_i2c.c
index 6daa6669ed23..b33511c84370 100644
--- a/drivers/gpu/drm/gma500/oaktrail_hdmi_i2c.c
+++ b/drivers/gpu/drm/gma500/oaktrail_hdmi_i2c.c
@@ -31,6 +31,7 @@
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include "psb_drv.h"
+#include <linux/completion.h>
 
 #define HDMI_READ(reg)		readl(hdmi_dev->regs + (reg))
 #define HDMI_WRITE(reg, val)	writel(val, hdmi_dev->regs + (reg))
diff --git a/drivers/gpu/drm/gma500/psb_intel_sdvo.c b/drivers/gpu/drm/gma500/psb_intel_sdvo.c
index e4f914deceba..60ee5bb659a3 100644
--- a/drivers/gpu/drm/gma500/psb_intel_sdvo.c
+++ b/drivers/gpu/drm/gma500/psb_intel_sdvo.c
@@ -31,6 +31,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_crtc.h>
 #include <drm/drm_crtc_helper.h>
diff --git a/drivers/gpu/drm/gud/gud_connector.c b/drivers/gpu/drm/gud/gud_connector.c
index 034e78360d4f..378bd69ba92a 100644
--- a/drivers/gpu/drm/gud/gud_connector.c
+++ b/drivers/gpu/drm/gud/gud_connector.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/backlight.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include <drm/drm_atomic.h>
diff --git a/drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_i2c.c b/drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_i2c.c
index e6e48651c15c..c91d91162e12 100644
--- a/drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_i2c.c
+++ b/drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_i2c.c
@@ -11,6 +11,7 @@
 
 #include <linux/delay.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_probe_helper.h>
diff --git a/drivers/gpu/drm/hyperv/hyperv_drm_drv.c b/drivers/gpu/drm/hyperv/hyperv_drm_drv.c
index cff85086f2d6..814673707ef2 100644
--- a/drivers/gpu/drm/hyperv/hyperv_drm_drv.c
+++ b/drivers/gpu/drm/hyperv/hyperv_drm_drv.c
@@ -7,6 +7,7 @@
 #include <linux/hyperv.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/completion.h>
 
 #include <drm/drm_aperture.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/hyperv/hyperv_drm_proto.c b/drivers/gpu/drm/hyperv/hyperv_drm_proto.c
index 013a7829182d..ed642cfbebaf 100644
--- a/drivers/gpu/drm/hyperv/hyperv_drm_proto.c
+++ b/drivers/gpu/drm/hyperv/hyperv_drm_proto.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/hyperv.h>
+#include <linux/completion.h>
 
 #include <drm/drm_print.h>
 #include <drm/drm_simple_kms_helper.h>
diff --git a/drivers/gpu/drm/i915/display/hsw_ips.c b/drivers/gpu/drm/i915/display/hsw_ips.c
index 611a7d6ef80c..e61afcf0265f 100644
--- a/drivers/gpu/drm/i915/display/hsw_ips.c
+++ b/drivers/gpu/drm/i915/display/hsw_ips.c
@@ -11,6 +11,8 @@
 #include "intel_display_types.h"
 #include "intel_pcode.h"
 
+#include <linux/completion.h>
+
 static void hsw_ips_enable(const struct intel_crtc_state *crtc_state)
 {
 	struct intel_crtc *crtc = to_intel_crtc(crtc_state->uapi.crtc);
diff --git a/drivers/gpu/drm/i915/display/intel_backlight.c b/drivers/gpu/drm/i915/display/intel_backlight.c
index 1946d7fb3c2e..913d307b3c04 100644
--- a/drivers/gpu/drm/i915/display/intel_backlight.c
+++ b/drivers/gpu/drm/i915/display/intel_backlight.c
@@ -6,6 +6,7 @@
 #include <linux/backlight.h>
 #include <linux/kernel.h>
 #include <linux/pwm.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include <acpi/video.h>
diff --git a/drivers/gpu/drm/i915/display/intel_crtc_state_dump.c b/drivers/gpu/drm/i915/display/intel_crtc_state_dump.c
index 49fd100ec98a..080702f4e532 100644
--- a/drivers/gpu/drm/i915/display/intel_crtc_state_dump.c
+++ b/drivers/gpu/drm/i915/display/intel_crtc_state_dump.c
@@ -5,6 +5,7 @@
 
 #include <drm/drm_edid.h>
 #include <drm/drm_eld.h>
+#include <linux/sprintf.h>
 
 #include "i915_drv.h"
 #include "intel_crtc_state_dump.h"
diff --git a/drivers/gpu/drm/i915/display/intel_cursor.c b/drivers/gpu/drm/i915/display/intel_cursor.c
index f8b33999d43f..0140af95b4a0 100644
--- a/drivers/gpu/drm/i915/display/intel_cursor.c
+++ b/drivers/gpu/drm/i915/display/intel_cursor.c
@@ -2,6 +2,7 @@
 /*
  * Copyright  2020 Intel Corporation
  */
+#include <linux/completion.h>
 #include <linux/kernel.h>
 
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/i915/display/intel_ddi.c b/drivers/gpu/drm/i915/display/intel_ddi.c
index bea441590204..3cf76413254a 100644
--- a/drivers/gpu/drm/i915/display/intel_ddi.c
+++ b/drivers/gpu/drm/i915/display/intel_ddi.c
@@ -25,6 +25,7 @@
  *
  */
 
+#include <linux/completion.h>
 #include <linux/iopoll.h>
 #include <linux/string_helpers.h>
 
diff --git a/drivers/gpu/drm/i915/display/intel_display.c b/drivers/gpu/drm/i915/display/intel_display.c
index 1b844cac4c58..42027725b3f1 100644
--- a/drivers/gpu/drm/i915/display/intel_display.c
+++ b/drivers/gpu/drm/i915/display/intel_display.c
@@ -24,6 +24,7 @@
  *	Eric Anholt <eric@anholt.net>
  */
 
+#include <linux/completion.h>
 #include <linux/dma-resv.h>
 #include <linux/i2c.h>
 #include <linux/input.h>
diff --git a/drivers/gpu/drm/i915/display/intel_display_debugfs.c b/drivers/gpu/drm/i915/display/intel_display_debugfs.c
index 6f2d13c8ccf7..7e768d7c1577 100644
--- a/drivers/gpu/drm/i915/display/intel_display_debugfs.c
+++ b/drivers/gpu/drm/i915/display/intel_display_debugfs.c
@@ -3,6 +3,9 @@
  * Copyright  2020 Intel Corporation
  */
 
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include <drm/drm_debugfs.h>
diff --git a/drivers/gpu/drm/i915/display/intel_display_debugfs_params.c b/drivers/gpu/drm/i915/display/intel_display_debugfs_params.c
index f35718748555..6928fc05f887 100644
--- a/drivers/gpu/drm/i915/display/intel_display_debugfs_params.c
+++ b/drivers/gpu/drm/i915/display/intel_display_debugfs_params.c
@@ -5,6 +5,8 @@
 
 #include <linux/debugfs.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_drv.h>
 
diff --git a/drivers/gpu/drm/i915/display/intel_display_driver.c b/drivers/gpu/drm/i915/display/intel_display_driver.c
index 14a9a62cab8a..efba71aed919 100644
--- a/drivers/gpu/drm/i915/display/intel_display_driver.c
+++ b/drivers/gpu/drm/i915/display/intel_display_driver.c
@@ -15,6 +15,7 @@
 #include <drm/drm_privacy_screen_consumer.h>
 #include <drm/drm_probe_helper.h>
 #include <drm/drm_vblank.h>
+#include <linux/sprintf.h>
 
 #include "i915_drv.h"
 #include "i9xx_wm.h"
diff --git a/drivers/gpu/drm/i915/display/intel_dp.c b/drivers/gpu/drm/i915/display/intel_dp.c
index 5045c34a16be..f0b3545c9957 100644
--- a/drivers/gpu/drm/i915/display/intel_dp.c
+++ b/drivers/gpu/drm/i915/display/intel_dp.c
@@ -25,10 +25,12 @@
  *
  */
 
+#include <linux/completion.h>
 #include <linux/export.h>
 #include <linux/i2c.h>
 #include <linux/notifier.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/timekeeping.h>
 #include <linux/types.h>
diff --git a/drivers/gpu/drm/i915/display/intel_dp_aux.c b/drivers/gpu/drm/i915/display/intel_dp_aux.c
index 4f4a0e3b3114..0e85bfcd6ed8 100644
--- a/drivers/gpu/drm/i915/display/intel_dp_aux.c
+++ b/drivers/gpu/drm/i915/display/intel_dp_aux.c
@@ -14,6 +14,7 @@
 #include "intel_dp_aux_regs.h"
 #include "intel_pps.h"
 #include "intel_tc.h"
+#include <linux/sprintf.h>
 
 #define AUX_CH_NAME_BUFSIZE	6
 
diff --git a/drivers/gpu/drm/i915/display/intel_drrs.c b/drivers/gpu/drm/i915/display/intel_drrs.c
index 6282ec0fc9b4..407e7725149b 100644
--- a/drivers/gpu/drm/i915/display/intel_drrs.c
+++ b/drivers/gpu/drm/i915/display/intel_drrs.c
@@ -12,6 +12,8 @@
 #include "intel_frontbuffer.h"
 #include "intel_panel.h"
 
+#include <linux/completion.h>
+
 /**
  * DOC: Display Refresh Rate Switching (DRRS)
  *
diff --git a/drivers/gpu/drm/i915/display/intel_global_state.c b/drivers/gpu/drm/i915/display/intel_global_state.c
index cbcd1e91b7be..c10e9e97dabb 100644
--- a/drivers/gpu/drm/i915/display/intel_global_state.c
+++ b/drivers/gpu/drm/i915/display/intel_global_state.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/string.h>
+#include <linux/completion.h>
 
 #include "i915_drv.h"
 #include "intel_atomic.h"
diff --git a/drivers/gpu/drm/i915/display/intel_gmbus.c b/drivers/gpu/drm/i915/display/intel_gmbus.c
index d3e03ed5b79c..9a7ab7626d9e 100644
--- a/drivers/gpu/drm/i915/display/intel_gmbus.c
+++ b/drivers/gpu/drm/i915/display/intel_gmbus.c
@@ -30,6 +30,7 @@
 #include <linux/export.h>
 #include <linux/i2c-algo-bit.h>
 #include <linux/i2c.h>
+#include <linux/sprintf.h>
 
 #include <drm/display/drm_hdcp_helper.h>
 
diff --git a/drivers/gpu/drm/i915/display/intel_hotplug.c b/drivers/gpu/drm/i915/display/intel_hotplug.c
index d9ec349f3c8c..f17f6e763f72 100644
--- a/drivers/gpu/drm/i915/display/intel_hotplug.c
+++ b/drivers/gpu/drm/i915/display/intel_hotplug.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 
 #include "i915_drv.h"
 #include "i915_irq.h"
diff --git a/drivers/gpu/drm/i915/display/intel_sdvo.c b/drivers/gpu/drm/i915/display/intel_sdvo.c
index 412c15d32f07..2b44fc50e959 100644
--- a/drivers/gpu/drm/i915/display/intel_sdvo.c
+++ b/drivers/gpu/drm/i915/display/intel_sdvo.c
@@ -30,6 +30,7 @@
 #include <linux/export.h>
 #include <linux/i2c.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/display/drm_hdmi_helper.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/i915/display/intel_tc.c b/drivers/gpu/drm/i915/display/intel_tc.c
index 6b374d481cd9..c20e0dbd6494 100644
--- a/drivers/gpu/drm/i915/display/intel_tc.c
+++ b/drivers/gpu/drm/i915/display/intel_tc.c
@@ -19,6 +19,7 @@
 #include "intel_mg_phy_regs.h"
 #include "intel_modeset_lock.h"
 #include "intel_tc.h"
+#include <linux/sprintf.h>
 
 #define DP_PIN_ASSIGNMENT_C	0x3
 #define DP_PIN_ASSIGNMENT_D	0x4
diff --git a/drivers/gpu/drm/i915/display/intel_tv.c b/drivers/gpu/drm/i915/display/intel_tv.c
index a96bcfcf90a3..ce98c19fbbf3 100644
--- a/drivers/gpu/drm/i915/display/intel_tv.c
+++ b/drivers/gpu/drm/i915/display/intel_tv.c
@@ -33,6 +33,7 @@
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_crtc.h>
 #include <drm/drm_edid.h>
+#include <linux/sprintf.h>
 
 #include "i915_drv.h"
 #include "i915_reg.h"
diff --git a/drivers/gpu/drm/i915/display/intel_wm.c b/drivers/gpu/drm/i915/display/intel_wm.c
index 82c4933ad507..35a09d47d4d8 100644
--- a/drivers/gpu/drm/i915/display/intel_wm.c
+++ b/drivers/gpu/drm/i915/display/intel_wm.c
@@ -8,6 +8,7 @@
 #include "intel_display_types.h"
 #include "intel_wm.h"
 #include "skl_watermark.h"
+#include <linux/sprintf.h>
 
 /**
  * intel_update_watermarks - update FIFO watermark values based on current modes
diff --git a/drivers/gpu/drm/i915/display/skl_universal_plane.c b/drivers/gpu/drm/i915/display/skl_universal_plane.c
index e941e2e4fd14..cf5c671d6675 100644
--- a/drivers/gpu/drm/i915/display/skl_universal_plane.c
+++ b/drivers/gpu/drm/i915/display/skl_universal_plane.c
@@ -7,6 +7,7 @@
 #include <drm/drm_blend.h>
 #include <drm/drm_damage_helper.h>
 #include <drm/drm_fourcc.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "i915_drv.h"
 #include "i915_reg.h"
diff --git a/drivers/gpu/drm/i915/display/skl_watermark.c b/drivers/gpu/drm/i915/display/skl_watermark.c
index 614f319d754e..2d2f47b860dc 100644
--- a/drivers/gpu/drm/i915/display/skl_watermark.c
+++ b/drivers/gpu/drm/i915/display/skl_watermark.c
@@ -4,6 +4,7 @@
  */
 
 #include <drm/drm_blend.h>
+#include <linux/kstrtox.h>
 
 #include "i915_drv.h"
 #include "i915_fixed.h"
diff --git a/drivers/gpu/drm/i915/gem/i915_gem_context.c b/drivers/gpu/drm/i915/gem/i915_gem_context.c
index dcbfe32fd30c..7332b3daadfb 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_context.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_context.c
@@ -65,8 +65,10 @@
  */
 
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/log2.h>
 #include <linux/nospec.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_cache.h>
 #include <drm/drm_syncobj.h>
diff --git a/drivers/gpu/drm/i915/gem/i915_gem_create.c b/drivers/gpu/drm/i915/gem/i915_gem_create.c
index 19156ba4b9ef..1b7c8170116b 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_create.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_create.c
@@ -4,6 +4,8 @@
  */
 
 #include <drm/drm_fourcc.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
+#include <linux/sprintf.h>
 
 #include "display/intel_display.h"
 #include "gem/i915_gem_ioctls.h"
diff --git a/drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c b/drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c
index 555022c0652c..451ff433503f 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c
@@ -6,6 +6,7 @@
 
 #include <linux/dma-resv.h>
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/sync_file.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/gpu/drm/i915/gem/i915_gem_mman.c b/drivers/gpu/drm/i915/gem/i915_gem_mman.c
index a2195e28b625..247657b17009 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_mman.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_mman.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/anon_inodes.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/mman.h>
 #include <linux/pfn_t.h>
 #include <linux/sizes.h>
diff --git a/drivers/gpu/drm/i915/gem/i915_gem_phys.c b/drivers/gpu/drm/i915/gem/i915_gem_phys.c
index ef85c6dc9fd5..146c33949b3d 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_phys.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_phys.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/shmem_fs.h>
 #include <linux/swap.h>
 
diff --git a/drivers/gpu/drm/i915/gem/i915_gem_shmem.c b/drivers/gpu/drm/i915/gem/i915_gem_shmem.c
index 38b72d86560f..7f6bf1923eb2 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_shmem.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_shmem.c
@@ -7,6 +7,7 @@
 #include <linux/pagevec.h>
 #include <linux/shmem_fs.h>
 #include <linux/swap.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_cache.h>
 
diff --git a/drivers/gpu/drm/i915/gem/i915_gem_shrinker.c b/drivers/gpu/drm/i915/gem/i915_gem_shrinker.c
index d166052eb2ce..63dfbfbcbadf 100644
--- a/drivers/gpu/drm/i915/gem/i915_gem_shrinker.c
+++ b/drivers/gpu/drm/i915/gem/i915_gem_shrinker.c
@@ -7,6 +7,7 @@
 #include <linux/oom.h>
 #include <linux/sched/mm.h>
 #include <linux/shmem_fs.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/swap.h>
 #include <linux/pci.h>
diff --git a/drivers/gpu/drm/i915/gem/selftests/i915_gem_client_blt.c b/drivers/gpu/drm/i915/gem/selftests/i915_gem_client_blt.c
index 10a7847f1b04..c6d747041df4 100644
--- a/drivers/gpu/drm/i915/gem/selftests/i915_gem_client_blt.c
+++ b/drivers/gpu/drm/i915/gem/selftests/i915_gem_client_blt.c
@@ -4,6 +4,7 @@
  */
 
 #include "i915_selftest.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gt/intel_context.h"
 #include "gt/intel_engine_regs.h"
diff --git a/drivers/gpu/drm/i915/gem/selftests/i915_gem_coherency.c b/drivers/gpu/drm/i915/gem/selftests/i915_gem_coherency.c
index 2a0c0634d446..36c098a89bca 100644
--- a/drivers/gpu/drm/i915/gem/selftests/i915_gem_coherency.c
+++ b/drivers/gpu/drm/i915/gem/selftests/i915_gem_coherency.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/prime_numbers.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gt/intel_engine_pm.h"
 #include "gt/intel_gpu_commands.h"
diff --git a/drivers/gpu/drm/i915/gem/selftests/i915_gem_context.c b/drivers/gpu/drm/i915/gem/selftests/i915_gem_context.c
index 89d4dc8b60c6..7c36af8a8be4 100644
--- a/drivers/gpu/drm/i915/gem/selftests/i915_gem_context.c
+++ b/drivers/gpu/drm/i915/gem/selftests/i915_gem_context.c
@@ -6,6 +6,7 @@
 
 #include <linux/prime_numbers.h>
 #include <linux/string_helpers.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 #include "gem/i915_gem_pm.h"
diff --git a/drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c b/drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c
index 99a9ade73956..08f287be1eb1 100644
--- a/drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c
+++ b/drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/prime_numbers.h>
 
 #include "gem/i915_gem_internal.h"
diff --git a/drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.c b/drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.c
index 20a232a140b0..b93df2c6651a 100644
--- a/drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.c
+++ b/drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.c
@@ -5,6 +5,7 @@
  */
 
 #include "igt_gem_utils.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_context.h"
 #include "gem/i915_gem_internal.h"
diff --git a/drivers/gpu/drm/i915/gt/gen8_engine_cs.c b/drivers/gpu/drm/i915/gt/gen8_engine_cs.c
index 86a04afff64b..28c3fe7eadbd 100644
--- a/drivers/gpu/drm/i915/gt/gen8_engine_cs.c
+++ b/drivers/gpu/drm/i915/gt/gen8_engine_cs.c
@@ -9,6 +9,7 @@
 #include "intel_gt.h"
 #include "intel_lrc.h"
 #include "intel_ring.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 int gen8_emit_flush_rcs(struct i915_request *rq, u32 mode)
 {
diff --git a/drivers/gpu/drm/i915/gt/gen8_ppgtt.c b/drivers/gpu/drm/i915/gt/gen8_ppgtt.c
index fa46d2308b0e..fe7cc5ed54ad 100644
--- a/drivers/gpu/drm/i915/gt/gen8_ppgtt.c
+++ b/drivers/gpu/drm/i915/gt/gen8_ppgtt.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/log2.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 #include "gem/i915_gem_lmem.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_context_sseu.c b/drivers/gpu/drm/i915/gt/intel_context_sseu.c
index ece16c2b5b8e..99b84b17ef4c 100644
--- a/drivers/gpu/drm/i915/gt/intel_context_sseu.c
+++ b/drivers/gpu/drm/i915/gt/intel_context_sseu.c
@@ -12,6 +12,7 @@
 #include "intel_lrc_reg.h"
 #include "intel_ring.h"
 #include "intel_sseu.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int gen8_emit_rpcs_config(struct i915_request *rq,
 				 const struct intel_context *ce,
diff --git a/drivers/gpu/drm/i915/gt/intel_engine_cs.c b/drivers/gpu/drm/i915/gt/intel_engine_cs.c
index 40687806d22a..4597999b909d 100644
--- a/drivers/gpu/drm/i915/gt/intel_engine_cs.c
+++ b/drivers/gpu/drm/i915/gt/intel_engine_cs.c
@@ -4,6 +4,8 @@
  */
 
 #include <linux/string_helpers.h>
+#include <linux/sprintf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_print.h>
 
diff --git a/drivers/gpu/drm/i915/gt/intel_engine_user.c b/drivers/gpu/drm/i915/gt/intel_engine_user.c
index 833987015b8b..d5098efabd23 100644
--- a/drivers/gpu/drm/i915/gt/intel_engine_user.c
+++ b/drivers/gpu/drm/i915/gt/intel_engine_user.c
@@ -6,6 +6,7 @@
 #include <linux/list.h>
 #include <linux/list_sort.h>
 #include <linux/llist.h>
+#include <linux/sprintf.h>
 
 #include "i915_drv.h"
 #include "intel_engine.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_execlists_submission.c b/drivers/gpu/drm/i915/gt/intel_execlists_submission.c
index 42aade0faf2d..dffcc5cb5c40 100644
--- a/drivers/gpu/drm/i915/gt/intel_execlists_submission.c
+++ b/drivers/gpu/drm/i915/gt/intel_execlists_submission.c
@@ -107,6 +107,8 @@
  *
  */
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include "i915_drv.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_ggtt.c b/drivers/gpu/drm/i915/gt/intel_ggtt.c
index ec1cbe229f0e..b6008a3c6ca5 100644
--- a/drivers/gpu/drm/i915/gt/intel_ggtt.c
+++ b/drivers/gpu/drm/i915/gt/intel_ggtt.c
@@ -5,6 +5,7 @@
 
 #include <asm/set_memory.h>
 #include <asm/smp.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/types.h>
 #include <linux/stop_machine.h>
 
diff --git a/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c b/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c
index 40371b8a9bbb..98a58d15f587 100644
--- a/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c
+++ b/drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "display/intel_display.h"
 #include "i915_drv.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_gt.c b/drivers/gpu/drm/i915/gt/intel_gt.c
index a425db5ed3a2..ba043f45b84e 100644
--- a/drivers/gpu/drm/i915/gt/intel_gt.c
+++ b/drivers/gpu/drm/i915/gt/intel_gt.c
@@ -5,6 +5,7 @@
 
 #include <drm/drm_managed.h>
 #include <drm/intel-gtt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 #include "gem/i915_gem_lmem.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_gt_debugfs.c b/drivers/gpu/drm/i915/gt/intel_gt_debugfs.c
index 4dc23b8d3aa2..a719defbcd05 100644
--- a/drivers/gpu/drm/i915/gt/intel_gt_debugfs.c
+++ b/drivers/gpu/drm/i915/gt/intel_gt_debugfs.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "i915_drv.h"
 #include "intel_gt.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_gt_sysfs_pm.c b/drivers/gpu/drm/i915/gt/intel_gt_sysfs_pm.c
index f0dea54880af..eca4cdf00915 100644
--- a/drivers/gpu/drm/i915/gt/intel_gt_sysfs_pm.c
+++ b/drivers/gpu/drm/i915/gt/intel_gt_sysfs_pm.c
@@ -4,6 +4,7 @@
  */
 
 #include <drm/drm_device.h>
+#include <linux/kstrtox.h>
 #include <linux/sysfs.h>
 #include <linux/printk.h>
 
diff --git a/drivers/gpu/drm/i915/gt/intel_gtt.c b/drivers/gpu/drm/i915/gt/intel_gtt.c
index 7811a8c9da06..9ed4f4f3af6b 100644
--- a/drivers/gpu/drm/i915/gt/intel_gtt.c
+++ b/drivers/gpu/drm/i915/gt/intel_gtt.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/slab.h> /* fault-inject.h is not standalone! */
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/fault-inject.h>
 #include <linux/sched/mm.h>
diff --git a/drivers/gpu/drm/i915/gt/intel_gtt.h b/drivers/gpu/drm/i915/gt/intel_gtt.h
index 6b85222ee3ea..0faf3340d8b1 100644
--- a/drivers/gpu/drm/i915/gt/intel_gtt.h
+++ b/drivers/gpu/drm/i915/gt/intel_gtt.h
@@ -17,6 +17,7 @@
 #define __INTEL_GTT_H__
 
 #include <linux/io-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kref.h>
 #include <linux/mm.h>
 #include <linux/pagevec.h>
diff --git a/drivers/gpu/drm/i915/gt/intel_lrc.c b/drivers/gpu/drm/i915/gt/intel_lrc.c
index 7c367ba8d9dc..cc05e08fc90b 100644
--- a/drivers/gpu/drm/i915/gt/intel_lrc.c
+++ b/drivers/gpu/drm/i915/gt/intel_lrc.c
@@ -4,6 +4,7 @@
  */
 
 #include "gem/i915_gem_lmem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gen8_engine_cs.h"
 #include "i915_drv.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_lrc_reg.h b/drivers/gpu/drm/i915/gt/intel_lrc_reg.h
index 304000c7e345..34dc658cf2e9 100644
--- a/drivers/gpu/drm/i915/gt/intel_lrc_reg.h
+++ b/drivers/gpu/drm/i915/gt/intel_lrc_reg.h
@@ -7,6 +7,7 @@
 #define _INTEL_LRC_REG_H_
 
 #include <linux/types.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define CTX_DESC_FORCE_RESTORE BIT_ULL(2)
 
diff --git a/drivers/gpu/drm/i915/gt/intel_migrate.c b/drivers/gpu/drm/i915/gt/intel_migrate.c
index 576e5ef0289b..0123be761e98 100644
--- a/drivers/gpu/drm/i915/gt/intel_migrate.c
+++ b/drivers/gpu/drm/i915/gt/intel_migrate.c
@@ -11,6 +11,7 @@
 #include "intel_migrate.h"
 #include "intel_ring.h"
 #include "gem/i915_gem_lmem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 struct insert_pte_data {
 	u64 offset;
diff --git a/drivers/gpu/drm/i915/gt/intel_renderstate.c b/drivers/gpu/drm/i915/gt/intel_renderstate.c
index 4b56ec3743cf..67ced5e73940 100644
--- a/drivers/gpu/drm/i915/gt/intel_renderstate.c
+++ b/drivers/gpu/drm/i915/gt/intel_renderstate.c
@@ -4,6 +4,7 @@
  */
 
 #include "gem/i915_gem_internal.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "i915_drv.h"
 #include "intel_renderstate.h"
diff --git a/drivers/gpu/drm/i915/gt/intel_ring_submission.c b/drivers/gpu/drm/i915/gt/intel_ring_submission.c
index 92085ffd23de..dc33c1b0986a 100644
--- a/drivers/gpu/drm/i915/gt/intel_ring_submission.c
+++ b/drivers/gpu/drm/i915/gt/intel_ring_submission.c
@@ -4,6 +4,7 @@
  */
 
 #include <drm/drm_cache.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 
diff --git a/drivers/gpu/drm/i915/gt/mock_engine.c b/drivers/gpu/drm/i915/gt/mock_engine.c
index c0637bf799a3..76d4fff7a27f 100644
--- a/drivers/gpu/drm/i915/gt/mock_engine.c
+++ b/drivers/gpu/drm/i915/gt/mock_engine.c
@@ -5,6 +5,7 @@
 
 #include "gem/i915_gem_context.h"
 #include "gt/intel_ring.h"
+#include <linux/sprintf.h>
 
 #include "i915_drv.h"
 #include "intel_context.h"
diff --git a/drivers/gpu/drm/i915/gt/selftest_execlists.c b/drivers/gpu/drm/i915/gt/selftest_execlists.c
index 4202df5b8c12..4025144a06f9 100644
--- a/drivers/gpu/drm/i915/gt/selftest_execlists.c
+++ b/drivers/gpu/drm/i915/gt/selftest_execlists.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/prime_numbers.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 #include "gem/i915_gem_pm.h"
diff --git a/drivers/gpu/drm/i915/gt/selftest_hangcheck.c b/drivers/gpu/drm/i915/gt/selftest_hangcheck.c
index 0dd4d00ee894..0cf97b67df44 100644
--- a/drivers/gpu/drm/i915/gt/selftest_hangcheck.c
+++ b/drivers/gpu/drm/i915/gt/selftest_hangcheck.c
@@ -4,6 +4,8 @@
  */
 
 #include <linux/kthread.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_context.h"
 #include "gem/i915_gem_internal.h"
diff --git a/drivers/gpu/drm/i915/gt/selftest_lrc.c b/drivers/gpu/drm/i915/gt/selftest_lrc.c
index e17b8777d21d..37bcbe092fd5 100644
--- a/drivers/gpu/drm/i915/gt/selftest_lrc.c
+++ b/drivers/gpu/drm/i915/gt/selftest_lrc.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/prime_numbers.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 
diff --git a/drivers/gpu/drm/i915/gt/selftest_rps.c b/drivers/gpu/drm/i915/gt/selftest_rps.c
index dcef8d498919..633992b42c3f 100644
--- a/drivers/gpu/drm/i915/gt/selftest_rps.c
+++ b/drivers/gpu/drm/i915/gt/selftest_rps.c
@@ -5,6 +5,7 @@
 
 #include <linux/pm_qos.h>
 #include <linux/sort.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 
diff --git a/drivers/gpu/drm/i915/gt/selftest_timeline.c b/drivers/gpu/drm/i915/gt/selftest_timeline.c
index fa36cf920bde..1f37d6d352d6 100644
--- a/drivers/gpu/drm/i915/gt/selftest_timeline.c
+++ b/drivers/gpu/drm/i915/gt/selftest_timeline.c
@@ -5,6 +5,7 @@
 
 #include <linux/prime_numbers.h>
 #include <linux/string_helpers.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "intel_context.h"
 #include "intel_engine_heartbeat.h"
diff --git a/drivers/gpu/drm/i915/gt/selftest_tlb.c b/drivers/gpu/drm/i915/gt/selftest_tlb.c
index 3941f2d6fa47..08cb5add7f74 100644
--- a/drivers/gpu/drm/i915/gt/selftest_tlb.c
+++ b/drivers/gpu/drm/i915/gt/selftest_tlb.c
@@ -4,6 +4,7 @@
  */
 
 #include "i915_selftest.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 #include "gem/i915_gem_lmem.h"
diff --git a/drivers/gpu/drm/i915/gt/selftest_workarounds.c b/drivers/gpu/drm/i915/gt/selftest_workarounds.c
index 14a8b25b6204..94b9bf1c0b01 100644
--- a/drivers/gpu/drm/i915/gt/selftest_workarounds.c
+++ b/drivers/gpu/drm/i915/gt/selftest_workarounds.c
@@ -9,6 +9,7 @@
 #include "gt/intel_gt.h"
 #include "i915_selftest.h"
 #include "intel_reset.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "selftests/igt_flush_test.h"
 #include "selftests/igt_reset.h"
diff --git a/drivers/gpu/drm/i915/gt/sysfs_engines.c b/drivers/gpu/drm/i915/gt/sysfs_engines.c
index 021f51d9b456..6891f6c35052 100644
--- a/drivers/gpu/drm/i915/gt/sysfs_engines.c
+++ b/drivers/gpu/drm/i915/gt/sysfs_engines.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/sysfs.h>
 
 #include "i915_drv.h"
diff --git a/drivers/gpu/drm/i915/gt/uc/intel_gsc_fw.c b/drivers/gpu/drm/i915/gt/uc/intel_gsc_fw.c
index e2e42b3e0d5d..cbd5209715d3 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_gsc_fw.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_gsc_fw.c
@@ -13,6 +13,7 @@
 #include "intel_gsc_fw.h"
 #include "intel_gsc_uc_heci_cmd_submit.h"
 #include "i915_reg.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static bool gsc_is_in_reset(struct intel_uncore *uncore)
 {
diff --git a/drivers/gpu/drm/i915/gt/uc/intel_gsc_uc_heci_cmd_submit.c b/drivers/gpu/drm/i915/gt/uc/intel_gsc_uc_heci_cmd_submit.c
index 2fde5c360cff..fd623cc04f7a 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_gsc_uc_heci_cmd_submit.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_gsc_uc_heci_cmd_submit.c
@@ -9,6 +9,7 @@
 #include "gt/intel_gt.h"
 #include "gt/intel_ring.h"
 #include "intel_gsc_uc_heci_cmd_submit.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 struct gsc_heci_pkt {
 	u64 addr_in;
diff --git a/drivers/gpu/drm/i915/gt/uc/intel_guc.c b/drivers/gpu/drm/i915/gt/uc/intel_guc.c
index 2b450c43bbd7..1edc853c9713 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_guc.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_guc.c
@@ -17,6 +17,7 @@
 #include "i915_drv.h"
 #include "i915_irq.h"
 #include "i915_reg.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /**
  * DOC: GuC
diff --git a/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c b/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c
index cc9569af7f0c..a4ffb9157f1c 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c
@@ -7,6 +7,7 @@
 #include "gt/intel_hwconfig.h"
 #include "i915_drv.h"
 #include "i915_memcpy.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * GuC has a blob containing hardware configuration information (HWConfig).
diff --git a/drivers/gpu/drm/i915/gt/uc/intel_guc_log_debugfs.c b/drivers/gpu/drm/i915/gt/uc/intel_guc_log_debugfs.c
index ddfbe334689f..5d7cd7fb28da 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_guc_log_debugfs.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_guc_log_debugfs.c
@@ -5,6 +5,7 @@
 
 #include <linux/fs.h>
 #include <drm/drm_print.h>
+#include <linux/kstrtox.h>
 
 #include "gt/intel_gt_debugfs.h"
 #include "intel_guc.h"
diff --git a/drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c b/drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c
index a259f1118c5a..b5beb3f0b523 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c
@@ -4,6 +4,8 @@
  */
 
 #include <linux/circ_buf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "gem/i915_gem_context.h"
 #include "gem/i915_gem_lmem.h"
diff --git a/drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c b/drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
index 756093eaf2ad..190e55f6ec96 100644
--- a/drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
+++ b/drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c
@@ -6,6 +6,7 @@
 #include <linux/bitfield.h>
 #include <linux/firmware.h>
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_cache.h>
 #include <drm/drm_print.h>
diff --git a/drivers/gpu/drm/i915/gvt/aperture_gm.c b/drivers/gpu/drm/i915/gvt/aperture_gm.c
index eedd1865bb98..0dbbfd8c87f8 100644
--- a/drivers/gpu/drm/i915/gvt/aperture_gm.c
+++ b/drivers/gpu/drm/i915/gvt/aperture_gm.c
@@ -38,6 +38,7 @@
 #include "i915_reg.h"
 #include "gt/intel_ggtt_fencing.h"
 #include "gvt.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int alloc_gm(struct intel_vgpu *vgpu, bool high_gm)
 {
diff --git a/drivers/gpu/drm/i915/gvt/cmd_parser.c b/drivers/gpu/drm/i915/gvt/cmd_parser.c
index d4a3f3e093b0..9a5bcfeaca1f 100644
--- a/drivers/gpu/drm/i915/gvt/cmd_parser.c
+++ b/drivers/gpu/drm/i915/gvt/cmd_parser.c
@@ -35,6 +35,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "i915_drv.h"
 #include "i915_reg.h"
diff --git a/drivers/gpu/drm/i915/gvt/debugfs.c b/drivers/gpu/drm/i915/gvt/debugfs.c
index baccbf1761b7..72e68616c006 100644
--- a/drivers/gpu/drm/i915/gvt/debugfs.c
+++ b/drivers/gpu/drm/i915/gvt/debugfs.c
@@ -24,6 +24,7 @@
 #include <linux/list_sort.h>
 #include "i915_drv.h"
 #include "gvt.h"
+#include <linux/sprintf.h>
 
 struct mmio_diff_param {
 	struct intel_vgpu *vgpu;
diff --git a/drivers/gpu/drm/i915/gvt/firmware.c b/drivers/gpu/drm/i915/gvt/firmware.c
index 4dd52ac2043e..6ef0b37b7c08 100644
--- a/drivers/gpu/drm/i915/gvt/firmware.c
+++ b/drivers/gpu/drm/i915/gvt/firmware.c
@@ -30,6 +30,7 @@
 
 #include <linux/firmware.h>
 #include <linux/crc32.h>
+#include <linux/sprintf.h>
 
 #include "i915_drv.h"
 #include "gvt.h"
diff --git a/drivers/gpu/drm/i915/gvt/handlers.c b/drivers/gpu/drm/i915/gvt/handlers.c
index efcb00472be2..38b33e76bce5 100644
--- a/drivers/gpu/drm/i915/gvt/handlers.c
+++ b/drivers/gpu/drm/i915/gvt/handlers.c
@@ -52,6 +52,8 @@
 #include "display/skl_watermark_regs.h"
 #include "display/vlv_dsi_pll_regs.h"
 #include "gt/intel_gt_regs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 /* XXX FIXME i915 has changed PP_XXX definition */
 #define PCH_PP_STATUS  _MMIO(0xc7200)
diff --git a/drivers/gpu/drm/i915/gvt/kvmgt.c b/drivers/gpu/drm/i915/gvt/kvmgt.c
index 4f74d867fe1a..54fefd0dda71 100644
--- a/drivers/gpu/drm/i915/gvt/kvmgt.c
+++ b/drivers/gpu/drm/i915/gvt/kvmgt.c
@@ -37,6 +37,7 @@
 #include <linux/mm.h>
 #include <linux/kthread.h>
 #include <linux/sched/mm.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/rbtree.h>
diff --git a/drivers/gpu/drm/i915/gvt/scheduler.c b/drivers/gpu/drm/i915/gvt/scheduler.c
index a5c8005ec484..12ede14f05ea 100644
--- a/drivers/gpu/drm/i915/gvt/scheduler.c
+++ b/drivers/gpu/drm/i915/gvt/scheduler.c
@@ -34,6 +34,7 @@
  */
 
 #include <linux/kthread.h>
+#include <linux/completion.h>
 
 #include "gem/i915_gem_pm.h"
 #include "gt/intel_context.h"
diff --git a/drivers/gpu/drm/i915/gvt/trace.h b/drivers/gpu/drm/i915/gvt/trace.h
index 020f1aa28322..39dd85e0a4d3 100644
--- a/drivers/gpu/drm/i915/gvt/trace.h
+++ b/drivers/gpu/drm/i915/gvt/trace.h
@@ -35,6 +35,7 @@
 #include <linux/stringify.h>
 #include <linux/tracepoint.h>
 #include <asm/tsc.h>
+#include <linux/sprintf.h>
 
 #undef TRACE_SYSTEM
 #define TRACE_SYSTEM gvt
diff --git a/drivers/gpu/drm/i915/gvt/vgpu.c b/drivers/gpu/drm/i915/gvt/vgpu.c
index 08ad1bd651f1..38d3adaf562a 100644
--- a/drivers/gpu/drm/i915/gvt/vgpu.c
+++ b/drivers/gpu/drm/i915/gvt/vgpu.c
@@ -34,6 +34,7 @@
 #include "i915_drv.h"
 #include "gvt.h"
 #include "i915_pvinfo.h"
+#include <linux/sprintf.h>
 
 void populate_pvinfo_page(struct intel_vgpu *vgpu)
 {
diff --git a/drivers/gpu/drm/i915/i915_cmd_parser.c b/drivers/gpu/drm/i915/i915_cmd_parser.c
index 2905df83e180..9d000d0dbe35 100644
--- a/drivers/gpu/drm/i915/i915_cmd_parser.c
+++ b/drivers/gpu/drm/i915/i915_cmd_parser.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_cache.h>
 
diff --git a/drivers/gpu/drm/i915/i915_debugfs.c b/drivers/gpu/drm/i915/i915_debugfs.c
index db99c2ef66db..ded5698396ea 100644
--- a/drivers/gpu/drm/i915/i915_debugfs.c
+++ b/drivers/gpu/drm/i915/i915_debugfs.c
@@ -28,6 +28,7 @@
 
 #include <linux/sched/mm.h>
 #include <linux/sort.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include <drm/drm_debugfs.h>
diff --git a/drivers/gpu/drm/i915/i915_debugfs_params.c b/drivers/gpu/drm/i915/i915_debugfs_params.c
index 8bca02025e09..873f710dc54b 100644
--- a/drivers/gpu/drm/i915/i915_debugfs_params.c
+++ b/drivers/gpu/drm/i915/i915_debugfs_params.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 
 #include "i915_debugfs_params.h"
 #include "gt/intel_gt.h"
diff --git a/drivers/gpu/drm/i915/i915_gem.c b/drivers/gpu/drm/i915/i915_gem.c
index 92758b6b41f0..4fffa7cda9f7 100644
--- a/drivers/gpu/drm/i915/i915_gem.c
+++ b/drivers/gpu/drm/i915/i915_gem.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/dma-fence-array.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/kthread.h>
 #include <linux/dma-resv.h>
 #include <linux/shmem_fs.h>
diff --git a/drivers/gpu/drm/i915/i915_gpu_error.c b/drivers/gpu/drm/i915/i915_gpu_error.c
index a0b784ebaddd..5bd1121c6a7f 100644
--- a/drivers/gpu/drm/i915/i915_gpu_error.c
+++ b/drivers/gpu/drm/i915/i915_gpu_error.c
@@ -29,9 +29,11 @@
 
 #include <linux/ascii85.h>
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/nmi.h>
 #include <linux/pagevec.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/utsname.h>
 #include <linux/zlib.h>
diff --git a/drivers/gpu/drm/i915/i915_hwmon.c b/drivers/gpu/drm/i915/i915_hwmon.c
index 8c3f443c8347..a0db6e9a3d6b 100644
--- a/drivers/gpu/drm/i915/i915_hwmon.c
+++ b/drivers/gpu/drm/i915/i915_hwmon.c
@@ -5,6 +5,8 @@
 
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "i915_drv.h"
diff --git a/drivers/gpu/drm/i915/i915_irq.c b/drivers/gpu/drm/i915/i915_irq.c
index 8130f043693b..254d88cad3ab 100644
--- a/drivers/gpu/drm/i915/i915_irq.c
+++ b/drivers/gpu/drm/i915/i915_irq.c
@@ -29,6 +29,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysrq.h>
 
 #include <drm/drm_drv.h>
diff --git a/drivers/gpu/drm/i915/i915_mitigations.c b/drivers/gpu/drm/i915/i915_mitigations.c
index def7302ef7fe..20d7d367a83e 100644
--- a/drivers/gpu/drm/i915/i915_mitigations.c
+++ b/drivers/gpu/drm/i915/i915_mitigations.c
@@ -6,6 +6,7 @@
 #include <linux/kernel.h>
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include "i915_driver.h"
diff --git a/drivers/gpu/drm/i915/i915_pci.c b/drivers/gpu/drm/i915/i915_pci.c
index 8b4fdeabb12a..5f605b4107cf 100644
--- a/drivers/gpu/drm/i915/i915_pci.c
+++ b/drivers/gpu/drm/i915/i915_pci.c
@@ -25,6 +25,7 @@
 #include <drm/drm_color_mgmt.h>
 #include <drm/drm_drv.h>
 #include <drm/i915_pciids.h>
+#include <linux/kstrtox.h>
 
 #include "display/intel_display.h"
 #include "display/intel_display_driver.h"
diff --git a/drivers/gpu/drm/i915/i915_perf.c b/drivers/gpu/drm/i915/i915_perf.c
index 2d695818f006..7650e5306ad1 100644
--- a/drivers/gpu/drm/i915/i915_perf.c
+++ b/drivers/gpu/drm/i915/i915_perf.c
@@ -192,8 +192,11 @@
  */
 
 #include <linux/anon_inodes.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/nospec.h>
+#include <linux/ratelimit.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 
 #include "gem/i915_gem_context.h"
diff --git a/drivers/gpu/drm/i915/i915_perf_types.h b/drivers/gpu/drm/i915/i915_perf_types.h
index 46445248d193..403caa12cc86 100644
--- a/drivers/gpu/drm/i915/i915_perf_types.h
+++ b/drivers/gpu/drm/i915/i915_perf_types.h
@@ -9,6 +9,7 @@
 #include <linux/atomic.h>
 #include <linux/device.h>
 #include <linux/hrtimer.h>
+#include <linux/kobject.h>
 #include <linux/llist.h>
 #include <linux/poll.h>
 #include <linux/sysfs.h>
diff --git a/drivers/gpu/drm/i915/i915_pmu.c b/drivers/gpu/drm/i915/i915_pmu.c
index 21eb0c5b320d..480dc7551a77 100644
--- a/drivers/gpu/drm/i915/i915_pmu.c
+++ b/drivers/gpu/drm/i915/i915_pmu.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "gt/intel_engine.h"
 #include "gt/intel_engine_pm.h"
diff --git a/drivers/gpu/drm/i915/i915_query.c b/drivers/gpu/drm/i915/i915_query.c
index fa3e937ed3f5..dc8ecba4c393 100644
--- a/drivers/gpu/drm/i915/i915_query.c
+++ b/drivers/gpu/drm/i915/i915_query.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/nospec.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include "i915_drv.h"
 #include "i915_perf.h"
diff --git a/drivers/gpu/drm/i915/i915_request.c b/drivers/gpu/drm/i915/i915_request.c
index f59081066a19..00e42b0cf93f 100644
--- a/drivers/gpu/drm/i915/i915_request.c
+++ b/drivers/gpu/drm/i915/i915_request.c
@@ -30,6 +30,7 @@
 #include <linux/sched/clock.h>
 #include <linux/sched/signal.h>
 #include <linux/sched/mm.h>
+#include <linux/sprintf.h>
 
 #include "gem/i915_gem_context.h"
 #include "gt/intel_breadcrumbs.h"
diff --git a/drivers/gpu/drm/i915/i915_scatterlist.h b/drivers/gpu/drm/i915/i915_scatterlist.h
index 6cf8a298849f..716e5ab11ce3 100644
--- a/drivers/gpu/drm/i915/i915_scatterlist.h
+++ b/drivers/gpu/drm/i915/i915_scatterlist.h
@@ -7,6 +7,7 @@
 #ifndef I915_SCATTERLIST_H
 #define I915_SCATTERLIST_H
 
+#include <linux/kref.h>
 #include <linux/pfn.h>
 #include <linux/scatterlist.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/gpu/drm/i915/i915_syncmap.c b/drivers/gpu/drm/i915/i915_syncmap.c
index 60404dbb2e9f..681c0a7e53c1 100644
--- a/drivers/gpu/drm/i915/i915_syncmap.c
+++ b/drivers/gpu/drm/i915/i915_syncmap.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "i915_syncmap.h"
 
diff --git a/drivers/gpu/drm/i915/i915_user_extensions.c b/drivers/gpu/drm/i915/i915_user_extensions.c
index e3f808372c47..57c05580b6d8 100644
--- a/drivers/gpu/drm/i915/i915_user_extensions.c
+++ b/drivers/gpu/drm/i915/i915_user_extensions.c
@@ -7,6 +7,7 @@
 #include <linux/nospec.h>
 #include <linux/sched/signal.h>
 #include <linux/uaccess.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <uapi/drm/i915_drm.h>
 
diff --git a/drivers/gpu/drm/i915/i915_vma.c b/drivers/gpu/drm/i915/i915_vma.c
index d09aad34ba37..54b1c6888942 100644
--- a/drivers/gpu/drm/i915/i915_vma.c
+++ b/drivers/gpu/drm/i915/i915_vma.c
@@ -25,6 +25,7 @@
 #include <linux/sched/mm.h>
 #include <linux/dma-fence-array.h>
 #include <drm/drm_gem.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "display/intel_display.h"
 #include "display/intel_frontbuffer.h"
diff --git a/drivers/gpu/drm/i915/i915_vma.h b/drivers/gpu/drm/i915/i915_vma.h
index e356dfb883d3..5cfb5a2dc553 100644
--- a/drivers/gpu/drm/i915/i915_vma.h
+++ b/drivers/gpu/drm/i915/i915_vma.h
@@ -26,6 +26,7 @@
 #define __I915_VMA_H__
 
 #include <linux/io-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/rbtree.h>
 
 #include <drm/drm_mm.h>
diff --git a/drivers/gpu/drm/i915/intel_memory_region.c b/drivers/gpu/drm/i915/intel_memory_region.c
index 52d998e5c21a..9f09eb61644c 100644
--- a/drivers/gpu/drm/i915/intel_memory_region.c
+++ b/drivers/gpu/drm/i915/intel_memory_region.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/prandom.h>
+#include <linux/sprintf.h>
 
 #include <uapi/drm/i915_drm.h>
 
diff --git a/drivers/gpu/drm/i915/pxp/intel_pxp.c b/drivers/gpu/drm/i915/pxp/intel_pxp.c
index 75278e78ca90..3e0d10ebe29d 100644
--- a/drivers/gpu/drm/i915/pxp/intel_pxp.c
+++ b/drivers/gpu/drm/i915/pxp/intel_pxp.c
@@ -3,6 +3,7 @@
  * Copyright(c) 2020 Intel Corporation.
  */
 #include <linux/workqueue.h>
+#include <linux/completion.h>
 
 #include "gem/i915_gem_context.h"
 
diff --git a/drivers/gpu/drm/i915/pxp/intel_pxp_debugfs.c b/drivers/gpu/drm/i915/pxp/intel_pxp_debugfs.c
index e07c5b380789..0af4d66118d0 100644
--- a/drivers/gpu/drm/i915/pxp/intel_pxp_debugfs.c
+++ b/drivers/gpu/drm/i915/pxp/intel_pxp_debugfs.c
@@ -5,6 +5,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/string_helpers.h>
+#include <linux/completion.h>
 
 #include <drm/drm_print.h>
 
diff --git a/drivers/gpu/drm/i915/pxp/intel_pxp_session.c b/drivers/gpu/drm/i915/pxp/intel_pxp_session.c
index 091c86e03d1a..09995b05a7af 100644
--- a/drivers/gpu/drm/i915/pxp/intel_pxp_session.c
+++ b/drivers/gpu/drm/i915/pxp/intel_pxp_session.c
@@ -4,6 +4,7 @@
  */
 
 #include "i915_drv.h"
+#include <linux/completion.h>
 
 #include "intel_pxp.h"
 #include "intel_pxp_cmd.h"
diff --git a/drivers/gpu/drm/i915/selftests/i915_random.h b/drivers/gpu/drm/i915/selftests/i915_random.h
index 05364eca20f7..ff492e5e62ef 100644
--- a/drivers/gpu/drm/i915/selftests/i915_random.h
+++ b/drivers/gpu/drm/i915/selftests/i915_random.h
@@ -27,6 +27,7 @@
 
 #include <linux/math64.h>
 #include <linux/random.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "../i915_selftest.h"
 
diff --git a/drivers/gpu/drm/i915/selftests/i915_request.c b/drivers/gpu/drm/i915/selftests/i915_request.c
index acae30a04a94..ff7936f5d330 100644
--- a/drivers/gpu/drm/i915/selftests/i915_request.c
+++ b/drivers/gpu/drm/i915/selftests/i915_request.c
@@ -22,9 +22,12 @@
  *
  */
 
+#include <linux/kallsyms.h> // for KSYM_NAME_LEN
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/prime_numbers.h>
 #include <linux/pm_qos.h>
 #include <linux/sort.h>
+#include <linux/sprintf.h>
 
 #include "gem/i915_gem_internal.h"
 #include "gem/i915_gem_pm.h"
diff --git a/drivers/gpu/drm/i915/selftests/i915_syncmap.c b/drivers/gpu/drm/i915/selftests/i915_syncmap.c
index 88fa845e9f4a..577b1d963fdd 100644
--- a/drivers/gpu/drm/i915/selftests/i915_syncmap.c
+++ b/drivers/gpu/drm/i915/selftests/i915_syncmap.c
@@ -24,6 +24,7 @@
 
 #include "../i915_selftest.h"
 #include "i915_random.h"
+#include <linux/sprintf.h>
 
 static char *
 __sync_print(struct i915_syncmap *p,
diff --git a/drivers/gpu/drm/i915/selftests/igt_spinner.c b/drivers/gpu/drm/i915/selftests/igt_spinner.c
index 8c3e1f20e5a1..30b49bd69bbc 100644
--- a/drivers/gpu/drm/i915/selftests/igt_spinner.c
+++ b/drivers/gpu/drm/i915/selftests/igt_spinner.c
@@ -5,6 +5,7 @@
  */
 #include "gt/intel_gpu_commands.h"
 #include "gt/intel_gt.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "gem/i915_gem_internal.h"
 #include "gem/selftests/igt_gem_utils.h"
diff --git a/drivers/gpu/drm/i915/soc/intel_gmch.c b/drivers/gpu/drm/i915/soc/intel_gmch.c
index 40874ebfb64c..3625dc4f2260 100644
--- a/drivers/gpu/drm/i915/soc/intel_gmch.c
+++ b/drivers/gpu/drm/i915/soc/intel_gmch.c
@@ -6,6 +6,7 @@
 #include <linux/pci.h>
 #include <linux/pnp.h>
 #include <linux/vgaarb.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_managed.h>
 #include <drm/i915_drm.h>
diff --git a/drivers/gpu/drm/imagination/pvr_context.c b/drivers/gpu/drm/imagination/pvr_context.c
index eded5e955cc0..408dadc49629 100644
--- a/drivers/gpu/drm/imagination/pvr_context.c
+++ b/drivers/gpu/drm/imagination/pvr_context.c
@@ -14,6 +14,7 @@
 #include "pvr_stream.h"
 #include "pvr_stream_defs.h"
 #include "pvr_vm.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_auth.h>
 #include <drm/drm_managed.h>
diff --git a/drivers/gpu/drm/imagination/pvr_device.c b/drivers/gpu/drm/imagination/pvr_device.c
index 1704c0268589..8ecd258133ef 100644
--- a/drivers/gpu/drm/imagination/pvr_device.c
+++ b/drivers/gpu/drm/imagination/pvr_device.c
@@ -3,6 +3,7 @@
 
 #include "pvr_device.h"
 #include "pvr_device_info.h"
+#include <linux/sprintf.h>
 
 #include "pvr_fw.h"
 #include "pvr_params.h"
diff --git a/drivers/gpu/drm/imagination/pvr_drv.c b/drivers/gpu/drm/imagination/pvr_drv.c
index 5c3b2d58d766..f707d3118bf7 100644
--- a/drivers/gpu/drm/imagination/pvr_drv.c
+++ b/drivers/gpu/drm/imagination/pvr_drv.c
@@ -15,6 +15,7 @@
 #include "pvr_rogue_fwif_client.h"
 #include "pvr_rogue_fwif_shared.h"
 #include "pvr_vm.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <uapi/drm/pvr_drm.h>
 
diff --git a/drivers/gpu/drm/imagination/pvr_fw_trace.c b/drivers/gpu/drm/imagination/pvr_fw_trace.c
index 31199e45b72e..12f5b96a6ef8 100644
--- a/drivers/gpu/drm/imagination/pvr_fw_trace.c
+++ b/drivers/gpu/drm/imagination/pvr_fw_trace.c
@@ -6,6 +6,7 @@
 #include "pvr_rogue_fwif.h"
 #include "pvr_rogue_fwif_sf.h"
 #include "pvr_fw_trace.h"
+#include <linux/sprintf.h>
 
 #include <drm/drm_drv.h>
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/imagination/pvr_job.c b/drivers/gpu/drm/imagination/pvr_job.c
index 78c2f3c6dce0..9a0a8f5e83b5 100644
--- a/drivers/gpu/drm/imagination/pvr_job.c
+++ b/drivers/gpu/drm/imagination/pvr_job.c
@@ -14,6 +14,7 @@
 #include "pvr_stream.h"
 #include "pvr_stream_defs.h"
 #include "pvr_sync.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_exec.h>
 #include <drm/drm_gem.h>
diff --git a/drivers/gpu/drm/imagination/pvr_queue.c b/drivers/gpu/drm/imagination/pvr_queue.c
index 5ed9c98fb599..5b7fa18d6795 100644
--- a/drivers/gpu/drm/imagination/pvr_queue.c
+++ b/drivers/gpu/drm/imagination/pvr_queue.c
@@ -3,6 +3,7 @@
 
 #include <drm/drm_managed.h>
 #include <drm/gpu_scheduler.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "pvr_cccb.h"
 #include "pvr_context.h"
diff --git a/drivers/gpu/drm/imx/dcss/dcss-crtc.c b/drivers/gpu/drm/imx/dcss/dcss-crtc.c
index 31267c00782f..c5415a1ce092 100644
--- a/drivers/gpu/drm/imx/dcss/dcss-crtc.c
+++ b/drivers/gpu/drm/imx/dcss/dcss-crtc.c
@@ -6,6 +6,7 @@
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_vblank.h>
+#include <linux/completion.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 
diff --git a/drivers/gpu/drm/imx/dcss/dcss-dev.c b/drivers/gpu/drm/imx/dcss/dcss-dev.c
index 597e9b7bd4bf..67e06aa185a7 100644
--- a/drivers/gpu/drm/imx/dcss/dcss-dev.c
+++ b/drivers/gpu/drm/imx/dcss/dcss-dev.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/of.h>
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
diff --git a/drivers/gpu/drm/imx/ipuv3/imx-ldb.c b/drivers/gpu/drm/imx/ipuv3/imx-ldb.c
index 71d70194fcbd..8a93f17af3bc 100644
--- a/drivers/gpu/drm/imx/ipuv3/imx-ldb.c
+++ b/drivers/gpu/drm/imx/ipuv3/imx-ldb.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 
 #include <video/of_display_timing.h>
diff --git a/drivers/gpu/drm/imx/ipuv3/parallel-display.c b/drivers/gpu/drm/imx/ipuv3/parallel-display.c
index 70349739dd89..85edb8436a48 100644
--- a/drivers/gpu/drm/imx/ipuv3/parallel-display.c
+++ b/drivers/gpu/drm/imx/ipuv3/parallel-display.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/slab.h>
 #include <linux/videodev2.h>
 
 #include <video/of_display_timing.h>
diff --git a/drivers/gpu/drm/lima/lima_drv.c b/drivers/gpu/drm/lima/lima_drv.c
index 10fd9154cc46..8c517123cd7c 100644
--- a/drivers/gpu/drm/lima/lima_drv.c
+++ b/drivers/gpu/drm/lima/lima_drv.c
@@ -11,6 +11,7 @@
 #include <drm/drm_drv.h>
 #include <drm/drm_prime.h>
 #include <drm/lima_drm.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include "lima_device.h"
 #include "lima_drv.h"
diff --git a/drivers/gpu/drm/loongson/lsdc_i2c.c b/drivers/gpu/drm/loongson/lsdc_i2c.c
index ce90c25536d2..e767ffc24d8a 100644
--- a/drivers/gpu/drm/loongson/lsdc_i2c.c
+++ b/drivers/gpu/drm/loongson/lsdc_i2c.c
@@ -4,6 +4,7 @@
  */
 
 #include <drm/drm_managed.h>
+#include <linux/sprintf.h>
 
 #include "lsdc_drv.h"
 #include "lsdc_output.h"
diff --git a/drivers/gpu/drm/mediatek/mtk_padding.c b/drivers/gpu/drm/mediatek/mtk_padding.c
index 0d6451c149b6..31c09d6d7b11 100644
--- a/drivers/gpu/drm/mediatek/mtk_padding.c
+++ b/drivers/gpu/drm/mediatek/mtk_padding.c
@@ -6,6 +6,7 @@
 #include <linux/clk.h>
 #include <linux/component.h>
 #include <linux/module.h>
+#include <linux/mod_devicetable.h> // for struct of_device_id
 #include <linux/of_device.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/gpu/drm/mgag200/mgag200_i2c.c b/drivers/gpu/drm/mgag200/mgag200_i2c.c
index 423eb302be7e..f6b37c868e55 100644
--- a/drivers/gpu/drm/mgag200/mgag200_i2c.c
+++ b/drivers/gpu/drm/mgag200/mgag200_i2c.c
@@ -30,6 +30,7 @@
 #include <linux/i2c-algo-bit.h>
 #include <linux/i2c.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "mgag200_drv.h"
 
diff --git a/drivers/gpu/drm/msm/adreno/a2xx_gpu.c b/drivers/gpu/drm/msm/adreno/a2xx_gpu.c
index 0d8133f3174b..162731df7095 100644
--- a/drivers/gpu/drm/msm/adreno/a2xx_gpu.c
+++ b/drivers/gpu/drm/msm/adreno/a2xx_gpu.c
@@ -4,6 +4,7 @@
 #include "a2xx_gpu.h"
 #include "msm_gem.h"
 #include "msm_mmu.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 extern bool hang_debug;
 
diff --git a/drivers/gpu/drm/msm/adreno/a3xx_gpu.c b/drivers/gpu/drm/msm/adreno/a3xx_gpu.c
index c86b377f6f0d..817d31c086f2 100644
--- a/drivers/gpu/drm/msm/adreno/a3xx_gpu.c
+++ b/drivers/gpu/drm/msm/adreno/a3xx_gpu.c
@@ -7,6 +7,7 @@
  */
 
 #include "a3xx_gpu.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define A3XX_INT0_MASK \
 	(A3XX_INT0_RBBM_AHB_ERROR |        \
diff --git a/drivers/gpu/drm/msm/adreno/a4xx_gpu.c b/drivers/gpu/drm/msm/adreno/a4xx_gpu.c
index 8b4cdf95f445..544a4fc5521d 100644
--- a/drivers/gpu/drm/msm/adreno/a4xx_gpu.c
+++ b/drivers/gpu/drm/msm/adreno/a4xx_gpu.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2014 The Linux Foundation. All rights reserved.
  */
 #include "a4xx_gpu.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define A4XX_INT0_MASK \
 	(A4XX_INT0_RBBM_AHB_ERROR |        \
diff --git a/drivers/gpu/drm/msm/adreno/a5xx_gpu.c b/drivers/gpu/drm/msm/adreno/a5xx_gpu.c
index c003f970189b..deb74870b4dc 100644
--- a/drivers/gpu/drm/msm/adreno/a5xx_gpu.c
+++ b/drivers/gpu/drm/msm/adreno/a5xx_gpu.c
@@ -3,6 +3,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/cpumask.h>
 #include <linux/firmware/qcom/qcom_scm.h>
diff --git a/drivers/gpu/drm/msm/adreno/a5xx_power.c b/drivers/gpu/drm/msm/adreno/a5xx_power.c
index 7705f8010484..0e851649ea6e 100644
--- a/drivers/gpu/drm/msm/adreno/a5xx_power.c
+++ b/drivers/gpu/drm/msm/adreno/a5xx_power.c
@@ -4,6 +4,7 @@
 
 #include <linux/pm_opp.h>
 #include "a5xx_gpu.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * The GPMU data block is a block of shared registers that can be used to
diff --git a/drivers/gpu/drm/msm/adreno/a6xx_gmu.c b/drivers/gpu/drm/msm/adreno/a6xx_gmu.c
index 8c4900444b2c..51b761440cb4 100644
--- a/drivers/gpu/drm/msm/adreno/a6xx_gmu.c
+++ b/drivers/gpu/drm/msm/adreno/a6xx_gmu.c
@@ -3,6 +3,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/interconnect.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
diff --git a/drivers/gpu/drm/msm/adreno/a6xx_gpu.c b/drivers/gpu/drm/msm/adreno/a6xx_gpu.c
index c9c55e2ea584..4ddf5a18a45b 100644
--- a/drivers/gpu/drm/msm/adreno/a6xx_gpu.c
+++ b/drivers/gpu/drm/msm/adreno/a6xx_gpu.c
@@ -7,6 +7,8 @@
 #include "msm_gpu_trace.h"
 #include "a6xx_gpu.h"
 #include "a6xx_gmu.xml.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/bitfield.h>
 #include <linux/devfreq.h>
diff --git a/drivers/gpu/drm/msm/adreno/adreno_device.c b/drivers/gpu/drm/msm/adreno/adreno_device.c
index 2ce7d7b1690d..1c20863bc555 100644
--- a/drivers/gpu/drm/msm/adreno/adreno_device.c
+++ b/drivers/gpu/drm/msm/adreno/adreno_device.c
@@ -7,6 +7,7 @@
  */
 
 #include "adreno_gpu.h"
+#include <linux/sprintf.h>
 
 bool hang_debug = false;
 MODULE_PARM_DESC(hang_debug, "Dump registers when hang is detected (can be slow!)");
diff --git a/drivers/gpu/drm/msm/adreno/adreno_gpu.c b/drivers/gpu/drm/msm/adreno/adreno_gpu.c
index 074fb498706f..9c99ab343291 100644
--- a/drivers/gpu/drm/msm/adreno/adreno_gpu.c
+++ b/drivers/gpu/drm/msm/adreno/adreno_gpu.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/soc/qcom/mdt_loader.h>
 #include <linux/nvmem-consumer.h>
+#include <linux/sprintf.h>
 #include <soc/qcom/ocmem.h>
 #include "adreno_gpu.h"
 #include "a6xx_gpu.h"
diff --git a/drivers/gpu/drm/msm/disp/dpu1/dpu_core_perf.c b/drivers/gpu/drm/msm/disp/dpu1/dpu_core_perf.c
index ef871239adb2..4a210108809b 100644
--- a/drivers/gpu/drm/msm/disp/dpu1/dpu_core_perf.c
+++ b/drivers/gpu/drm/msm/disp/dpu1/dpu_core_perf.c
@@ -6,11 +6,13 @@
 
 #include <linux/debugfs.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/pm_opp.h>
 #include <linux/sort.h>
 #include <linux/clk.h>
 #include <linux/bitmap.h>
+#include <linux/sprintf.h>
 
 #include "dpu_kms.h"
 #include "dpu_trace.h"
diff --git a/drivers/gpu/drm/msm/disp/dpu1/dpu_crtc.c b/drivers/gpu/drm/msm/disp/dpu1/dpu_crtc.c
index 88c2e51ab166..0a58f1e26fb4 100644
--- a/drivers/gpu/drm/msm/disp/dpu1/dpu_crtc.c
+++ b/drivers/gpu/drm/msm/disp/dpu1/dpu_crtc.c
@@ -11,6 +11,8 @@
 #include <linux/debugfs.h>
 #include <linux/ktime.h>
 #include <linux/bits.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_blend.h>
diff --git a/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_sspp.c b/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_sspp.c
index 0bf8a83e8df3..648312411e77 100644
--- a/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_sspp.c
+++ b/drivers/gpu/drm/msm/disp/dpu1/dpu_hw_sspp.c
@@ -7,6 +7,7 @@
 #include "dpu_hw_lm.h"
 #include "dpu_hw_sspp.h"
 #include "dpu_kms.h"
+#include <linux/sprintf.h>
 
 #include "msm_mdss.h"
 
diff --git a/drivers/gpu/drm/msm/disp/dpu1/dpu_kms.c b/drivers/gpu/drm/msm/disp/dpu1/dpu_kms.c
index 48728be27e15..f788b841765c 100644
--- a/drivers/gpu/drm/msm/disp/dpu1/dpu_kms.c
+++ b/drivers/gpu/drm/msm/disp/dpu1/dpu_kms.c
@@ -11,8 +11,10 @@
 
 #include <linux/debugfs.h>
 #include <linux/dma-buf.h>
+#include <linux/kstrtox.h>
 #include <linux/of_irq.h>
 #include <linux/pm_opp.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_crtc.h>
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/msm/disp/dpu1/dpu_vbif.c b/drivers/gpu/drm/msm/disp/dpu1/dpu_vbif.c
index 47c02b98eac3..c3fe095ccf72 100644
--- a/drivers/gpu/drm/msm/disp/dpu1/dpu_vbif.c
+++ b/drivers/gpu/drm/msm/disp/dpu1/dpu_vbif.c
@@ -6,6 +6,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "dpu_vbif.h"
 #include "dpu_hw_vbif.h"
diff --git a/drivers/gpu/drm/msm/disp/mdp4/mdp4_crtc.c b/drivers/gpu/drm/msm/disp/mdp4/mdp4_crtc.c
index 75f93e346282..43cae5ef682e 100644
--- a/drivers/gpu/drm/msm/disp/mdp4/mdp4_crtc.c
+++ b/drivers/gpu/drm/msm/disp/mdp4/mdp4_crtc.c
@@ -10,6 +10,7 @@
 #include <drm/drm_mode.h>
 #include <drm/drm_probe_helper.h>
 #include <drm/drm_vblank.h>
+#include <linux/sprintf.h>
 
 #include "mdp4_kms.h"
 #include "msm_gem.h"
diff --git a/drivers/gpu/drm/msm/disp/mdp5/mdp5_crtc.c b/drivers/gpu/drm/msm/disp/mdp5/mdp5_crtc.c
index 4a3db2ea1689..db1b039ed6b1 100644
--- a/drivers/gpu/drm/msm/disp/mdp5/mdp5_crtc.c
+++ b/drivers/gpu/drm/msm/disp/mdp5/mdp5_crtc.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/sort.h>
+#include <linux/completion.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_blend.h>
diff --git a/drivers/gpu/drm/msm/disp/msm_disp_snapshot_util.c b/drivers/gpu/drm/msm/disp/msm_disp_snapshot_util.c
index add72bbc28b1..373fd1498cde 100644
--- a/drivers/gpu/drm/msm/disp/msm_disp_snapshot_util.c
+++ b/drivers/gpu/drm/msm/disp/msm_disp_snapshot_util.c
@@ -6,6 +6,7 @@
 #define pr_fmt(fmt)	"[drm:%s:%d] " fmt, __func__, __LINE__
 
 #include <generated/utsrelease.h>
+#include <linux/sprintf.h>
 
 #include "msm_disp_snapshot.h"
 
diff --git a/drivers/gpu/drm/msm/dp/dp_aux.c b/drivers/gpu/drm/msm/dp/dp_aux.c
index adbd5a367395..198a8698b4bb 100644
--- a/drivers/gpu/drm/msm/dp/dp_aux.c
+++ b/drivers/gpu/drm/msm/dp/dp_aux.c
@@ -6,6 +6,7 @@
 #include <linux/delay.h>
 #include <linux/phy/phy.h>
 #include <drm/drm_print.h>
+#include <linux/completion.h>
 
 #include "dp_reg.h"
 #include "dp_aux.h"
diff --git a/drivers/gpu/drm/msm/dp/dp_debug.c b/drivers/gpu/drm/msm/dp/dp_debug.c
index eca5a02f9003..699c052bd0ad 100644
--- a/drivers/gpu/drm/msm/dp/dp_debug.c
+++ b/drivers/gpu/drm/msm/dp/dp_debug.c
@@ -8,6 +8,7 @@
 #include <linux/debugfs.h>
 #include <drm/drm_connector.h>
 #include <drm/drm_file.h>
+#include <linux/kstrtox.h>
 
 #include "dp_catalog.h"
 #include "dp_aux.h"
diff --git a/drivers/gpu/drm/msm/dp/dp_display.c b/drivers/gpu/drm/msm/dp/dp_display.c
index e4433891becb..a6aae3016ce5 100644
--- a/drivers/gpu/drm/msm/dp/dp_display.c
+++ b/drivers/gpu/drm/msm/dp/dp_display.c
@@ -7,6 +7,7 @@
 #include <linux/slab.h>
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
+#include <linux/completion.h>
 #include <linux/component.h>
 #include <linux/of_irq.h>
 #include <linux/phy/phy.h>
diff --git a/drivers/gpu/drm/msm/dsi/dsi_host.c b/drivers/gpu/drm/msm/dsi/dsi_host.c
index 9d86a6aca6f2..61732f7f05d0 100644
--- a/drivers/gpu/drm/msm/dsi/dsi_host.c
+++ b/drivers/gpu/drm/msm/dsi/dsi_host.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
diff --git a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_10nm.c b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_10nm.c
index 27b592c776a3..594b44f1d749 100644
--- a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_10nm.c
+++ b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_10nm.c
@@ -6,6 +6,7 @@
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #include "dsi_phy.h"
 #include "dsi.xml.h"
diff --git a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_14nm.c b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_14nm.c
index 31deda1c664a..9a64344e6117 100644
--- a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_14nm.c
+++ b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_14nm.c
@@ -6,6 +6,7 @@
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "dsi_phy.h"
 #include "dsi.xml.h"
diff --git a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm.c b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm.c
index ceec7bb87bf1..90f9759ed771 100644
--- a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm.c
+++ b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm.c
@@ -5,6 +5,7 @@
 
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
+#include <linux/sprintf.h>
 
 #include "dsi_phy.h"
 #include "dsi.xml.h"
diff --git a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm_8960.c b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm_8960.c
index 26c08047e20c..be120ad28e40 100644
--- a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm_8960.c
+++ b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm_8960.c
@@ -5,6 +5,7 @@
 
 #include <linux/clk-provider.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "dsi_phy.h"
 #include "dsi.xml.h"
diff --git a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_7nm.c b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_7nm.c
index 82d015aa2d63..70bdac8077a9 100644
--- a/drivers/gpu/drm/msm/dsi/phy/dsi_phy_7nm.c
+++ b/drivers/gpu/drm/msm/dsi/phy/dsi_phy_7nm.c
@@ -6,6 +6,7 @@
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #include "dsi_phy.h"
 #include "dsi.xml.h"
diff --git a/drivers/gpu/drm/msm/hdmi/hdmi_i2c.c b/drivers/gpu/drm/msm/hdmi/hdmi_i2c.c
index 7aa500d24240..0a3ed9b48b19 100644
--- a/drivers/gpu/drm/msm/hdmi/hdmi_i2c.c
+++ b/drivers/gpu/drm/msm/hdmi/hdmi_i2c.c
@@ -5,6 +5,7 @@
  */
 
 #include "hdmi.h"
+#include <linux/sprintf.h>
 
 struct hdmi_i2c_adapter {
 	struct i2c_adapter base;
diff --git a/drivers/gpu/drm/msm/hdmi/hdmi_phy_8996.c b/drivers/gpu/drm/msm/hdmi/hdmi_phy_8996.c
index 4dd055416620..89454883d14a 100644
--- a/drivers/gpu/drm/msm/hdmi/hdmi_phy_8996.c
+++ b/drivers/gpu/drm/msm/hdmi/hdmi_phy_8996.c
@@ -5,6 +5,7 @@
 
 #include <linux/clk-provider.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "hdmi.h"
 
diff --git a/drivers/gpu/drm/msm/msm_drv.c b/drivers/gpu/drm/msm/msm_drv.c
index 50b65ffc24b1..b820adc629e7 100644
--- a/drivers/gpu/drm/msm/msm_drv.c
+++ b/drivers/gpu/drm/msm/msm_drv.c
@@ -7,6 +7,7 @@
 
 #include <linux/dma-mapping.h>
 #include <linux/fault-inject.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/of_address.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/gpu/drm/msm/msm_drv.h b/drivers/gpu/drm/msm/msm_drv.h
index 16a7cbc0b7dd..e7a2d2c3145a 100644
--- a/drivers/gpu/drm/msm/msm_drv.h
+++ b/drivers/gpu/drm/msm/msm_drv.h
@@ -25,6 +25,7 @@
 #include <linux/of_device.h>
 #include <linux/sizes.h>
 #include <linux/kthread.h>
+#include <linux/hrtimer.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/msm/msm_gem.c b/drivers/gpu/drm/msm/msm_gem.c
index 175ee4ab8a6f..0ec630d3e68a 100644
--- a/drivers/gpu/drm/msm/msm_gem.c
+++ b/drivers/gpu/drm/msm/msm_gem.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/dma-map-ops.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/spinlock.h>
 #include <linux/shmem_fs.h>
diff --git a/drivers/gpu/drm/msm/msm_gem_shrinker.c b/drivers/gpu/drm/msm/msm_gem_shrinker.c
index 07ca4ddfe4e3..7c2672c25b19 100644
--- a/drivers/gpu/drm/msm/msm_gem_shrinker.c
+++ b/drivers/gpu/drm/msm/msm_gem_shrinker.c
@@ -6,6 +6,7 @@
 
 #include <linux/vmalloc.h>
 #include <linux/sched/mm.h>
+#include <linux/shrinker.h>
 
 #include "msm_drv.h"
 #include "msm_gem.h"
diff --git a/drivers/gpu/drm/msm/msm_gem_submit.c b/drivers/gpu/drm/msm/msm_gem_submit.c
index fba78193127d..0f09687778d8 100644
--- a/drivers/gpu/drm/msm/msm_gem_submit.c
+++ b/drivers/gpu/drm/msm/msm_gem_submit.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sync_file.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/gpu/drm/msm/msm_gpu.h b/drivers/gpu/drm/msm/msm_gpu.h
index 2bfcb222e353..9fe578f00456 100644
--- a/drivers/gpu/drm/msm/msm_gpu.h
+++ b/drivers/gpu/drm/msm/msm_gpu.h
@@ -11,6 +11,7 @@
 #include <linux/clk.h>
 #include <linux/devfreq.h>
 #include <linux/interconnect.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pm_opp.h>
 #include <linux/regulator/consumer.h>
 
diff --git a/drivers/gpu/drm/msm/msm_io_utils.c b/drivers/gpu/drm/msm/msm_io_utils.c
index 59d2788c4510..061ee1ee8357 100644
--- a/drivers/gpu/drm/msm/msm_io_utils.c
+++ b/drivers/gpu/drm/msm/msm_io_utils.c
@@ -7,6 +7,7 @@
 
 #include <linux/interconnect.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include "msm_drv.h"
 
diff --git a/drivers/gpu/drm/msm/msm_perf.c b/drivers/gpu/drm/msm/msm_perf.c
index 3d3da79fec2a..1a543f09e99f 100644
--- a/drivers/gpu/drm/msm/msm_perf.c
+++ b/drivers/gpu/drm/msm/msm_perf.c
@@ -15,6 +15,7 @@
 #ifdef CONFIG_DEBUG_FS
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/msm/msm_rd.c b/drivers/gpu/drm/msm/msm_rd.c
index ca44fd291c5b..72a34e0cf462 100644
--- a/drivers/gpu/drm/msm/msm_rd.c
+++ b/drivers/gpu/drm/msm/msm_rd.c
@@ -32,6 +32,7 @@
 #include <linux/circ_buf.h>
 #include <linux/debugfs.h>
 #include <linux/kfifo.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/wait.h>
 
diff --git a/drivers/gpu/drm/msm/msm_ringbuffer.c b/drivers/gpu/drm/msm/msm_ringbuffer.c
index 9d6655f96f0c..2f20f94a44d4 100644
--- a/drivers/gpu/drm/msm/msm_ringbuffer.c
+++ b/drivers/gpu/drm/msm/msm_ringbuffer.c
@@ -6,6 +6,7 @@
 
 #include "msm_ringbuffer.h"
 #include "msm_gpu.h"
+#include <linux/sprintf.h>
 
 static uint num_hw_submissions = 8;
 MODULE_PARM_DESC(num_hw_submissions, "The max # of jobs to write into ringbuffer (default 8)");
diff --git a/drivers/gpu/drm/msm/msm_submitqueue.c b/drivers/gpu/drm/msm/msm_submitqueue.c
index 0e803125a325..1d61774281e7 100644
--- a/drivers/gpu/drm/msm/msm_submitqueue.c
+++ b/drivers/gpu/drm/msm/msm_submitqueue.c
@@ -4,6 +4,7 @@
 
 #include <linux/kref.h>
 #include <linux/uaccess.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include "msm_gpu.h"
 
diff --git a/drivers/gpu/drm/mxsfb/lcdif_kms.c b/drivers/gpu/drm/mxsfb/lcdif_kms.c
index 2541d2de4e45..4dcc9473c9ad 100644
--- a/drivers/gpu/drm/mxsfb/lcdif_kms.c
+++ b/drivers/gpu/drm/mxsfb/lcdif_kms.c
@@ -9,6 +9,7 @@
 #include <linux/clk.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/media-bus-format.h>
 #include <linux/pm_runtime.h>
 #include <linux/spinlock.h>
diff --git a/drivers/gpu/drm/nouveau/dispnv50/crc.c b/drivers/gpu/drm/nouveau/dispnv50/crc.c
index 9c942fbd836d..e74c92720991 100644
--- a/drivers/gpu/drm/nouveau/dispnv50/crc.c
+++ b/drivers/gpu/drm/nouveau/dispnv50/crc.c
@@ -4,6 +4,7 @@
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_vblank.h>
 #include <drm/drm_vblank_work.h>
+#include <linux/kstrtox.h>
 
 #include <nvif/class.h>
 #include <nvif/cl0002.h>
diff --git a/drivers/gpu/drm/nouveau/dispnv50/disp.c b/drivers/gpu/drm/nouveau/dispnv50/disp.c
index 8d37a694b772..0c3d88ad0b0e 100644
--- a/drivers/gpu/drm/nouveau/dispnv50/disp.c
+++ b/drivers/gpu/drm/nouveau/dispnv50/disp.c
@@ -28,6 +28,7 @@
 #include "wndw.h"
 #include "handles.h"
 
+#include <linux/backlight.h>
 #include <linux/dma-mapping.h>
 #include <linux/hdmi.h>
 #include <linux/component.h>
diff --git a/drivers/gpu/drm/nouveau/include/nvkm/core/firmware.h b/drivers/gpu/drm/nouveau/include/nvkm/core/firmware.h
index 20839be72644..23256f656713 100644
--- a/drivers/gpu/drm/nouveau/include/nvkm/core/firmware.h
+++ b/drivers/gpu/drm/nouveau/include/nvkm/core/firmware.h
@@ -4,6 +4,7 @@
 #include <core/memory.h>
 #include <core/option.h>
 #include <core/subdev.h>
+#include <linux/sprintf.h>
 
 struct nvkm_firmware {
 	const struct nvkm_firmware_func {
diff --git a/drivers/gpu/drm/nouveau/include/nvkm/core/memory.h b/drivers/gpu/drm/nouveau/include/nvkm/core/memory.h
index fc0f38981391..9e35abfb9b11 100644
--- a/drivers/gpu/drm/nouveau/include/nvkm/core/memory.h
+++ b/drivers/gpu/drm/nouveau/include/nvkm/core/memory.h
@@ -2,6 +2,7 @@
 #ifndef __NVKM_MEMORY_H__
 #define __NVKM_MEMORY_H__
 #include <core/os.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 struct nvkm_device;
 struct nvkm_vma;
 struct nvkm_vmm;
diff --git a/drivers/gpu/drm/nouveau/include/nvkm/core/os.h b/drivers/gpu/drm/nouveau/include/nvkm/core/os.h
index 3fd5c007a663..cfbc766abed9 100644
--- a/drivers/gpu/drm/nouveau/include/nvkm/core/os.h
+++ b/drivers/gpu/drm/nouveau/include/nvkm/core/os.h
@@ -2,6 +2,7 @@
 #ifndef __NVKM_OS_H__
 #define __NVKM_OS_H__
 #include <nvif/os.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #ifdef __BIG_ENDIAN
 #define ioread16_native ioread16be
diff --git a/drivers/gpu/drm/nouveau/nouveau_backlight.c b/drivers/gpu/drm/nouveau/nouveau_backlight.c
index d47442125fa1..92c80a483910 100644
--- a/drivers/gpu/drm/nouveau/nouveau_backlight.c
+++ b/drivers/gpu/drm/nouveau/nouveau_backlight.c
@@ -34,6 +34,7 @@
 #include <linux/backlight.h>
 #include <linux/idr.h>
 #include <drm/drm_probe_helper.h>
+#include <linux/sprintf.h>
 
 #include "nouveau_drv.h"
 #include "nouveau_reg.h"
diff --git a/drivers/gpu/drm/nouveau/nouveau_bo5039.c b/drivers/gpu/drm/nouveau/nouveau_bo5039.c
index c6cf3629a9f9..c2f24eca7fad 100644
--- a/drivers/gpu/drm/nouveau/nouveau_bo5039.c
+++ b/drivers/gpu/drm/nouveau/nouveau_bo5039.c
@@ -30,6 +30,7 @@
 #include "nouveau_dma.h"
 #include "nouveau_drv.h"
 #include "nouveau_mem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/push206e.h>
 
diff --git a/drivers/gpu/drm/nouveau/nouveau_bo74c1.c b/drivers/gpu/drm/nouveau/nouveau_bo74c1.c
index 9b7ba31fae13..de2b8f627cc1 100644
--- a/drivers/gpu/drm/nouveau/nouveau_bo74c1.c
+++ b/drivers/gpu/drm/nouveau/nouveau_bo74c1.c
@@ -29,6 +29,7 @@
 #include "nouveau_bo.h"
 #include "nouveau_dma.h"
 #include "nouveau_mem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/push206e.h>
 
diff --git a/drivers/gpu/drm/nouveau/nouveau_bo85b5.c b/drivers/gpu/drm/nouveau/nouveau_bo85b5.c
index a15a38a87a95..f995bb8744cf 100644
--- a/drivers/gpu/drm/nouveau/nouveau_bo85b5.c
+++ b/drivers/gpu/drm/nouveau/nouveau_bo85b5.c
@@ -29,6 +29,7 @@
 #include "nouveau_bo.h"
 #include "nouveau_dma.h"
 #include "nouveau_mem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/push206e.h>
 
diff --git a/drivers/gpu/drm/nouveau/nouveau_bo9039.c b/drivers/gpu/drm/nouveau/nouveau_bo9039.c
index d2bb2687d401..69b3a7fe83a0 100644
--- a/drivers/gpu/drm/nouveau/nouveau_bo9039.c
+++ b/drivers/gpu/drm/nouveau/nouveau_bo9039.c
@@ -29,6 +29,7 @@
 #include "nouveau_bo.h"
 #include "nouveau_dma.h"
 #include "nouveau_mem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/push906f.h>
 
diff --git a/drivers/gpu/drm/nouveau/nouveau_bo90b5.c b/drivers/gpu/drm/nouveau/nouveau_bo90b5.c
index 4618f4f5ab56..c94a3ee84960 100644
--- a/drivers/gpu/drm/nouveau/nouveau_bo90b5.c
+++ b/drivers/gpu/drm/nouveau/nouveau_bo90b5.c
@@ -22,6 +22,7 @@
 #include "nouveau_bo.h"
 #include "nouveau_dma.h"
 #include "nouveau_mem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/push906f.h>
 
diff --git a/drivers/gpu/drm/nouveau/nouveau_boa0b5.c b/drivers/gpu/drm/nouveau/nouveau_boa0b5.c
index 07a5c6302c98..72ff14e77393 100644
--- a/drivers/gpu/drm/nouveau/nouveau_boa0b5.c
+++ b/drivers/gpu/drm/nouveau/nouveau_boa0b5.c
@@ -29,6 +29,7 @@
 #include "nouveau_bo.h"
 #include "nouveau_dma.h"
 #include "nouveau_mem.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/push906f.h>
 
diff --git a/drivers/gpu/drm/nouveau/nouveau_chan.c b/drivers/gpu/drm/nouveau/nouveau_chan.c
index 7c97b2886807..140151f2e79f 100644
--- a/drivers/gpu/drm/nouveau/nouveau_chan.c
+++ b/drivers/gpu/drm/nouveau/nouveau_chan.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs
  */
 #include <nvif/push006c.h>
+#include <linux/sprintf.h>
 
 #include <nvif/class.h>
 #include <nvif/cl0002.h>
diff --git a/drivers/gpu/drm/nouveau/nouveau_debugfs.c b/drivers/gpu/drm/nouveau/nouveau_debugfs.c
index e83db051e851..2d81b5643038 100644
--- a/drivers/gpu/drm/nouveau/nouveau_debugfs.c
+++ b/drivers/gpu/drm/nouveau/nouveau_debugfs.c
@@ -29,6 +29,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <nvif/class.h>
 #include <nvif/if0001.h>
 #include "nouveau_debugfs.h"
diff --git a/drivers/gpu/drm/nouveau/nouveau_dma.c b/drivers/gpu/drm/nouveau/nouveau_dma.c
index b01c029f3a90..6d9cefe8b5c0 100644
--- a/drivers/gpu/drm/nouveau/nouveau_dma.c
+++ b/drivers/gpu/drm/nouveau/nouveau_dma.c
@@ -27,6 +27,7 @@
 #include "nouveau_drv.h"
 #include "nouveau_dma.h"
 #include "nouveau_vmm.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/user.h>
 
diff --git a/drivers/gpu/drm/nouveau/nouveau_dmem.c b/drivers/gpu/drm/nouveau/nouveau_dmem.c
index 12feecf71e75..ad6edc70dc7a 100644
--- a/drivers/gpu/drm/nouveau/nouveau_dmem.c
+++ b/drivers/gpu/drm/nouveau/nouveau_dmem.c
@@ -26,6 +26,7 @@
 #include "nouveau_mem.h"
 #include "nouveau_bo.h"
 #include "nouveau_svm.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/class.h>
 #include <nvif/object.h>
diff --git a/drivers/gpu/drm/nouveau/nouveau_drm.c b/drivers/gpu/drm/nouveau/nouveau_drm.c
index 6f6c31a9937b..5fa0e76319c6 100644
--- a/drivers/gpu/drm/nouveau/nouveau_drm.c
+++ b/drivers/gpu/drm/nouveau/nouveau_drm.c
@@ -26,6 +26,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/vga_switcheroo.h>
 #include <linux/mmu_notifier.h>
 #include <linux/dynamic_debug.h>
diff --git a/drivers/gpu/drm/nouveau/nouveau_drv.h b/drivers/gpu/drm/nouveau/nouveau_drv.h
index 8a6d94c8b163..0c9805f9a9ce 100644
--- a/drivers/gpu/drm/nouveau/nouveau_drv.h
+++ b/drivers/gpu/drm/nouveau/nouveau_drv.h
@@ -38,6 +38,7 @@
  *      - implemented limited ABI16/NVIF interop
  */
 
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/notifier.h>
 
 #include <nvif/client.h>
diff --git a/drivers/gpu/drm/nouveau/nouveau_gem.c b/drivers/gpu/drm/nouveau/nouveau_gem.c
index 49c2bcbef129..f93a410c7e30 100644
--- a/drivers/gpu/drm/nouveau/nouveau_gem.c
+++ b/drivers/gpu/drm/nouveau/nouveau_gem.c
@@ -25,6 +25,7 @@
  */
 
 #include <drm/drm_gem_ttm_helper.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include "nouveau_drv.h"
 #include "nouveau_dma.h"
diff --git a/drivers/gpu/drm/nouveau/nouveau_hwmon.c b/drivers/gpu/drm/nouveau/nouveau_hwmon.c
index db30a4c2cd4d..ae5b2eedb8cd 100644
--- a/drivers/gpu/drm/nouveau/nouveau_hwmon.c
+++ b/drivers/gpu/drm/nouveau/nouveau_hwmon.c
@@ -24,6 +24,8 @@
 
 #ifdef CONFIG_ACPI
 #include <linux/acpi.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #endif
 #include <linux/power_supply.h>
 #include <linux/hwmon.h>
diff --git a/drivers/gpu/drm/nouveau/nouveau_uvmm.c b/drivers/gpu/drm/nouveau/nouveau_uvmm.c
index 4f223c972c6a..0d60f6428d95 100644
--- a/drivers/gpu/drm/nouveau/nouveau_uvmm.c
+++ b/drivers/gpu/drm/nouveau/nouveau_uvmm.c
@@ -24,6 +24,7 @@
 #include "nouveau_gem.h"
 #include "nouveau_mem.h"
 #include "nouveau_uvmm.h"
+#include <linux/completion.h>
 
 #include <nvif/vmm.h>
 #include <nvif/mem.h>
diff --git a/drivers/gpu/drm/nouveau/nv84_fence.c b/drivers/gpu/drm/nouveau/nv84_fence.c
index 812b8c62eeba..a8f1648ffab5 100644
--- a/drivers/gpu/drm/nouveau/nv84_fence.c
+++ b/drivers/gpu/drm/nouveau/nv84_fence.c
@@ -25,6 +25,7 @@
 #include "nouveau_dma.h"
 #include "nouveau_fence.h"
 #include "nouveau_vmm.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nv50_display.h"
 
diff --git a/drivers/gpu/drm/nouveau/nvc0_fence.c b/drivers/gpu/drm/nouveau/nvc0_fence.c
index e1461c0b0779..7bf1bf345db3 100644
--- a/drivers/gpu/drm/nouveau/nvc0_fence.c
+++ b/drivers/gpu/drm/nouveau/nvc0_fence.c
@@ -24,6 +24,7 @@
 #include "nouveau_drv.h"
 #include "nouveau_dma.h"
 #include "nouveau_fence.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "nv50_display.h"
 
diff --git a/drivers/gpu/drm/nouveau/nvkm/core/client.c b/drivers/gpu/drm/nouveau/nvkm/core/client.c
index ebdeb8eb9e77..1b5f20298263 100644
--- a/drivers/gpu/drm/nouveau/nvkm/core/client.c
+++ b/drivers/gpu/drm/nouveau/nvkm/core/client.c
@@ -24,6 +24,7 @@
 #include <core/client.h>
 #include <core/device.h>
 #include <core/option.h>
+#include <linux/sprintf.h>
 
 #include <nvif/class.h>
 #include <nvif/event.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/core/enum.c b/drivers/gpu/drm/nouveau/nvkm/core/enum.c
index b9581feb24cc..8b53b05c553b 100644
--- a/drivers/gpu/drm/nouveau/nvkm/core/enum.c
+++ b/drivers/gpu/drm/nouveau/nvkm/core/enum.c
@@ -25,6 +25,7 @@
  *
  */
 #include <core/enum.h>
+#include <linux/sprintf.h>
 
 const struct nvkm_enum *
 nvkm_enum_find(const struct nvkm_enum *en, u32 value)
diff --git a/drivers/gpu/drm/nouveau/nvkm/core/firmware.c b/drivers/gpu/drm/nouveau/nvkm/core/firmware.c
index adc60b25f8e6..a90e891871d6 100644
--- a/drivers/gpu/drm/nouveau/nvkm/core/firmware.c
+++ b/drivers/gpu/drm/nouveau/nvkm/core/firmware.c
@@ -21,6 +21,7 @@
  */
 #include <core/device.h>
 #include <core/firmware.h>
+#include <linux/sprintf.h>
 
 #include <subdev/fb.h>
 #include <subdev/mmu.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/core/option.c b/drivers/gpu/drm/nouveau/nvkm/core/option.c
index 3e62cf8cde08..4bc14629a54f 100644
--- a/drivers/gpu/drm/nouveau/nvkm/core/option.c
+++ b/drivers/gpu/drm/nouveau/nvkm/core/option.c
@@ -23,6 +23,7 @@
  */
 #include <core/option.h>
 #include <core/debug.h>
+#include <linux/kstrtox.h>
 
 const char *
 nvkm_stropt(const char *optstr, const char *opt, int *arglen)
diff --git a/drivers/gpu/drm/nouveau/nvkm/core/subdev.c b/drivers/gpu/drm/nouveau/nvkm/core/subdev.c
index 6c20e827a069..86b99514d03b 100644
--- a/drivers/gpu/drm/nouveau/nvkm/core/subdev.c
+++ b/drivers/gpu/drm/nouveau/nvkm/core/subdev.c
@@ -24,6 +24,7 @@
 #include <core/subdev.h>
 #include <core/device.h>
 #include <core/option.h>
+#include <linux/sprintf.h>
 #include <subdev/mc.h>
 
 const char *
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/device/ctrl.c b/drivers/gpu/drm/nouveau/nvkm/engine/device/ctrl.c
index ce774579c89d..e95582ccdbaf 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/device/ctrl.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/device/ctrl.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs <bskeggs@redhat.com>
  */
 #include "ctrl.h"
+#include <linux/sprintf.h>
 
 #include <core/client.h>
 #include <subdev/clk.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/device/user.c b/drivers/gpu/drm/nouveau/nvkm/engine/device/user.c
index 7fd4800a876a..6b3e1da4a0f7 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/device/user.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/device/user.c
@@ -24,6 +24,7 @@
 #define nvkm_udevice(p) container_of((p), struct nvkm_udevice, object)
 #include "priv.h"
 #include "ctrl.h"
+#include <linux/sprintf.h>
 
 #include <core/client.h>
 #include <subdev/fb.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/disp/gv100.c b/drivers/gpu/drm/nouveau/nvkm/engine/disp/gv100.c
index cfa3698d3a2f..5f5243a29095 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/disp/gv100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/disp/gv100.c
@@ -25,6 +25,7 @@
 #include "head.h"
 #include "ior.h"
 #include "outp.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/client.h>
 #include <core/gpuobj.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/disp/ior.c b/drivers/gpu/drm/nouveau/nvkm/engine/disp/ior.c
index e420bf2e4330..954fa5f2bcbb 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/disp/ior.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/disp/ior.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs <bskeggs@redhat.com>
  */
 #include "ior.h"
+#include <linux/sprintf.h>
 
 static const char *
 nvkm_ior_name[] = {
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/disp/nv50.c b/drivers/gpu/drm/nouveau/nvkm/engine/disp/nv50.c
index 03a5f88a4b99..d080d600c687 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/disp/nv50.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/disp/nv50.c
@@ -28,6 +28,7 @@
 #include "dp.h"
 #include "ior.h"
 #include "outp.h"
+#include <linux/sprintf.h>
 
 #include <core/client.h>
 #include <core/ramht.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergf100.c b/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergf100.c
index ef7ac360101e..dea26421b755 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergf100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergf100.c
@@ -23,6 +23,7 @@
  */
 #define gf100_dmaobj(p) container_of((p), struct gf100_dmaobj, base)
 #include "user.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/client.h>
 #include <core/gpuobj.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergv100.c b/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergv100.c
index 39eba9fc82be..f3392073ba18 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergv100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/dma/usergv100.c
@@ -21,6 +21,7 @@
  */
 #define gv100_dmaobj(p) container_of((p), struct gv100_dmaobj, base)
 #include "user.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/client.h>
 #include <core/gpuobj.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/dma/usernv50.c b/drivers/gpu/drm/nouveau/nvkm/engine/dma/usernv50.c
index 6a85b5dea643..e539b460934d 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/dma/usernv50.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/dma/usernv50.c
@@ -23,6 +23,7 @@
  */
 #define nv50_dmaobj(p) container_of((p), struct nv50_dmaobj, base)
 #include "user.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/client.h>
 #include <core/gpuobj.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/falcon.c b/drivers/gpu/drm/nouveau/nvkm/engine/falcon.c
index fd5ee9f0af36..b3e2fa029562 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/falcon.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/falcon.c
@@ -20,6 +20,7 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include <engine/falcon.h>
+#include <linux/sprintf.h>
 
 #include <core/gpuobj.h>
 #include <subdev/mc.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/g84.c b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/g84.c
index 6b229a3fbd97..a1cf7e75ef25 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/g84.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/g84.c
@@ -25,6 +25,7 @@
 #include "cgrp.h"
 #include "chan.h"
 #include "runl.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/ramht.h>
 #include <subdev/timer.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/ga100.c b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/ga100.c
index e74493a4569e..6090778457b5 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/ga100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/ga100.c
@@ -25,6 +25,7 @@
 #include "chid.h"
 #include "runl.h"
 #include "runq.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/gpuobj.h>
 #include <subdev/gsp.h>
@@ -33,6 +34,8 @@
 
 #include <nvif/class.h>
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
 static u32
 ga100_chan_doorbell_handle(struct nvkm_chan *chan)
 {
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gf100.c b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gf100.c
index 6c94451d0faa..5b7e384fb8f7 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gf100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gf100.c
@@ -27,6 +27,7 @@
 #include "chid.h"
 #include "runl.h"
 #include "runq.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/gpuobj.h>
 #include <subdev/bar.h>
@@ -37,6 +38,9 @@
 
 #include <nvif/class.h>
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
+
 void
 gf100_chan_preempt(struct nvkm_chan *chan)
 {
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk104.c b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk104.c
index d8a4d773a58c..084f82475909 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk104.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk104.c
@@ -27,6 +27,7 @@
 #include "chid.h"
 #include "runl.h"
 #include "runq.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/gpuobj.h>
 #include <subdev/mc.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gv100.c b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gv100.c
index 33066c8cdc64..d4bff979d337 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gv100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/gv100.c
@@ -25,6 +25,7 @@
 #include "cgrp.h"
 #include "runl.h"
 #include "runq.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/gpuobj.h>
 #include <subdev/mmu.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv50.c b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv50.c
index 954b5f3a7d57..887483c74e97 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv50.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv50.c
@@ -26,6 +26,7 @@
 #include "chan.h"
 #include "chid.h"
 #include "runl.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/ramht.h>
 #include <subdev/timer.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/tu102.c b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/tu102.c
index 1d39a6840a40..ae30a0c51fd8 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/fifo/tu102.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/fifo/tu102.c
@@ -23,6 +23,7 @@
 #include "cgrp.h"
 #include "chan.h"
 #include "runl.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/memory.h>
 #include <subdev/gsp.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf100.c b/drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf100.c
index cb390e0134a2..defe41318db7 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf100.c
@@ -22,12 +22,15 @@
  * Authors: Ben Skeggs
  */
 #include "ctxgf100.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <subdev/fb.h>
 #include <subdev/mc.h>
 #include <subdev/timer.h>
 #include <engine/fifo.h>
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
 /*******************************************************************************
  * PGRAPH context register lists
  ******************************************************************************/
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
index 986e8d547c94..ecd7882f2b5c 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c
@@ -24,6 +24,10 @@
 #include "gf100.h"
 #include "ctxgf100.h"
 #include "fuc/os.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
+#include <linux/kernel.h> // for lower_32_bits(), upper_32_bits()
+#include <linux/sprintf.h>
 
 #include <core/client.h>
 #include <core/firmware.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm20b.c b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm20b.c
index 458cd1a00d3f..ed399e1b804b 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm20b.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gm20b.c
@@ -21,6 +21,7 @@
  */
 #include "gf100.h"
 #include "ctxgf100.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/firmware.h>
 #include <subdev/acr.h>
@@ -30,6 +31,8 @@
 
 #include <nvif/class.h>
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
 void
 gm20b_gr_acr_bld_patch(struct nvkm_acr *acr, u32 bld, s64 adjust)
 {
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gv100.c b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gv100.c
index 7f7404a76140..c770aaf8f158 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/gr/gv100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/gr/gv100.c
@@ -21,9 +21,12 @@
  */
 #include "gf100.h"
 #include "ctxgf100.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <nvif/class.h>
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
 static void
 gv100_gr_trap_sm(struct gf100_gr *gr, int gpc, int tpc, int sm)
 {
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/pm/base.c b/drivers/gpu/drm/nouveau/nvkm/engine/pm/base.c
index 131db2645f84..1392c27ea3b9 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/pm/base.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/pm/base.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs
  */
 #include "priv.h"
+#include <linux/sprintf.h>
 
 #include <core/client.h>
 #include <core/option.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/sw/gf100.c b/drivers/gpu/drm/nouveau/nvkm/engine/sw/gf100.c
index a0273baf4c67..5c2df6081cce 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/sw/gf100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/sw/gf100.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs
  */
 #include "nv50.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/gpuobj.h>
 #include <subdev/bar.h>
@@ -31,6 +32,8 @@
 #include <nvif/class.h>
 #include <nvif/event.h>
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
 /*******************************************************************************
  * software context
  ******************************************************************************/
diff --git a/drivers/gpu/drm/nouveau/nvkm/engine/xtensa.c b/drivers/gpu/drm/nouveau/nvkm/engine/xtensa.c
index f7d3ba0afb55..638ab9de43c4 100644
--- a/drivers/gpu/drm/nouveau/nvkm/engine/xtensa.c
+++ b/drivers/gpu/drm/nouveau/nvkm/engine/xtensa.c
@@ -20,6 +20,7 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include <engine/xtensa.h>
+#include <linux/sprintf.h>
 
 #include <core/gpuobj.h>
 #include <engine/fifo.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/falcon/cmdq.c b/drivers/gpu/drm/nouveau/nvkm/falcon/cmdq.c
index 211ebe7afac6..df0b3ae245d2 100644
--- a/drivers/gpu/drm/nouveau/nvkm/falcon/cmdq.c
+++ b/drivers/gpu/drm/nouveau/nvkm/falcon/cmdq.c
@@ -21,6 +21,7 @@
  *
  */
 #include "qmgr.h"
+#include <linux/completion.h>
 
 static bool
 nvkm_falcon_cmdq_has_room(struct nvkm_falcon_cmdq *cmdq, u32 size, bool *rewind)
diff --git a/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c b/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c
index 16b246fda666..777755ac8999 100644
--- a/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c
+++ b/drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c
@@ -21,6 +21,7 @@
  *
  */
 #include "qmgr.h"
+#include <linux/completion.h>
 
 static void
 nvkm_falcon_msgq_open(struct nvkm_falcon_msgq *msgq)
diff --git a/drivers/gpu/drm/nouveau/nvkm/falcon/qmgr.c b/drivers/gpu/drm/nouveau/nvkm/falcon/qmgr.c
index a453de341a75..b400812bf82a 100644
--- a/drivers/gpu/drm/nouveau/nvkm/falcon/qmgr.c
+++ b/drivers/gpu/drm/nouveau/nvkm/falcon/qmgr.c
@@ -21,6 +21,7 @@
  *
  */
 #include "qmgr.h"
+#include <linux/completion.h>
 
 struct nvkm_falcon_qmgr_seq *
 nvkm_falcon_qmgr_seq_acquire(struct nvkm_falcon_qmgr *qmgr)
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/bar/nv50.c b/drivers/gpu/drm/nouveau/nvkm/subdev/bar/nv50.c
index 27d8a1be43e4..8d21f4ad5af1 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/bar/nv50.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/bar/nv50.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs
  */
 #include "nv50.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/gpuobj.h>
 #include <subdev/fb.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/clk/base.c b/drivers/gpu/drm/nouveau/nvkm/subdev/clk/base.c
index 178dc56909c2..8ceec98575ad 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/clk/base.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/clk/base.c
@@ -22,6 +22,8 @@
  * Authors: Ben Skeggs
  */
 #include "priv.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <subdev/bios.h>
 #include <subdev/bios/boost.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gp100.c b/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gp100.c
index 04c7526888bc..aac2a8e5bf8a 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gp100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gp100.c
@@ -20,6 +20,7 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include "priv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/memory.h>
 #include <subdev/mc.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gv100.c b/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gv100.c
index 8e34d40e7649..7f83af12083b 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gv100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/fault/gv100.c
@@ -20,6 +20,7 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include "priv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/memory.h>
 #include <subdev/mmu.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/fault/tu102.c b/drivers/gpu/drm/nouveau/nvkm/subdev/fault/tu102.c
index 5390417a58b5..ab11dc5ae17c 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/fault/tu102.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/fault/tu102.c
@@ -20,6 +20,7 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include "priv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/memory.h>
 #include <subdev/gsp.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c b/drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c
index a41735ab6068..1667c3479d91 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c
@@ -20,6 +20,8 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include "priv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include <core/pci.h>
 #include <subdev/timer.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/aux.c b/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/aux.c
index d063d0dc13c5..e0525f9d2472 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/aux.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/aux.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/string_helpers.h>
+#include <linux/sprintf.h>
 
 #include "aux.h"
 #include "pad.h"
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/bus.c b/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/bus.c
index ed50cc3736b9..603dc12a5325 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/bus.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/i2c/bus.c
@@ -23,6 +23,7 @@
  */
 #include "bus.h"
 #include "pad.h"
+#include <linux/sprintf.h>
 
 #include <core/option.h>
 
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmm.c b/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmm.c
index 9c97800fe037..3234082e9dfe 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmm.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmm.c
@@ -21,6 +21,7 @@
  */
 #define NVKM_VMM_LEVELS_MAX 5
 #include "vmm.h"
+#include <linux/sprintf.h>
 
 #include <subdev/fb.h>
 
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgp100.c b/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgp100.c
index bddac77f48f0..04bd55f379d8 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgp100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgp100.c
@@ -20,6 +20,7 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include "vmm.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/client.h>
 #include <subdev/fb.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgv100.c b/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgv100.c
index f0e21f63253a..1919bb45d7be 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgv100.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/mmu/vmmgv100.c
@@ -20,6 +20,7 @@
  * OTHER DEALINGS IN THE SOFTWARE.
  */
 #include "vmm.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <subdev/fb.h>
 #include <subdev/ltc.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/mxm/mxms.c b/drivers/gpu/drm/nouveau/nvkm/subdev/mxm/mxms.c
index 9abfa5e2fe9f..c22fdc78420d 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/mxm/mxms.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/mxm/mxms.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs
  */
 #include "mxms.h"
+#include <linux/sprintf.h>
 
 #define ROM16(x) get_unaligned_le16(&(x))
 #define ROM32(x) get_unaligned_le32(&(x))
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c b/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c
index 8f2f50ad4ded..2e26ec2dbecf 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c
@@ -22,6 +22,7 @@
  * Authors: Ben Skeggs
  */
 #include "priv.h"
+#include <linux/completion.h>
 
 #include <core/firmware.h>
 #include <subdev/timer.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gm20b.c b/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gm20b.c
index 2ed04da3621d..ffeea8539b27 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gm20b.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gm20b.c
@@ -20,6 +20,8 @@
  * DEALINGS IN THE SOFTWARE.
  */
 #include "priv.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <core/memory.h>
 #include <subdev/acr.h>
diff --git a/drivers/gpu/drm/nouveau/nvkm/subdev/timer/nv04.c b/drivers/gpu/drm/nouveau/nvkm/subdev/timer/nv04.c
index 0058e856b378..69145361150f 100644
--- a/drivers/gpu/drm/nouveau/nvkm/subdev/timer/nv04.c
+++ b/drivers/gpu/drm/nouveau/nvkm/subdev/timer/nv04.c
@@ -23,6 +23,7 @@
  */
 #include "priv.h"
 #include "regsnv04.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 void
 nv04_timer_time(struct nvkm_timer *tmr, u64 time)
diff --git a/drivers/gpu/drm/omapdrm/dss/dsi.c b/drivers/gpu/drm/omapdrm/dss/dsi.c
index ea63c64d3a1a..0df194a2d2bc 100644
--- a/drivers/gpu/drm/omapdrm/dss/dsi.c
+++ b/drivers/gpu/drm/omapdrm/dss/dsi.c
@@ -11,8 +11,10 @@
 #include <linux/regmap.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/hrtimer.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
 #include <linux/delay.h>
@@ -23,6 +25,7 @@
 #include <linux/seq_file.h>
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/workqueue.h>
 #include <linux/sched.h>
diff --git a/drivers/gpu/drm/omapdrm/dss/pll.c b/drivers/gpu/drm/omapdrm/dss/pll.c
index 4c8246a3ded9..d89d813a5eb1 100644
--- a/drivers/gpu/drm/omapdrm/dss/pll.c
+++ b/drivers/gpu/drm/omapdrm/dss/pll.c
@@ -7,6 +7,7 @@
 
 #include <linux/delay.h>
 #include <linux/clk.h>
+#include <linux/hrtimer.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/gpu/drm/omapdrm/omap_dmm_tiler.c b/drivers/gpu/drm/omapdrm/omap_dmm_tiler.c
index 9753c1e1f994..e4f64ee32e72 100644
--- a/drivers/gpu/drm/omapdrm/omap_dmm_tiler.c
+++ b/drivers/gpu/drm/omapdrm/omap_dmm_tiler.c
@@ -22,6 +22,7 @@
 #include <linux/sched.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/vmalloc.h>
 #include <linux/wait.h>
diff --git a/drivers/gpu/drm/panel/panel-sony-acx565akm.c b/drivers/gpu/drm/panel/panel-sony-acx565akm.c
index 3d6a286056a0..fcc04c4afa94 100644
--- a/drivers/gpu/drm/panel/panel-sony-acx565akm.c
+++ b/drivers/gpu/drm/panel/panel-sony-acx565akm.c
@@ -25,6 +25,7 @@
 #include <linux/mutex.h>
 #include <linux/sched.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <video/mipi_display.h>
 
 #include <drm/drm_connector.h>
diff --git a/drivers/gpu/drm/panel/panel-tpo-td043mtea1.c b/drivers/gpu/drm/panel/panel-tpo-td043mtea1.c
index cf4609bb9b1d..c36a5a634e74 100644
--- a/drivers/gpu/drm/panel/panel-tpo-td043mtea1.c
+++ b/drivers/gpu/drm/panel/panel-tpo-td043mtea1.c
@@ -10,9 +10,11 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/regulator/consumer.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_connector.h>
 #include <drm/drm_modes.h>
diff --git a/drivers/gpu/drm/panfrost/panfrost_device.c b/drivers/gpu/drm/panfrost/panfrost_device.c
index a45e4addcc19..b4e36d71a54e 100644
--- a/drivers/gpu/drm/panfrost/panfrost_device.c
+++ b/drivers/gpu/drm/panfrost/panfrost_device.c
@@ -4,6 +4,7 @@
 
 #include <linux/clk.h>
 #include <linux/reset.h>
+#include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_domain.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/gpu/drm/panfrost/panfrost_gem_shrinker.c b/drivers/gpu/drm/panfrost/panfrost_gem_shrinker.c
index 3d9f51bd48b6..77937a8b99fe 100644
--- a/drivers/gpu/drm/panfrost/panfrost_gem_shrinker.c
+++ b/drivers/gpu/drm/panfrost/panfrost_gem_shrinker.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/list.h>
+#include <linux/shrinker.h>
 
 #include <drm/drm_device.h>
 #include <drm/drm_gem_shmem_helper.h>
diff --git a/drivers/gpu/drm/panfrost/panfrost_job.c b/drivers/gpu/drm/panfrost/panfrost_job.c
index 0c2dbf6ef2a5..914df7b57675 100644
--- a/drivers/gpu/drm/panfrost/panfrost_job.c
+++ b/drivers/gpu/drm/panfrost/panfrost_job.c
@@ -5,6 +5,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/dma-resv.h>
diff --git a/drivers/gpu/drm/panfrost/panfrost_mmu.c b/drivers/gpu/drm/panfrost/panfrost_mmu.c
index f38385fe76bb..d1b40b897eb9 100644
--- a/drivers/gpu/drm/panfrost/panfrost_mmu.c
+++ b/drivers/gpu/drm/panfrost/panfrost_mmu.c
@@ -2,6 +2,7 @@
 /* Copyright 2019 Linaro, Ltd, Rob Herring <robh@kernel.org> */
 
 #include <drm/panfrost_drm.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/atomic.h>
 #include <linux/bitfield.h>
diff --git a/drivers/gpu/drm/panfrost/panfrost_perfcnt.c b/drivers/gpu/drm/panfrost/panfrost_perfcnt.c
index ba9b6e2b2636..0dfc8c24c027 100644
--- a/drivers/gpu/drm/panfrost/panfrost_perfcnt.c
+++ b/drivers/gpu/drm/panfrost/panfrost_perfcnt.c
@@ -4,6 +4,7 @@
 #include <linux/completion.h>
 #include <linux/iopoll.h>
 #include <linux/iosys-map.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/uaccess.h>
diff --git a/drivers/gpu/drm/qxl/qxl_ioctl.c b/drivers/gpu/drm/qxl/qxl_ioctl.c
index dd0f834d881c..a3432534c93d 100644
--- a/drivers/gpu/drm/qxl/qxl_ioctl.c
+++ b/drivers/gpu/drm/qxl/qxl_ioctl.c
@@ -25,6 +25,7 @@
 
 #include <linux/pci.h>
 #include <linux/uaccess.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include "qxl_drv.h"
 #include "qxl_object.h"
diff --git a/drivers/gpu/drm/radeon/atombios_crtc.c b/drivers/gpu/drm/radeon/atombios_crtc.c
index 9b3a3a9d60e2..0c37244e34c9 100644
--- a/drivers/gpu/drm/radeon/atombios_crtc.c
+++ b/drivers/gpu/drm/radeon/atombios_crtc.c
@@ -30,6 +30,7 @@
 #include <drm/drm_modeset_helper_vtables.h>
 #include <drm/drm_vblank.h>
 #include <drm/radeon_drm.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "radeon.h"
 #include "atom.h"
diff --git a/drivers/gpu/drm/radeon/atombios_encoders.c b/drivers/gpu/drm/radeon/atombios_encoders.c
index 2bff0d9e20f5..32c0f0a8e2c4 100644
--- a/drivers/gpu/drm/radeon/atombios_encoders.c
+++ b/drivers/gpu/drm/radeon/atombios_encoders.c
@@ -27,6 +27,7 @@
 #include <linux/backlight.h>
 #include <linux/dmi.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_crtc_helper.h>
 #include <drm/drm_edid.h>
diff --git a/drivers/gpu/drm/radeon/cik.c b/drivers/gpu/drm/radeon/cik.c
index 10be30366c2b..ee12f3b7d30a 100644
--- a/drivers/gpu/drm/radeon/cik.c
+++ b/drivers/gpu/drm/radeon/cik.c
@@ -23,9 +23,11 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_vblank.h>
 
diff --git a/drivers/gpu/drm/radeon/cik_sdma.c b/drivers/gpu/drm/radeon/cik_sdma.c
index 919b14845c3c..8b414801774f 100644
--- a/drivers/gpu/drm/radeon/cik_sdma.c
+++ b/drivers/gpu/drm/radeon/cik_sdma.c
@@ -22,6 +22,7 @@
  * Authors: Alex Deucher
  */
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "radeon.h"
 #include "radeon_ucode.h"
diff --git a/drivers/gpu/drm/radeon/evergreen.c b/drivers/gpu/drm/radeon/evergreen.c
index c634dc28e6c3..30ffe49e111f 100644
--- a/drivers/gpu/drm/radeon/evergreen.c
+++ b/drivers/gpu/drm/radeon/evergreen.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 #include <linux/slab.h>
 
diff --git a/drivers/gpu/drm/radeon/evergreen_cs.c b/drivers/gpu/drm/radeon/evergreen_cs.c
index 1fe6e0d883c7..8ac78441b9ab 100644
--- a/drivers/gpu/drm/radeon/evergreen_cs.c
+++ b/drivers/gpu/drm/radeon/evergreen_cs.c
@@ -32,6 +32,7 @@
 #include "evergreend.h"
 #include "evergreen_reg_safe.h"
 #include "cayman_reg_safe.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define MAX(a, b)                   (((a) > (b)) ? (a) : (b))
 #define MIN(a, b)                   (((a) < (b)) ? (a) : (b))
diff --git a/drivers/gpu/drm/radeon/evergreen_dma.c b/drivers/gpu/drm/radeon/evergreen_dma.c
index 52c79da1ecf5..5f797b4e0cb9 100644
--- a/drivers/gpu/drm/radeon/evergreen_dma.c
+++ b/drivers/gpu/drm/radeon/evergreen_dma.c
@@ -26,6 +26,7 @@
 #include "radeon_asic.h"
 #include "evergreen.h"
 #include "evergreend.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /**
  * evergreen_dma_fence_ring_emit - emit a fence on the DMA ring
diff --git a/drivers/gpu/drm/radeon/ni.c b/drivers/gpu/drm/radeon/ni.c
index 9f0881ab3105..afc930539547 100644
--- a/drivers/gpu/drm/radeon/ni.c
+++ b/drivers/gpu/drm/radeon/ni.c
@@ -23,9 +23,11 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/radeon_drm.h>
 
diff --git a/drivers/gpu/drm/radeon/ni_dma.c b/drivers/gpu/drm/radeon/ni_dma.c
index bd515ad4fe4c..bf53ee5b21b9 100644
--- a/drivers/gpu/drm/radeon/ni_dma.c
+++ b/drivers/gpu/drm/radeon/ni_dma.c
@@ -27,6 +27,7 @@
 #include "radeon_trace.h"
 #include "ni.h"
 #include "nid.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * DMA
diff --git a/drivers/gpu/drm/radeon/r100.c b/drivers/gpu/drm/radeon/r100.c
index 86b8b770af19..c56608b4f13d 100644
--- a/drivers/gpu/drm/radeon/r100.c
+++ b/drivers/gpu/drm/radeon/r100.c
@@ -27,6 +27,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/seq_file.h>
diff --git a/drivers/gpu/drm/radeon/r300.c b/drivers/gpu/drm/radeon/r300.c
index 25201b9a5aae..7a216a8ecaa2 100644
--- a/drivers/gpu/drm/radeon/r300.c
+++ b/drivers/gpu/drm/radeon/r300.c
@@ -29,6 +29,7 @@
 #include <linux/pci.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm.h>
 #include <drm/drm_device.h>
diff --git a/drivers/gpu/drm/radeon/r520.c b/drivers/gpu/drm/radeon/r520.c
index 6cbcaa845192..1196f3d6afc4 100644
--- a/drivers/gpu/drm/radeon/r520.c
+++ b/drivers/gpu/drm/radeon/r520.c
@@ -30,6 +30,7 @@
 #include "radeon_asic.h"
 #include "atom.h"
 #include "r520d.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /* This files gather functions specifics to: r520,rv530,rv560,rv570,r580 */
 
diff --git a/drivers/gpu/drm/radeon/r600.c b/drivers/gpu/drm/radeon/r600.c
index b5e97d95a19f..3944547a5397 100644
--- a/drivers/gpu/drm/radeon/r600.c
+++ b/drivers/gpu/drm/radeon/r600.c
@@ -27,10 +27,12 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_device.h>
 #include <drm/drm_vblank.h>
diff --git a/drivers/gpu/drm/radeon/r600_dma.c b/drivers/gpu/drm/radeon/r600_dma.c
index 89ca2738c5d4..bf9059ccf357 100644
--- a/drivers/gpu/drm/radeon/r600_dma.c
+++ b/drivers/gpu/drm/radeon/r600_dma.c
@@ -26,6 +26,7 @@
 #include "radeon_asic.h"
 #include "r600.h"
 #include "r600d.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * DMA
diff --git a/drivers/gpu/drm/radeon/r600_dpm.c b/drivers/gpu/drm/radeon/r600_dpm.c
index 64980a61d38a..4b5866e896a9 100644
--- a/drivers/gpu/drm/radeon/r600_dpm.c
+++ b/drivers/gpu/drm/radeon/r600_dpm.c
@@ -27,6 +27,7 @@
 #include "r600d.h"
 #include "r600_dpm.h"
 #include "atom.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 const u32 r600_utc[R600_PM_NUMBER_OF_TC] = {
 	R600_UTC_DFLT_00,
diff --git a/drivers/gpu/drm/radeon/radeon_atombios.c b/drivers/gpu/drm/radeon/radeon_atombios.c
index bb1f0a3371ab..b29efd913b68 100644
--- a/drivers/gpu/drm/radeon/radeon_atombios.c
+++ b/drivers/gpu/drm/radeon/radeon_atombios.c
@@ -25,6 +25,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_device.h>
 #include <drm/drm_edid.h>
diff --git a/drivers/gpu/drm/radeon/radeon_cursor.c b/drivers/gpu/drm/radeon/radeon_cursor.c
index 3507805b34bc..bd8350699f11 100644
--- a/drivers/gpu/drm/radeon/radeon_cursor.c
+++ b/drivers/gpu/drm/radeon/radeon_cursor.c
@@ -26,6 +26,7 @@
 
 #include <drm/drm_device.h>
 #include <drm/radeon_drm.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "radeon.h"
 
diff --git a/drivers/gpu/drm/radeon/radeon_fence.c b/drivers/gpu/drm/radeon/radeon_fence.c
index 9ebe4a0b9a6c..022369eb644c 100644
--- a/drivers/gpu/drm/radeon/radeon_fence.c
+++ b/drivers/gpu/drm/radeon/radeon_fence.c
@@ -31,6 +31,7 @@
 
 #include <linux/atomic.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kref.h>
 #include <linux/sched/signal.h>
 #include <linux/seq_file.h>
diff --git a/drivers/gpu/drm/radeon/radeon_i2c.c b/drivers/gpu/drm/radeon/radeon_i2c.c
index 3d174390a8af..6c9777f95c0c 100644
--- a/drivers/gpu/drm/radeon/radeon_i2c.c
+++ b/drivers/gpu/drm/radeon/radeon_i2c.c
@@ -26,6 +26,7 @@
 
 #include <linux/export.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_device.h>
 #include <drm/drm_edid.h>
diff --git a/drivers/gpu/drm/radeon/radeon_legacy_encoders.c b/drivers/gpu/drm/radeon/radeon_legacy_encoders.c
index c4350ac2b3d2..4105ea1e371e 100644
--- a/drivers/gpu/drm/radeon/radeon_legacy_encoders.c
+++ b/drivers/gpu/drm/radeon/radeon_legacy_encoders.c
@@ -26,6 +26,7 @@
 
 #include <linux/backlight.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_device.h>
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/radeon/radeon_pm.c b/drivers/gpu/drm/radeon/radeon_pm.c
index 4482c8c5f5ce..89642587e0de 100644
--- a/drivers/gpu/drm/radeon/radeon_pm.c
+++ b/drivers/gpu/drm/radeon/radeon_pm.c
@@ -23,8 +23,10 @@
 
 #include <linux/hwmon-sysfs.h>
 #include <linux/hwmon.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/power_supply.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_vblank.h>
 
diff --git a/drivers/gpu/drm/radeon/radeon_vce.c b/drivers/gpu/drm/radeon/radeon_vce.c
index d1871af967d4..f28781959223 100644
--- a/drivers/gpu/drm/radeon/radeon_vce.c
+++ b/drivers/gpu/drm/radeon/radeon_vce.c
@@ -26,7 +26,9 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm.h>
 
diff --git a/drivers/gpu/drm/radeon/rs400.c b/drivers/gpu/drm/radeon/rs400.c
index d7f552d441ab..1db8f114893f 100644
--- a/drivers/gpu/drm/radeon/rs400.c
+++ b/drivers/gpu/drm/radeon/rs400.c
@@ -28,6 +28,7 @@
 
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_device.h>
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/radeon/rv515.c b/drivers/gpu/drm/radeon/rv515.c
index 79709d26d983..80e7c3361857 100644
--- a/drivers/gpu/drm/radeon/rv515.c
+++ b/drivers/gpu/drm/radeon/rv515.c
@@ -28,6 +28,7 @@
 
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_device.h>
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/radeon/rv770.c b/drivers/gpu/drm/radeon/rv770.c
index 9ce12fa3c356..181bf8098cab 100644
--- a/drivers/gpu/drm/radeon/rv770.c
+++ b/drivers/gpu/drm/radeon/rv770.c
@@ -27,6 +27,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 #include <linux/slab.h>
 
diff --git a/drivers/gpu/drm/radeon/rv770_dma.c b/drivers/gpu/drm/radeon/rv770_dma.c
index 4c91614b5e70..7cc9f9ecdeae 100644
--- a/drivers/gpu/drm/radeon/rv770_dma.c
+++ b/drivers/gpu/drm/radeon/rv770_dma.c
@@ -25,6 +25,7 @@
 #include "radeon.h"
 #include "radeon_asic.h"
 #include "rv770d.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /**
  * rv770_copy_dma - copy pages using the DMA engine
diff --git a/drivers/gpu/drm/radeon/si.c b/drivers/gpu/drm/radeon/si.c
index 93f197d96d8f..249f30e193ca 100644
--- a/drivers/gpu/drm/radeon/si.c
+++ b/drivers/gpu/drm/radeon/si.c
@@ -23,9 +23,11 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_vblank.h>
 #include <drm/radeon_drm.h>
diff --git a/drivers/gpu/drm/radeon/si_dma.c b/drivers/gpu/drm/radeon/si_dma.c
index 645897d1bfc3..5846445e634b 100644
--- a/drivers/gpu/drm/radeon/si_dma.c
+++ b/drivers/gpu/drm/radeon/si_dma.c
@@ -27,6 +27,7 @@
 #include "radeon_trace.h"
 #include "si.h"
 #include "sid.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /**
  * si_dma_is_lockup - Check if the DMA engine is locked up
diff --git a/drivers/gpu/drm/radeon/uvd_v1_0.c b/drivers/gpu/drm/radeon/uvd_v1_0.c
index 5684639d20a6..ba71f1618ec8 100644
--- a/drivers/gpu/drm/radeon/uvd_v1_0.c
+++ b/drivers/gpu/drm/radeon/uvd_v1_0.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "radeon.h"
 #include "radeon_asic.h"
diff --git a/drivers/gpu/drm/radeon/uvd_v2_2.c b/drivers/gpu/drm/radeon/uvd_v2_2.c
index 6266167886d9..24a477ccdc24 100644
--- a/drivers/gpu/drm/radeon/uvd_v2_2.c
+++ b/drivers/gpu/drm/radeon/uvd_v2_2.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "radeon.h"
 #include "radeon_asic.h"
diff --git a/drivers/gpu/drm/radeon/vce_v1_0.c b/drivers/gpu/drm/radeon/vce_v1_0.c
index bdfbcf14b864..498a1383defe 100644
--- a/drivers/gpu/drm/radeon/vce_v1_0.c
+++ b/drivers/gpu/drm/radeon/vce_v1_0.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "radeon.h"
 #include "radeon_asic.h"
diff --git a/drivers/gpu/drm/renesas/rcar-du/rcar_du_crtc.c b/drivers/gpu/drm/renesas/rcar-du/rcar_du_crtc.c
index 7e175dbfd892..ee9d0c60a69b 100644
--- a/drivers/gpu/drm/renesas/rcar-du/rcar_du_crtc.c
+++ b/drivers/gpu/drm/renesas/rcar-du/rcar_du_crtc.c
@@ -8,8 +8,10 @@
  */
 
 #include <linux/clk.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/rockchip/inno_hdmi.c b/drivers/gpu/drm/rockchip/inno_hdmi.c
index 1d2261643743..5645b109c94c 100644
--- a/drivers/gpu/drm/rockchip/inno_hdmi.c
+++ b/drivers/gpu/drm/rockchip/inno_hdmi.c
@@ -7,6 +7,7 @@
 
 #include <linux/irq.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/hdmi.h>
diff --git a/drivers/gpu/drm/rockchip/rk3066_hdmi.c b/drivers/gpu/drm/rockchip/rk3066_hdmi.c
index 95cd1b49eda8..7bf17e4e03af 100644
--- a/drivers/gpu/drm/rockchip/rk3066_hdmi.c
+++ b/drivers/gpu/drm/rockchip/rk3066_hdmi.c
@@ -9,6 +9,7 @@
 #include <drm/drm_of.h>
 #include <drm/drm_probe_helper.h>
 #include <drm/drm_simple_kms_helper.h>
+#include <linux/completion.h>
 
 #include <linux/clk.h>
 #include <linux/mfd/syscon.h>
diff --git a/drivers/gpu/drm/rockchip/rockchip_drm_vop.c b/drivers/gpu/drm/rockchip/rockchip_drm_vop.c
index a13473b2d54c..e0b57d2238df 100644
--- a/drivers/gpu/drm/rockchip/rockchip_drm_vop.c
+++ b/drivers/gpu/drm/rockchip/rockchip_drm_vop.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/component.h>
 #include <linux/delay.h>
 #include <linux/iopoll.h>
diff --git a/drivers/gpu/drm/rockchip/rockchip_drm_vop2.c b/drivers/gpu/drm/rockchip/rockchip_drm_vop2.c
index 85b3b4871a1d..cdc1aced76d8 100644
--- a/drivers/gpu/drm/rockchip/rockchip_drm_vop2.c
+++ b/drivers/gpu/drm/rockchip/rockchip_drm_vop2.c
@@ -5,6 +5,7 @@
  */
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/component.h>
 #include <linux/delay.h>
 #include <linux/iopoll.h>
@@ -17,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/swab.h>
 
 #include <drm/drm.h>
diff --git a/drivers/gpu/drm/sti/sti_plane.c b/drivers/gpu/drm/sti/sti_plane.c
index 29e669ccec5b..b8d726a33306 100644
--- a/drivers/gpu/drm/sti/sti_plane.c
+++ b/drivers/gpu/drm/sti/sti_plane.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/types.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_blend.h>
 #include <drm/drm_fourcc.h>
diff --git a/drivers/gpu/drm/sun4i/sun4i_layer.c b/drivers/gpu/drm/sun4i/sun4i_layer.c
index 98f3176366c0..243ef811b20f 100644
--- a/drivers/gpu/drm/sun4i/sun4i_layer.c
+++ b/drivers/gpu/drm/sun4i/sun4i_layer.c
@@ -11,6 +11,9 @@
 #include <drm/drm_blend.h>
 #include <drm/drm_gem_atomic_helper.h>
 
+#include <linux/device.h> // for devm_kzalloc()
+#include <linux/slab.h>
+
 #include "sun4i_backend.h"
 #include "sun4i_frontend.h"
 #include "sun4i_layer.h"
diff --git a/drivers/gpu/drm/sun4i/sun8i_ui_layer.c b/drivers/gpu/drm/sun4i/sun8i_ui_layer.c
index ca75ca0835a6..1d24633b8092 100644
--- a/drivers/gpu/drm/sun4i/sun8i_ui_layer.c
+++ b/drivers/gpu/drm/sun4i/sun8i_ui_layer.c
@@ -19,6 +19,7 @@
 #include <drm/drm_gem_atomic_helper.h>
 #include <drm/drm_gem_dma_helper.h>
 #include <drm/drm_probe_helper.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "sun8i_mixer.h"
 #include "sun8i_ui_layer.h"
diff --git a/drivers/gpu/drm/sun4i/sun8i_vi_layer.c b/drivers/gpu/drm/sun4i/sun8i_vi_layer.c
index f9c0a56d3a14..9700e51513c1 100644
--- a/drivers/gpu/drm/sun4i/sun8i_vi_layer.c
+++ b/drivers/gpu/drm/sun4i/sun8i_vi_layer.c
@@ -12,6 +12,7 @@
 #include <drm/drm_gem_atomic_helper.h>
 #include <drm/drm_gem_dma_helper.h>
 #include <drm/drm_probe_helper.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "sun8i_csc.h"
 #include "sun8i_mixer.h"
diff --git a/drivers/gpu/drm/tegra/dpaux.c b/drivers/gpu/drm/tegra/dpaux.c
index ae12d001a04b..8d9456b49c3c 100644
--- a/drivers/gpu/drm/tegra/dpaux.c
+++ b/drivers/gpu/drm/tegra/dpaux.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/gpu/drm/tegra/drm.c b/drivers/gpu/drm/tegra/drm.c
index a73cff7a3070..831298bbe13a 100644
--- a/drivers/gpu/drm/tegra/drm.c
+++ b/drivers/gpu/drm/tegra/drm.c
@@ -8,7 +8,9 @@
 #include <linux/host1x.h>
 #include <linux/idr.h>
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 
diff --git a/drivers/gpu/drm/tegra/hub.c b/drivers/gpu/drm/tegra/hub.c
index f21e57e8599e..522dbedc8aff 100644
--- a/drivers/gpu/drm/tegra/hub.c
+++ b/drivers/gpu/drm/tegra/hub.c
@@ -7,6 +7,7 @@
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/host1x.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_graph.h>
@@ -14,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/tegra/riscv.c b/drivers/gpu/drm/tegra/riscv.c
index 6580416408f8..ec38ff517d33 100644
--- a/drivers/gpu/drm/tegra/riscv.c
+++ b/drivers/gpu/drm/tegra/riscv.c
@@ -6,6 +6,7 @@
 #include <linux/dev_printk.h>
 #include <linux/device.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of.h>
 
 #include "riscv.h"
diff --git a/drivers/gpu/drm/tegra/submit.c b/drivers/gpu/drm/tegra/submit.c
index 2430fcc97448..7fad57aa4ca4 100644
--- a/drivers/gpu/drm/tegra/submit.c
+++ b/drivers/gpu/drm/tegra/submit.c
@@ -6,6 +6,7 @@
 #include <linux/file.h>
 #include <linux/host1x.h>
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/kref.h>
 #include <linux/list.h>
 #include <linux/nospec.h>
diff --git a/drivers/gpu/drm/tegra/uapi.c b/drivers/gpu/drm/tegra/uapi.c
index 5adab6b22916..4fea12b7e595 100644
--- a/drivers/gpu/drm/tegra/uapi.c
+++ b/drivers/gpu/drm/tegra/uapi.c
@@ -4,6 +4,7 @@
 #include <linux/host1x.h>
 #include <linux/iommu.h>
 #include <linux/list.h>
+#include <linux/property.h> // for device_get_dma_attr()
 
 #include <drm/drm_drv.h>
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/tests/drm_client_modeset_test.c b/drivers/gpu/drm/tests/drm_client_modeset_test.c
index 7516f6cb36e4..21164c9776ff 100644
--- a/drivers/gpu/drm/tests/drm_client_modeset_test.c
+++ b/drivers/gpu/drm/tests/drm_client_modeset_test.c
@@ -4,6 +4,7 @@
  */
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_connector.h>
 #include <drm/drm_edid.h>
diff --git a/drivers/gpu/drm/tests/drm_cmdline_parser_test.c b/drivers/gpu/drm/tests/drm_cmdline_parser_test.c
index 88f7f518ffb3..c9ac801d1853 100644
--- a/drivers/gpu/drm/tests/drm_cmdline_parser_test.c
+++ b/drivers/gpu/drm/tests/drm_cmdline_parser_test.c
@@ -5,6 +5,7 @@
  */
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_connector.h>
 #include <drm/drm_modes.h>
diff --git a/drivers/gpu/drm/tests/drm_connector_test.c b/drivers/gpu/drm/tests/drm_connector_test.c
index c66aa2dc8d9d..57cc4919d46d 100644
--- a/drivers/gpu/drm/tests/drm_connector_test.c
+++ b/drivers/gpu/drm/tests/drm_connector_test.c
@@ -4,6 +4,7 @@
  */
 
 #include <drm/drm_connector.h>
+#include <linux/sprintf.h>
 
 #include <kunit/test.h>
 
diff --git a/drivers/gpu/drm/tests/drm_dp_mst_helper_test.c b/drivers/gpu/drm/tests/drm_dp_mst_helper_test.c
index d916e548fcb1..2bf5359956cf 100644
--- a/drivers/gpu/drm/tests/drm_dp_mst_helper_test.c
+++ b/drivers/gpu/drm/tests/drm_dp_mst_helper_test.c
@@ -6,6 +6,7 @@
  */
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include <drm/display/drm_dp_mst_helper.h>
 #include <drm/drm_print.h>
diff --git a/drivers/gpu/drm/tests/drm_format_helper_test.c b/drivers/gpu/drm/tests/drm_format_helper_test.c
index 08992636ec05..9b97320942bd 100644
--- a/drivers/gpu/drm/tests/drm_format_helper_test.c
+++ b/drivers/gpu/drm/tests/drm_format_helper_test.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0+
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_device.h>
 #include <drm/drm_drv.h>
diff --git a/drivers/gpu/drm/tests/drm_plane_helper_test.c b/drivers/gpu/drm/tests/drm_plane_helper_test.c
index 0f392146b233..498faab0eb2b 100644
--- a/drivers/gpu/drm/tests/drm_plane_helper_test.c
+++ b/drivers/gpu/drm/tests/drm_plane_helper_test.c
@@ -6,6 +6,7 @@
  */
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_framebuffer.h>
diff --git a/drivers/gpu/drm/tests/drm_probe_helper_test.c b/drivers/gpu/drm/tests/drm_probe_helper_test.c
index 1a2044070a6c..f1703bd3f54c 100644
--- a/drivers/gpu/drm/tests/drm_probe_helper_test.c
+++ b/drivers/gpu/drm/tests/drm_probe_helper_test.c
@@ -12,6 +12,7 @@
 #include <drm/drm_modes.h>
 #include <drm/drm_modeset_helper_vtables.h>
 #include <drm/drm_probe_helper.h>
+#include <linux/sprintf.h>
 
 #include <kunit/test.h>
 
diff --git a/drivers/gpu/drm/tests/drm_rect_test.c b/drivers/gpu/drm/tests/drm_rect_test.c
index 76332cd2ead8..9ed07971a164 100644
--- a/drivers/gpu/drm/tests/drm_rect_test.c
+++ b/drivers/gpu/drm/tests/drm_rect_test.c
@@ -6,6 +6,7 @@
  */
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_rect.h>
 #include <drm/drm_mode.h>
diff --git a/drivers/gpu/drm/tidss/tidss_crtc.c b/drivers/gpu/drm/tidss/tidss_crtc.c
index 5f838980c7a1..d1912457e820 100644
--- a/drivers/gpu/drm/tidss/tidss_crtc.c
+++ b/drivers/gpu/drm/tidss/tidss_crtc.c
@@ -9,6 +9,7 @@
 #include <drm/drm_crtc.h>
 #include <drm/drm_gem_dma_helper.h>
 #include <drm/drm_vblank.h>
+#include <linux/completion.h>
 
 #include "tidss_crtc.h"
 #include "tidss_dispc.h"
diff --git a/drivers/gpu/drm/tidss/tidss_plane.c b/drivers/gpu/drm/tidss/tidss_plane.c
index e1c0ef0c3894..2d9cc2b12cc6 100644
--- a/drivers/gpu/drm/tidss/tidss_plane.c
+++ b/drivers/gpu/drm/tidss/tidss_plane.c
@@ -12,6 +12,9 @@
 #include <drm/drm_framebuffer.h>
 #include <drm/drm_gem_atomic_helper.h>
 
+#include <linux/device.h> // for dev_dbg()
+#include <linux/slab.h>
+
 #include "tidss_crtc.h"
 #include "tidss_dispc.h"
 #include "tidss_drv.h"
diff --git a/drivers/gpu/drm/tilcdc/tilcdc_crtc.c b/drivers/gpu/drm/tilcdc/tilcdc_crtc.c
index b5f60b2b2d0e..155395860331 100644
--- a/drivers/gpu/drm/tilcdc/tilcdc_crtc.c
+++ b/drivers/gpu/drm/tilcdc/tilcdc_crtc.c
@@ -8,6 +8,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/of_graph.h>
 #include <linux/pm_runtime.h>
+#include <linux/completion.h>
 
 #include <drm/drm_atomic.h>
 #include <drm/drm_atomic_helper.h>
diff --git a/drivers/gpu/drm/tiny/panel-mipi-dbi.c b/drivers/gpu/drm/tiny/panel-mipi-dbi.c
index f80a141fcf36..d9ca2c798def 100644
--- a/drivers/gpu/drm/tiny/panel-mipi-dbi.c
+++ b/drivers/gpu/drm/tiny/panel-mipi-dbi.c
@@ -13,6 +13,7 @@
 #include <linux/property.h>
 #include <linux/regulator/consumer.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_drv.h>
diff --git a/drivers/gpu/drm/ttm/ttm_pool.c b/drivers/gpu/drm/ttm/ttm_pool.c
index b62f420a9f96..65440376927c 100644
--- a/drivers/gpu/drm/ttm/ttm_pool.c
+++ b/drivers/gpu/drm/ttm/ttm_pool.c
@@ -36,6 +36,7 @@
 #include <linux/debugfs.h>
 #include <linux/highmem.h>
 #include <linux/sched/mm.h>
+#include <linux/shrinker.h>
 
 #ifdef CONFIG_X86
 #include <asm/set_memory.h>
diff --git a/drivers/gpu/drm/v3d/v3d_perfmon.c b/drivers/gpu/drm/v3d/v3d_perfmon.c
index e1be7368b87d..36ad853671e6 100644
--- a/drivers/gpu/drm/v3d/v3d_perfmon.c
+++ b/drivers/gpu/drm/v3d/v3d_perfmon.c
@@ -5,6 +5,7 @@
 
 #include "v3d_drv.h"
 #include "v3d_regs.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #define V3D_PERFMONID_MIN	1
 #define V3D_PERFMONID_MAX	U32_MAX
diff --git a/drivers/gpu/drm/v3d/v3d_submit.c b/drivers/gpu/drm/v3d/v3d_submit.c
index 88f63d526b22..f1b5f2ff2a89 100644
--- a/drivers/gpu/drm/v3d/v3d_submit.c
+++ b/drivers/gpu/drm/v3d/v3d_submit.c
@@ -5,6 +5,7 @@
  */
 
 #include <drm/drm_syncobj.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include "v3d_drv.h"
 #include "v3d_regs.h"
diff --git a/drivers/gpu/drm/vc4/vc4_bo.c b/drivers/gpu/drm/vc4/vc4_bo.c
index 86d629e45307..5523dedea89d 100644
--- a/drivers/gpu/drm/vc4/vc4_bo.c
+++ b/drivers/gpu/drm/vc4/vc4_bo.c
@@ -17,6 +17,7 @@
  */
 
 #include <linux/dma-buf.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_fourcc.h>
 
diff --git a/drivers/gpu/drm/vc4/vc4_dsi.c b/drivers/gpu/drm/vc4/vc4_dsi.c
index 46f6c4ce61c5..e87e70f73311 100644
--- a/drivers/gpu/drm/vc4/vc4_dsi.c
+++ b/drivers/gpu/drm/vc4/vc4_dsi.c
@@ -29,6 +29,7 @@
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_bridge.h>
diff --git a/drivers/gpu/drm/vc4/vc4_gem.c b/drivers/gpu/drm/vc4/vc4_gem.c
index 03648f954985..7ef4ec6d2aaa 100644
--- a/drivers/gpu/drm/vc4/vc4_gem.c
+++ b/drivers/gpu/drm/vc4/vc4_gem.c
@@ -26,6 +26,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/device.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sched/signal.h>
 #include <linux/dma-fence-array.h>
 
diff --git a/drivers/gpu/drm/vc4/vc4_hdmi.c b/drivers/gpu/drm/vc4/vc4_hdmi.c
index 34f807ed1c31..a14dda21f138 100644
--- a/drivers/gpu/drm/vc4/vc4_hdmi.c
+++ b/drivers/gpu/drm/vc4/vc4_hdmi.c
@@ -39,6 +39,7 @@
 #include <drm/drm_probe_helper.h>
 #include <drm/drm_simple_kms_helper.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/component.h>
 #include <linux/gpio/consumer.h>
 #include <linux/i2c.h>
diff --git a/drivers/gpu/drm/vc4/vc4_perfmon.c b/drivers/gpu/drm/vc4/vc4_perfmon.c
index c4ac2c946238..b7c1098a15bb 100644
--- a/drivers/gpu/drm/vc4/vc4_perfmon.c
+++ b/drivers/gpu/drm/vc4/vc4_perfmon.c
@@ -11,6 +11,7 @@
 
 #include "vc4_drv.h"
 #include "vc4_regs.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #define VC4_PERFMONID_MIN	1
 #define VC4_PERFMONID_MAX	U32_MAX
diff --git a/drivers/gpu/drm/vgem/vgem_fence.c b/drivers/gpu/drm/vgem/vgem_fence.c
index e15754178395..5c553aeed74a 100644
--- a/drivers/gpu/drm/vgem/vgem_fence.c
+++ b/drivers/gpu/drm/vgem/vgem_fence.c
@@ -22,6 +22,7 @@
 
 #include <linux/dma-buf.h>
 #include <linux/dma-resv.h>
+#include <linux/sprintf.h>
 
 #include <drm/drm_file.h>
 
diff --git a/drivers/gpu/drm/virtio/virtgpu_fence.c b/drivers/gpu/drm/virtio/virtgpu_fence.c
index f28357dbde35..212907b461e3 100644
--- a/drivers/gpu/drm/virtio/virtgpu_fence.c
+++ b/drivers/gpu/drm/virtio/virtgpu_fence.c
@@ -24,6 +24,7 @@
  */
 
 #include <trace/events/dma_fence.h>
+#include <linux/sprintf.h>
 
 #include "virtgpu_drv.h"
 
diff --git a/drivers/gpu/drm/virtio/virtgpu_ioctl.c b/drivers/gpu/drm/virtio/virtgpu_ioctl.c
index e4f76f315550..855499e5f6dc 100644
--- a/drivers/gpu/drm/virtio/virtgpu_ioctl.c
+++ b/drivers/gpu/drm/virtio/virtgpu_ioctl.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sync_file.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/gpu/drm/virtio/virtgpu_submit.c b/drivers/gpu/drm/virtio/virtgpu_submit.c
index 1c7c7f61a222..72065fd704e2 100644
--- a/drivers/gpu/drm/virtio/virtgpu_submit.c
+++ b/drivers/gpu/drm/virtio/virtgpu_submit.c
@@ -10,6 +10,7 @@
 
 #include <linux/dma-fence-unwrap.h>
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sync_file.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/gpu/drm/vmwgfx/vmwgfx_cmdbuf.c b/drivers/gpu/drm/vmwgfx/vmwgfx_cmdbuf.c
index 94e8982f5616..8a87f87bbcef 100644
--- a/drivers/gpu/drm/vmwgfx/vmwgfx_cmdbuf.c
+++ b/drivers/gpu/drm/vmwgfx/vmwgfx_cmdbuf.c
@@ -27,6 +27,7 @@
 
 #include "vmwgfx_bo.h"
 #include "vmwgfx_drv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/ttm/ttm_bo.h>
 
diff --git a/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c b/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c
index d3e308fdfd5b..f4fa2e047aaf 100644
--- a/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c
+++ b/drivers/gpu/drm/vmwgfx/vmwgfx_drv.c
@@ -27,6 +27,7 @@
 
 
 #include "vmwgfx_drv.h"
+#include <linux/sprintf.h>
 
 #include "vmwgfx_bo.h"
 #include "vmwgfx_binding.h"
diff --git a/drivers/gpu/drm/vmwgfx/vmwgfx_gmrid_manager.c b/drivers/gpu/drm/vmwgfx/vmwgfx_gmrid_manager.c
index a0b47c9b33f5..0978fcbbcaf4 100644
--- a/drivers/gpu/drm/vmwgfx/vmwgfx_gmrid_manager.c
+++ b/drivers/gpu/drm/vmwgfx/vmwgfx_gmrid_manager.c
@@ -33,6 +33,7 @@
 #include <linux/idr.h>
 #include <linux/spinlock.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 struct vmwgfx_gmrid_man {
 	struct ttm_resource_manager manager;
diff --git a/drivers/gpu/drm/vmwgfx/vmwgfx_msg.c b/drivers/gpu/drm/vmwgfx/vmwgfx_msg.c
index 2651fe0ef518..62bb223d047b 100644
--- a/drivers/gpu/drm/vmwgfx/vmwgfx_msg.c
+++ b/drivers/gpu/drm/vmwgfx/vmwgfx_msg.c
@@ -29,6 +29,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/cc_platform.h>
+#include <linux/sprintf.h>
 
 #include <asm/hypervisor.h>
 #include <drm/drm_ioctl.h>
diff --git a/drivers/gpu/drm/xe/tests/xe_lmtt_test.c b/drivers/gpu/drm/xe/tests/xe_lmtt_test.c
index 1f1557c45ae1..bdf1627d2388 100644
--- a/drivers/gpu/drm/xe/tests/xe_lmtt_test.c
+++ b/drivers/gpu/drm/xe/tests/xe_lmtt_test.c
@@ -4,6 +4,7 @@
  */
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 static const struct lmtt_ops_param {
 	const char *desc;
diff --git a/drivers/gpu/drm/xe/xe_debugfs.c b/drivers/gpu/drm/xe/xe_debugfs.c
index c56fd7d59f05..bbee911e483d 100644
--- a/drivers/gpu/drm/xe/xe_debugfs.c
+++ b/drivers/gpu/drm/xe/xe_debugfs.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_debugfs.h"
+#include <linux/sprintf.h>
 
 #include <linux/string_helpers.h>
 
diff --git a/drivers/gpu/drm/xe/xe_device_sysfs.c b/drivers/gpu/drm/xe/xe_device_sysfs.c
index 99113a5a2b84..5a7774983d57 100644
--- a/drivers/gpu/drm/xe/xe_device_sysfs.c
+++ b/drivers/gpu/drm/xe/xe_device_sysfs.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/sysfs.h>
 
diff --git a/drivers/gpu/drm/xe/xe_exec.c b/drivers/gpu/drm/xe/xe_exec.c
index 17f26952e665..ecabe7d2e6ed 100644
--- a/drivers/gpu/drm/xe/xe_exec.c
+++ b/drivers/gpu/drm/xe/xe_exec.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_exec.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_device.h>
 #include <drm/drm_exec.h>
diff --git a/drivers/gpu/drm/xe/xe_exec_queue.c b/drivers/gpu/drm/xe/xe_exec_queue.c
index 254b1d3af4cb..65c796af887c 100644
--- a/drivers/gpu/drm/xe/xe_exec_queue.c
+++ b/drivers/gpu/drm/xe/xe_exec_queue.c
@@ -4,6 +4,8 @@
  */
 
 #include "xe_exec_queue.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
+#include <linux/sprintf.h>
 
 #include <linux/nospec.h>
 
diff --git a/drivers/gpu/drm/xe/xe_execlist.c b/drivers/gpu/drm/xe/xe_execlist.c
index 96b5224eb478..3013e8a6abee 100644
--- a/drivers/gpu/drm/xe/xe_execlist.c
+++ b/drivers/gpu/drm/xe/xe_execlist.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_execlist.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_managed.h>
 
diff --git a/drivers/gpu/drm/xe/xe_gpu_scheduler.c b/drivers/gpu/drm/xe/xe_gpu_scheduler.c
index e4ad1d6ce1d5..0f263dc0dc19 100644
--- a/drivers/gpu/drm/xe/xe_gpu_scheduler.c
+++ b/drivers/gpu/drm/xe/xe_gpu_scheduler.c
@@ -5,6 +5,8 @@
 
 #include "xe_gpu_scheduler.h"
 
+#include <linux/workqueue.h>
+
 static void xe_sched_process_msg_queue(struct xe_gpu_scheduler *sched)
 {
 	if (!READ_ONCE(sched->base.pause_submit))
diff --git a/drivers/gpu/drm/xe/xe_gsc.c b/drivers/gpu/drm/xe/xe_gsc.c
index a8a895cf4b44..b763b34359d3 100644
--- a/drivers/gpu/drm/xe/xe_gsc.c
+++ b/drivers/gpu/drm/xe/xe_gsc.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_gsc.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_managed.h>
 
diff --git a/drivers/gpu/drm/xe/xe_gsc_submit.c b/drivers/gpu/drm/xe/xe_gsc_submit.c
index 8c5381e5913f..d440eac389ce 100644
--- a/drivers/gpu/drm/xe/xe_gsc_submit.c
+++ b/drivers/gpu/drm/xe/xe_gsc_submit.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_gsc_submit.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "abi/gsc_command_header_abi.h"
 #include "xe_bb.h"
diff --git a/drivers/gpu/drm/xe/xe_gt.c b/drivers/gpu/drm/xe/xe_gt.c
index 35474ddbaf97..a2fdbadce855 100644
--- a/drivers/gpu/drm/xe/xe_gt.c
+++ b/drivers/gpu/drm/xe/xe_gt.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_gt.h"
+#include <linux/sprintf.h>
 
 #include <linux/minmax.h>
 
diff --git a/drivers/gpu/drm/xe/xe_gt_ccs_mode.c b/drivers/gpu/drm/xe/xe_gt_ccs_mode.c
index 529fc286cd06..a54b1fd798e3 100644
--- a/drivers/gpu/drm/xe/xe_gt_ccs_mode.c
+++ b/drivers/gpu/drm/xe/xe_gt_ccs_mode.c
@@ -4,6 +4,7 @@
  */
 
 #include <drm/drm_managed.h>
+#include <linux/kstrtox.h>
 
 #include "regs/xe_gt_regs.h"
 #include "xe_assert.h"
diff --git a/drivers/gpu/drm/xe/xe_gt_debugfs.c b/drivers/gpu/drm/xe/xe_gt_debugfs.c
index c4b67cf09f8f..97f53442dc4f 100644
--- a/drivers/gpu/drm/xe/xe_gt_debugfs.c
+++ b/drivers/gpu/drm/xe/xe_gt_debugfs.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_gt_debugfs.h"
+#include <linux/sprintf.h>
 
 #include <drm/drm_debugfs.h>
 #include <drm/drm_managed.h>
diff --git a/drivers/gpu/drm/xe/xe_gt_freq.c b/drivers/gpu/drm/xe/xe_gt_freq.c
index e5b0f4ecdbe8..324798bedd53 100644
--- a/drivers/gpu/drm/xe/xe_gt_freq.c
+++ b/drivers/gpu/drm/xe/xe_gt_freq.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_gt_freq.h"
+#include <linux/kstrtox.h>
 
 #include <linux/kobject.h>
 #include <linux/sysfs.h>
diff --git a/drivers/gpu/drm/xe/xe_gt_idle.c b/drivers/gpu/drm/xe/xe_gt_idle.c
index 9358f7336889..28437d4766be 100644
--- a/drivers/gpu/drm/xe/xe_gt_idle.c
+++ b/drivers/gpu/drm/xe/xe_gt_idle.c
@@ -4,6 +4,7 @@
  */
 
 #include <drm/drm_managed.h>
+#include <linux/sprintf.h>
 
 #include "xe_device.h"
 #include "xe_gt.h"
diff --git a/drivers/gpu/drm/xe/xe_gt_pagefault.c b/drivers/gpu/drm/xe/xe_gt_pagefault.c
index 73f08f1924df..0b8baaeebb1e 100644
--- a/drivers/gpu/drm/xe/xe_gt_pagefault.c
+++ b/drivers/gpu/drm/xe/xe_gt_pagefault.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_gt_pagefault.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/bitfield.h>
 #include <linux/circ_buf.h>
diff --git a/drivers/gpu/drm/xe/xe_gt_tlb_invalidation.c b/drivers/gpu/drm/xe/xe_gt_tlb_invalidation.c
index 7eef23a00d77..dc96d6f3e63a 100644
--- a/drivers/gpu/drm/xe/xe_gt_tlb_invalidation.c
+++ b/drivers/gpu/drm/xe/xe_gt_tlb_invalidation.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_gt_tlb_invalidation.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "abi/guc_actions_abi.h"
 #include "xe_device.h"
diff --git a/drivers/gpu/drm/xe/xe_guc.c b/drivers/gpu/drm/xe/xe_guc.c
index 0a61390c64a7..b8ee56682eb1 100644
--- a/drivers/gpu/drm/xe/xe_guc.c
+++ b/drivers/gpu/drm/xe/xe_guc.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_guc.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_managed.h>
 
diff --git a/drivers/gpu/drm/xe/xe_guc_ct.h b/drivers/gpu/drm/xe/xe_guc_ct.h
index f15f8a4857e0..31b2fbe4c264 100644
--- a/drivers/gpu/drm/xe/xe_guc_ct.h
+++ b/drivers/gpu/drm/xe/xe_guc_ct.h
@@ -8,6 +8,8 @@
 
 #include "xe_guc_ct_types.h"
 
+#include <linux/workqueue.h>
+
 struct drm_printer;
 
 int xe_guc_ct_init(struct xe_guc_ct *ct);
diff --git a/drivers/gpu/drm/xe/xe_guc_hwconfig.c b/drivers/gpu/drm/xe/xe_guc_hwconfig.c
index 2a13a00917f8..1f34a776dd3c 100644
--- a/drivers/gpu/drm/xe/xe_guc_hwconfig.c
+++ b/drivers/gpu/drm/xe/xe_guc_hwconfig.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_guc_hwconfig.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_managed.h>
 
diff --git a/drivers/gpu/drm/xe/xe_guc_submit.c b/drivers/gpu/drm/xe/xe_guc_submit.c
index 54ffcfcdd41f..697f1ad02b02 100644
--- a/drivers/gpu/drm/xe/xe_guc_submit.c
+++ b/drivers/gpu/drm/xe/xe_guc_submit.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_guc_submit.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/bitfield.h>
 #include <linux/bitmap.h>
diff --git a/drivers/gpu/drm/xe/xe_hw_engine_class_sysfs.c b/drivers/gpu/drm/xe/xe_hw_engine_class_sysfs.c
index e49bc14f0ecf..00e3b6e01b01 100644
--- a/drivers/gpu/drm/xe/xe_hw_engine_class_sysfs.c
+++ b/drivers/gpu/drm/xe/xe_hw_engine_class_sysfs.c
@@ -5,6 +5,8 @@
 
 #include <drm/drm_managed.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include "xe_gt.h"
diff --git a/drivers/gpu/drm/xe/xe_hw_fence.c b/drivers/gpu/drm/xe/xe_hw_fence.c
index a5de3e7b0bd6..64f23c457256 100644
--- a/drivers/gpu/drm/xe/xe_hw_fence.c
+++ b/drivers/gpu/drm/xe/xe_hw_fence.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_hw_fence.h"
+#include <linux/sprintf.h>
 
 #include <linux/device.h>
 #include <linux/slab.h>
diff --git a/drivers/gpu/drm/xe/xe_hwmon.c b/drivers/gpu/drm/xe/xe_hwmon.c
index 174ed2185481..fab1d3ae7ebe 100644
--- a/drivers/gpu/drm/xe/xe_hwmon.c
+++ b/drivers/gpu/drm/xe/xe_hwmon.c
@@ -5,6 +5,7 @@
 
 #include <linux/hwmon-sysfs.h>
 #include <linux/hwmon.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 
 #include <drm/drm_managed.h>
diff --git a/drivers/gpu/drm/xe/xe_lrc.c b/drivers/gpu/drm/xe/xe_lrc.c
index 0ec5ad2539f1..59a90665b2f0 100644
--- a/drivers/gpu/drm/xe/xe_lrc.c
+++ b/drivers/gpu/drm/xe/xe_lrc.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_lrc.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "instructions/xe_mi_commands.h"
 #include "instructions/xe_gfxpipe_commands.h"
diff --git a/drivers/gpu/drm/xe/xe_migrate.c b/drivers/gpu/drm/xe/xe_migrate.c
index 70480c305602..612238b19e10 100644
--- a/drivers/gpu/drm/xe/xe_migrate.c
+++ b/drivers/gpu/drm/xe/xe_migrate.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_migrate.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/bitfield.h>
 #include <linux/sizes.h>
diff --git a/drivers/gpu/drm/xe/xe_pci.c b/drivers/gpu/drm/xe/xe_pci.c
index dcc5ded1558e..97bca25b2d25 100644
--- a/drivers/gpu/drm/xe/xe_pci.c
+++ b/drivers/gpu/drm/xe/xe_pci.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_pci.h"
+#include <linux/kstrtox.h>
 
 #include <kunit/static_stub.h>
 #include <linux/device/driver.h>
diff --git a/drivers/gpu/drm/xe/xe_query.c b/drivers/gpu/drm/xe/xe_query.c
index 7e924faeeea0..cfaa9fc38a61 100644
--- a/drivers/gpu/drm/xe/xe_query.c
+++ b/drivers/gpu/drm/xe/xe_query.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_query.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <linux/nospec.h>
 #include <linux/sched/clock.h>
diff --git a/drivers/gpu/drm/xe/xe_ring_ops.c b/drivers/gpu/drm/xe/xe_ring_ops.c
index 1e4c06eacd98..25fe65ae397f 100644
--- a/drivers/gpu/drm/xe/xe_ring_ops.c
+++ b/drivers/gpu/drm/xe/xe_ring_ops.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_ring_ops.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "generated/xe_wa_oob.h"
 #include "instructions/xe_mi_commands.h"
diff --git a/drivers/gpu/drm/xe/xe_sync.c b/drivers/gpu/drm/xe/xe_sync.c
index aab92bee1d7c..1ff03b98209e 100644
--- a/drivers/gpu/drm/xe/xe_sync.c
+++ b/drivers/gpu/drm/xe/xe_sync.c
@@ -4,8 +4,10 @@
  */
 
 #include "xe_sync.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/dma-fence-array.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/kthread.h>
 #include <linux/sched/mm.h>
 #include <linux/uaccess.h>
diff --git a/drivers/gpu/drm/xe/xe_uc_fw.c b/drivers/gpu/drm/xe/xe_uc_fw.c
index 9dff96dfe455..ab256448c8ca 100644
--- a/drivers/gpu/drm/xe/xe_uc_fw.c
+++ b/drivers/gpu/drm/xe/xe_uc_fw.c
@@ -5,6 +5,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <drm/drm_managed.h>
 
diff --git a/drivers/gpu/drm/xe/xe_vm.c b/drivers/gpu/drm/xe/xe_vm.c
index 865e10d0a06a..9738c9006b87 100644
--- a/drivers/gpu/drm/xe/xe_vm.c
+++ b/drivers/gpu/drm/xe/xe_vm.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_vm.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <linux/dma-fence-array.h>
 #include <linux/nospec.h>
diff --git a/drivers/gpu/drm/xe/xe_wait_user_fence.c b/drivers/gpu/drm/xe/xe_wait_user_fence.c
index a75eeba7bfe5..a1b813c16092 100644
--- a/drivers/gpu/drm/xe/xe_wait_user_fence.c
+++ b/drivers/gpu/drm/xe/xe_wait_user_fence.c
@@ -4,6 +4,7 @@
  */
 
 #include "xe_wait_user_fence.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include <drm/drm_device.h>
 #include <drm/drm_file.h>
diff --git a/drivers/gpu/drm/xen/xen_drm_front.c b/drivers/gpu/drm/xen/xen_drm_front.c
index aab79c5e34c2..f0e2de0ff566 100644
--- a/drivers/gpu/drm/xen/xen_drm_front.c
+++ b/drivers/gpu/drm/xen/xen_drm_front.c
@@ -11,6 +11,7 @@
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <drm/drm_atomic_helper.h>
 #include <drm/drm_drv.h>
diff --git a/drivers/gpu/drm/xen/xen_drm_front_evtchnl.c b/drivers/gpu/drm/xen/xen_drm_front_evtchnl.c
index e52afd792346..beff5de10e0e 100644
--- a/drivers/gpu/drm/xen/xen_drm_front_evtchnl.c
+++ b/drivers/gpu/drm/xen/xen_drm_front_evtchnl.c
@@ -10,6 +10,7 @@
 
 #include <linux/errno.h>
 #include <linux/irq.h>
+#include <linux/completion.h>
 
 #include <drm/drm_print.h>
 
diff --git a/drivers/gpu/drm/xlnx/zynqmp_disp.c b/drivers/gpu/drm/xlnx/zynqmp_disp.c
index 8a39b3accce5..ff18fb420208 100644
--- a/drivers/gpu/drm/xlnx/zynqmp_disp.c
+++ b/drivers/gpu/drm/xlnx/zynqmp_disp.c
@@ -13,6 +13,7 @@
 #include <drm/drm_fourcc.h>
 #include <drm/drm_framebuffer.h>
 #include <drm/drm_plane.h>
+#include <linux/sprintf.h>
 
 #include <linux/clk.h>
 #include <linux/dma/xilinx_dpdma.h>
diff --git a/drivers/gpu/drm/xlnx/zynqmp_dp.c b/drivers/gpu/drm/xlnx/zynqmp_dp.c
index 9f48e5bbcdec..a0ffd7d8ced5 100644
--- a/drivers/gpu/drm/xlnx/zynqmp_dp.c
+++ b/drivers/gpu/drm/xlnx/zynqmp_dp.c
@@ -17,6 +17,7 @@
 #include <drm/drm_fourcc.h>
 #include <drm/drm_modes.h>
 #include <drm/drm_of.h>
+#include <linux/sprintf.h>
 
 #include <linux/clk.h>
 #include <linux/delay.h>
diff --git a/drivers/gpu/host1x/cdma.c b/drivers/gpu/host1x/cdma.c
index d1336e438f4f..9af271fc5a98 100644
--- a/drivers/gpu/host1x/cdma.c
+++ b/drivers/gpu/host1x/cdma.c
@@ -7,6 +7,7 @@
 
 
 #include <asm/cacheflush.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
 #include <linux/host1x.h>
diff --git a/drivers/gpu/host1x/debug.c b/drivers/gpu/host1x/debug.c
index a18cc8d8caf5..4c3a9bef0167 100644
--- a/drivers/gpu/host1x/debug.c
+++ b/drivers/gpu/host1x/debug.c
@@ -9,6 +9,7 @@
 #include <linux/debugfs.h>
 #include <linux/pm_runtime.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <linux/io.h>
diff --git a/drivers/gpu/host1x/dev.c b/drivers/gpu/host1x/dev.c
index 42fd504abbcd..f1982ca900aa 100644
--- a/drivers/gpu/host1x/dev.c
+++ b/drivers/gpu/host1x/dev.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <soc/tegra/common.h>
 
diff --git a/drivers/gpu/host1x/hw/cdma_hw.c b/drivers/gpu/host1x/hw/cdma_hw.c
index 1b65a10b9dfc..fde7f4439a8a 100644
--- a/drivers/gpu/host1x/hw/cdma_hw.c
+++ b/drivers/gpu/host1x/hw/cdma_hw.c
@@ -8,6 +8,7 @@
 #include <linux/slab.h>
 #include <linux/scatterlist.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "../cdma.h"
 #include "../channel.h"
diff --git a/drivers/gpu/host1x/hw/channel_hw.c b/drivers/gpu/host1x/hw/channel_hw.c
index d44b8de890be..abe19e4185c3 100644
--- a/drivers/gpu/host1x/hw/channel_hw.c
+++ b/drivers/gpu/host1x/hw/channel_hw.c
@@ -7,6 +7,7 @@
 
 #include <linux/host1x.h>
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
 
 #include <trace/events/host1x.h>
diff --git a/drivers/gpu/host1x/mipi.c b/drivers/gpu/host1x/mipi.c
index 4dcec535ec21..064cc7d3a6bc 100644
--- a/drivers/gpu/host1x/mipi.c
+++ b/drivers/gpu/host1x/mipi.c
@@ -24,6 +24,7 @@
 #include <linux/host1x.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
diff --git a/drivers/gpu/host1x/syncpt.c b/drivers/gpu/host1x/syncpt.c
index f63d14a57a1d..b9a3ec2ca5aa 100644
--- a/drivers/gpu/host1x/syncpt.c
+++ b/drivers/gpu/host1x/syncpt.c
@@ -9,6 +9,7 @@
 #include <linux/device.h>
 #include <linux/dma-fence.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <trace/events/host1x.h>
 
diff --git a/drivers/gpu/ipu-v3/ipu-image-convert.c b/drivers/gpu/ipu-v3/ipu-image-convert.c
index 841316582ea9..9033f2dddc2f 100644
--- a/drivers/gpu/ipu-v3/ipu-image-convert.c
+++ b/drivers/gpu/ipu-v3/ipu-image-convert.c
@@ -8,6 +8,7 @@
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
 #include <linux/math.h>
+#include <linux/completion.h>
 
 #include <video/imx-ipu-image-convert.h>
 
diff --git a/drivers/greybus/bundle.c b/drivers/greybus/bundle.c
index 84660729538b..d4e8f59c4189 100644
--- a/drivers/greybus/bundle.c
+++ b/drivers/greybus/bundle.c
@@ -8,6 +8,7 @@
 
 #include <linux/greybus.h>
 #include "greybus_trace.h"
+#include <linux/sprintf.h>
 
 static ssize_t bundle_class_show(struct device *dev,
 				 struct device_attribute *attr, char *buf)
diff --git a/drivers/greybus/connection.c b/drivers/greybus/connection.c
index 9c88861986c8..1f20315b50e6 100644
--- a/drivers/greybus/connection.c
+++ b/drivers/greybus/connection.c
@@ -8,6 +8,7 @@
 
 #include <linux/workqueue.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 
 #include "greybus_trace.h"
 
diff --git a/drivers/greybus/control.c b/drivers/greybus/control.c
index 359a25841973..080133c0aec8 100644
--- a/drivers/greybus/control.c
+++ b/drivers/greybus/control.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 
 /* Highest control-protocol version supported */
 #define GB_CONTROL_VERSION_MAJOR	0
diff --git a/drivers/greybus/es2.c b/drivers/greybus/es2.c
index e89cca015095..b987910cab35 100644
--- a/drivers/greybus/es2.c
+++ b/drivers/greybus/es2.c
@@ -7,12 +7,15 @@
  */
 #include <linux/kthread.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/kfifo.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/greybus.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "arpc.h"
 #include "greybus_trace.h"
diff --git a/drivers/greybus/hd.c b/drivers/greybus/hd.c
index 72b21bf2d7d3..cce3d1fbdc92 100644
--- a/drivers/greybus/hd.c
+++ b/drivers/greybus/hd.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 
 #include "greybus_trace.h"
 
diff --git a/drivers/greybus/interface.c b/drivers/greybus/interface.c
index 9ec949a438ef..d46547487f02 100644
--- a/drivers/greybus/interface.c
+++ b/drivers/greybus/interface.c
@@ -8,6 +8,9 @@
 
 #include <linux/delay.h>
 #include <linux/greybus.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "greybus_trace.h"
 
diff --git a/drivers/greybus/module.c b/drivers/greybus/module.c
index 36f77f9e1d74..2534ba40537a 100644
--- a/drivers/greybus/module.c
+++ b/drivers/greybus/module.c
@@ -8,6 +8,8 @@
 
 #include <linux/greybus.h>
 #include "greybus_trace.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static ssize_t eject_store(struct device *dev,
 			   struct device_attribute *attr,
diff --git a/drivers/greybus/operation.c b/drivers/greybus/operation.c
index 8459e9bc0749..d1c7de8f0005 100644
--- a/drivers/greybus/operation.c
+++ b/drivers/greybus/operation.c
@@ -13,6 +13,7 @@
 #include <linux/wait.h>
 #include <linux/workqueue.h>
 #include <linux/greybus.h>
+#include <linux/completion.h>
 
 #include "greybus_trace.h"
 
diff --git a/drivers/greybus/svc.c b/drivers/greybus/svc.c
index 0d7e749174a4..427accfcccca 100644
--- a/drivers/greybus/svc.c
+++ b/drivers/greybus/svc.c
@@ -8,6 +8,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/greybus.h>
 
diff --git a/drivers/hid/amd-sfh-hid/amd_sfh_hid.c b/drivers/hid/amd-sfh-hid/amd_sfh_hid.c
index 705b52337068..308b0b2cc412 100644
--- a/drivers/hid/amd-sfh-hid/amd_sfh_hid.c
+++ b/drivers/hid/amd-sfh-hid/amd_sfh_hid.c
@@ -8,6 +8,7 @@
  *	    Basavaraj Natikar <Basavaraj.Natikar@amd.com>
  */
 #include <linux/hid.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/sched.h>
 
diff --git a/drivers/hid/hid-bigbenff.c b/drivers/hid/hid-bigbenff.c
index a02cb517b4c4..4a6f29757bec 100644
--- a/drivers/hid/hid-bigbenff.c
+++ b/drivers/hid/hid-bigbenff.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/leds.h>
 #include <linux/hid.h>
+#include <linux/sprintf.h>
 
 #include "hid-ids.h"
 
diff --git a/drivers/hid/hid-core.c b/drivers/hid/hid-core.c
index de7a477d6665..f0fdd4cae9c0 100644
--- a/drivers/hid/hid-core.c
+++ b/drivers/hid/hid-core.c
@@ -23,6 +23,7 @@
 #include <asm/unaligned.h>
 #include <asm/byteorder.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/vmalloc.h>
 #include <linux/sched.h>
diff --git a/drivers/hid/hid-corsair.c b/drivers/hid/hid-corsair.c
index 8c895c820b67..f969a7f41bec 100644
--- a/drivers/hid/hid-corsair.c
+++ b/drivers/hid/hid-corsair.c
@@ -17,7 +17,9 @@
  */
 
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/leds.h>
 
diff --git a/drivers/hid/hid-cp2112.c b/drivers/hid/hid-cp2112.c
index 20a0d1315d90..2910e2728375 100644
--- a/drivers/hid/hid-cp2112.c
+++ b/drivers/hid/hid-cp2112.c
@@ -23,6 +23,7 @@
 #include <linux/i2c.h>
 #include <linux/module.h>
 #include <linux/nls.h>
+#include <linux/sprintf.h>
 #include <linux/string_choices.h>
 #include <linux/usb/ch9.h>
 #include "hid-ids.h"
diff --git a/drivers/hid/hid-debug.c b/drivers/hid/hid-debug.c
index 7dd83ec74f8a..c4044de0d253 100644
--- a/drivers/hid/hid-debug.c
+++ b/drivers/hid/hid-debug.c
@@ -22,6 +22,7 @@
 #include <linux/sched/signal.h>
 #include <linux/export.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/poll.h>
 
diff --git a/drivers/hid/hid-ft260.c b/drivers/hid/hid-ft260.c
index 333341e80b0e..12f4d6c8b14b 100644
--- a/drivers/hid/hid-ft260.c
+++ b/drivers/hid/hid-ft260.c
@@ -9,9 +9,11 @@
  */
 
 #include "hid-ids.h"
+#include <linux/completion.h>
 #include <linux/hidraw.h>
 #include <linux/i2c.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #ifdef DEBUG
diff --git a/drivers/hid/hid-glorious.c b/drivers/hid/hid-glorious.c
index 281b3a7187ce..117c2cca57de 100644
--- a/drivers/hid/hid-glorious.c
+++ b/drivers/hid/hid-glorious.c
@@ -11,6 +11,7 @@
 
 #include <linux/hid.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "hid-ids.h"
 
diff --git a/drivers/hid/hid-gt683r.c b/drivers/hid/hid-gt683r.c
index 29ccb0accfba..fafa2ad3039b 100644
--- a/drivers/hid/hid-gt683r.c
+++ b/drivers/hid/hid-gt683r.c
@@ -8,8 +8,10 @@
 #include <linux/device.h>
 #include <linux/hid.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "hid-ids.h"
 
diff --git a/drivers/hid/hid-hyperv.c b/drivers/hid/hid-hyperv.c
index f33485d83d24..0ea08e5e6085 100644
--- a/drivers/hid/hid-hyperv.c
+++ b/drivers/hid/hid-hyperv.c
@@ -12,6 +12,7 @@
 #include <linux/hid.h>
 #include <linux/hiddev.h>
 #include <linux/hyperv.h>
+#include <linux/sprintf.h>
 
 
 struct hv_input_dev_info {
diff --git a/drivers/hid/hid-input.c b/drivers/hid/hid-input.c
index c8b20d44b147..3f9a155cd166 100644
--- a/drivers/hid/hid-input.c
+++ b/drivers/hid/hid-input.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 #include <linux/hid.h>
 #include <linux/hid-debug.h>
diff --git a/drivers/hid/hid-led.c b/drivers/hid/hid-led.c
index 7d82f8d426bb..ccc39dd20dbb 100644
--- a/drivers/hid/hid-led.c
+++ b/drivers/hid/hid-led.c
@@ -12,6 +12,7 @@
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include "hid-ids.h"
 
diff --git a/drivers/hid/hid-lenovo.c b/drivers/hid/hid-lenovo.c
index f86c1ea83a03..2dd9cdf85d99 100644
--- a/drivers/hid/hid-lenovo.c
+++ b/drivers/hid/hid-lenovo.c
@@ -25,10 +25,12 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/device.h>
 #include <linux/hid.h>
 #include <linux/input.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/hid/hid-lg-g15.c b/drivers/hid/hid-lg-g15.c
index acbec1dcf196..16f7d1e8dec1 100644
--- a/drivers/hid/hid-lg-g15.c
+++ b/drivers/hid/hid-lg-g15.c
@@ -7,10 +7,12 @@
 
 #include <linux/device.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/random.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/wait.h>
 
diff --git a/drivers/hid/hid-lg4ff.c b/drivers/hid/hid-lg4ff.c
index e3fcf1353fb3..dd8630f87906 100644
--- a/drivers/hid/hid-lg4ff.c
+++ b/drivers/hid/hid-lg4ff.c
@@ -13,6 +13,8 @@
 
 
 #include <linux/input.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/hid.h>
 
diff --git a/drivers/hid/hid-logitech-dj.c b/drivers/hid/hid-logitech-dj.c
index e6a8b6d8eab7..382a256dc75f 100644
--- a/drivers/hid/hid-logitech-dj.c
+++ b/drivers/hid/hid-logitech-dj.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/kfifo.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h> /* For to_usb_interface for kvm extra intf check */
 #include <asm/unaligned.h>
 #include "hid-ids.h"
diff --git a/drivers/hid/hid-logitech-hidpp.c b/drivers/hid/hid-logitech-hidpp.c
index d2f3f234f29d..6d0ca09d75d5 100644
--- a/drivers/hid/hid-logitech-hidpp.c
+++ b/drivers/hid/hid-logitech-hidpp.c
@@ -12,6 +12,8 @@
 
 #include <linux/device.h>
 #include <linux/input.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/hid.h>
 #include <linux/module.h>
diff --git a/drivers/hid/hid-magicmouse.c b/drivers/hid/hid-magicmouse.c
index a46ff4e8b99f..32057426baba 100644
--- a/drivers/hid/hid-magicmouse.c
+++ b/drivers/hid/hid-magicmouse.c
@@ -14,6 +14,7 @@
 #include <linux/device.h>
 #include <linux/hid.h>
 #include <linux/input/mt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/workqueue.h>
diff --git a/drivers/hid/hid-mcp2221.c b/drivers/hid/hid-mcp2221.c
index f9cceaeffd08..99c6eca4bc89 100644
--- a/drivers/hid/hid-mcp2221.c
+++ b/drivers/hid/hid-mcp2221.c
@@ -19,6 +19,7 @@
 #include <linux/gpio/driver.h>
 #include <linux/iio/iio.h>
 #include "hid-ids.h"
+#include <linux/sprintf.h>
 
 /* Commands codes in a raw output report */
 enum {
diff --git a/drivers/hid/hid-multitouch.c b/drivers/hid/hid-multitouch.c
index fd5b0637dad6..c43fb768d89b 100644
--- a/drivers/hid/hid-multitouch.c
+++ b/drivers/hid/hid-multitouch.c
@@ -33,10 +33,12 @@
 
 #include <linux/device.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/input/mt.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 
diff --git a/drivers/hid/hid-ntrig.c b/drivers/hid/hid-ntrig.c
index b5d26f03fe6b..b4b5211d36b7 100644
--- a/drivers/hid/hid-ntrig.c
+++ b/drivers/hid/hid-ntrig.c
@@ -11,6 +11,8 @@
 
 #include <linux/device.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include "usbhid/usbhid.h"
 #include <linux/module.h>
diff --git a/drivers/hid/hid-nvidia-shield.c b/drivers/hid/hid-nvidia-shield.c
index 58b15750dbb0..422e01ccf0bd 100644
--- a/drivers/hid/hid-nvidia-shield.c
+++ b/drivers/hid/hid-nvidia-shield.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/power_supply.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/hid/hid-picolcd_core.c b/drivers/hid/hid-picolcd_core.c
index bbda231a7ce3..855d0f4e504c 100644
--- a/drivers/hid/hid-picolcd_core.c
+++ b/drivers/hid/hid-picolcd_core.c
@@ -11,6 +11,8 @@
 #include <linux/hid-debug.h>
 #include <linux/input.h>
 #include "hid-ids.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/fb.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/hid/hid-picolcd_debugfs.c b/drivers/hid/hid-picolcd_debugfs.c
index d01176da8896..0c759e3326da 100644
--- a/drivers/hid/hid-picolcd_debugfs.c
+++ b/drivers/hid/hid-picolcd_debugfs.c
@@ -9,6 +9,7 @@
 
 #include <linux/hid.h>
 #include <linux/hid-debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/fb.h>
 #include <linux/seq_file.h>
diff --git a/drivers/hid/hid-picolcd_fb.c b/drivers/hid/hid-picolcd_fb.c
index d7dddd99d325..5d80a5543290 100644
--- a/drivers/hid/hid-picolcd_fb.c
+++ b/drivers/hid/hid-picolcd_fb.c
@@ -8,6 +8,7 @@
  ***************************************************************************/
 
 #include <linux/hid.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <linux/fb.h>
diff --git a/drivers/hid/hid-picolcd_leds.c b/drivers/hid/hid-picolcd_leds.c
index 6b505a753511..622d0dcea31b 100644
--- a/drivers/hid/hid-picolcd_leds.c
+++ b/drivers/hid/hid-picolcd_leds.c
@@ -11,6 +11,7 @@
 #include <linux/hid-debug.h>
 #include <linux/input.h>
 #include "hid-ids.h"
+#include <linux/sprintf.h>
 
 #include <linux/fb.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/hid/hid-playstation.c b/drivers/hid/hid-playstation.c
index 8ac8f7b8e317..6c0516a3a9d7 100644
--- a/drivers/hid/hid-playstation.c
+++ b/drivers/hid/hid-playstation.c
@@ -14,6 +14,7 @@
 #include <linux/leds.h>
 #include <linux/led-class-multicolor.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <asm/unaligned.h>
 
diff --git a/drivers/hid/hid-prodikeys.c b/drivers/hid/hid-prodikeys.c
index c16d2ba6ea16..6cc451f5aa61 100644
--- a/drivers/hid/hid-prodikeys.c
+++ b/drivers/hid/hid-prodikeys.c
@@ -16,6 +16,7 @@
 
 #include <linux/device.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/mutex.h>
 #include <linux/hid.h>
diff --git a/drivers/hid/hid-quirks.c b/drivers/hid/hid-quirks.c
index e0bbf0c6345d..203d31682e03 100644
--- a/drivers/hid/hid-quirks.c
+++ b/drivers/hid/hid-quirks.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/mutex.h>
 #include <linux/input/elan-i2c-ids.h>
+#include <linux/sprintf.h>
 
 #include "hid-ids.h"
 
diff --git a/drivers/hid/hid-roccat-arvo.c b/drivers/hid/hid-roccat-arvo.c
index d55aaabab1ed..91d35c105ba9 100644
--- a/drivers/hid/hid-roccat-arvo.c
+++ b/drivers/hid/hid-roccat-arvo.c
@@ -16,6 +16,7 @@
 #include <linux/device.h>
 #include <linux/input.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/hid-roccat.h>
diff --git a/drivers/hid/hid-roccat-isku.c b/drivers/hid/hid-roccat-isku.c
index 458060403397..6c3cf37b8958 100644
--- a/drivers/hid/hid-roccat-isku.c
+++ b/drivers/hid/hid-roccat-isku.c
@@ -16,12 +16,14 @@
 #include <linux/device.h>
 #include <linux/input.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/hid-roccat.h>
 #include "hid-ids.h"
 #include "hid-roccat-common.h"
 #include "hid-roccat-isku.h"
+#include <linux/sprintf.h>
 
 static void isku_profile_activated(struct isku_device *isku, uint new_profile)
 {
diff --git a/drivers/hid/hid-roccat-kone.c b/drivers/hid/hid-roccat-kone.c
index 00a1abc7e839..ab1718f4b972 100644
--- a/drivers/hid/hid-roccat-kone.c
+++ b/drivers/hid/hid-roccat-kone.c
@@ -25,12 +25,14 @@
 #include <linux/device.h>
 #include <linux/input.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/hid-roccat.h>
 #include "hid-ids.h"
 #include "hid-roccat-common.h"
 #include "hid-roccat-kone.h"
+#include <linux/sprintf.h>
 
 static uint profile_numbers[5] = {0, 1, 2, 3, 4};
 
diff --git a/drivers/hid/hid-roccat-koneplus.c b/drivers/hid/hid-roccat-koneplus.c
index 22b895436a7c..b455837c35bb 100644
--- a/drivers/hid/hid-roccat-koneplus.c
+++ b/drivers/hid/hid-roccat-koneplus.c
@@ -17,12 +17,14 @@
 #include <linux/device.h>
 #include <linux/input.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/hid-roccat.h>
 #include "hid-ids.h"
 #include "hid-roccat-common.h"
 #include "hid-roccat-koneplus.h"
+#include <linux/sprintf.h>
 
 static uint profile_numbers[5] = {0, 1, 2, 3, 4};
 
diff --git a/drivers/hid/hid-roccat-kovaplus.c b/drivers/hid/hid-roccat-kovaplus.c
index 86af538c10d6..ea94b9aa3a62 100644
--- a/drivers/hid/hid-roccat-kovaplus.c
+++ b/drivers/hid/hid-roccat-kovaplus.c
@@ -15,12 +15,14 @@
 #include <linux/device.h>
 #include <linux/input.h>
 #include <linux/hid.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/hid-roccat.h>
 #include "hid-ids.h"
 #include "hid-roccat-common.h"
 #include "hid-roccat-kovaplus.h"
+#include <linux/sprintf.h>
 
 static uint profile_numbers[5] = {0, 1, 2, 3, 4};
 
diff --git a/drivers/hid/hid-roccat-pyra.c b/drivers/hid/hid-roccat-pyra.c
index 5663b9cd9c69..f6f0b2884fe2 100644
--- a/drivers/hid/hid-roccat-pyra.c
+++ b/drivers/hid/hid-roccat-pyra.c
@@ -23,6 +23,7 @@
 #include "hid-ids.h"
 #include "hid-roccat-common.h"
 #include "hid-roccat-pyra.h"
+#include <linux/sprintf.h>
 
 static uint profile_numbers[5] = {0, 1, 2, 3, 4};
 
diff --git a/drivers/hid/hid-sensor-custom.c b/drivers/hid/hid-sensor-custom.c
index d85398721659..a10fafaa0b0d 100644
--- a/drivers/hid/hid-sensor-custom.c
+++ b/drivers/hid/hid-sensor-custom.c
@@ -7,11 +7,13 @@
 #include <linux/ctype.h>
 #include <linux/dmi.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/miscdevice.h>
 #include <linux/kfifo.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/poll.h>
 #include <linux/bsearch.h>
diff --git a/drivers/hid/hid-sensor-hub.c b/drivers/hid/hid-sensor-hub.c
index 26e93a331a51..e7178316234f 100644
--- a/drivers/hid/hid-sensor-hub.c
+++ b/drivers/hid/hid-sensor-hub.c
@@ -13,6 +13,7 @@
 #include <linux/hid-sensor-ids.h>
 #include <linux/hid-sensor-hub.h>
 #include "hid-ids.h"
+#include <linux/completion.h>
 
 #define HID_SENSOR_HUB_ENUM_QUIRK	0x01
 
diff --git a/drivers/hid/hid-sony.c b/drivers/hid/hid-sony.c
index ebc0aa4e4345..44090a9aacf9 100644
--- a/drivers/hid/hid-sony.c
+++ b/drivers/hid/hid-sony.c
@@ -38,6 +38,7 @@
 #include <linux/idr.h>
 #include <linux/input/mt.h>
 #include <linux/crc32.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/timer.h>
 #include <asm/unaligned.h>
diff --git a/drivers/hid/hid-steelseries.c b/drivers/hid/hid-steelseries.c
index b3edadf42d6d..a280656bfc45 100644
--- a/drivers/hid/hid-steelseries.c
+++ b/drivers/hid/hid-steelseries.c
@@ -12,6 +12,7 @@
 #include <linux/device.h>
 #include <linux/hid.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/leds.h>
 
diff --git a/drivers/hid/hid-u2fzero.c b/drivers/hid/hid-u2fzero.c
index 744a91e6e78c..8133e99601c3 100644
--- a/drivers/hid/hid-u2fzero.c
+++ b/drivers/hid/hid-u2fzero.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/usb.h>
+#include <linux/completion.h>
 
 #include "usbhid/usbhid.h"
 #include "hid-ids.h"
diff --git a/drivers/hid/hid-uclogic-params.c b/drivers/hid/hid-uclogic-params.c
index 9859dad36495..7d46af62d558 100644
--- a/drivers/hid/hid-uclogic-params.c
+++ b/drivers/hid/hid-uclogic-params.c
@@ -18,6 +18,7 @@
 #include "usbhid/usbhid.h"
 #include "hid-ids.h"
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <asm/unaligned.h>
 
diff --git a/drivers/hid/hid-wiimote-core.c b/drivers/hid/hid-wiimote-core.c
index 26167cfb696f..5f0c62847150 100644
--- a/drivers/hid/hid-wiimote-core.c
+++ b/drivers/hid/hid-wiimote-core.c
@@ -16,6 +16,7 @@
 #include <linux/spinlock.h>
 #include "hid-ids.h"
 #include "hid-wiimote.h"
+#include <linux/sprintf.h>
 
 /* output queue handling */
 
diff --git a/drivers/hid/hid-wiimote-debug.c b/drivers/hid/hid-wiimote-debug.c
index 00f9be55f148..8a76e66312bb 100644
--- a/drivers/hid/hid-wiimote-debug.c
+++ b/drivers/hid/hid-wiimote-debug.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/seq_file.h>
 #include <linux/spinlock.h>
diff --git a/drivers/hid/hid-wiimote-modules.c b/drivers/hid/hid-wiimote-modules.c
index dbccdfa63916..ceca203ea44e 100644
--- a/drivers/hid/hid-wiimote-modules.c
+++ b/drivers/hid/hid-wiimote-modules.c
@@ -35,6 +35,7 @@
 #include <linux/input.h>
 #include <linux/spinlock.h>
 #include "hid-wiimote.h"
+#include <linux/sprintf.h>
 
 /*
  * Keys
diff --git a/drivers/hid/i2c-hid/i2c-hid-core.c b/drivers/hid/i2c-hid/i2c-hid-core.c
index 2df1ab3c31cc..12d7d149afe5 100644
--- a/drivers/hid/i2c-hid/i2c-hid-core.c
+++ b/drivers/hid/i2c-hid/i2c-hid-core.c
@@ -28,6 +28,7 @@
 #include <linux/pm.h>
 #include <linux/pm_wakeirq.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/err.h>
 #include <linux/string.h>
diff --git a/drivers/hid/intel-ish-hid/ipc/pci-ish.c b/drivers/hid/intel-ish-hid/ipc/pci-ish.c
index 65e7eeb2fa64..bb66bade8a83 100644
--- a/drivers/hid/intel-ish-hid/ipc/pci-ish.c
+++ b/drivers/hid/intel-ish-hid/ipc/pci-ish.c
@@ -12,6 +12,7 @@
 #include <linux/device.h>
 #include <linux/fs.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/sched.h>
diff --git a/drivers/hid/intel-ish-hid/ishtp-fw-loader.c b/drivers/hid/intel-ish-hid/ishtp-fw-loader.c
index e157863a8b25..3588e6e35363 100644
--- a/drivers/hid/intel-ish-hid/ishtp-fw-loader.c
+++ b/drivers/hid/intel-ish-hid/ishtp-fw-loader.c
@@ -11,6 +11,7 @@
 #include <linux/intel-ish-client-if.h>
 #include <linux/property.h>
 #include <asm/cacheflush.h>
+#include <linux/sprintf.h>
 
 /* Number of times we attempt to load the firmware before giving up */
 #define MAX_LOAD_ATTEMPTS			3
diff --git a/drivers/hid/intel-ish-hid/ishtp-hid.c b/drivers/hid/intel-ish-hid/ishtp-hid.c
index 00c6f0ebf356..f5a7ade37060 100644
--- a/drivers/hid/intel-ish-hid/ishtp-hid.c
+++ b/drivers/hid/intel-ish-hid/ishtp-hid.c
@@ -7,6 +7,7 @@
 
 #include <linux/hid.h>
 #include <linux/intel-ish-client-if.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/input.h>
 #include "ishtp-hid.h"
 
diff --git a/drivers/hid/intel-ish-hid/ishtp/bus.c b/drivers/hid/intel-ish-hid/ishtp/bus.c
index aa6cb033bb06..3a284a349cf7 100644
--- a/drivers/hid/intel-ish-hid/ishtp/bus.c
+++ b/drivers/hid/intel-ish-hid/ishtp/bus.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/device.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
@@ -15,6 +16,7 @@
 #include "ishtp-dev.h"
 #include "client.h"
 #include "hbm.h"
+#include <linux/sprintf.h>
 
 static int ishtp_use_dma;
 module_param_named(ishtp_use_dma, ishtp_use_dma, int, 0600);
diff --git a/drivers/hid/surface-hid/surface_hid_core.c b/drivers/hid/surface-hid/surface_hid_core.c
index a3e9cceddfac..7a2ea94c0389 100644
--- a/drivers/hid/surface-hid/surface_hid_core.c
+++ b/drivers/hid/surface-hid/surface_hid_core.c
@@ -11,6 +11,7 @@
 #include <linux/hid.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/usb/ch9.h>
 
diff --git a/drivers/hid/usbhid/hid-core.c b/drivers/hid/usbhid/hid-core.c
index a90ed2ceae84..5ed105487735 100644
--- a/drivers/hid/usbhid/hid-core.c
+++ b/drivers/hid/usbhid/hid-core.c
@@ -23,6 +23,7 @@
 #include <asm/unaligned.h>
 #include <asm/byteorder.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/workqueue.h>
 #include <linux/string.h>
diff --git a/drivers/hid/usbhid/hiddev.c b/drivers/hid/usbhid/hiddev.c
index 59cf3ddfdf78..8bd0a13e9050 100644
--- a/drivers/hid/usbhid/hiddev.c
+++ b/drivers/hid/usbhid/hiddev.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/hid.h>
 #include <linux/hiddev.h>
diff --git a/drivers/hid/usbhid/usbkbd.c b/drivers/hid/usbhid/usbkbd.c
index c439ed2f16db..5248ca827ef3 100644
--- a/drivers/hid/usbhid/usbkbd.c
+++ b/drivers/hid/usbhid/usbkbd.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 #include <linux/hid.h>
 
diff --git a/drivers/hid/usbhid/usbmouse.c b/drivers/hid/usbhid/usbmouse.c
index 3fd93c2e4f4a..86ce469da8e4 100644
--- a/drivers/hid/usbhid/usbmouse.c
+++ b/drivers/hid/usbhid/usbmouse.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 #include <linux/hid.h>
 
diff --git a/drivers/hid/wacom_sys.c b/drivers/hid/wacom_sys.c
index 2bc45b24075c..6c10e5b5cae0 100644
--- a/drivers/hid/wacom_sys.c
+++ b/drivers/hid/wacom_sys.c
@@ -6,6 +6,8 @@
 #include "wacom_wac.h"
 #include "wacom.h"
 #include <linux/input/mt.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define WAC_MSG_RETRIES		5
 #define WAC_CMD_RETRIES		10
diff --git a/drivers/hsi/controllers/omap_ssi_port.c b/drivers/hsi/controllers/omap_ssi_port.c
index c78d9c9f7371..58ae8195e161 100644
--- a/drivers/hsi/controllers/omap_ssi_port.c
+++ b/drivers/hsi/controllers/omap_ssi_port.c
@@ -12,6 +12,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/pm_runtime.h>
 #include <linux/delay.h>
+#include <linux/completion.h>
 
 #include <linux/gpio/consumer.h>
 #include <linux/pinctrl/consumer.h>
diff --git a/drivers/hsi/hsi_core.c b/drivers/hsi/hsi_core.c
index e3beeac8aee5..ad76635498f6 100644
--- a/drivers/hsi/hsi_core.c
+++ b/drivers/hsi/hsi_core.c
@@ -11,6 +11,7 @@
 #include <linux/list.h>
 #include <linux/kobject.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/notifier.h>
 #include <linux/of.h>
diff --git a/drivers/hte/hte.c b/drivers/hte/hte.c
index 23a6eeb8c506..48cc4b3c219a 100644
--- a/drivers/hte/hte.c
+++ b/drivers/hte/hte.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/hte.h>
 #include <linux/delay.h>
diff --git a/drivers/hv/channel.c b/drivers/hv/channel.c
index 56f7e06c673e..5d3cac726127 100644
--- a/drivers/hv/channel.c
+++ b/drivers/hv/channel.c
@@ -20,6 +20,7 @@
 #include <linux/set_memory.h>
 #include <asm/page.h>
 #include <asm/mshyperv.h>
+#include <linux/completion.h>
 
 #include "hyperv_vmbus.h"
 
diff --git a/drivers/hv/connection.c b/drivers/hv/connection.c
index 3cabeeabb1ca..dd91ab9e6b11 100644
--- a/drivers/hv/connection.c
+++ b/drivers/hv/connection.c
@@ -22,6 +22,7 @@
 #include <linux/io.h>
 #include <linux/set_memory.h>
 #include <asm/mshyperv.h>
+#include <linux/completion.h>
 
 #include "hyperv_vmbus.h"
 
diff --git a/drivers/hv/hv_balloon.c b/drivers/hv/hv_balloon.c
index e000fa3b9f97..ab6311a3536d 100644
--- a/drivers/hv/hv_balloon.c
+++ b/drivers/hv/hv_balloon.c
@@ -9,6 +9,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/cleanup.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/jiffies.h>
 #include <linux/mman.h>
diff --git a/drivers/hv/hv_kvp.c b/drivers/hv/hv_kvp.c
index d35b60c06114..6711e0b357be 100644
--- a/drivers/hv/hv_kvp.c
+++ b/drivers/hv/hv_kvp.c
@@ -25,6 +25,7 @@
 #include <linux/net.h>
 #include <linux/nls.h>
 #include <linux/connector.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/hyperv.h>
 #include <asm/hyperv-tlfs.h>
diff --git a/drivers/hv/hv_utils_transport.c b/drivers/hv/hv_utils_transport.c
index 832885198643..5f00d948e675 100644
--- a/drivers/hv/hv_utils_transport.c
+++ b/drivers/hv/hv_utils_transport.c
@@ -8,6 +8,7 @@
 #include <linux/slab.h>
 #include <linux/fs.h>
 #include <linux/poll.h>
+#include <linux/completion.h>
 
 #include "hyperv_vmbus.h"
 #include "hv_utils_transport.h"
diff --git a/drivers/hv/vmbus_drv.c b/drivers/hv/vmbus_drv.c
index b33d5abd9beb..478e0a417eea 100644
--- a/drivers/hv/vmbus_drv.c
+++ b/drivers/hv/vmbus_drv.c
@@ -14,6 +14,7 @@
 #include <linux/device.h>
 #include <linux/platform_device.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/slab.h>
 #include <linux/acpi.h>
diff --git a/drivers/hwmon/abituguru.c b/drivers/hwmon/abituguru.c
index 93653ea05430..3983aaa4c316 100644
--- a/drivers/hwmon/abituguru.c
+++ b/drivers/hwmon/abituguru.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/sched.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/mutex.h>
@@ -23,6 +24,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/dmi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 /* Banks */
 #define ABIT_UGURU_ALARM_BANK			0x20 /* 1x 3 bytes */
diff --git a/drivers/hwmon/abituguru3.c b/drivers/hwmon/abituguru3.c
index 4501f0e49efb..db0e7dc1936c 100644
--- a/drivers/hwmon/abituguru3.c
+++ b/drivers/hwmon/abituguru3.c
@@ -25,6 +25,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/dmi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 /* uGuru3 bank addresses */
 #define ABIT_UGURU3_SETTINGS_BANK		0x01
diff --git a/drivers/hwmon/acpi_power_meter.c b/drivers/hwmon/acpi_power_meter.c
index 703666b95bf4..2d63e99ace2b 100644
--- a/drivers/hwmon/acpi_power_meter.c
+++ b/drivers/hwmon/acpi_power_meter.c
@@ -10,11 +10,13 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/dmi.h>
 #include <linux/slab.h>
 #include <linux/kdev_t.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/err.h>
 #include <linux/acpi.h>
diff --git a/drivers/hwmon/ad7314.c b/drivers/hwmon/ad7314.c
index 7802bbf5f958..a2fae6255175 100644
--- a/drivers/hwmon/ad7314.c
+++ b/drivers/hwmon/ad7314.c
@@ -9,6 +9,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/spi/spi.h>
 #include <linux/module.h>
diff --git a/drivers/hwmon/ad7414.c b/drivers/hwmon/ad7414.c
index 7f1bef59046f..04861331c63c 100644
--- a/drivers/hwmon/ad7414.c
+++ b/drivers/hwmon/ad7414.c
@@ -21,7 +21,9 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 
diff --git a/drivers/hwmon/ad7418.c b/drivers/hwmon/ad7418.c
index 4829f83ff52e..dfcf1f33e76a 100644
--- a/drivers/hwmon/ad7418.c
+++ b/drivers/hwmon/ad7418.c
@@ -15,10 +15,12 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "lm75.h"
 
diff --git a/drivers/hwmon/adc128d818.c b/drivers/hwmon/adc128d818.c
index 46e3c8c50765..7b8d83de489f 100644
--- a/drivers/hwmon/adc128d818.c
+++ b/drivers/hwmon/adc128d818.c
@@ -16,10 +16,12 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/regulator/consumer.h>
 #include <linux/mutex.h>
 #include <linux/bitops.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan
  * The chip also supports addresses 0x35..0x37. Don't scan those addresses
diff --git a/drivers/hwmon/adcxx.c b/drivers/hwmon/adcxx.c
index de37bce24fa6..f56b706fa58a 100644
--- a/drivers/hwmon/adcxx.c
+++ b/drivers/hwmon/adcxx.c
@@ -22,11 +22,13 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
diff --git a/drivers/hwmon/adm1021.c b/drivers/hwmon/adm1021.c
index 7c15398ebb37..ffc93600cef1 100644
--- a/drivers/hwmon/adm1021.c
+++ b/drivers/hwmon/adm1021.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -15,6 +16,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 
 /* Addresses to scan */
diff --git a/drivers/hwmon/adm1025.c b/drivers/hwmon/adm1025.c
index 389382d54752..c53ad126367c 100644
--- a/drivers/hwmon/adm1025.c
+++ b/drivers/hwmon/adm1025.c
@@ -34,6 +34,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -42,6 +43,7 @@
 #include <linux/hwmon-vid.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /*
  * Addresses to scan
diff --git a/drivers/hwmon/adm1026.c b/drivers/hwmon/adm1026.c
index 581d8edf70ea..93617cf21225 100644
--- a/drivers/hwmon/adm1026.c
+++ b/drivers/hwmon/adm1026.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -20,6 +21,7 @@
 #include <linux/hwmon-vid.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x2c, 0x2d, 0x2e, I2C_CLIENT_END };
diff --git a/drivers/hwmon/adm1029.c b/drivers/hwmon/adm1029.c
index 9a465f3f71c8..54455ddf6cba 100644
--- a/drivers/hwmon/adm1029.c
+++ b/drivers/hwmon/adm1029.c
@@ -14,6 +14,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -21,6 +22,7 @@
 #include <linux/hwmon.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /*
  * Addresses to scan
diff --git a/drivers/hwmon/adm1031.c b/drivers/hwmon/adm1031.c
index 88c7e0d62d08..c0bf83d8b410 100644
--- a/drivers/hwmon/adm1031.c
+++ b/drivers/hwmon/adm1031.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -17,6 +18,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Following macros takes channel parameter starting from 0 to 2 */
 #define ADM1031_REG_FAN_SPEED(nr)	(0x08 + (nr))
diff --git a/drivers/hwmon/adm9240.c b/drivers/hwmon/adm9240.c
index 6dfbeb6acf00..bb64feaec9d4 100644
--- a/drivers/hwmon/adm9240.c
+++ b/drivers/hwmon/adm9240.c
@@ -30,6 +30,7 @@
 
 #include <linux/bits.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
@@ -39,6 +40,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x2c, 0x2d, 0x2e, 0x2f,
diff --git a/drivers/hwmon/ads7828.c b/drivers/hwmon/ads7828.c
index 809e830f52a6..36bb46b9d0cf 100644
--- a/drivers/hwmon/ads7828.c
+++ b/drivers/hwmon/ads7828.c
@@ -23,6 +23,7 @@
 #include <linux/regmap.h>
 #include <linux/slab.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 /* The ADS7828 registers */
 #define ADS7828_CMD_SD_SE	0x80	/* Single ended inputs */
diff --git a/drivers/hwmon/ads7871.c b/drivers/hwmon/ads7871.c
index 5434c37969d7..53a5ea5c2a99 100644
--- a/drivers/hwmon/ads7871.c
+++ b/drivers/hwmon/ads7871.c
@@ -59,6 +59,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #define DEVICE_NAME	"ads7871"
 
diff --git a/drivers/hwmon/adt7411.c b/drivers/hwmon/adt7411.c
index 45fe4e8aae4e..c2e88153b072 100644
--- a/drivers/hwmon/adt7411.c
+++ b/drivers/hwmon/adt7411.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/err.h>
@@ -17,6 +18,7 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define ADT7411_REG_STAT_1			0x00
 #define ADT7411_STAT_1_INT_TEMP_HIGH		BIT(0)
diff --git a/drivers/hwmon/adt7462.c b/drivers/hwmon/adt7462.c
index 429566c4245d..30573a2cf691 100644
--- a/drivers/hwmon/adt7462.c
+++ b/drivers/hwmon/adt7462.c
@@ -12,9 +12,11 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/log2.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x58, 0x5C, I2C_CLIENT_END };
diff --git a/drivers/hwmon/adt7470.c b/drivers/hwmon/adt7470.c
index c4b3a4a18670..006491a3a482 100644
--- a/drivers/hwmon/adt7470.c
+++ b/drivers/hwmon/adt7470.c
@@ -14,6 +14,7 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/delay.h>
 #include <linux/log2.h>
@@ -21,6 +22,7 @@
 #include <linux/regmap.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 
 /* Addresses to scan */
diff --git a/drivers/hwmon/adt7475.c b/drivers/hwmon/adt7475.c
index 4224ffb30483..51bda5c7793a 100644
--- a/drivers/hwmon/adt7475.c
+++ b/drivers/hwmon/adt7475.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
@@ -19,6 +20,7 @@
 #include <linux/err.h>
 #include <linux/jiffies.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 
 /* Indexes for the sysfs hooks */
diff --git a/drivers/hwmon/amc6821.c b/drivers/hwmon/amc6821.c
index 2a7a4b6b0094..775bacca6de1 100644
--- a/drivers/hwmon/amc6821.c
+++ b/drivers/hwmon/amc6821.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>	/* Needed for KERN_INFO */
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
@@ -18,6 +19,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /*
  * Addresses to scan.
diff --git a/drivers/hwmon/applesmc.c b/drivers/hwmon/applesmc.c
index fc6d6a9053ce..150180bf3d20 100644
--- a/drivers/hwmon/applesmc.c
+++ b/drivers/hwmon/applesmc.c
@@ -18,11 +18,13 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/input.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/dmi.h>
 #include <linux/mutex.h>
diff --git a/drivers/hwmon/aquacomputer_d5next.c b/drivers/hwmon/aquacomputer_d5next.c
index 2efe97f8d003..931602ec40fc 100644
--- a/drivers/hwmon/aquacomputer_d5next.c
+++ b/drivers/hwmon/aquacomputer_d5next.c
@@ -23,6 +23,7 @@
 #include <linux/mutex.h>
 #include <linux/seq_file.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #define USB_VENDOR_ID_AQUACOMPUTER	0x0c70
 #define USB_PRODUCT_ID_AQUAERO		0xf001
diff --git a/drivers/hwmon/asb100.c b/drivers/hwmon/asb100.c
index 974521e9b6b4..8147cdb9a60d 100644
--- a/drivers/hwmon/asb100.c
+++ b/drivers/hwmon/asb100.c
@@ -34,8 +34,10 @@
 #include <linux/err.h>
 #include <linux/init.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include "lm75.h"
+#include <linux/sprintf.h>
 
 /* I2C addresses to scan */
 static const unsigned short normal_i2c[] = { 0x2d, I2C_CLIENT_END };
diff --git a/drivers/hwmon/asc7621.c b/drivers/hwmon/asc7621.c
index 87e186700849..5041723b5743 100644
--- a/drivers/hwmon/asc7621.c
+++ b/drivers/hwmon/asc7621.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -13,6 +14,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = {
diff --git a/drivers/hwmon/aspeed-pwm-tacho.c b/drivers/hwmon/aspeed-pwm-tacho.c
index 4acc1858d8ac..d4b69887d87e 100644
--- a/drivers/hwmon/aspeed-pwm-tacho.c
+++ b/drivers/hwmon/aspeed-pwm-tacho.c
@@ -11,11 +11,13 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/thermal.h>
 
diff --git a/drivers/hwmon/asus_atk0110.c b/drivers/hwmon/asus_atk0110.c
index d778a2aaefec..9fe83e962898 100644
--- a/drivers/hwmon/asus_atk0110.c
+++ b/drivers/hwmon/asus_atk0110.c
@@ -17,6 +17,7 @@
 #include <linux/jiffies.h>
 #include <linux/err.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #define ATK_HID "ATK0110"
 
diff --git a/drivers/hwmon/asus_rog_ryujin.c b/drivers/hwmon/asus_rog_ryujin.c
index f8b20346a995..11ed8415c8d4 100644
--- a/drivers/hwmon/asus_rog_ryujin.c
+++ b/drivers/hwmon/asus_rog_ryujin.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #define DRIVER_NAME	"asus_rog_ryujin"
 
diff --git a/drivers/hwmon/atxp1.c b/drivers/hwmon/atxp1.c
index d1de020abec6..697f6dd5ca6d 100644
--- a/drivers/hwmon/atxp1.c
+++ b/drivers/hwmon/atxp1.c
@@ -10,6 +10,7 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -18,6 +19,7 @@
 #include <linux/err.h>
 #include <linux/kstrtox.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 
diff --git a/drivers/hwmon/axi-fan-control.c b/drivers/hwmon/axi-fan-control.c
index 19b9bf3d75ef..a9533454a01c 100644
--- a/drivers/hwmon/axi-fan-control.c
+++ b/drivers/hwmon/axi-fan-control.c
@@ -12,9 +12,11 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 /* register map */
 #define ADI_REG_RSTN		0x0080
diff --git a/drivers/hwmon/coretemp.c b/drivers/hwmon/coretemp.c
index 30402de2c889..1ff6b4e68a12 100644
--- a/drivers/hwmon/coretemp.c
+++ b/drivers/hwmon/coretemp.c
@@ -10,10 +10,12 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/idr.h>
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/hwmon.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
diff --git a/drivers/hwmon/corsair-cpro.c b/drivers/hwmon/corsair-cpro.c
index a284a02839fb..1c3b8a21dada 100644
--- a/drivers/hwmon/corsair-cpro.c
+++ b/drivers/hwmon/corsair-cpro.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #define USB_VENDOR_ID_CORSAIR			0x1b1c
diff --git a/drivers/hwmon/corsair-psu.c b/drivers/hwmon/corsair-psu.c
index 2c7c92272fe3..419ced443228 100644
--- a/drivers/hwmon/corsair-psu.c
+++ b/drivers/hwmon/corsair-psu.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 /*
diff --git a/drivers/hwmon/da9052-hwmon.c b/drivers/hwmon/da9052-hwmon.c
index 2bd7ae8100d7..666f6dc81db2 100644
--- a/drivers/hwmon/da9052-hwmon.c
+++ b/drivers/hwmon/da9052-hwmon.c
@@ -16,6 +16,8 @@
 #include <linux/slab.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/da9052/da9052.h>
 #include <linux/mfd/da9052/reg.h>
diff --git a/drivers/hwmon/da9055-hwmon.c b/drivers/hwmon/da9055-hwmon.c
index 7652d553b8ea..278a5dac7bc8 100644
--- a/drivers/hwmon/da9055-hwmon.c
+++ b/drivers/hwmon/da9055-hwmon.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/da9055/core.h>
 #include <linux/mfd/da9055/reg.h>
diff --git a/drivers/hwmon/dell-smm-hwmon.c b/drivers/hwmon/dell-smm-hwmon.c
index 6d8c0f328b7b..302ffebbf72f 100644
--- a/drivers/hwmon/dell-smm-hwmon.c
+++ b/drivers/hwmon/dell-smm-hwmon.c
@@ -31,6 +31,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/thermal.h>
 #include <linux/types.h>
diff --git a/drivers/hwmon/dme1737.c b/drivers/hwmon/dme1737.c
index 3dcef221041d..ecb0bb956edb 100644
--- a/drivers/hwmon/dme1737.c
+++ b/drivers/hwmon/dme1737.c
@@ -16,6 +16,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -27,6 +28,7 @@
 #include <linux/mutex.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 /* ISA device, if found */
 static struct platform_device *pdev;
diff --git a/drivers/hwmon/ds1621.c b/drivers/hwmon/ds1621.c
index bffbc8040171..06535d14cfc1 100644
--- a/drivers/hwmon/ds1621.c
+++ b/drivers/hwmon/ds1621.c
@@ -23,6 +23,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -30,6 +31,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/kernel.h>
 
diff --git a/drivers/hwmon/ds620.c b/drivers/hwmon/ds620.c
index 4fc4df012fac..7f1e92f5c470 100644
--- a/drivers/hwmon/ds620.c
+++ b/drivers/hwmon/ds620.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -16,6 +17,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/platform_data/ds620.h>
 
diff --git a/drivers/hwmon/emc1403.c b/drivers/hwmon/emc1403.c
index d370efd6f986..a849b7ef33c8 100644
--- a/drivers/hwmon/emc1403.c
+++ b/drivers/hwmon/emc1403.c
@@ -11,11 +11,13 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/mutex.h>
 #include <linux/regmap.h>
diff --git a/drivers/hwmon/emc2103.c b/drivers/hwmon/emc2103.c
index b59472bbe5bf..84cade38be15 100644
--- a/drivers/hwmon/emc2103.c
+++ b/drivers/hwmon/emc2103.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -13,6 +14,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Addresses scanned */
 static const unsigned short normal_i2c[] = { 0x2E, I2C_CLIENT_END };
diff --git a/drivers/hwmon/emc6w201.c b/drivers/hwmon/emc6w201.c
index 9a4f868bf1e6..6cae6a205dc4 100644
--- a/drivers/hwmon/emc6w201.c
+++ b/drivers/hwmon/emc6w201.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -13,6 +14,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /*
  * Addresses to scan
diff --git a/drivers/hwmon/f71805f.c b/drivers/hwmon/f71805f.c
index 243c570dee4c..9168b82ec5ae 100644
--- a/drivers/hwmon/f71805f.c
+++ b/drivers/hwmon/f71805f.c
@@ -19,6 +19,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
@@ -26,6 +27,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/ioport.h>
 #include <linux/acpi.h>
diff --git a/drivers/hwmon/f71882fg.c b/drivers/hwmon/f71882fg.c
index 7c941d320a18..bd4817268132 100644
--- a/drivers/hwmon/f71882fg.c
+++ b/drivers/hwmon/f71882fg.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
@@ -18,6 +19,7 @@
 #include <linux/mutex.h>
 #include <linux/io.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #define DRVNAME "f71882fg"
 
diff --git a/drivers/hwmon/f75375s.c b/drivers/hwmon/f75375s.c
index 8c572bb64f5d..e686a5ceb65e 100644
--- a/drivers/hwmon/f75375s.c
+++ b/drivers/hwmon/f75375s.c
@@ -22,9 +22,11 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/i2c.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/f75375s.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x2d, 0x2e, I2C_CLIENT_END };
diff --git a/drivers/hwmon/fam15h_power.c b/drivers/hwmon/fam15h_power.c
index 6307112c2c0c..78893509903b 100644
--- a/drivers/hwmon/fam15h_power.c
+++ b/drivers/hwmon/fam15h_power.c
@@ -10,11 +10,13 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/bitops.h>
 #include <linux/cpu.h>
 #include <linux/cpumask.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/sched.h>
 #include <linux/topology.h>
diff --git a/drivers/hwmon/fschmd.c b/drivers/hwmon/fschmd.c
index b30512a705a7..b42e08917d3b 100644
--- a/drivers/hwmon/fschmd.c
+++ b/drivers/hwmon/fschmd.c
@@ -21,6 +21,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -28,6 +29,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/dmi.h>
 #include <linux/fs.h>
diff --git a/drivers/hwmon/g760a.c b/drivers/hwmon/g760a.c
index b5edee00267b..4fec89013631 100644
--- a/drivers/hwmon/g760a.c
+++ b/drivers/hwmon/g760a.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -18,6 +19,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 enum g760a_regs {
diff --git a/drivers/hwmon/g762.c b/drivers/hwmon/g762.c
index fad69ef56c75..762386bb42ae 100644
--- a/drivers/hwmon/g762.c
+++ b/drivers/hwmon/g762.c
@@ -28,6 +28,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/jiffies.h>
@@ -40,6 +41,7 @@
 #include <linux/clk.h>
 #include <linux/of.h>
 #include <linux/platform_data/g762.h>
+#include <linux/sprintf.h>
 
 #define DRVNAME "g762"
 
diff --git a/drivers/hwmon/gigabyte_waterforce.c b/drivers/hwmon/gigabyte_waterforce.c
index 8129d7b3ceaf..1bff4ac4296a 100644
--- a/drivers/hwmon/gigabyte_waterforce.c
+++ b/drivers/hwmon/gigabyte_waterforce.c
@@ -12,6 +12,8 @@
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME	"gigabyte_waterforce"
 
diff --git a/drivers/hwmon/gl518sm.c b/drivers/hwmon/gl518sm.c
index 03db6158b13a..8671d7ec83ea 100644
--- a/drivers/hwmon/gl518sm.c
+++ b/drivers/hwmon/gl518sm.c
@@ -21,6 +21,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -28,6 +29,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 /* Addresses to scan */
diff --git a/drivers/hwmon/gl520sm.c b/drivers/hwmon/gl520sm.c
index 8bbc6a4f2928..7b9c6a5fb480 100644
--- a/drivers/hwmon/gl520sm.c
+++ b/drivers/hwmon/gl520sm.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -17,6 +18,7 @@
 #include <linux/hwmon-vid.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 /* Type of the extra sensor */
diff --git a/drivers/hwmon/gpio-fan.c b/drivers/hwmon/gpio-fan.c
index d92c536be9af..3c80eb4b3355 100644
--- a/drivers/hwmon/gpio-fan.c
+++ b/drivers/hwmon/gpio-fan.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
@@ -20,6 +21,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 
 struct gpio_fan_speed {
diff --git a/drivers/hwmon/gsc-hwmon.c b/drivers/hwmon/gsc-hwmon.c
index 1501ceb551e7..7d00e723fc23 100644
--- a/drivers/hwmon/gsc-hwmon.c
+++ b/drivers/hwmon/gsc-hwmon.c
@@ -6,12 +6,14 @@
  */
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/gsc.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_data/gsc_hwmon.h>
 
diff --git a/drivers/hwmon/hih6130.c b/drivers/hwmon/hih6130.c
index a9726b5370fb..f5b88753e3fe 100644
--- a/drivers/hwmon/hih6130.c
+++ b/drivers/hwmon/hih6130.c
@@ -21,6 +21,7 @@
 #include <linux/device.h>
 #include <linux/delay.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 /**
  * struct hih6130 - HIH-6130 device specific data
diff --git a/drivers/hwmon/hp-wmi-sensors.c b/drivers/hwmon/hp-wmi-sensors.c
index b5325d0e72b9..dccb3d2dbd5b 100644
--- a/drivers/hwmon/hp-wmi-sensors.c
+++ b/drivers/hwmon/hp-wmi-sensors.c
@@ -27,6 +27,7 @@
 #include <linux/jiffies.h>
 #include <linux/mutex.h>
 #include <linux/nls.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 #include <linux/wmi.h>
 
diff --git a/drivers/hwmon/hwmon.c b/drivers/hwmon/hwmon.c
index 3b259c425ab7..cb739819ff4f 100644
--- a/drivers/hwmon/hwmon.c
+++ b/drivers/hwmon/hwmon.c
@@ -15,12 +15,14 @@
 #include <linux/gfp.h>
 #include <linux/hwmon.h>
 #include <linux/idr.h>
+#include <linux/kobject.h>
 #include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/thermal.h>
 
diff --git a/drivers/hwmon/i5k_amb.c b/drivers/hwmon/i5k_amb.c
index ff48913fe6bf..2791099b8abc 100644
--- a/drivers/hwmon/i5k_amb.c
+++ b/drivers/hwmon/i5k_amb.c
@@ -11,11 +11,13 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/log2.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define DRVNAME "i5k_amb"
 
diff --git a/drivers/hwmon/ibmaem.c b/drivers/hwmon/ibmaem.c
index 157e232aace0..d064598215fc 100644
--- a/drivers/hwmon/ibmaem.c
+++ b/drivers/hwmon/ibmaem.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/ipmi.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
@@ -22,8 +23,10 @@
 #include <linux/sched.h>
 #include <linux/platform_device.h>
 #include <linux/math64.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/err.h>
+#include <linux/completion.h>
 
 #define REFRESH_INTERVAL	(HZ)
 #define IPMI_TIMEOUT		(30 * HZ)
diff --git a/drivers/hwmon/ibmpex.c b/drivers/hwmon/ibmpex.c
index db066b368918..f39a62030cb0 100644
--- a/drivers/hwmon/ibmpex.c
+++ b/drivers/hwmon/ibmpex.c
@@ -13,7 +13,11 @@
 #include <linux/jiffies.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/device.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
+#include <linux/completion.h>
 
 #define REFRESH_INTERVAL	(2 * HZ)
 #define DRVNAME			"ibmpex"
diff --git a/drivers/hwmon/ibmpowernv.c b/drivers/hwmon/ibmpowernv.c
index 70ca833259ab..e8d2f8f69aba 100644
--- a/drivers/hwmon/ibmpowernv.c
+++ b/drivers/hwmon/ibmpowernv.c
@@ -8,12 +8,14 @@
 #define pr_fmt(fmt)	DRVNAME ": " fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_device.h>
 #include <asm/opal.h>
diff --git a/drivers/hwmon/iio_hwmon.c b/drivers/hwmon/iio_hwmon.c
index 4c8a80847891..6c5596734b00 100644
--- a/drivers/hwmon/iio_hwmon.c
+++ b/drivers/hwmon/iio_hwmon.c
@@ -11,6 +11,7 @@
 #include <linux/err.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
diff --git a/drivers/hwmon/ina209.c b/drivers/hwmon/ina209.c
index d9b57a4b3e41..76b77b365184 100644
--- a/drivers/hwmon/ina209.c
+++ b/drivers/hwmon/ina209.c
@@ -18,6 +18,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/err.h>
diff --git a/drivers/hwmon/ina2xx.c b/drivers/hwmon/ina2xx.c
index d8415d1f21fc..5cf80ff8c2aa 100644
--- a/drivers/hwmon/ina2xx.c
+++ b/drivers/hwmon/ina2xx.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/err.h>
diff --git a/drivers/hwmon/ina3221.c b/drivers/hwmon/ina3221.c
index 2c9530b6f192..9d2ebdaed68b 100644
--- a/drivers/hwmon/ina3221.c
+++ b/drivers/hwmon/ina3221.c
@@ -10,11 +10,13 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 
 #define INA3221_DRIVER_NAME		"ina3221"
diff --git a/drivers/hwmon/it87.c b/drivers/hwmon/it87.c
index fbe86cec6055..5a7566bced49 100644
--- a/drivers/hwmon/it87.c
+++ b/drivers/hwmon/it87.c
@@ -44,6 +44,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/bitops.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
@@ -54,6 +55,7 @@
 #include <linux/hwmon-vid.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/string.h>
 #include <linux/dmi.h>
diff --git a/drivers/hwmon/lm63.c b/drivers/hwmon/lm63.c
index 0878a044dd8e..95204252dba4 100644
--- a/drivers/hwmon/lm63.c
+++ b/drivers/hwmon/lm63.c
@@ -26,6 +26,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -34,6 +35,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
 
diff --git a/drivers/hwmon/lm70.c b/drivers/hwmon/lm70.c
index c20a749fc7f2..c5e5060d9e9e 100644
--- a/drivers/hwmon/lm70.c
+++ b/drivers/hwmon/lm70.c
@@ -18,6 +18,7 @@
 #include <linux/kernel.h>
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/hwmon.h>
 #include <linux/mutex.h>
diff --git a/drivers/hwmon/lm73.c b/drivers/hwmon/lm73.c
index 637d35c5ae23..a296130664f8 100644
--- a/drivers/hwmon/lm73.c
+++ b/drivers/hwmon/lm73.c
@@ -18,6 +18,7 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 
 
 /* Addresses scanned */
diff --git a/drivers/hwmon/lm77.c b/drivers/hwmon/lm77.c
index 8b9862519178..e1e3cedf7e47 100644
--- a/drivers/hwmon/lm77.c
+++ b/drivers/hwmon/lm77.c
@@ -14,6 +14,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -21,6 +22,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x48, 0x49, 0x4a, 0x4b,
diff --git a/drivers/hwmon/lm78.c b/drivers/hwmon/lm78.c
index b739c354311b..aa9b8071d89d 100644
--- a/drivers/hwmon/lm78.c
+++ b/drivers/hwmon/lm78.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -18,6 +19,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_ISA
 #include <linux/platform_device.h>
diff --git a/drivers/hwmon/lm80.c b/drivers/hwmon/lm80.c
index 63c7831bd3e1..230c2e4307b7 100644
--- a/drivers/hwmon/lm80.c
+++ b/drivers/hwmon/lm80.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -17,6 +18,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x28, 0x29, 0x2a, 0x2b, 0x2c, 0x2d,
diff --git a/drivers/hwmon/lm85.c b/drivers/hwmon/lm85.c
index 68c210002357..06616f9e011a 100644
--- a/drivers/hwmon/lm85.c
+++ b/drivers/hwmon/lm85.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -22,6 +23,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 
 /* Addresses to scan */
diff --git a/drivers/hwmon/lm87.c b/drivers/hwmon/lm87.c
index 2195a735d28e..ab23b4144c77 100644
--- a/drivers/hwmon/lm87.c
+++ b/drivers/hwmon/lm87.c
@@ -45,6 +45,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -54,6 +55,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 /*
  * Addresses to scan
diff --git a/drivers/hwmon/lm90.c b/drivers/hwmon/lm90.c
index e0d7454a301c..f3a4377e51d0 100644
--- a/drivers/hwmon/lm90.c
+++ b/drivers/hwmon/lm90.c
@@ -109,6 +109,7 @@
 #include <linux/of.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 /* The maximum number of channels currently supported */
diff --git a/drivers/hwmon/lm92.c b/drivers/hwmon/lm92.c
index 46579a3e1715..ac725f7c78f3 100644
--- a/drivers/hwmon/lm92.c
+++ b/drivers/hwmon/lm92.c
@@ -29,6 +29,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
@@ -36,6 +37,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 /*
  * The LM92 and MAX6635 have 2 two-state pins for address selection,
diff --git a/drivers/hwmon/lm93.c b/drivers/hwmon/lm93.c
index 75bca805720e..eda6d41f41f6 100644
--- a/drivers/hwmon/lm93.c
+++ b/drivers/hwmon/lm93.c
@@ -27,6 +27,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
@@ -35,6 +36,7 @@
 #include <linux/err.h>
 #include <linux/delay.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 /* LM93 REGISTER ADDRESSES */
 
diff --git a/drivers/hwmon/lm95234.c b/drivers/hwmon/lm95234.c
index 67b9d7636ee4..473fccfc9626 100644
--- a/drivers/hwmon/lm95234.c
+++ b/drivers/hwmon/lm95234.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -17,6 +18,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #define DRVNAME "lm95234"
diff --git a/drivers/hwmon/ltc2945.c b/drivers/hwmon/ltc2945.c
index 45b87a863cae..179352a9e379 100644
--- a/drivers/hwmon/ltc2945.c
+++ b/drivers/hwmon/ltc2945.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/slab.h>
diff --git a/drivers/hwmon/ltc2947-core.c b/drivers/hwmon/ltc2947-core.c
index d2ff6e700770..e3deff48bc34 100644
--- a/drivers/hwmon/ltc2947-core.c
+++ b/drivers/hwmon/ltc2947-core.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include "ltc2947.h"
 
diff --git a/drivers/hwmon/max1111.c b/drivers/hwmon/max1111.c
index 5cc08c720b52..28aca0e207ca 100644
--- a/drivers/hwmon/max1111.c
+++ b/drivers/hwmon/max1111.c
@@ -18,6 +18,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/spi/spi.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 enum chips { max1110, max1111, max1112, max1113 };
 
diff --git a/drivers/hwmon/max16065.c b/drivers/hwmon/max16065.c
index aa38c45adc09..da72ef21dc65 100644
--- a/drivers/hwmon/max16065.c
+++ b/drivers/hwmon/max16065.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/err.h>
diff --git a/drivers/hwmon/max1619.c b/drivers/hwmon/max1619.c
index 500dc926a7a7..d11800d23025 100644
--- a/drivers/hwmon/max1619.c
+++ b/drivers/hwmon/max1619.c
@@ -14,6 +14,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -21,6 +22,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 static const unsigned short normal_i2c[] = {
diff --git a/drivers/hwmon/max1668.c b/drivers/hwmon/max1668.c
index c4a02edefbee..3ddb61a5026a 100644
--- a/drivers/hwmon/max1668.c
+++ b/drivers/hwmon/max1668.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -15,6 +16,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short max1668_addr_list[] = {
diff --git a/drivers/hwmon/max197.c b/drivers/hwmon/max197.c
index bb30403f81ca..b7c454a4b3dd 100644
--- a/drivers/hwmon/max197.c
+++ b/drivers/hwmon/max197.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/init.h>
@@ -16,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/mutex.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
diff --git a/drivers/hwmon/max31722.c b/drivers/hwmon/max31722.c
index 9a31ef388396..e75b19f92ff5 100644
--- a/drivers/hwmon/max31722.c
+++ b/drivers/hwmon/max31722.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 #define MAX31722_REG_CFG				0x00
 #define MAX31722_REG_TEMP_LSB				0x01
diff --git a/drivers/hwmon/max31760.c b/drivers/hwmon/max31760.c
index 127e31ca3c87..dff04d7bb281 100644
--- a/drivers/hwmon/max31760.c
+++ b/drivers/hwmon/max31760.c
@@ -6,7 +6,9 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 
 #define REG_CR1		0x00
diff --git a/drivers/hwmon/max31827.c b/drivers/hwmon/max31827.c
index f8a13b30f100..31a50048036a 100644
--- a/drivers/hwmon/max31827.c
+++ b/drivers/hwmon/max31827.c
@@ -10,10 +10,12 @@
 #include <linux/delay.h>
 #include <linux/hwmon.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/of_device.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #define MAX31827_T_REG			0x0
 #define MAX31827_CONFIGURATION_REG	0x2
diff --git a/drivers/hwmon/max6639.c b/drivers/hwmon/max6639.c
index aa7f21ab2395..6358825a6d05 100644
--- a/drivers/hwmon/max6639.c
+++ b/drivers/hwmon/max6639.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -20,6 +21,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/platform_data/max6639.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x2c, 0x2e, 0x2f, I2C_CLIENT_END };
diff --git a/drivers/hwmon/max6642.c b/drivers/hwmon/max6642.c
index 8b2e4d6101a2..04cf29ad4875 100644
--- a/drivers/hwmon/max6642.c
+++ b/drivers/hwmon/max6642.c
@@ -21,6 +21,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -28,6 +29,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 static const unsigned short normal_i2c[] = {
diff --git a/drivers/hwmon/max6650.c b/drivers/hwmon/max6650.c
index 9649c6611d5f..98fac655f0e8 100644
--- a/drivers/hwmon/max6650.c
+++ b/drivers/hwmon/max6650.c
@@ -27,6 +27,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 
 /*
diff --git a/drivers/hwmon/max6697.c b/drivers/hwmon/max6697.c
index d161ba0e7813..14cf99c6429d 100644
--- a/drivers/hwmon/max6697.c
+++ b/drivers/hwmon/max6697.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -16,6 +17,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_data/max6697.h>
 
diff --git a/drivers/hwmon/mc13783-adc.c b/drivers/hwmon/mc13783-adc.c
index 67471c9cd4d4..7a49fca27f67 100644
--- a/drivers/hwmon/mc13783-adc.c
+++ b/drivers/hwmon/mc13783-adc.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME	"mc13783-adc"
 
diff --git a/drivers/hwmon/menf21bmc_hwmon.c b/drivers/hwmon/menf21bmc_hwmon.c
index adb50115c32b..0dcf13143bb6 100644
--- a/drivers/hwmon/menf21bmc_hwmon.c
+++ b/drivers/hwmon/menf21bmc_hwmon.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 
 #define DRV_NAME  "menf21bmc_hwmon"
 
diff --git a/drivers/hwmon/mr75203.c b/drivers/hwmon/mr75203.c
index 50a8b9c3f94d..a40412c44720 100644
--- a/drivers/hwmon/mr75203.c
+++ b/drivers/hwmon/mr75203.c
@@ -20,6 +20,7 @@
 #include <linux/regmap.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 
 /* PVT Common register */
diff --git a/drivers/hwmon/nct6683.c b/drivers/hwmon/nct6683.c
index 0d016fedb9c2..b63efcf219a1 100644
--- a/drivers/hwmon/nct6683.c
+++ b/drivers/hwmon/nct6683.c
@@ -29,10 +29,12 @@
 #include <linux/jiffies.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 enum kinds { nct6683, nct6686, nct6687 };
 
diff --git a/drivers/hwmon/nct6775-core.c b/drivers/hwmon/nct6775-core.c
index 8d2ef3145bca..08d6dd52938e 100644
--- a/drivers/hwmon/nct6775-core.c
+++ b/drivers/hwmon/nct6775-core.c
@@ -44,6 +44,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/hwmon.h>
@@ -51,10 +52,12 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/bitops.h>
+#include <linux/device.h>
 #include <linux/nospec.h>
 #include <linux/regmap.h>
 #include "lm75.h"
 #include "nct6775.h"
+#include <linux/sprintf.h>
 
 #undef DEFAULT_SYMBOL_NAMESPACE
 #define DEFAULT_SYMBOL_NAMESPACE HWMON_NCT6775
diff --git a/drivers/hwmon/nct6775-platform.c b/drivers/hwmon/nct6775-platform.c
index 9aa4dcf4a6f3..11d0adf2e834 100644
--- a/drivers/hwmon/nct6775-platform.c
+++ b/drivers/hwmon/nct6775-platform.c
@@ -14,9 +14,11 @@
 #include <linux/hwmon-vid.h>
 #include <linux/init.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include "nct6775.h"
 
diff --git a/drivers/hwmon/nct7802.c b/drivers/hwmon/nct7802.c
index a0e664d5ebfe..0aa55d08e2c7 100644
--- a/drivers/hwmon/nct7802.c
+++ b/drivers/hwmon/nct7802.c
@@ -13,10 +13,12 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define DRVNAME "nct7802"
 
diff --git a/drivers/hwmon/npcm750-pwm-fan.c b/drivers/hwmon/npcm750-pwm-fan.c
index 904816abb7c4..eed2e69fdfdf 100644
--- a/drivers/hwmon/npcm750-pwm-fan.c
+++ b/drivers/hwmon/npcm750-pwm-fan.c
@@ -12,6 +12,7 @@
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/thermal.h>
 
diff --git a/drivers/hwmon/nsa320-hwmon.c b/drivers/hwmon/nsa320-hwmon.c
index 18076ba7fc14..dcef8370b339 100644
--- a/drivers/hwmon/nsa320-hwmon.c
+++ b/drivers/hwmon/nsa320-hwmon.c
@@ -21,6 +21,7 @@
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 /* Tests for error return values rely upon this value being < 0x80 */
 #define MAGIC_NUMBER 0x55
diff --git a/drivers/hwmon/nzxt-kraken3.c b/drivers/hwmon/nzxt-kraken3.c
index 5806a3f32bcb..657a448c1352 100644
--- a/drivers/hwmon/nzxt-kraken3.c
+++ b/drivers/hwmon/nzxt-kraken3.c
@@ -13,11 +13,14 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #define USB_VENDOR_ID_NZXT		0x1e71
 #define USB_PRODUCT_ID_X53		0x2007
diff --git a/drivers/hwmon/occ/common.c b/drivers/hwmon/occ/common.c
index dd690f700d49..f7b89b880339 100644
--- a/drivers/hwmon/occ/common.c
+++ b/drivers/hwmon/occ/common.c
@@ -7,10 +7,12 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/math64.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <asm/unaligned.h>
 
diff --git a/drivers/hwmon/oxp-sensors.c b/drivers/hwmon/oxp-sensors.c
index 8d3b0f86cc57..26c8de249ce7 100644
--- a/drivers/hwmon/oxp-sensors.c
+++ b/drivers/hwmon/oxp-sensors.c
@@ -20,6 +20,7 @@
 #include <linux/hwmon.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/processor.h>
diff --git a/drivers/hwmon/pc87360.c b/drivers/hwmon/pc87360.c
index 9e9681b2e8c5..1cfff15493a5 100644
--- a/drivers/hwmon/pc87360.c
+++ b/drivers/hwmon/pc87360.c
@@ -24,6 +24,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
@@ -34,6 +35,7 @@
 #include <linux/mutex.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "pc87360"
 
diff --git a/drivers/hwmon/pc87427.c b/drivers/hwmon/pc87427.c
index 7bca04eb4ee4..ffe52d7ab237 100644
--- a/drivers/hwmon/pc87427.c
+++ b/drivers/hwmon/pc87427.c
@@ -18,6 +18,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
@@ -25,6 +26,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/ioport.h>
 #include <linux/acpi.h>
diff --git a/drivers/hwmon/pcf8591.c b/drivers/hwmon/pcf8591.c
index 66c76b28c9e0..ea035c149279 100644
--- a/drivers/hwmon/pcf8591.c
+++ b/drivers/hwmon/pcf8591.c
@@ -9,12 +9,14 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/mutex.h>
 #include <linux/err.h>
 #include <linux/hwmon.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /* Insmod parameters */
 
diff --git a/drivers/hwmon/pmbus/acbel-fsg032.c b/drivers/hwmon/pmbus/acbel-fsg032.c
index e0c55fd8f3a6..7efceb5ed611 100644
--- a/drivers/hwmon/pmbus/acbel-fsg032.c
+++ b/drivers/hwmon/pmbus/acbel-fsg032.c
@@ -12,6 +12,7 @@
 #include <linux/pmbus.h>
 #include <linux/hwmon-sysfs.h>
 #include "pmbus.h"
+#include <linux/sprintf.h>
 
 #define ACBEL_MFR_FW_REVISION	0xd9
 
diff --git a/drivers/hwmon/pmbus/ibm-cffps.c b/drivers/hwmon/pmbus/ibm-cffps.c
index 1ba4c5e95820..ab66ba3d2217 100644
--- a/drivers/hwmon/pmbus/ibm-cffps.c
+++ b/drivers/hwmon/pmbus/ibm-cffps.c
@@ -15,6 +15,7 @@
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/pmbus.h>
+#include <linux/sprintf.h>
 
 #include "pmbus.h"
 
diff --git a/drivers/hwmon/pmbus/isl68137.c b/drivers/hwmon/pmbus/isl68137.c
index 7e53fb1d5ea3..66e4d4c526a4 100644
--- a/drivers/hwmon/pmbus/isl68137.c
+++ b/drivers/hwmon/pmbus/isl68137.c
@@ -12,7 +12,9 @@
 #include <linux/i2c.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 
diff --git a/drivers/hwmon/pmbus/max20730.c b/drivers/hwmon/pmbus/max20730.c
index d56ec24764fd..91c083bfee82 100644
--- a/drivers/hwmon/pmbus/max20730.c
+++ b/drivers/hwmon/pmbus/max20730.c
@@ -17,6 +17,7 @@
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/pmbus.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 #include "pmbus.h"
 
diff --git a/drivers/hwmon/pmbus/pmbus_core.c b/drivers/hwmon/pmbus/pmbus_core.c
index cb4c65a7f288..99166b6c7e60 100644
--- a/drivers/hwmon/pmbus/pmbus_core.c
+++ b/drivers/hwmon/pmbus/pmbus_core.c
@@ -8,6 +8,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/math64.h>
 #include <linux/module.h>
 #include <linux/init.h>
@@ -20,6 +21,7 @@
 #include <linux/regulator/driver.h>
 #include <linux/regulator/machine.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include "pmbus.h"
 
diff --git a/drivers/hwmon/pmbus/q54sj108a2.c b/drivers/hwmon/pmbus/q54sj108a2.c
index a235c1cdf4fe..e8bf6fa6aff8 100644
--- a/drivers/hwmon/pmbus/q54sj108a2.c
+++ b/drivers/hwmon/pmbus/q54sj108a2.c
@@ -7,11 +7,13 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/hex.h>
 #include <linux/i2c.h>
 #include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include "pmbus.h"
+#include <linux/sprintf.h>
 
 #define STORE_DEFAULT_ALL		0x11
 #define ERASE_BLACKBOX_DATA		0xD1
diff --git a/drivers/hwmon/pmbus/ucd9000.c b/drivers/hwmon/pmbus/ucd9000.c
index 8d9d422450e5..6a40fcc4fe8e 100644
--- a/drivers/hwmon/pmbus/ucd9000.c
+++ b/drivers/hwmon/pmbus/ucd9000.c
@@ -8,6 +8,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/delay.h>
+#include <linux/hex.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/of.h>
@@ -17,6 +18,7 @@
 #include <linux/i2c.h>
 #include <linux/pmbus.h>
 #include <linux/gpio/driver.h>
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include "pmbus.h"
 
diff --git a/drivers/hwmon/pt5161l.c b/drivers/hwmon/pt5161l.c
index 60361e39c474..9213e6d8255d 100644
--- a/drivers/hwmon/pt5161l.c
+++ b/drivers/hwmon/pt5161l.c
@@ -8,6 +8,7 @@
 #include <linux/hwmon.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* Aries current average temp ADC code CSR */
 #define ARIES_CURRENT_AVG_TEMP_ADC_CSR	0x42c
diff --git a/drivers/hwmon/scpi-hwmon.c b/drivers/hwmon/scpi-hwmon.c
index a0d220609565..3beeea086476 100644
--- a/drivers/hwmon/scpi-hwmon.c
+++ b/drivers/hwmon/scpi-hwmon.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/scpi_protocol.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/thermal.h>
 
diff --git a/drivers/hwmon/sht15.c b/drivers/hwmon/sht15.c
index 494f9655f44f..30be72fb4c8f 100644
--- a/drivers/hwmon/sht15.c
+++ b/drivers/hwmon/sht15.c
@@ -15,6 +15,7 @@
 
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/hwmon.h>
@@ -31,6 +32,7 @@
 #include <linux/bitrev.h>
 #include <linux/gpio/consumer.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 /* Commands */
 #define SHT15_MEASURE_TEMP		0x03
diff --git a/drivers/hwmon/sht21.c b/drivers/hwmon/sht21.c
index 55c179475208..387d78b91ad8 100644
--- a/drivers/hwmon/sht21.c
+++ b/drivers/hwmon/sht21.c
@@ -16,6 +16,7 @@
 #include <linux/mutex.h>
 #include <linux/device.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 /* I2C command bytes */
 #define SHT21_TRIG_T_MEASUREMENT_HM  0xe3
diff --git a/drivers/hwmon/sht3x.c b/drivers/hwmon/sht3x.c
index c0d02fbcdb76..5afd8df81ba8 100644
--- a/drivers/hwmon/sht3x.c
+++ b/drivers/hwmon/sht3x.c
@@ -18,9 +18,11 @@
 #include <linux/i2c.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 /* commands (high repeatability mode) */
 static const unsigned char sht3x_cmd_measure_single_hpm[] = { 0x24, 0x00 };
diff --git a/drivers/hwmon/shtc1.c b/drivers/hwmon/shtc1.c
index 1f96e94967ee..fc83dacfda6c 100644
--- a/drivers/hwmon/shtc1.c
+++ b/drivers/hwmon/shtc1.c
@@ -15,6 +15,7 @@
 #include <linux/delay.h>
 #include <linux/platform_data/shtc1.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 /* commands (high precision mode) */
 static const unsigned char shtc1_cmd_measure_blocking_hpm[]    = { 0x7C, 0xA2 };
diff --git a/drivers/hwmon/sis5595.c b/drivers/hwmon/sis5595.c
index 641be1f7f9cd..70811713cc4b 100644
--- a/drivers/hwmon/sis5595.c
+++ b/drivers/hwmon/sis5595.c
@@ -43,6 +43,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/ioport.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
 #include <linux/hwmon.h>
@@ -51,6 +52,7 @@
 #include <linux/init.h>
 #include <linux/jiffies.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
diff --git a/drivers/hwmon/smsc47b397.c b/drivers/hwmon/smsc47b397.c
index c26d6eae0e4e..54eb66b9d5b8 100644
--- a/drivers/hwmon/smsc47b397.c
+++ b/drivers/hwmon/smsc47b397.c
@@ -27,6 +27,7 @@
 #include <linux/mutex.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 static unsigned short force_id;
 module_param(force_id, ushort, 0);
diff --git a/drivers/hwmon/smsc47m1.c b/drivers/hwmon/smsc47m1.c
index 0d46edbcb144..dd98899edfcd 100644
--- a/drivers/hwmon/smsc47m1.c
+++ b/drivers/hwmon/smsc47m1.c
@@ -19,12 +19,14 @@
 #include <linux/slab.h>
 #include <linux/ioport.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/init.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
diff --git a/drivers/hwmon/smsc47m192.c b/drivers/hwmon/smsc47m192.c
index d20800a1f02b..c828339c0ca5 100644
--- a/drivers/hwmon/smsc47m192.c
+++ b/drivers/hwmon/smsc47m192.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
@@ -17,6 +18,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/hwmon-vid.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/mutex.h>
 
diff --git a/drivers/hwmon/stts751.c b/drivers/hwmon/stts751.c
index 847c99376930..fa809e193da5 100644
--- a/drivers/hwmon/stts751.c
+++ b/drivers/hwmon/stts751.c
@@ -19,6 +19,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/property.h>
diff --git a/drivers/hwmon/tc654.c b/drivers/hwmon/tc654.c
index 42a9658f1bc2..f43aabde47c9 100644
--- a/drivers/hwmon/tc654.c
+++ b/drivers/hwmon/tc654.c
@@ -12,9 +12,11 @@
 #include <linux/i2c.h>
 #include <linux/init.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <linux/util_macros.h>
 
diff --git a/drivers/hwmon/tc74.c b/drivers/hwmon/tc74.c
index 03950670bd78..30fe705e4adc 100644
--- a/drivers/hwmon/tc74.c
+++ b/drivers/hwmon/tc74.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 /* TC74 registers */
diff --git a/drivers/hwmon/thmc50.c b/drivers/hwmon/thmc50.c
index 68ba26bc9014..010e815daa1e 100644
--- a/drivers/hwmon/thmc50.c
+++ b/drivers/hwmon/thmc50.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
@@ -16,6 +17,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 MODULE_LICENSE("GPL");
 
diff --git a/drivers/hwmon/ultra45_env.c b/drivers/hwmon/ultra45_env.c
index 9823afb0675a..fd774f03ea0e 100644
--- a/drivers/hwmon/ultra45_env.c
+++ b/drivers/hwmon/ultra45_env.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/module.h>
diff --git a/drivers/hwmon/via-cputemp.c b/drivers/hwmon/via-cputemp.c
index 5abe95b683c0..a034b3b9e6d6 100644
--- a/drivers/hwmon/via-cputemp.c
+++ b/drivers/hwmon/via-cputemp.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-vid.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
diff --git a/drivers/hwmon/via686a.c b/drivers/hwmon/via686a.c
index 3a002ad3c005..ba353f5c32fb 100644
--- a/drivers/hwmon/via686a.c
+++ b/drivers/hwmon/via686a.c
@@ -24,12 +24,14 @@
 #include <linux/slab.h>
 #include <linux/pci.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/init.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
diff --git a/drivers/hwmon/vt1211.c b/drivers/hwmon/vt1211.c
index 2f3890463e18..008eb98f3c45 100644
--- a/drivers/hwmon/vt1211.c
+++ b/drivers/hwmon/vt1211.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
@@ -23,6 +24,7 @@
 #include <linux/ioport.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 static int uch_config = -1;
 module_param(uch_config, int, 0);
diff --git a/drivers/hwmon/vt8231.c b/drivers/hwmon/vt8231.c
index dcdd14ccd115..f23c3c3a50c6 100644
--- a/drivers/hwmon/vt8231.c
+++ b/drivers/hwmon/vt8231.c
@@ -16,6 +16,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
 #include <linux/jiffies.h>
@@ -26,6 +27,7 @@
 #include <linux/mutex.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 static int force_addr;
 module_param(force_addr, int, 0);
diff --git a/drivers/hwmon/w83627ehf.c b/drivers/hwmon/w83627ehf.c
index fe960c0a624f..dd794a134134 100644
--- a/drivers/hwmon/w83627ehf.c
+++ b/drivers/hwmon/w83627ehf.c
@@ -34,6 +34,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
@@ -45,6 +46,7 @@
 #include <linux/acpi.h>
 #include <linux/io.h>
 #include "lm75.h"
+#include <linux/sprintf.h>
 
 enum kinds {
 	w83627ehf, w83627dhg, w83627dhg_p, w83627uhg,
diff --git a/drivers/hwmon/w83627hf.c b/drivers/hwmon/w83627hf.c
index 2fc9b718e2ab..5e2e1c48b710 100644
--- a/drivers/hwmon/w83627hf.c
+++ b/drivers/hwmon/w83627hf.c
@@ -30,6 +30,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
@@ -42,6 +43,7 @@
 #include <linux/acpi.h>
 #include <linux/io.h>
 #include "lm75.h"
+#include <linux/sprintf.h>
 
 static struct platform_device *pdev;
 
diff --git a/drivers/hwmon/w83781d.c b/drivers/hwmon/w83781d.c
index cba5ec432e6d..902daa26f332 100644
--- a/drivers/hwmon/w83781d.c
+++ b/drivers/hwmon/w83781d.c
@@ -24,12 +24,14 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-vid.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
diff --git a/drivers/hwmon/w83791d.c b/drivers/hwmon/w83791d.c
index 9681eaa06c8e..880a78f83628 100644
--- a/drivers/hwmon/w83791d.c
+++ b/drivers/hwmon/w83791d.c
@@ -21,6 +21,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
@@ -29,6 +30,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define NUMBER_OF_VIN		10
 #define NUMBER_OF_FANIN		5
diff --git a/drivers/hwmon/w83792d.c b/drivers/hwmon/w83792d.c
index 69ce379a9e13..292ee54e624c 100644
--- a/drivers/hwmon/w83792d.c
+++ b/drivers/hwmon/w83792d.c
@@ -24,12 +24,14 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/jiffies.h>
 
diff --git a/drivers/hwmon/w83793.c b/drivers/hwmon/w83793.c
index 96bab94ba899..c44e7d43c4c8 100644
--- a/drivers/hwmon/w83793.c
+++ b/drivers/hwmon/w83793.c
@@ -19,6 +19,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
@@ -27,6 +28,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/watchdog.h>
 #include <linux/miscdevice.h>
 #include <linux/uaccess.h>
diff --git a/drivers/hwmon/w83795.c b/drivers/hwmon/w83795.c
index c446e00db658..7c85cc753a8f 100644
--- a/drivers/hwmon/w83795.c
+++ b/drivers/hwmon/w83795.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
@@ -22,6 +23,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 
 /* Addresses to scan */
diff --git a/drivers/hwmon/w83l785ts.c b/drivers/hwmon/w83l785ts.c
index 9c11ed69c055..1751c4bbdcbb 100644
--- a/drivers/hwmon/w83l785ts.c
+++ b/drivers/hwmon/w83l785ts.c
@@ -27,6 +27,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 /* How many retries on register read error */
 #define MAX_RETRIES	5
diff --git a/drivers/hwmon/w83l786ng.c b/drivers/hwmon/w83l786ng.c
index 75874cf7851c..4a1e72647063 100644
--- a/drivers/hwmon/w83l786ng.c
+++ b/drivers/hwmon/w83l786ng.c
@@ -13,6 +13,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/hwmon.h>
@@ -20,6 +21,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x2e, 0x2f, I2C_CLIENT_END };
diff --git a/drivers/hwmon/wm831x-hwmon.c b/drivers/hwmon/wm831x-hwmon.c
index 38446e9d1def..54aa829f09f9 100644
--- a/drivers/hwmon/wm831x-hwmon.c
+++ b/drivers/hwmon/wm831x-hwmon.c
@@ -13,6 +13,7 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/wm831x/core.h>
 #include <linux/mfd/wm831x/auxadc.h>
diff --git a/drivers/hwmon/wm8350-hwmon.c b/drivers/hwmon/wm8350-hwmon.c
index 10e17bb79895..710e5ddc9f26 100644
--- a/drivers/hwmon/wm8350-hwmon.c
+++ b/drivers/hwmon/wm8350-hwmon.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/wm8350/core.h>
 #include <linux/mfd/wm8350/comparator.h>
diff --git a/drivers/hwmon/xgene-hwmon.c b/drivers/hwmon/xgene-hwmon.c
index 5e0759a70f6d..f71473c2a7e1 100644
--- a/drivers/hwmon/xgene-hwmon.c
+++ b/drivers/hwmon/xgene-hwmon.c
@@ -12,6 +12,7 @@
  *  - Retrieve SoC temperature (milli-degree C) and alarm
  */
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
diff --git a/drivers/hwtracing/coresight/coresight-core.c b/drivers/hwtracing/coresight/coresight-core.c
index d7f0e231feb9..17324f9f1ebc 100644
--- a/drivers/hwtracing/coresight/coresight-core.c
+++ b/drivers/hwtracing/coresight/coresight-core.c
@@ -6,6 +6,8 @@
 #include <linux/build_bug.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/io.h>
diff --git a/drivers/hwtracing/coresight/coresight-cpu-debug.c b/drivers/hwtracing/coresight/coresight-cpu-debug.c
index 1874df7c6a73..f0f3b96e6d18 100644
--- a/drivers/hwtracing/coresight/coresight-cpu-debug.c
+++ b/drivers/hwtracing/coresight/coresight-cpu-debug.c
@@ -21,6 +21,7 @@
 #include <linux/pm_qos.h>
 #include <linux/slab.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/hwtracing/coresight/coresight-cti-platform.c b/drivers/hwtracing/coresight/coresight-cti-platform.c
index ccef04f27f12..6ab9b25eaf27 100644
--- a/drivers/hwtracing/coresight/coresight-cti-platform.c
+++ b/drivers/hwtracing/coresight/coresight-cti-platform.c
@@ -8,6 +8,7 @@
 #include <linux/of.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/arm/coresight-cti-dt.h>
 
diff --git a/drivers/hwtracing/coresight/coresight-cti-sysfs.c b/drivers/hwtracing/coresight/coresight-cti-sysfs.c
index d25dd2737b49..24fb4313c083 100644
--- a/drivers/hwtracing/coresight/coresight-cti-sysfs.c
+++ b/drivers/hwtracing/coresight/coresight-cti-sysfs.c
@@ -9,7 +9,9 @@
 #include <linux/device.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include "coresight-cti.h"
diff --git a/drivers/hwtracing/coresight/coresight-etb10.c b/drivers/hwtracing/coresight/coresight-etb10.c
index fa80039e0821..45d7283cd455 100644
--- a/drivers/hwtracing/coresight/coresight-etb10.c
+++ b/drivers/hwtracing/coresight/coresight-etb10.c
@@ -8,6 +8,8 @@
 #include <linux/atomic.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/io.h>
diff --git a/drivers/hwtracing/coresight/coresight-etm-perf.c b/drivers/hwtracing/coresight/coresight-etm-perf.c
index a52cfcce25d6..ba379a6b4fa5 100644
--- a/drivers/hwtracing/coresight/coresight-etm-perf.c
+++ b/drivers/hwtracing/coresight/coresight-etm-perf.c
@@ -15,6 +15,7 @@
 #include <linux/perf_event.h>
 #include <linux/percpu-defs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stringhash.h>
 #include <linux/types.h>
 #include <linux/workqueue.h>
diff --git a/drivers/hwtracing/coresight/coresight-etm3x-sysfs.c b/drivers/hwtracing/coresight/coresight-etm3x-sysfs.c
index 2f271b7fb048..299ff696f5db 100644
--- a/drivers/hwtracing/coresight/coresight-etm3x-sysfs.c
+++ b/drivers/hwtracing/coresight/coresight-etm3x-sysfs.c
@@ -6,9 +6,11 @@
 
 #include <linux/pid_namespace.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include "coresight-etm.h"
 #include "coresight-priv.h"
+#include <linux/kstrtox.h>
 
 static ssize_t nr_addr_cmp_show(struct device *dev,
 				struct device_attribute *attr, char *buf)
diff --git a/drivers/hwtracing/coresight/coresight-etm4x-sysfs.c b/drivers/hwtracing/coresight/coresight-etm4x-sysfs.c
index a9f19629f3f8..d38f231f8834 100644
--- a/drivers/hwtracing/coresight/coresight-etm4x-sysfs.c
+++ b/drivers/hwtracing/coresight/coresight-etm4x-sysfs.c
@@ -6,10 +6,12 @@
 
 #include <linux/pid_namespace.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include "coresight-etm4x.h"
 #include "coresight-priv.h"
 #include "coresight-syscfg.h"
+#include <linux/kstrtox.h>
 
 static int etm4_set_mode_exclude(struct etmv4_drvdata *drvdata, bool exclude)
 {
diff --git a/drivers/hwtracing/coresight/coresight-funnel.c b/drivers/hwtracing/coresight/coresight-funnel.c
index a5b1fc787766..58fe46ef9314 100644
--- a/drivers/hwtracing/coresight/coresight-funnel.c
+++ b/drivers/hwtracing/coresight/coresight-funnel.c
@@ -8,6 +8,8 @@
 #include <linux/acpi.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/err.h>
diff --git a/drivers/hwtracing/coresight/coresight-stm.c b/drivers/hwtracing/coresight/coresight-stm.c
index a1c27c901ad1..4712a68cc999 100644
--- a/drivers/hwtracing/coresight/coresight-stm.c
+++ b/drivers/hwtracing/coresight/coresight-stm.c
@@ -24,10 +24,12 @@
 #include <linux/coresight-stm.h>
 #include <linux/err.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/moduleparam.h>
 #include <linux/of_address.h>
 #include <linux/perf_event.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/stm.h>
 
 #include "coresight-priv.h"
diff --git a/drivers/hwtracing/coresight/coresight-syscfg-configfs.c b/drivers/hwtracing/coresight/coresight-syscfg-configfs.c
index 433ede94dd63..887aa160d53c 100644
--- a/drivers/hwtracing/coresight/coresight-syscfg-configfs.c
+++ b/drivers/hwtracing/coresight/coresight-syscfg-configfs.c
@@ -5,6 +5,8 @@
  */
 
 #include <linux/configfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "coresight-config.h"
 #include "coresight-syscfg-configfs.h"
diff --git a/drivers/hwtracing/coresight/coresight-sysfs.c b/drivers/hwtracing/coresight/coresight-sysfs.c
index dd78e9fcfc4d..73847f0008c9 100644
--- a/drivers/hwtracing/coresight/coresight-sysfs.c
+++ b/drivers/hwtracing/coresight/coresight-sysfs.c
@@ -6,6 +6,7 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 #include "coresight-priv.h"
 
diff --git a/drivers/hwtracing/coresight/coresight-tmc-core.c b/drivers/hwtracing/coresight/coresight-tmc-core.c
index 7ec5365e2b64..35effbcb1558 100644
--- a/drivers/hwtracing/coresight/coresight-tmc-core.c
+++ b/drivers/hwtracing/coresight/coresight-tmc-core.c
@@ -6,6 +6,8 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/idr.h>
diff --git a/drivers/hwtracing/coresight/coresight-tpdm.c b/drivers/hwtracing/coresight/coresight-tpdm.c
index 97654aa4b772..a87bf16f2458 100644
--- a/drivers/hwtracing/coresight/coresight-tpdm.c
+++ b/drivers/hwtracing/coresight/coresight-tpdm.c
@@ -13,6 +13,7 @@
 #include <linux/fs.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 
diff --git a/drivers/hwtracing/coresight/coresight-trbe.c b/drivers/hwtracing/coresight/coresight-trbe.c
index 6136776482e6..4002aacf9c71 100644
--- a/drivers/hwtracing/coresight/coresight-trbe.c
+++ b/drivers/hwtracing/coresight/coresight-trbe.c
@@ -17,6 +17,7 @@
 
 #include <asm/barrier.h>
 #include <asm/cpufeature.h>
+#include <linux/sprintf.h>
 
 #include "coresight-self-hosted-trace.h"
 #include "coresight-trbe.h"
diff --git a/drivers/hwtracing/intel_th/core.c b/drivers/hwtracing/intel_th/core.c
index cc7f879bb175..80976f8f30fe 100644
--- a/drivers/hwtracing/intel_th/core.c
+++ b/drivers/hwtracing/intel_th/core.c
@@ -10,6 +10,8 @@
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/kdev_t.h>
 #include <linux/debugfs.h>
diff --git a/drivers/hwtracing/intel_th/gth.c b/drivers/hwtracing/intel_th/gth.c
index b3308934a687..6020e27d22a2 100644
--- a/drivers/hwtracing/intel_th/gth.c
+++ b/drivers/hwtracing/intel_th/gth.c
@@ -11,10 +11,12 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
 #include <linux/bitmap.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "intel_th.h"
 #include "gth.h"
diff --git a/drivers/hwtracing/intel_th/msu.c b/drivers/hwtracing/intel_th/msu.c
index 9621efe0e95c..37e88a6615c3 100644
--- a/drivers/hwtracing/intel_th/msu.c
+++ b/drivers/hwtracing/intel_th/msu.c
@@ -10,6 +10,8 @@
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/sizes.h>
 #include <linux/printk.h>
diff --git a/drivers/hwtracing/intel_th/pti.c b/drivers/hwtracing/intel_th/pti.c
index 09132ab8bc23..22a9c6d7812d 100644
--- a/drivers/hwtracing/intel_th/pti.c
+++ b/drivers/hwtracing/intel_th/pti.c
@@ -10,11 +10,13 @@
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/sizes.h>
 #include <linux/printk.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include "intel_th.h"
 #include "pti.h"
diff --git a/drivers/hwtracing/ptt/hisi_ptt.c b/drivers/hwtracing/ptt/hisi_ptt.c
index c1b5fd2b8974..40ac8aa17d12 100644
--- a/drivers/hwtracing/ptt/hisi_ptt.c
+++ b/drivers/hwtracing/ptt/hisi_ptt.c
@@ -15,7 +15,10 @@
 #include <linux/io.h>
 #include <linux/iommu.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/vmalloc.h>
 
diff --git a/drivers/hwtracing/stm/core.c b/drivers/hwtracing/stm/core.c
index 534fbefc7f6a..d9abe66d85f4 100644
--- a/drivers/hwtracing/stm/core.c
+++ b/drivers/hwtracing/stm/core.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
diff --git a/drivers/hwtracing/stm/dummy_stm.c b/drivers/hwtracing/stm/dummy_stm.c
index 38528ffdc0b3..f2a6c9c83ae4 100644
--- a/drivers/hwtracing/stm/dummy_stm.c
+++ b/drivers/hwtracing/stm/dummy_stm.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stm.h>
 #include <uapi/linux/stm.h>
 
diff --git a/drivers/hwtracing/stm/heartbeat.c b/drivers/hwtracing/stm/heartbeat.c
index 81d7b21d31ec..f9f01333c7aa 100644
--- a/drivers/hwtracing/stm/heartbeat.c
+++ b/drivers/hwtracing/stm/heartbeat.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/hrtimer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stm.h>
 
 #define STM_HEARTBEAT_MAX	32
diff --git a/drivers/hwtracing/stm/p_sys-t.c b/drivers/hwtracing/stm/p_sys-t.c
index 8254971c02e7..f6c32db2a223 100644
--- a/drivers/hwtracing/stm/p_sys-t.c
+++ b/drivers/hwtracing/stm/p_sys-t.c
@@ -5,9 +5,11 @@
  */
 
 #include <linux/configfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include <linux/stm.h>
 #include "stm.h"
diff --git a/drivers/hwtracing/stm/policy.c b/drivers/hwtracing/stm/policy.c
index 42103c3a177f..05d5bd4e5f89 100644
--- a/drivers/hwtracing/stm/policy.c
+++ b/drivers/hwtracing/stm/policy.c
@@ -14,6 +14,7 @@
 #include <linux/device.h>
 #include <linux/configfs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stm.h>
 #include "stm.h"
 
diff --git a/drivers/i2c/algos/i2c-algo-pca.c b/drivers/i2c/algos/i2c-algo-pca.c
index 384af88e58ad..620142d4591e 100644
--- a/drivers/i2c/algos/i2c-algo-pca.c
+++ b/drivers/i2c/algos/i2c-algo-pca.c
@@ -13,6 +13,7 @@
 #include <linux/errno.h>
 #include <linux/i2c.h>
 #include <linux/i2c-algo-pca.h>
+#include <linux/completion.h>
 
 #define DEB1(fmt, args...) do { if (i2c_debug >= 1)			\
 				 printk(KERN_DEBUG fmt, ## args); } while (0)
diff --git a/drivers/i2c/busses/i2c-ali1535.c b/drivers/i2c/busses/i2c-ali1535.c
index 461eb23f9d47..35915a8cc029 100644
--- a/drivers/i2c/busses/i2c-ali1535.c
+++ b/drivers/i2c/busses/i2c-ali1535.c
@@ -41,6 +41,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/delay.h>
 #include <linux/ioport.h>
diff --git a/drivers/i2c/busses/i2c-ali1563.c b/drivers/i2c/busses/i2c-ali1563.c
index 307fb0666ecb..013d58c973bd 100644
--- a/drivers/i2c/busses/i2c-ali1563.c
+++ b/drivers/i2c/busses/i2c-ali1563.c
@@ -20,6 +20,7 @@
 #include <linux/i2c.h>
 #include <linux/pci.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #define ALI1563_MAX_TIMEOUT	500
 #define	ALI1563_SMBBA		0x80
diff --git a/drivers/i2c/busses/i2c-ali15x3.c b/drivers/i2c/busses/i2c-ali15x3.c
index d2fa30deb054..44327568285c 100644
--- a/drivers/i2c/busses/i2c-ali15x3.c
+++ b/drivers/i2c/busses/i2c-ali15x3.c
@@ -49,6 +49,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/delay.h>
diff --git a/drivers/i2c/busses/i2c-altera.c b/drivers/i2c/busses/i2c-altera.c
index 252fbd175fb1..0754bb2c03b8 100644
--- a/drivers/i2c/busses/i2c-altera.c
+++ b/drivers/i2c/busses/i2c-altera.c
@@ -6,6 +6,7 @@
  */
 #include <linux/clk.h>
 #include <linux/clkdev.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
 #include <linux/iopoll.h>
diff --git a/drivers/i2c/busses/i2c-amd-mp2-plat.c b/drivers/i2c/busses/i2c-amd-mp2-plat.c
index 112fe2bc5662..4befb9456bcc 100644
--- a/drivers/i2c/busses/i2c-amd-mp2-plat.c
+++ b/drivers/i2c/busses/i2c-amd-mp2-plat.c
@@ -10,10 +10,12 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "i2c-amd-mp2.h"
diff --git a/drivers/i2c/busses/i2c-amd756-s4882.c b/drivers/i2c/busses/i2c-amd756-s4882.c
index 063274388a75..1155f10f3362 100644
--- a/drivers/i2c/busses/i2c-amd756-s4882.c
+++ b/drivers/i2c/busses/i2c-amd756-s4882.c
@@ -26,6 +26,7 @@
 #include <linux/init.h>
 #include <linux/i2c.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 extern struct i2c_adapter amd756_smbus;
 
diff --git a/drivers/i2c/busses/i2c-amd756.c b/drivers/i2c/busses/i2c-amd756.c
index 208310db906d..9062232b43fd 100644
--- a/drivers/i2c/busses/i2c-amd756.c
+++ b/drivers/i2c/busses/i2c-amd756.c
@@ -26,6 +26,7 @@
 #include <linux/pci.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-amd8111.c b/drivers/i2c/busses/i2c-amd8111.c
index 42a9b1221065..2e8ddfc43b49 100644
--- a/drivers/i2c/busses/i2c-amd8111.c
+++ b/drivers/i2c/busses/i2c-amd8111.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-at91-core.c b/drivers/i2c/busses/i2c-at91-core.c
index dc52b3530725..6acb7fd440fa 100644
--- a/drivers/i2c/busses/i2c-at91-core.c
+++ b/drivers/i2c/busses/i2c-at91-core.c
@@ -22,6 +22,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/pinctrl/consumer.h>
+#include <linux/sprintf.h>
 
 #include "i2c-at91.h"
 
diff --git a/drivers/i2c/busses/i2c-axxia.c b/drivers/i2c/busses/i2c-axxia.c
index a66f7f67b3b8..1014210f9261 100644
--- a/drivers/i2c/busses/i2c-axxia.c
+++ b/drivers/i2c/busses/i2c-axxia.c
@@ -9,6 +9,7 @@
  */
 #include <linux/clk.h>
 #include <linux/clkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-bcm-iproc.c b/drivers/i2c/busses/i2c-bcm-iproc.c
index e905734c26a0..388b16f750d5 100644
--- a/drivers/i2c/busses/i2c-bcm-iproc.c
+++ b/drivers/i2c/busses/i2c-bcm-iproc.c
@@ -10,6 +10,8 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define IDM_CTRL_DIRECT_OFFSET       0x00
 #define CFG_OFFSET                   0x00
diff --git a/drivers/i2c/busses/i2c-bcm-kona.c b/drivers/i2c/busses/i2c-bcm-kona.c
index a57088ec2b06..01582e3c684c 100644
--- a/drivers/i2c/busses/i2c-bcm-kona.c
+++ b/drivers/i2c/busses/i2c-bcm-kona.c
@@ -9,6 +9,7 @@
 #include <linux/interrupt.h>
 #include <linux/platform_device.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/slab.h>
 
diff --git a/drivers/i2c/busses/i2c-bcm2835.c b/drivers/i2c/busses/i2c-bcm2835.c
index b92de1944221..3e27b2fa69ac 100644
--- a/drivers/i2c/busses/i2c-bcm2835.c
+++ b/drivers/i2c/busses/i2c-bcm2835.c
@@ -15,6 +15,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define BCM2835_I2C_C		0x0
 #define BCM2835_I2C_S		0x4
diff --git a/drivers/i2c/busses/i2c-brcmstb.c b/drivers/i2c/busses/i2c-brcmstb.c
index 38f276c99193..02f8f0f3ff46 100644
--- a/drivers/i2c/busses/i2c-brcmstb.c
+++ b/drivers/i2c/busses/i2c-brcmstb.c
@@ -2,6 +2,7 @@
 // Copyright (C) 2014 Broadcom Corporation
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-cadence.c b/drivers/i2c/busses/i2c-cadence.c
index de3f58b60dce..d03ee3a7a064 100644
--- a/drivers/i2c/busses/i2c-cadence.c
+++ b/drivers/i2c/busses/i2c-cadence.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
@@ -17,6 +18,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 /* Register offsets for the I2C device. */
 #define CDNS_I2C_CR_OFFSET		0x00 /* Control Register, RW */
diff --git a/drivers/i2c/busses/i2c-davinci.c b/drivers/i2c/busses/i2c-davinci.c
index 02b3b1160fb0..c82b3af16598 100644
--- a/drivers/i2c/busses/i2c-davinci.c
+++ b/drivers/i2c/busses/i2c-davinci.c
@@ -16,6 +16,7 @@
 #include <linux/delay.h>
 #include <linux/i2c.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/errno.h>
 #include <linux/sched.h>
 #include <linux/err.h>
diff --git a/drivers/i2c/busses/i2c-designware-master.c b/drivers/i2c/busses/i2c-designware-master.c
index 85dbd0eb5392..5781bbe7a5f3 100644
--- a/drivers/i2c/busses/i2c-designware-master.c
+++ b/drivers/i2c/busses/i2c-designware-master.c
@@ -21,6 +21,8 @@
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
 #include <linux/reset.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "i2c-designware-core.h"
 
diff --git a/drivers/i2c/busses/i2c-designware-slave.c b/drivers/i2c/busses/i2c-designware-slave.c
index 2e079cf20bb5..472e1979dc2b 100644
--- a/drivers/i2c/busses/i2c-designware-slave.c
+++ b/drivers/i2c/busses/i2c-designware-slave.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include "i2c-designware-core.h"
 
diff --git a/drivers/i2c/busses/i2c-diolan-u2c.c b/drivers/i2c/busses/i2c-diolan-u2c.c
index b48b7888936f..cd81478ff981 100644
--- a/drivers/i2c/busses/i2c-diolan-u2c.c
+++ b/drivers/i2c/busses/i2c-diolan-u2c.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/errno.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/usb.h>
diff --git a/drivers/i2c/busses/i2c-dln2.c b/drivers/i2c/busses/i2c-dln2.c
index 631109c7a098..f1ddbd166452 100644
--- a/drivers/i2c/busses/i2c-dln2.c
+++ b/drivers/i2c/busses/i2c-dln2.c
@@ -11,6 +11,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-exynos5.c b/drivers/i2c/busses/i2c-exynos5.c
index 385ef9d9e4d4..fc35fb89417a 100644
--- a/drivers/i2c/busses/i2c-exynos5.c
+++ b/drivers/i2c/busses/i2c-exynos5.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <linux/i2c.h>
 #include <linux/time.h>
diff --git a/drivers/i2c/busses/i2c-fsi.c b/drivers/i2c/busses/i2c-fsi.c
index 10332693edf0..2236b23246b8 100644
--- a/drivers/i2c/busses/i2c-fsi.c
+++ b/drivers/i2c/busses/i2c-fsi.c
@@ -24,6 +24,7 @@
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define FSI_ENGID_I2C		0x7
 
diff --git a/drivers/i2c/busses/i2c-gpio.c b/drivers/i2c/busses/i2c-gpio.c
index 4f1411b1a775..c31778c89bb6 100644
--- a/drivers/i2c/busses/i2c-gpio.c
+++ b/drivers/i2c/busses/i2c-gpio.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct i2c_gpio_private_data {
 	struct gpio_desc *sda;
diff --git a/drivers/i2c/busses/i2c-gxp.c b/drivers/i2c/busses/i2c-gxp.c
index efafc0528c44..d7c4dfec89f0 100644
--- a/drivers/i2c/busses/i2c-gxp.c
+++ b/drivers/i2c/busses/i2c-gxp.c
@@ -9,6 +9,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/mfd/syscon.h>
+#include <linux/completion.h>
 
 #define GXP_MAX_I2C_ENGINE 10
 static const char * const gxp_i2c_name[] = {
diff --git a/drivers/i2c/busses/i2c-hisi.c b/drivers/i2c/busses/i2c-hisi.c
index 975c0b1c44de..b142ec772472 100644
--- a/drivers/i2c/busses/i2c-hisi.c
+++ b/drivers/i2c/busses/i2c-hisi.c
@@ -16,6 +16,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 
 #define HISI_I2C_FRAME_CTRL		0x0000
diff --git a/drivers/i2c/busses/i2c-hix5hd2.c b/drivers/i2c/busses/i2c-hix5hd2.c
index 8e75515c3ca4..3b71529d8c13 100644
--- a/drivers/i2c/busses/i2c-hix5hd2.c
+++ b/drivers/i2c/busses/i2c-hix5hd2.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
 #include <linux/io.h>
diff --git a/drivers/i2c/busses/i2c-i801.c b/drivers/i2c/busses/i2c-i801.c
index 918c794c77a4..5aac40ccd195 100644
--- a/drivers/i2c/busses/i2c-i801.c
+++ b/drivers/i2c/busses/i2c-i801.c
@@ -100,6 +100,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/delay.h>
 #include <linux/ioport.h>
@@ -107,6 +108,7 @@
 #include <linux/i2c.h>
 #include <linux/i2c-smbus.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/dmi.h>
 #include <linux/slab.h>
diff --git a/drivers/i2c/busses/i2c-img-scb.c b/drivers/i2c/busses/i2c-img-scb.c
index f9d4bfef511c..b990bb8c1225 100644
--- a/drivers/i2c/busses/i2c-img-scb.c
+++ b/drivers/i2c/busses/i2c-img-scb.c
@@ -81,6 +81,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 
 /* Register offsets */
diff --git a/drivers/i2c/busses/i2c-isch.c b/drivers/i2c/busses/i2c-isch.c
index 416a9968ed28..d0cf8d224d10 100644
--- a/drivers/i2c/busses/i2c-isch.c
+++ b/drivers/i2c/busses/i2c-isch.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-ismt.c b/drivers/i2c/busses/i2c-ismt.c
index c74985d77b0e..8f5fc9d8280f 100644
--- a/drivers/i2c/busses/i2c-ismt.c
+++ b/drivers/i2c/busses/i2c-ismt.c
@@ -60,6 +60,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/completion.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/i2c/busses/i2c-jz4780.c b/drivers/i2c/busses/i2c-jz4780.c
index 55035cca0ae5..a9a663464fd9 100644
--- a/drivers/i2c/busses/i2c-jz4780.c
+++ b/drivers/i2c/busses/i2c-jz4780.c
@@ -22,6 +22,7 @@
 #include <linux/platform_device.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 
 #define JZ4780_I2C_CTRL		0x00
diff --git a/drivers/i2c/busses/i2c-ljca.c b/drivers/i2c/busses/i2c-ljca.c
index b4927622177c..73f9e35d01c3 100644
--- a/drivers/i2c/busses/i2c-ljca.c
+++ b/drivers/i2c/busses/i2c-ljca.c
@@ -12,6 +12,7 @@
 #include <linux/dev_printk.h>
 #include <linux/i2c.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ljca.h>
 
 /* I2C init flags */
diff --git a/drivers/i2c/busses/i2c-mchp-pci1xxxx.c b/drivers/i2c/busses/i2c-mchp-pci1xxxx.c
index 5ef136c3ecb1..8faf10d46b9e 100644
--- a/drivers/i2c/busses/i2c-mchp-pci1xxxx.c
+++ b/drivers/i2c/busses/i2c-mchp-pci1xxxx.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/bits.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
 #include <linux/i2c-smbus.h>
@@ -17,6 +18,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #define SMBUS_MAST_CORE_ADDR_BASE		0x00000
diff --git a/drivers/i2c/busses/i2c-microchip-corei2c.c b/drivers/i2c/busses/i2c-microchip-corei2c.c
index 0b0a1c4d17ca..70effc301d6c 100644
--- a/drivers/i2c/busses/i2c-microchip-corei2c.c
+++ b/drivers/i2c/busses/i2c-microchip-corei2c.c
@@ -9,6 +9,7 @@
  */
 #include <linux/clk.h>
 #include <linux/clkdev.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
@@ -16,6 +17,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define CORE_I2C_CTRL	(0x00)
 #define  CTRL_CR0	BIT(0)
diff --git a/drivers/i2c/busses/i2c-mlxbf.c b/drivers/i2c/busses/i2c-mlxbf.c
index b3a73921ab69..c866adb429d7 100644
--- a/drivers/i2c/busses/i2c-mlxbf.c
+++ b/drivers/i2c/busses/i2c-mlxbf.c
@@ -17,6 +17,7 @@
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 /* Defines what functionality is present. */
diff --git a/drivers/i2c/busses/i2c-mpc.c b/drivers/i2c/busses/i2c-mpc.c
index e4e4995ab224..a0199259fd67 100644
--- a/drivers/i2c/busses/i2c-mpc.c
+++ b/drivers/i2c/busses/i2c-mpc.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/clk.h>
 #include <linux/io.h>
diff --git a/drivers/i2c/busses/i2c-nforce2-s4985.c b/drivers/i2c/busses/i2c-nforce2-s4985.c
index 69a71bc9830d..b0a7b286847a 100644
--- a/drivers/i2c/busses/i2c-nforce2-s4985.c
+++ b/drivers/i2c/busses/i2c-nforce2-s4985.c
@@ -24,6 +24,7 @@
 #include <linux/init.h>
 #include <linux/i2c.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 extern struct i2c_adapter *nforce2_smbus;
 
diff --git a/drivers/i2c/busses/i2c-nforce2.c b/drivers/i2c/busses/i2c-nforce2.c
index fab662e6bc08..b2f42249d735 100644
--- a/drivers/i2c/busses/i2c-nforce2.c
+++ b/drivers/i2c/busses/i2c-nforce2.c
@@ -37,6 +37,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-nomadik.c b/drivers/i2c/busses/i2c-nomadik.c
index b10574d42b7a..7558abc2f8d2 100644
--- a/drivers/i2c/busses/i2c-nomadik.c
+++ b/drivers/i2c/busses/i2c-nomadik.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/amba/bus.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/i2c.h>
@@ -21,6 +22,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/of.h>
 #include <linux/pinctrl/consumer.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "nmk-i2c"
 
diff --git a/drivers/i2c/busses/i2c-npcm7xx.c b/drivers/i2c/busses/i2c-npcm7xx.c
index 54181b3f1919..a368e84b0e7f 100644
--- a/drivers/i2c/busses/i2c-npcm7xx.c
+++ b/drivers/i2c/busses/i2c-npcm7xx.c
@@ -6,6 +6,7 @@
  */
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/errno.h>
 #include <linux/i2c.h>
@@ -19,6 +20,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 enum i2c_mode {
 	I2C_MASTER,
diff --git a/drivers/i2c/busses/i2c-owl.c b/drivers/i2c/busses/i2c-owl.c
index 777f1a0278c7..55dd2f6bcdc5 100644
--- a/drivers/i2c/busses/i2c-owl.c
+++ b/drivers/i2c/busses/i2c-owl.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
@@ -18,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 /* I2C registers */
 #define OWL_I2C_REG_CTL		0x0000
diff --git a/drivers/i2c/busses/i2c-pasemi-core.c b/drivers/i2c/busses/i2c-pasemi-core.c
index 7d54a9f34c74..9df3f107fb1a 100644
--- a/drivers/i2c/busses/i2c-pasemi-core.c
+++ b/drivers/i2c/busses/i2c-pasemi-core.c
@@ -8,12 +8,14 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/sched.h>
 #include <linux/i2c.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/io.h>
+#include <linux/completion.h>
 
 #include "i2c-pasemi-core.h"
 
diff --git a/drivers/i2c/busses/i2c-pca-platform.c b/drivers/i2c/busses/i2c-pca-platform.c
index b8d5480c54f6..5bff6d8905db 100644
--- a/drivers/i2c/busses/i2c-pca-platform.c
+++ b/drivers/i2c/busses/i2c-pca-platform.c
@@ -22,6 +22,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/io.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <asm/irq.h>
 
diff --git a/drivers/i2c/busses/i2c-piix4.c b/drivers/i2c/busses/i2c-piix4.c
index 6a0392172b2f..2ee8e47f1b7d 100644
--- a/drivers/i2c/busses/i2c-piix4.c
+++ b/drivers/i2c/busses/i2c-piix4.c
@@ -26,6 +26,7 @@
 #include <linux/pci.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-pnx.c b/drivers/i2c/busses/i2c-pnx.c
index a12525b3186b..64bb2ec4aec4 100644
--- a/drivers/i2c/busses/i2c-pnx.c
+++ b/drivers/i2c/busses/i2c-pnx.c
@@ -15,6 +15,7 @@
 #include <linux/ioport.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/completion.h>
 #include <linux/platform_device.h>
diff --git a/drivers/i2c/busses/i2c-powermac.c b/drivers/i2c/busses/i2c-powermac.c
index 8e57ebe595be..aa76e2413316 100644
--- a/drivers/i2c/busses/i2c-powermac.c
+++ b/drivers/i2c/busses/i2c-powermac.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/i2c.h>
 #include <linux/device.h>
diff --git a/drivers/i2c/busses/i2c-qcom-cci.c b/drivers/i2c/busses/i2c-qcom-cci.c
index 414882c57d7f..cfdfd8f1b2e2 100644
--- a/drivers/i2c/busses/i2c-qcom-cci.c
+++ b/drivers/i2c/busses/i2c-qcom-cci.c
@@ -11,6 +11,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #define CCI_HW_VERSION				0x0
 #define CCI_RESET_CMD				0x004
diff --git a/drivers/i2c/busses/i2c-qcom-geni.c b/drivers/i2c/busses/i2c-qcom-geni.c
index 0d2e7171e3a6..1ec521d7c3c8 100644
--- a/drivers/i2c/busses/i2c-qcom-geni.c
+++ b/drivers/i2c/busses/i2c-qcom-geni.c
@@ -3,6 +3,7 @@
 
 #include <linux/acpi.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/dma/qcom-gpi-dma.h>
diff --git a/drivers/i2c/busses/i2c-qup.c b/drivers/i2c/busses/i2c-qup.c
index 598102d16677..3cc0bdec7889 100644
--- a/drivers/i2c/busses/i2c-qup.c
+++ b/drivers/i2c/busses/i2c-qup.c
@@ -8,6 +8,7 @@
 #include <linux/acpi.h>
 #include <linux/atomic.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dmapool.h>
diff --git a/drivers/i2c/busses/i2c-robotfuzz-osif.c b/drivers/i2c/busses/i2c-robotfuzz-osif.c
index 66dfa211e736..7311190fbba6 100644
--- a/drivers/i2c/busses/i2c-robotfuzz-osif.c
+++ b/drivers/i2c/busses/i2c-robotfuzz-osif.c
@@ -15,6 +15,7 @@
 #include <linux/errno.h>
 #include <linux/i2c.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #define OSIFI2C_READ		20
diff --git a/drivers/i2c/busses/i2c-rzv2m.c b/drivers/i2c/busses/i2c-rzv2m.c
index b0bfc96b9ede..0bc23d0076fc 100644
--- a/drivers/i2c/busses/i2c-rzv2m.c
+++ b/drivers/i2c/busses/i2c-rzv2m.c
@@ -7,6 +7,7 @@
 
 #include <linux/bits.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/interrupt.h>
diff --git a/drivers/i2c/busses/i2c-scmi.c b/drivers/i2c/busses/i2c-scmi.c
index d7af8e0d7599..0bf7aabbba2c 100644
--- a/drivers/i2c/busses/i2c-scmi.c
+++ b/drivers/i2c/busses/i2c-scmi.c
@@ -9,6 +9,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/i2c.h>
 #include <linux/acpi.h>
diff --git a/drivers/i2c/busses/i2c-sh7760.c b/drivers/i2c/busses/i2c-sh7760.c
index 8a043f5fca1e..198ffdd00133 100644
--- a/drivers/i2c/busses/i2c-sh7760.c
+++ b/drivers/i2c/busses/i2c-sh7760.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <asm/clock.h>
 #include <asm/i2c-sh7760.h>
diff --git a/drivers/i2c/busses/i2c-sis5595.c b/drivers/i2c/busses/i2c-sis5595.c
index 32476dc10ad6..a73994538bcb 100644
--- a/drivers/i2c/busses/i2c-sis5595.c
+++ b/drivers/i2c/busses/i2c-sis5595.c
@@ -50,6 +50,7 @@
 #include <linux/i2c.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 static int blacklist[] = {
 	PCI_DEVICE_ID_SI_540,
diff --git a/drivers/i2c/busses/i2c-sis630.c b/drivers/i2c/busses/i2c-sis630.c
index 3505cf29cedd..055a2abfd9a1 100644
--- a/drivers/i2c/busses/i2c-sis630.c
+++ b/drivers/i2c/busses/i2c-sis630.c
@@ -36,6 +36,7 @@
 #include <linux/i2c.h>
 #include <linux/acpi.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 /* SIS964 id is defined here as we are the only file using it */
 #define PCI_DEVICE_ID_SI_964	0x0964
diff --git a/drivers/i2c/busses/i2c-sis96x.c b/drivers/i2c/busses/i2c-sis96x.c
index 77529dda6fcd..824101863540 100644
--- a/drivers/i2c/busses/i2c-sis96x.c
+++ b/drivers/i2c/busses/i2c-sis96x.c
@@ -21,6 +21,7 @@
 #include <linux/pci.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-sprd.c b/drivers/i2c/busses/i2c-sprd.c
index c52d1bec60b4..5e32bb227097 100644
--- a/drivers/i2c/busses/i2c-sprd.c
+++ b/drivers/i2c/busses/i2c-sprd.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/io.h>
@@ -16,6 +17,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #define I2C_CTL			0x00
 #define I2C_ADDR_CFG		0x04
diff --git a/drivers/i2c/busses/i2c-st.c b/drivers/i2c/busses/i2c-st.c
index ce2333408904..4a86f172e63a 100644
--- a/drivers/i2c/busses/i2c-st.c
+++ b/drivers/i2c/busses/i2c-st.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
@@ -19,6 +20,7 @@
 #include <linux/of.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 /* SSC registers */
 #define SSC_BRG				0x000
diff --git a/drivers/i2c/busses/i2c-stm32.c b/drivers/i2c/busses/i2c-stm32.c
index 157c64e27d0b..2ad56023e190 100644
--- a/drivers/i2c/busses/i2c-stm32.c
+++ b/drivers/i2c/busses/i2c-stm32.c
@@ -7,6 +7,7 @@
  */
 
 #include "i2c-stm32.h"
+#include <linux/completion.h>
 
 /* Functions for DMA support */
 struct stm32_i2c_dma *stm32_i2c_dma_request(struct device *dev,
diff --git a/drivers/i2c/busses/i2c-stm32f4.c b/drivers/i2c/busses/i2c-stm32f4.c
index 859ac0cf7f6c..5cb419c37ebc 100644
--- a/drivers/i2c/busses/i2c-stm32f4.c
+++ b/drivers/i2c/busses/i2c-stm32f4.c
@@ -15,6 +15,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
@@ -27,6 +28,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include "i2c-stm32.h"
 
diff --git a/drivers/i2c/busses/i2c-stm32f7.c b/drivers/i2c/busses/i2c-stm32f7.c
index 01210452216b..a463d37637a9 100644
--- a/drivers/i2c/busses/i2c-stm32f7.c
+++ b/drivers/i2c/busses/i2c-stm32f7.c
@@ -15,6 +15,7 @@
  *
  */
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
@@ -34,6 +35,7 @@
 #include <linux/regmap.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "i2c-stm32.h"
 
diff --git a/drivers/i2c/busses/i2c-sun6i-p2wi.c b/drivers/i2c/busses/i2c-sun6i-p2wi.c
index 85e035e7a1d7..012168ac383e 100644
--- a/drivers/i2c/busses/i2c-sun6i-p2wi.c
+++ b/drivers/i2c/busses/i2c-sun6i-p2wi.c
@@ -22,6 +22,7 @@
  *
  */
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/i2c.h>
 #include <linux/io.h>
 #include <linux/interrupt.h>
diff --git a/drivers/i2c/busses/i2c-synquacer.c b/drivers/i2c/busses/i2c-synquacer.c
index bbea521b05dd..2fe00ecdcd32 100644
--- a/drivers/i2c/busses/i2c-synquacer.c
+++ b/drivers/i2c/busses/i2c-synquacer.c
@@ -5,6 +5,7 @@
 
 #include <linux/acpi.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
diff --git a/drivers/i2c/busses/i2c-taos-evm.c b/drivers/i2c/busses/i2c-taos-evm.c
index b0f0120793e1..9bce3897e2d8 100644
--- a/drivers/i2c/busses/i2c-taos-evm.c
+++ b/drivers/i2c/busses/i2c-taos-evm.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
@@ -15,6 +16,7 @@
 #include <linux/serio.h>
 #include <linux/init.h>
 #include <linux/i2c.h>
+#include <linux/sprintf.h>
 
 #define TAOS_BUFFER_SIZE	63
 
diff --git a/drivers/i2c/busses/i2c-tegra.c b/drivers/i2c/busses/i2c-tegra.c
index 920d5a8cbf4c..759ce8049545 100644
--- a/drivers/i2c/busses/i2c-tegra.c
+++ b/drivers/i2c/busses/i2c-tegra.c
@@ -9,6 +9,7 @@
 #include <linux/acpi.h>
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/i2c/busses/i2c-thunderx-pcidrv.c b/drivers/i2c/busses/i2c-thunderx-pcidrv.c
index a77cd86fe75e..c2bd88dcdb2c 100644
--- a/drivers/i2c/busses/i2c-thunderx-pcidrv.c
+++ b/drivers/i2c/busses/i2c-thunderx-pcidrv.c
@@ -20,6 +20,7 @@
 #include <linux/module.h>
 #include <linux/of_irq.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "i2c-octeon-core.h"
 
diff --git a/drivers/i2c/busses/i2c-tiny-usb.c b/drivers/i2c/busses/i2c-tiny-usb.c
index 1bffe36c40ad..050855545f8e 100644
--- a/drivers/i2c/busses/i2c-tiny-usb.c
+++ b/drivers/i2c/busses/i2c-tiny-usb.c
@@ -10,6 +10,7 @@
 #include <linux/errno.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 /* include interfaces to usb layer */
diff --git a/drivers/i2c/busses/i2c-uniphier-f.c b/drivers/i2c/busses/i2c-uniphier-f.c
index dbc91c7c3788..1fa5e3c1f026 100644
--- a/drivers/i2c/busses/i2c-uniphier-f.c
+++ b/drivers/i2c/busses/i2c-uniphier-f.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/i2c.h>
 #include <linux/iopoll.h>
 #include <linux/interrupt.h>
diff --git a/drivers/i2c/busses/i2c-uniphier.c b/drivers/i2c/busses/i2c-uniphier.c
index 854ac25b5862..3b284e23b646 100644
--- a/drivers/i2c/busses/i2c-uniphier.c
+++ b/drivers/i2c/busses/i2c-uniphier.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/i2c/busses/i2c-viapro.c b/drivers/i2c/busses/i2c-viapro.c
index 2cc7bba3b8bf..8f6fdb284212 100644
--- a/drivers/i2c/busses/i2c-viapro.c
+++ b/drivers/i2c/busses/i2c-viapro.c
@@ -34,6 +34,7 @@
 #include <linux/delay.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/ioport.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-viperboard.c b/drivers/i2c/busses/i2c-viperboard.c
index 9e153b5b0e8e..3bbef74789e3 100644
--- a/drivers/i2c/busses/i2c-viperboard.c
+++ b/drivers/i2c/busses/i2c-viperboard.c
@@ -11,6 +11,7 @@
 #include <linux/errno.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
diff --git a/drivers/i2c/busses/i2c-virtio.c b/drivers/i2c/busses/i2c-virtio.c
index c60ae531ba57..fb177dc485dd 100644
--- a/drivers/i2c/busses/i2c-virtio.c
+++ b/drivers/i2c/busses/i2c-virtio.c
@@ -14,6 +14,7 @@
 #include <linux/i2c.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_ids.h>
 #include <linux/virtio_config.h>
diff --git a/drivers/i2c/busses/i2c-wmt.c b/drivers/i2c/busses/i2c-wmt.c
index ec2a8da134e5..60a86320bb0f 100644
--- a/drivers/i2c/busses/i2c-wmt.c
+++ b/drivers/i2c/busses/i2c-wmt.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
diff --git a/drivers/i2c/busses/i2c-xgene-slimpro.c b/drivers/i2c/busses/i2c-xgene-slimpro.c
index 658396c9eeab..863c1e8b3185 100644
--- a/drivers/i2c/busses/i2c-xgene-slimpro.c
+++ b/drivers/i2c/busses/i2c-xgene-slimpro.c
@@ -11,6 +11,7 @@
  */
 #include <acpi/pcc.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
@@ -19,6 +20,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define MAILBOX_OP_TIMEOUT		1000	/* Operation time out in ms */
 #define MAILBOX_I2C_INDEX		0
diff --git a/drivers/i2c/busses/i2c-xiic.c b/drivers/i2c/busses/i2c-xiic.c
index 71391b590ada..dbdb2fc67339 100644
--- a/drivers/i2c/busses/i2c-xiic.c
+++ b/drivers/i2c/busses/i2c-xiic.c
@@ -30,6 +30,7 @@
 #include <linux/of.h>
 #include <linux/clk.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "xiic-i2c"
 #define DYNAMIC_MODE_READ_BROKEN_BIT	BIT(0)
diff --git a/drivers/i2c/busses/i2c-xlp9xx.c b/drivers/i2c/busses/i2c-xlp9xx.c
index 08a59a920929..bf687218b926 100644
--- a/drivers/i2c/busses/i2c-xlp9xx.c
+++ b/drivers/i2c/busses/i2c-xlp9xx.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #define XLP9XX_I2C_DIV			0x0
 #define XLP9XX_I2C_CTRL			0x1
diff --git a/drivers/i2c/busses/scx200_acb.c b/drivers/i2c/busses/scx200_acb.c
index 3648382b885a..0d36b1a22276 100644
--- a/drivers/i2c/busses/scx200_acb.c
+++ b/drivers/i2c/busses/scx200_acb.c
@@ -24,6 +24,7 @@
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <linux/scx200.h>
 
diff --git a/drivers/i2c/i2c-atr.c b/drivers/i2c/i2c-atr.c
index f21475ae5921..79cf38856e5d 100644
--- a/drivers/i2c/i2c-atr.c
+++ b/drivers/i2c/i2c-atr.c
@@ -16,6 +16,7 @@
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #define ATR_MAX_ADAPTERS 100	/* Just a sanity limit */
 #define ATR_MAX_SYMLINK_LEN 11	/* Longest name is 10 chars: "channel-99" */
diff --git a/drivers/i2c/i2c-core-base.c b/drivers/i2c/i2c-core-base.c
index 3bd48d4b6318..2631cbf4834d 100644
--- a/drivers/i2c/i2c-core-base.c
+++ b/drivers/i2c/i2c-core-base.c
@@ -42,6 +42,7 @@
 #include <linux/property.h>
 #include <linux/rwsem.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "i2c-core.h"
 
diff --git a/drivers/i2c/i2c-core.h b/drivers/i2c/i2c-core.h
index 36587f38dff3..e1158ccc7453 100644
--- a/drivers/i2c/i2c-core.h
+++ b/drivers/i2c/i2c-core.h
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kconfig.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/rwsem.h>
 
 struct i2c_devinfo {
diff --git a/drivers/i2c/i2c-dev.c b/drivers/i2c/i2c-dev.c
index 8b7e599f1674..23dfab9abab0 100644
--- a/drivers/i2c/i2c-dev.c
+++ b/drivers/i2c/i2c-dev.c
@@ -29,6 +29,7 @@
 #include <linux/module.h>
 #include <linux/notifier.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 /*
diff --git a/drivers/i2c/i2c-mux.c b/drivers/i2c/i2c-mux.c
index 57ff09f18c37..15aaf5f5c3f5 100644
--- a/drivers/i2c/i2c-mux.c
+++ b/drivers/i2c/i2c-mux.c
@@ -26,6 +26,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 /* multiplexer per channel data */
diff --git a/drivers/i2c/muxes/i2c-demux-pinctrl.c b/drivers/i2c/muxes/i2c-demux-pinctrl.c
index 7e2686b606c0..778d0c03b1af 100644
--- a/drivers/i2c/muxes/i2c-demux-pinctrl.c
+++ b/drivers/i2c/muxes/i2c-demux-pinctrl.c
@@ -11,12 +11,14 @@
 
 #include <linux/i2c.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 struct i2c_demux_pinctrl_chan {
diff --git a/drivers/i2c/muxes/i2c-mux-pca954x.c b/drivers/i2c/muxes/i2c-mux-pca954x.c
index f5dfc33b97c0..54778fd295a2 100644
--- a/drivers/i2c/muxes/i2c-mux-pca954x.c
+++ b/drivers/i2c/muxes/i2c-mux-pca954x.c
@@ -45,6 +45,7 @@
 #include <linux/i2c-mux.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pm.h>
 #include <linux/property.h>
@@ -52,6 +53,7 @@
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <dt-bindings/mux/mux.h>
+#include <linux/sprintf.h>
 
 #define PCA954X_MAX_NCHANS 8
 
diff --git a/drivers/i3c/master.c b/drivers/i3c/master.c
index 3afa530c5e32..eed219b8eda0 100644
--- a/drivers/i3c/master.c
+++ b/drivers/i3c/master.c
@@ -7,14 +7,17 @@
 
 #include <linux/atomic.h>
 #include <linux/bug.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/export.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/of.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include "internals.h"
diff --git a/drivers/i3c/master/i3c-master-cdns.c b/drivers/i3c/master/i3c-master-cdns.c
index c1627f3552ce..8fb0512f29a2 100644
--- a/drivers/i3c/master/i3c-master-cdns.c
+++ b/drivers/i3c/master/i3c-master-cdns.c
@@ -7,6 +7,7 @@
 
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/errno.h>
 #include <linux/i3c/master.h>
diff --git a/drivers/i3c/master/mipi-i3c-hci/cmd_v1.c b/drivers/i3c/master/mipi-i3c-hci/cmd_v1.c
index 638b054d6c92..6c0a9d918617 100644
--- a/drivers/i3c/master/mipi-i3c-hci/cmd_v1.c
+++ b/drivers/i3c/master/mipi-i3c-hci/cmd_v1.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/i3c/master.h>
 
 #include "hci.h"
diff --git a/drivers/i3c/master/mipi-i3c-hci/cmd_v2.c b/drivers/i3c/master/mipi-i3c-hci/cmd_v2.c
index 4493b2b067cb..5e29eb08b09d 100644
--- a/drivers/i3c/master/mipi-i3c-hci/cmd_v2.c
+++ b/drivers/i3c/master/mipi-i3c-hci/cmd_v2.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/i3c/master.h>
 
 #include "hci.h"
diff --git a/drivers/i3c/master/mipi-i3c-hci/core.c b/drivers/i3c/master/mipi-i3c-hci/core.c
index d7e966a25583..bf96402e1ab9 100644
--- a/drivers/i3c/master/mipi-i3c-hci/core.c
+++ b/drivers/i3c/master/mipi-i3c-hci/core.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/errno.h>
 #include <linux/i3c/master.h>
diff --git a/drivers/i3c/master/mipi-i3c-hci/dma.c b/drivers/i3c/master/mipi-i3c-hci/dma.c
index 4e01a95cc4d0..c1250ea93a0e 100644
--- a/drivers/i3c/master/mipi-i3c-hci/dma.c
+++ b/drivers/i3c/master/mipi-i3c-hci/dma.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
 #include <linux/errno.h>
diff --git a/drivers/i3c/master/mipi-i3c-hci/pio.c b/drivers/i3c/master/mipi-i3c-hci/pio.c
index d0272aa93599..82df45a24cf9 100644
--- a/drivers/i3c/master/mipi-i3c-hci/pio.c
+++ b/drivers/i3c/master/mipi-i3c-hci/pio.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/errno.h>
 #include <linux/i3c/master.h>
diff --git a/drivers/idle/intel_idle.c b/drivers/idle/intel_idle.c
index bcf1198e8991..7bb8b99b331b 100644
--- a/drivers/idle/intel_idle.c
+++ b/drivers/idle/intel_idle.c
@@ -44,6 +44,7 @@
 #include <linux/acpi.h>
 #include <linux/kernel.h>
 #include <linux/cpuidle.h>
+#include <linux/sprintf.h>
 #include <linux/tick.h>
 #include <trace/events/power.h>
 #include <linux/sched.h>
diff --git a/drivers/iio/accel/adxl372.c b/drivers/iio/accel/adxl372.c
index c4193286eb05..80492521b14b 100644
--- a/drivers/iio/accel/adxl372.c
+++ b/drivers/iio/accel/adxl372.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/regmap.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/accel/bma180.c b/drivers/iio/accel/bma180.c
index ab4fccb24b6c..a179ac29d577 100644
--- a/drivers/iio/accel/bma180.c
+++ b/drivers/iio/accel/bma180.c
@@ -20,6 +20,7 @@
 #include <linux/bitops.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/accel/bmc150-accel-core.c b/drivers/iio/accel/bmc150-accel-core.c
index 110591804b4c..a45af800dbb9 100644
--- a/drivers/iio/accel/bmc150-accel-core.c
+++ b/drivers/iio/accel/bmc150-accel-core.c
@@ -22,6 +22,7 @@
 #include <linux/iio/triggered_buffer.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #include "bmc150-accel.h"
 
diff --git a/drivers/iio/accel/bmc150-accel-i2c.c b/drivers/iio/accel/bmc150-accel-i2c.c
index f08594b372cf..d3ba27bcb682 100644
--- a/drivers/iio/accel/bmc150-accel-i2c.c
+++ b/drivers/iio/accel/bmc150-accel-i2c.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/acpi.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include "bmc150-accel.h"
 
diff --git a/drivers/iio/accel/kxcjk-1013.c b/drivers/iio/accel/kxcjk-1013.c
index c5f5b1ce7954..1c2710a6b7ad 100644
--- a/drivers/iio/accel/kxcjk-1013.c
+++ b/drivers/iio/accel/kxcjk-1013.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/bitops.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/acpi.h>
 #include <linux/pm.h>
diff --git a/drivers/iio/accel/mma8452.c b/drivers/iio/accel/mma8452.c
index d3fd0318e47b..bb6485950a65 100644
--- a/drivers/iio/accel/mma8452.c
+++ b/drivers/iio/accel/mma8452.c
@@ -32,6 +32,7 @@
 #include <linux/of_irq.h>
 #include <linux/pm_runtime.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #define MMA8452_STATUS				0x00
 #define  MMA8452_STATUS_DRDY			(BIT(2) | BIT(1) | BIT(0))
diff --git a/drivers/iio/accel/sca3000.c b/drivers/iio/accel/sca3000.c
index 87c54e41f6cc..cf6ca49805c6 100644
--- a/drivers/iio/accel/sca3000.c
+++ b/drivers/iio/accel/sca3000.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/kernel.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/module.h>
 #include <linux/uaccess.h>
diff --git a/drivers/iio/adc/ab8500-gpadc.c b/drivers/iio/adc/ab8500-gpadc.c
index 80645fee79a4..ba6638728aa2 100644
--- a/drivers/iio/adc/ab8500-gpadc.c
+++ b/drivers/iio/adc/ab8500-gpadc.c
@@ -24,6 +24,7 @@
  */
 #include <linux/init.h>
 #include <linux/bits.h>
+#include <linux/completion.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
 #include <linux/device.h>
diff --git a/drivers/iio/adc/ad4130.c b/drivers/iio/adc/ad4130.c
index 62490424b6ae..34ce49e1a186 100644
--- a/drivers/iio/adc/ad4130.c
+++ b/drivers/iio/adc/ad4130.c
@@ -8,6 +8,7 @@
 #include <linux/bitops.h>
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
diff --git a/drivers/iio/adc/ad7192.c b/drivers/iio/adc/ad7192.c
index adc3cbe92d6e..59f7b17a9396 100644
--- a/drivers/iio/adc/ad7192.c
+++ b/drivers/iio/adc/ad7192.c
@@ -10,6 +10,7 @@
 #include <linux/clk.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/sysfs.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/iio/adc/ad7280a.c b/drivers/iio/adc/ad7280a.c
index d4a4e15c8244..70ecda003030 100644
--- a/drivers/iio/adc/ad7280a.c
+++ b/drivers/iio/adc/ad7280a.c
@@ -13,6 +13,7 @@
 #include <linux/err.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/mutex.h>
diff --git a/drivers/iio/adc/ad7606.c b/drivers/iio/adc/ad7606.c
index 1928d9ae5bcf..750b30038b00 100644
--- a/drivers/iio/adc/ad7606.c
+++ b/drivers/iio/adc/ad7606.c
@@ -16,8 +16,10 @@
 #include <linux/regulator/consumer.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/util_macros.h>
+#include <linux/completion.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/adc/ad7768-1.c b/drivers/iio/adc/ad7768-1.c
index 70a25949142c..f9a8b2162dbf 100644
--- a/drivers/iio/adc/ad7768-1.c
+++ b/drivers/iio/adc/ad7768-1.c
@@ -6,6 +6,7 @@
  */
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
@@ -13,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/spi/spi.h>
 
diff --git a/drivers/iio/adc/ad799x.c b/drivers/iio/adc/ad799x.c
index b757cc45c4de..27c1e6e1fbec 100644
--- a/drivers/iio/adc/ad799x.c
+++ b/drivers/iio/adc/ad799x.c
@@ -21,6 +21,8 @@
 #include <linux/interrupt.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/i2c.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/iio/adc/ad_sigma_delta.c b/drivers/iio/adc/ad_sigma_delta.c
index a602429cdde4..3604c5222b7a 100644
--- a/drivers/iio/adc/ad_sigma_delta.c
+++ b/drivers/iio/adc/ad_sigma_delta.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/align.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
diff --git a/drivers/iio/adc/aspeed_adc.c b/drivers/iio/adc/aspeed_adc.c
index 998e8bcc06e1..e33f58c486a3 100644
--- a/drivers/iio/adc/aspeed_adc.c
+++ b/drivers/iio/adc/aspeed_adc.c
@@ -23,6 +23,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/bitfield.h>
 #include <linux/regmap.h>
diff --git a/drivers/iio/adc/at91_adc.c b/drivers/iio/adc/at91_adc.c
index eb501e3c86a5..bd410736d905 100644
--- a/drivers/iio/adc/at91_adc.c
+++ b/drivers/iio/adc/at91_adc.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/adc/bcm_iproc_adc.c b/drivers/iio/adc/bcm_iproc_adc.c
index 5bc514bd5ebc..bebb663be972 100644
--- a/drivers/iio/adc/bcm_iproc_adc.c
+++ b/drivers/iio/adc/bcm_iproc_adc.c
@@ -7,6 +7,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/mfd/syscon.h>
 #include <linux/regmap.h>
 #include <linux/delay.h>
diff --git a/drivers/iio/adc/envelope-detector.c b/drivers/iio/adc/envelope-detector.c
index e911c25d106d..a9e1c06834ee 100644
--- a/drivers/iio/adc/envelope-detector.c
+++ b/drivers/iio/adc/envelope-detector.c
@@ -30,6 +30,7 @@
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/mutex.h>
@@ -40,6 +41,7 @@
 #include <linux/irq.h>
 #include <linux/platform_device.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 struct envelope {
diff --git a/drivers/iio/adc/exynos_adc.c b/drivers/iio/adc/exynos_adc.c
index 614de9644800..680540165f63 100644
--- a/drivers/iio/adc/exynos_adc.c
+++ b/drivers/iio/adc/exynos_adc.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/interrupt.h>
diff --git a/drivers/iio/adc/fsl-imx25-gcq.c b/drivers/iio/adc/fsl-imx25-gcq.c
index 68c813de0605..da3ba4cda214 100644
--- a/drivers/iio/adc/fsl-imx25-gcq.c
+++ b/drivers/iio/adc/fsl-imx25-gcq.c
@@ -8,6 +8,7 @@
 
 #include <dt-bindings/iio/adc/fsl-imx25-gcq.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/iio/iio.h>
 #include <linux/interrupt.h>
 #include <linux/mfd/imx25-tsadc.h>
@@ -16,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #define MX25_GCQ_TIMEOUT (msecs_to_jiffies(2000))
 
diff --git a/drivers/iio/adc/hx711.c b/drivers/iio/adc/hx711.c
index c80c55fb8c6c..934ec2707b6d 100644
--- a/drivers/iio/adc/hx711.c
+++ b/drivers/iio/adc/hx711.c
@@ -20,6 +20,7 @@
 #include <linux/iio/triggered_buffer.h>
 #include <linux/gpio/consumer.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 /* gain to pulse and scale conversion */
 #define HX711_GAIN_MAX		3
diff --git a/drivers/iio/adc/ina2xx-adc.c b/drivers/iio/adc/ina2xx-adc.c
index 9e52207352fb..0dbca1ad792f 100644
--- a/drivers/iio/adc/ina2xx-adc.c
+++ b/drivers/iio/adc/ina2xx-adc.c
@@ -26,6 +26,7 @@
 #include <linux/iio/buffer.h>
 #include <linux/iio/kfifo_buf.h>
 #include <linux/iio/sysfs.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/module.h>
 #include <linux/of.h>
diff --git a/drivers/iio/adc/max1027.c b/drivers/iio/adc/max1027.c
index 136fcf753837..d5cd11d8950e 100644
--- a/drivers/iio/adc/max1027.c
+++ b/drivers/iio/adc/max1027.c
@@ -17,6 +17,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/spi/spi.h>
 #include <linux/delay.h>
+#include <linux/completion.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/adc/max11410.c b/drivers/iio/adc/max11410.c
index 6af829349b4e..6e93c50be8e1 100644
--- a/drivers/iio/adc/max11410.c
+++ b/drivers/iio/adc/max11410.c
@@ -5,11 +5,13 @@
  * Copyright 2022 Analog Devices Inc.
  */
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/iio/adc/max1363.c b/drivers/iio/adc/max1363.c
index 7c2a98b8c3a9..684b6e585708 100644
--- a/drivers/iio/adc/max1363.c
+++ b/drivers/iio/adc/max1363.c
@@ -15,6 +15,8 @@
 #include <linux/interrupt.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/list.h>
 #include <linux/i2c.h>
diff --git a/drivers/iio/adc/mcp3422.c b/drivers/iio/adc/mcp3422.c
index 0778a8fb6866..755e04c80a7b 100644
--- a/drivers/iio/adc/mcp3422.c
+++ b/drivers/iio/adc/mcp3422.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <asm/unaligned.h>
 
diff --git a/drivers/iio/adc/mcp3564.c b/drivers/iio/adc/mcp3564.c
index 311b613b6057..e925da571cff 100644
--- a/drivers/iio/adc/mcp3564.c
+++ b/drivers/iio/adc/mcp3564.c
@@ -18,8 +18,10 @@
 
 #include <linux/bitfield.h>
 #include <linux/iopoll.h>
+#include <linux/kstrtox.h>
 #include <linux/regulator/consumer.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 #include <linux/util_macros.h>
 
diff --git a/drivers/iio/adc/meson_saradc.c b/drivers/iio/adc/meson_saradc.c
index 13b473d8c6c7..e3636c5d378e 100644
--- a/drivers/iio/adc/meson_saradc.c
+++ b/drivers/iio/adc/meson_saradc.c
@@ -8,6 +8,7 @@
 #include <linux/bitfield.h>
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/iio/iio.h>
@@ -21,6 +22,7 @@
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
 #include <linux/mfd/syscon.h>
+#include <linux/sprintf.h>
 
 #define MESON_SAR_ADC_REG0					0x00
 	#define MESON_SAR_ADC_REG0_PANEL_DETECT			BIT(31)
diff --git a/drivers/iio/adc/mt6360-adc.c b/drivers/iio/adc/mt6360-adc.c
index 3710473e526f..0ac2d37cf4f9 100644
--- a/drivers/iio/adc/mt6360-adc.c
+++ b/drivers/iio/adc/mt6360-adc.c
@@ -10,6 +10,7 @@
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/buffer.h>
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/adc/mxs-lradc-adc.c b/drivers/iio/adc/mxs-lradc-adc.c
index 2e60c10ee4ff..0127650bfd5c 100644
--- a/drivers/iio/adc/mxs-lradc-adc.c
+++ b/drivers/iio/adc/mxs-lradc-adc.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/adc/nau7802.c b/drivers/iio/adc/nau7802.c
index d9e1696df7ae..3fdd7d87698b 100644
--- a/drivers/iio/adc/nau7802.c
+++ b/drivers/iio/adc/nau7802.c
@@ -11,8 +11,10 @@
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/log2.h>
+#include <linux/completion.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/adc/qcom-pm8xxx-xoadc.c b/drivers/iio/adc/qcom-pm8xxx-xoadc.c
index 01c5586df56d..5a31cb9862b1 100644
--- a/drivers/iio/adc/qcom-pm8xxx-xoadc.c
+++ b/drivers/iio/adc/qcom-pm8xxx-xoadc.c
@@ -21,6 +21,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/regulator/consumer.h>
+#include <linux/completion.h>
 
 /*
  * Definitions for the "user processor" registers lifted from the v3.4
diff --git a/drivers/iio/adc/qcom-spmi-rradc.c b/drivers/iio/adc/qcom-spmi-rradc.c
index 56a713766954..24c04ed61f77 100644
--- a/drivers/iio/adc/qcom-spmi-rradc.c
+++ b/drivers/iio/adc/qcom-spmi-rradc.c
@@ -17,6 +17,7 @@
 #include <linux/property.h>
 #include <linux/regmap.h>
 #include <linux/spmi.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/units.h>
 
diff --git a/drivers/iio/adc/rockchip_saradc.c b/drivers/iio/adc/rockchip_saradc.c
index dd94667a623b..d0be1c76bfb2 100644
--- a/drivers/iio/adc/rockchip_saradc.c
+++ b/drivers/iio/adc/rockchip_saradc.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
diff --git a/drivers/iio/adc/spear_adc.c b/drivers/iio/adc/spear_adc.c
index 71362c2ddf89..0f8ff9a4f87f 100644
--- a/drivers/iio/adc/spear_adc.c
+++ b/drivers/iio/adc/spear_adc.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/completion.h>
 #include <linux/of.h>
diff --git a/drivers/iio/adc/stm32-adc.c b/drivers/iio/adc/stm32-adc.c
index b5d3c9cea5c4..2500eb115481 100644
--- a/drivers/iio/adc/stm32-adc.c
+++ b/drivers/iio/adc/stm32-adc.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
@@ -27,6 +28,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #include "stm32-adc-core.h"
 
diff --git a/drivers/iio/adc/stm32-dfsdm-adc.c b/drivers/iio/adc/stm32-dfsdm-adc.c
index ca08ae3108b2..db3365f43c33 100644
--- a/drivers/iio/adc/stm32-dfsdm-adc.c
+++ b/drivers/iio/adc/stm32-dfsdm-adc.c
@@ -18,12 +18,15 @@
 #include <linux/iio/trigger_consumer.h>
 #include <linux/iio/triggered_buffer.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "stm32-dfsdm.h"
 
diff --git a/drivers/iio/adc/ti-ads131e08.c b/drivers/iio/adc/ti-ads131e08.c
index fcfc46254313..1a646cb5ab13 100644
--- a/drivers/iio/adc/ti-ads131e08.c
+++ b/drivers/iio/adc/ti-ads131e08.c
@@ -10,6 +10,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/module.h>
 
diff --git a/drivers/iio/adc/ti-ads8688.c b/drivers/iio/adc/ti-ads8688.c
index ef06a897421a..108d5d00d5f0 100644
--- a/drivers/iio/adc/ti-ads8688.c
+++ b/drivers/iio/adc/ti-ads8688.c
@@ -6,6 +6,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/spi/spi.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/iio/adc/ti-tsc2046.c b/drivers/iio/adc/ti-tsc2046.c
index 1bbb51a6683c..d388673500a1 100644
--- a/drivers/iio/adc/ti-tsc2046.c
+++ b/drivers/iio/adc/ti-tsc2046.c
@@ -11,6 +11,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/spi/spi.h>
 #include <linux/units.h>
+#include <linux/hrtimer.h>
 
 #include <asm/unaligned.h>
 
diff --git a/drivers/iio/adc/twl6030-gpadc.c b/drivers/iio/adc/twl6030-gpadc.c
index 78bf55438b2c..48b9df7146bc 100644
--- a/drivers/iio/adc/twl6030-gpadc.c
+++ b/drivers/iio/adc/twl6030-gpadc.c
@@ -14,6 +14,7 @@
  * Copyright (C) 2008 Nokia Corporation
  * Mikko Ylinen <mikko.k.ylinen@nokia.com>
  */
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
 #include <linux/mod_devicetable.h>
diff --git a/drivers/iio/adc/vf610_adc.c b/drivers/iio/adc/vf610_adc.c
index e4548df3f8fb..482e7de2cb19 100644
--- a/drivers/iio/adc/vf610_adc.c
+++ b/drivers/iio/adc/vf610_adc.c
@@ -19,6 +19,7 @@
 #include <linux/completion.h>
 #include <linux/regulator/consumer.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/adc/xilinx-xadc-core.c b/drivers/iio/adc/xilinx-xadc-core.c
index 564c0cad0fc7..d83c4a260c08 100644
--- a/drivers/iio/adc/xilinx-xadc-core.c
+++ b/drivers/iio/adc/xilinx-xadc-core.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/interrupt.h>
diff --git a/drivers/iio/addac/ad74115.c b/drivers/iio/addac/ad74115.c
index e6bc5eb3788d..0222b7217b35 100644
--- a/drivers/iio/addac/ad74115.c
+++ b/drivers/iio/addac/ad74115.c
@@ -6,6 +6,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/crc8.h>
 #include <linux/device.h>
 #include <linux/gpio/driver.h>
diff --git a/drivers/iio/addac/ad74413r.c b/drivers/iio/addac/ad74413r.c
index 7af3e4b8fe3b..2c95a162b8f1 100644
--- a/drivers/iio/addac/ad74413r.c
+++ b/drivers/iio/addac/ad74413r.c
@@ -6,6 +6,7 @@
 
 #include <asm/unaligned.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/crc8.h>
 #include <linux/device.h>
 #include <linux/err.h>
diff --git a/drivers/iio/cdc/ad7746.c b/drivers/iio/cdc/ad7746.c
index d11bc3496dda..123189f89493 100644
--- a/drivers/iio/cdc/ad7746.c
+++ b/drivers/iio/cdc/ad7746.c
@@ -11,6 +11,7 @@
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/stat.h>
diff --git a/drivers/iio/chemical/atlas-ezo-sensor.c b/drivers/iio/chemical/atlas-ezo-sensor.c
index 761a853a4d17..ddaa3734a763 100644
--- a/drivers/iio/chemical/atlas-ezo-sensor.c
+++ b/drivers/iio/chemical/atlas-ezo-sensor.c
@@ -8,6 +8,7 @@
 
 #include <linux/init.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/iio/chemical/scd30_core.c b/drivers/iio/chemical/scd30_core.c
index 7be5a45cf71a..a61e384a1f3a 100644
--- a/drivers/iio/chemical/scd30_core.c
+++ b/drivers/iio/chemical/scd30_core.c
@@ -21,6 +21,7 @@
 #include <linux/irqreturn.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/iio/chemical/scd30_serial.c b/drivers/iio/chemical/scd30_serial.c
index 2adb76dbb020..34b20686da3e 100644
--- a/drivers/iio/chemical/scd30_serial.c
+++ b/drivers/iio/chemical/scd30_serial.c
@@ -16,6 +16,7 @@
 #include <linux/string.h>
 #include <linux/types.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "scd30.h"
 
diff --git a/drivers/iio/chemical/scd4x.c b/drivers/iio/chemical/scd4x.c
index ca6b20270711..eed3763e1fd2 100644
--- a/drivers/iio/chemical/scd4x.c
+++ b/drivers/iio/chemical/scd4x.c
@@ -24,6 +24,7 @@
 #include <linux/iio/triggered_buffer.h>
 #include <linux/iio/types.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
diff --git a/drivers/iio/chemical/sps30.c b/drivers/iio/chemical/sps30.c
index 814ce0aad1cc..cbdc4a9cebed 100644
--- a/drivers/iio/chemical/sps30.c
+++ b/drivers/iio/chemical/sps30.c
@@ -14,6 +14,7 @@
 #include <linux/iio/trigger_consumer.h>
 #include <linux/iio/triggered_buffer.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 
 #include "sps30.h"
diff --git a/drivers/iio/chemical/sunrise_co2.c b/drivers/iio/chemical/sunrise_co2.c
index cdb8696a4e81..d399fcc915e1 100644
--- a/drivers/iio/chemical/sunrise_co2.c
+++ b/drivers/iio/chemical/sunrise_co2.c
@@ -13,6 +13,7 @@
 #include <linux/bitops.h>
 #include <linux/i2c.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/iio/common/cros_ec_sensors/cros_ec_sensors_core.c b/drivers/iio/common/cros_ec_sensors/cros_ec_sensors_core.c
index 6bfe5d6847e7..0ef911439d7c 100644
--- a/drivers/iio/common/cros_ec_sensors/cros_ec_sensors_core.c
+++ b/drivers/iio/common/cros_ec_sensors/cros_ec_sensors_core.c
@@ -16,12 +16,14 @@
 #include <linux/iio/trigger_consumer.h>
 #include <linux/iio/triggered_buffer.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/platform_data/cros_ec_commands.h>
 #include <linux/platform_data/cros_ec_proto.h>
 #include <linux/platform_data/cros_ec_sensorhub.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 /*
  * Hard coded to the first device to support sensor fifo.  The EC has a 2048
diff --git a/drivers/iio/common/hid-sensors/hid-sensor-trigger.c b/drivers/iio/common/hid-sensors/hid-sensor-trigger.c
index ad8910e6ad59..2b6afe832f94 100644
--- a/drivers/iio/common/hid-sensors/hid-sensor-trigger.c
+++ b/drivers/iio/common/hid-sensors/hid-sensor-trigger.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/hid-sensor-hub.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/trigger.h>
diff --git a/drivers/iio/common/ms_sensors/ms_sensors_i2c.c b/drivers/iio/common/ms_sensors/ms_sensors_i2c.c
index 9c9bc77003c7..f68e05e390f1 100644
--- a/drivers/iio/common/ms_sensors/ms_sensors_i2c.c
+++ b/drivers/iio/common/ms_sensors/ms_sensors_i2c.c
@@ -9,6 +9,7 @@
 #include <linux/iio/iio.h>
 #include <linux/device.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 
 #include "ms_sensors_i2c.h"
 
diff --git a/drivers/iio/common/scmi_sensors/scmi_iio.c b/drivers/iio/common/scmi_sensors/scmi_iio.c
index 0c2caf3570db..83618559f9f6 100644
--- a/drivers/iio/common/scmi_sensors/scmi_iio.c
+++ b/drivers/iio/common/scmi_sensors/scmi_iio.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/scmi_protocol.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/types.h>
 #include <linux/units.h>
diff --git a/drivers/iio/common/ssp_sensors/ssp_spi.c b/drivers/iio/common/ssp_sensors/ssp_spi.c
index f32b04b63ea1..c08c7e8ed85b 100644
--- a/drivers/iio/common/ssp_sensors/ssp_spi.c
+++ b/drivers/iio/common/ssp_sensors/ssp_spi.c
@@ -4,6 +4,7 @@
  */
 
 #include "ssp.h"
+#include <linux/completion.h>
 
 #define SSP_DEV (&data->spi->dev)
 #define SSP_GET_MESSAGE_TYPE(data) (data & (3 << SSP_RW))
diff --git a/drivers/iio/common/st_sensors/st_sensors_core.c b/drivers/iio/common/st_sensors/st_sensors_core.c
index c77d7bdcc121..39580120b2a3 100644
--- a/drivers/iio/common/st_sensors/st_sensors_core.c
+++ b/drivers/iio/common/st_sensors/st_sensors_core.c
@@ -18,6 +18,7 @@
 #include <linux/regmap.h>
 #include <asm/unaligned.h>
 #include <linux/iio/common/st_sensors.h>
+#include <linux/sprintf.h>
 
 #include "st_sensors_core.h"
 
diff --git a/drivers/iio/dac/ad5064.c b/drivers/iio/dac/ad5064.c
index 7712dc6be608..00d832778fde 100644
--- a/drivers/iio/dac/ad5064.c
+++ b/drivers/iio/dac/ad5064.c
@@ -11,6 +11,7 @@
 
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/iio/dac/ad5360.c b/drivers/iio/dac/ad5360.c
index e0b7f658d611..441d2dbf8250 100644
--- a/drivers/iio/dac/ad5360.c
+++ b/drivers/iio/dac/ad5360.c
@@ -8,6 +8,7 @@
 
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/iio/dac/ad5380.c b/drivers/iio/dac/ad5380.c
index 2e3e33f92bc0..9b856d263c89 100644
--- a/drivers/iio/dac/ad5380.c
+++ b/drivers/iio/dac/ad5380.c
@@ -10,6 +10,7 @@
 #include <linux/err.h>
 #include <linux/i2c.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/spi/spi.h>
 #include <linux/slab.h>
diff --git a/drivers/iio/dac/ad5446.c b/drivers/iio/dac/ad5446.c
index 8103d2cd13f6..019951158eb1 100644
--- a/drivers/iio/dac/ad5446.c
+++ b/drivers/iio/dac/ad5446.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/workqueue.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
diff --git a/drivers/iio/dac/ad5504.c b/drivers/iio/dac/ad5504.c
index e6c5be728bb2..5e5636416e9d 100644
--- a/drivers/iio/dac/ad5504.c
+++ b/drivers/iio/dac/ad5504.c
@@ -9,6 +9,7 @@
 #include <linux/fs.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/spi/spi.h>
 #include <linux/slab.h>
 #include <linux/sysfs.h>
diff --git a/drivers/iio/dac/ad5592r-base.c b/drivers/iio/dac/ad5592r-base.c
index 076bc9ecfb49..63ca03650267 100644
--- a/drivers/iio/dac/ad5592r-base.c
+++ b/drivers/iio/dac/ad5592r-base.c
@@ -15,6 +15,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/gpio/driver.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/iio/adi,ad5592r.h>
 
diff --git a/drivers/iio/dac/ad5624r_spi.c b/drivers/iio/dac/ad5624r_spi.c
index 7e6f824de299..e8103157adca 100644
--- a/drivers/iio/dac/ad5624r_spi.c
+++ b/drivers/iio/dac/ad5624r_spi.c
@@ -9,6 +9,7 @@
 #include <linux/fs.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/spi/spi.h>
 #include <linux/slab.h>
 #include <linux/sysfs.h>
diff --git a/drivers/iio/dac/ad5686.c b/drivers/iio/dac/ad5686.c
index 57cc0f0eedc6..ea23aa451657 100644
--- a/drivers/iio/dac/ad5686.c
+++ b/drivers/iio/dac/ad5686.c
@@ -8,6 +8,7 @@
 #include <linux/interrupt.h>
 #include <linux/fs.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
diff --git a/drivers/iio/dac/ad5755.c b/drivers/iio/dac/ad5755.c
index 404865e35460..3fb274b527b3 100644
--- a/drivers/iio/dac/ad5755.c
+++ b/drivers/iio/dac/ad5755.c
@@ -7,6 +7,7 @@
 
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/iio/dac/ad5758.c b/drivers/iio/dac/ad5758.c
index 98771e37a7b5..f62828fffd53 100644
--- a/drivers/iio/dac/ad5758.c
+++ b/drivers/iio/dac/ad5758.c
@@ -9,6 +9,7 @@
 #include <linux/bsearch.h>
 #include <linux/delay.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/property.h>
diff --git a/drivers/iio/dac/ad5766.c b/drivers/iio/dac/ad5766.c
index 899894523752..48f0fd5eee39 100644
--- a/drivers/iio/dac/ad5766.c
+++ b/drivers/iio/dac/ad5766.c
@@ -12,9 +12,11 @@
 #include <linux/iio/iio.h>
 #include <linux/iio/triggered_buffer.h>
 #include <linux/iio/trigger_consumer.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/spi/spi.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #define AD5766_UPPER_WORD_SPI_MASK		GENMASK(31, 16)
 #define AD5766_LOWER_WORD_SPI_MASK		GENMASK(15, 0)
diff --git a/drivers/iio/dac/ad5770r.c b/drivers/iio/dac/ad5770r.c
index f66d67402e43..9ad14d3b4387 100644
--- a/drivers/iio/dac/ad5770r.c
+++ b/drivers/iio/dac/ad5770r.c
@@ -12,6 +12,7 @@
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/property.h>
 #include <linux/regmap.h>
diff --git a/drivers/iio/dac/ad5791.c b/drivers/iio/dac/ad5791.c
index 75b549827e15..d4630260c27d 100644
--- a/drivers/iio/dac/ad5791.c
+++ b/drivers/iio/dac/ad5791.c
@@ -10,6 +10,7 @@
 #include <linux/fs.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/spi/spi.h>
 #include <linux/slab.h>
 #include <linux/sysfs.h>
diff --git a/drivers/iio/dac/ad7303.c b/drivers/iio/dac/ad7303.c
index bff6bf697d9c..5aa4255578fc 100644
--- a/drivers/iio/dac/ad7303.c
+++ b/drivers/iio/dac/ad7303.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/kernel.h>
diff --git a/drivers/iio/dac/ltc2632.c b/drivers/iio/dac/ltc2632.c
index 3a3c4f4874e4..c699f983ac55 100644
--- a/drivers/iio/dac/ltc2632.c
+++ b/drivers/iio/dac/ltc2632.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/spi/spi.h>
 #include <linux/module.h>
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/dac/ltc2688.c b/drivers/iio/dac/ltc2688.c
index fc8eb53c65be..fd0e4a20293f 100644
--- a/drivers/iio/dac/ltc2688.c
+++ b/drivers/iio/dac/ltc2688.c
@@ -10,6 +10,7 @@
 #include <linux/device.h>
 #include <linux/gpio/consumer.h>
 #include <linux/iio/iio.h>
+#include <linux/kstrtox.h>
 #include <linux/limits.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
diff --git a/drivers/iio/dac/max5821.c b/drivers/iio/dac/max5821.c
index 18ba3eaaad75..957398268313 100644
--- a/drivers/iio/dac/max5821.c
+++ b/drivers/iio/dac/max5821.c
@@ -5,6 +5,7 @@
   */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/i2c.h>
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/dac/mcp4725.c b/drivers/iio/dac/mcp4725.c
index 25bb1c0490af..39f644c2f745 100644
--- a/drivers/iio/dac/mcp4725.c
+++ b/drivers/iio/dac/mcp4725.c
@@ -15,6 +15,7 @@
 #include <linux/i2c.h>
 #include <linux/err.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/regulator/consumer.h>
 #include <linux/mod_devicetable.h>
 #include <linux/property.h>
diff --git a/drivers/iio/dac/mcp4728.c b/drivers/iio/dac/mcp4728.c
index 5113f67ddc31..a1e66ccacf39 100644
--- a/drivers/iio/dac/mcp4728.c
+++ b/drivers/iio/dac/mcp4728.c
@@ -19,6 +19,7 @@
 #include <linux/i2c.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/property.h>
diff --git a/drivers/iio/dac/ti-dac082s085.c b/drivers/iio/dac/ti-dac082s085.c
index 8e1590e3cc8b..303a2f2643d3 100644
--- a/drivers/iio/dac/ti-dac082s085.c
+++ b/drivers/iio/dac/ti-dac082s085.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/iio/iio.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/iio/dac/ti-dac5571.c b/drivers/iio/dac/ti-dac5571.c
index efb1269a77c1..c7226ae73cfa 100644
--- a/drivers/iio/dac/ti-dac5571.c
+++ b/drivers/iio/dac/ti-dac5571.c
@@ -18,6 +18,7 @@
 
 #include <linux/iio/iio.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/property.h>
diff --git a/drivers/iio/dac/ti-dac7311.c b/drivers/iio/dac/ti-dac7311.c
index 7f89d2a52f49..02323196c4e8 100644
--- a/drivers/iio/dac/ti-dac7311.c
+++ b/drivers/iio/dac/ti-dac7311.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/iio/iio.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/regulator/consumer.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/iio/dummy/iio_dummy_evgen.c b/drivers/iio/dummy/iio_dummy_evgen.c
index 16d3f144dda0..bd7aaefb3b51 100644
--- a/drivers/iio/dummy/iio_dummy_evgen.c
+++ b/drivers/iio/dummy/iio_dummy_evgen.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
diff --git a/drivers/iio/frequency/ad9523.c b/drivers/iio/frequency/ad9523.c
index b391c6e27ab0..fb61666971d6 100644
--- a/drivers/iio/frequency/ad9523.c
+++ b/drivers/iio/frequency/ad9523.c
@@ -7,6 +7,7 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/sysfs.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/iio/frequency/adf4350.c b/drivers/iio/frequency/adf4350.c
index 4abf80f75ef5..d32f7e769b9c 100644
--- a/drivers/iio/frequency/adf4350.c
+++ b/drivers/iio/frequency/adf4350.c
@@ -7,10 +7,12 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/spi/spi.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/iio/frequency/adf4371.c b/drivers/iio/frequency/adf4371.c
index b27088464826..64b908f4314b 100644
--- a/drivers/iio/frequency/adf4371.c
+++ b/drivers/iio/frequency/adf4371.c
@@ -10,8 +10,10 @@
 #include <linux/err.h>
 #include <linux/gcd.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/spi/spi.h>
 
diff --git a/drivers/iio/frequency/adf4377.c b/drivers/iio/frequency/adf4377.c
index 9284c13f1abb..cdf3715e1a08 100644
--- a/drivers/iio/frequency/adf4377.c
+++ b/drivers/iio/frequency/adf4377.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/gpio/consumer.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/notifier.h>
 #include <linux/property.h>
diff --git a/drivers/iio/frequency/admv1013.c b/drivers/iio/frequency/admv1013.c
index 92923074f930..861d5024eb23 100644
--- a/drivers/iio/frequency/admv1013.c
+++ b/drivers/iio/frequency/admv1013.c
@@ -10,6 +10,7 @@
 #include <linux/clk.h>
 #include <linux/device.h>
 #include <linux/iio/iio.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/notifier.h>
diff --git a/drivers/iio/frequency/admv1014.c b/drivers/iio/frequency/admv1014.c
index b46b73b89eb7..c03486ecaecc 100644
--- a/drivers/iio/frequency/admv1014.c
+++ b/drivers/iio/frequency/admv1014.c
@@ -11,6 +11,7 @@
 #include <linux/clkdev.h>
 #include <linux/device.h>
 #include <linux/iio/iio.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/notifier.h>
diff --git a/drivers/iio/gyro/adis16136.c b/drivers/iio/gyro/adis16136.c
index c95cf41be34b..a1b6ca92d90a 100644
--- a/drivers/iio/gyro/adis16136.c
+++ b/drivers/iio/gyro/adis16136.c
@@ -8,7 +8,9 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/module.h>
 
diff --git a/drivers/iio/humidity/hts221_core.c b/drivers/iio/humidity/hts221_core.c
index 2a413da87b76..3add5ab9c44e 100644
--- a/drivers/iio/humidity/hts221_core.c
+++ b/drivers/iio/humidity/hts221_core.c
@@ -16,6 +16,7 @@
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 
 #include "hts221.h"
 
diff --git a/drivers/iio/imu/adis16400.c b/drivers/iio/imu/adis16400.c
index 3eda32e12a53..9664f5c3c426 100644
--- a/drivers/iio/imu/adis16400.c
+++ b/drivers/iio/imu/adis16400.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/imu/adis16475.c b/drivers/iio/imu/adis16475.c
index 01f55cc902fa..b3c755c42ca7 100644
--- a/drivers/iio/imu/adis16475.c
+++ b/drivers/iio/imu/adis16475.c
@@ -22,6 +22,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/property.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 #define ADIS16475_REG_DIAG_STAT		0x02
 #define ADIS16475_REG_X_GYRO_L		0x04
diff --git a/drivers/iio/imu/adis16480.c b/drivers/iio/imu/adis16480.c
index b40a55bba30c..23ed6e48caec 100644
--- a/drivers/iio/imu/adis16480.c
+++ b/drivers/iio/imu/adis16480.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/lcm.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/swab.h>
 #include <linux/crc32.h>
 
diff --git a/drivers/iio/imu/bmi323/bmi323_core.c b/drivers/iio/imu/bmi323/bmi323_core.c
index 183af482828f..e907222c38ac 100644
--- a/drivers/iio/imu/bmi323/bmi323_core.c
+++ b/drivers/iio/imu/bmi323/bmi323_core.c
@@ -11,6 +11,7 @@
 #include <linux/cleanup.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/minmax.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/iio/imu/bno055/bno055.c b/drivers/iio/imu/bno055/bno055.c
index 52744dd98e65..ce7cba971789 100644
--- a/drivers/iio/imu/bno055/bno055.c
+++ b/drivers/iio/imu/bno055/bno055.c
@@ -21,9 +21,11 @@
 #include <linux/device.h>
 #include <linux/firmware.h>
 #include <linux/gpio/consumer.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/util_macros.h>
 
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/imu/inv_mpu6050/inv_mpu_core.c b/drivers/iio/imu/inv_mpu6050/inv_mpu_core.c
index 0e94e5335e93..0e0bd9ecaf42 100644
--- a/drivers/iio/imu/inv_mpu6050/inv_mpu_core.c
+++ b/drivers/iio/imu/inv_mpu6050/inv_mpu_core.c
@@ -8,6 +8,8 @@
 #include <linux/i2c.h>
 #include <linux/err.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/jiffies.h>
 #include <linux/irq.h>
diff --git a/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_core.c b/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_core.c
index b6e6b1df8a61..d4e6bcb8fdd1 100644
--- a/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_core.c
+++ b/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_core.c
@@ -70,6 +70,7 @@
 #include <linux/property.h>
 #include <linux/regmap.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_data/st_sensors_pdata.h>
 
diff --git a/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_shub.c b/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_shub.c
index c1b444520d2a..775a2e63835e 100644
--- a/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_shub.c
+++ b/drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_shub.c
@@ -27,6 +27,7 @@
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 
 #include "st_lsm6dsx.h"
 
diff --git a/drivers/iio/industrialio-buffer.c b/drivers/iio/industrialio-buffer.c
index b581a7e80566..cf23286e349c 100644
--- a/drivers/iio/industrialio-buffer.c
+++ b/drivers/iio/industrialio-buffer.c
@@ -16,9 +16,11 @@
 #include <linux/file.h>
 #include <linux/fs.h>
 #include <linux/cdev.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/poll.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/iio-opaque.h>
diff --git a/drivers/iio/industrialio-core.c b/drivers/iio/industrialio-core.c
index cbbcff407adc..491e42bab92b 100644
--- a/drivers/iio/industrialio-core.c
+++ b/drivers/iio/industrialio-core.c
@@ -18,12 +18,14 @@
 #include <linux/idr.h>
 #include <linux/kdev_t.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/poll.h>
 #include <linux/property.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/industrialio-event.c b/drivers/iio/industrialio-event.c
index 910c1f14abd5..88f9761b6c73 100644
--- a/drivers/iio/industrialio-event.c
+++ b/drivers/iio/industrialio-event.c
@@ -11,10 +11,12 @@
 #include <linux/fs.h>
 #include <linux/kernel.h>
 #include <linux/kfifo.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/poll.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/wait.h>
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/light/bh1750.c b/drivers/iio/light/bh1750.c
index 4b869fa9e5b1..288dc5aa9266 100644
--- a/drivers/iio/light/bh1750.c
+++ b/drivers/iio/light/bh1750.c
@@ -22,6 +22,7 @@
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define BH1750_POWER_DOWN		0x00
 #define BH1750_ONE_TIME_H_RES_MODE	0x20 /* auto-mode for BH1721 */
diff --git a/drivers/iio/light/cm32181.c b/drivers/iio/light/cm32181.c
index 9df85b3999fa..3e03f6e6a9b4 100644
--- a/drivers/iio/light/cm32181.c
+++ b/drivers/iio/light/cm32181.c
@@ -17,6 +17,7 @@
 #include <linux/iio/sysfs.h>
 #include <linux/iio/events.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 
 /* Registers Address */
 #define CM32181_REG_ADDR_CMD		0x00
diff --git a/drivers/iio/light/cm3232.c b/drivers/iio/light/cm3232.c
index d48a70efca69..fc17df94a4cb 100644
--- a/drivers/iio/light/cm3232.c
+++ b/drivers/iio/light/cm3232.c
@@ -14,6 +14,7 @@
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 
 /* Registers Address */
 #define CM3232_REG_ADDR_CMD		0x00
diff --git a/drivers/iio/light/isl29018.c b/drivers/iio/light/isl29018.c
index 43484c18b101..7433ad4cd895 100644
--- a/drivers/iio/light/isl29018.c
+++ b/drivers/iio/light/isl29018.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/i2c.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/delay.h>
 #include <linux/regmap.h>
@@ -19,6 +20,7 @@
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #define ISL29018_CONV_TIME_MS		100
 
diff --git a/drivers/iio/light/lm3533-als.c b/drivers/iio/light/lm3533-als.c
index 7800f7fa51b7..846358ad4269 100644
--- a/drivers/iio/light/lm3533-als.c
+++ b/drivers/iio/light/lm3533-als.c
@@ -13,6 +13,7 @@
 #include <linux/io.h>
 #include <linux/iio/events.h>
 #include <linux/iio/iio.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/mfd/core.h>
diff --git a/drivers/iio/light/ltr501.c b/drivers/iio/light/ltr501.c
index 8c516ede9116..1397e08fd6a7 100644
--- a/drivers/iio/light/ltr501.c
+++ b/drivers/iio/light/ltr501.c
@@ -17,6 +17,7 @@
 #include <linux/regmap.h>
 #include <linux/acpi.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/events.h>
diff --git a/drivers/iio/light/lv0104cs.c b/drivers/iio/light/lv0104cs.c
index a5445d58fddf..00b27d14535a 100644
--- a/drivers/iio/light/lv0104cs.c
+++ b/drivers/iio/light/lv0104cs.c
@@ -18,6 +18,7 @@
 #include <linux/delay.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
+#include <linux/sprintf.h>
 
 #define LV0104CS_REGVAL_MEASURE		0xE0
 #define LV0104CS_REGVAL_SLEEP		0x00
diff --git a/drivers/iio/light/si1133.c b/drivers/iio/light/si1133.c
index ea2c437199c0..30213321bff4 100644
--- a/drivers/iio/light/si1133.c
+++ b/drivers/iio/light/si1133.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/regmap.h>
+#include <linux/completion.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/light/stk3310.c b/drivers/iio/light/stk3310.c
index 7b71ad71d78d..e8e6888b8b61 100644
--- a/drivers/iio/light/stk3310.c
+++ b/drivers/iio/light/stk3310.c
@@ -16,6 +16,7 @@
 #include <linux/iio/events.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
+#include <linux/sprintf.h>
 
 #define STK3310_REG_STATE			0x00
 #define STK3310_REG_PSCTRL			0x01
diff --git a/drivers/iio/light/tcs3472.c b/drivers/iio/light/tcs3472.c
index 75fcf2c93717..2ba4ee395197 100644
--- a/drivers/iio/light/tcs3472.c
+++ b/drivers/iio/light/tcs3472.c
@@ -17,6 +17,7 @@
 #include <linux/i2c.h>
 #include <linux/delay.h>
 #include <linux/pm.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/light/tsl2583.c b/drivers/iio/light/tsl2583.c
index 02ad11611b9c..35aaf2aa8705 100644
--- a/drivers/iio/light/tsl2583.c
+++ b/drivers/iio/light/tsl2583.c
@@ -11,6 +11,8 @@
 #include <linux/i2c.h>
 #include <linux/errno.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mutex.h>
 #include <linux/unistd.h>
diff --git a/drivers/iio/light/tsl2772.c b/drivers/iio/light/tsl2772.c
index cab468a82b61..a2fac6e697bb 100644
--- a/drivers/iio/light/tsl2772.c
+++ b/drivers/iio/light/tsl2772.c
@@ -13,10 +13,12 @@
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/events.h>
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/light/vcnl4000.c b/drivers/iio/light/vcnl4000.c
index 4e3641ff2ed4..17b0abd871d6 100644
--- a/drivers/iio/light/vcnl4000.c
+++ b/drivers/iio/light/vcnl4000.c
@@ -24,6 +24,7 @@
 #include <linux/delay.h>
 #include <linux/pm_runtime.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/light/zopt2201.c b/drivers/iio/light/zopt2201.c
index d370193a4742..5575e399b9f9 100644
--- a/drivers/iio/light/zopt2201.c
+++ b/drivers/iio/light/zopt2201.c
@@ -15,6 +15,7 @@
 #include <linux/mutex.h>
 #include <linux/err.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/magnetometer/bmc150_magn.c b/drivers/iio/magnetometer/bmc150_magn.c
index 06d5a1ef1fbd..dbff1541e297 100644
--- a/drivers/iio/magnetometer/bmc150_magn.c
+++ b/drivers/iio/magnetometer/bmc150_magn.c
@@ -26,6 +26,7 @@
 #include <linux/iio/triggered_buffer.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #include "bmc150_magn.h"
 
diff --git a/drivers/iio/magnetometer/hmc5843_core.c b/drivers/iio/magnetometer/hmc5843_core.c
index c5521d61da29..071c63943348 100644
--- a/drivers/iio/magnetometer/hmc5843_core.c
+++ b/drivers/iio/magnetometer/hmc5843_core.c
@@ -19,6 +19,7 @@
 #include <linux/iio/buffer.h>
 #include <linux/iio/triggered_buffer.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "hmc5843.h"
 
diff --git a/drivers/iio/magnetometer/mag3110.c b/drivers/iio/magnetometer/mag3110.c
index deffe3ca9004..d5d17ef98ca6 100644
--- a/drivers/iio/magnetometer/mag3110.c
+++ b/drivers/iio/magnetometer/mag3110.c
@@ -18,6 +18,7 @@
 #include <linux/iio/triggered_buffer.h>
 #include <linux/delay.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #define MAG3110_STATUS 0x00
 #define MAG3110_OUT_X 0x01 /* MSB first */
diff --git a/drivers/iio/magnetometer/rm3100-core.c b/drivers/iio/magnetometer/rm3100-core.c
index 42b70cd42b39..6d546993f3fd 100644
--- a/drivers/iio/magnetometer/rm3100-core.c
+++ b/drivers/iio/magnetometer/rm3100-core.c
@@ -10,6 +10,7 @@
  * TODO: event generation, pm.
  */
 
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
diff --git a/drivers/iio/magnetometer/tmag5273.c b/drivers/iio/magnetometer/tmag5273.c
index 218b1ce076c1..a2a947a437ae 100644
--- a/drivers/iio/magnetometer/tmag5273.c
+++ b/drivers/iio/magnetometer/tmag5273.c
@@ -14,6 +14,7 @@
 #include <linux/i2c.h>
 #include <linux/regmap.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/position/hid-sensor-custom-intel-hinge.c b/drivers/iio/position/hid-sensor-custom-intel-hinge.c
index 76e173850a35..8880fac8b9aa 100644
--- a/drivers/iio/position/hid-sensor-custom-intel-hinge.c
+++ b/drivers/iio/position/hid-sensor-custom-intel-hinge.c
@@ -9,6 +9,7 @@
 #include <linux/platform_device.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
+#include <linux/sprintf.h>
 
 #include "../common/hid-sensors/hid-sensor-trigger.h"
 
diff --git a/drivers/iio/potentiostat/lmp91000.c b/drivers/iio/potentiostat/lmp91000.c
index bd0f2c3bf2f2..275695369715 100644
--- a/drivers/iio/potentiostat/lmp91000.c
+++ b/drivers/iio/potentiostat/lmp91000.c
@@ -19,6 +19,7 @@
 #include <linux/iio/trigger.h>
 #include <linux/iio/trigger_consumer.h>
 #include <linux/iio/triggered_buffer.h>
+#include <linux/completion.h>
 
 #define LMP91000_REG_LOCK		0x01
 #define LMP91000_REG_TIACN		0x10
diff --git a/drivers/iio/pressure/bmp280-core.c b/drivers/iio/pressure/bmp280-core.c
index fe8734468ed3..5faff0afa9d2 100644
--- a/drivers/iio/pressure/bmp280-core.c
+++ b/drivers/iio/pressure/bmp280-core.c
@@ -27,6 +27,7 @@
 
 #include <linux/bitops.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/module.h>
 #include <linux/nvmem-provider.h>
diff --git a/drivers/iio/pressure/dlhl60d.c b/drivers/iio/pressure/dlhl60d.c
index 28c8269ba65d..15b030502569 100644
--- a/drivers/iio/pressure/dlhl60d.c
+++ b/drivers/iio/pressure/dlhl60d.c
@@ -16,6 +16,7 @@
 #include <linux/iio/trigger_consumer.h>
 #include <linux/iio/triggered_buffer.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 /* Commands */
 #define DLH_START_SINGLE    0xAA
diff --git a/drivers/iio/pressure/mprls0025pa.c b/drivers/iio/pressure/mprls0025pa.c
index 33a15d4c642c..d3113703029f 100644
--- a/drivers/iio/pressure/mprls0025pa.c
+++ b/drivers/iio/pressure/mprls0025pa.c
@@ -12,6 +12,7 @@
 #include <linux/array_size.h>
 #include <linux/bitfield.h>
 #include <linux/bits.h>
+#include <linux/completion.h>
 #include <linux/math64.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
diff --git a/drivers/iio/pressure/zpa2326.c b/drivers/iio/pressure/zpa2326.c
index 421e059d1f19..288032e35836 100644
--- a/drivers/iio/pressure/zpa2326.c
+++ b/drivers/iio/pressure/zpa2326.c
@@ -66,6 +66,7 @@
 #include <linux/iio/triggered_buffer.h>
 #include <asm/unaligned.h>
 #include "zpa2326.h"
+#include <linux/completion.h>
 
 /* 200 ms should be enough for the longest conversion time in one-shot mode. */
 #define ZPA2326_CONVERSION_JIFFIES (HZ / 5)
diff --git a/drivers/iio/proximity/as3935.c b/drivers/iio/proximity/as3935.c
index 96fa97451cbf..cd9821b1b5e6 100644
--- a/drivers/iio/proximity/as3935.c
+++ b/drivers/iio/proximity/as3935.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/workqueue.h>
 #include <linux/devm-helpers.h>
 #include <linux/mutex.h>
diff --git a/drivers/iio/proximity/isl29501.c b/drivers/iio/proximity/isl29501.c
index bcebacaf3dab..fab6de05b7e1 100644
--- a/drivers/iio/proximity/isl29501.c
+++ b/drivers/iio/proximity/isl29501.c
@@ -9,12 +9,14 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/i2c.h>
 #include <linux/err.h>
 #include <linux/mod_devicetable.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/trigger_consumer.h>
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/proximity/mb1232.c b/drivers/iio/proximity/mb1232.c
index 614e65cb9d42..b39590f4347b 100644
--- a/drivers/iio/proximity/mb1232.c
+++ b/drivers/iio/proximity/mb1232.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/i2c.h>
 #include <linux/delay.h>
diff --git a/drivers/iio/proximity/ping.c b/drivers/iio/proximity/ping.c
index 2ad69b150902..bfd9fc759d20 100644
--- a/drivers/iio/proximity/ping.c
+++ b/drivers/iio/proximity/ping.c
@@ -35,6 +35,7 @@
 #include <linux/property.h>
 #include <linux/sched.h>
 #include <linux/interrupt.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/iio/iio.h>
 #include <linux/iio/sysfs.h>
diff --git a/drivers/iio/proximity/srf04.c b/drivers/iio/proximity/srf04.c
index 86c57672fc7e..a57bcc391c6b 100644
--- a/drivers/iio/proximity/srf04.c
+++ b/drivers/iio/proximity/srf04.c
@@ -43,6 +43,7 @@
 #include <linux/property.h>
 #include <linux/sched.h>
 #include <linux/interrupt.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/pm_runtime.h>
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/proximity/srf08.c b/drivers/iio/proximity/srf08.c
index a75ea5042876..881bea73b17b 100644
--- a/drivers/iio/proximity/srf08.c
+++ b/drivers/iio/proximity/srf08.c
@@ -15,6 +15,7 @@
 #include <linux/err.h>
 #include <linux/i2c.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/bitops.h>
 #include <linux/iio/iio.h>
@@ -22,6 +23,7 @@
 #include <linux/iio/buffer.h>
 #include <linux/iio/trigger_consumer.h>
 #include <linux/iio/triggered_buffer.h>
+#include <linux/sprintf.h>
 
 /* registers of SRF08 device */
 #define SRF08_WRITE_COMMAND	0x00	/* Command Register */
diff --git a/drivers/iio/proximity/sx9324.c b/drivers/iio/proximity/sx9324.c
index ac2ed2da21cc..0611f73ecfd0 100644
--- a/drivers/iio/proximity/sx9324.c
+++ b/drivers/iio/proximity/sx9324.c
@@ -20,6 +20,7 @@
 #include <linux/pm.h>
 #include <linux/property.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include <linux/iio/iio.h>
 
diff --git a/drivers/iio/proximity/sx9500.c b/drivers/iio/proximity/sx9500.c
index 550e7d3cd5ee..338c9bb8b82a 100644
--- a/drivers/iio/proximity/sx9500.c
+++ b/drivers/iio/proximity/sx9500.c
@@ -13,6 +13,7 @@
 #include <linux/i2c.h>
 #include <linux/irq.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/gpio/consumer.h>
 #include <linux/regmap.h>
 #include <linux/pm.h>
diff --git a/drivers/iio/proximity/sx_common.c b/drivers/iio/proximity/sx_common.c
index fe07d1444ac3..42227d94364b 100644
--- a/drivers/iio/proximity/sx_common.c
+++ b/drivers/iio/proximity/sx_common.c
@@ -7,6 +7,7 @@
 
 #include <linux/bitops.h>
 #include <linux/byteorder/generic.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
@@ -18,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <vdso/bits.h>
 
 #include <linux/iio/buffer.h>
diff --git a/drivers/iio/proximity/vl53l0x-i2c.c b/drivers/iio/proximity/vl53l0x-i2c.c
index 2cea64bea909..7554cbc8213c 100644
--- a/drivers/iio/proximity/vl53l0x-i2c.c
+++ b/drivers/iio/proximity/vl53l0x-i2c.c
@@ -20,6 +20,7 @@
 #include <linux/irq.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <linux/iio/iio.h>
 
diff --git a/drivers/iio/resolver/ad2s1210.c b/drivers/iio/resolver/ad2s1210.c
index a414eef12e5e..381cd711a038 100644
--- a/drivers/iio/resolver/ad2s1210.c
+++ b/drivers/iio/resolver/ad2s1210.c
@@ -52,11 +52,13 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/gpio/consumer.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
 
diff --git a/drivers/iio/temperature/max31856.c b/drivers/iio/temperature/max31856.c
index 8307aae2cb45..4aea9e828273 100644
--- a/drivers/iio/temperature/max31856.c
+++ b/drivers/iio/temperature/max31856.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/iio/temperature/max31865.c b/drivers/iio/temperature/max31865.c
index 29e23652ba5a..e27e41c89186 100644
--- a/drivers/iio/temperature/max31865.c
+++ b/drivers/iio/temperature/max31865.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/iio/iio.h>
diff --git a/drivers/iio/temperature/tsys01.c b/drivers/iio/temperature/tsys01.c
index 53ef56fbfe1d..4c4c02f1c137 100644
--- a/drivers/iio/temperature/tsys01.c
+++ b/drivers/iio/temperature/tsys01.c
@@ -16,6 +16,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include "../common/ms_sensors/ms_sensors_i2c.h"
 
diff --git a/drivers/iio/test/iio-test-format.c b/drivers/iio/test/iio-test-format.c
index fc67e6b73df7..38dd0d12ea4b 100644
--- a/drivers/iio/test/iio-test-format.c
+++ b/drivers/iio/test/iio-test-format.c
@@ -6,6 +6,7 @@
 
 #include <kunit/test.h>
 #include <linux/iio/iio.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define IIO_TEST_FORMAT_EXPECT_EQ(_test, _buf, _ret, _val) do { \
 		KUNIT_EXPECT_EQ(_test, strlen(_buf), _ret); \
diff --git a/drivers/iio/trigger/iio-trig-sysfs.c b/drivers/iio/trigger/iio-trig-sysfs.c
index 575d725696a9..83720cd7cca6 100644
--- a/drivers/iio/trigger/iio-trig-sysfs.c
+++ b/drivers/iio/trigger/iio-trig-sysfs.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
diff --git a/drivers/iio/trigger/stm32-timer-trigger.c b/drivers/iio/trigger/stm32-timer-trigger.c
index d76444030a28..ea2df4ec887a 100644
--- a/drivers/iio/trigger/stm32-timer-trigger.c
+++ b/drivers/iio/trigger/stm32-timer-trigger.c
@@ -10,11 +10,13 @@
 #include <linux/iio/sysfs.h>
 #include <linux/iio/timer/stm32-timer-trigger.h>
 #include <linux/iio/trigger.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/stm32-timers.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #define MAX_TRIGGERS 7
 #define MAX_VALIDS 5
diff --git a/drivers/infiniband/core/addr.c b/drivers/infiniband/core/addr.c
index f253295795f0..6000ad2b6e30 100644
--- a/drivers/infiniband/core/addr.c
+++ b/drivers/infiniband/core/addr.c
@@ -49,6 +49,7 @@
 #include <rdma/ib.h>
 #include <rdma/rdma_netlink.h>
 #include <net/netlink.h>
+#include <linux/completion.h>
 
 #include "core_priv.h"
 
diff --git a/drivers/infiniband/core/cma_configfs.c b/drivers/infiniband/core/cma_configfs.c
index f2fb2d8a6597..1a7e9c6558b8 100644
--- a/drivers/infiniband/core/cma_configfs.c
+++ b/drivers/infiniband/core/cma_configfs.c
@@ -31,6 +31,8 @@
  */
 
 #include <linux/configfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/rdma_cm.h>
 
diff --git a/drivers/infiniband/core/device.c b/drivers/infiniband/core/device.c
index 67bcea7a153c..c3e468184fa7 100644
--- a/drivers/infiniband/core/device.c
+++ b/drivers/infiniband/core/device.c
@@ -32,6 +32,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
@@ -46,6 +47,7 @@
 #include <rdma/ib_addr.h>
 #include <rdma/ib_cache.h>
 #include <rdma/rdma_counter.h>
+#include <linux/completion.h>
 
 #include "core_priv.h"
 #include "restrack.h"
diff --git a/drivers/infiniband/core/mad.c b/drivers/infiniband/core/mad.c
index 674344eb8e2f..ac34e3d20970 100644
--- a/drivers/infiniband/core/mad.c
+++ b/drivers/infiniband/core/mad.c
@@ -41,8 +41,10 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/security.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 #include <rdma/ib_cache.h>
+#include <linux/completion.h>
 
 #include "mad_priv.h"
 #include "core_priv.h"
diff --git a/drivers/infiniband/core/mad_rmpp.c b/drivers/infiniband/core/mad_rmpp.c
index 8af0619a39cd..23255753e88a 100644
--- a/drivers/infiniband/core/mad_rmpp.c
+++ b/drivers/infiniband/core/mad_rmpp.c
@@ -33,6 +33,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "mad_priv.h"
 #include "mad_rmpp.h"
diff --git a/drivers/infiniband/core/restrack.c b/drivers/infiniband/core/restrack.c
index 01a499a8b88d..a67620d86416 100644
--- a/drivers/infiniband/core/restrack.c
+++ b/drivers/infiniband/core/restrack.c
@@ -10,6 +10,7 @@
 #include <linux/mutex.h>
 #include <linux/sched/task.h>
 #include <linux/pid_namespace.h>
+#include <linux/completion.h>
 
 #include "cma_priv.h"
 #include "restrack.h"
diff --git a/drivers/infiniband/core/sa.h b/drivers/infiniband/core/sa.h
index 143de37ae598..5b6807895f41 100644
--- a/drivers/infiniband/core/sa.h
+++ b/drivers/infiniband/core/sa.h
@@ -36,6 +36,7 @@
 #define SA_H
 
 #include <rdma/ib_sa.h>
+#include <linux/completion.h>
 
 static inline void ib_sa_client_get(struct ib_sa_client *client)
 {
diff --git a/drivers/infiniband/core/sa_query.c b/drivers/infiniband/core/sa_query.c
index 8175dde60b0a..d9e1487821cb 100644
--- a/drivers/infiniband/core/sa_query.c
+++ b/drivers/infiniband/core/sa_query.c
@@ -53,6 +53,7 @@
 #include <rdma/rdma_cm.h>
 #include "sa.h"
 #include "core_priv.h"
+#include <linux/completion.h>
 
 #define IB_SA_LOCAL_SVC_TIMEOUT_MIN		100
 #define IB_SA_LOCAL_SVC_TIMEOUT_DEFAULT		2000
diff --git a/drivers/infiniband/core/sysfs.c b/drivers/infiniband/core/sysfs.c
index 9f97bef02149..1d6dc7254ebb 100644
--- a/drivers/infiniband/core/sysfs.c
+++ b/drivers/infiniband/core/sysfs.c
@@ -33,6 +33,8 @@
  */
 
 #include "core_priv.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/slab.h>
 #include <linux/stat.h>
diff --git a/drivers/infiniband/core/ucma.c b/drivers/infiniband/core/ucma.c
index 5f5ad8faf86e..b74800004f88 100644
--- a/drivers/infiniband/core/ucma.c
+++ b/drivers/infiniband/core/ucma.c
@@ -32,6 +32,7 @@
 
 #include <linux/completion.h>
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/mutex.h>
 #include <linux/poll.h>
 #include <linux/sched.h>
diff --git a/drivers/infiniband/core/user_mad.c b/drivers/infiniband/core/user_mad.c
index f5feca7fa9b9..c9e7cdf03fc5 100644
--- a/drivers/infiniband/core/user_mad.c
+++ b/drivers/infiniband/core/user_mad.c
@@ -50,6 +50,7 @@
 #include <linux/semaphore.h>
 #include <linux/slab.h>
 #include <linux/nospec.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 
diff --git a/drivers/infiniband/core/uverbs_cmd.c b/drivers/infiniband/core/uverbs_cmd.c
index 6de05ade2ba9..b7c4dafdef0b 100644
--- a/drivers/infiniband/core/uverbs_cmd.c
+++ b/drivers/infiniband/core/uverbs_cmd.c
@@ -35,6 +35,7 @@
 
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
 #include <linux/sched.h>
 
diff --git a/drivers/infiniband/core/uverbs_ioctl.c b/drivers/infiniband/core/uverbs_ioctl.c
index d9799706c58e..d369707d52c3 100644
--- a/drivers/infiniband/core/uverbs_ioctl.c
+++ b/drivers/infiniband/core/uverbs_ioctl.c
@@ -34,6 +34,7 @@
 #include <rdma/uverbs_ioctl.h>
 #include "rdma_core.h"
 #include "uverbs.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 struct bundle_alloc_head {
 	struct bundle_alloc_head *next;
diff --git a/drivers/infiniband/core/uverbs_main.c b/drivers/infiniband/core/uverbs_main.c
index 495d5a5d0373..15216023cee0 100644
--- a/drivers/infiniband/core/uverbs_main.c
+++ b/drivers/infiniband/core/uverbs_main.c
@@ -39,13 +39,16 @@
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/fs.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/poll.h>
 #include <linux/sched.h>
 #include <linux/file.h>
 #include <linux/cdev.h>
 #include <linux/anon_inodes.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <linux/sched/mm.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 
diff --git a/drivers/infiniband/core/uverbs_std_types_device.c b/drivers/infiniband/core/uverbs_std_types_device.c
index fb0555647336..ae1638d4c1c8 100644
--- a/drivers/infiniband/core/uverbs_std_types_device.c
+++ b/drivers/infiniband/core/uverbs_std_types_device.c
@@ -7,6 +7,7 @@
 #include <rdma/uverbs_std_types.h>
 #include "rdma_core.h"
 #include "uverbs.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <rdma/uverbs_ioctl.h>
 #include <rdma/opa_addr.h>
 #include <rdma/ib_cache.h>
diff --git a/drivers/infiniband/core/verbs.c b/drivers/infiniband/core/verbs.c
index 94a7f3b0c71c..8b7d4986855a 100644
--- a/drivers/infiniband/core/verbs.c
+++ b/drivers/infiniband/core/verbs.c
@@ -45,6 +45,7 @@
 #include <linux/in6.h>
 #include <net/addrconf.h>
 #include <linux/security.h>
+#include <linux/completion.h>
 
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_cache.h>
diff --git a/drivers/infiniband/hw/bnxt_re/ib_verbs.c b/drivers/infiniband/hw/bnxt_re/ib_verbs.c
index ce9c5bae83bf..673cd2511359 100644
--- a/drivers/infiniband/hw/bnxt_re/ib_verbs.c
+++ b/drivers/infiniband/hw/bnxt_re/ib_verbs.c
@@ -37,6 +37,7 @@
  */
 
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/netdevice.h>
diff --git a/drivers/infiniband/hw/bnxt_re/qplib_fp.c b/drivers/infiniband/hw/bnxt_re/qplib_fp.c
index 439d0c7c5d0c..18b569ffbf8f 100644
--- a/drivers/infiniband/hw/bnxt_re/qplib_fp.c
+++ b/drivers/infiniband/hw/bnxt_re/qplib_fp.c
@@ -46,6 +46,7 @@
 #include <linux/delay.h>
 #include <linux/prefetch.h>
 #include <linux/if_ether.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_mad.h>
 
 #include "roce_hsi.h"
diff --git a/drivers/infiniband/hw/bnxt_re/qplib_rcfw.c b/drivers/infiniband/hw/bnxt_re/qplib_rcfw.c
index 3ffaef0c2651..d093ec238f7e 100644
--- a/drivers/infiniband/hw/bnxt_re/qplib_rcfw.c
+++ b/drivers/infiniband/hw/bnxt_re/qplib_rcfw.c
@@ -43,6 +43,7 @@
 #include <linux/pci.h>
 #include <linux/prefetch.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "roce_hsi.h"
 #include "qplib_res.h"
diff --git a/drivers/infiniband/hw/cxgb4/cq.c b/drivers/infiniband/hw/cxgb4/cq.c
index 7e2835dcbc1c..094ff4bb0a24 100644
--- a/drivers/infiniband/hw/cxgb4/cq.c
+++ b/drivers/infiniband/hw/cxgb4/cq.c
@@ -31,6 +31,7 @@
  */
 
 #include <rdma/uverbs_ioctl.h>
+#include <linux/completion.h>
 
 #include "iw_cxgb4.h"
 
diff --git a/drivers/infiniband/hw/cxgb4/device.c b/drivers/infiniband/hw/cxgb4/device.c
index 80970a1738f8..0e15ca287a2b 100644
--- a/drivers/infiniband/hw/cxgb4/device.c
+++ b/drivers/infiniband/hw/cxgb4/device.c
@@ -32,8 +32,10 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/math64.h>
+#include <linux/completion.h>
 
 #include <rdma/ib_verbs.h>
 
diff --git a/drivers/infiniband/hw/cxgb4/provider.c b/drivers/infiniband/hw/cxgb4/provider.c
index 246b739ddb2b..ee54fc126054 100644
--- a/drivers/infiniband/hw/cxgb4/provider.c
+++ b/drivers/infiniband/hw/cxgb4/provider.c
@@ -41,6 +41,7 @@
 #include <linux/ethtool.h>
 #include <linux/rtnetlink.h>
 #include <linux/inetdevice.h>
+#include <linux/sprintf.h>
 #include <net/addrconf.h>
 #include <linux/io.h>
 
diff --git a/drivers/infiniband/hw/cxgb4/qp.c b/drivers/infiniband/hw/cxgb4/qp.c
index d16d8eaa1415..d7358246427c 100644
--- a/drivers/infiniband/hw/cxgb4/qp.c
+++ b/drivers/infiniband/hw/cxgb4/qp.c
@@ -32,6 +32,7 @@
 
 #include <linux/module.h>
 #include <rdma/uverbs_ioctl.h>
+#include <linux/completion.h>
 
 #include "iw_cxgb4.h"
 
diff --git a/drivers/infiniband/hw/cxgb4/resource.c b/drivers/infiniband/hw/cxgb4/resource.c
index e800e8e8bed5..9a37c54eec33 100644
--- a/drivers/infiniband/hw/cxgb4/resource.c
+++ b/drivers/infiniband/hw/cxgb4/resource.c
@@ -34,6 +34,7 @@
 #include <linux/genalloc.h>
 #include <linux/ratelimit.h>
 #include "iw_cxgb4.h"
+#include <linux/completion.h>
 
 static int c4iw_init_qid_table(struct c4iw_rdev *rdev)
 {
diff --git a/drivers/infiniband/hw/efa/efa_com.c b/drivers/infiniband/hw/efa/efa_com.c
index 16a24a05fc2a..e4d2993bfc0a 100644
--- a/drivers/infiniband/hw/efa/efa_com.c
+++ b/drivers/infiniband/hw/efa/efa_com.c
@@ -5,6 +5,8 @@
 
 #include "efa_com.h"
 #include "efa_regs_defs.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define ADMIN_CMD_TIMEOUT_US 30000000 /* usecs */
 
diff --git a/drivers/infiniband/hw/efa/efa_main.c b/drivers/infiniband/hw/efa/efa_main.c
index 5fa3603c80d8..a029f5a6d76c 100644
--- a/drivers/infiniband/hw/efa/efa_main.c
+++ b/drivers/infiniband/hw/efa/efa_main.c
@@ -5,6 +5,7 @@
 
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/version.h>
 
diff --git a/drivers/infiniband/hw/erdma/erdma_cmdq.c b/drivers/infiniband/hw/erdma/erdma_cmdq.c
index a151a7bdd504..a1a7018ab6e1 100644
--- a/drivers/infiniband/hw/erdma/erdma_cmdq.c
+++ b/drivers/infiniband/hw/erdma/erdma_cmdq.c
@@ -5,6 +5,8 @@
 /* Copyright (c) 2020-2022, Alibaba Group. */
 
 #include "erdma.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void arm_cmdq_cq(struct erdma_cmdq *cmdq)
 {
diff --git a/drivers/infiniband/hw/erdma/erdma_eq.c b/drivers/infiniband/hw/erdma/erdma_eq.c
index ea47cb21fdb8..7dafe37543bc 100644
--- a/drivers/infiniband/hw/erdma/erdma_eq.c
+++ b/drivers/infiniband/hw/erdma/erdma_eq.c
@@ -5,6 +5,8 @@
 /* Copyright (c) 2020-2022, Alibaba Group. */
 
 #include "erdma_verbs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #define MAX_POLL_CHUNK_SIZE 16
 
diff --git a/drivers/infiniband/hw/erdma/erdma_main.c b/drivers/infiniband/hw/erdma/erdma_main.c
index 472939172f0c..1705dd797120 100644
--- a/drivers/infiniband/hw/erdma/erdma_main.c
+++ b/drivers/infiniband/hw/erdma/erdma_main.c
@@ -5,6 +5,7 @@
 /* Copyright (c) 2020-2022, Alibaba Group. */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/addrconf.h>
 #include <rdma/erdma-abi.h>
 
diff --git a/drivers/infiniband/hw/erdma/erdma_qp.c b/drivers/infiniband/hw/erdma/erdma_qp.c
index 6d0330badd68..544bb5143acf 100644
--- a/drivers/infiniband/hw/erdma/erdma_qp.c
+++ b/drivers/infiniband/hw/erdma/erdma_qp.c
@@ -8,6 +8,8 @@
 
 #include "erdma_cm.h"
 #include "erdma_verbs.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 void erdma_qp_llp_close(struct erdma_qp *qp)
 {
diff --git a/drivers/infiniband/hw/erdma/erdma_verbs.c b/drivers/infiniband/hw/erdma/erdma_verbs.c
index 23dfc01603f8..e848fb5dcc3f 100644
--- a/drivers/infiniband/hw/erdma/erdma_verbs.c
+++ b/drivers/infiniband/hw/erdma/erdma_verbs.c
@@ -14,6 +14,8 @@
 #include <rdma/erdma-abi.h>
 #include <rdma/ib_umem.h>
 #include <rdma/uverbs_ioctl.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "erdma.h"
 #include "erdma_cm.h"
diff --git a/drivers/infiniband/hw/hfi1/affinity.c b/drivers/infiniband/hw/hfi1/affinity.c
index 7ead8746b79b..8e8c71385a1a 100644
--- a/drivers/infiniband/hw/hfi1/affinity.c
+++ b/drivers/infiniband/hw/hfi1/affinity.c
@@ -7,6 +7,7 @@
 #include <linux/cpumask.h>
 #include <linux/interrupt.h>
 #include <linux/numa.h>
+#include <linux/sprintf.h>
 
 #include "hfi.h"
 #include "affinity.h"
diff --git a/drivers/infiniband/hw/hfi1/chip.c b/drivers/infiniband/hw/hfi1/chip.c
index 78f27f7b4203..bfc64cbfd4a2 100644
--- a/drivers/infiniband/hw/hfi1/chip.c
+++ b/drivers/infiniband/hw/hfi1/chip.c
@@ -12,6 +12,8 @@
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "hfi.h"
 #include "trace.h"
diff --git a/drivers/infiniband/hw/hfi1/debugfs.c b/drivers/infiniband/hw/hfi1/debugfs.c
index a1e01b447265..4affd79d4ca4 100644
--- a/drivers/infiniband/hw/hfi1/debugfs.c
+++ b/drivers/infiniband/hw/hfi1/debugfs.c
@@ -4,9 +4,11 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/kernel.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/ratelimit.h>
diff --git a/drivers/infiniband/hw/hfi1/device.c b/drivers/infiniband/hw/hfi1/device.c
index 4250d077b06f..6cd17fa79896 100644
--- a/drivers/infiniband/hw/hfi1/device.c
+++ b/drivers/infiniband/hw/hfi1/device.c
@@ -6,6 +6,7 @@
 #include <linux/cdev.h>
 #include <linux/device.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 
 #include "hfi.h"
 #include "device.h"
diff --git a/drivers/infiniband/hw/hfi1/driver.c b/drivers/infiniband/hw/hfi1/driver.c
index 37a6794885d3..56cd339c2c3f 100644
--- a/drivers/infiniband/hw/hfi1/driver.c
+++ b/drivers/infiniband/hw/hfi1/driver.c
@@ -8,6 +8,7 @@
 #include <linux/pci.h>
 #include <linux/io.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
diff --git a/drivers/infiniband/hw/hfi1/efivar.c b/drivers/infiniband/hw/hfi1/efivar.c
index 9ed05e10020e..bae949a1dff5 100644
--- a/drivers/infiniband/hw/hfi1/efivar.c
+++ b/drivers/infiniband/hw/hfi1/efivar.c
@@ -5,6 +5,7 @@
 
 #include <linux/string.h>
 #include <linux/string_helpers.h>
+#include <linux/sprintf.h>
 
 #include "efivar.h"
 
diff --git a/drivers/infiniband/hw/hfi1/fault.c b/drivers/infiniband/hw/hfi1/fault.c
index 35d2382ee618..6d4a702067cc 100644
--- a/drivers/infiniband/hw/hfi1/fault.c
+++ b/drivers/infiniband/hw/hfi1/fault.c
@@ -4,8 +4,10 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/bitmap.h>
 
diff --git a/drivers/infiniband/hw/hfi1/file_ops.c b/drivers/infiniband/hw/hfi1/file_ops.c
index 503abec709c9..036edf0cbb6f 100644
--- a/drivers/infiniband/hw/hfi1/file_ops.c
+++ b/drivers/infiniband/hw/hfi1/file_ops.c
@@ -6,6 +6,8 @@
 
 #include <linux/poll.h>
 #include <linux/cdev.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/io.h>
 #include <linux/sched/mm.h>
diff --git a/drivers/infiniband/hw/hfi1/init.c b/drivers/infiniband/hw/hfi1/init.c
index cbac4a442d9e..6d947ac93865 100644
--- a/drivers/infiniband/hw/hfi1/init.c
+++ b/drivers/infiniband/hw/hfi1/init.c
@@ -13,6 +13,7 @@
 #include <linux/printk.h>
 #include <linux/hrtimer.h>
 #include <linux/bitmap.h>
+#include <linux/completion.h>
 #include <linux/numa.h>
 #include <rdma/rdma_vt.h>
 
diff --git a/drivers/infiniband/hw/hfi1/msix.c b/drivers/infiniband/hw/hfi1/msix.c
index 77d2ece9a9cb..c6109e7c06dc 100644
--- a/drivers/infiniband/hw/hfi1/msix.c
+++ b/drivers/infiniband/hw/hfi1/msix.c
@@ -7,6 +7,7 @@
 #include "affinity.h"
 #include "sdma.h"
 #include "netdev.h"
+#include <linux/sprintf.h>
 
 /**
  * msix_initialize() - Calculate, request and configure MSIx IRQs
diff --git a/drivers/infiniband/hw/hfi1/pcie.c b/drivers/infiniband/hw/hfi1/pcie.c
index 119ec2f1382b..15bfbb0a971e 100644
--- a/drivers/infiniband/hw/hfi1/pcie.c
+++ b/drivers/infiniband/hw/hfi1/pcie.c
@@ -7,6 +7,7 @@
 #include <linux/pci.h>
 #include <linux/io.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
 
diff --git a/drivers/infiniband/hw/hfi1/qsfp.c b/drivers/infiniband/hw/hfi1/qsfp.c
index 52cce1c8b76a..cef4db0d36e2 100644
--- a/drivers/infiniband/hw/hfi1/qsfp.c
+++ b/drivers/infiniband/hw/hfi1/qsfp.c
@@ -5,6 +5,7 @@
 
 #include <linux/delay.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "hfi.h"
diff --git a/drivers/infiniband/hw/hfi1/rc.c b/drivers/infiniband/hw/hfi1/rc.c
index b36242c9d42c..d5a94a2d144f 100644
--- a/drivers/infiniband/hw/hfi1/rc.c
+++ b/drivers/infiniband/hw/hfi1/rc.c
@@ -3,6 +3,7 @@
  * Copyright(c) 2015 - 2018 Intel Corporation.
  */
 
+#include <linux/hrtimer.h>
 #include <linux/io.h>
 #include <rdma/rdma_vt.h>
 #include <rdma/rdmavt_qp.h>
diff --git a/drivers/infiniband/hw/hfi1/sdma.c b/drivers/infiniband/hw/hfi1/sdma.c
index b67d23b1f286..18d03af8449a 100644
--- a/drivers/infiniband/hw/hfi1/sdma.c
+++ b/drivers/infiniband/hw/hfi1/sdma.c
@@ -8,6 +8,8 @@
 #include <linux/netdevice.h>
 #include <linux/moduleparam.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/vmalloc.h>
 #include <linux/highmem.h>
diff --git a/drivers/infiniband/hw/hfi1/user_exp_rcv.c b/drivers/infiniband/hw/hfi1/user_exp_rcv.c
index cf2d29098406..464a7a8184db 100644
--- a/drivers/infiniband/hw/hfi1/user_exp_rcv.c
+++ b/drivers/infiniband/hw/hfi1/user_exp_rcv.c
@@ -4,6 +4,7 @@
  * Copyright(c) 2015-2018 Intel Corporation.
  */
 #include <asm/page.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/string.h>
 
 #include "mmu_rb.h"
diff --git a/drivers/infiniband/hw/hfi1/user_sdma.c b/drivers/infiniband/hw/hfi1/user_sdma.c
index b72625283fcf..94b7320c8201 100644
--- a/drivers/infiniband/hw/hfi1/user_sdma.c
+++ b/drivers/infiniband/hw/hfi1/user_sdma.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/dmapool.h>
diff --git a/drivers/infiniband/hw/hfi1/verbs.c b/drivers/infiniband/hw/hfi1/verbs.c
index 33af2196ef31..a88205e6d25e 100644
--- a/drivers/infiniband/hw/hfi1/verbs.c
+++ b/drivers/infiniband/hw/hfi1/verbs.c
@@ -7,6 +7,7 @@
 #include <rdma/ib_user_verbs.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/rculist.h>
 #include <linux/mm.h>
diff --git a/drivers/infiniband/hw/hfi1/verbs_txreq.c b/drivers/infiniband/hw/hfi1/verbs_txreq.c
index 822f0d05bac8..ed843355c8d7 100644
--- a/drivers/infiniband/hw/hfi1/verbs_txreq.c
+++ b/drivers/infiniband/hw/hfi1/verbs_txreq.c
@@ -7,6 +7,7 @@
 #include "verbs_txreq.h"
 #include "qp.h"
 #include "trace.h"
+#include <linux/sprintf.h>
 
 #define TXREQ_LEN 24
 
diff --git a/drivers/infiniband/hw/hfi1/vnic_sdma.c b/drivers/infiniband/hw/hfi1/vnic_sdma.c
index 6caf01ba0bca..16a9e3386692 100644
--- a/drivers/infiniband/hw/hfi1/vnic_sdma.c
+++ b/drivers/infiniband/hw/hfi1/vnic_sdma.c
@@ -9,6 +9,7 @@
 
 #include "sdma.h"
 #include "vnic.h"
+#include <linux/sprintf.h>
 
 #define HFI1_VNIC_SDMA_Q_ACTIVE   BIT(0)
 #define HFI1_VNIC_SDMA_Q_DEFERRED BIT(1)
diff --git a/drivers/infiniband/hw/hns/hns_roce_cmd.c b/drivers/infiniband/hw/hns/hns_roce_cmd.c
index 873e8a69a1b9..92e1fd6458c5 100644
--- a/drivers/infiniband/hw/hns/hns_roce_cmd.c
+++ b/drivers/infiniband/hw/hns/hns_roce_cmd.c
@@ -34,6 +34,7 @@
 #include "hns_roce_common.h"
 #include "hns_roce_device.h"
 #include "hns_roce_cmd.h"
+#include <linux/completion.h>
 
 #define CMD_POLL_TOKEN 0xffff
 #define CMD_MAX_NUM 32
diff --git a/drivers/infiniband/hw/hns/hns_roce_cq.c b/drivers/infiniband/hw/hns/hns_roce_cq.c
index 7250d0643b5c..950e6e444348 100644
--- a/drivers/infiniband/hw/hns/hns_roce_cq.c
+++ b/drivers/infiniband/hw/hns/hns_roce_cq.c
@@ -36,6 +36,7 @@
 #include "hns_roce_cmd.h"
 #include "hns_roce_hem.h"
 #include "hns_roce_common.h"
+#include <linux/completion.h>
 
 static u8 get_least_load_bankid_for_cq(struct hns_roce_bank *bank)
 {
diff --git a/drivers/infiniband/hw/hns/hns_roce_hw_v2.c b/drivers/infiniband/hw/hns/hns_roce_hw_v2.c
index de56dc6e3226..ca803b0b0596 100644
--- a/drivers/infiniband/hw/hns/hns_roce_hw_v2.c
+++ b/drivers/infiniband/hw/hns/hns_roce_hw_v2.c
@@ -35,6 +35,7 @@
 #include <linux/interrupt.h>
 #include <linux/iopoll.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <net/addrconf.h>
 #include <rdma/ib_addr.h>
diff --git a/drivers/infiniband/hw/hns/hns_roce_main.c b/drivers/infiniband/hw/hns/hns_roce_main.c
index b55fe6911f9f..5c076da93ecf 100644
--- a/drivers/infiniband/hw/hns/hns_roce_main.c
+++ b/drivers/infiniband/hw/hns/hns_roce_main.c
@@ -31,8 +31,10 @@
  * SOFTWARE.
  */
 #include <linux/acpi.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_addr.h>
 #include <rdma/ib_smi.h>
 #include <rdma/ib_user_verbs.h>
diff --git a/drivers/infiniband/hw/hns/hns_roce_qp.c b/drivers/infiniband/hw/hns/hns_roce_qp.c
index 31b147210688..52e9b619e739 100644
--- a/drivers/infiniband/hw/hns/hns_roce_qp.c
+++ b/drivers/infiniband/hw/hns/hns_roce_qp.c
@@ -38,6 +38,7 @@
 #include "hns_roce_common.h"
 #include "hns_roce_device.h"
 #include "hns_roce_hem.h"
+#include <linux/completion.h>
 
 static void flush_work_handle(struct work_struct *work)
 {
diff --git a/drivers/infiniband/hw/hns/hns_roce_srq.c b/drivers/infiniband/hw/hns/hns_roce_srq.c
index 4abae9477854..53d4db17dfac 100644
--- a/drivers/infiniband/hw/hns/hns_roce_srq.c
+++ b/drivers/infiniband/hw/hns/hns_roce_srq.c
@@ -9,6 +9,7 @@
 #include "hns_roce_device.h"
 #include "hns_roce_cmd.h"
 #include "hns_roce_hem.h"
+#include <linux/completion.h>
 
 void hns_roce_srq_event(struct hns_roce_dev *hr_dev, u32 srqn, int event_type)
 {
diff --git a/drivers/infiniband/hw/irdma/cm.c b/drivers/infiniband/hw/irdma/cm.c
index 1ee7a4e0d8d8..02513f00cf05 100644
--- a/drivers/infiniband/hw/irdma/cm.c
+++ b/drivers/infiniband/hw/irdma/cm.c
@@ -2,6 +2,8 @@
 /* Copyright (c) 2015 - 2021 Intel Corporation */
 #include "main.h"
 #include "trace.h"
+#include <linux/completion.h>
+#include <linux/highmem.h> // for kmap_local_page()
 
 static void irdma_cm_post_event(struct irdma_cm_event *event);
 static void irdma_disconnect_worker(struct work_struct *work);
diff --git a/drivers/infiniband/hw/irdma/hw.c b/drivers/infiniband/hw/irdma/hw.c
index ad50b77282f8..c50fb595c296 100644
--- a/drivers/infiniband/hw/irdma/hw.c
+++ b/drivers/infiniband/hw/irdma/hw.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0 OR Linux-OpenIB
 /* Copyright (c) 2015 - 2021 Intel Corporation */
 #include "main.h"
+#include <linux/sprintf.h>
 
 static struct irdma_rsrc_limits rsrc_limits_table[] = {
 	[0] = {
diff --git a/drivers/infiniband/hw/irdma/utils.c b/drivers/infiniband/hw/irdma/utils.c
index 0422787592d8..638fe56221c4 100644
--- a/drivers/infiniband/hw/irdma/utils.c
+++ b/drivers/infiniband/hw/irdma/utils.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0 OR Linux-OpenIB
 /* Copyright (c) 2015 - 2021 Intel Corporation */
 #include "main.h"
+#include <linux/completion.h>
 
 /**
  * irdma_arp_table -manage arp table
diff --git a/drivers/infiniband/hw/irdma/verbs.c b/drivers/infiniband/hw/irdma/verbs.c
index 12704efb7b19..1813959d723c 100644
--- a/drivers/infiniband/hw/irdma/verbs.c
+++ b/drivers/infiniband/hw/irdma/verbs.c
@@ -1,6 +1,8 @@
 // SPDX-License-Identifier: GPL-2.0 OR Linux-OpenIB
 /* Copyright (c) 2015 - 2021 Intel Corporation */
 #include "main.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /**
  * irdma_query_device - get device attributes
diff --git a/drivers/infiniband/hw/mlx4/alias_GUID.c b/drivers/infiniband/hw/mlx4/alias_GUID.c
index 111fa88a3be4..99654965562e 100644
--- a/drivers/infiniband/hw/mlx4/alias_GUID.c
+++ b/drivers/infiniband/hw/mlx4/alias_GUID.c
@@ -40,9 +40,11 @@
 #include <linux/mlx4/cmd.h>
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_user_verbs.h>
 #include <linux/delay.h>
 #include "mlx4_ib.h"
+#include <linux/completion.h>
 
 /*
 The driver keeps the current state of all guids, as they are in the HW.
diff --git a/drivers/infiniband/hw/mlx4/mad.c b/drivers/infiniband/hw/mlx4/mad.c
index a37cfac5e23f..2ba0adac4166 100644
--- a/drivers/infiniband/hw/mlx4/mad.c
+++ b/drivers/infiniband/hw/mlx4/mad.c
@@ -34,6 +34,7 @@
 #include <rdma/ib_smi.h>
 #include <rdma/ib_sa.h>
 #include <rdma/ib_cache.h>
+#include <linux/sprintf.h>
 
 #include <linux/random.h>
 #include <linux/mlx4/cmd.h>
diff --git a/drivers/infiniband/hw/mlx4/main.c b/drivers/infiniband/hw/mlx4/main.c
index 529db874d67c..b839e101c4ba 100644
--- a/drivers/infiniband/hw/mlx4/main.c
+++ b/drivers/infiniband/hw/mlx4/main.c
@@ -41,6 +41,7 @@
 #include <linux/if_vlan.h>
 #include <linux/sched/mm.h>
 #include <linux/sched/task.h>
+#include <linux/sprintf.h>
 
 #include <net/ipv6.h>
 #include <net/addrconf.h>
diff --git a/drivers/infiniband/hw/mlx4/mcg.c b/drivers/infiniband/hw/mlx4/mcg.c
index 33f525b744f2..9f3c30f074a7 100644
--- a/drivers/infiniband/hw/mlx4/mcg.c
+++ b/drivers/infiniband/hw/mlx4/mcg.c
@@ -34,6 +34,7 @@
 #include <rdma/ib_smi.h>
 #include <rdma/ib_cache.h>
 #include <rdma/ib_sa.h>
+#include <linux/sprintf.h>
 
 #include <linux/mlx4/cmd.h>
 #include <linux/rbtree.h>
diff --git a/drivers/infiniband/hw/mlx4/qp.c b/drivers/infiniband/hw/mlx4/qp.c
index 9d08aa99f3cb..18d882e8a7e7 100644
--- a/drivers/infiniband/hw/mlx4/qp.c
+++ b/drivers/infiniband/hw/mlx4/qp.c
@@ -36,6 +36,7 @@
 #include <net/ip.h>
 #include <linux/slab.h>
 #include <linux/netdevice.h>
+#include <linux/completion.h>
 
 #include <rdma/ib_cache.h>
 #include <rdma/ib_pack.h>
diff --git a/drivers/infiniband/hw/mlx4/sysfs.c b/drivers/infiniband/hw/mlx4/sysfs.c
index 88f534cf690e..72a0189db951 100644
--- a/drivers/infiniband/hw/mlx4/sysfs.c
+++ b/drivers/infiniband/hw/mlx4/sysfs.c
@@ -33,6 +33,7 @@
 /*#include "core_priv.h"*/
 #include "mlx4_ib.h"
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/stat.h>
 
diff --git a/drivers/infiniband/hw/mlx5/cong.c b/drivers/infiniband/hw/mlx5/cong.c
index a78a067e3ce7..d06a499439c2 100644
--- a/drivers/infiniband/hw/mlx5/cong.c
+++ b/drivers/infiniband/hw/mlx5/cong.c
@@ -31,6 +31,8 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "mlx5_ib.h"
 #include "cmd.h"
diff --git a/drivers/infiniband/hw/mlx5/counters.c b/drivers/infiniband/hw/mlx5/counters.c
index 8300ce622835..bfbbb2407518 100644
--- a/drivers/infiniband/hw/mlx5/counters.c
+++ b/drivers/infiniband/hw/mlx5/counters.c
@@ -4,6 +4,7 @@
  */
 
 #include "mlx5_ib.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/mlx5/eswitch.h>
 #include <linux/mlx5/vport.h>
 #include "counters.h"
diff --git a/drivers/infiniband/hw/mlx5/main.c b/drivers/infiniband/hw/mlx5/main.c
index c2b557e64290..842bdedf3fac 100644
--- a/drivers/infiniband/hw/mlx5/main.c
+++ b/drivers/infiniband/hw/mlx5/main.c
@@ -6,6 +6,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/highmem.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/errno.h>
@@ -13,10 +14,12 @@
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
 #include <linux/bitmap.h>
+#include <linux/completion.h>
 #include <linux/sched.h>
 #include <linux/sched/mm.h>
 #include <linux/sched/task.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_user_verbs.h>
 #include <rdma/ib_addr.h>
 #include <rdma/ib_cache.h>
diff --git a/drivers/infiniband/hw/mlx5/mr.c b/drivers/infiniband/hw/mlx5/mr.c
index a8ee2ca1f4a1..d30a92763c94 100644
--- a/drivers/infiniband/hw/mlx5/mr.c
+++ b/drivers/infiniband/hw/mlx5/mr.c
@@ -33,12 +33,14 @@
 
 
 #include <linux/kref.h>
+#include <linux/kstrtox.h>
 #include <linux/random.h>
 #include <linux/debugfs.h>
 #include <linux/export.h>
 #include <linux/delay.h>
 #include <linux/dma-buf.h>
 #include <linux/dma-resv.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_umem_odp.h>
 #include "dm.h"
 #include "mlx5_ib.h"
diff --git a/drivers/infiniband/hw/mlx5/qp.c b/drivers/infiniband/hw/mlx5/qp.c
index 8115ab107149..d499c8276c63 100644
--- a/drivers/infiniband/hw/mlx5/qp.c
+++ b/drivers/infiniband/hw/mlx5/qp.c
@@ -43,6 +43,7 @@
 #include "umr.h"
 #include "qp.h"
 #include "wr.h"
+#include <linux/completion.h>
 
 enum {
 	MLX5_IB_ACK_REQ_FREQ	= 8,
diff --git a/drivers/infiniband/hw/mlx5/qpc.c b/drivers/infiniband/hw/mlx5/qpc.c
index d9cf6982d645..9e5fea2417d0 100644
--- a/drivers/infiniband/hw/mlx5/qpc.c
+++ b/drivers/infiniband/hw/mlx5/qpc.c
@@ -8,6 +8,7 @@
 #include <linux/mlx5/driver.h>
 #include "mlx5_ib.h"
 #include "qp.h"
+#include <linux/completion.h>
 
 static int mlx5_core_drain_dct(struct mlx5_ib_dev *dev,
 			       struct mlx5_core_dct *dct);
diff --git a/drivers/infiniband/hw/mlx5/srq_cmd.c b/drivers/infiniband/hw/mlx5/srq_cmd.c
index 8b3385396599..faff5ebf9fd2 100644
--- a/drivers/infiniband/hw/mlx5/srq_cmd.c
+++ b/drivers/infiniband/hw/mlx5/srq_cmd.c
@@ -8,6 +8,7 @@
 #include "mlx5_ib.h"
 #include "srq.h"
 #include "qp.h"
+#include <linux/completion.h>
 
 static int get_pas_size(struct mlx5_srq_attr *in)
 {
diff --git a/drivers/infiniband/hw/mlx5/umr.c b/drivers/infiniband/hw/mlx5/umr.c
index e76142f6fa88..c2bf8801137d 100644
--- a/drivers/infiniband/hw/mlx5/umr.c
+++ b/drivers/infiniband/hw/mlx5/umr.c
@@ -5,6 +5,7 @@
 #include "mlx5_ib.h"
 #include "umr.h"
 #include "wr.h"
+#include <linux/completion.h>
 
 /*
  * We can't use an array for xlt_emergency_page because dma_map_single doesn't
diff --git a/drivers/infiniband/hw/mthca/mthca_eq.c b/drivers/infiniband/hw/mthca/mthca_eq.c
index 97287c544da8..38753017974f 100644
--- a/drivers/infiniband/hw/mthca/mthca_eq.c
+++ b/drivers/infiniband/hw/mthca/mthca_eq.c
@@ -35,6 +35,7 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "mthca_dev.h"
 #include "mthca_cmd.h"
diff --git a/drivers/infiniband/hw/mthca/mthca_provider.c b/drivers/infiniband/hw/mthca/mthca_provider.c
index e1325f2927d6..a39117b2cc16 100644
--- a/drivers/infiniband/hw/mthca/mthca_provider.c
+++ b/drivers/infiniband/hw/mthca/mthca_provider.c
@@ -38,6 +38,7 @@
 #include <rdma/ib_umem.h>
 #include <rdma/ib_user_verbs.h>
 #include <rdma/uverbs_ioctl.h>
+#include <linux/sprintf.h>
 
 #include <linux/sched.h>
 #include <linux/slab.h>
diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_hw.c b/drivers/infiniband/hw/ocrdma/ocrdma_hw.c
index 56f06c68f31a..91625157d35e 100644
--- a/drivers/infiniband/hw/ocrdma/ocrdma_hw.c
+++ b/drivers/infiniband/hw/ocrdma/ocrdma_hw.c
@@ -42,9 +42,11 @@
 
 #include <linux/sched.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/log2.h>
 #include <linux/dma-mapping.h>
 #include <linux/if_ether.h>
+#include <linux/sprintf.h>
 
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_user_verbs.h>
diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_main.c b/drivers/infiniband/hw/ocrdma/ocrdma_main.c
index 5d4b3bc16493..088cf164a6bf 100644
--- a/drivers/infiniband/hw/ocrdma/ocrdma_main.c
+++ b/drivers/infiniband/hw/ocrdma/ocrdma_main.c
@@ -42,6 +42,7 @@
 
 #include <linux/module.h>
 #include <linux/idr.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_user_verbs.h>
 #include <rdma/ib_addr.h>
diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_stats.c b/drivers/infiniband/hw/ocrdma/ocrdma_stats.c
index 5f831e3bdbad..00313664a23f 100644
--- a/drivers/infiniband/hw/ocrdma/ocrdma_stats.c
+++ b/drivers/infiniband/hw/ocrdma/ocrdma_stats.c
@@ -43,6 +43,8 @@
 #include <rdma/ib_addr.h>
 #include <rdma/ib_pma.h>
 #include "ocrdma_stats.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static struct dentry *ocrdma_dbgfs_dir;
 
diff --git a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
index c849fdbd4c99..b9fee2c87d79 100644
--- a/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
+++ b/drivers/infiniband/hw/ocrdma/ocrdma_verbs.c
@@ -41,6 +41,7 @@
  */
 
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <net/addrconf.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_user_verbs.h>
diff --git a/drivers/infiniband/hw/qedr/main.c b/drivers/infiniband/hw/qedr/main.c
index ecdfeff3d44f..b07d0cdcff6f 100644
--- a/drivers/infiniband/hw/qedr/main.c
+++ b/drivers/infiniband/hw/qedr/main.c
@@ -30,6 +30,7 @@
  * SOFTWARE.
  */
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_addr.h>
 #include <rdma/ib_user_verbs.h>
diff --git a/drivers/infiniband/hw/qedr/qedr_iw_cm.c b/drivers/infiniband/hw/qedr/qedr_iw_cm.c
index a51fc6854984..ae2866761faa 100644
--- a/drivers/infiniband/hw/qedr/qedr_iw_cm.c
+++ b/drivers/infiniband/hw/qedr/qedr_iw_cm.c
@@ -38,6 +38,7 @@
 #include <net/flow.h>
 #include "qedr.h"
 #include "qedr_iw_cm.h"
+#include <linux/completion.h>
 
 static inline void
 qedr_fill_sockaddr4(const struct qed_iwarp_cm_info *cm_info,
diff --git a/drivers/infiniband/hw/qedr/verbs.c b/drivers/infiniband/hw/qedr/verbs.c
index 7887a6786ed4..c2c1a3ebaebf 100644
--- a/drivers/infiniband/hw/qedr/verbs.c
+++ b/drivers/infiniband/hw/qedr/verbs.c
@@ -31,10 +31,12 @@
  */
 #include <linux/dma-mapping.h>
 #include <linux/crc32.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <net/ip.h>
 #include <net/ipv6.h>
 #include <net/udp.h>
 #include <linux/iommu.h>
+#include <linux/completion.h>
 
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_user_verbs.h>
diff --git a/drivers/infiniband/hw/qib/qib_debugfs.c b/drivers/infiniband/hw/qib/qib_debugfs.c
index caeb77d07a58..31441b7750f4 100644
--- a/drivers/infiniband/hw/qib/qib_debugfs.c
+++ b/drivers/infiniband/hw/qib/qib_debugfs.c
@@ -33,6 +33,7 @@
 #include <linux/seq_file.h>
 #include <linux/kernel.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include "qib.h"
 #include "qib_verbs.h"
diff --git a/drivers/infiniband/hw/qib/qib_diag.c b/drivers/infiniband/hw/qib/qib_diag.c
index 11da796dd1b7..42ca84fc5516 100644
--- a/drivers/infiniband/hw/qib/qib_diag.c
+++ b/drivers/infiniband/hw/qib/qib_diag.c
@@ -43,8 +43,10 @@
  */
 
 #include <linux/io.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/pci.h>
 #include <linux/poll.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/export.h>
 #include <linux/fs.h>
diff --git a/drivers/infiniband/hw/qib/qib_file_ops.c b/drivers/infiniband/hw/qib/qib_file_ops.c
index 29e4c59aa23b..b3cdebd471bd 100644
--- a/drivers/infiniband/hw/qib/qib_file_ops.c
+++ b/drivers/infiniband/hw/qib/qib_file_ops.c
@@ -35,11 +35,14 @@
 #include <linux/pci.h>
 #include <linux/poll.h>
 #include <linux/cdev.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
+#include <linux/sprintf.h>
 #include <linux/swap.h>
 #include <linux/vmalloc.h>
 #include <linux/highmem.h>
 #include <linux/io.h>
 #include <linux/jiffies.h>
+#include <linux/kobject.h>
 #include <linux/delay.h>
 #include <linux/export.h>
 #include <linux/uio.h>
diff --git a/drivers/infiniband/hw/qib/qib_fs.c b/drivers/infiniband/hw/qib/qib_fs.c
index 455e966eeff3..073bd1a79704 100644
--- a/drivers/infiniband/hw/qib/qib_fs.c
+++ b/drivers/infiniband/hw/qib/qib_fs.c
@@ -38,6 +38,7 @@
 #include <linux/pagemap.h>
 #include <linux/init.h>
 #include <linux/namei.h>
+#include <linux/sprintf.h>
 
 #include "qib.h"
 
diff --git a/drivers/infiniband/hw/qib/qib_iba6120.c b/drivers/infiniband/hw/qib/qib_iba6120.c
index 277769fa9745..33f2142039a3 100644
--- a/drivers/infiniband/hw/qib/qib_iba6120.c
+++ b/drivers/infiniband/hw/qib/qib_iba6120.c
@@ -40,6 +40,7 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 
 #include "qib.h"
diff --git a/drivers/infiniband/hw/qib/qib_iba7220.c b/drivers/infiniband/hw/qib/qib_iba7220.c
index 6af57067c32e..2ee358ff4d61 100644
--- a/drivers/infiniband/hw/qib/qib_iba7220.c
+++ b/drivers/infiniband/hw/qib/qib_iba7220.c
@@ -42,6 +42,7 @@
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 
 #include "qib.h"
diff --git a/drivers/infiniband/hw/qib/qib_iba7322.c b/drivers/infiniband/hw/qib/qib_iba7322.c
index f93906d8fc09..828ace51d948 100644
--- a/drivers/infiniband/hw/qib/qib_iba7322.c
+++ b/drivers/infiniband/hw/qib/qib_iba7322.c
@@ -37,11 +37,13 @@
  */
 
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/jiffies.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_smi.h>
 #ifdef CONFIG_INFINIBAND_QIB_DCA
diff --git a/drivers/infiniband/hw/qib/qib_init.c b/drivers/infiniband/hw/qib/qib_init.c
index 33667becd52b..08face4e9632 100644
--- a/drivers/infiniband/hw/qib/qib_init.c
+++ b/drivers/infiniband/hw/qib/qib_init.c
@@ -34,6 +34,7 @@
 
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/delay.h>
 #include <linux/module.h>
diff --git a/drivers/infiniband/hw/qib/qib_pcie.c b/drivers/infiniband/hw/qib/qib_pcie.c
index 47bf64ace05c..1c6a7ee656ba 100644
--- a/drivers/infiniband/hw/qib/qib_pcie.c
+++ b/drivers/infiniband/hw/qib/qib_pcie.c
@@ -34,6 +34,7 @@
 #include <linux/pci.h>
 #include <linux/io.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
 
diff --git a/drivers/infiniband/hw/qib/qib_qsfp.c b/drivers/infiniband/hw/qib/qib_qsfp.c
index 295d40a83bb6..c7208c678cd4 100644
--- a/drivers/infiniband/hw/qib/qib_qsfp.c
+++ b/drivers/infiniband/hw/qib/qib_qsfp.c
@@ -33,6 +33,7 @@
 
 #include <linux/delay.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "qib.h"
diff --git a/drivers/infiniband/hw/qib/qib_sdma.c b/drivers/infiniband/hw/qib/qib_sdma.c
index 5e86cbf7d70e..3caa985e155d 100644
--- a/drivers/infiniband/hw/qib/qib_sdma.c
+++ b/drivers/infiniband/hw/qib/qib_sdma.c
@@ -34,6 +34,7 @@
 #include <linux/spinlock.h>
 #include <linux/netdevice.h>
 #include <linux/moduleparam.h>
+#include <linux/completion.h>
 
 #include "qib.h"
 #include "qib_common.h"
diff --git a/drivers/infiniband/hw/qib/qib_sysfs.c b/drivers/infiniband/hw/qib/qib_sysfs.c
index 41c272980f91..54b38a5d497b 100644
--- a/drivers/infiniband/hw/qib/qib_sysfs.c
+++ b/drivers/infiniband/hw/qib/qib_sysfs.c
@@ -32,6 +32,7 @@
  * SOFTWARE.
  */
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <rdma/ib_sysfs.h>
 
 #include "qib.h"
diff --git a/drivers/infiniband/hw/qib/qib_user_sdma.c b/drivers/infiniband/hw/qib/qib_user_sdma.c
index 336eb15a721f..104693856b18 100644
--- a/drivers/infiniband/hw/qib/qib_user_sdma.c
+++ b/drivers/infiniband/hw/qib/qib_user_sdma.c
@@ -30,6 +30,7 @@
  * SOFTWARE.
  */
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/dmapool.h>
diff --git a/drivers/infiniband/hw/qib/qib_verbs.c b/drivers/infiniband/hw/qib/qib_verbs.c
index 0080f0be72fe..aee519d4ec40 100644
--- a/drivers/infiniband/hw/qib/qib_verbs.c
+++ b/drivers/infiniband/hw/qib/qib_verbs.c
@@ -36,6 +36,7 @@
 #include <rdma/ib_user_verbs.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/rculist.h>
 #include <linux/mm.h>
diff --git a/drivers/infiniband/hw/usnic/usnic_debugfs.c b/drivers/infiniband/hw/usnic/usnic_debugfs.c
index 10a8cd5ba076..6a1207da0ea6 100644
--- a/drivers/infiniband/hw/usnic/usnic_debugfs.c
+++ b/drivers/infiniband/hw/usnic/usnic_debugfs.c
@@ -32,6 +32,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "usnic.h"
 #include "usnic_log.h"
diff --git a/drivers/infiniband/hw/usnic/usnic_ib_main.c b/drivers/infiniband/hw/usnic/usnic_ib_main.c
index 13b654ddd3cc..bbd6b5e33b09 100644
--- a/drivers/infiniband/hw/usnic/usnic_ib_main.c
+++ b/drivers/infiniband/hw/usnic/usnic_ib_main.c
@@ -39,6 +39,7 @@
  *
  */
 
+#include <linux/kref.h>
 #include <linux/module.h>
 #include <linux/inetdevice.h>
 #include <linux/init.h>
@@ -46,6 +47,7 @@
 #include <linux/errno.h>
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include <rdma/ib_user_verbs.h>
 #include <rdma/ib_addr.h>
diff --git a/drivers/infiniband/hw/usnic/usnic_ib_qp_grp.c b/drivers/infiniband/hw/usnic/usnic_ib_qp_grp.c
index 59bfbfaee325..6940d87691e0 100644
--- a/drivers/infiniband/hw/usnic/usnic_ib_qp_grp.c
+++ b/drivers/infiniband/hw/usnic/usnic_ib_qp_grp.c
@@ -33,6 +33,7 @@
 #include <linux/bug.h>
 #include <linux/errno.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "usnic_log.h"
 #include "usnic_vnic.h"
diff --git a/drivers/infiniband/hw/usnic/usnic_ib_sysfs.c b/drivers/infiniband/hw/usnic/usnic_ib_sysfs.c
index fdb63a8fb997..82e761bff7d5 100644
--- a/drivers/infiniband/hw/usnic/usnic_ib_sysfs.c
+++ b/drivers/infiniband/hw/usnic/usnic_ib_sysfs.c
@@ -33,6 +33,7 @@
 
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/kref.h>
 
 #include <rdma/ib_user_verbs.h>
 #include <rdma/ib_addr.h>
diff --git a/drivers/infiniband/hw/usnic/usnic_transport.c b/drivers/infiniband/hw/usnic/usnic_transport.c
index dc37066900a5..0a908d7f73f9 100644
--- a/drivers/infiniband/hw/usnic/usnic_transport.c
+++ b/drivers/infiniband/hw/usnic/usnic_transport.c
@@ -33,6 +33,7 @@
 #include <linux/bitmap.h>
 #include <linux/file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/inet_sock.h>
 
 #include "usnic_transport.h"
diff --git a/drivers/infiniband/hw/usnic/usnic_vnic.c b/drivers/infiniband/hw/usnic/usnic_vnic.c
index 0c47f73aaed5..1c0994d004e2 100644
--- a/drivers/infiniband/hw/usnic/usnic_vnic.c
+++ b/drivers/infiniband/hw/usnic/usnic_vnic.c
@@ -32,6 +32,7 @@
  */
 #include <linux/errno.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "usnic_ib.h"
 #include "vnic_resource.h"
diff --git a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cmd.c b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cmd.c
index 4a78c537d8a1..3b6ef2d1d1f0 100644
--- a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cmd.c
+++ b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cmd.c
@@ -44,6 +44,7 @@
  */
 
 #include <linux/list.h>
+#include <linux/completion.h>
 
 #include "pvrdma.h"
 
diff --git a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cq.c b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cq.c
index 6aa40bd2fd52..789bdc17e79b 100644
--- a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cq.c
+++ b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_cq.c
@@ -44,6 +44,7 @@
  */
 
 #include <asm/page.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/wait.h>
 #include <rdma/ib_addr.h>
diff --git a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_main.c b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_main.c
index a5e88185171f..ad1ba7f75035 100644
--- a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_main.c
+++ b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_main.c
@@ -48,10 +48,12 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_addr.h>
 #include <rdma/ib_smi.h>
 #include <rdma/ib_user_verbs.h>
 #include <net/addrconf.h>
+#include <linux/completion.h>
 
 #include "pvrdma.h"
 
diff --git a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_qp.c b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_qp.c
index 98b2a0090bf2..edbec1e943a2 100644
--- a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_qp.c
+++ b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_qp.c
@@ -44,6 +44,7 @@
  */
 
 #include <asm/page.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/wait.h>
 #include <rdma/ib_addr.h>
diff --git a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_srq.c b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_srq.c
index bdc2703532c6..6c48f72fbc71 100644
--- a/drivers/infiniband/hw/vmw_pvrdma/pvrdma_srq.c
+++ b/drivers/infiniband/hw/vmw_pvrdma/pvrdma_srq.c
@@ -44,6 +44,7 @@
  */
 
 #include <asm/page.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/wait.h>
 #include <rdma/ib_addr.h>
diff --git a/drivers/infiniband/sw/rdmavt/cq.c b/drivers/infiniband/sw/rdmavt/cq.c
index 82c3f5932249..ba136ac88abc 100644
--- a/drivers/infiniband/sw/rdmavt/cq.c
+++ b/drivers/infiniband/sw/rdmavt/cq.c
@@ -3,6 +3,7 @@
  * Copyright(c) 2016 - 2018 Intel Corporation.
  */
 
+#include <linux/kref.h>
 #include <linux/slab.h>
 #include <linux/vmalloc.h>
 #include "cq.h"
diff --git a/drivers/infiniband/sw/rdmavt/mr.c b/drivers/infiniband/sw/rdmavt/mr.c
index 7a9afd5231d5..948d1d582c6d 100644
--- a/drivers/infiniband/sw/rdmavt/mr.c
+++ b/drivers/infiniband/sw/rdmavt/mr.c
@@ -10,6 +10,7 @@
 #include "vt.h"
 #include "mr.h"
 #include "trace.h"
+#include <linux/completion.h>
 
 /**
  * rvt_driver_mr_init - Init MR resources per driver
diff --git a/drivers/infiniband/sw/rdmavt/qp.c b/drivers/infiniband/sw/rdmavt/qp.c
index e6203e26cc06..49f74b7c6de8 100644
--- a/drivers/infiniband/sw/rdmavt/qp.c
+++ b/drivers/infiniband/sw/rdmavt/qp.c
@@ -5,6 +5,7 @@
 
 #include <linux/hash.h>
 #include <linux/bitops.h>
+#include <linux/hrtimer.h>
 #include <linux/lockdep.h>
 #include <linux/vmalloc.h>
 #include <linux/slab.h>
diff --git a/drivers/infiniband/sw/rxe/rxe_mr.c b/drivers/infiniband/sw/rxe/rxe_mr.c
index da3dee520876..c2132fa78f36 100644
--- a/drivers/infiniband/sw/rxe/rxe_mr.c
+++ b/drivers/infiniband/sw/rxe/rxe_mr.c
@@ -4,6 +4,7 @@
  * Copyright (c) 2015 System Fabric Works, Inc. All rights reserved.
  */
 
+#include <linux/highmem.h> // for kmap_local_page()
 #include <linux/libnvdimm.h>
 
 #include "rxe.h"
diff --git a/drivers/infiniband/sw/rxe/rxe_pool.c b/drivers/infiniband/sw/rxe/rxe_pool.c
index 6215c6de3a84..d8aade4f664d 100644
--- a/drivers/infiniband/sw/rxe/rxe_pool.c
+++ b/drivers/infiniband/sw/rxe/rxe_pool.c
@@ -5,6 +5,7 @@
  */
 
 #include "rxe.h"
+#include <linux/completion.h>
 
 #define RXE_POOL_TIMEOUT	(200)
 #define RXE_POOL_ALIGN		(16)
diff --git a/drivers/infiniband/sw/rxe/rxe_srq.c b/drivers/infiniband/sw/rxe/rxe_srq.c
index 3661cb627d28..7de8ae956259 100644
--- a/drivers/infiniband/sw/rxe/rxe_srq.c
+++ b/drivers/infiniband/sw/rxe/rxe_srq.c
@@ -7,6 +7,7 @@
 #include <linux/vmalloc.h>
 #include "rxe.h"
 #include "rxe_queue.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 int rxe_srq_chk_init(struct rxe_dev *rxe, struct ib_srq_init_attr *init)
 {
diff --git a/drivers/infiniband/sw/siw/siw_qp.c b/drivers/infiniband/sw/siw/siw_qp.c
index da92cfa2073d..9476891fe0ac 100644
--- a/drivers/infiniband/sw/siw/siw_qp.c
+++ b/drivers/infiniband/sw/siw/siw_qp.c
@@ -9,6 +9,7 @@
 #include <linux/scatterlist.h>
 #include <linux/llist.h>
 #include <asm/barrier.h>
+#include <linux/completion.h>
 #include <net/tcp.h>
 #include <trace/events/sock.h>
 
diff --git a/drivers/infiniband/sw/siw/siw_qp_tx.c b/drivers/infiniband/sw/siw/siw_qp_tx.c
index 64ad9e0895bd..4d7c9e1de466 100644
--- a/drivers/infiniband/sw/siw/siw_qp_tx.c
+++ b/drivers/infiniband/sw/siw/siw_qp_tx.c
@@ -3,7 +3,9 @@
 /* Authors: Bernard Metzler <bmt@zurich.ibm.com> */
 /* Copyright (c) 2008-2019, IBM Corporation */
 
+#include <linux/bvec.h>
 #include <linux/errno.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/types.h>
 #include <linux/net.h>
 #include <linux/scatterlist.h>
diff --git a/drivers/infiniband/sw/siw/siw_verbs.c b/drivers/infiniband/sw/siw/siw_verbs.c
index ecf0444666b4..38c368f5563a 100644
--- a/drivers/infiniband/sw/siw/siw_verbs.c
+++ b/drivers/infiniband/sw/siw/siw_verbs.c
@@ -9,6 +9,7 @@
 #include <linux/vmalloc.h>
 #include <linux/xarray.h>
 #include <net/addrconf.h>
+#include <linux/completion.h>
 
 #include <rdma/iw_cm.h>
 #include <rdma/ib_verbs.h>
diff --git a/drivers/infiniband/ulp/ipoib/ipoib_fs.c b/drivers/infiniband/ulp/ipoib/ipoib_fs.c
index 12ba7a0fe0b5..18478f3db0eb 100644
--- a/drivers/infiniband/ulp/ipoib/ipoib_fs.c
+++ b/drivers/infiniband/ulp/ipoib/ipoib_fs.c
@@ -33,6 +33,7 @@
 #include <linux/err.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct file_operations;
 
diff --git a/drivers/infiniband/ulp/ipoib/ipoib_main.c b/drivers/infiniband/ulp/ipoib/ipoib_main.c
index 7a5be705d718..859d581bc263 100644
--- a/drivers/infiniband/ulp/ipoib/ipoib_main.c
+++ b/drivers/infiniband/ulp/ipoib/ipoib_main.c
@@ -33,6 +33,9 @@
  */
 
 #include "ipoib.h"
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 
diff --git a/drivers/infiniband/ulp/ipoib/ipoib_vlan.c b/drivers/infiniband/ulp/ipoib/ipoib_vlan.c
index 4bd161e86f8d..0a2a2fa22d67 100644
--- a/drivers/infiniband/ulp/ipoib/ipoib_vlan.c
+++ b/drivers/infiniband/ulp/ipoib/ipoib_vlan.c
@@ -31,6 +31,7 @@
  */
 
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/seq_file.h>
diff --git a/drivers/infiniband/ulp/iser/iscsi_iser.c b/drivers/infiniband/ulp/iser/iscsi_iser.c
index bb9aaff92ca3..f8e166ee2939 100644
--- a/drivers/infiniband/ulp/iser/iscsi_iser.c
+++ b/drivers/infiniband/ulp/iser/iscsi_iser.c
@@ -50,15 +50,18 @@
 #include <linux/hardirq.h>
 #include <linux/kfifo.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/init.h>
 #include <linux/ioctl.h>
 #include <linux/cdev.h>
 #include <linux/in.h>
+#include <linux/kstrtox.h>
 #include <linux/net.h>
 #include <linux/scatterlist.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <net/sock.h>
 
diff --git a/drivers/infiniband/ulp/iser/iser_verbs.c b/drivers/infiniband/ulp/iser/iser_verbs.c
index 6801b70dc9e0..f78d869a20be 100644
--- a/drivers/infiniband/ulp/iser/iser_verbs.c
+++ b/drivers/infiniband/ulp/iser/iser_verbs.c
@@ -34,6 +34,8 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "iscsi_iser.h"
 
diff --git a/drivers/infiniband/ulp/isert/ib_isert.c b/drivers/infiniband/ulp/isert/ib_isert.c
index 00a7303c8cc6..399f2560bbc6 100644
--- a/drivers/infiniband/ulp/isert/ib_isert.c
+++ b/drivers/infiniband/ulp/isert/ib_isert.c
@@ -14,6 +14,7 @@
 #include <linux/socket.h>
 #include <linux/in.h>
 #include <linux/in6.h>
+#include <linux/kstrtox.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/ib_cm.h>
 #include <rdma/rdma_cm.h>
@@ -21,6 +22,7 @@
 #include <target/target_core_fabric.h>
 #include <target/iscsi/iscsi_transport.h>
 #include <linux/semaphore.h>
+#include <linux/completion.h>
 
 #include "ib_isert.h"
 
diff --git a/drivers/infiniband/ulp/rtrs/rtrs-clt-sysfs.c b/drivers/infiniband/ulp/rtrs/rtrs-clt-sysfs.c
index d3c436ead694..f9c61397e40b 100644
--- a/drivers/infiniband/ulp/rtrs/rtrs-clt-sysfs.c
+++ b/drivers/infiniband/ulp/rtrs/rtrs-clt-sysfs.c
@@ -12,6 +12,7 @@
 #include "rtrs-pri.h"
 #include "rtrs-clt.h"
 #include "rtrs-log.h"
+#include <linux/kstrtox.h>
 
 #define MIN_MAX_RECONN_ATT -1
 #define MAX_MAX_RECONN_ATT 9999
diff --git a/drivers/infiniband/ulp/rtrs/rtrs-clt.c b/drivers/infiniband/ulp/rtrs/rtrs-clt.c
index 79dcbfad93c0..6d4b687cb05b 100644
--- a/drivers/infiniband/ulp/rtrs/rtrs-clt.c
+++ b/drivers/infiniband/ulp/rtrs/rtrs-clt.c
@@ -13,6 +13,8 @@
 #include <linux/module.h>
 #include <linux/rculist.h>
 #include <linux/random.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "rtrs-clt.h"
 #include "rtrs-log.h"
diff --git a/drivers/infiniband/ulp/rtrs/rtrs-srv.c b/drivers/infiniband/ulp/rtrs/rtrs-srv.c
index 1d33efb8fb03..6a30817e31a1 100644
--- a/drivers/infiniband/ulp/rtrs/rtrs-srv.c
+++ b/drivers/infiniband/ulp/rtrs/rtrs-srv.c
@@ -11,6 +11,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME " L" __stringify(__LINE__) ": " fmt
 
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include "rtrs-srv.h"
 #include "rtrs-log.h"
diff --git a/drivers/infiniband/ulp/rtrs/rtrs.c b/drivers/infiniband/ulp/rtrs/rtrs.c
index 4e17d546d4cc..49e04e3ddb56 100644
--- a/drivers/infiniband/ulp/rtrs/rtrs.c
+++ b/drivers/infiniband/ulp/rtrs/rtrs.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/inet.h>
+#include <linux/sprintf.h>
 
 #include "rtrs-pri.h"
 #include "rtrs-log.h"
diff --git a/drivers/infiniband/ulp/srp/ib_srp.c b/drivers/infiniband/ulp/srp/ib_srp.c
index 2916e77f589b..16d0c856dccf 100644
--- a/drivers/infiniband/ulp/srp/ib_srp.c
+++ b/drivers/infiniband/ulp/srp/ib_srp.c
@@ -33,16 +33,21 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/hex.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/parser.h>
 #include <linux/random.h>
+#include <linux/kobject_ns.h>
 #include <linux/jiffies.h>
 #include <linux/lockdep.h>
 #include <linux/inet.h>
 #include <rdma/ib_cache.h>
+#include <linux/completion.h>
 
 #include <linux/atomic.h>
 
diff --git a/drivers/infiniband/ulp/srpt/ib_srpt.c b/drivers/infiniband/ulp/srpt/ib_srpt.c
index 0875f197118f..6fb457fe9a42 100644
--- a/drivers/infiniband/ulp/srpt/ib_srpt.c
+++ b/drivers/infiniband/ulp/srpt/ib_srpt.c
@@ -34,13 +34,17 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/err.h>
 #include <linux/ctype.h>
+#include <linux/hex.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/inet.h>
 #include <rdma/ib_cache.h>
 #include <scsi/scsi_proto.h>
diff --git a/drivers/input/gameport/gameport.c b/drivers/input/gameport/gameport.c
index cfcc81c47b50..863f4e09ca9d 100644
--- a/drivers/input/gameport/gameport.c
+++ b/drivers/input/gameport/gameport.c
@@ -17,6 +17,7 @@
 #include <linux/gameport.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/sched.h>	/* HZ */
 #include <linux/mutex.h>
diff --git a/drivers/input/input-leds.c b/drivers/input/input-leds.c
index b16fc81940f5..b6351576a96d 100644
--- a/drivers/input/input-leds.c
+++ b/drivers/input/input-leds.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/leds.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 
 #if IS_ENABLED(CONFIG_VT)
 #define VT_TRIGGER(_name)	.trigger = _name
diff --git a/drivers/input/input-poller.c b/drivers/input/input-poller.c
index 688e3cb1c2a0..d4fa5752e53a 100644
--- a/drivers/input/input-poller.c
+++ b/drivers/input/input-poller.c
@@ -6,8 +6,10 @@
 #include <linux/device.h>
 #include <linux/input.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/workqueue.h>
 #include "input-poller.h"
diff --git a/drivers/input/input.c b/drivers/input/input.c
index de7884a5be39..c5f41f30ad76 100644
--- a/drivers/input/input.c
+++ b/drivers/input/input.c
@@ -9,6 +9,8 @@
 #define pr_fmt(fmt) KBUILD_BASENAME ": " fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/idr.h>
 #include <linux/input/mt.h>
diff --git a/drivers/input/joystick/a3d.c b/drivers/input/joystick/a3d.c
index fd1827baf27c..407f252af9a0 100644
--- a/drivers/input/joystick/a3d.c
+++ b/drivers/input/joystick/a3d.c
@@ -13,6 +13,7 @@
 #include <linux/gameport.h>
 #include <linux/input.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"FP-Gaming Assassin 3D joystick driver"
 
diff --git a/drivers/input/joystick/adi.c b/drivers/input/joystick/adi.c
index f1a720be458b..069d4bb3b95f 100644
--- a/drivers/input/joystick/adi.c
+++ b/drivers/input/joystick/adi.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/input.h>
diff --git a/drivers/input/joystick/analog.c b/drivers/input/joystick/analog.c
index 0c9e172a9818..d1777d479f73 100644
--- a/drivers/input/joystick/analog.c
+++ b/drivers/input/joystick/analog.c
@@ -9,6 +9,7 @@
 
 #include <linux/delay.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/bitops.h>
@@ -17,6 +18,7 @@
 #include <linux/gameport.h>
 #include <linux/jiffies.h>
 #include <linux/seq_buf.h>
+#include <linux/sprintf.h>
 #include <linux/timex.h>
 #include <linux/timekeeping.h>
 
diff --git a/drivers/input/joystick/cobra.c b/drivers/input/joystick/cobra.c
index 7ff78c9388bd..9080dff71e1c 100644
--- a/drivers/input/joystick/cobra.c
+++ b/drivers/input/joystick/cobra.c
@@ -13,6 +13,7 @@
 #include <linux/gameport.h>
 #include <linux/input.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Creative Labs Blaster GamePad Cobra driver"
 
diff --git a/drivers/input/joystick/db9.c b/drivers/input/joystick/db9.c
index 4fba28b1a1e7..9c34165d235d 100644
--- a/drivers/input/joystick/db9.c
+++ b/drivers/input/joystick/db9.c
@@ -18,6 +18,7 @@
 #include <linux/input.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Vojtech Pavlik <vojtech@ucw.cz>");
 MODULE_DESCRIPTION("Atari, Amstrad, Commodore, Amiga, Sega, etc. joystick driver");
diff --git a/drivers/input/joystick/fsia6b.c b/drivers/input/joystick/fsia6b.c
index 76ffdec5c183..f5d27250fb51 100644
--- a/drivers/input/joystick/fsia6b.c
+++ b/drivers/input/joystick/fsia6b.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/serio.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #define DRIVER_DESC		"FS-iA6B iBus RC receiver"
diff --git a/drivers/input/joystick/gamecon.c b/drivers/input/joystick/gamecon.c
index 41d5dac05448..a41a54201e91 100644
--- a/drivers/input/joystick/gamecon.c
+++ b/drivers/input/joystick/gamecon.c
@@ -21,6 +21,7 @@
 #include <linux/input.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Vojtech Pavlik <vojtech@ucw.cz>");
 MODULE_DESCRIPTION("NES, SNES, N64, MultiSystem, PSX gamepad driver");
diff --git a/drivers/input/joystick/gf2k.c b/drivers/input/joystick/gf2k.c
index abefbd1484df..63a99e7e73c9 100644
--- a/drivers/input/joystick/gf2k.c
+++ b/drivers/input/joystick/gf2k.c
@@ -14,6 +14,7 @@
 #include <linux/input.h>
 #include <linux/gameport.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Genius Flight 2000 joystick driver"
 
diff --git a/drivers/input/joystick/grip.c b/drivers/input/joystick/grip.c
index 0e86b269a90e..127b2d204914 100644
--- a/drivers/input/joystick/grip.c
+++ b/drivers/input/joystick/grip.c
@@ -13,6 +13,7 @@
 #include <linux/gameport.h>
 #include <linux/input.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Gravis GrIP protocol joystick driver"
 
diff --git a/drivers/input/joystick/guillemot.c b/drivers/input/joystick/guillemot.c
index 205eb6f8b84d..e8e0c5f3f0b4 100644
--- a/drivers/input/joystick/guillemot.c
+++ b/drivers/input/joystick/guillemot.c
@@ -14,6 +14,7 @@
 #include <linux/gameport.h>
 #include <linux/input.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Guillemot Digital joystick driver"
 
diff --git a/drivers/input/joystick/interact.c b/drivers/input/joystick/interact.c
index 03a9f0829f7e..a709290588f2 100644
--- a/drivers/input/joystick/interact.c
+++ b/drivers/input/joystick/interact.c
@@ -17,6 +17,7 @@
 #include <linux/gameport.h>
 #include <linux/input.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"InterAct digital joystick driver"
 
diff --git a/drivers/input/joystick/magellan.c b/drivers/input/joystick/magellan.c
index 017ef8c6170b..cbad187d222c 100644
--- a/drivers/input/joystick/magellan.c
+++ b/drivers/input/joystick/magellan.c
@@ -12,6 +12,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Magellan and SpaceMouse 6dof controller driver"
 
diff --git a/drivers/input/joystick/psxpad-spi.c b/drivers/input/joystick/psxpad-spi.c
index c47fc5f34bd0..e45618270f56 100644
--- a/drivers/input/joystick/psxpad-spi.c
+++ b/drivers/input/joystick/psxpad-spi.c
@@ -24,6 +24,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/input/joystick/qwiic-joystick.c b/drivers/input/joystick/qwiic-joystick.c
index 7d88d76b14d6..2201fff96087 100644
--- a/drivers/input/joystick/qwiic-joystick.c
+++ b/drivers/input/joystick/qwiic-joystick.c
@@ -12,6 +12,7 @@
 #include <linux/input.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define DRV_NAME "qwiic-joystick"
 
diff --git a/drivers/input/joystick/sidewinder.c b/drivers/input/joystick/sidewinder.c
index 7282301c3ae7..6c61810785c4 100644
--- a/drivers/input/joystick/sidewinder.c
+++ b/drivers/input/joystick/sidewinder.c
@@ -14,6 +14,7 @@
 #include <linux/input.h>
 #include <linux/gameport.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Microsoft SideWinder joystick family driver"
 
diff --git a/drivers/input/joystick/spaceball.c b/drivers/input/joystick/spaceball.c
index fa8ec533cd69..251e45f78f23 100644
--- a/drivers/input/joystick/spaceball.c
+++ b/drivers/input/joystick/spaceball.c
@@ -17,6 +17,7 @@
 #include <linux/input.h>
 #include <linux/serio.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"SpaceTec SpaceBall 2003/3003/4000 FLX driver"
 
diff --git a/drivers/input/joystick/spaceorb.c b/drivers/input/joystick/spaceorb.c
index dbbc69f17c89..7d4792023263 100644
--- a/drivers/input/joystick/spaceorb.c
+++ b/drivers/input/joystick/spaceorb.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"SpaceTec SpaceOrb 360 and Avenger 6dof controller driver"
 
diff --git a/drivers/input/joystick/stinger.c b/drivers/input/joystick/stinger.c
index 530de468cb61..24ed32d008f9 100644
--- a/drivers/input/joystick/stinger.c
+++ b/drivers/input/joystick/stinger.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Gravis Stinger gamepad driver"
 
diff --git a/drivers/input/joystick/tmdc.c b/drivers/input/joystick/tmdc.c
index 93562ecc0ca1..b6f3303a953f 100644
--- a/drivers/input/joystick/tmdc.c
+++ b/drivers/input/joystick/tmdc.c
@@ -17,6 +17,7 @@
 #include <linux/gameport.h>
 #include <linux/input.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"ThrustMaster DirectConnect joystick driver"
 
diff --git a/drivers/input/joystick/turbografx.c b/drivers/input/joystick/turbografx.c
index dfb9c684651f..bb336f3de190 100644
--- a/drivers/input/joystick/turbografx.c
+++ b/drivers/input/joystick/turbografx.c
@@ -17,6 +17,7 @@
 #include <linux/init.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Vojtech Pavlik <vojtech@ucw.cz>");
 MODULE_DESCRIPTION("TurboGraFX parallel port interface driver");
diff --git a/drivers/input/joystick/twidjoy.c b/drivers/input/joystick/twidjoy.c
index 9b6792ac27f1..eefecf5a94b0 100644
--- a/drivers/input/joystick/twidjoy.c
+++ b/drivers/input/joystick/twidjoy.c
@@ -37,6 +37,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Handykey Twiddler keyboard as a joystick driver"
 
diff --git a/drivers/input/joystick/warrior.c b/drivers/input/joystick/warrior.c
index f66bddf145c2..93ef467601c6 100644
--- a/drivers/input/joystick/warrior.c
+++ b/drivers/input/joystick/warrior.c
@@ -12,6 +12,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Logitech WingMan Warrior joystick driver"
 
diff --git a/drivers/input/joystick/xpad.c b/drivers/input/joystick/xpad.c
index 7c4b2a5cc1b5..e414c950339d 100644
--- a/drivers/input/joystick/xpad.c
+++ b/drivers/input/joystick/xpad.c
@@ -66,6 +66,7 @@
 #include <linux/input.h>
 #include <linux/rcupdate.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/module.h>
 #include <linux/usb/input.h>
diff --git a/drivers/input/joystick/zhenhua.c b/drivers/input/joystick/zhenhua.c
index 3f2460e2b095..47bc192b5a00 100644
--- a/drivers/input/joystick/zhenhua.c
+++ b/drivers/input/joystick/zhenhua.c
@@ -34,6 +34,7 @@
 #include <linux/bitrev.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"RC transmitter with 5-byte Zhen Hua protocol joystick driver"
 
diff --git a/drivers/input/keyboard/applespi.c b/drivers/input/keyboard/applespi.c
index cf25177b4830..ad93a80d629e 100644
--- a/drivers/input/keyboard/applespi.c
+++ b/drivers/input/keyboard/applespi.c
@@ -53,6 +53,7 @@
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/input/keyboard/atkbd.c b/drivers/input/keyboard/atkbd.c
index 7f67f9f2946b..f18542ba5d02 100644
--- a/drivers/input/keyboard/atkbd.c
+++ b/drivers/input/keyboard/atkbd.c
@@ -14,6 +14,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
@@ -21,6 +22,7 @@
 #include <linux/input.h>
 #include <linux/input/vivaldi-fmap.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/libps2.h>
 #include <linux/mutex.h>
diff --git a/drivers/input/keyboard/gpio_keys.c b/drivers/input/keyboard/gpio_keys.c
index 9f3bcd41cf67..e99f0695fcde 100644
--- a/drivers/input/keyboard/gpio_keys.c
+++ b/drivers/input/keyboard/gpio_keys.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/hrtimer.h>
 #include <linux/init.h>
diff --git a/drivers/input/keyboard/lkkbd.c b/drivers/input/keyboard/lkkbd.c
index 047b654b3752..99fa525081c2 100644
--- a/drivers/input/keyboard/lkkbd.c
+++ b/drivers/input/keyboard/lkkbd.c
@@ -52,6 +52,7 @@
 #include <linux/interrupt.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #define DRIVER_DESC	"LK keyboard driver"
diff --git a/drivers/input/keyboard/lm8323.c b/drivers/input/keyboard/lm8323.c
index 7bee93e9b0f5..724161541805 100644
--- a/drivers/input/keyboard/lm8323.c
+++ b/drivers/input/keyboard/lm8323.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/mutex.h>
 #include <linux/delay.h>
@@ -21,6 +22,7 @@
 #include <linux/platform_data/lm8323.h>
 #include <linux/pm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Commands to send to the chip. */
 #define LM8323_CMD_READ_ID		0x80 /* Read chip ID. */
diff --git a/drivers/input/keyboard/newtonkbd.c b/drivers/input/keyboard/newtonkbd.c
index df00a119aa9a..b3337579f388 100644
--- a/drivers/input/keyboard/newtonkbd.c
+++ b/drivers/input/keyboard/newtonkbd.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Newton keyboard driver"
 
diff --git a/drivers/input/keyboard/omap-keypad.c b/drivers/input/keyboard/omap-keypad.c
index 16f936db7305..3f7461337329 100644
--- a/drivers/input/keyboard/omap-keypad.c
+++ b/drivers/input/keyboard/omap-keypad.c
@@ -13,6 +13,7 @@
 
 #include <linux/module.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/input.h>
 #include <linux/kernel.h>
diff --git a/drivers/input/keyboard/qt2160.c b/drivers/input/keyboard/qt2160.c
index 7e3b09642ab7..682084becb1c 100644
--- a/drivers/input/keyboard/qt2160.c
+++ b/drivers/input/keyboard/qt2160.c
@@ -14,6 +14,7 @@
 #include <linux/irq.h>
 #include <linux/interrupt.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 
 #define QT2160_VALID_CHIPID  0x11
 
diff --git a/drivers/input/keyboard/stowaway.c b/drivers/input/keyboard/stowaway.c
index 56e784936059..488063bdfdf4 100644
--- a/drivers/input/keyboard/stowaway.c
+++ b/drivers/input/keyboard/stowaway.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Stowaway keyboard driver"
 
diff --git a/drivers/input/keyboard/sunkbd.c b/drivers/input/keyboard/sunkbd.c
index b123a208ef36..9cdcdb786414 100644
--- a/drivers/input/keyboard/sunkbd.c
+++ b/drivers/input/keyboard/sunkbd.c
@@ -14,6 +14,7 @@
 #include <linux/interrupt.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #define DRIVER_DESC	"Sun keyboard driver"
diff --git a/drivers/input/keyboard/xtkbd.c b/drivers/input/keyboard/xtkbd.c
index c9d7c2481726..07cb85ad2b30 100644
--- a/drivers/input/keyboard/xtkbd.c
+++ b/drivers/input/keyboard/xtkbd.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"XT keyboard driver"
 
diff --git a/drivers/input/misc/adxl34x.c b/drivers/input/misc/adxl34x.c
index a3f45e0ee0c7..486a91d61c78 100644
--- a/drivers/input/misc/adxl34x.c
+++ b/drivers/input/misc/adxl34x.c
@@ -12,7 +12,9 @@
 #include <linux/input.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/input/adxl34x.h>
 #include <linux/module.h>
diff --git a/drivers/input/misc/ati_remote2.c b/drivers/input/misc/ati_remote2.c
index 946bf75aa106..0d43fd0c130b 100644
--- a/drivers/input/misc/ati_remote2.c
+++ b/drivers/input/misc/ati_remote2.c
@@ -9,6 +9,8 @@
 #include <linux/usb/input.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #define DRIVER_DESC    "ATI/Philips USB RF remote driver"
 
diff --git a/drivers/input/misc/axp20x-pek.c b/drivers/input/misc/axp20x-pek.c
index 24f9e9d893de..44855bc2fd6a 100644
--- a/drivers/input/misc/axp20x-pek.c
+++ b/drivers/input/misc/axp20x-pek.c
@@ -20,12 +20,14 @@
 #include <linux/input.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/axp20x.h>
 #include <linux/module.h>
 #include <linux/platform_data/x86/soc.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define AXP20X_PEK_STARTUP_MASK		(0xc0)
 #define AXP20X_PEK_SHUTDOWN_MASK	(0x03)
diff --git a/drivers/input/misc/da9063_onkey.c b/drivers/input/misc/da9063_onkey.c
index c338765e0ecd..f0320770ff42 100644
--- a/drivers/input/misc/da9063_onkey.c
+++ b/drivers/input/misc/da9063_onkey.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_wakeirq.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/regmap.h>
 #include <linux/mfd/da9063/core.h>
diff --git a/drivers/input/misc/ideapad_slidebar.c b/drivers/input/misc/ideapad_slidebar.c
index fa4e7f67d713..0382ef799141 100644
--- a/drivers/input/misc/ideapad_slidebar.c
+++ b/drivers/input/misc/ideapad_slidebar.c
@@ -74,6 +74,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/dmi.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
 #include <linux/platform_device.h>
 #include <linux/input.h>
@@ -81,6 +82,7 @@
 #include <linux/ioport.h>
 #include <linux/i8042.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define IDEAPAD_BASE	0xff29
 
diff --git a/drivers/input/misc/ims-pcu.c b/drivers/input/misc/ims-pcu.c
index 6e8cc28debd9..0907e641ccd6 100644
--- a/drivers/input/misc/ims-pcu.c
+++ b/drivers/input/misc/ims-pcu.c
@@ -11,9 +11,11 @@
 #include <linux/ihex.h>
 #include <linux/input.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/usb/input.h>
 #include <linux/usb/cdc.h>
diff --git a/drivers/input/misc/iqs269a.c b/drivers/input/misc/iqs269a.c
index cd14ff9f57cf..0bca295ef578 100644
--- a/drivers/input/misc/iqs269a.c
+++ b/drivers/input/misc/iqs269a.c
@@ -18,6 +18,7 @@
 #include <linux/input.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/input/misc/iqs626a.c b/drivers/input/misc/iqs626a.c
index 0dab54d3a060..f478f33af549 100644
--- a/drivers/input/misc/iqs626a.c
+++ b/drivers/input/misc/iqs626a.c
@@ -24,6 +24,7 @@
 #include <linux/property.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define IQS626_VER_INFO				0x00
 #define IQS626_VER_INFO_PROD_NUM		0x51
diff --git a/drivers/input/misc/iqs7222.c b/drivers/input/misc/iqs7222.c
index 36aeeae77611..67c0db7b72c8 100644
--- a/drivers/input/misc/iqs7222.c
+++ b/drivers/input/misc/iqs7222.c
@@ -8,6 +8,7 @@
 #include <linux/bits.h>
 #include <linux/delay.h>
 #include <linux/device.h>
+#include <linux/direction.h>
 #include <linux/err.h>
 #include <linux/gpio/consumer.h>
 #include <linux/i2c.h>
@@ -21,6 +22,7 @@
 #include <linux/property.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #define IQS7222_PROD_NUM			0x00
 #define IQS7222_PROD_NUM_A			840
diff --git a/drivers/input/misc/keyspan_remote.c b/drivers/input/misc/keyspan_remote.c
index bee4b1376491..d5c3d14596de 100644
--- a/drivers/input/misc/keyspan_remote.c
+++ b/drivers/input/misc/keyspan_remote.c
@@ -12,6 +12,7 @@
 #include <linux/errno.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 
 /* Parameters that can be passed to the driver. */
diff --git a/drivers/input/misc/kxtj9.c b/drivers/input/misc/kxtj9.c
index d47269b10e9a..497ad15f12ce 100644
--- a/drivers/input/misc/kxtj9.c
+++ b/drivers/input/misc/kxtj9.c
@@ -8,9 +8,11 @@
 #include <linux/i2c.h>
 #include <linux/input.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/input/kxtj9.h>
+#include <linux/sprintf.h>
 
 #define NAME			"kxtj9"
 #define G_MAX			8000
diff --git a/drivers/input/misc/pcf8574_keypad.c b/drivers/input/misc/pcf8574_keypad.c
index 536cedeb38e6..b4a28bc17eaf 100644
--- a/drivers/input/misc/pcf8574_keypad.c
+++ b/drivers/input/misc/pcf8574_keypad.c
@@ -10,6 +10,7 @@
 #include <linux/interrupt.h>
 #include <linux/i2c.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #define DRV_NAME "pcf8574_keypad"
diff --git a/drivers/input/misc/tps65218-pwrbutton.c b/drivers/input/misc/tps65218-pwrbutton.c
index fc450fce0932..3de96d7797fb 100644
--- a/drivers/input/misc/tps65218-pwrbutton.c
+++ b/drivers/input/misc/tps65218-pwrbutton.c
@@ -18,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct tps6521x_data {
 	unsigned int reg_status;
diff --git a/drivers/input/misc/tps65219-pwrbutton.c b/drivers/input/misc/tps65219-pwrbutton.c
index eeb9f2334ab4..b06ff1488a0d 100644
--- a/drivers/input/misc/tps65219-pwrbutton.c
+++ b/drivers/input/misc/tps65219-pwrbutton.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct tps65219_pwrbutton {
 	struct device *dev;
diff --git a/drivers/input/misc/uinput.c b/drivers/input/misc/uinput.c
index d98212d55108..1b6aac4609b0 100644
--- a/drivers/input/misc/uinput.c
+++ b/drivers/input/misc/uinput.c
@@ -29,6 +29,7 @@
 #include <linux/overflow.h>
 #include <linux/input/mt.h>
 #include "../input-compat.h"
+#include <linux/completion.h>
 
 #define UINPUT_NAME		"uinput"
 #define UINPUT_BUFFER_SIZE	16
diff --git a/drivers/input/misc/xen-kbdfront.c b/drivers/input/misc/xen-kbdfront.c
index 67f1c7364c95..96ee4eb1894b 100644
--- a/drivers/input/misc/xen-kbdfront.c
+++ b/drivers/input/misc/xen-kbdfront.c
@@ -19,6 +19,7 @@
 #include <linux/input.h>
 #include <linux/input/mt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <asm/xen/hypervisor.h>
 
diff --git a/drivers/input/misc/yealink.c b/drivers/input/misc/yealink.c
index 69420781db30..b4f5649d7316 100644
--- a/drivers/input/misc/yealink.c
+++ b/drivers/input/misc/yealink.c
@@ -37,6 +37,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/rwsem.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 #include <linux/map_to_7segment.h>
 
diff --git a/drivers/input/mouse/alps.c b/drivers/input/mouse/alps.c
index e2c11d9f3868..8fd4eaa46c0c 100644
--- a/drivers/input/mouse/alps.c
+++ b/drivers/input/mouse/alps.c
@@ -18,6 +18,7 @@
 #include <linux/serio.h>
 #include <linux/libps2.h>
 #include <linux/dmi.h>
+#include <linux/sprintf.h>
 
 #include "psmouse.h"
 #include "alps.h"
diff --git a/drivers/input/mouse/cyapa.c b/drivers/input/mouse/cyapa.c
index 5979deabe23d..c0221f30b742 100644
--- a/drivers/input/mouse/cyapa.c
+++ b/drivers/input/mouse/cyapa.c
@@ -19,10 +19,12 @@
 #include <linux/input.h>
 #include <linux/input/mt.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/pm_runtime.h>
 #include <linux/acpi.h>
diff --git a/drivers/input/mouse/elan_i2c_core.c b/drivers/input/mouse/elan_i2c_core.c
index 8a72c200ccb5..34814d770f4d 100644
--- a/drivers/input/mouse/elan_i2c_core.c
+++ b/drivers/input/mouse/elan_i2c_core.c
@@ -16,6 +16,7 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/firmware.h>
@@ -29,6 +30,7 @@
 #include <linux/kernel.h>
 #include <linux/sched.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/jiffies.h>
 #include <linux/completion.h>
diff --git a/drivers/input/mouse/elantech.c b/drivers/input/mouse/elantech.c
index 4e38229404b4..751a58594220 100644
--- a/drivers/input/mouse/elantech.c
+++ b/drivers/input/mouse/elantech.c
@@ -9,6 +9,7 @@
 
 #include <linux/delay.h>
 #include <linux/dmi.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/i2c.h>
@@ -21,6 +22,7 @@
 #include "psmouse.h"
 #include "elantech.h"
 #include "elan_i2c.h"
+#include <linux/sprintf.h>
 
 #define elantech_debug(fmt, ...)					\
 	do {								\
diff --git a/drivers/input/mouse/hgpk.c b/drivers/input/mouse/hgpk.c
index 3c8310da0b05..cf6c33053497 100644
--- a/drivers/input/mouse/hgpk.c
+++ b/drivers/input/mouse/hgpk.c
@@ -29,11 +29,13 @@
 #define DEBUG
 #include <linux/slab.h>
 #include <linux/input.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/serio.h>
 #include <linux/libps2.h>
 #include <linux/delay.h>
 #include <asm/olpc.h>
+#include <linux/sprintf.h>
 
 #include "psmouse.h"
 #include "hgpk.h"
diff --git a/drivers/input/mouse/lifebook.c b/drivers/input/mouse/lifebook.c
index bd9955730176..4ceda5f39095 100644
--- a/drivers/input/mouse/lifebook.c
+++ b/drivers/input/mouse/lifebook.c
@@ -14,6 +14,7 @@
 #include <linux/libps2.h>
 #include <linux/dmi.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "psmouse.h"
diff --git a/drivers/input/mouse/logips2pp.c b/drivers/input/mouse/logips2pp.c
index ed5a848dba9d..76c26839eed4 100644
--- a/drivers/input/mouse/logips2pp.c
+++ b/drivers/input/mouse/logips2pp.c
@@ -8,8 +8,10 @@
 
 #include <linux/bitops.h>
 #include <linux/input.h>
+#include <linux/kstrtox.h>
 #include <linux/serio.h>
 #include <linux/libps2.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include "psmouse.h"
 #include "logips2pp.h"
diff --git a/drivers/input/mouse/psmouse-base.c b/drivers/input/mouse/psmouse-base.c
index a0aac76b1e41..5b9587f74eac 100644
--- a/drivers/input/mouse/psmouse-base.c
+++ b/drivers/input/mouse/psmouse-base.c
@@ -12,6 +12,7 @@
 
 #include <linux/bitops.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
@@ -20,6 +21,7 @@
 #include <linux/init.h>
 #include <linux/libps2.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "psmouse.h"
diff --git a/drivers/input/mouse/sentelic.c b/drivers/input/mouse/sentelic.c
index 2716d2ba386a..7feb189860f5 100644
--- a/drivers/input/mouse/sentelic.c
+++ b/drivers/input/mouse/sentelic.c
@@ -10,10 +10,12 @@
 #include <linux/input.h>
 #include <linux/input/mt.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/libps2.h>
 #include <linux/serio.h>
 #include <linux/jiffies.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "psmouse.h"
 #include "sentelic.h"
diff --git a/drivers/input/mouse/sermouse.c b/drivers/input/mouse/sermouse.c
index 993f90333380..763b46e579f8 100644
--- a/drivers/input/mouse/sermouse.c
+++ b/drivers/input/mouse/sermouse.c
@@ -13,6 +13,7 @@
 #include <linux/interrupt.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Serial mouse driver"
 
diff --git a/drivers/input/mouse/synaptics.c b/drivers/input/mouse/synaptics.c
index 7a303a9d6bf7..90407afbd5e2 100644
--- a/drivers/input/mouse/synaptics.c
+++ b/drivers/input/mouse/synaptics.c
@@ -24,6 +24,7 @@
 #include <linux/delay.h>
 #include <linux/dmi.h>
 #include <linux/input/mt.h>
+#include <linux/kstrtox.h>
 #include <linux/serio.h>
 #include <linux/libps2.h>
 #include <linux/rmi.h>
@@ -31,6 +32,7 @@
 #include <linux/slab.h>
 #include "psmouse.h"
 #include "synaptics.h"
+#include <linux/sprintf.h>
 
 /*
  * The x/y limits are taken from the Synaptics TouchPad interfacing Guide,
diff --git a/drivers/input/mouse/synaptics_usb.c b/drivers/input/mouse/synaptics_usb.c
index 75e45f3ae675..6a61c48a76d2 100644
--- a/drivers/input/mouse/synaptics_usb.c
+++ b/drivers/input/mouse/synaptics_usb.c
@@ -38,6 +38,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/input.h>
 #include <linux/usb/input.h>
diff --git a/drivers/input/mouse/trackpoint.c b/drivers/input/mouse/trackpoint.c
index 5f6643b69a2c..dd2697c0f6f7 100644
--- a/drivers/input/mouse/trackpoint.c
+++ b/drivers/input/mouse/trackpoint.c
@@ -7,11 +7,13 @@
 
 #include <linux/slab.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/serio.h>
 #include <linux/module.h>
 #include <linux/input.h>
 #include <linux/libps2.h>
 #include <linux/proc_fs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include "psmouse.h"
 #include "trackpoint.h"
diff --git a/drivers/input/mouse/vmmouse.c b/drivers/input/mouse/vmmouse.c
index ea9eff7c8099..c9d851961d9f 100644
--- a/drivers/input/mouse/vmmouse.c
+++ b/drivers/input/mouse/vmmouse.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <asm/hypervisor.h>
 #include <asm/vmware.h>
+#include <linux/sprintf.h>
 
 #include "psmouse.h"
 #include "vmmouse.h"
diff --git a/drivers/input/mouse/vsxxxaa.c b/drivers/input/mouse/vsxxxaa.c
index 8af8e4a15f95..51fe8a3e90e4 100644
--- a/drivers/input/mouse/vsxxxaa.c
+++ b/drivers/input/mouse/vsxxxaa.c
@@ -67,6 +67,7 @@
 #include <linux/interrupt.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC "Driver for DEC VSXXX-AA and -GA mice and VSXXX-AB tablet"
 
diff --git a/drivers/input/rmi4/rmi_bus.c b/drivers/input/rmi4/rmi_bus.c
index 1b45b1d3077d..730febf29111 100644
--- a/drivers/input/rmi4/rmi_bus.c
+++ b/drivers/input/rmi4/rmi_bus.c
@@ -12,6 +12,7 @@
 #include <linux/pm.h>
 #include <linux/rmi.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/of.h>
 #include "rmi_bus.h"
diff --git a/drivers/input/rmi4/rmi_f01.c b/drivers/input/rmi4/rmi_f01.c
index cc1d4b424640..32f373677d8a 100644
--- a/drivers/input/rmi4/rmi_f01.c
+++ b/drivers/input/rmi4/rmi_f01.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/rmi.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/of.h>
 #include <asm/unaligned.h>
diff --git a/drivers/input/rmi4/rmi_f03.c b/drivers/input/rmi4/rmi_f03.c
index 1e11ea30d7bd..eea4892eb91d 100644
--- a/drivers/input/rmi4/rmi_f03.c
+++ b/drivers/input/rmi4/rmi_f03.c
@@ -9,6 +9,7 @@
 #include <linux/serio.h>
 #include <linux/notifier.h>
 #include "rmi_driver.h"
+#include <linux/sprintf.h>
 
 #define RMI_F03_RX_DATA_OFB		0x01
 #define RMI_F03_OB_SIZE			2
diff --git a/drivers/input/rmi4/rmi_f34.c b/drivers/input/rmi4/rmi_f34.c
index 3b3ac71e53dc..e019f6c131ed 100644
--- a/drivers/input/rmi4/rmi_f34.c
+++ b/drivers/input/rmi4/rmi_f34.c
@@ -9,6 +9,8 @@
 #include <linux/firmware.h>
 #include <asm/unaligned.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "rmi_driver.h"
 #include "rmi_f34.h"
diff --git a/drivers/input/rmi4/rmi_f34v7.c b/drivers/input/rmi4/rmi_f34v7.c
index 886557b01eba..0a4b1988fad8 100644
--- a/drivers/input/rmi4/rmi_f34v7.c
+++ b/drivers/input/rmi4/rmi_f34v7.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/rmi.h>
 #include <linux/firmware.h>
@@ -14,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/jiffies.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include "rmi_driver.h"
 #include "rmi_f34.h"
diff --git a/drivers/input/rmi4/rmi_f54.c b/drivers/input/rmi4/rmi_f54.c
index 5c3da910b5b2..20f4b642ba99 100644
--- a/drivers/input/rmi4/rmi_f54.c
+++ b/drivers/input/rmi4/rmi_f54.c
@@ -10,11 +10,13 @@
 #include <linux/slab.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-ioctl.h>
 #include <media/videobuf2-v4l2.h>
 #include <media/videobuf2-vmalloc.h>
 #include "rmi_driver.h"
+#include <linux/completion.h>
 
 #define F54_NAME		"rmi4_f54"
 
diff --git a/drivers/input/serio/apbps2.c b/drivers/input/serio/apbps2.c
index dbbb10251520..2fab64aed02a 100644
--- a/drivers/input/serio/apbps2.c
+++ b/drivers/input/serio/apbps2.c
@@ -24,6 +24,7 @@
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/io.h>
diff --git a/drivers/input/serio/arc_ps2.c b/drivers/input/serio/arc_ps2.c
index 9d8726830140..48414a316de2 100644
--- a/drivers/input/serio/arc_ps2.c
+++ b/drivers/input/serio/arc_ps2.c
@@ -15,6 +15,7 @@
 #include <linux/io.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define ARC_PS2_PORTS                   2
 
diff --git a/drivers/input/serio/ct82c710.c b/drivers/input/serio/ct82c710.c
index d5c9bb3d0103..0d60bb0896d5 100644
--- a/drivers/input/serio/ct82c710.c
+++ b/drivers/input/serio/ct82c710.c
@@ -17,6 +17,7 @@
 #include <linux/err.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <asm/io.h>
 
diff --git a/drivers/input/serio/gscps2.c b/drivers/input/serio/gscps2.c
index 633c7de49d67..4a5c10245186 100644
--- a/drivers/input/serio/gscps2.c
+++ b/drivers/input/serio/gscps2.c
@@ -31,6 +31,7 @@
 #include <linux/spinlock.h>
 #include <linux/delay.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 
 #include <asm/irq.h>
 #include <asm/io.h>
diff --git a/drivers/input/serio/hil_mlc.c b/drivers/input/serio/hil_mlc.c
index d36e89d6fc54..695205f143e7 100644
--- a/drivers/input/serio/hil_mlc.c
+++ b/drivers/input/serio/hil_mlc.c
@@ -59,6 +59,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 
diff --git a/drivers/input/serio/i8042-acpipnpio.h b/drivers/input/serio/i8042-acpipnpio.h
index dfc6c581873b..75ea73936048 100644
--- a/drivers/input/serio/i8042-acpipnpio.h
+++ b/drivers/input/serio/i8042-acpipnpio.h
@@ -3,6 +3,7 @@
 #define _I8042_ACPIPNPIO_H
 
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_X86
 #include <asm/x86_init.h>
diff --git a/drivers/input/serio/i8042.c b/drivers/input/serio/i8042.c
index 9fbb8d31575a..26660ba8ed1e 100644
--- a/drivers/input/serio/i8042.c
+++ b/drivers/input/serio/i8042.c
@@ -10,6 +10,7 @@
 
 #include <linux/types.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/ioport.h>
@@ -20,8 +21,10 @@
 #include <linux/platform_device.h>
 #include <linux/i8042.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/property.h>
+#include <linux/completion.h>
 
 #include <asm/io.h>
 
diff --git a/drivers/input/serio/ioc3kbd.c b/drivers/input/serio/ioc3kbd.c
index 50552dc7b4f5..b305c964e07d 100644
--- a/drivers/input/serio/ioc3kbd.c
+++ b/drivers/input/serio/ioc3kbd.c
@@ -14,6 +14,7 @@
 #include <linux/serio.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <asm/sn/ioc3.h>
 
diff --git a/drivers/input/serio/maceps2.c b/drivers/input/serio/maceps2.c
index 5ccfb82759b3..7faf74659346 100644
--- a/drivers/input/serio/maceps2.c
+++ b/drivers/input/serio/maceps2.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 
 #include <asm/io.h>
 #include <asm/irq.h>
diff --git a/drivers/input/serio/parkbd.c b/drivers/input/serio/parkbd.c
index 0d54895428f5..0958e3e36aab 100644
--- a/drivers/input/serio/parkbd.c
+++ b/drivers/input/serio/parkbd.c
@@ -45,6 +45,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Vojtech Pavlik <vojtech@ucw.cz>");
 MODULE_DESCRIPTION("Parallel port to Keyboard port adapter driver");
diff --git a/drivers/input/serio/ps2mult.c b/drivers/input/serio/ps2mult.c
index 902e81826fbf..7c5c50a63c9e 100644
--- a/drivers/input/serio/ps2mult.c
+++ b/drivers/input/serio/ps2mult.c
@@ -10,6 +10,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Dmitry Eremin-Solenikov <dbaryshkov@gmail.com>");
 MODULE_DESCRIPTION("TQC PS/2 Multiplexer driver");
diff --git a/drivers/input/serio/serio.c b/drivers/input/serio/serio.c
index 767fc9efb4a8..982950c85b51 100644
--- a/drivers/input/serio/serio.c
+++ b/drivers/input/serio/serio.c
@@ -15,6 +15,7 @@
 #include <linux/errno.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/mutex.h>
 
diff --git a/drivers/input/serio/serio_raw.c b/drivers/input/serio/serio_raw.c
index 1e4770094415..29d84d8702d1 100644
--- a/drivers/input/serio/serio_raw.c
+++ b/drivers/input/serio/serio_raw.c
@@ -12,6 +12,7 @@
 #include <linux/poll.h>
 #include <linux/module.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 #include <linux/major.h>
 #include <linux/device.h>
 #include <linux/miscdevice.h>
diff --git a/drivers/input/serio/serport.c b/drivers/input/serio/serport.c
index 1db3f30011c4..216f80401a6a 100644
--- a/drivers/input/serio/serport.c
+++ b/drivers/input/serio/serport.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/compat.h>
 
diff --git a/drivers/input/serio/xilinx_ps2.c b/drivers/input/serio/xilinx_ps2.c
index d8f9faf2b529..d09e189b9c55 100644
--- a/drivers/input/serio/xilinx_ps2.c
+++ b/drivers/input/serio/xilinx_ps2.c
@@ -18,6 +18,7 @@
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME		"xilinx_ps2"
 
diff --git a/drivers/input/tablet/acecad.c b/drivers/input/tablet/acecad.c
index b20e5a1afbcc..658900f29a4d 100644
--- a/drivers/input/tablet/acecad.c
+++ b/drivers/input/tablet/acecad.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 
 MODULE_AUTHOR("Edouard TISSERANT <edouard.tisserant@wanadoo.fr>");
diff --git a/drivers/input/tablet/aiptek.c b/drivers/input/tablet/aiptek.c
index baabc51547b8..c2084128eade 100644
--- a/drivers/input/tablet/aiptek.c
+++ b/drivers/input/tablet/aiptek.c
@@ -59,6 +59,7 @@
 
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/usb/input.h>
diff --git a/drivers/input/tablet/pegasus_notetaker.c b/drivers/input/tablet/pegasus_notetaker.c
index a68da2988f9c..0ee8d7ea1a56 100644
--- a/drivers/input/tablet/pegasus_notetaker.c
+++ b/drivers/input/tablet/pegasus_notetaker.c
@@ -39,6 +39,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 #include <linux/slab.h>
 #include <linux/workqueue.h>
diff --git a/drivers/input/tablet/wacom_serial4.c b/drivers/input/tablet/wacom_serial4.c
index 1cedb45ba497..e83f65bb3ed5 100644
--- a/drivers/input/tablet/wacom_serial4.c
+++ b/drivers/input/tablet/wacom_serial4.c
@@ -107,6 +107,7 @@
 #include <linux/module.h>
 #include <linux/serio.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 MODULE_AUTHOR("Julian Squires <julian@cipht.net>, Hans de Goede <hdegoede@redhat.com>");
diff --git a/drivers/input/touchscreen/ad7877.c b/drivers/input/touchscreen/ad7877.c
index a0598e9c7aff..797b7c2305a5 100644
--- a/drivers/input/touchscreen/ad7877.c
+++ b/drivers/input/touchscreen/ad7877.c
@@ -26,12 +26,14 @@
 #include <linux/delay.h>
 #include <linux/input.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/pm.h>
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
 #include <linux/spi/ad7877.h>
 #include <linux/module.h>
 #include <asm/irq.h>
+#include <linux/sprintf.h>
 
 #define	TS_PEN_UP_TIMEOUT	msecs_to_jiffies(100)
 
diff --git a/drivers/input/touchscreen/ad7879.c b/drivers/input/touchscreen/ad7879.c
index e5d69bf2276e..6e27c1f06f7a 100644
--- a/drivers/input/touchscreen/ad7879.c
+++ b/drivers/input/touchscreen/ad7879.c
@@ -25,10 +25,12 @@
 #include <linux/input.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/property.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
 #include <linux/gpio/driver.h>
+#include <linux/sprintf.h>
 
 #include <linux/input/touchscreen.h>
 #include <linux/module.h>
diff --git a/drivers/input/touchscreen/ads7846.c b/drivers/input/touchscreen/ads7846.c
index d2bbb436a77d..891d006cccb3 100644
--- a/drivers/input/touchscreen/ads7846.c
+++ b/drivers/input/touchscreen/ads7846.c
@@ -17,6 +17,7 @@
 #include <linux/types.h>
 #include <linux/hwmon.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/delay.h>
 #include <linux/input.h>
@@ -31,6 +32,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/module.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 /*
  * This code has been heavily tested on a Nokia 770, and lightly
diff --git a/drivers/input/touchscreen/atmel_mxt_ts.c b/drivers/input/touchscreen/atmel_mxt_ts.c
index 542a31448c8f..df31d6594b42 100644
--- a/drivers/input/touchscreen/atmel_mxt_ts.c
+++ b/drivers/input/touchscreen/atmel_mxt_ts.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/dmi.h>
 #include <linux/module.h>
 #include <linux/init.h>
@@ -27,6 +28,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/gpio/consumer.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-ioctl.h>
 #include <media/videobuf2-v4l2.h>
diff --git a/drivers/input/touchscreen/auo-pixcir-ts.c b/drivers/input/touchscreen/auo-pixcir-ts.c
index 90c682e7407f..3ff64b6d2081 100644
--- a/drivers/input/touchscreen/auo-pixcir-ts.c
+++ b/drivers/input/touchscreen/auo-pixcir-ts.c
@@ -23,6 +23,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/of.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 /*
  * Coordinate calculation:
diff --git a/drivers/input/touchscreen/chipone_icn8505.c b/drivers/input/touchscreen/chipone_icn8505.c
index b56954830b33..4cf1c90859ec 100644
--- a/drivers/input/touchscreen/chipone_icn8505.c
+++ b/drivers/input/touchscreen/chipone_icn8505.c
@@ -19,6 +19,7 @@
 #include <linux/input/mt.h>
 #include <linux/input/touchscreen.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 /* Normal operation mode defines */
 #define ICN8505_REG_ADDR_WIDTH		16
diff --git a/drivers/input/touchscreen/cy8ctmg110_ts.c b/drivers/input/touchscreen/cy8ctmg110_ts.c
index 54d6c4869eb0..3a0b1320755c 100644
--- a/drivers/input/touchscreen/cy8ctmg110_ts.c
+++ b/drivers/input/touchscreen/cy8ctmg110_ts.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <asm/byteorder.h>
+#include <linux/sprintf.h>
 
 #define CY8CTMG110_DRIVER_NAME      "cy8ctmg110"
 
diff --git a/drivers/input/touchscreen/cyttsp4_core.c b/drivers/input/touchscreen/cyttsp4_core.c
index 7cb26929dc73..e91186b92ec9 100644
--- a/drivers/input/touchscreen/cyttsp4_core.c
+++ b/drivers/input/touchscreen/cyttsp4_core.c
@@ -20,6 +20,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Timeout in ms. */
 #define CY_CORE_REQUEST_EXCLUSIVE_TIMEOUT	500
diff --git a/drivers/input/touchscreen/cyttsp5.c b/drivers/input/touchscreen/cyttsp5.c
index 68527ede5c0e..7acd446e872a 100644
--- a/drivers/input/touchscreen/cyttsp5.c
+++ b/drivers/input/touchscreen/cyttsp5.c
@@ -22,6 +22,8 @@
 #include <linux/module.h>
 #include <linux/regmap.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define CYTTSP5_NAME				"cyttsp5"
 #define CY_I2C_DATA_SIZE			(2 * 256)
diff --git a/drivers/input/touchscreen/cyttsp_core.c b/drivers/input/touchscreen/cyttsp_core.c
index 132ed5786e84..440e6a30f400 100644
--- a/drivers/input/touchscreen/cyttsp_core.c
+++ b/drivers/input/touchscreen/cyttsp_core.c
@@ -23,6 +23,7 @@
 #include <linux/property.h>
 #include <linux/gpio/consumer.h>
 #include <linux/regulator/consumer.h>
+#include <linux/completion.h>
 
 #include "cyttsp_core.h"
 
diff --git a/drivers/input/touchscreen/dynapro.c b/drivers/input/touchscreen/dynapro.c
index dc07fca7c5ed..00ce6f01888f 100644
--- a/drivers/input/touchscreen/dynapro.c
+++ b/drivers/input/touchscreen/dynapro.c
@@ -19,6 +19,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Dynapro serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/edt-ft5x06.c b/drivers/input/touchscreen/edt-ft5x06.c
index 2a1db1134476..299dd779416a 100644
--- a/drivers/input/touchscreen/edt-ft5x06.c
+++ b/drivers/input/touchscreen/edt-ft5x06.c
@@ -24,12 +24,14 @@
 #include <linux/input/touchscreen.h>
 #include <linux/irq.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/property.h>
 #include <linux/ratelimit.h>
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include <asm/unaligned.h>
diff --git a/drivers/input/touchscreen/egalax_ts_serial.c b/drivers/input/touchscreen/egalax_ts_serial.c
index 375922d3a6d1..b4498bb4e828 100644
--- a/drivers/input/touchscreen/egalax_ts_serial.c
+++ b/drivers/input/touchscreen/egalax_ts_serial.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"EETI Egalax serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/elants_i2c.c b/drivers/input/touchscreen/elants_i2c.c
index 365765d40e62..66899856eccb 100644
--- a/drivers/input/touchscreen/elants_i2c.c
+++ b/drivers/input/touchscreen/elants_i2c.c
@@ -20,6 +20,7 @@
 
 
 #include <linux/bits.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/input.h>
 #include <linux/interrupt.h>
@@ -28,6 +29,7 @@
 #include <linux/async.h>
 #include <linux/i2c.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/buffer_head.h>
 #include <linux/slab.h>
diff --git a/drivers/input/touchscreen/elo.c b/drivers/input/touchscreen/elo.c
index 96173232e53f..1f85d6c1df8f 100644
--- a/drivers/input/touchscreen/elo.c
+++ b/drivers/input/touchscreen/elo.c
@@ -19,6 +19,8 @@
 #include <linux/input.h>
 #include <linux/serio.h>
 #include <linux/ctype.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Elo serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/exc3000.c b/drivers/input/touchscreen/exc3000.c
index a4030cc9ff60..c458ca97780e 100644
--- a/drivers/input/touchscreen/exc3000.c
+++ b/drivers/input/touchscreen/exc3000.c
@@ -9,6 +9,7 @@
 
 #include <linux/acpi.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/gpio/consumer.h>
@@ -21,6 +22,7 @@
 #include <linux/of.h>
 #include <linux/regulator/consumer.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <asm/unaligned.h>
 
diff --git a/drivers/input/touchscreen/fujitsu_ts.c b/drivers/input/touchscreen/fujitsu_ts.c
index 3b0b8fccc3f0..7cf3bd738bef 100644
--- a/drivers/input/touchscreen/fujitsu_ts.c
+++ b/drivers/input/touchscreen/fujitsu_ts.c
@@ -12,6 +12,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Fujitsu serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/goodix.c b/drivers/input/touchscreen/goodix.c
index b068ff8afbc9..6b2ac0253c0d 100644
--- a/drivers/input/touchscreen/goodix.c
+++ b/drivers/input/touchscreen/goodix.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/dmi.h>
 #include <linux/firmware.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/irq.h>
@@ -21,9 +22,11 @@
 #include <linux/platform_data/x86/soc.h>
 #include <linux/slab.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/of.h>
 #include <asm/unaligned.h>
 #include "goodix.h"
+#include <linux/sprintf.h>
 
 #define GOODIX_GPIO_INT_NAME		"irq"
 #define GOODIX_GPIO_RST_NAME		"reset"
diff --git a/drivers/input/touchscreen/goodix_fwupload.c b/drivers/input/touchscreen/goodix_fwupload.c
index 191d4f38d991..b46acaf35f7a 100644
--- a/drivers/input/touchscreen/goodix_fwupload.c
+++ b/drivers/input/touchscreen/goodix_fwupload.c
@@ -13,6 +13,7 @@
 #include <linux/firmware.h>
 #include <linux/i2c.h>
 #include "goodix.h"
+#include <linux/sprintf.h>
 
 #define GOODIX_FW_HEADER_LENGTH		sizeof(struct goodix_fw_header)
 #define GOODIX_FW_SECTION_LENGTH	0x2000
diff --git a/drivers/input/touchscreen/gunze.c b/drivers/input/touchscreen/gunze.c
index 5a5f9da73fa1..846c37ae7631 100644
--- a/drivers/input/touchscreen/gunze.c
+++ b/drivers/input/touchscreen/gunze.c
@@ -9,10 +9,12 @@
 
 #include <linux/errno.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Gunze AHL-51S touchscreen driver"
 
diff --git a/drivers/input/touchscreen/hampshire.c b/drivers/input/touchscreen/hampshire.c
index 5c4d877564ee..e783eee0da79 100644
--- a/drivers/input/touchscreen/hampshire.c
+++ b/drivers/input/touchscreen/hampshire.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Hampshire serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/hideep.c b/drivers/input/touchscreen/hideep.c
index eae90676f4e5..32c615560f21 100644
--- a/drivers/input/touchscreen/hideep.c
+++ b/drivers/input/touchscreen/hideep.c
@@ -11,7 +11,9 @@
 #include <linux/i2c.h>
 #include <linux/acpi.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/input.h>
 #include <linux/input/mt.h>
diff --git a/drivers/input/touchscreen/hycon-hy46xx.c b/drivers/input/touchscreen/hycon-hy46xx.c
index 2e01d87977c1..310b8b0f90a0 100644
--- a/drivers/input/touchscreen/hycon-hy46xx.c
+++ b/drivers/input/touchscreen/hycon-hy46xx.c
@@ -12,6 +12,7 @@
 #include <linux/input/mt.h>
 #include <linux/input/touchscreen.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/regulator/consumer.h>
 #include <linux/regmap.h>
 
diff --git a/drivers/input/touchscreen/ili210x.c b/drivers/input/touchscreen/ili210x.c
index 31ffdc2a93f3..0b2eb5320d11 100644
--- a/drivers/input/touchscreen/ili210x.c
+++ b/drivers/input/touchscreen/ili210x.c
@@ -8,6 +8,7 @@
 #include <linux/input/mt.h>
 #include <linux/input/touchscreen.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/sizes.h>
diff --git a/drivers/input/touchscreen/inexio.c b/drivers/input/touchscreen/inexio.c
index 1d7e4c3966ce..a19160f29773 100644
--- a/drivers/input/touchscreen/inexio.c
+++ b/drivers/input/touchscreen/inexio.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"iNexio serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/iqs5xx.c b/drivers/input/touchscreen/iqs5xx.c
index 4d226118f3cc..33b0b1cbe9c0 100644
--- a/drivers/input/touchscreen/iqs5xx.c
+++ b/drivers/input/touchscreen/iqs5xx.c
@@ -17,6 +17,7 @@
 #include <linux/err.h>
 #include <linux/firmware.h>
 #include <linux/gpio/consumer.h>
+#include <linux/hex.h>
 #include <linux/i2c.h>
 #include <linux/input.h>
 #include <linux/input/mt.h>
diff --git a/drivers/input/touchscreen/melfas_mip4.c b/drivers/input/touchscreen/melfas_mip4.c
index 78e1c63e530e..840dae029f57 100644
--- a/drivers/input/touchscreen/melfas_mip4.c
+++ b/drivers/input/touchscreen/melfas_mip4.c
@@ -19,6 +19,7 @@
 #include <linux/of.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #define MIP4_DEVICE_NAME	"mip4_ts"
 
diff --git a/drivers/input/touchscreen/mtouch.c b/drivers/input/touchscreen/mtouch.c
index 28e449eea318..6f095288c944 100644
--- a/drivers/input/touchscreen/mtouch.c
+++ b/drivers/input/touchscreen/mtouch.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"MicroTouch serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/penmount.c b/drivers/input/touchscreen/penmount.c
index 12abb3b36128..9694d9541a06 100644
--- a/drivers/input/touchscreen/penmount.c
+++ b/drivers/input/touchscreen/penmount.c
@@ -17,6 +17,7 @@
 #include <linux/input.h>
 #include <linux/input/mt.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"PenMount serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/raydium_i2c_ts.c b/drivers/input/touchscreen/raydium_i2c_ts.c
index 13c500e776f6..38e5480dea0a 100644
--- a/drivers/input/touchscreen/raydium_i2c_ts.c
+++ b/drivers/input/touchscreen/raydium_i2c_ts.c
@@ -25,6 +25,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 /* Slave I2C mode */
 #define RM_BOOT_BLDR		0x02
diff --git a/drivers/input/touchscreen/rohm_bu21023.c b/drivers/input/touchscreen/rohm_bu21023.c
index 4493ad0c9322..50cf212e3160 100644
--- a/drivers/input/touchscreen/rohm_bu21023.c
+++ b/drivers/input/touchscreen/rohm_bu21023.c
@@ -9,8 +9,10 @@
 #include <linux/input.h>
 #include <linux/input/mt.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define BU21023_NAME			"bu21023_ts"
 #define BU21023_FIRMWARE_NAME		"bu21023.bin"
diff --git a/drivers/input/touchscreen/s6sy761.c b/drivers/input/touchscreen/s6sy761.c
index 149cc2c4925e..4c1052d6f334 100644
--- a/drivers/input/touchscreen/s6sy761.c
+++ b/drivers/input/touchscreen/s6sy761.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 /* commands */
 #define S6SY761_SENSE_ON		0x10
diff --git a/drivers/input/touchscreen/silead.c b/drivers/input/touchscreen/silead.c
index 62f562ad5026..2da1c3c56fc8 100644
--- a/drivers/input/touchscreen/silead.c
+++ b/drivers/input/touchscreen/silead.c
@@ -23,6 +23,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/irq.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #include <asm/unaligned.h>
 
diff --git a/drivers/input/touchscreen/stmfts.c b/drivers/input/touchscreen/stmfts.c
index 85010fa07908..34d2ccd4ae67 100644
--- a/drivers/input/touchscreen/stmfts.c
+++ b/drivers/input/touchscreen/stmfts.c
@@ -10,10 +10,13 @@
 #include <linux/input/touchscreen.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/regulator/consumer.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /* I2C commands */
 #define STMFTS_READ_INFO			0x80
diff --git a/drivers/input/touchscreen/sun4i-ts.c b/drivers/input/touchscreen/sun4i-ts.c
index 92b2b840b4b7..f6dc7cdee3f5 100644
--- a/drivers/input/touchscreen/sun4i-ts.c
+++ b/drivers/input/touchscreen/sun4i-ts.c
@@ -29,12 +29,14 @@
 
 #include <linux/err.h>
 #include <linux/hwmon.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <linux/init.h>
 #include <linux/input.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
diff --git a/drivers/input/touchscreen/sur40.c b/drivers/input/touchscreen/sur40.c
index ae3aab428337..8939ad907082 100644
--- a/drivers/input/touchscreen/sur40.c
+++ b/drivers/input/touchscreen/sur40.c
@@ -24,6 +24,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/usb.h>
 #include <linux/printk.h>
diff --git a/drivers/input/touchscreen/touchit213.c b/drivers/input/touchscreen/touchit213.c
index fb49687da405..af0d0406af2f 100644
--- a/drivers/input/touchscreen/touchit213.c
+++ b/drivers/input/touchscreen/touchit213.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Sahara TouchIT-213 serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/touchright.c b/drivers/input/touchscreen/touchright.c
index 3cd58a13e44f..8d0d5b47eba0 100644
--- a/drivers/input/touchscreen/touchright.c
+++ b/drivers/input/touchscreen/touchright.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Touchright serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/touchwin.c b/drivers/input/touchscreen/touchwin.c
index bde3c6ee3c60..185f9fcc7a6e 100644
--- a/drivers/input/touchscreen/touchwin.c
+++ b/drivers/input/touchscreen/touchwin.c
@@ -23,6 +23,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Touchwindow serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/tps6507x-ts.c b/drivers/input/touchscreen/tps6507x-ts.c
index f48871767763..f37d44bf4df7 100644
--- a/drivers/input/touchscreen/tps6507x-ts.c
+++ b/drivers/input/touchscreen/tps6507x-ts.c
@@ -14,6 +14,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/slab.h>
 #include <linux/input.h>
diff --git a/drivers/input/touchscreen/ts4800-ts.c b/drivers/input/touchscreen/ts4800-ts.c
index 6cf66aadc10e..85ea20fa2c84 100644
--- a/drivers/input/touchscreen/ts4800-ts.c
+++ b/drivers/input/touchscreen/ts4800-ts.c
@@ -17,6 +17,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* polling interval in ms */
 #define POLL_INTERVAL		3
diff --git a/drivers/input/touchscreen/tsc2007_core.c b/drivers/input/touchscreen/tsc2007_core.c
index b3655250d4a7..906a54c147e6 100644
--- a/drivers/input/touchscreen/tsc2007_core.c
+++ b/drivers/input/touchscreen/tsc2007_core.c
@@ -27,6 +27,7 @@
 #include <linux/property.h>
 #include <linux/platform_data/tsc2007.h>
 #include "tsc2007.h"
+#include <linux/sprintf.h>
 
 int tsc2007_xfer(struct tsc2007 *tsc, u8 cmd)
 {
diff --git a/drivers/input/touchscreen/tsc200x-core.c b/drivers/input/touchscreen/tsc200x-core.c
index a4c0e9db9bb9..1a17adb6114e 100644
--- a/drivers/input/touchscreen/tsc200x-core.c
+++ b/drivers/input/touchscreen/tsc200x-core.c
@@ -22,6 +22,7 @@
 #include <linux/regmap.h>
 #include <linux/gpio/consumer.h>
 #include "tsc200x-core.h"
+#include <linux/sprintf.h>
 
 /*
  * The touchscreen interface operates as follows:
diff --git a/drivers/input/touchscreen/tsc40.c b/drivers/input/touchscreen/tsc40.c
index 139577021413..c4b4a3b9d2e6 100644
--- a/drivers/input/touchscreen/tsc40.c
+++ b/drivers/input/touchscreen/tsc40.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/serio.h>
+#include <linux/sprintf.h>
 
 #define PACKET_LENGTH  5
 struct tsc_ser {
diff --git a/drivers/input/touchscreen/usbtouchscreen.c b/drivers/input/touchscreen/usbtouchscreen.c
index 60354ebc7242..3367efe745ce 100644
--- a/drivers/input/touchscreen/usbtouchscreen.c
+++ b/drivers/input/touchscreen/usbtouchscreen.c
@@ -38,6 +38,7 @@
 #include <linux/slab.h>
 #include <linux/input.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/input.h>
 #include <linux/hid.h>
diff --git a/drivers/input/touchscreen/wacom_w8001.c b/drivers/input/touchscreen/wacom_w8001.c
index 928c5ee3ac36..692e75c6d790 100644
--- a/drivers/input/touchscreen/wacom_w8001.c
+++ b/drivers/input/touchscreen/wacom_w8001.c
@@ -20,6 +20,8 @@
 #include <linux/serio.h>
 #include <linux/ctype.h>
 #include <linux/delay.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_DESC	"Wacom W8001 serial touchscreen driver"
 
diff --git a/drivers/input/touchscreen/wdt87xx_i2c.c b/drivers/input/touchscreen/wdt87xx_i2c.c
index 32c7be54434c..08bcf0249542 100644
--- a/drivers/input/touchscreen/wdt87xx_i2c.c
+++ b/drivers/input/touchscreen/wdt87xx_i2c.c
@@ -21,6 +21,7 @@
 #include <linux/input/mt.h>
 #include <linux/acpi.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #define WDT87XX_NAME		"wdt87xx_i2c"
 #define WDT87XX_FW_NAME		"wdt87xx_fw.bin"
diff --git a/drivers/input/touchscreen/zforce_ts.c b/drivers/input/touchscreen/zforce_ts.c
index 5680075f0bb8..24c5df726ba5 100644
--- a/drivers/input/touchscreen/zforce_ts.c
+++ b/drivers/input/touchscreen/zforce_ts.c
@@ -18,12 +18,14 @@
 #include <linux/delay.h>
 #include <linux/gpio/consumer.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/input/mt.h>
 #include <linux/input/touchscreen.h>
 #include <linux/platform_data/zforce_ts.h>
 #include <linux/regulator/consumer.h>
 #include <linux/of.h>
+#include <linux/completion.h>
 
 #define WAIT_TIMEOUT		msecs_to_jiffies(1000)
 
diff --git a/drivers/interconnect/core.c b/drivers/interconnect/core.c
index 50bac2d79d9b..046f5679da86 100644
--- a/drivers/interconnect/core.c
+++ b/drivers/interconnect/core.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/overflow.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/drivers/iommu/amd/debugfs.c b/drivers/iommu/amd/debugfs.c
index 545372fcc72f..4ceb20129738 100644
--- a/drivers/iommu/amd/debugfs.c
+++ b/drivers/iommu/amd/debugfs.c
@@ -9,6 +9,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "amd_iommu.h"
 
diff --git a/drivers/iommu/amd/init.c b/drivers/iommu/amd/init.c
index 5a4b58607e16..b6368b439e6d 100644
--- a/drivers/iommu/amd/init.c
+++ b/drivers/iommu/amd/init.c
@@ -13,6 +13,7 @@
 #include <linux/list.h>
 #include <linux/bitmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/syscore_ops.h>
 #include <linux/interrupt.h>
 #include <linux/msi.h>
diff --git a/drivers/iommu/amd/iommu.c b/drivers/iommu/amd/iommu.c
index f688443c2764..f6f988f2fc17 100644
--- a/drivers/iommu/amd/iommu.c
+++ b/drivers/iommu/amd/iommu.c
@@ -11,6 +11,7 @@
 #include <linux/ratelimit.h>
 #include <linux/pci.h>
 #include <linux/acpi.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci-ats.h>
 #include <linux/bitmap.h>
 #include <linux/slab.h>
diff --git a/drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c b/drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c
index 8b04ece00420..f6de8e997d9b 100644
--- a/drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c
+++ b/drivers/iommu/arm/arm-smmu/arm-smmu-qcom.c
@@ -6,6 +6,7 @@
 #include <linux/acpi.h>
 #include <linux/adreno-smmu-priv.h>
 #include <linux/delay.h>
+#include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/firmware/qcom/qcom_scm.h>
 
diff --git a/drivers/iommu/dma-iommu.c b/drivers/iommu/dma-iommu.c
index 50ccc4f1ef81..fa2a7fb7fe0e 100644
--- a/drivers/iommu/dma-iommu.c
+++ b/drivers/iommu/dma-iommu.c
@@ -19,6 +19,8 @@
 #include <linux/iommu.h>
 #include <linux/iova.h>
 #include <linux/irq.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/list_sort.h>
 #include <linux/memremap.h>
 #include <linux/mm.h>
diff --git a/drivers/iommu/fsl_pamu.c b/drivers/iommu/fsl_pamu.c
index f37d3b044131..820d4067f77a 100644
--- a/drivers/iommu/fsl_pamu.c
+++ b/drivers/iommu/fsl_pamu.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt)    "fsl-pamu: %s: " fmt, __func__
 
 #include "fsl_pamu.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/fsl/guts.h>
 #include <linux/interrupt.h>
diff --git a/drivers/iommu/intel/debugfs.c b/drivers/iommu/intel/debugfs.c
index 86b506af7daa..31d44bd88673 100644
--- a/drivers/iommu/intel/debugfs.c
+++ b/drivers/iommu/intel/debugfs.c
@@ -10,7 +10,9 @@
 
 #include <linux/debugfs.h>
 #include <linux/dmar.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <asm/irq_remapping.h>
 
diff --git a/drivers/iommu/intel/dmar.c b/drivers/iommu/intel/dmar.c
index 23cb80d62a9a..14f92a8eff98 100644
--- a/drivers/iommu/intel/dmar.c
+++ b/drivers/iommu/intel/dmar.c
@@ -19,6 +19,7 @@
 #include <linux/pci.h>
 #include <linux/dmar.h>
 #include <linux/iova.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/irq.h>
 #include <linux/interrupt.h>
diff --git a/drivers/iommu/intel/iommu.h b/drivers/iommu/intel/iommu.h
index d02f916d8e59..194c5ebe89f8 100644
--- a/drivers/iommu/intel/iommu.h
+++ b/drivers/iommu/intel/iommu.h
@@ -20,6 +20,7 @@
 #include <linux/io-64-nonatomic-lo-hi.h>
 #include <linux/dmar.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 #include <linux/perf_event.h>
 
diff --git a/drivers/iommu/intel/perf.c b/drivers/iommu/intel/perf.c
index 94ee70ac38e3..822340f4b0bb 100644
--- a/drivers/iommu/intel/perf.c
+++ b/drivers/iommu/intel/perf.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "iommu.h"
 #include "perf.h"
diff --git a/drivers/iommu/intel/perfmon.c b/drivers/iommu/intel/perfmon.c
index cf43e798eca4..dc5954e49fd2 100644
--- a/drivers/iommu/intel/perfmon.c
+++ b/drivers/iommu/intel/perfmon.c
@@ -9,6 +9,7 @@
 #include <linux/dmar.h>
 #include "iommu.h"
 #include "perfmon.h"
+#include <linux/sprintf.h>
 
 PMU_FORMAT_ATTR(event,		"config:0-27");		/* ES: Events Select */
 PMU_FORMAT_ATTR(event_group,	"config:28-31");	/* EGI: Event Group Index */
diff --git a/drivers/iommu/intel/svm.c b/drivers/iommu/intel/svm.c
index 40edd282903f..f1fcc5130b2c 100644
--- a/drivers/iommu/intel/svm.c
+++ b/drivers/iommu/intel/svm.c
@@ -15,9 +15,11 @@
 #include <linux/dmar.h>
 #include <linux/interrupt.h>
 #include <linux/mm_types.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 #include <asm/page.h>
 #include <asm/fpu/api.h>
+#include <linux/completion.h>
 
 #include "iommu.h"
 #include "pasid.h"
diff --git a/drivers/iommu/iommu-sysfs.c b/drivers/iommu/iommu-sysfs.c
index cbe378c34ba3..8b97c5858a8d 100644
--- a/drivers/iommu/iommu-sysfs.c
+++ b/drivers/iommu/iommu-sysfs.c
@@ -9,6 +9,7 @@
 #include <linux/device.h>
 #include <linux/iommu.h>
 #include <linux/init.h>
+#include <linux/kobject.h>
 #include <linux/slab.h>
 
 /*
diff --git a/drivers/iommu/iommu.c b/drivers/iommu/iommu.c
index 8309e634977e..33399d49e22b 100644
--- a/drivers/iommu/iommu.c
+++ b/drivers/iommu/iommu.c
@@ -9,8 +9,12 @@
 #include <linux/amba/bus.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/of.h>
 #include <linux/bits.h>
 #include <linux/bug.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/export.h>
diff --git a/drivers/iommu/iommufd/device.c b/drivers/iommu/iommufd/device.c
index 873630c111c1..97350e4bc51b 100644
--- a/drivers/iommu/iommufd/device.c
+++ b/drivers/iommu/iommufd/device.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2021-2022, NVIDIA CORPORATION & AFFILIATES
  */
 #include <linux/iommufd.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/slab.h>
 #include <linux/iommu.h>
 #include <uapi/linux/iommufd.h>
diff --git a/drivers/iommu/iommufd/hw_pagetable.c b/drivers/iommu/iommufd/hw_pagetable.c
index 3f3f1fa1a0a9..fe5d69c990ae 100644
--- a/drivers/iommu/iommufd/hw_pagetable.c
+++ b/drivers/iommu/iommufd/hw_pagetable.c
@@ -3,6 +3,7 @@
  * Copyright (c) 2021-2022, NVIDIA CORPORATION & AFFILIATES
  */
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <uapi/linux/iommufd.h>
 
 #include "../iommu-priv.h"
diff --git a/drivers/iommu/iommufd/io_pagetable.c b/drivers/iommu/iommufd/io_pagetable.c
index 504ac1b01b2d..bc473655a38e 100644
--- a/drivers/iommu/iommufd/io_pagetable.c
+++ b/drivers/iommu/iommufd/io_pagetable.c
@@ -9,8 +9,10 @@
  * between the domains and xarray.
  */
 #include <linux/iommufd.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/lockdep.h>
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sched/mm.h>
 #include <linux/err.h>
 #include <linux/slab.h>
diff --git a/drivers/iommu/iommufd/ioas.c b/drivers/iommu/iommufd/ioas.c
index 742248276548..7d3d438211c0 100644
--- a/drivers/iommu/iommufd/ioas.c
+++ b/drivers/iommu/iommufd/ioas.c
@@ -5,6 +5,7 @@
 #include <linux/interval_tree.h>
 #include <linux/iommufd.h>
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <uapi/linux/iommufd.h>
 
 #include "io_pagetable.h"
diff --git a/drivers/iommu/iommufd/selftest.c b/drivers/iommu/iommufd/selftest.c
index 8abf9747773e..4febf8a27a90 100644
--- a/drivers/iommu/iommufd/selftest.c
+++ b/drivers/iommu/iommufd/selftest.c
@@ -5,6 +5,7 @@
  */
 #include <linux/slab.h>
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/xarray.h>
 #include <linux/file.h>
 #include <linux/anon_inodes.h>
diff --git a/drivers/iommu/iommufd/vfio_compat.c b/drivers/iommu/iommufd/vfio_compat.c
index a3ad5f0b6c59..101bb9acdaba 100644
--- a/drivers/iommu/iommufd/vfio_compat.c
+++ b/drivers/iommu/iommufd/vfio_compat.c
@@ -5,6 +5,7 @@
 #include <linux/interval_tree.h>
 #include <linux/iommu.h>
 #include <linux/iommufd.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/slab.h>
 #include <linux/vfio.h>
 #include <uapi/linux/vfio.h>
diff --git a/drivers/iommu/msm_iommu.c b/drivers/iommu/msm_iommu.c
index 67124f4228b1..0dd21e87905e 100644
--- a/drivers/iommu/msm_iommu.c
+++ b/drivers/iommu/msm_iommu.c
@@ -13,6 +13,7 @@
 #include <linux/io-pgtable.h>
 #include <linux/interrupt.h>
 #include <linux/list.h>
+#include <linux/of.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
 #include <linux/iommu.h>
diff --git a/drivers/iommu/mtk_iommu.c b/drivers/iommu/mtk_iommu.c
index 7abe9e85a570..be067c9c384e 100644
--- a/drivers/iommu/mtk_iommu.c
+++ b/drivers/iommu/mtk_iommu.c
@@ -15,6 +15,7 @@
 #include <linux/iommu.h>
 #include <linux/iopoll.h>
 #include <linux/io-pgtable.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/list.h>
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
diff --git a/drivers/iommu/omap-iommu-debug.c b/drivers/iommu/omap-iommu-debug.c
index 259f65291d90..451676925932 100644
--- a/drivers/iommu/omap-iommu-debug.c
+++ b/drivers/iommu/omap-iommu-debug.c
@@ -10,6 +10,7 @@
 #include <linux/err.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/pm_runtime.h>
 #include <linux/debugfs.h>
diff --git a/drivers/iommu/s390-iommu.c b/drivers/iommu/s390-iommu.c
index 9a5196f523de..992b78fd502f 100644
--- a/drivers/iommu/s390-iommu.c
+++ b/drivers/iommu/s390-iommu.c
@@ -9,6 +9,7 @@
 #include <linux/pci.h>
 #include <linux/iommu.h>
 #include <linux/iommu-helper.h>
+#include <linux/kstrtox.h>
 #include <linux/sizes.h>
 #include <linux/rculist.h>
 #include <linux/rcupdate.h>
diff --git a/drivers/iommu/sprd-iommu.c b/drivers/iommu/sprd-iommu.c
index 537359f10997..936c79b2880a 100644
--- a/drivers/iommu/sprd-iommu.c
+++ b/drivers/iommu/sprd-iommu.c
@@ -13,6 +13,7 @@
 #include <linux/iommu.h>
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
diff --git a/drivers/iommu/sun50i-iommu.c b/drivers/iommu/sun50i-iommu.c
index 41484a5a399b..2c70e735d89e 100644
--- a/drivers/iommu/sun50i-iommu.c
+++ b/drivers/iommu/sun50i-iommu.c
@@ -16,6 +16,7 @@
 #include <linux/ioport.h>
 #include <linux/log2.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/pm.h>
diff --git a/drivers/iommu/virtio-iommu.c b/drivers/iommu/virtio-iommu.c
index 34db37fd9675..6e782f9a29ec 100644
--- a/drivers/iommu/virtio-iommu.c
+++ b/drivers/iommu/virtio-iommu.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/dma-map-ops.h>
 #include <linux/freezer.h>
+#include <linux/idr.h>
 #include <linux/interval_tree.h>
 #include <linux/iommu.h>
 #include <linux/module.h>
diff --git a/drivers/ipack/devices/ipoctal.c b/drivers/ipack/devices/ipoctal.c
index ba2e9e52d72b..b725667d840a 100644
--- a/drivers/ipack/devices/ipoctal.c
+++ b/drivers/ipack/devices/ipoctal.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/serial.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/ipack/ipack.c b/drivers/ipack/ipack.c
index b1471ba016a5..94e109da5d3c 100644
--- a/drivers/ipack/ipack.c
+++ b/drivers/ipack/ipack.c
@@ -11,6 +11,7 @@
 #include <linux/idr.h>
 #include <linux/io.h>
 #include <linux/ipack.h>
+#include <linux/sprintf.h>
 
 #define to_ipack_dev(device) container_of(device, struct ipack_device, dev)
 #define to_ipack_driver(drv) container_of(drv, struct ipack_driver, driver)
diff --git a/drivers/irqchip/irq-alpine-msi.c b/drivers/irqchip/irq-alpine-msi.c
index 9c8b1349ee17..cadd299d7204 100644
--- a/drivers/irqchip/irq-alpine-msi.c
+++ b/drivers/irqchip/irq-alpine-msi.c
@@ -14,6 +14,7 @@
 
 #include <linux/irqchip.h>
 #include <linux/irqchip/arm-gic.h>
+#include <linux/kernel.h> // for upper_32_bits()
 #include <linux/msi.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
diff --git a/drivers/irqchip/irq-gic-v3-its-fsl-mc-msi.c b/drivers/irqchip/irq-gic-v3-its-fsl-mc-msi.c
index 8e87fc35f8aa..01cdfdb04d56 100644
--- a/drivers/irqchip/irq-gic-v3-its-fsl-mc-msi.c
+++ b/drivers/irqchip/irq-gic-v3-its-fsl-mc-msi.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/of_irq.h>
 #include <linux/fsl/mc.h>
+#include <linux/sprintf.h>
 
 static struct irq_chip its_msi_irq_chip = {
 	.name = "ITS-fMSI",
diff --git a/drivers/irqchip/irq-gic-v3-its-pci-msi.c b/drivers/irqchip/irq-gic-v3-its-pci-msi.c
index 93f77a8196da..e62312d34fc2 100644
--- a/drivers/irqchip/irq-gic-v3-its-pci-msi.c
+++ b/drivers/irqchip/irq-gic-v3-its-pci-msi.c
@@ -10,6 +10,7 @@
 #include <linux/of.h>
 #include <linux/of_irq.h>
 #include <linux/of_pci.h>
+#include <linux/sprintf.h>
 
 static void its_mask_msi_irq(struct irq_data *d)
 {
diff --git a/drivers/irqchip/irq-gic-v3-its-platform-msi.c b/drivers/irqchip/irq-gic-v3-its-platform-msi.c
index daa6d5053bc3..37d2d1a4f9ec 100644
--- a/drivers/irqchip/irq-gic-v3-its-platform-msi.c
+++ b/drivers/irqchip/irq-gic-v3-its-platform-msi.c
@@ -9,6 +9,7 @@
 #include <linux/msi.h>
 #include <linux/of.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 
 static struct irq_chip its_pmsi_irq_chip = {
 	.name			= "ITS-pMSI",
diff --git a/drivers/irqchip/irq-gic-v3-its.c b/drivers/irqchip/irq-gic-v3-its.c
index d097001c1e3e..1be09abac7cc 100644
--- a/drivers/irqchip/irq-gic-v3-its.c
+++ b/drivers/irqchip/irq-gic-v3-its.c
@@ -16,6 +16,7 @@
 #include <linux/iommu.h>
 #include <linux/iopoll.h>
 #include <linux/irqdomain.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/list.h>
 #include <linux/log2.h>
 #include <linux/memblock.h>
diff --git a/drivers/irqchip/irq-gic-v4.c b/drivers/irqchip/irq-gic-v4.c
index ca32ac19d284..a0ae329eae88 100644
--- a/drivers/irqchip/irq-gic-v4.c
+++ b/drivers/irqchip/irq-gic-v4.c
@@ -10,6 +10,7 @@
 #include <linux/msi.h>
 #include <linux/pid.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #include <linux/irqchip/arm-gic-v4.h>
 
diff --git a/drivers/irqchip/irq-loongson-pch-msi.c b/drivers/irqchip/irq-loongson-pch-msi.c
index 6e1e1f011bb2..80588833efc3 100644
--- a/drivers/irqchip/irq-loongson-pch-msi.c
+++ b/drivers/irqchip/irq-loongson-pch-msi.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt) "pch-msi: " fmt
 
 #include <linux/irqchip.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/msi.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
diff --git a/drivers/irqchip/irq-mvebu-gicp.c b/drivers/irqchip/irq-mvebu-gicp.c
index c43a345061d5..e55b25b01c6d 100644
--- a/drivers/irqchip/irq-mvebu-gicp.c
+++ b/drivers/irqchip/irq-mvebu-gicp.c
@@ -11,6 +11,7 @@
 #include <linux/io.h>
 #include <linux/irq.h>
 #include <linux/irqdomain.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/msi.h>
 #include <linux/of.h>
 #include <linux/of_irq.h>
diff --git a/drivers/isdn/capi/capiutil.c b/drivers/isdn/capi/capiutil.c
index d7ae42edc4a8..0218209ceba0 100644
--- a/drivers/isdn/capi/capiutil.c
+++ b/drivers/isdn/capi/capiutil.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/stddef.h>
diff --git a/drivers/isdn/capi/kcapi.c b/drivers/isdn/capi/kcapi.c
index 136ba9fe55e0..0990caeb1045 100644
--- a/drivers/isdn/capi/kcapi.c
+++ b/drivers/isdn/capi/kcapi.c
@@ -19,6 +19,7 @@
 #include <linux/sched/signal.h>
 #include <linux/seq_file.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/capi.h>
 #include <linux/kernelcapi.h>
diff --git a/drivers/isdn/hardware/mISDN/avmfritz.c b/drivers/isdn/hardware/mISDN/avmfritz.c
index f68569bfef7a..3df5e56a1423 100644
--- a/drivers/isdn/hardware/mISDN/avmfritz.c
+++ b/drivers/isdn/hardware/mISDN/avmfritz.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <asm/unaligned.h>
 #include "ipac.h"
+#include <linux/sprintf.h>
 
 
 #define AVMFRITZ_REV	"2.3"
diff --git a/drivers/isdn/hardware/mISDN/hfcmulti.c b/drivers/isdn/hardware/mISDN/hfcmulti.c
index 2e5cb9dde3ec..7ab64c7d6c20 100644
--- a/drivers/isdn/hardware/mISDN/hfcmulti.c
+++ b/drivers/isdn/hardware/mISDN/hfcmulti.c
@@ -157,6 +157,7 @@
 #include <linux/delay.h>
 #include <linux/mISDNhw.h>
 #include <linux/mISDNdsp.h>
+#include <linux/sprintf.h>
 
 /*
   #define IRQCOUNT_DEBUG
diff --git a/drivers/isdn/hardware/mISDN/hfcpci.c b/drivers/isdn/hardware/mISDN/hfcpci.c
index fe391de1aba3..2094f12ee7ca 100644
--- a/drivers/isdn/hardware/mISDN/hfcpci.c
+++ b/drivers/isdn/hardware/mISDN/hfcpci.c
@@ -36,6 +36,7 @@
 #include <linux/delay.h>
 #include <linux/mISDNhw.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "hfc_pci.h"
 
diff --git a/drivers/isdn/hardware/mISDN/hfcsusb.c b/drivers/isdn/hardware/mISDN/hfcsusb.c
index b82b89888a5e..7aafda7340a9 100644
--- a/drivers/isdn/hardware/mISDN/hfcsusb.c
+++ b/drivers/isdn/hardware/mISDN/hfcsusb.c
@@ -18,6 +18,7 @@
 
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/mISDNhw.h>
 #include <linux/slab.h>
diff --git a/drivers/isdn/hardware/mISDN/mISDNinfineon.c b/drivers/isdn/hardware/mISDN/mISDNinfineon.c
index 88d592bafdb0..bf001d030626 100644
--- a/drivers/isdn/hardware/mISDN/mISDNinfineon.c
+++ b/drivers/isdn/hardware/mISDN/mISDNinfineon.c
@@ -30,6 +30,7 @@
 #include <linux/mISDNhw.h>
 #include <linux/slab.h>
 #include "ipac.h"
+#include <linux/sprintf.h>
 
 #define INFINEON_REV	"1.0"
 
diff --git a/drivers/isdn/hardware/mISDN/mISDNipac.c b/drivers/isdn/hardware/mISDN/mISDNipac.c
index 4f8d85bb3ce1..a59ee9e5e15c 100644
--- a/drivers/isdn/hardware/mISDN/mISDNipac.c
+++ b/drivers/isdn/hardware/mISDN/mISDNipac.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/mISDNhw.h>
 #include "ipac.h"
+#include <linux/sprintf.h>
 
 
 #define DBUSY_TIMER_VALUE	80
diff --git a/drivers/isdn/hardware/mISDN/mISDNisar.c b/drivers/isdn/hardware/mISDN/mISDNisar.c
index 48b3d43e2502..24aaf0120bed 100644
--- a/drivers/isdn/hardware/mISDN/mISDNisar.c
+++ b/drivers/isdn/hardware/mISDN/mISDNisar.c
@@ -14,6 +14,7 @@
 
 #include <linux/gfp.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/mISDNhw.h>
 #include <linux/module.h>
diff --git a/drivers/isdn/hardware/mISDN/netjet.c b/drivers/isdn/hardware/mISDN/netjet.c
index 566c790a9481..918a0c3444a3 100644
--- a/drivers/isdn/hardware/mISDN/netjet.c
+++ b/drivers/isdn/hardware/mISDN/netjet.c
@@ -17,6 +17,7 @@
 #include "iohelper.h"
 #include "netjet.h"
 #include "isdnhdlc.h"
+#include <linux/sprintf.h>
 
 #define NETJET_REV	"2.0"
 
diff --git a/drivers/isdn/hardware/mISDN/speedfax.c b/drivers/isdn/hardware/mISDN/speedfax.c
index b530c78eca8e..fc5b7fedba0e 100644
--- a/drivers/isdn/hardware/mISDN/speedfax.c
+++ b/drivers/isdn/hardware/mISDN/speedfax.c
@@ -18,6 +18,7 @@
 #include <linux/firmware.h>
 #include "ipac.h"
 #include "isar.h"
+#include <linux/sprintf.h>
 
 #define SPEEDFAX_REV	"2.0"
 
diff --git a/drivers/isdn/hardware/mISDN/w6692.c b/drivers/isdn/hardware/mISDN/w6692.c
index f3b8db7b48fe..4c6572379a02 100644
--- a/drivers/isdn/hardware/mISDN/w6692.c
+++ b/drivers/isdn/hardware/mISDN/w6692.c
@@ -15,6 +15,7 @@
 #include <linux/mISDNhw.h>
 #include <linux/slab.h>
 #include "w6692.h"
+#include <linux/sprintf.h>
 
 #define W6692_REV	"2.0"
 
diff --git a/drivers/isdn/mISDN/core.c b/drivers/isdn/mISDN/core.c
index c829c4eac0e2..c5f5a9f53c17 100644
--- a/drivers/isdn/mISDN/core.c
+++ b/drivers/isdn/mISDN/core.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/stddef.h>
 #include <linux/module.h>
diff --git a/drivers/isdn/mISDN/dsp_cmx.c b/drivers/isdn/mISDN/dsp_cmx.c
index 61cb45c5d0d8..17d98bc06e7f 100644
--- a/drivers/isdn/mISDN/dsp_cmx.c
+++ b/drivers/isdn/mISDN/dsp_cmx.c
@@ -130,6 +130,7 @@
 #include <linux/mISDNdsp.h>
 #include "core.h"
 #include "dsp.h"
+#include <linux/sprintf.h>
 /*
  * debugging of multi party conference,
  * by using conference even with two members
diff --git a/drivers/isdn/mISDN/dsp_core.c b/drivers/isdn/mISDN/dsp_core.c
index fae95f166688..a1a6cc2cc8cb 100644
--- a/drivers/isdn/mISDN/dsp_core.c
+++ b/drivers/isdn/mISDN/dsp_core.c
@@ -156,6 +156,7 @@
 #include <linux/mISDNif.h>
 #include <linux/mISDNdsp.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "core.h"
 #include "dsp.h"
diff --git a/drivers/isdn/mISDN/dsp_hwec.c b/drivers/isdn/mISDN/dsp_hwec.c
index 0b3f29195330..e985f71987a0 100644
--- a/drivers/isdn/mISDN/dsp_hwec.c
+++ b/drivers/isdn/mISDN/dsp_hwec.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mISDNdsp.h>
 #include <linux/mISDNif.h>
diff --git a/drivers/isdn/mISDN/dsp_pipeline.c b/drivers/isdn/mISDN/dsp_pipeline.c
index 09b72f14d4b7..957e94eab9f2 100644
--- a/drivers/isdn/mISDN/dsp_pipeline.c
+++ b/drivers/isdn/mISDN/dsp_pipeline.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mISDNif.h>
 #include <linux/mISDNdsp.h>
diff --git a/drivers/isdn/mISDN/l1oip_core.c b/drivers/isdn/mISDN/l1oip_core.c
index f010b35a0531..d630fbae9212 100644
--- a/drivers/isdn/mISDN/l1oip_core.c
+++ b/drivers/isdn/mISDN/l1oip_core.c
@@ -217,10 +217,12 @@
 #include <linux/init.h>
 #include <linux/in.h>
 #include <linux/inet.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/kthread.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
+#include <linux/completion.h>
 
 #include <net/sock.h>
 #include "core.h"
diff --git a/drivers/isdn/mISDN/stack.c b/drivers/isdn/mISDN/stack.c
index c2f76f398613..8d3dd4830c0b 100644
--- a/drivers/isdn/mISDN/stack.c
+++ b/drivers/isdn/mISDN/stack.c
@@ -12,6 +12,7 @@
 #include <linux/sched.h>
 #include <linux/sched/cputime.h>
 #include <linux/signal.h>
+#include <linux/completion.h>
 
 #include "core.h"
 
diff --git a/drivers/leds/flash/leds-max77693.c b/drivers/leds/flash/leds-max77693.c
index 9f016b851193..cd0a6b29fb0a 100644
--- a/drivers/leds/flash/leds-max77693.c
+++ b/drivers/leds/flash/leds-max77693.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-flash-led-class.h>
 
 #define MODE_OFF		0
diff --git a/drivers/leds/led-class-flash.c b/drivers/leds/led-class-flash.c
index 6fe9d700dfef..54898083e865 100644
--- a/drivers/leds/led-class-flash.c
+++ b/drivers/leds/led-class-flash.c
@@ -8,11 +8,13 @@
 
 #include <linux/device.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/led-class-flash.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include "leds.h"
+#include <linux/sprintf.h>
 
 #define has_flash_op(fled_cdev, op)				\
 	(fled_cdev && fled_cdev->ops->op)
diff --git a/drivers/leds/led-class-multicolor.c b/drivers/leds/led-class-multicolor.c
index ec62a4811613..10e63f148306 100644
--- a/drivers/leds/led-class-multicolor.c
+++ b/drivers/leds/led-class-multicolor.c
@@ -9,6 +9,7 @@
 #include <linux/math.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "leds.h"
diff --git a/drivers/leds/led-class.c b/drivers/leds/led-class.c
index 24fcff682b24..3554c9b2f127 100644
--- a/drivers/leds/led-class.c
+++ b/drivers/leds/led-class.c
@@ -11,12 +11,14 @@
 #include <linux/err.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/property.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <uapi/linux/uleds.h>
 #include <linux/of.h>
diff --git a/drivers/leds/led-core.c b/drivers/leds/led-core.c
index 89c9806cc97f..c5f87a75c428 100644
--- a/drivers/leds/led-core.c
+++ b/drivers/leds/led-core.c
@@ -16,6 +16,7 @@
 #include <linux/property.h>
 #include <linux/rwsem.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/uleds.h>
 #include "leds.h"
 
diff --git a/drivers/leds/led-triggers.c b/drivers/leds/led-triggers.c
index 0f5ac30053ad..f1d787f8e214 100644
--- a/drivers/leds/led-triggers.c
+++ b/drivers/leds/led-triggers.c
@@ -12,6 +12,7 @@
 #include <linux/list.h>
 #include <linux/spinlock.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/rwsem.h>
 #include <linux/leds.h>
diff --git a/drivers/leds/leds-88pm860x.c b/drivers/leds/leds-88pm860x.c
index 033ab5fed38a..74ce48afa7c0 100644
--- a/drivers/leds/leds-88pm860x.c
+++ b/drivers/leds/leds-88pm860x.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/mfd/88pm860x.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define LED_PWM_MASK		(0x1F)
 #define LED_CURRENT_MASK	(0x07 << 5)
diff --git a/drivers/leds/leds-aw200xx.c b/drivers/leds/leds-aw200xx.c
index 6c8c9f2c19e3..c6b81d89e91c 100644
--- a/drivers/leds/leds-aw200xx.c
+++ b/drivers/leds/leds-aw200xx.c
@@ -12,6 +12,7 @@
 #include <linux/container_of.h>
 #include <linux/gpio/consumer.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
diff --git a/drivers/leds/leds-bd2802.c b/drivers/leds/leds-bd2802.c
index 0792ea126cea..46f9d80067bc 100644
--- a/drivers/leds/leds-bd2802.c
+++ b/drivers/leds/leds-bd2802.c
@@ -12,10 +12,12 @@
 #include <linux/i2c.h>
 #include <linux/gpio/consumer.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/leds-bd2802.h>
 #include <linux/slab.h>
 #include <linux/pm.h>
+#include <linux/sprintf.h>
 
 #define LED_CTL(rgb2en, rgb1en) ((rgb2en) << 4 | ((rgb1en) << 0))
 
diff --git a/drivers/leds/leds-blinkm.c b/drivers/leds/leds-blinkm.c
index 2782da1a1930..da4a8c1e87db 100644
--- a/drivers/leds/leds-blinkm.c
+++ b/drivers/leds/leds-blinkm.c
@@ -9,7 +9,9 @@
 #include <linux/jiffies.h>
 #include <linux/i2c.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/printk.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/leds/leds-dac124s085.c b/drivers/leds/leds-dac124s085.c
index cf5fb1195f87..05d20590172e 100644
--- a/drivers/leds/leds-dac124s085.c
+++ b/drivers/leds/leds-dac124s085.c
@@ -11,6 +11,7 @@
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 struct dac124s085_led {
 	struct led_classdev	ldev;
diff --git a/drivers/leds/leds-lm3530.c b/drivers/leds/leds-lm3530.c
index a2feef8e4ac5..9052322039b0 100644
--- a/drivers/leds/leds-lm3530.c
+++ b/drivers/leds/leds-lm3530.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/input.h>
 #include <linux/led-lm3530.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/regulator/consumer.h>
 #include <linux/module.h>
diff --git a/drivers/leds/leds-lm3533.c b/drivers/leds/leds-lm3533.c
index a3d33165d262..8d7b9c6e98c8 100644
--- a/drivers/leds/leds-lm3533.c
+++ b/drivers/leds/leds-lm3533.c
@@ -13,6 +13,7 @@
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/kstrtox.h>
 
 #include <linux/mfd/lm3533.h>
 
diff --git a/drivers/leds/leds-lm355x.c b/drivers/leds/leds-lm355x.c
index f68771b9eac6..4c47ef75ea55 100644
--- a/drivers/leds/leds-lm355x.c
+++ b/drivers/leds/leds-lm355x.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/slab.h>
 #include <linux/platform_device.h>
diff --git a/drivers/leds/leds-lm3642.c b/drivers/leds/leds-lm3642.c
index 6eee52e211be..066fabdeb557 100644
--- a/drivers/leds/leds-lm3642.c
+++ b/drivers/leds/leds-lm3642.c
@@ -6,6 +6,7 @@
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/slab.h>
 #include <linux/platform_device.h>
diff --git a/drivers/leds/leds-lp5521.c b/drivers/leds/leds-lp5521.c
index f9c8b568b652..f6785192b2ae 100644
--- a/drivers/leds/leds-lp5521.c
+++ b/drivers/leds/leds-lp5521.c
@@ -18,6 +18,7 @@
 #include <linux/platform_data/leds-lp55xx.h>
 #include <linux/slab.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include "leds-lp55xx-common.h"
 
diff --git a/drivers/leds/leds-lp5523.c b/drivers/leds/leds-lp5523.c
index 38de853f9939..2c80c6196349 100644
--- a/drivers/leds/leds-lp5523.c
+++ b/drivers/leds/leds-lp5523.c
@@ -12,12 +12,14 @@
 #include <linux/delay.h>
 #include <linux/firmware.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/platform_data/leds-lp55xx.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "leds-lp55xx-common.h"
 
diff --git a/drivers/leds/leds-lp5562.c b/drivers/leds/leds-lp5562.c
index 39db9aeb67c5..28140474598e 100644
--- a/drivers/leds/leds-lp5562.c
+++ b/drivers/leds/leds-lp5562.c
@@ -10,12 +10,14 @@
 #include <linux/delay.h>
 #include <linux/firmware.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/platform_data/leds-lp55xx.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "leds-lp55xx-common.h"
 
diff --git a/drivers/leds/leds-lp55xx-common.c b/drivers/leds/leds-lp55xx-common.c
index 8e7074f0fee0..c9cf373e9a2c 100644
--- a/drivers/leds/leds-lp55xx-common.c
+++ b/drivers/leds/leds-lp55xx-common.c
@@ -13,12 +13,14 @@
 #include <linux/delay.h>
 #include <linux/firmware.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/platform_data/leds-lp55xx.h>
 #include <linux/slab.h>
 #include <linux/gpio/consumer.h>
 #include <dt-bindings/leds/leds-lp55xx.h>
+#include <linux/sprintf.h>
 
 #include "leds-lp55xx-common.h"
 
diff --git a/drivers/leds/leds-lp8501.c b/drivers/leds/leds-lp8501.c
index ac50aa88939a..0d7d33224ed5 100644
--- a/drivers/leds/leds-lp8501.c
+++ b/drivers/leds/leds-lp8501.c
@@ -17,6 +17,7 @@
 #include <linux/of.h>
 #include <linux/platform_data/leds-lp55xx.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "leds-lp55xx-common.h"
 
diff --git a/drivers/leds/leds-max8997.c b/drivers/leds/leds-max8997.c
index c8d7f55c9dec..ac92ff0af344 100644
--- a/drivers/leds/leds-max8997.c
+++ b/drivers/leds/leds-max8997.c
@@ -13,6 +13,7 @@
 #include <linux/mfd/max8997.h>
 #include <linux/mfd/max8997-private.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define MAX8997_LED_FLASH_SHIFT			3
 #define MAX8997_LED_FLASH_CUR_MASK		0xf8
diff --git a/drivers/leds/leds-mlxreg.c b/drivers/leds/leds-mlxreg.c
index d8e3d5d8d2d0..6023eca71c63 100644
--- a/drivers/leds/leds-mlxreg.c
+++ b/drivers/leds/leds-mlxreg.c
@@ -11,6 +11,7 @@
 #include <linux/platform_data/mlxreg.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* Codes for LEDs. */
 #define MLXREG_LED_OFFSET_BLINK_3HZ	0x01 /* Offset from solid: 3Hz blink */
diff --git a/drivers/leds/leds-netxbig.c b/drivers/leds/leds-netxbig.c
index 77213b79f84d..659e036f38a9 100644
--- a/drivers/leds/leds-netxbig.c
+++ b/drivers/leds/leds-netxbig.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/platform_device.h>
@@ -16,6 +17,7 @@
 #include <linux/leds.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 
 struct netxbig_gpio_ext {
 	struct gpio_desc **addr;
diff --git a/drivers/leds/leds-ns2.c b/drivers/leds/leds-ns2.c
index f3010c472bbd..89640f8dcfa1 100644
--- a/drivers/leds/leds-ns2.c
+++ b/drivers/leds/leds-ns2.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/gpio/consumer.h>
@@ -17,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include "leds.h"
+#include <linux/sprintf.h>
 
 enum ns2_led_modes {
 	NS_V2_LED_OFF,
diff --git a/drivers/leds/leds-pca955x.c b/drivers/leds/leds-pca955x.c
index 94a9f8a54b35..8ba4e85c210d 100644
--- a/drivers/leds/leds-pca955x.c
+++ b/drivers/leds/leds-pca955x.c
@@ -48,6 +48,7 @@
 #include <linux/of.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <dt-bindings/leds/leds-pca955x.h>
diff --git a/drivers/leds/leds-pca963x.c b/drivers/leds/leds-pca963x.c
index b53905da3592..206fe987841a 100644
--- a/drivers/leds/leds-pca963x.c
+++ b/drivers/leds/leds-pca963x.c
@@ -24,6 +24,7 @@
 
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/leds.h>
diff --git a/drivers/leds/leds-ss4200.c b/drivers/leds/leds-ss4200.c
index fcaa34706b6c..8fd6ec2a533a 100644
--- a/drivers/leds/leds-ss4200.c
+++ b/drivers/leds/leds-ss4200.c
@@ -13,9 +13,11 @@
 #include <linux/init.h>
 #include <linux/ioport.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/leds/leds-turris-omnia.c b/drivers/leds/leds-turris-omnia.c
index b443f8c989fa..e29f7f0a0e99 100644
--- a/drivers/leds/leds-turris-omnia.c
+++ b/drivers/leds/leds-turris-omnia.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/led-class-multicolor.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/leds/leds-wm831x-status.c b/drivers/leds/leds-wm831x-status.c
index 70b32d80f960..ac07b279e033 100644
--- a/drivers/leds/leds-wm831x-status.c
+++ b/drivers/leds/leds-wm831x-status.c
@@ -14,6 +14,7 @@
 #include <linux/mfd/wm831x/pdata.h>
 #include <linux/mfd/wm831x/status.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 
 struct wm831x_status {
diff --git a/drivers/leds/trigger/ledtrig-activity.c b/drivers/leds/trigger/ledtrig-activity.c
index 33cbf8413658..dd85bece88e8 100644
--- a/drivers/leds/trigger/ledtrig-activity.c
+++ b/drivers/leds/trigger/ledtrig-activity.c
@@ -9,12 +9,14 @@
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/panic_notifier.h>
 #include <linux/reboot.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include "../leds.h"
 
diff --git a/drivers/leds/trigger/ledtrig-backlight.c b/drivers/leds/trigger/ledtrig-backlight.c
index 487577d22cfc..d0a107d138d4 100644
--- a/drivers/leds/trigger/ledtrig-backlight.c
+++ b/drivers/leds/trigger/ledtrig-backlight.c
@@ -8,11 +8,13 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/fb.h>
 #include <linux/leds.h>
 #include "../leds.h"
+#include <linux/sprintf.h>
 
 #define BLANK		1
 #define UNBLANK		0
diff --git a/drivers/leds/trigger/ledtrig-cpu.c b/drivers/leds/trigger/ledtrig-cpu.c
index 05848a2fecff..0175c94ed21c 100644
--- a/drivers/leds/trigger/ledtrig-cpu.c
+++ b/drivers/leds/trigger/ledtrig-cpu.c
@@ -23,6 +23,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/percpu.h>
+#include <linux/sprintf.h>
 #include <linux/syscore_ops.h>
 #include <linux/rwsem.h>
 #include <linux/cpu.h>
diff --git a/drivers/leds/trigger/ledtrig-gpio.c b/drivers/leds/trigger/ledtrig-gpio.c
index 7f6a2352b0ac..c88c9d7125a5 100644
--- a/drivers/leds/trigger/ledtrig-gpio.c
+++ b/drivers/leds/trigger/ledtrig-gpio.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/gpio/consumer.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/slab.h>
 #include "../leds.h"
diff --git a/drivers/leds/trigger/ledtrig-heartbeat.c b/drivers/leds/trigger/ledtrig-heartbeat.c
index 393b3ae832f4..58300f67edc2 100644
--- a/drivers/leds/trigger/ledtrig-heartbeat.c
+++ b/drivers/leds/trigger/ledtrig-heartbeat.c
@@ -11,8 +11,10 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/panic_notifier.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/sched.h>
 #include <linux/sched/loadavg.h>
diff --git a/drivers/leds/trigger/ledtrig-netdev.c b/drivers/leds/trigger/ledtrig-netdev.c
index ea00f6c70882..9516c053f380 100644
--- a/drivers/leds/trigger/ledtrig-netdev.c
+++ b/drivers/leds/trigger/ledtrig-netdev.c
@@ -17,6 +17,7 @@
 #include <linux/init.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/linkmode.h>
 #include <linux/list.h>
@@ -25,6 +26,7 @@
 #include <linux/mutex.h>
 #include <linux/phy.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include "../leds.h"
 
diff --git a/drivers/leds/trigger/ledtrig-oneshot.c b/drivers/leds/trigger/ledtrig-oneshot.c
index bee3bd452abf..658568746976 100644
--- a/drivers/leds/trigger/ledtrig-oneshot.c
+++ b/drivers/leds/trigger/ledtrig-oneshot.c
@@ -12,9 +12,11 @@
 #include <linux/init.h>
 #include <linux/device.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/leds.h>
 #include "../leds.h"
+#include <linux/sprintf.h>
 
 #define DEFAULT_DELAY 100
 
diff --git a/drivers/leds/trigger/ledtrig-pattern.c b/drivers/leds/trigger/ledtrig-pattern.c
index fadd87dbe993..b42e3b391c95 100644
--- a/drivers/leds/trigger/ledtrig-pattern.c
+++ b/drivers/leds/trigger/ledtrig-pattern.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 
 #define MAX_PATTERNS		1024
diff --git a/drivers/leds/trigger/ledtrig-timer.c b/drivers/leds/trigger/ledtrig-timer.c
index b4688d1d9d2b..3d0111ae36f4 100644
--- a/drivers/leds/trigger/ledtrig-timer.c
+++ b/drivers/leds/trigger/ledtrig-timer.c
@@ -12,8 +12,10 @@
 #include <linux/init.h>
 #include <linux/device.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/leds.h>
+#include <linux/sprintf.h>
 
 static ssize_t led_delay_on_show(struct device *dev,
 		struct device_attribute *attr, char *buf)
diff --git a/drivers/leds/trigger/ledtrig-transient.c b/drivers/leds/trigger/ledtrig-transient.c
index f111fa7635e5..dbec3da1a54d 100644
--- a/drivers/leds/trigger/ledtrig-transient.c
+++ b/drivers/leds/trigger/ledtrig-transient.c
@@ -15,7 +15,9 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/leds.h>
 #include "../leds.h"
diff --git a/drivers/leds/trigger/ledtrig-tty.c b/drivers/leds/trigger/ledtrig-tty.c
index 8cf1485e8165..b9b361ce75c4 100644
--- a/drivers/leds/trigger/ledtrig-tty.c
+++ b/drivers/leds/trigger/ledtrig-tty.c
@@ -2,9 +2,11 @@
 
 #include <linux/completion.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <uapi/linux/serial.h>
 
diff --git a/drivers/macintosh/adb.c b/drivers/macintosh/adb.c
index 057b0221f695..3b6f11ec689e 100644
--- a/drivers/macintosh/adb.c
+++ b/drivers/macintosh/adb.c
@@ -26,6 +26,7 @@
 #include <linux/mm.h>
 #include <linux/sched/signal.h>
 #include <linux/adb.h>
+#include <linux/completion.h>
 #include <linux/cuda.h>
 #include <linux/pmu.h>
 #include <linux/notifier.h>
diff --git a/drivers/macintosh/adbhid.c b/drivers/macintosh/adbhid.c
index b2fe7a3dc471..3499ca352c22 100644
--- a/drivers/macintosh/adbhid.c
+++ b/drivers/macintosh/adbhid.c
@@ -40,6 +40,7 @@
 #include <linux/init.h>
 #include <linux/notifier.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 
 #include <linux/adb.h>
 #include <linux/cuda.h>
diff --git a/drivers/macintosh/ams/ams-input.c b/drivers/macintosh/ams/ams-input.c
index 0da493d449b2..6c250d576a00 100644
--- a/drivers/macintosh/ams/ams-input.c
+++ b/drivers/macintosh/ams/ams-input.c
@@ -7,6 +7,8 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include <linux/types.h>
 #include <linux/errno.h>
diff --git a/drivers/macintosh/ams/ams-pmu.c b/drivers/macintosh/ams/ams-pmu.c
index 1c3ce39e9a59..1ae692457a8d 100644
--- a/drivers/macintosh/ams/ams-pmu.c
+++ b/drivers/macintosh/ams/ams-pmu.c
@@ -10,6 +10,7 @@
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/adb.h>
+#include <linux/completion.h>
 #include <linux/pmu.h>
 
 #include "ams.h"
diff --git a/drivers/macintosh/macio_asic.c b/drivers/macintosh/macio_asic.c
index a5ee8f736a8e..d664e3dc98fe 100644
--- a/drivers/macintosh/macio_asic.c
+++ b/drivers/macintosh/macio_asic.c
@@ -25,6 +25,7 @@
 #include <linux/of_device.h>
 #include <linux/of_platform.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 
 #include <asm/machdep.h>
 #include <asm/macio.h>
diff --git a/drivers/macintosh/macio_sysfs.c b/drivers/macintosh/macio_sysfs.c
index 2bbe359b26d9..1e9306b2d42d 100644
--- a/drivers/macintosh/macio_sysfs.c
+++ b/drivers/macintosh/macio_sysfs.c
@@ -2,6 +2,7 @@
 #include <linux/kernel.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <asm/macio.h>
 
diff --git a/drivers/macintosh/smu.c b/drivers/macintosh/smu.c
index b2b78a53e532..97f495f3089e 100644
--- a/drivers/macintosh/smu.c
+++ b/drivers/macintosh/smu.c
@@ -23,6 +23,7 @@
 #include <linux/device.h>
 #include <linux/dmapool.h>
 #include <linux/memblock.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/highmem.h>
 #include <linux/jiffies.h>
diff --git a/drivers/macintosh/therm_adt746x.c b/drivers/macintosh/therm_adt746x.c
index 00693741f744..b5e9766d5c56 100644
--- a/drivers/macintosh/therm_adt746x.c
+++ b/drivers/macintosh/therm_adt746x.c
@@ -15,11 +15,13 @@
 #include <linux/errno.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/i2c.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/suspend.h>
 #include <linux/kthread.h>
diff --git a/drivers/macintosh/therm_windtunnel.c b/drivers/macintosh/therm_windtunnel.c
index 3c1b29476ce2..b646ab5f3899 100644
--- a/drivers/macintosh/therm_windtunnel.c
+++ b/drivers/macintosh/therm_windtunnel.c
@@ -39,6 +39,7 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <asm/machdep.h>
 #include <asm/io.h>
diff --git a/drivers/macintosh/via-pmu-backlight.c b/drivers/macintosh/via-pmu-backlight.c
index c2d87e7fa85b..6001b9323129 100644
--- a/drivers/macintosh/via-pmu-backlight.c
+++ b/drivers/macintosh/via-pmu-backlight.c
@@ -12,6 +12,7 @@
 #include <linux/adb.h>
 #include <linux/pmu.h>
 #include <asm/backlight.h>
+#include <linux/sprintf.h>
 
 #define MAX_PMU_LEVEL 0xFF
 
diff --git a/drivers/macintosh/via-pmu.c b/drivers/macintosh/via-pmu.c
index 9d5703b60937..5e10c2a9783d 100644
--- a/drivers/macintosh/via-pmu.c
+++ b/drivers/macintosh/via-pmu.c
@@ -20,6 +20,7 @@
  */
 #include <linux/stdarg.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
diff --git a/drivers/macintosh/windfarm_ad7417_sensor.c b/drivers/macintosh/windfarm_ad7417_sensor.c
index 49ce37fde930..9113714ce010 100644
--- a/drivers/macintosh/windfarm_ad7417_sensor.c
+++ b/drivers/macintosh/windfarm_ad7417_sensor.c
@@ -11,6 +11,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/i2c.h>
 
diff --git a/drivers/macintosh/windfarm_core.c b/drivers/macintosh/windfarm_core.c
index 5307b1e34261..b3b40222ff31 100644
--- a/drivers/macintosh/windfarm_core.c
+++ b/drivers/macintosh/windfarm_core.c
@@ -24,6 +24,7 @@
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/spinlock.h>
@@ -34,6 +35,7 @@
 #include <linux/platform_device.h>
 #include <linux/mutex.h>
 #include <linux/freezer.h>
+#include <linux/sprintf.h>
 
 #include "windfarm.h"
 
diff --git a/drivers/macintosh/windfarm_mpu.h b/drivers/macintosh/windfarm_mpu.h
index b5ce347d12d4..2f70df857241 100644
--- a/drivers/macintosh/windfarm_mpu.h
+++ b/drivers/macintosh/windfarm_mpu.h
@@ -9,6 +9,7 @@
 #define __WINDFARM_MPU_H
 
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 typedef unsigned short fu16;
 typedef int fs32;
diff --git a/drivers/macintosh/windfarm_smu_sat.c b/drivers/macintosh/windfarm_smu_sat.c
index 50baa062c9df..ee89afd59f29 100644
--- a/drivers/macintosh/windfarm_smu_sat.c
+++ b/drivers/macintosh/windfarm_smu_sat.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/i2c.h>
 #include <linux/mutex.h>
diff --git a/drivers/mailbox/bcm-pdc-mailbox.c b/drivers/mailbox/bcm-pdc-mailbox.c
index 1768d3d5aaa0..81e898735c27 100644
--- a/drivers/mailbox/bcm-pdc-mailbox.c
+++ b/drivers/mailbox/bcm-pdc-mailbox.c
@@ -26,11 +26,13 @@
  */
 
 #include <linux/errno.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/debugfs.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
diff --git a/drivers/mailbox/imx-mailbox.c b/drivers/mailbox/imx-mailbox.c
index 656171362fe9..04446f992aa7 100644
--- a/drivers/mailbox/imx-mailbox.c
+++ b/drivers/mailbox/imx-mailbox.c
@@ -17,6 +17,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/slab.h>
 
diff --git a/drivers/mailbox/mailbox-test.c b/drivers/mailbox/mailbox-test.c
index 3386b4e72551..61bfe8698ce6 100644
--- a/drivers/mailbox/mailbox-test.c
+++ b/drivers/mailbox/mailbox-test.c
@@ -18,6 +18,7 @@
 #include <linux/poll.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/sched/signal.h>
 
diff --git a/drivers/mailbox/mailbox.c b/drivers/mailbox/mailbox.c
index ebff3baf3045..477fdce584b9 100644
--- a/drivers/mailbox/mailbox.c
+++ b/drivers/mailbox/mailbox.c
@@ -15,9 +15,11 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/mailbox_client.h>
 #include <linux/mailbox_controller.h>
 #include <linux/of.h>
+#include <linux/hrtimer.h>
 
 #include "mailbox.h"
 
diff --git a/drivers/mailbox/tegra-hsp.c b/drivers/mailbox/tegra-hsp.c
index 19ef56cbcfd3..870497b6d6f4 100644
--- a/drivers/mailbox/tegra-hsp.c
+++ b/drivers/mailbox/tegra-hsp.c
@@ -11,6 +11,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <soc/tegra/fuse.h>
 
diff --git a/drivers/mailbox/ti-msgmgr.c b/drivers/mailbox/ti-msgmgr.c
index 9d2d4ff6cda4..f64fa90499cc 100644
--- a/drivers/mailbox/ti-msgmgr.c
+++ b/drivers/mailbox/ti-msgmgr.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/soc/ti/ti-msgmgr.h>
+#include <linux/sprintf.h>
 
 #define Q_DATA_OFFSET(proxy, queue, reg)	\
 		     ((0x10000 * (proxy)) + (0x80 * (queue)) + ((reg) * 4))
diff --git a/drivers/mcb/mcb-core.c b/drivers/mcb/mcb-core.c
index 61994da7bad0..7bbf828d73a9 100644
--- a/drivers/mcb/mcb-core.c
+++ b/drivers/mcb/mcb-core.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/idr.h>
 #include <linux/mcb.h>
diff --git a/drivers/mcb/mcb-parse.c b/drivers/mcb/mcb-parse.c
index 1ae37e693de0..b4e723654238 100644
--- a/drivers/mcb/mcb-parse.c
+++ b/drivers/mcb/mcb-parse.c
@@ -5,6 +5,7 @@
 #include <linux/export.h>
 #include <linux/io.h>
 #include <linux/mcb.h>
+#include <linux/sprintf.h>
 
 #include "mcb-internal.h"
 
diff --git a/drivers/md/bcache/bset.c b/drivers/md/bcache/bset.c
index 31c08d4ab83b..79ac51b110a7 100644
--- a/drivers/md/bcache/bset.c
+++ b/drivers/md/bcache/bset.c
@@ -13,6 +13,7 @@
 
 #include <linux/console.h>
 #include <linux/sched/clock.h>
+#include <linux/mm.h> // for page_address()
 #include <linux/random.h>
 #include <linux/prefetch.h>
 
diff --git a/drivers/md/bcache/btree.c b/drivers/md/bcache/btree.c
index 0ed337c5f0dc..de99f12d5cc7 100644
--- a/drivers/md/bcache/btree.c
+++ b/drivers/md/bcache/btree.c
@@ -26,6 +26,7 @@
 #include "debug.h"
 #include "extents.h"
 
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/bitops.h>
 #include <linux/hash.h>
diff --git a/drivers/md/bcache/debug.c b/drivers/md/bcache/debug.c
index 7510d1c983a5..3c0b78c60219 100644
--- a/drivers/md/bcache/debug.c
+++ b/drivers/md/bcache/debug.c
@@ -10,6 +10,7 @@
 #include "btree.h"
 #include "debug.h"
 #include "extents.h"
+#include <linux/sprintf.h>
 
 #include <linux/console.h>
 #include <linux/debugfs.h>
diff --git a/drivers/md/bcache/extents.c b/drivers/md/bcache/extents.c
index d626ffcbecb9..f867a74c46d7 100644
--- a/drivers/md/bcache/extents.c
+++ b/drivers/md/bcache/extents.c
@@ -26,6 +26,7 @@
 #include "debug.h"
 #include "extents.h"
 #include "writeback.h"
+#include <linux/sprintf.h>
 
 static void sort_key_next(struct btree_iter *iter,
 			  struct btree_iter_set *i)
diff --git a/drivers/md/bcache/features.c b/drivers/md/bcache/features.c
index 634922c5601d..5f15b0914af9 100644
--- a/drivers/md/bcache/features.c
+++ b/drivers/md/bcache/features.c
@@ -9,6 +9,7 @@
 #include "bcache_ondisk.h"
 #include "bcache.h"
 #include "features.h"
+#include <linux/sprintf.h>
 
 struct feature {
 	int		compat;
diff --git a/drivers/md/bcache/super.c b/drivers/md/bcache/super.c
index 4153c9ddbe0b..fb01610aff1c 100644
--- a/drivers/md/bcache/super.c
+++ b/drivers/md/bcache/super.c
@@ -14,8 +14,10 @@
 #include "request.h"
 #include "writeback.h"
 #include "features.h"
+#include <linux/sprintf.h>
 
 #include <linux/blkdev.h>
+#include <linux/file.h> // for fput()
 #include <linux/pagemap.h>
 #include <linux/debugfs.h>
 #include <linux/idr.h>
diff --git a/drivers/md/bcache/sysfs.c b/drivers/md/bcache/sysfs.c
index d0d0e011676d..0bdc39d8f8b4 100644
--- a/drivers/md/bcache/sysfs.c
+++ b/drivers/md/bcache/sysfs.c
@@ -12,9 +12,11 @@
 #include "request.h"
 #include "writeback.h"
 #include "features.h"
+#include <linux/sprintf.h>
 
 #include <linux/blkdev.h>
 #include <linux/seq_buf.h>
+#include <linux/shrinker.h>
 #include <linux/sort.h>
 #include <linux/sched/clock.h>
 
diff --git a/drivers/md/bcache/sysfs.h b/drivers/md/bcache/sysfs.h
index 65b8bd975ab1..2552b9a12e37 100644
--- a/drivers/md/bcache/sysfs.h
+++ b/drivers/md/bcache/sysfs.h
@@ -2,6 +2,9 @@
 #ifndef _BCACHE_SYSFS_H_
 #define _BCACHE_SYSFS_H_
 
+#include <linux/sysfs.h>
+#include <linux/kstrtox.h>
+
 #define KTYPE(type)							\
 const struct kobj_type type ## _ktype = {					\
 	.release	= type ## _release,				\
diff --git a/drivers/md/bcache/util.c b/drivers/md/bcache/util.c
index 95282bf0f9a7..92b6d0a7358c 100644
--- a/drivers/md/bcache/util.c
+++ b/drivers/md/bcache/util.c
@@ -10,8 +10,10 @@
 #include <linux/blkdev.h>
 #include <linux/ctype.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sched/clock.h>
 
diff --git a/drivers/md/bcache/util.h b/drivers/md/bcache/util.h
index 6fcb9db4f50d..cc48a61b9ae8 100644
--- a/drivers/md/bcache/util.h
+++ b/drivers/md/bcache/util.h
@@ -7,6 +7,7 @@
 #include <linux/closure.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/clock.h>
 #include <linux/llist.h>
 #include <linux/ratelimit.h>
diff --git a/drivers/md/dm-bufio.c b/drivers/md/dm-bufio.c
index 098bf526136c..408840ec31a5 100644
--- a/drivers/md/dm-bufio.c
+++ b/drivers/md/dm-bufio.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/dm-bufio.h>
+#include <linux/sprintf.h>
 
 #include <linux/device-mapper.h>
 #include <linux/dm-io.h>
diff --git a/drivers/md/dm-builtin.c b/drivers/md/dm-builtin.c
index e51076ea629e..96931d73e14b 100644
--- a/drivers/md/dm-builtin.c
+++ b/drivers/md/dm-builtin.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include "dm-core.h"
+#include <linux/completion.h>
 
 /*
  * The kobject release method must not be placed in the module itself,
diff --git a/drivers/md/dm-cache-policy-smq.c b/drivers/md/dm-cache-policy-smq.c
index 2ed894155cab..af28017cb4a1 100644
--- a/drivers/md/dm-cache-policy-smq.c
+++ b/drivers/md/dm-cache-policy-smq.c
@@ -9,6 +9,7 @@
 #include "dm-cache-policy-internal.h"
 #include "dm-cache-policy.h"
 #include "dm.h"
+#include <linux/kstrtox.h>
 
 #include <linux/hash.h>
 #include <linux/jiffies.h>
diff --git a/drivers/md/dm-cache-target.c b/drivers/md/dm-cache-target.c
index 911f73f7ebba..524ef6d94942 100644
--- a/drivers/md/dm-cache-target.c
+++ b/drivers/md/dm-cache-target.c
@@ -10,6 +10,8 @@
 #include "dm-bio-record.h"
 #include "dm-cache-metadata.h"
 #include "dm-io-tracker.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/dm-io.h>
 #include <linux/dm-kcopyd.h>
diff --git a/drivers/md/dm-clone-target.c b/drivers/md/dm-clone-target.c
index 94b2fc33f64b..07cc01f2479e 100644
--- a/drivers/md/dm-clone-target.c
+++ b/drivers/md/dm-clone-target.c
@@ -7,6 +7,7 @@
 #include <linux/bio.h>
 #include <linux/err.h>
 #include <linux/hash.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/log2.h>
 #include <linux/init.h>
diff --git a/drivers/md/dm-crypt.c b/drivers/md/dm-crypt.c
index 93944c678bbe..a2e07cb58768 100644
--- a/drivers/md/dm-crypt.c
+++ b/drivers/md/dm-crypt.c
@@ -10,6 +10,7 @@
 
 #include <linux/completion.h>
 #include <linux/err.h>
+#include <linux/hex.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
@@ -20,6 +21,7 @@
 #include <linux/mempool.h>
 #include <linux/slab.h>
 #include <linux/crypto.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/kthread.h>
 #include <linux/backing-dev.h>
diff --git a/drivers/md/dm-delay.c b/drivers/md/dm-delay.c
index 5eabdb06c649..ff0acf4b838b 100644
--- a/drivers/md/dm-delay.c
+++ b/drivers/md/dm-delay.c
@@ -14,6 +14,7 @@
 #include <linux/bio.h>
 #include <linux/slab.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 
 #include <linux/device-mapper.h>
 
diff --git a/drivers/md/dm-dust.c b/drivers/md/dm-dust.c
index 1a33820c9f46..b8d81ae0617e 100644
--- a/drivers/md/dm-dust.c
+++ b/drivers/md/dm-dust.c
@@ -9,8 +9,10 @@
  */
 
 #include <linux/device-mapper.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/rbtree.h>
+#include <linux/sprintf.h>
 
 #define DM_MSG_PREFIX "dust"
 
diff --git a/drivers/md/dm-ebs-target.c b/drivers/md/dm-ebs-target.c
index b70d4016c2ac..3dd8e8df8162 100644
--- a/drivers/md/dm-ebs-target.c
+++ b/drivers/md/dm-ebs-target.c
@@ -12,6 +12,7 @@
 
 #include "dm.h"
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/dm-bufio.h>
 
diff --git a/drivers/md/dm-era-target.c b/drivers/md/dm-era-target.c
index 6acfa5bf97a4..2d2dc87da005 100644
--- a/drivers/md/dm-era-target.c
+++ b/drivers/md/dm-era-target.c
@@ -3,6 +3,8 @@
 #include "persistent-data/dm-transaction-manager.h"
 #include "persistent-data/dm-bitset.h"
 #include "persistent-data/dm-space-map.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/dm-io.h>
 #include <linux/dm-kcopyd.h>
diff --git a/drivers/md/dm-exception-store.c b/drivers/md/dm-exception-store.c
index c3799757bf4a..0ce9b57f0576 100644
--- a/drivers/md/dm-exception-store.c
+++ b/drivers/md/dm-exception-store.c
@@ -7,6 +7,7 @@
  */
 
 #include "dm-exception-store.h"
+#include <linux/kstrtox.h>
 
 #include <linux/ctype.h>
 #include <linux/mm.h>
diff --git a/drivers/md/dm-flakey.c b/drivers/md/dm-flakey.c
index 731467d4ed10..9c25d0b1696c 100644
--- a/drivers/md/dm-flakey.c
+++ b/drivers/md/dm-flakey.c
@@ -7,11 +7,13 @@
  */
 
 #include <linux/device-mapper.h>
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/blkdev.h>
 #include <linux/bio.h>
+#include <linux/random.h>
 #include <linux/slab.h>
 
 #define DM_MSG_PREFIX "flakey"
diff --git a/drivers/md/dm-ima.c b/drivers/md/dm-ima.c
index b90f34259fbb..aad95504f6e2 100644
--- a/drivers/md/dm-ima.c
+++ b/drivers/md/dm-ima.c
@@ -9,6 +9,7 @@
 
 #include "dm-core.h"
 #include "dm-ima.h"
+#include <linux/sprintf.h>
 
 #include <linux/ima.h>
 #include <linux/sched/mm.h>
diff --git a/drivers/md/dm-init.c b/drivers/md/dm-init.c
index 2a71bcdba92d..4fee2b311efb 100644
--- a/drivers/md/dm-init.c
+++ b/drivers/md/dm-init.c
@@ -11,6 +11,7 @@
 #include <linux/device.h>
 #include <linux/device-mapper.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/moduleparam.h>
 
diff --git a/drivers/md/dm-integrity.c b/drivers/md/dm-integrity.c
index ed45411eb68d..1400e3b51ac9 100644
--- a/drivers/md/dm-integrity.c
+++ b/drivers/md/dm-integrity.c
@@ -8,6 +8,9 @@
  */
 
 #include "dm-bio-record.h"
+#include <linux/completion.h>
+#include <linux/hex.h>
+#include <linux/sprintf.h>
 
 #include <linux/compiler.h>
 #include <linux/module.h>
diff --git a/drivers/md/dm-io.c b/drivers/md/dm-io.c
index 7409490259d1..ef2f9cf532cb 100644
--- a/drivers/md/dm-io.c
+++ b/drivers/md/dm-io.c
@@ -7,6 +7,7 @@
  */
 
 #include "dm-core.h"
+#include <linux/completion.h>
 
 #include <linux/device-mapper.h>
 
diff --git a/drivers/md/dm-ioctl.c b/drivers/md/dm-ioctl.c
index c2c07bfa6471..ac377403f4e6 100644
--- a/drivers/md/dm-ioctl.c
+++ b/drivers/md/dm-ioctl.c
@@ -9,6 +9,7 @@
 #include "dm-core.h"
 #include "dm-ima.h"
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/miscdevice.h>
 #include <linux/sched/mm.h>
diff --git a/drivers/md/dm-linear.c b/drivers/md/dm-linear.c
index 2d3e186ca87e..48fbf64297da 100644
--- a/drivers/md/dm-linear.c
+++ b/drivers/md/dm-linear.c
@@ -13,6 +13,7 @@
 #include <linux/dax.h>
 #include <linux/slab.h>
 #include <linux/device-mapper.h>
+#include <linux/sprintf.h>
 
 #define DM_MSG_PREFIX "linear"
 
diff --git a/drivers/md/dm-log-userspace-base.c b/drivers/md/dm-log-userspace-base.c
index 9fbb4b48fb2b..53d923fa27eb 100644
--- a/drivers/md/dm-log-userspace-base.c
+++ b/drivers/md/dm-log-userspace-base.c
@@ -12,6 +12,7 @@
 #include <linux/device-mapper.h>
 #include <linux/dm-log-userspace.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include "dm-log-userspace-transfer.h"
diff --git a/drivers/md/dm-log-userspace-transfer.c b/drivers/md/dm-log-userspace-transfer.c
index f125b0f553fa..17d01b7ec581 100644
--- a/drivers/md/dm-log-userspace-transfer.c
+++ b/drivers/md/dm-log-userspace-transfer.c
@@ -13,6 +13,7 @@
 #include <linux/connector.h>
 #include <linux/device-mapper.h>
 #include <linux/dm-log-userspace.h>
+#include <linux/completion.h>
 
 #include "dm-log-userspace-transfer.h"
 
diff --git a/drivers/md/dm-log-writes.c b/drivers/md/dm-log-writes.c
index f17a6cf2284e..0cefe61f0212 100644
--- a/drivers/md/dm-log-writes.c
+++ b/drivers/md/dm-log-writes.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/device-mapper.h>
+#include <linux/completion.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/md/dm-log.c b/drivers/md/dm-log.c
index 9d85d045f9d9..7e08561ef8a6 100644
--- a/drivers/md/dm-log.c
+++ b/drivers/md/dm-log.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/dm-io.h>
 #include <linux/dm-dirty-log.h>
diff --git a/drivers/md/dm-mpath.c b/drivers/md/dm-mpath.c
index 05d1328d1811..42e781a99087 100644
--- a/drivers/md/dm-mpath.c
+++ b/drivers/md/dm-mpath.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/device-mapper.h>
+#include <linux/sprintf.h>
 
 #include "dm-rq.h"
 #include "dm-bio-record.h"
diff --git a/drivers/md/dm-ps-historical-service-time.c b/drivers/md/dm-ps-historical-service-time.c
index b49e10d76d03..fc320fada695 100644
--- a/drivers/md/dm-ps-historical-service-time.c
+++ b/drivers/md/dm-ps-historical-service-time.c
@@ -23,6 +23,7 @@
 
 #include "dm.h"
 #include "dm-path-selector.h"
+#include <linux/sprintf.h>
 
 #include <linux/blkdev.h>
 #include <linux/slab.h>
diff --git a/drivers/md/dm-ps-queue-length.c b/drivers/md/dm-ps-queue-length.c
index e305f05ad1e5..eff33ed559c1 100644
--- a/drivers/md/dm-ps-queue-length.c
+++ b/drivers/md/dm-ps-queue-length.c
@@ -16,6 +16,7 @@
 
 #include "dm.h"
 #include "dm-path-selector.h"
+#include <linux/sprintf.h>
 
 #include <linux/slab.h>
 #include <linux/ctype.h>
diff --git a/drivers/md/dm-ps-round-robin.c b/drivers/md/dm-ps-round-robin.c
index d1745b123dc1..e7d1e9d2d54a 100644
--- a/drivers/md/dm-ps-round-robin.c
+++ b/drivers/md/dm-ps-round-robin.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/device-mapper.h>
+#include <linux/sprintf.h>
 
 #include "dm-path-selector.h"
 
diff --git a/drivers/md/dm-ps-service-time.c b/drivers/md/dm-ps-service-time.c
index 969d31c40272..8ba77a4eaa03 100644
--- a/drivers/md/dm-ps-service-time.c
+++ b/drivers/md/dm-ps-service-time.c
@@ -11,6 +11,7 @@
 
 #include "dm.h"
 #include "dm-path-selector.h"
+#include <linux/sprintf.h>
 
 #include <linux/slab.h>
 #include <linux/module.h>
diff --git a/drivers/md/dm-raid.c b/drivers/md/dm-raid.c
index 6bb1765be1e5..9d57632db3bc 100644
--- a/drivers/md/dm-raid.c
+++ b/drivers/md/dm-raid.c
@@ -8,6 +8,7 @@
 
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/kstrtox.h>
 
 #include "md.h"
 #include "raid1.h"
diff --git a/drivers/md/dm-raid1.c b/drivers/md/dm-raid1.c
index 9511dae5b556..60b01f58bb68 100644
--- a/drivers/md/dm-raid1.c
+++ b/drivers/md/dm-raid1.c
@@ -7,6 +7,7 @@
  */
 
 #include "dm-bio-record.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/mempool.h>
diff --git a/drivers/md/dm-rq.c b/drivers/md/dm-rq.c
index f7e9a3632eb3..74cf65067707 100644
--- a/drivers/md/dm-rq.c
+++ b/drivers/md/dm-rq.c
@@ -7,6 +7,7 @@
 
 #include "dm-core.h"
 #include "dm-rq.h"
+#include <linux/sprintf.h>
 
 #include <linux/blk-mq.h>
 
diff --git a/drivers/md/dm-snap.c b/drivers/md/dm-snap.c
index bf7a574499a3..dcea5bb3bc4c 100644
--- a/drivers/md/dm-snap.c
+++ b/drivers/md/dm-snap.c
@@ -16,6 +16,7 @@
 #include <linux/mempool.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/log2.h>
 #include <linux/dm-kcopyd.h>
diff --git a/drivers/md/dm-stats.c b/drivers/md/dm-stats.c
index 1e5d988f44da..d7b333899acd 100644
--- a/drivers/md/dm-stats.c
+++ b/drivers/md/dm-stats.c
@@ -3,6 +3,7 @@
 #include <linux/numa.h>
 #include <linux/slab.h>
 #include <linux/rculist.h>
+#include <linux/sprintf.h>
 #include <linux/threads.h>
 #include <linux/preempt.h>
 #include <linux/irqflags.h>
diff --git a/drivers/md/dm-stripe.c b/drivers/md/dm-stripe.c
index 16b93ae51d96..1e6d2e118465 100644
--- a/drivers/md/dm-stripe.c
+++ b/drivers/md/dm-stripe.c
@@ -7,6 +7,8 @@
 
 #include "dm.h"
 #include <linux/device-mapper.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/md/dm-switch.c b/drivers/md/dm-switch.c
index dfd9fb52a6f3..f082882ad1d9 100644
--- a/drivers/md/dm-switch.c
+++ b/drivers/md/dm-switch.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/device-mapper.h>
+#include <linux/kstrtox.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/md/dm-sysfs.c b/drivers/md/dm-sysfs.c
index bfaef27ca79f..f2ad043738c0 100644
--- a/drivers/md/dm-sysfs.c
+++ b/drivers/md/dm-sysfs.c
@@ -9,6 +9,8 @@
 #include <linux/dm-ioctl.h>
 #include "dm-core.h"
 #include "dm-rq.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 struct dm_sysfs_attr {
 	struct attribute attr;
diff --git a/drivers/md/dm-table.c b/drivers/md/dm-table.c
index 41f1d731ae5a..cc820e82b5bb 100644
--- a/drivers/md/dm-table.c
+++ b/drivers/md/dm-table.c
@@ -8,6 +8,7 @@
 
 #include "dm-core.h"
 #include "dm-rq.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/vmalloc.h>
@@ -18,6 +19,7 @@
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/mutex.h>
 #include <linux/delay.h>
 #include <linux/atomic.h>
diff --git a/drivers/md/dm-target.c b/drivers/md/dm-target.c
index 0c4efb0bef8a..6ced2f190f4e 100644
--- a/drivers/md/dm-target.c
+++ b/drivers/md/dm-target.c
@@ -6,6 +6,7 @@
  */
 
 #include "dm-core.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/md/dm-thin.c b/drivers/md/dm-thin.c
index 4793ad2aa1f7..f313f460f037 100644
--- a/drivers/md/dm-thin.c
+++ b/drivers/md/dm-thin.c
@@ -8,6 +8,8 @@
 #include "dm-thin-metadata.h"
 #include "dm-bio-prison-v1.h"
 #include "dm.h"
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 
 #include <linux/device-mapper.h>
 #include <linux/dm-io.h>
diff --git a/drivers/md/dm-unstripe.c b/drivers/md/dm-unstripe.c
index 48587c16c445..d077f57baad1 100644
--- a/drivers/md/dm-unstripe.c
+++ b/drivers/md/dm-unstripe.c
@@ -6,6 +6,8 @@
  */
 
 #include "dm.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 
diff --git a/drivers/md/dm-vdo/dedupe.c b/drivers/md/dm-vdo/dedupe.c
index 1b1edd50e758..6caf2b639ab8 100644
--- a/drivers/md/dm-vdo/dedupe.c
+++ b/drivers/md/dm-vdo/dedupe.c
@@ -124,6 +124,7 @@
 #include <linux/ratelimit.h>
 #include <linux/spinlock.h>
 #include <linux/timer.h>
+#include <linux/sysfs.h>
 
 #include "logger.h"
 #include "memory-alloc.h"
diff --git a/drivers/md/dm-vdo/funnel-requestqueue.c b/drivers/md/dm-vdo/funnel-requestqueue.c
index d2b49e39550c..039c1e1072ea 100644
--- a/drivers/md/dm-vdo/funnel-requestqueue.c
+++ b/drivers/md/dm-vdo/funnel-requestqueue.c
@@ -7,6 +7,7 @@
 
 #include <linux/atomic.h>
 #include <linux/compiler.h>
+#include <linux/hrtimer.h>
 #include <linux/wait.h>
 
 #include "funnel-queue.h"
diff --git a/drivers/md/dm-vdo/thread-utils.c b/drivers/md/dm-vdo/thread-utils.c
index 160679984d72..6ccfe9e9f211 100644
--- a/drivers/md/dm-vdo/thread-utils.c
+++ b/drivers/md/dm-vdo/thread-utils.c
@@ -5,6 +5,7 @@
 
 #include "thread-utils.h"
 
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/kthread.h>
 #include <linux/mutex.h>
diff --git a/drivers/md/dm-vdo/vdo.c b/drivers/md/dm-vdo/vdo.c
index 0fe32dfcf3dd..5e715d93654b 100644
--- a/drivers/md/dm-vdo/vdo.c
+++ b/drivers/md/dm-vdo/vdo.c
@@ -36,6 +36,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/spinlock.h>
+#include <linux/sysfs.h>
 #include <linux/types.h>
 
 #include "logger.h"
diff --git a/drivers/md/dm-verity-fec.c b/drivers/md/dm-verity-fec.c
index e46aee6f932e..9b05c701a2ef 100644
--- a/drivers/md/dm-verity-fec.c
+++ b/drivers/md/dm-verity-fec.c
@@ -7,6 +7,7 @@
 
 #include "dm-verity-fec.h"
 #include <linux/math64.h>
+#include <linux/sprintf.h>
 
 #define DM_MSG_PREFIX	"verity-fec"
 
diff --git a/drivers/md/dm-verity-target.c b/drivers/md/dm-verity-target.c
index 7949942527b9..007ab063305a 100644
--- a/drivers/md/dm-verity-target.c
+++ b/drivers/md/dm-verity-target.c
@@ -17,9 +17,13 @@
 #include "dm-verity-fec.h"
 #include "dm-verity-verify-sig.h"
 #include "dm-audit.h"
+#include <linux/hex.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/reboot.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/jump_label.h>
 
diff --git a/drivers/md/dm-writecache.c b/drivers/md/dm-writecache.c
index 7ce8847b3404..5256bee16ab2 100644
--- a/drivers/md/dm-writecache.c
+++ b/drivers/md/dm-writecache.c
@@ -8,6 +8,7 @@
 #include <linux/device-mapper.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/kthread.h>
 #include <linux/dm-io.h>
@@ -17,6 +18,7 @@
 #include <linux/libnvdimm.h>
 #include <linux/delay.h>
 #include "dm-io-tracker.h"
+#include <linux/completion.h>
 
 #define DM_MSG_PREFIX "writecache"
 
diff --git a/drivers/md/dm.c b/drivers/md/dm.c
index cab459bc0c35..a585d97e4140 100644
--- a/drivers/md/dm.c
+++ b/drivers/md/dm.c
@@ -10,8 +10,11 @@
 #include "dm-rq.h"
 #include "dm-uevent.h"
 #include "dm-ima.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
+#include <linux/file.h> // for fput()
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/sched/mm.h>
diff --git a/drivers/md/md-autodetect.c b/drivers/md/md-autodetect.c
index b2a00f213c2c..dc4ba6340d53 100644
--- a/drivers/md/md-autodetect.c
+++ b/drivers/md/md-autodetect.c
@@ -10,6 +10,7 @@
 #include <linux/raid/md_u.h>
 #include <linux/raid/md_p.h>
 #include "md.h"
+#include <linux/sprintf.h>
 
 /*
  * When md (and any require personalities) are compiled into the kernel
diff --git a/drivers/md/md-bitmap.c b/drivers/md/md-bitmap.c
index 9672f75c3050..a33d30bf513b 100644
--- a/drivers/md/md-bitmap.c
+++ b/drivers/md/md-bitmap.c
@@ -17,10 +17,13 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/sched.h>
 #include <linux/list.h>
diff --git a/drivers/md/md-cluster.c b/drivers/md/md-cluster.c
index 8e36a0feec09..984bdcf493c7 100644
--- a/drivers/md/md-cluster.c
+++ b/drivers/md/md-cluster.c
@@ -12,6 +12,8 @@
 #include "md.h"
 #include "md-bitmap.h"
 #include "md-cluster.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define LVB_SIZE	64
 #define NEW_DEV_TIMEOUT 5000
diff --git a/drivers/md/md.c b/drivers/md/md.c
index 0653584db63b..0effe76d32a1 100644
--- a/drivers/md/md.c
+++ b/drivers/md/md.c
@@ -43,6 +43,8 @@
 #include <linux/blkdev.h>
 #include <linux/blk-integrity.h>
 #include <linux/badblocks.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/seq_file.h>
 #include <linux/fs.h>
diff --git a/drivers/md/md.h b/drivers/md/md.h
index a079ee9b6190..8f757180003d 100644
--- a/drivers/md/md.h
+++ b/drivers/md/md.h
@@ -15,6 +15,7 @@
 #include <linux/list.h>
 #include <linux/mm.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/wait.h>
 #include <linux/workqueue.h>
diff --git a/drivers/md/raid0.c b/drivers/md/raid0.c
index c50a7abda744..a7019346bf46 100644
--- a/drivers/md/raid0.c
+++ b/drivers/md/raid0.c
@@ -14,6 +14,7 @@
 #include <linux/seq_file.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <trace/events/block.h>
 #include "md.h"
 #include "raid0.h"
diff --git a/drivers/md/raid1.c b/drivers/md/raid1.c
index 286f8b16c7bd..d946f298a1bd 100644
--- a/drivers/md/raid1.c
+++ b/drivers/md/raid1.c
@@ -30,6 +30,7 @@
 #include <linux/seq_file.h>
 #include <linux/ratelimit.h>
 #include <linux/interval_tree_generic.h>
+#include <linux/sprintf.h>
 
 #include <trace/events/block.h>
 
diff --git a/drivers/md/raid10.c b/drivers/md/raid10.c
index 7412066ea22c..30169a669d64 100644
--- a/drivers/md/raid10.c
+++ b/drivers/md/raid10.c
@@ -17,6 +17,7 @@
 #include <linux/ratelimit.h>
 #include <linux/kthread.h>
 #include <linux/raid/md_p.h>
+#include <linux/sprintf.h>
 #include <trace/events/block.h>
 #include "md.h"
 
diff --git a/drivers/md/raid5-cache.c b/drivers/md/raid5-cache.c
index 874874fe4fa1..3e9d24d90d14 100644
--- a/drivers/md/raid5-cache.c
+++ b/drivers/md/raid5-cache.c
@@ -4,7 +4,9 @@
  * Copyright (C) 2016 Song Liu <songliubraving@fb.com>
  */
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
+#include <linux/bio.h>
 #include <linux/blkdev.h>
 #include <linux/slab.h>
 #include <linux/raid/md_p.h>
diff --git a/drivers/md/raid5-ppl.c b/drivers/md/raid5-ppl.c
index da4ba736c4f0..0fd545107dea 100644
--- a/drivers/md/raid5-ppl.c
+++ b/drivers/md/raid5-ppl.c
@@ -5,7 +5,9 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/bio.h>
 #include <linux/blkdev.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/crc32c.h>
 #include <linux/async_tx.h>
@@ -13,6 +15,7 @@
 #include "md.h"
 #include "raid5.h"
 #include "raid5-log.h"
+#include <linux/sprintf.h>
 
 /*
  * PPL consists of a 4KB header (struct ppl_header) and at least 128KB for
diff --git a/drivers/md/raid5.c b/drivers/md/raid5.c
index 8497880135ee..8a083414e887 100644
--- a/drivers/md/raid5.c
+++ b/drivers/md/raid5.c
@@ -36,16 +36,19 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/raid/pq.h>
 #include <linux/async_tx.h>
 #include <linux/module.h>
 #include <linux/async.h>
 #include <linux/seq_file.h>
+#include <linux/shrinker.h>
 #include <linux/cpu.h>
 #include <linux/slab.h>
 #include <linux/ratelimit.h>
 #include <linux/nodemask.h>
+#include <linux/sprintf.h>
 
 #include <trace/events/block.h>
 #include <linux/list_sort.h>
diff --git a/drivers/media/cec/core/cec-adap.c b/drivers/media/cec/core/cec-adap.c
index 559a172ebc6c..a39e3bca5fee 100644
--- a/drivers/media/cec/core/cec-adap.c
+++ b/drivers/media/cec/core/cec-adap.c
@@ -15,6 +15,7 @@
 #include <linux/mm.h>
 #include <linux/string.h>
 #include <linux/types.h>
+#include <linux/completion.h>
 
 #include <drm/drm_connector.h>
 #include <drm/drm_device.h>
diff --git a/drivers/media/cec/core/cec-core.c b/drivers/media/cec/core/cec-core.c
index 5a54db839e5d..5d2765b37df0 100644
--- a/drivers/media/cec/core/cec-core.c
+++ b/drivers/media/cec/core/cec-core.c
@@ -12,6 +12,7 @@
 #include <linux/kmod.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 
diff --git a/drivers/media/cec/core/cec-pin-error-inj.c b/drivers/media/cec/core/cec-pin-error-inj.c
index fc0968b9d40e..819fc0eadba9 100644
--- a/drivers/media/cec/core/cec-pin-error-inj.c
+++ b/drivers/media/cec/core/cec-pin-error-inj.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/sched/types.h>
 
diff --git a/drivers/media/cec/core/cec-pin.c b/drivers/media/cec/core/cec-pin.c
index 330d5d5d86ab..262870863e0a 100644
--- a/drivers/media/cec/core/cec-pin.c
+++ b/drivers/media/cec/core/cec-pin.c
@@ -6,6 +6,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/sched/types.h>
+#include <linux/hrtimer.h>
 
 #include <media/cec-pin.h>
 #include "cec-pin-priv.h"
diff --git a/drivers/media/cec/platform/meson/ao-cec-g12a.c b/drivers/media/cec/platform/meson/ao-cec-g12a.c
index 51294b9b6cd5..5adc443679cc 100644
--- a/drivers/media/cec/platform/meson/ao-cec-g12a.c
+++ b/drivers/media/cec/platform/meson/ao-cec-g12a.c
@@ -17,6 +17,7 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/reset.h>
diff --git a/drivers/media/cec/platform/s5p/exynos_hdmi_cecctrl.c b/drivers/media/cec/platform/s5p/exynos_hdmi_cecctrl.c
index eb981ebce362..fb90f3823eed 100644
--- a/drivers/media/cec/platform/s5p/exynos_hdmi_cecctrl.c
+++ b/drivers/media/cec/platform/s5p/exynos_hdmi_cecctrl.c
@@ -9,6 +9,7 @@
 
 #include <linux/io.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include "exynos_hdmi_cec.h"
 #include "regs-cec.h"
diff --git a/drivers/media/cec/platform/seco/seco-cec.c b/drivers/media/cec/platform/seco/seco-cec.c
index 5d4c5a2cae09..3f0df1ee7565 100644
--- a/drivers/media/cec/platform/seco/seco-cec.c
+++ b/drivers/media/cec/platform/seco/seco-cec.c
@@ -15,6 +15,7 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 /* CEC Framework */
 #include <media/cec-notifier.h>
diff --git a/drivers/media/cec/usb/pulse8/pulse8-cec.c b/drivers/media/cec/usb/pulse8/pulse8-cec.c
index ba67587bd43e..5bdf1de42883 100644
--- a/drivers/media/cec/usb/pulse8/pulse8-cec.c
+++ b/drivers/media/cec/usb/pulse8/pulse8-cec.c
@@ -33,6 +33,7 @@
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/serio.h>
 #include <linux/slab.h>
diff --git a/drivers/media/cec/usb/rainshadow/rainshadow-cec.c b/drivers/media/cec/usb/rainshadow/rainshadow-cec.c
index ee870ea1a886..144b327216f3 100644
--- a/drivers/media/cec/usb/rainshadow/rainshadow-cec.c
+++ b/drivers/media/cec/usb/rainshadow/rainshadow-cec.c
@@ -19,6 +19,7 @@
 #include <linux/completion.h>
 #include <linux/ctype.h>
 #include <linux/delay.h>
+#include <linux/hex.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
@@ -26,6 +27,7 @@
 #include <linux/serio.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/media/common/saa7146/saa7146_core.c b/drivers/media/common/saa7146/saa7146_core.c
index 27c53eed8fe3..f28e67126c66 100644
--- a/drivers/media/common/saa7146/saa7146_core.c
+++ b/drivers/media/common/saa7146/saa7146_core.c
@@ -10,6 +10,7 @@
 
 #include <media/drv-intf/saa7146.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 static int saa7146_num;
 
diff --git a/drivers/media/common/siano/smscoreapi.c b/drivers/media/common/siano/smscoreapi.c
index 7d4bc2733f2b..26bfb4a0a22a 100644
--- a/drivers/media/common/siano/smscoreapi.c
+++ b/drivers/media/common/siano/smscoreapi.c
@@ -10,6 +10,7 @@
  */
 
 #include "smscoreapi.h"
+#include <linux/completion.h>
 
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/media/common/siano/smsdvb-main.c b/drivers/media/common/siano/smsdvb-main.c
index f80caaa333da..5d4e8b4c80f3 100644
--- a/drivers/media/common/siano/smsdvb-main.c
+++ b/drivers/media/common/siano/smsdvb-main.c
@@ -9,6 +9,7 @@ Copyright (C) 2006-2008, Uri Shkolnik
 ****************************************************************/
 
 #include "smscoreapi.h"
+#include <linux/completion.h>
 
 #include <linux/module.h>
 #include <linux/slab.h>
diff --git a/drivers/media/common/siano/smsir.c b/drivers/media/common/siano/smsir.c
index d85c78c104b9..71ea6c5c7678 100644
--- a/drivers/media/common/siano/smsir.c
+++ b/drivers/media/common/siano/smsir.c
@@ -11,6 +11,7 @@
 
 
 #include "smscoreapi.h"
+#include <linux/sprintf.h>
 
 #include <linux/types.h>
 #include <linux/input.h>
diff --git a/drivers/media/common/videobuf2/videobuf2-core.c b/drivers/media/common/videobuf2/videobuf2-core.c
index b6bf8f232f48..35f796a48391 100644
--- a/drivers/media/common/videobuf2/videobuf2-core.c
+++ b/drivers/media/common/videobuf2/videobuf2-core.c
@@ -25,6 +25,8 @@
 #include <linux/sched.h>
 #include <linux/freezer.h>
 #include <linux/kthread.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <media/videobuf2-core.h>
 #include <media/v4l2-mc.h>
diff --git a/drivers/media/common/videobuf2/videobuf2-dma-contig.c b/drivers/media/common/videobuf2/videobuf2-dma-contig.c
index 3d4fd4ef5310..d824381022db 100644
--- a/drivers/media/common/videobuf2/videobuf2-dma-contig.c
+++ b/drivers/media/common/videobuf2/videobuf2-dma-contig.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/dma-buf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/refcount.h>
 #include <linux/scatterlist.h>
diff --git a/drivers/media/dvb-core/dvb_net.c b/drivers/media/dvb-core/dvb_net.c
index 8bb8dd34c223..57becfd32a96 100644
--- a/drivers/media/dvb-core/dvb_net.c
+++ b/drivers/media/dvb-core/dvb_net.c
@@ -48,6 +48,7 @@
 #include <linux/nospec.h>
 #include <linux/etherdevice.h>
 #include <linux/dvb/net.h>
+#include <linux/sprintf.h>
 #include <linux/uio.h>
 #include <linux/uaccess.h>
 #include <linux/crc32.h>
diff --git a/drivers/media/dvb-core/dvbdev.c b/drivers/media/dvb-core/dvbdev.c
index 733d0bc4b4cc..0b81b9ebc77f 100644
--- a/drivers/media/dvb-core/dvbdev.c
+++ b/drivers/media/dvb-core/dvbdev.c
@@ -11,6 +11,7 @@
 
 #include <linux/types.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/drivers/media/dvb-frontends/cxd2841er.c b/drivers/media/dvb-frontends/cxd2841er.c
index d925ca24183b..f16ea9aa1d00 100644
--- a/drivers/media/dvb-frontends/cxd2841er.c
+++ b/drivers/media/dvb-frontends/cxd2841er.c
@@ -14,6 +14,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/bitops.h>
diff --git a/drivers/media/dvb-frontends/drxk_hard.c b/drivers/media/dvb-frontends/drxk_hard.c
index 87f3d4f0eb8c..49e46ab222e5 100644
--- a/drivers/media/dvb-frontends/drxk_hard.c
+++ b/drivers/media/dvb-frontends/drxk_hard.c
@@ -16,6 +16,7 @@
 #include <linux/i2c.h>
 #include <linux/hardirq.h>
 #include <asm/div64.h>
+#include <linux/sprintf.h>
 
 #include <media/dvb_frontend.h>
 #include "drxk.h"
diff --git a/drivers/media/i2c/adv748x/adv748x-core.c b/drivers/media/i2c/adv748x/adv748x-core.c
index 3eb6d5e8f082..236c66d1d74f 100644
--- a/drivers/media/i2c/adv748x/adv748x-core.c
+++ b/drivers/media/i2c/adv748x/adv748x-core.c
@@ -18,6 +18,7 @@
 #include <linux/of_graph.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/v4l2-dv-timings.h>
 
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/i2c/adv7511-v4l2.c b/drivers/media/i2c/adv7511-v4l2.c
index 0f780eb6ef63..38deb418ac68 100644
--- a/drivers/media/i2c/adv7511-v4l2.c
+++ b/drivers/media/i2c/adv7511-v4l2.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/workqueue.h>
 #include <linux/hdmi.h>
diff --git a/drivers/media/i2c/adv7604.c b/drivers/media/i2c/adv7604.c
index 810fa8826f30..925515dcf3d5 100644
--- a/drivers/media/i2c/adv7604.c
+++ b/drivers/media/i2c/adv7604.c
@@ -23,6 +23,7 @@
 #include <linux/module.h>
 #include <linux/of_graph.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/v4l2-dv-timings.h>
 #include <linux/videodev2.h>
 #include <linux/workqueue.h>
diff --git a/drivers/media/i2c/ccs/ccs-core.c b/drivers/media/i2c/ccs/ccs-core.c
index e21287d50c15..5dc338e1dd8b 100644
--- a/drivers/media/i2c/ccs/ccs-core.c
+++ b/drivers/media/i2c/ccs/ccs-core.c
@@ -24,6 +24,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
 #include <linux/smiapp.h>
+#include <linux/sprintf.h>
 #include <linux/v4l2-mediabus.h>
 #include <media/v4l2-cci.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/i2c/ccs/ccs-reg-access.c b/drivers/media/i2c/ccs/ccs-reg-access.c
index ed79075505e6..69f66d910cce 100644
--- a/drivers/media/i2c/ccs/ccs-reg-access.c
+++ b/drivers/media/i2c/ccs/ccs-reg-access.c
@@ -10,6 +10,7 @@
  */
 
 #include <asm/unaligned.h>
+#include <linux/hex.h>
 
 #include <linux/delay.h>
 #include <linux/i2c.h>
diff --git a/drivers/media/i2c/ds90ub913.c b/drivers/media/i2c/ds90ub913.c
index ca9bb29dab89..4295b900aecc 100644
--- a/drivers/media/i2c/ds90ub913.c
+++ b/drivers/media/i2c/ds90ub913.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/property.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include <media/i2c/ds90ub9xx.h>
 #include <media/v4l2-fwnode.h>
diff --git a/drivers/media/i2c/ds90ub953.c b/drivers/media/i2c/ds90ub953.c
index 16f88db14981..c47ce4857974 100644
--- a/drivers/media/i2c/ds90ub953.c
+++ b/drivers/media/i2c/ds90ub953.c
@@ -21,6 +21,7 @@
 #include <linux/property.h>
 #include <linux/rational.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include <media/i2c/ds90ub9xx.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/i2c/ir-kbd-i2c.c b/drivers/media/i2c/ir-kbd-i2c.c
index b37a2aaf8ac0..64e6e2b93422 100644
--- a/drivers/media/i2c/ir-kbd-i2c.c
+++ b/drivers/media/i2c/ir-kbd-i2c.c
@@ -39,6 +39,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/delay.h>
diff --git a/drivers/media/i2c/max9286.c b/drivers/media/i2c/max9286.c
index d685d445cf23..c28d9711a0dd 100644
--- a/drivers/media/i2c/max9286.c
+++ b/drivers/media/i2c/max9286.c
@@ -23,6 +23,8 @@
 #include <linux/of_graph.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-async.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/i2c/msp3400-driver.c b/drivers/media/i2c/msp3400-driver.c
index 0ed8561edfee..bfd64673ab27 100644
--- a/drivers/media/i2c/msp3400-driver.c
+++ b/drivers/media/i2c/msp3400-driver.c
@@ -39,6 +39,7 @@
 #include <linux/i2c.h>
 #include <linux/kthread.h>
 #include <linux/freezer.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/i2c/s5c73m3/s5c73m3-core.c b/drivers/media/i2c/s5c73m3/s5c73m3-core.c
index af8d01f78c32..d4b8562e7cc5 100644
--- a/drivers/media/i2c/s5c73m3/s5c73m3-core.c
+++ b/drivers/media/i2c/s5c73m3/s5c73m3-core.c
@@ -20,6 +20,7 @@
 #include <linux/sizes.h>
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <media/media-entity.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/i2c/s5k5baf.c b/drivers/media/i2c/s5k5baf.c
index de079d2c9282..2b49658dbfb7 100644
--- a/drivers/media/i2c/s5k5baf.c
+++ b/drivers/media/i2c/s5k5baf.c
@@ -20,6 +20,7 @@
 #include <linux/of_graph.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/media-entity.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/i2c/saa7115.c b/drivers/media/i2c/saa7115.c
index a1c71187e773..28f89dd5307b 100644
--- a/drivers/media/i2c/saa7115.c
+++ b/drivers/media/i2c/saa7115.c
@@ -24,6 +24,7 @@
 //	SAA7111, SAA7113 and SAA7118 support
 
 #include "saa711x_regs.h"
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/module.h>
diff --git a/drivers/media/i2c/tda1997x.c b/drivers/media/i2c/tda1997x.c
index 1ea703a9909f..1de61804e129 100644
--- a/drivers/media/i2c/tda1997x.c
+++ b/drivers/media/i2c/tda1997x.c
@@ -12,6 +12,7 @@
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/v4l2-dv-timings.h>
 #include <linux/videodev2.h>
diff --git a/drivers/media/i2c/video-i2c.c b/drivers/media/i2c/video-i2c.c
index 56dbe07a1c99..2169904d8540 100644
--- a/drivers/media/i2c/video-i2c.c
+++ b/drivers/media/i2c/video-i2c.c
@@ -24,6 +24,7 @@
 #include <linux/regmap.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <media/v4l2-common.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/mc/mc-device.c b/drivers/media/mc/mc-device.c
index c0dd4ae57227..c7b93b42522e 100644
--- a/drivers/media/mc/mc-device.c
+++ b/drivers/media/mc/mc-device.c
@@ -14,6 +14,7 @@
 #include <linux/ioctl.h>
 #include <linux/media.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/usb.h>
diff --git a/drivers/media/mc/mc-request.c b/drivers/media/mc/mc-request.c
index addb8f2d8939..60ad44a0b03f 100644
--- a/drivers/media/mc/mc-request.c
+++ b/drivers/media/mc/mc-request.c
@@ -13,6 +13,7 @@
 #include <linux/anon_inodes.h>
 #include <linux/file.h>
 #include <linux/refcount.h>
+#include <linux/sprintf.h>
 
 #include <media/media-device.h>
 #include <media/media-request.h>
diff --git a/drivers/media/mmc/siano/smssdio.c b/drivers/media/mmc/siano/smssdio.c
index 065b572e0272..49290abbb014 100644
--- a/drivers/media/mmc/siano/smssdio.c
+++ b/drivers/media/mmc/siano/smssdio.c
@@ -28,6 +28,7 @@
  */
 
 #include "smscoreapi.h"
+#include <linux/sprintf.h>
 
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
diff --git a/drivers/media/pci/bt8xx/bttv-driver.c b/drivers/media/pci/bt8xx/bttv-driver.c
index 511f013cc338..a0b9a5340918 100644
--- a/drivers/media/pci/bt8xx/bttv-driver.c
+++ b/drivers/media/pci/bt8xx/bttv-driver.c
@@ -35,6 +35,7 @@
 #include <linux/interrupt.h>
 #include <linux/kdev_t.h>
 #include "bttvp.h"
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-event.h>
diff --git a/drivers/media/pci/bt8xx/bttv-gpio.c b/drivers/media/pci/bt8xx/bttv-gpio.c
index a2b18e2bed1b..47f9f90d87a8 100644
--- a/drivers/media/pci/bt8xx/bttv-gpio.c
+++ b/drivers/media/pci/bt8xx/bttv-gpio.c
@@ -22,6 +22,7 @@
 #include <linux/device.h>
 #include <linux/slab.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #include "bttvp.h"
 
diff --git a/drivers/media/pci/bt8xx/bttv-i2c.c b/drivers/media/pci/bt8xx/bttv-i2c.c
index 4a8a3f80c6db..43a01ab90600 100644
--- a/drivers/media/pci/bt8xx/bttv-i2c.c
+++ b/drivers/media/pci/bt8xx/bttv-i2c.c
@@ -20,6 +20,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "bttvp.h"
 #include <media/v4l2-common.h>
diff --git a/drivers/media/pci/bt8xx/bttv-input.c b/drivers/media/pci/bt8xx/bttv-input.c
index 41226f1d0e5b..9d316def94fb 100644
--- a/drivers/media/pci/bt8xx/bttv-input.c
+++ b/drivers/media/pci/bt8xx/bttv-input.c
@@ -13,6 +13,7 @@
 #include <linux/interrupt.h>
 #include <linux/input.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "bttv.h"
 #include "bttvp.h"
diff --git a/drivers/media/pci/cobalt/cobalt-alsa-main.c b/drivers/media/pci/cobalt/cobalt-alsa-main.c
index c57f87a68269..05a2b989fdad 100644
--- a/drivers/media/pci/cobalt/cobalt-alsa-main.c
+++ b/drivers/media/pci/cobalt/cobalt-alsa-main.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/device.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-device.h>
 
diff --git a/drivers/media/pci/cobalt/cobalt-driver.c b/drivers/media/pci/cobalt/cobalt-driver.c
index 6e1a0614e6d0..71c36b97fc70 100644
--- a/drivers/media/pci/cobalt/cobalt-driver.c
+++ b/drivers/media/pci/cobalt/cobalt-driver.c
@@ -10,6 +10,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <media/i2c/adv7604.h>
 #include <media/i2c/adv7842.h>
 #include <media/i2c/adv7511.h>
diff --git a/drivers/media/pci/cobalt/cobalt-i2c.c b/drivers/media/pci/cobalt/cobalt-i2c.c
index 10c9ee33f73e..cf28bc642a53 100644
--- a/drivers/media/pci/cobalt/cobalt-i2c.c
+++ b/drivers/media/pci/cobalt/cobalt-i2c.c
@@ -10,6 +10,7 @@
 
 #include "cobalt-driver.h"
 #include "cobalt-i2c.h"
+#include <linux/sprintf.h>
 
 struct cobalt_i2c_regs {
 	/* Clock prescaler register lo-byte */
diff --git a/drivers/media/pci/cobalt/cobalt-v4l2.c b/drivers/media/pci/cobalt/cobalt-v4l2.c
index 77ba08ace29f..8260cb13da3e 100644
--- a/drivers/media/pci/cobalt/cobalt-v4l2.c
+++ b/drivers/media/pci/cobalt/cobalt-v4l2.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/math64.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/v4l2-dv-timings.h>
 
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/pci/cx18/cx18-alsa-main.c b/drivers/media/pci/cx18/cx18-alsa-main.c
index 9dc361886284..b82b4cddfbba 100644
--- a/drivers/media/pci/cx18/cx18-alsa-main.c
+++ b/drivers/media/pci/cx18/cx18-alsa-main.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/device.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-device.h>
 
diff --git a/drivers/media/pci/cx18/cx18-av-core.c b/drivers/media/pci/cx18/cx18-av-core.c
index ee6e71157786..b8768c2e4c88 100644
--- a/drivers/media/pci/cx18/cx18-av-core.c
+++ b/drivers/media/pci/cx18/cx18-av-core.c
@@ -11,6 +11,7 @@
 #include "cx18-driver.h"
 #include "cx18-io.h"
 #include "cx18-cards.h"
+#include <linux/sprintf.h>
 
 int cx18_av_write(struct cx18 *cx, u16 addr, u8 value)
 {
diff --git a/drivers/media/pci/cx18/cx18-driver.c b/drivers/media/pci/cx18/cx18-driver.c
index 743fcc961374..962a07383f8b 100644
--- a/drivers/media/pci/cx18/cx18-driver.c
+++ b/drivers/media/pci/cx18/cx18-driver.c
@@ -25,6 +25,7 @@
 #include "cx18-controls.h"
 #include "xc2028.h"
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <media/tveeprom.h>
 
 /* If you have already X v4l cards, then set this to X. This way
diff --git a/drivers/media/pci/cx18/cx18-gpio.c b/drivers/media/pci/cx18/cx18-gpio.c
index c85eb8d25837..82db08b316ef 100644
--- a/drivers/media/pci/cx18/cx18-gpio.c
+++ b/drivers/media/pci/cx18/cx18-gpio.c
@@ -13,6 +13,7 @@
 #include "cx18-cards.h"
 #include "cx18-gpio.h"
 #include "xc2028.h"
+#include <linux/sprintf.h>
 
 /********************* GPIO stuffs *********************/
 
diff --git a/drivers/media/pci/cx18/cx18-i2c.c b/drivers/media/pci/cx18/cx18-i2c.c
index a83435245251..2fea1966db7b 100644
--- a/drivers/media/pci/cx18/cx18-i2c.c
+++ b/drivers/media/pci/cx18/cx18-i2c.c
@@ -14,6 +14,7 @@
 #include "cx18-gpio.h"
 #include "cx18-i2c.h"
 #include "cx18-irq.h"
+#include <linux/sprintf.h>
 
 #define CX18_REG_I2C_1_WR   0xf15000
 #define CX18_REG_I2C_1_RD   0xf15008
diff --git a/drivers/media/pci/cx18/cx18-mailbox.c b/drivers/media/pci/cx18/cx18-mailbox.c
index a6457c23d18c..0bd24b6a5f05 100644
--- a/drivers/media/pci/cx18/cx18-mailbox.c
+++ b/drivers/media/pci/cx18/cx18-mailbox.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 
 #include "cx18-driver.h"
 #include "cx18-io.h"
diff --git a/drivers/media/pci/cx18/cx18-streams.c b/drivers/media/pci/cx18/cx18-streams.c
index acc6418db425..e404530f171b 100644
--- a/drivers/media/pci/cx18/cx18-streams.c
+++ b/drivers/media/pci/cx18/cx18-streams.c
@@ -19,6 +19,7 @@
 #include "cx18-cards.h"
 #include "cx18-scb.h"
 #include "cx18-dvb.h"
+#include <linux/sprintf.h>
 
 #define CX18_DSP0_INTERRUPT_MASK	0xd0004C
 
diff --git a/drivers/media/pci/cx23885/cx23885-417.c b/drivers/media/pci/cx23885/cx23885-417.c
index fdb96f80c036..2ab1e680face 100644
--- a/drivers/media/pci/cx23885/cx23885-417.c
+++ b/drivers/media/pci/cx23885/cx23885-417.c
@@ -13,6 +13,7 @@
 
 #include "cx23885.h"
 #include "cx23885-ioctl.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/media/pci/cx23885/cx23885-alsa.c b/drivers/media/pci/cx23885/cx23885-alsa.c
index 25dc8d4dc5b7..62da10aab3ca 100644
--- a/drivers/media/pci/cx23885/cx23885-alsa.c
+++ b/drivers/media/pci/cx23885/cx23885-alsa.c
@@ -10,6 +10,7 @@
 
 #include "cx23885.h"
 #include "cx23885-reg.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/media/pci/cx23885/cx23885-core.c b/drivers/media/pci/cx23885/cx23885-core.c
index c8705d786cdd..06fb9ff545cd 100644
--- a/drivers/media/pci/cx23885/cx23885-core.c
+++ b/drivers/media/pci/cx23885/cx23885-core.c
@@ -6,6 +6,7 @@
  */
 
 #include "cx23885.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/list.h>
diff --git a/drivers/media/pci/cx23885/cx23885-input.c b/drivers/media/pci/cx23885/cx23885-input.c
index d2e84c6457e0..9730bb65b738 100644
--- a/drivers/media/pci/cx23885/cx23885-input.c
+++ b/drivers/media/pci/cx23885/cx23885-input.c
@@ -23,6 +23,7 @@
 
 #include "cx23885.h"
 #include "cx23885-input.h"
+#include <linux/sprintf.h>
 
 #include <linux/slab.h>
 #include <media/rc-core.h>
diff --git a/drivers/media/pci/cx23885/cx23885-video.c b/drivers/media/pci/cx23885/cx23885-video.c
index 7d4a409c433e..bab85cf5ea93 100644
--- a/drivers/media/pci/cx23885/cx23885-video.c
+++ b/drivers/media/pci/cx23885/cx23885-video.c
@@ -7,6 +7,7 @@
 
 #include "cx23885.h"
 #include "cx23885-video.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/list.h>
diff --git a/drivers/media/pci/cx23885/cx23888-ir.c b/drivers/media/pci/cx23885/cx23888-ir.c
index 222d04421468..29237892f2f0 100644
--- a/drivers/media/pci/cx23885/cx23888-ir.c
+++ b/drivers/media/pci/cx23885/cx23888-ir.c
@@ -9,6 +9,7 @@
 
 #include "cx23885.h"
 #include "cx23888-ir.h"
+#include <linux/sprintf.h>
 
 #include <linux/kfifo.h>
 #include <linux/slab.h>
diff --git a/drivers/media/pci/cx25821/cx25821-alsa.c b/drivers/media/pci/cx25821/cx25821-alsa.c
index a42f0c03a7ca..895fb9826b8f 100644
--- a/drivers/media/pci/cx25821/cx25821-alsa.c
+++ b/drivers/media/pci/cx25821/cx25821-alsa.c
@@ -13,6 +13,7 @@
 #include <linux/init.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/dma-mapping.h>
 #include <linux/pci.h>
diff --git a/drivers/media/pci/cx25821/cx25821-core.c b/drivers/media/pci/cx25821/cx25821-core.c
index 6627fa9166d3..fcb271f27ded 100644
--- a/drivers/media/pci/cx25821/cx25821-core.c
+++ b/drivers/media/pci/cx25821/cx25821-core.c
@@ -14,6 +14,7 @@
 #include "cx25821.h"
 #include "cx25821-sram.h"
 #include "cx25821-video.h"
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("Driver for Athena cards");
 MODULE_AUTHOR("Shu Lin - Hiep Huynh");
diff --git a/drivers/media/pci/cx25821/cx25821-video.c b/drivers/media/pci/cx25821/cx25821-video.c
index 0bee4b728a60..c957c56d643d 100644
--- a/drivers/media/pci/cx25821/cx25821-video.c
+++ b/drivers/media/pci/cx25821/cx25821-video.c
@@ -12,6 +12,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include "cx25821-video.h"
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("v4l2 driver module for cx25821 based TV cards");
 MODULE_AUTHOR("Hiep Huynh <hiep.huynh@conexant.com>");
diff --git a/drivers/media/pci/cx88/cx88-alsa.c b/drivers/media/pci/cx88/cx88-alsa.c
index 29fb1311e443..f6853712ac8a 100644
--- a/drivers/media/pci/cx88/cx88-alsa.c
+++ b/drivers/media/pci/cx88/cx88-alsa.c
@@ -12,6 +12,7 @@
 
 #include "cx88.h"
 #include "cx88-reg.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/media/pci/cx88/cx88-blackbird.c b/drivers/media/pci/cx88/cx88-blackbird.c
index d55df8fdb3b6..850376878643 100644
--- a/drivers/media/pci/cx88/cx88-blackbird.c
+++ b/drivers/media/pci/cx88/cx88-blackbird.c
@@ -13,6 +13,7 @@
  */
 
 #include "cx88.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/media/pci/cx88/cx88-cards.c b/drivers/media/pci/cx88/cx88-cards.c
index f01e48c23f8e..e0e3431634ac 100644
--- a/drivers/media/pci/cx88/cx88-cards.c
+++ b/drivers/media/pci/cx88/cx88-cards.c
@@ -9,6 +9,7 @@
 #include "cx88.h"
 #include "tea5767.h"
 #include "xc4000.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/media/pci/cx88/cx88-core.c b/drivers/media/pci/cx88/cx88-core.c
index 52be42f9a7fa..327961a9962c 100644
--- a/drivers/media/pci/cx88/cx88-core.c
+++ b/drivers/media/pci/cx88/cx88-core.c
@@ -12,6 +12,7 @@
  */
 
 #include "cx88.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/list.h>
diff --git a/drivers/media/pci/cx88/cx88-input.c b/drivers/media/pci/cx88/cx88-input.c
index a04a1d33fadb..938e6ef752cf 100644
--- a/drivers/media/pci/cx88/cx88-input.c
+++ b/drivers/media/pci/cx88/cx88-input.c
@@ -10,6 +10,7 @@
  */
 
 #include "cx88.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/hrtimer.h>
diff --git a/drivers/media/pci/ddbridge/ddbridge-core.c b/drivers/media/pci/ddbridge/ddbridge-core.c
index 40e6c873c36d..06f63f6ce4fa 100644
--- a/drivers/media/pci/ddbridge/ddbridge-core.c
+++ b/drivers/media/pci/ddbridge/ddbridge-core.c
@@ -16,6 +16,7 @@
 #include <linux/io.h>
 #include <linux/pci.h>
 #include <linux/pci_ids.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/i2c.h>
 #include <linux/swab.h>
diff --git a/drivers/media/pci/ddbridge/ddbridge-i2c.c b/drivers/media/pci/ddbridge/ddbridge-i2c.c
index c894be180446..7dfdb4d3a6b8 100644
--- a/drivers/media/pci/ddbridge/ddbridge-i2c.c
+++ b/drivers/media/pci/ddbridge/ddbridge-i2c.c
@@ -16,10 +16,12 @@
 #include <linux/io.h>
 #include <linux/pci.h>
 #include <linux/pci_ids.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/i2c.h>
 #include <linux/swab.h>
 #include <linux/vmalloc.h>
+#include <linux/completion.h>
 
 #include "ddbridge.h"
 #include "ddbridge-i2c.h"
diff --git a/drivers/media/pci/ddbridge/ddbridge-mci.c b/drivers/media/pci/ddbridge/ddbridge-mci.c
index a006cb0fa199..fbe48016b436 100644
--- a/drivers/media/pci/ddbridge/ddbridge-mci.c
+++ b/drivers/media/pci/ddbridge/ddbridge-mci.c
@@ -10,6 +10,7 @@
 #include "ddbridge.h"
 #include "ddbridge-io.h"
 #include "ddbridge-mci.h"
+#include <linux/completion.h>
 
 static LIST_HEAD(mci_list);
 
diff --git a/drivers/media/pci/dm1105/dm1105.c b/drivers/media/pci/dm1105/dm1105.c
index 9e9c7c071acc..c021b8111266 100644
--- a/drivers/media/pci/dm1105/dm1105.c
+++ b/drivers/media/pci/dm1105/dm1105.c
@@ -14,6 +14,7 @@
 #include <linux/pci.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <media/rc-core.h>
 
 #include <media/demux.h>
diff --git a/drivers/media/pci/dt3155/dt3155.c b/drivers/media/pci/dt3155/dt3155.c
index dff853e73fdc..a7cc162fedb6 100644
--- a/drivers/media/pci/dt3155/dt3155.c
+++ b/drivers/media/pci/dt3155/dt3155.c
@@ -7,6 +7,7 @@
  ***************************************************************************/
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <linux/delay.h>
 #include <linux/kthread.h>
diff --git a/drivers/media/pci/intel/ipu-bridge.c b/drivers/media/pci/intel/ipu-bridge.c
index f980e3125a7b..dcf69eaf14bd 100644
--- a/drivers/media/pci/intel/ipu-bridge.c
+++ b/drivers/media/pci/intel/ipu-bridge.c
@@ -8,6 +8,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/media/pci/intel/ipu3/ipu3-cio2.c b/drivers/media/pci/intel/ipu3/ipu3-cio2.c
index 83e29c56fe33..254d5ce770e7 100644
--- a/drivers/media/pci/intel/ipu3/ipu3-cio2.c
+++ b/drivers/media/pci/intel/ipu3/ipu3-cio2.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/iopoll.h>
@@ -21,6 +22,7 @@
 #include <linux/pfn.h>
 #include <linux/pm_runtime.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <media/ipu-bridge.h>
diff --git a/drivers/media/pci/intel/ivsc/mei_ace.c b/drivers/media/pci/intel/ivsc/mei_ace.c
index 3622271c71c8..b391c9c6f1ba 100644
--- a/drivers/media/pci/intel/ivsc/mei_ace.c
+++ b/drivers/media/pci/intel/ivsc/mei_ace.c
@@ -27,6 +27,7 @@
 #include <linux/mutex.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/media/pci/intel/ivsc/mei_csi.c b/drivers/media/pci/intel/ivsc/mei_csi.c
index 15b905f66ab7..7aeecb972958 100644
--- a/drivers/media/pci/intel/ivsc/mei_csi.c
+++ b/drivers/media/pci/intel/ivsc/mei_csi.c
@@ -21,6 +21,7 @@
 #include <linux/mutex.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 #include <linux/uuid.h>
 #include <linux/workqueue.h>
diff --git a/drivers/media/pci/ivtv/ivtv-alsa-main.c b/drivers/media/pci/ivtv/ivtv-alsa-main.c
index 9e13a7128a53..46a400a2854e 100644
--- a/drivers/media/pci/ivtv/ivtv-alsa-main.c
+++ b/drivers/media/pci/ivtv/ivtv-alsa-main.c
@@ -12,6 +12,7 @@
 #include "ivtv-version.h"
 #include "ivtv-alsa.h"
 #include "ivtv-alsa-pcm.h"
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/drivers/media/pci/ivtv/ivtv-gpio.c b/drivers/media/pci/ivtv/ivtv-gpio.c
index 6434c0d03a6d..20b2002687ac 100644
--- a/drivers/media/pci/ivtv/ivtv-gpio.c
+++ b/drivers/media/pci/ivtv/ivtv-gpio.c
@@ -11,6 +11,7 @@
 #include "ivtv-cards.h"
 #include "ivtv-gpio.h"
 #include "xc2028.h"
+#include <linux/sprintf.h>
 #include <media/tuner.h>
 #include <media/v4l2-ctrls.h>
 
diff --git a/drivers/media/pci/ivtv/ivtv-i2c.c b/drivers/media/pci/ivtv/ivtv-i2c.c
index c052c57c6dce..95242f13152b 100644
--- a/drivers/media/pci/ivtv/ivtv-i2c.c
+++ b/drivers/media/pci/ivtv/ivtv-i2c.c
@@ -51,6 +51,7 @@
 #include "ivtv-cards.h"
 #include "ivtv-gpio.h"
 #include "ivtv-i2c.h"
+#include <linux/sprintf.h>
 #include <media/drv-intf/cx25840.h>
 
 /* i2c implementation for cx23415/6 chip, ivtv project.
diff --git a/drivers/media/pci/ivtv/ivtv-streams.c b/drivers/media/pci/ivtv/ivtv-streams.c
index af9e6235c74d..647ac7b29222 100644
--- a/drivers/media/pci/ivtv/ivtv-streams.c
+++ b/drivers/media/pci/ivtv/ivtv-streams.c
@@ -43,6 +43,7 @@
 #include "ivtv-cards.h"
 #include "ivtv-streams.h"
 #include "ivtv-firmware.h"
+#include <linux/sprintf.h>
 #include <media/v4l2-event.h>
 
 static const struct v4l2_file_operations ivtv_v4l2_enc_fops = {
diff --git a/drivers/media/pci/mantis/mantis_input.c b/drivers/media/pci/mantis/mantis_input.c
index 34c0d979240f..0a11c9342f4e 100644
--- a/drivers/media/pci/mantis/mantis_input.c
+++ b/drivers/media/pci/mantis/mantis_input.c
@@ -8,6 +8,7 @@
 
 #include <media/rc-core.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <media/dmxdev.h>
 #include <media/dvbdev.h>
diff --git a/drivers/media/pci/mgb4/mgb4_core.c b/drivers/media/pci/mgb4/mgb4_core.c
index 9bcf10a77fd3..feabcffd56bb 100644
--- a/drivers/media/pci/mgb4/mgb4_core.c
+++ b/drivers/media/pci/mgb4/mgb4_core.c
@@ -39,6 +39,7 @@
 #include "mgb4_vin.h"
 #include "mgb4_trigger.h"
 #include "mgb4_core.h"
+#include <linux/sprintf.h>
 
 #define MGB4_USER_IRQS 16
 
diff --git a/drivers/media/pci/mgb4/mgb4_dma.c b/drivers/media/pci/mgb4/mgb4_dma.c
index cae888e6504b..c965e6b80fc2 100644
--- a/drivers/media/pci/mgb4/mgb4_dma.c
+++ b/drivers/media/pci/mgb4/mgb4_dma.c
@@ -11,6 +11,8 @@
 #include <linux/dma-direction.h>
 #include "mgb4_core.h"
 #include "mgb4_dma.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static void chan_irq(void *param)
 {
diff --git a/drivers/media/pci/mgb4/mgb4_sysfs_in.c b/drivers/media/pci/mgb4/mgb4_sysfs_in.c
index 0ba66a2cf145..8403b552d0f8 100644
--- a/drivers/media/pci/mgb4/mgb4_sysfs_in.c
+++ b/drivers/media/pci/mgb4/mgb4_sysfs_in.c
@@ -13,6 +13,8 @@
 #include "mgb4_vin.h"
 #include "mgb4_cmt.h"
 #include "mgb4_sysfs.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /* Common for both FPDL3 and GMSL */
 
diff --git a/drivers/media/pci/mgb4/mgb4_sysfs_out.c b/drivers/media/pci/mgb4/mgb4_sysfs_out.c
index 9f6e81c57726..7df760273477 100644
--- a/drivers/media/pci/mgb4/mgb4_sysfs_out.c
+++ b/drivers/media/pci/mgb4/mgb4_sysfs_out.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/nospec.h>
 #include "mgb4_core.h"
 #include "mgb4_i2c.h"
@@ -15,6 +16,7 @@
 #include "mgb4_vin.h"
 #include "mgb4_cmt.h"
 #include "mgb4_sysfs.h"
+#include <linux/sprintf.h>
 
 static int loopin_cnt(struct mgb4_vin_dev *vindev)
 {
diff --git a/drivers/media/pci/mgb4/mgb4_sysfs_pci.c b/drivers/media/pci/mgb4/mgb4_sysfs_pci.c
index d26935ff956b..785aeb0702f2 100644
--- a/drivers/media/pci/mgb4/mgb4_sysfs_pci.c
+++ b/drivers/media/pci/mgb4/mgb4_sysfs_pci.c
@@ -10,6 +10,7 @@
 #include <linux/device.h>
 #include "mgb4_core.h"
 #include "mgb4_sysfs.h"
+#include <linux/sprintf.h>
 
 static ssize_t module_version_show(struct device *dev,
 				   struct device_attribute *attr, char *buf)
diff --git a/drivers/media/pci/mgb4/mgb4_vin.c b/drivers/media/pci/mgb4/mgb4_vin.c
index 2cd78c539889..fca8a66ad12a 100644
--- a/drivers/media/pci/mgb4/mgb4_vin.c
+++ b/drivers/media/pci/mgb4/mgb4_vin.c
@@ -15,6 +15,7 @@
  */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/align.h>
 #include <linux/dma/amd_xdma.h>
diff --git a/drivers/media/pci/mgb4/mgb4_vout.c b/drivers/media/pci/mgb4/mgb4_vout.c
index 241353ee77a5..905b615f4e2d 100644
--- a/drivers/media/pci/mgb4/mgb4_vout.c
+++ b/drivers/media/pci/mgb4/mgb4_vout.c
@@ -13,6 +13,7 @@
 #include <linux/pci.h>
 #include <linux/align.h>
 #include <linux/dma/amd_xdma.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-ioctl.h>
 #include <media/videobuf2-v4l2.h>
 #include <media/videobuf2-dma-sg.h>
diff --git a/drivers/media/pci/netup_unidvb/netup_unidvb_core.c b/drivers/media/pci/netup_unidvb/netup_unidvb_core.c
index 557985ba25db..18c4884092e8 100644
--- a/drivers/media/pci/netup_unidvb/netup_unidvb_core.c
+++ b/drivers/media/pci/netup_unidvb/netup_unidvb_core.c
@@ -18,6 +18,7 @@
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <media/videobuf2-v4l2.h>
 #include <media/videobuf2-vmalloc.h>
 
diff --git a/drivers/media/pci/netup_unidvb/netup_unidvb_spi.c b/drivers/media/pci/netup_unidvb/netup_unidvb_spi.c
index e90aa1c1584c..4929c04fd94b 100644
--- a/drivers/media/pci/netup_unidvb/netup_unidvb_spi.c
+++ b/drivers/media/pci/netup_unidvb/netup_unidvb_spi.c
@@ -13,6 +13,7 @@
 #include <linux/spi/spi.h>
 #include <linux/spi/flash.h>
 #include <linux/mtd/partitions.h>
+#include <linux/sprintf.h>
 #include <mtd/mtd-abi.h>
 
 #define NETUP_SPI_CTRL_IRQ	0x1000
diff --git a/drivers/media/pci/pt3/pt3.c b/drivers/media/pci/pt3/pt3.c
index 246f73b8a9e7..e47d8fa88d5e 100644
--- a/drivers/media/pci/pt3/pt3.c
+++ b/drivers/media/pci/pt3/pt3.c
@@ -13,6 +13,7 @@
 #include <linux/pci.h>
 #include <linux/string.h>
 #include <linux/sched/signal.h>
+#include <linux/hrtimer.h>
 
 #include <media/dmxdev.h>
 #include <media/dvbdev.h>
diff --git a/drivers/media/pci/saa7134/saa7134-alsa.c b/drivers/media/pci/saa7134/saa7134-alsa.c
index d3cde05a6eba..412e11b391b6 100644
--- a/drivers/media/pci/saa7134/saa7134-alsa.c
+++ b/drivers/media/pci/saa7134/saa7134-alsa.c
@@ -5,6 +5,7 @@
 
 #include "saa7134.h"
 #include "saa7134-reg.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/slab.h>
diff --git a/drivers/media/pci/saa7134/saa7134-core.c b/drivers/media/pci/saa7134/saa7134-core.c
index ea0585e43abb..0b05b9adc751 100644
--- a/drivers/media/pci/saa7134/saa7134-core.c
+++ b/drivers/media/pci/saa7134/saa7134-core.c
@@ -9,6 +9,7 @@
 
 #include "saa7134.h"
 #include "saa7134-reg.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/list.h>
diff --git a/drivers/media/pci/saa7134/saa7134-empress.c b/drivers/media/pci/saa7134/saa7134-empress.c
index 434fa1ee1c33..609c3b95d39a 100644
--- a/drivers/media/pci/saa7134/saa7134-empress.c
+++ b/drivers/media/pci/saa7134/saa7134-empress.c
@@ -6,6 +6,7 @@
 
 #include "saa7134.h"
 #include "saa7134-reg.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/list.h>
diff --git a/drivers/media/pci/saa7134/saa7134-go7007.c b/drivers/media/pci/saa7134/saa7134-go7007.c
index da83893ffee9..15df402f9db2 100644
--- a/drivers/media/pci/saa7134/saa7134-go7007.c
+++ b/drivers/media/pci/saa7134/saa7134-go7007.c
@@ -5,6 +5,7 @@
 
 #include "saa7134.h"
 #include "saa7134-reg.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/drivers/media/pci/saa7134/saa7134-input.c b/drivers/media/pci/saa7134/saa7134-input.c
index 8610eb473b39..78a76c84f526 100644
--- a/drivers/media/pci/saa7134/saa7134-input.c
+++ b/drivers/media/pci/saa7134/saa7134-input.c
@@ -6,6 +6,7 @@
 
 #include "saa7134.h"
 #include "saa7134-reg.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/media/pci/saa7146/mxb.c b/drivers/media/pci/saa7146/mxb.c
index a14b839098b8..b90d182a6f1f 100644
--- a/drivers/media/pci/saa7146/mxb.c
+++ b/drivers/media/pci/saa7146/mxb.c
@@ -19,6 +19,7 @@
 #include <media/i2c/saa7115.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 #include "tea6415c.h"
 #include "tea6420.h"
diff --git a/drivers/media/pci/saa7164/saa7164-core.c b/drivers/media/pci/saa7164/saa7164-core.c
index a8a004f28ca0..46f20ab735db 100644
--- a/drivers/media/pci/saa7164/saa7164-core.c
+++ b/drivers/media/pci/saa7164/saa7164-core.c
@@ -16,6 +16,7 @@
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <asm/div64.h>
+#include <linux/sprintf.h>
 
 #include "saa7164.h"
 
diff --git a/drivers/media/pci/saa7164/saa7164-encoder.c b/drivers/media/pci/saa7164/saa7164-encoder.c
index bf73e9e83f52..27c95dec56ef 100644
--- a/drivers/media/pci/saa7164/saa7164-encoder.c
+++ b/drivers/media/pci/saa7164/saa7164-encoder.c
@@ -6,6 +6,7 @@
  */
 
 #include "saa7164.h"
+#include <linux/sprintf.h>
 
 #define ENCODER_MAX_BITRATE 6500000
 #define ENCODER_MIN_BITRATE 1000000
diff --git a/drivers/media/pci/saa7164/saa7164-vbi.c b/drivers/media/pci/saa7164/saa7164-vbi.c
index a6738baab688..dc274ff04e4b 100644
--- a/drivers/media/pci/saa7164/saa7164-vbi.c
+++ b/drivers/media/pci/saa7164/saa7164-vbi.c
@@ -6,6 +6,7 @@
  */
 
 #include "saa7164.h"
+#include <linux/sprintf.h>
 
 /* Take the encoder configuration from the port struct and
  * flush it to the hardware.
diff --git a/drivers/media/pci/smipcie/smipcie-ir.c b/drivers/media/pci/smipcie/smipcie-ir.c
index c0604d9c7011..20293218022d 100644
--- a/drivers/media/pci/smipcie/smipcie-ir.c
+++ b/drivers/media/pci/smipcie/smipcie-ir.c
@@ -6,6 +6,7 @@
  */
 
 #include "smipcie.h"
+#include <linux/sprintf.h>
 
 #define SMI_SAMPLE_PERIOD 83
 #define SMI_SAMPLE_IDLEMIN (10000 / SMI_SAMPLE_PERIOD)
diff --git a/drivers/media/pci/solo6x10/solo6x10-core.c b/drivers/media/pci/solo6x10/solo6x10-core.c
index 6d87fbb0ee04..367ce245a151 100644
--- a/drivers/media/pci/solo6x10/solo6x10-core.c
+++ b/drivers/media/pci/solo6x10/solo6x10-core.c
@@ -10,9 +10,11 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/delay.h>
 #include <linux/sysfs.h>
diff --git a/drivers/media/pci/solo6x10/solo6x10-g723.c b/drivers/media/pci/solo6x10/solo6x10-g723.c
index 1db9f40ee0c0..b5b911c1424f 100644
--- a/drivers/media/pci/solo6x10/solo6x10-g723.c
+++ b/drivers/media/pci/solo6x10/solo6x10-g723.c
@@ -16,6 +16,7 @@
 #include <linux/freezer.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/drivers/media/pci/solo6x10/solo6x10-i2c.c b/drivers/media/pci/solo6x10/solo6x10-i2c.c
index 7db785e9c997..5542527f3864 100644
--- a/drivers/media/pci/solo6x10/solo6x10-i2c.c
+++ b/drivers/media/pci/solo6x10/solo6x10-i2c.c
@@ -19,6 +19,7 @@
 
 #include <linux/kernel.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include "solo6x10.h"
 
diff --git a/drivers/media/pci/solo6x10/solo6x10-p2m.c b/drivers/media/pci/solo6x10/solo6x10-p2m.c
index ca70a864a3ef..752f209971cf 100644
--- a/drivers/media/pci/solo6x10/solo6x10-p2m.c
+++ b/drivers/media/pci/solo6x10/solo6x10-p2m.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "solo6x10.h"
 
diff --git a/drivers/media/pci/solo6x10/solo6x10-v4l2-enc.c b/drivers/media/pci/solo6x10/solo6x10-v4l2-enc.c
index 0adf3d80f248..1331b508dfa2 100644
--- a/drivers/media/pci/solo6x10/solo6x10-v4l2-enc.c
+++ b/drivers/media/pci/solo6x10/solo6x10-v4l2-enc.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/kthread.h>
 #include <linux/freezer.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-common.h>
diff --git a/drivers/media/pci/solo6x10/solo6x10-v4l2.c b/drivers/media/pci/solo6x10/solo6x10-v4l2.c
index e18cc41fca83..4176083936d8 100644
--- a/drivers/media/pci/solo6x10/solo6x10-v4l2.c
+++ b/drivers/media/pci/solo6x10/solo6x10-v4l2.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/kthread.h>
 #include <linux/freezer.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-common.h>
diff --git a/drivers/media/pci/sta2x11/sta2x11_vip.c b/drivers/media/pci/sta2x11/sta2x11_vip.c
index e4cf9d63e926..14af9e78f714 100644
--- a/drivers/media/pci/sta2x11/sta2x11_vip.c
+++ b/drivers/media/pci/sta2x11/sta2x11_vip.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/kmod.h>
 #include <linux/pci.h>
diff --git a/drivers/media/pci/ttpci/budget-ci.c b/drivers/media/pci/ttpci/budget-ci.c
index 66e1a004ee43..ac616066bf81 100644
--- a/drivers/media/pci/ttpci/budget-ci.c
+++ b/drivers/media/pci/ttpci/budget-ci.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <media/rc-core.h>
 
 #include "budget.h"
diff --git a/drivers/media/pci/tw5864/tw5864-core.c b/drivers/media/pci/tw5864/tw5864-core.c
index 560ff1ddcc83..adf121813b42 100644
--- a/drivers/media/pci/tw5864/tw5864-core.c
+++ b/drivers/media/pci/tw5864/tw5864-core.c
@@ -19,6 +19,7 @@
 #include <linux/pci_ids.h>
 #include <linux/jiffies.h>
 #include <asm/dma.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-dev.h>
 
 #include "tw5864.h"
diff --git a/drivers/media/pci/tw5864/tw5864-video.c b/drivers/media/pci/tw5864/tw5864-video.c
index 8b1aae4b6319..3339c180863e 100644
--- a/drivers/media/pci/tw5864/tw5864-video.c
+++ b/drivers/media/pci/tw5864/tw5864-video.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <media/v4l2-event.h>
 #include <media/videobuf2-dma-contig.h>
diff --git a/drivers/media/pci/tw68/tw68-video.c b/drivers/media/pci/tw68/tw68-video.c
index cdf5d733b863..c7761c91516d 100644
--- a/drivers/media/pci/tw68/tw68-video.c
+++ b/drivers/media/pci/tw68/tw68-video.c
@@ -17,6 +17,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <media/v4l2-event.h>
 #include <media/videobuf2-dma-sg.h>
diff --git a/drivers/media/pci/tw686x/tw686x-audio.c b/drivers/media/pci/tw686x/tw686x-audio.c
index 1ae3845b6743..64db6eba31e9 100644
--- a/drivers/media/pci/tw686x/tw686x-audio.c
+++ b/drivers/media/pci/tw686x/tw686x-audio.c
@@ -18,6 +18,7 @@
 #include <linux/mutex.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/drivers/media/pci/tw686x/tw686x-core.c b/drivers/media/pci/tw686x/tw686x-core.c
index c53099c958ca..da149f4e3d81 100644
--- a/drivers/media/pci/tw686x/tw686x-core.c
+++ b/drivers/media/pci/tw686x/tw686x-core.c
@@ -35,6 +35,7 @@
 #include <linux/module.h>
 #include <linux/pci_ids.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 
 #include "tw686x.h"
diff --git a/drivers/media/pci/tw686x/tw686x-video.c b/drivers/media/pci/tw686x/tw686x-video.c
index 63be95fce83d..a9cd73d4c1dc 100644
--- a/drivers/media/pci/tw686x/tw686x-video.c
+++ b/drivers/media/pci/tw686x/tw686x-video.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <media/v4l2-event.h>
 #include <media/videobuf2-dma-contig.h>
diff --git a/drivers/media/pci/zoran/videocodec.c b/drivers/media/pci/zoran/videocodec.c
index 8efc5e06b0f7..14c1a3d0457c 100644
--- a/drivers/media/pci/zoran/videocodec.c
+++ b/drivers/media/pci/zoran/videocodec.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 
diff --git a/drivers/media/pci/zoran/zoran_card.c b/drivers/media/pci/zoran/zoran_card.c
index 3975fc1b2ee3..ea4348390dfe 100644
--- a/drivers/media/pci/zoran/zoran_card.c
+++ b/drivers/media/pci/zoran/zoran_card.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/i2c.h>
 #include <linux/i2c-algo-bit.h>
diff --git a/drivers/media/pci/zoran/zoran_driver.c b/drivers/media/pci/zoran/zoran_driver.c
index 5c05e64c71a9..fbdfea0d0aef 100644
--- a/drivers/media/pci/zoran/zoran_driver.c
+++ b/drivers/media/pci/zoran/zoran_driver.c
@@ -35,6 +35,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #include <linux/interrupt.h>
diff --git a/drivers/media/pci/zoran/zr36016.c b/drivers/media/pci/zoran/zr36016.c
index 4b328ad6083f..a1d64495e4ba 100644
--- a/drivers/media/pci/zoran/zr36016.c
+++ b/drivers/media/pci/zoran/zr36016.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* headerfile of this module */
 #include "zr36016.h"
diff --git a/drivers/media/pci/zoran/zr36050.c b/drivers/media/pci/zoran/zr36050.c
index b07d7e5c1b4a..eaebe4e048fb 100644
--- a/drivers/media/pci/zoran/zr36050.c
+++ b/drivers/media/pci/zoran/zr36050.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <linux/types.h>
 #include <linux/wait.h>
diff --git a/drivers/media/pci/zoran/zr36060.c b/drivers/media/pci/zoran/zr36060.c
index 75fd167603dc..253bfc346997 100644
--- a/drivers/media/pci/zoran/zr36060.c
+++ b/drivers/media/pci/zoran/zr36060.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <linux/types.h>
 #include <linux/wait.h>
diff --git a/drivers/media/platform/allegro-dvt/allegro-core.c b/drivers/media/platform/allegro-dvt/allegro-core.c
index da61f9beb6b4..f9df803bc842 100644
--- a/drivers/media/platform/allegro-dvt/allegro-core.c
+++ b/drivers/media/platform/allegro-dvt/allegro-core.c
@@ -7,6 +7,7 @@
 
 #include <linux/bits.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/gcd.h>
 #include <linux/interrupt.h>
diff --git a/drivers/media/platform/allegro-dvt/allegro-mail.c b/drivers/media/platform/allegro-dvt/allegro-mail.c
index aadc947a77ae..6187a5668285 100644
--- a/drivers/media/platform/allegro-dvt/allegro-mail.c
+++ b/drivers/media/platform/allegro-dvt/allegro-mail.c
@@ -9,6 +9,8 @@
 #include <linux/bitfield.h>
 #include <linux/export.h>
 #include <linux/errno.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/videodev2.h>
 
diff --git a/drivers/media/platform/amphion/vdec.c b/drivers/media/platform/amphion/vdec.c
index 133d77d1ea0c..96fa7c8ea3c1 100644
--- a/drivers/media/platform/amphion/vdec.c
+++ b/drivers/media/platform/amphion/vdec.c
@@ -9,6 +9,7 @@
 #include <linux/list.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/videodev2.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/amphion/venc.c b/drivers/media/platform/amphion/venc.c
index 4eb57d793a9c..befbcb133160 100644
--- a/drivers/media/platform/amphion/venc.c
+++ b/drivers/media/platform/amphion/venc.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/ktime.h>
 #include <linux/rational.h>
diff --git a/drivers/media/platform/amphion/vpu_cmds.c b/drivers/media/platform/amphion/vpu_cmds.c
index 5695f5c1cb3e..2ba550e3c2a4 100644
--- a/drivers/media/platform/amphion/vpu_cmds.c
+++ b/drivers/media/platform/amphion/vpu_cmds.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/types.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/vmalloc.h>
 #include "vpu.h"
diff --git a/drivers/media/platform/amphion/vpu_core.c b/drivers/media/platform/amphion/vpu_core.c
index 3a2030d02e45..e25254d32d9f 100644
--- a/drivers/media/platform/amphion/vpu_core.c
+++ b/drivers/media/platform/amphion/vpu_core.c
@@ -25,6 +25,7 @@
 #include "vpu_msgs.h"
 #include "vpu_rpc.h"
 #include "vpu_cmds.h"
+#include <linux/completion.h>
 
 void csr_writel(struct vpu_core *core, u32 reg, u32 val)
 {
diff --git a/drivers/media/platform/amphion/vpu_dbg.c b/drivers/media/platform/amphion/vpu_dbg.c
index 940e5bda5fa3..bed0ed4fb8a0 100644
--- a/drivers/media/platform/amphion/vpu_dbg.c
+++ b/drivers/media/platform/amphion/vpu_dbg.c
@@ -9,6 +9,7 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pm_runtime.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/amphion/vpu_mbox.c b/drivers/media/platform/amphion/vpu_mbox.c
index c2963b8deb48..0d446c32f538 100644
--- a/drivers/media/platform/amphion/vpu_mbox.c
+++ b/drivers/media/platform/amphion/vpu_mbox.c
@@ -13,6 +13,7 @@
 #include "vpu.h"
 #include "vpu_mbox.h"
 #include "vpu_msgs.h"
+#include <linux/sprintf.h>
 
 static void vpu_mbox_rx_callback(struct mbox_client *cl, void *msg)
 {
diff --git a/drivers/media/platform/amphion/vpu_msgs.c b/drivers/media/platform/amphion/vpu_msgs.c
index b74a407a19f2..24b94fd52b30 100644
--- a/drivers/media/platform/amphion/vpu_msgs.c
+++ b/drivers/media/platform/amphion/vpu_msgs.c
@@ -17,6 +17,7 @@
 #include "vpu_cmds.h"
 #include "vpu_msgs.h"
 #include "vpu_v4l2.h"
+#include <linux/completion.h>
 
 #define VPU_PKT_HEADER_LENGTH		3
 
diff --git a/drivers/media/platform/aspeed/aspeed-video.c b/drivers/media/platform/aspeed/aspeed-video.c
index fc6050e3be0d..72164b275d82 100644
--- a/drivers/media/platform/aspeed/aspeed-video.c
+++ b/drivers/media/platform/aspeed/aspeed-video.c
@@ -18,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/sched.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/v4l2-controls.h>
 #include <linux/videodev2.h>
diff --git a/drivers/media/platform/cadence/cdns-csi2rx.c b/drivers/media/platform/cadence/cdns-csi2rx.c
index 2d7b0508cc9a..f97a6ddc0c9a 100644
--- a/drivers/media/platform/cadence/cdns-csi2rx.c
+++ b/drivers/media/platform/cadence/cdns-csi2rx.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ctrls.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/cadence/cdns-csi2tx.c b/drivers/media/platform/cadence/cdns-csi2tx.c
index 3d98f91f1bee..b9a24e70c1a1 100644
--- a/drivers/media/platform/cadence/cdns-csi2tx.c
+++ b/drivers/media/platform/cadence/cdns-csi2tx.c
@@ -14,6 +14,7 @@
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/mipi-csi2.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/platform/chips-media/coda/coda-bit.c b/drivers/media/platform/chips-media/coda/coda-bit.c
index ed47d5bd8d61..266336122f86 100644
--- a/drivers/media/platform/chips-media/coda/coda-bit.c
+++ b/drivers/media/platform/chips-media/coda/coda-bit.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/irqreturn.h>
 #include <linux/kernel.h>
 #include <linux/log2.h>
@@ -16,6 +17,7 @@
 #include <linux/ratelimit.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 
 #include <media/v4l2-common.h>
diff --git a/drivers/media/platform/chips-media/coda/coda-common.c b/drivers/media/platform/chips-media/coda/coda-common.c
index 7da0194ec850..3a77f6720d30 100644
--- a/drivers/media/platform/chips-media/coda/coda-common.c
+++ b/drivers/media/platform/chips-media/coda/coda-common.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/firmware.h>
@@ -24,6 +25,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/ratelimit.h>
 #include <linux/reset.h>
diff --git a/drivers/media/platform/chips-media/coda/coda-jpeg.c b/drivers/media/platform/chips-media/coda/coda-jpeg.c
index ba8f41002917..9447a166f35f 100644
--- a/drivers/media/platform/chips-media/coda/coda-jpeg.c
+++ b/drivers/media/platform/chips-media/coda/coda-jpeg.c
@@ -6,6 +6,7 @@
  */
 
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <linux/irqreturn.h>
 #include <linux/kernel.h>
 #include <linux/ktime.h>
diff --git a/drivers/media/platform/chips-media/coda/imx-vdoa.c b/drivers/media/platform/chips-media/coda/imx-vdoa.c
index c3561fcecb98..dde2a9610eff 100644
--- a/drivers/media/platform/chips-media/coda/imx-vdoa.c
+++ b/drivers/media/platform/chips-media/coda/imx-vdoa.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
diff --git a/drivers/media/platform/chips-media/wave5/wave5-vpu-dec.c b/drivers/media/platform/chips-media/wave5/wave5-vpu-dec.c
index ef227af72348..409ddf494793 100644
--- a/drivers/media/platform/chips-media/wave5/wave5-vpu-dec.c
+++ b/drivers/media/platform/chips-media/wave5/wave5-vpu-dec.c
@@ -6,6 +6,7 @@
  */
 
 #include "wave5-helper.h"
+#include <linux/completion.h>
 
 #define VPU_DEC_DEV_NAME "C&M Wave5 VPU decoder"
 #define VPU_DEC_DRV_NAME "wave5-dec"
diff --git a/drivers/media/platform/chips-media/wave5/wave5-vpu-enc.c b/drivers/media/platform/chips-media/wave5/wave5-vpu-enc.c
index f29cfa3af94a..dd16d9c34219 100644
--- a/drivers/media/platform/chips-media/wave5/wave5-vpu-enc.c
+++ b/drivers/media/platform/chips-media/wave5/wave5-vpu-enc.c
@@ -6,6 +6,7 @@
  */
 
 #include "wave5-helper.h"
+#include <linux/completion.h>
 
 #define VPU_ENC_DEV_NAME "C&M Wave5 VPU encoder"
 #define VPU_ENC_DRV_NAME "wave5-enc"
diff --git a/drivers/media/platform/chips-media/wave5/wave5-vpu.c b/drivers/media/platform/chips-media/wave5/wave5-vpu.c
index 0d90b5820bef..1ccc3b1411d9 100644
--- a/drivers/media/platform/chips-media/wave5/wave5-vpu.c
+++ b/drivers/media/platform/chips-media/wave5/wave5-vpu.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/interrupt.h>
 #include "wave5-vpu.h"
diff --git a/drivers/media/platform/mediatek/jpeg/mtk_jpeg_core.c b/drivers/media/platform/mediatek/jpeg/mtk_jpeg_core.c
index ac48658e2de4..83c8c0bb6ab9 100644
--- a/drivers/media/platform/mediatek/jpeg/mtk_jpeg_core.c
+++ b/drivers/media/platform/mediatek/jpeg/mtk_jpeg_core.c
@@ -17,6 +17,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-mem2mem.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/platform/mediatek/mdp/mtk_mdp_m2m.c b/drivers/media/platform/mediatek/mdp/mtk_mdp_m2m.c
index f14779e7596e..730013e41d7b 100644
--- a/drivers/media/platform/mediatek/mdp/mtk_mdp_m2m.c
+++ b/drivers/media/platform/mediatek/mdp/mtk_mdp_m2m.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/platform/mediatek/mdp3/mtk-mdp3-m2m.c b/drivers/media/platform/mediatek/mdp3/mtk-mdp3-m2m.c
index 35a8b059bde5..803342d53838 100644
--- a/drivers/media/platform/mediatek/mdp3/mtk-mdp3-m2m.c
+++ b/drivers/media/platform/mediatek/mdp3/mtk-mdp3-m2m.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-event.h>
 #include <media/videobuf2-dma-contig.h>
diff --git a/drivers/media/platform/mediatek/mdp3/mtk-mdp3-vpu.c b/drivers/media/platform/mediatek/mdp3/mtk-mdp3-vpu.c
index da3a892ad867..a678e3f79f92 100644
--- a/drivers/media/platform/mediatek/mdp3/mtk-mdp3-vpu.c
+++ b/drivers/media/platform/mediatek/mdp3/mtk-mdp3-vpu.c
@@ -8,6 +8,7 @@
 #include <linux/remoteproc/mtk_scp.h>
 #include "mtk-mdp3-vpu.h"
 #include "mtk-mdp3-core.h"
+#include <linux/completion.h>
 
 #define MDP_VPU_MESSAGE_TIMEOUT 500U
 
diff --git a/drivers/media/platform/mediatek/vcodec/common/mtk_vcodec_dbgfs.c b/drivers/media/platform/mediatek/vcodec/common/mtk_vcodec_dbgfs.c
index 5ad3797836db..f2e884be78bd 100644
--- a/drivers/media/platform/mediatek/vcodec/common/mtk_vcodec_dbgfs.c
+++ b/drivers/media/platform/mediatek/vcodec/common/mtk_vcodec_dbgfs.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "mtk_vcodec_dbgfs.h"
 #include "../decoder/mtk_vcodec_dec_drv.h"
diff --git a/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec.c b/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec.c
index ba742f0e391d..17a403e30980 100644
--- a/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec.c
+++ b/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec.c
@@ -8,6 +8,7 @@
 #include <media/v4l2-event.h>
 #include <media/v4l2-mem2mem.h>
 #include <media/videobuf2-dma-contig.h>
+#include <linux/sprintf.h>
 
 #include "mtk_vcodec_dec_drv.h"
 #include "mtk_vcodec_dec.h"
diff --git a/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec_drv.c b/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec_drv.c
index f47c98faf068..59c0b6721b89 100644
--- a/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec_drv.c
+++ b/drivers/media/platform/mediatek/vcodec/decoder/mtk_vcodec_dec_drv.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-mem2mem.h>
 #include <media/videobuf2-dma-contig.h>
diff --git a/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc.c b/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc.c
index 181884e798fd..15a1d1e18e53 100644
--- a/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc.c
+++ b/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc.c
@@ -9,6 +9,7 @@
 #include <media/v4l2-mem2mem.h>
 #include <media/videobuf2-dma-contig.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "mtk_vcodec_enc.h"
 #include "venc_drv_if.h"
diff --git a/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc_drv.c b/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc_drv.c
index 6319f24bc714..4e0627b7514e 100644
--- a/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc_drv.c
+++ b/drivers/media/platform/mediatek/vcodec/encoder/mtk_vcodec_enc_drv.c
@@ -12,6 +12,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-mem2mem.h>
 #include <media/videobuf2-dma-contig.h>
diff --git a/drivers/media/platform/mediatek/vpu/mtk_vpu.c b/drivers/media/platform/mediatek/vpu/mtk_vpu.c
index 7243604a82a5..31be51a8ce88 100644
--- a/drivers/media/platform/mediatek/vpu/mtk_vpu.c
+++ b/drivers/media/platform/mediatek/vpu/mtk_vpu.c
@@ -16,6 +16,7 @@
 #include <linux/sched.h>
 #include <linux/sizes.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 
 #include "mtk_vpu.h"
 
diff --git a/drivers/media/platform/microchip/microchip-csi2dc.c b/drivers/media/platform/microchip/microchip-csi2dc.c
index fee73260bb1e..1cf2abe69339 100644
--- a/drivers/media/platform/microchip/microchip-csi2dc.c
+++ b/drivers/media/platform/microchip/microchip-csi2dc.c
@@ -14,6 +14,7 @@
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 
 #include <media/v4l2-fwnode.h>
diff --git a/drivers/media/platform/microchip/microchip-isc-base.c b/drivers/media/platform/microchip/microchip-isc-base.c
index f3a5cbacadbe..31844ab5d4b2 100644
--- a/drivers/media/platform/microchip/microchip-isc-base.c
+++ b/drivers/media/platform/microchip/microchip-isc-base.c
@@ -19,6 +19,7 @@
 #include <linux/regmap.h>
 #include <linux/videodev2.h>
 #include <linux/atmel-isc-media.h>
+#include <linux/completion.h>
 
 #include <media/v4l2-ctrls.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/microchip/microchip-isc-scaler.c b/drivers/media/platform/microchip/microchip-isc-scaler.c
index e83463543e21..69b25f75ebab 100644
--- a/drivers/media/platform/microchip/microchip-isc-scaler.c
+++ b/drivers/media/platform/microchip/microchip-isc-scaler.c
@@ -12,6 +12,7 @@
 #include <media/media-entity.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-subdev.h>
+#include <linux/sprintf.h>
 
 #include "microchip-isc-regs.h"
 #include "microchip-isc.h"
diff --git a/drivers/media/platform/nvidia/tegra-vde/h264.c b/drivers/media/platform/nvidia/tegra-vde/h264.c
index 204e474d57f7..7715339660ed 100644
--- a/drivers/media/platform/nvidia/tegra-vde/h264.c
+++ b/drivers/media/platform/nvidia/tegra-vde/h264.c
@@ -10,6 +10,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include <media/v4l2-h264.h>
 
diff --git a/drivers/media/platform/nvidia/tegra-vde/vde.c b/drivers/media/platform/nvidia/tegra-vde/vde.c
index 81a0d3b76b88..b59cbd37271c 100644
--- a/drivers/media/platform/nvidia/tegra-vde/vde.c
+++ b/drivers/media/platform/nvidia/tegra-vde/vde.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-buf.h>
 #include <linux/genalloc.h>
 #include <linux/interrupt.h>
diff --git a/drivers/media/platform/nxp/imx-jpeg/mxc-jpeg.c b/drivers/media/platform/nxp/imx-jpeg/mxc-jpeg.c
index 64112b63298c..d3da780f210b 100644
--- a/drivers/media/platform/nxp/imx-jpeg/mxc-jpeg.c
+++ b/drivers/media/platform/nxp/imx-jpeg/mxc-jpeg.c
@@ -51,6 +51,7 @@
 #include <linux/interrupt.h>
 #include <linux/pm_runtime.h>
 #include <linux/pm_domain.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <media/v4l2-jpeg.h>
diff --git a/drivers/media/platform/nxp/imx-mipi-csis.c b/drivers/media/platform/nxp/imx-mipi-csis.c
index db8ff5f5c4d3..990f3328942e 100644
--- a/drivers/media/platform/nxp/imx-mipi-csis.c
+++ b/drivers/media/platform/nxp/imx-mipi-csis.c
@@ -27,6 +27,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-common.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/nxp/imx-pxp.c b/drivers/media/platform/nxp/imx-pxp.c
index e62dc5c1a4ae..4460a7ad153c 100644
--- a/drivers/media/platform/nxp/imx-pxp.c
+++ b/drivers/media/platform/nxp/imx-pxp.c
@@ -23,6 +23,7 @@
 #include <linux/regmap.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/media-device.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/platform/nxp/imx7-media-csi.c b/drivers/media/platform/nxp/imx7-media-csi.c
index 9566ff738818..498abbd1f91b 100644
--- a/drivers/media/platform/nxp/imx7-media-csi.c
+++ b/drivers/media/platform/nxp/imx7-media-csi.c
@@ -26,6 +26,7 @@
 #include <linux/property.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timekeeping.h>
 #include <linux/types.h>
diff --git a/drivers/media/platform/nxp/imx8-isi/imx8-isi-debug.c b/drivers/media/platform/nxp/imx8-isi/imx8-isi-debug.c
index 5e8a177da054..0a0a66df18c5 100644
--- a/drivers/media/platform/nxp/imx8-isi/imx8-isi-debug.c
+++ b/drivers/media/platform/nxp/imx8-isi/imx8-isi-debug.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/pm_runtime.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "imx8-isi-core.h"
diff --git a/drivers/media/platform/nxp/imx8-isi/imx8-isi-hw.c b/drivers/media/platform/nxp/imx8-isi/imx8-isi-hw.c
index 5623914f95e6..a288129bc51d 100644
--- a/drivers/media/platform/nxp/imx8-isi/imx8-isi-hw.c
+++ b/drivers/media/platform/nxp/imx8-isi/imx8-isi-hw.c
@@ -6,6 +6,7 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/types.h>
 
 #include "imx8-isi-core.h"
diff --git a/drivers/media/platform/nxp/imx8-isi/imx8-isi-m2m.c b/drivers/media/platform/nxp/imx8-isi/imx8-isi-m2m.c
index 9745d6219a16..508932e6ed79 100644
--- a/drivers/media/platform/nxp/imx8-isi/imx8-isi-m2m.c
+++ b/drivers/media/platform/nxp/imx8-isi/imx8-isi-m2m.c
@@ -18,6 +18,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/videodev2.h>
diff --git a/drivers/media/platform/nxp/imx8-isi/imx8-isi-pipe.c b/drivers/media/platform/nxp/imx8-isi/imx8-isi-pipe.c
index d76eb58deb09..1196683c627d 100644
--- a/drivers/media/platform/nxp/imx8-isi/imx8-isi-pipe.c
+++ b/drivers/media/platform/nxp/imx8-isi/imx8-isi-pipe.c
@@ -16,6 +16,7 @@
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/videodev2.h>
 
diff --git a/drivers/media/platform/nxp/imx8-isi/imx8-isi-video.c b/drivers/media/platform/nxp/imx8-isi/imx8-isi-video.c
index 4091f1c0e78b..bee78af7fbf6 100644
--- a/drivers/media/platform/nxp/imx8-isi/imx8-isi-video.c
+++ b/drivers/media/platform/nxp/imx8-isi/imx8-isi-video.c
@@ -15,6 +15,7 @@
 #include <linux/media-bus-format.h>
 #include <linux/minmax.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/videodev2.h>
diff --git a/drivers/media/platform/nxp/imx8mq-mipi-csi2.c b/drivers/media/platform/nxp/imx8mq-mipi-csi2.c
index ba2e81f24965..6224eb236605 100644
--- a/drivers/media/platform/nxp/imx8mq-mipi-csi2.c
+++ b/drivers/media/platform/nxp/imx8mq-mipi-csi2.c
@@ -23,6 +23,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-common.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/qcom/camss/camss-csid.c b/drivers/media/platform/qcom/camss/camss-csid.c
index eb27d69e89a1..b1fb5c8396b3 100644
--- a/drivers/media/platform/qcom/camss/camss-csid.c
+++ b/drivers/media/platform/qcom/camss/camss-csid.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <media/media-entity.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-event.h>
diff --git a/drivers/media/platform/qcom/camss/camss-csiphy.c b/drivers/media/platform/qcom/camss/camss-csiphy.c
index 264c99efeae8..ef05b3a8e0c1 100644
--- a/drivers/media/platform/qcom/camss/camss-csiphy.c
+++ b/drivers/media/platform/qcom/camss/camss-csiphy.c
@@ -15,6 +15,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <media/media-entity.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-subdev.h>
diff --git a/drivers/media/platform/qcom/camss/camss-ispif.c b/drivers/media/platform/qcom/camss/camss-ispif.c
index a12dcc7ff438..b325f5eaa7c5 100644
--- a/drivers/media/platform/qcom/camss/camss-ispif.c
+++ b/drivers/media/platform/qcom/camss/camss-ispif.c
@@ -16,6 +16,7 @@
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <media/media-entity.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-subdev.h>
diff --git a/drivers/media/platform/qcom/camss/camss-vfe-170.c b/drivers/media/platform/qcom/camss/camss-vfe-170.c
index 795ac3815339..4fb73c42fcff 100644
--- a/drivers/media/platform/qcom/camss/camss-vfe-170.c
+++ b/drivers/media/platform/qcom/camss/camss-vfe-170.c
@@ -10,6 +10,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/completion.h>
 
 #include "camss.h"
 #include "camss-vfe.h"
diff --git a/drivers/media/platform/qcom/camss/camss-vfe-480.c b/drivers/media/platform/qcom/camss/camss-vfe-480.c
index dc2735476c82..f4efb81f3876 100644
--- a/drivers/media/platform/qcom/camss/camss-vfe-480.c
+++ b/drivers/media/platform/qcom/camss/camss-vfe-480.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/completion.h>
 
 #include "camss.h"
 #include "camss-vfe.h"
diff --git a/drivers/media/platform/qcom/camss/camss-vfe-gen1.c b/drivers/media/platform/qcom/camss/camss-vfe-gen1.c
index 239d3d4ac666..1fba6a882807 100644
--- a/drivers/media/platform/qcom/camss/camss-vfe-gen1.c
+++ b/drivers/media/platform/qcom/camss/camss-vfe-gen1.c
@@ -10,6 +10,7 @@
 #include "camss.h"
 #include "camss-vfe.h"
 #include "camss-vfe-gen1.h"
+#include <linux/completion.h>
 
 /* Max number of frame drop updates per frame */
 #define VFE_FRAME_DROP_UPDATES 2
diff --git a/drivers/media/platform/qcom/camss/camss-vfe.c b/drivers/media/platform/qcom/camss/camss-vfe.c
index 2062be668f49..cb4a0815a6ca 100644
--- a/drivers/media/platform/qcom/camss/camss-vfe.c
+++ b/drivers/media/platform/qcom/camss/camss-vfe.c
@@ -18,6 +18,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/spinlock_types.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <media/media-entity.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-subdev.h>
diff --git a/drivers/media/platform/qcom/venus/hfi_cmds.c b/drivers/media/platform/qcom/venus/hfi_cmds.c
index 3418d2dd9371..11addde450d5 100644
--- a/drivers/media/platform/qcom/venus/hfi_cmds.c
+++ b/drivers/media/platform/qcom/venus/hfi_cmds.c
@@ -3,6 +3,7 @@
  * Copyright (c) 2012-2016, The Linux Foundation. All rights reserved.
  * Copyright (C) 2017 Linaro Ltd.
  */
+#include <linux/kernel.h> // for lower_32_bits(), upper_32_bits()
 #include <linux/overflow.h>
 #include <linux/errno.h>
 #include <linux/hash.h>
diff --git a/drivers/media/platform/qcom/venus/hfi_msgs.c b/drivers/media/platform/qcom/venus/hfi_msgs.c
index 0a041b4db9ef..eeaac3a5885e 100644
--- a/drivers/media/platform/qcom/venus/hfi_msgs.c
+++ b/drivers/media/platform/qcom/venus/hfi_msgs.c
@@ -7,7 +7,9 @@
 #include <linux/list.h>
 #include <linux/slab.h>
 #include <linux/soc/qcom/smem.h>
+#include <linux/sprintf.h>
 #include <media/videobuf2-v4l2.h>
+#include <linux/completion.h>
 
 #include "core.h"
 #include "hfi.h"
diff --git a/drivers/media/platform/qcom/venus/hfi_venus.c b/drivers/media/platform/qcom/venus/hfi_venus.c
index f9437b6412b9..086b6437ab5a 100644
--- a/drivers/media/platform/qcom/venus/hfi_venus.c
+++ b/drivers/media/platform/qcom/venus/hfi_venus.c
@@ -11,6 +11,7 @@
 #include <linux/iopoll.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "core.h"
 #include "hfi_cmds.h"
diff --git a/drivers/media/platform/renesas/rcar-isp.c b/drivers/media/platform/renesas/rcar-isp.c
index 530d65fc546b..2804a0b30943 100644
--- a/drivers/media/platform/renesas/rcar-isp.c
+++ b/drivers/media/platform/renesas/rcar-isp.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include <media/mipi-csi2.h>
 #include <media/v4l2-subdev.h>
diff --git a/drivers/media/platform/renesas/rcar-vin/rcar-csi2.c b/drivers/media/platform/renesas/rcar-vin/rcar-csi2.c
index 582d5e35db0e..b6d42b5b7f96 100644
--- a/drivers/media/platform/renesas/rcar-vin/rcar-csi2.c
+++ b/drivers/media/platform/renesas/rcar-vin/rcar-csi2.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #include <media/mipi-csi2.h>
diff --git a/drivers/media/platform/renesas/rcar-vin/rcar-v4l2.c b/drivers/media/platform/renesas/rcar-vin/rcar-v4l2.c
index 073f70c6ac68..7becfe291fe8 100644
--- a/drivers/media/platform/renesas/rcar-vin/rcar-v4l2.c
+++ b/drivers/media/platform/renesas/rcar-vin/rcar-v4l2.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-event.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/platform/renesas/rcar_drif.c b/drivers/media/platform/renesas/rcar_drif.c
index f21d05054341..a4d8c77a0fba 100644
--- a/drivers/media/platform/renesas/rcar_drif.c
+++ b/drivers/media/platform/renesas/rcar_drif.c
@@ -49,6 +49,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-async.h>
 #include <media/v4l2-ctrls.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/renesas/rcar_fdp1.c b/drivers/media/platform/renesas/rcar_fdp1.c
index a2565b269f3b..9bff5ed2e47f 100644
--- a/drivers/media/platform/renesas/rcar_fdp1.c
+++ b/drivers/media/platform/renesas/rcar_fdp1.c
@@ -22,6 +22,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <media/rcar-fcp.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/platform/renesas/renesas-ceu.c b/drivers/media/platform/renesas/renesas-ceu.c
index 167760276796..0f9fd7275f2b 100644
--- a/drivers/media/platform/renesas/renesas-ceu.c
+++ b/drivers/media/platform/renesas/renesas-ceu.c
@@ -26,6 +26,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/videodev2.h>
 
diff --git a/drivers/media/platform/renesas/rzg2l-cru/rzg2l-csi2.c b/drivers/media/platform/renesas/rzg2l-cru/rzg2l-csi2.c
index d20f4eff93a4..5d7ab36e9f92 100644
--- a/drivers/media/platform/renesas/rzg2l-cru/rzg2l-csi2.c
+++ b/drivers/media/platform/renesas/rzg2l-cru/rzg2l-csi2.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/units.h>
 
diff --git a/drivers/media/platform/renesas/rzg2l-cru/rzg2l-ip.c b/drivers/media/platform/renesas/rzg2l-cru/rzg2l-ip.c
index 9f351a05893e..fea668fdbd31 100644
--- a/drivers/media/platform/renesas/rzg2l-cru/rzg2l-ip.c
+++ b/drivers/media/platform/renesas/rzg2l-cru/rzg2l-ip.c
@@ -6,6 +6,7 @@
  */
 
 #include "rzg2l-cru.h"
+#include <linux/sprintf.h>
 
 struct rzg2l_cru_ip_format {
 	u32 code;
diff --git a/drivers/media/platform/renesas/rzg2l-cru/rzg2l-video.c b/drivers/media/platform/renesas/rzg2l-cru/rzg2l-video.c
index d0ffa90bc656..d5c2b0ef07dd 100644
--- a/drivers/media/platform/renesas/rzg2l-cru/rzg2l-video.c
+++ b/drivers/media/platform/renesas/rzg2l-cru/rzg2l-video.c
@@ -14,6 +14,7 @@
 #include <linux/clk.h>
 #include <linux/delay.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ioctl.h>
 #include <media/videobuf2-dma-contig.h>
diff --git a/drivers/media/platform/renesas/vsp1/vsp1_entity.c b/drivers/media/platform/renesas/vsp1/vsp1_entity.c
index 0a5a7f9cc870..da2dc7c366e0 100644
--- a/drivers/media/platform/renesas/vsp1/vsp1_entity.c
+++ b/drivers/media/platform/renesas/vsp1/vsp1_entity.c
@@ -9,6 +9,7 @@
 
 #include <linux/device.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 
 #include <media/media-entity.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/platform/renesas/vsp1/vsp1_histo.c b/drivers/media/platform/renesas/vsp1/vsp1_histo.c
index 71155282ca11..abf123b36700 100644
--- a/drivers/media/platform/renesas/vsp1/vsp1_histo.c
+++ b/drivers/media/platform/renesas/vsp1/vsp1_histo.c
@@ -10,6 +10,7 @@
 
 #include <linux/device.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-subdev.h>
diff --git a/drivers/media/platform/renesas/vsp1/vsp1_rpf.c b/drivers/media/platform/renesas/vsp1/vsp1_rpf.c
index c47579efc65f..649f5b967cc7 100644
--- a/drivers/media/platform/renesas/vsp1/vsp1_rpf.c
+++ b/drivers/media/platform/renesas/vsp1/vsp1_rpf.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-subdev.h>
 
diff --git a/drivers/media/platform/renesas/vsp1/vsp1_uds.c b/drivers/media/platform/renesas/vsp1/vsp1_uds.c
index d89f1197b86c..d3e1a09b5a58 100644
--- a/drivers/media/platform/renesas/vsp1/vsp1_uds.c
+++ b/drivers/media/platform/renesas/vsp1/vsp1_uds.c
@@ -9,6 +9,7 @@
 
 #include <linux/device.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-subdev.h>
 
diff --git a/drivers/media/platform/renesas/vsp1/vsp1_uif.c b/drivers/media/platform/renesas/vsp1/vsp1_uif.c
index f66936a28a2a..002b0b67d72d 100644
--- a/drivers/media/platform/renesas/vsp1/vsp1_uif.c
+++ b/drivers/media/platform/renesas/vsp1/vsp1_uif.c
@@ -9,6 +9,7 @@
 
 #include <linux/device.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #include <media/media-entity.h>
diff --git a/drivers/media/platform/renesas/vsp1/vsp1_video.c b/drivers/media/platform/renesas/vsp1/vsp1_video.c
index 5a9cb0e5640e..ade84fbab9e3 100644
--- a/drivers/media/platform/renesas/vsp1/vsp1_video.c
+++ b/drivers/media/platform/renesas/vsp1/vsp1_video.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/v4l2-mediabus.h>
 #include <linux/videodev2.h>
 #include <linux/wait.h>
diff --git a/drivers/media/platform/renesas/vsp1/vsp1_wpf.c b/drivers/media/platform/renesas/vsp1/vsp1_wpf.c
index 9693aeab1cac..c7a7292eb07f 100644
--- a/drivers/media/platform/renesas/vsp1/vsp1_wpf.c
+++ b/drivers/media/platform/renesas/vsp1/vsp1_wpf.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-subdev.h>
 
diff --git a/drivers/media/platform/rockchip/rga/rga-buf.c b/drivers/media/platform/rockchip/rga/rga-buf.c
index 662c81b6d0b5..60961009e743 100644
--- a/drivers/media/platform/rockchip/rga/rga-buf.c
+++ b/drivers/media/platform/rockchip/rga/rga-buf.c
@@ -6,6 +6,7 @@
 
 #include <linux/pm_runtime.h>
 #include <linux/scatterlist.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <media/v4l2-common.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/platform/samsung/exynos-gsc/gsc-m2m.c b/drivers/media/platform/samsung/exynos-gsc/gsc-m2m.c
index b7854ce5fb8e..8a536029d510 100644
--- a/drivers/media/platform/samsung/exynos-gsc/gsc-m2m.c
+++ b/drivers/media/platform/samsung/exynos-gsc/gsc-m2m.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/bug.h>
diff --git a/drivers/media/platform/samsung/exynos4-is/fimc-capture.c b/drivers/media/platform/samsung/exynos4-is/fimc-capture.c
index ffa4ea21387d..f76fc2852e3e 100644
--- a/drivers/media/platform/samsung/exynos4-is/fimc-capture.c
+++ b/drivers/media/platform/samsung/exynos4-is/fimc-capture.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/bug.h>
diff --git a/drivers/media/platform/samsung/exynos4-is/fimc-isp.c b/drivers/media/platform/samsung/exynos4-is/fimc-isp.c
index 3c5d7bee2655..272b8b6a7646 100644
--- a/drivers/media/platform/samsung/exynos4-is/fimc-isp.c
+++ b/drivers/media/platform/samsung/exynos4-is/fimc-isp.c
@@ -18,6 +18,7 @@
 #include <linux/printk.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <media/v4l2-device.h>
 
diff --git a/drivers/media/platform/samsung/exynos4-is/fimc-lite.c b/drivers/media/platform/samsung/exynos4-is/fimc-lite.c
index d1d860fa3454..1a846e2f3f5e 100644
--- a/drivers/media/platform/samsung/exynos4-is/fimc-lite.c
+++ b/drivers/media/platform/samsung/exynos4-is/fimc-lite.c
@@ -16,6 +16,7 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/media/platform/samsung/exynos4-is/fimc-m2m.c b/drivers/media/platform/samsung/exynos4-is/fimc-m2m.c
index 199997eec1cc..71a2243f340a 100644
--- a/drivers/media/platform/samsung/exynos4-is/fimc-m2m.c
+++ b/drivers/media/platform/samsung/exynos4-is/fimc-m2m.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/bug.h>
diff --git a/drivers/media/platform/samsung/exynos4-is/media-dev.c b/drivers/media/platform/samsung/exynos4-is/media-dev.c
index 5f10bb4eb4f7..0199bd9988de 100644
--- a/drivers/media/platform/samsung/exynos4-is/media-dev.c
+++ b/drivers/media/platform/samsung/exynos4-is/media-dev.c
@@ -21,6 +21,7 @@
 #include <linux/pinctrl/consumer.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <media/v4l2-async.h>
diff --git a/drivers/media/platform/samsung/exynos4-is/mipi-csis.c b/drivers/media/platform/samsung/exynos4-is/mipi-csis.c
index aae8a8b2c0f4..26661bd681d7 100644
--- a/drivers/media/platform/samsung/exynos4-is/mipi-csis.c
+++ b/drivers/media/platform/samsung/exynos4-is/mipi-csis.c
@@ -25,6 +25,7 @@
 #include <linux/sizes.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <media/drv-intf/exynos-fimc.h>
 #include <media/v4l2-fwnode.h>
diff --git a/drivers/media/platform/samsung/s3c-camif/camif-capture.c b/drivers/media/platform/samsung/s3c-camif/camif-capture.c
index be58260ea67e..9e378742cff6 100644
--- a/drivers/media/platform/samsung/s3c-camif/camif-capture.c
+++ b/drivers/media/platform/samsung/s3c-camif/camif-capture.c
@@ -24,6 +24,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/ratelimit.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/videodev2.h>
 
diff --git a/drivers/media/platform/samsung/s3c-camif/camif-core.c b/drivers/media/platform/samsung/s3c-camif/camif-core.c
index e4529f666e20..bacff60e81c3 100644
--- a/drivers/media/platform/samsung/s3c-camif/camif-core.c
+++ b/drivers/media/platform/samsung/s3c-camif/camif-core.c
@@ -22,6 +22,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include <media/media-device.h>
diff --git a/drivers/media/platform/samsung/s5p-jpeg/jpeg-core.c b/drivers/media/platform/samsung/s5p-jpeg/jpeg-core.c
index d2c4a0178b3c..4b0acb35efe8 100644
--- a/drivers/media/platform/samsung/s5p-jpeg/jpeg-core.c
+++ b/drivers/media/platform/samsung/s5p-jpeg/jpeg-core.c
@@ -20,6 +20,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-mem2mem.h>
diff --git a/drivers/media/platform/samsung/s5p-mfc/s5p_mfc.c b/drivers/media/platform/samsung/s5p-mfc/s5p_mfc.c
index 50451984d59f..501e3cc0662b 100644
--- a/drivers/media/platform/samsung/s5p-mfc/s5p_mfc.c
+++ b/drivers/media/platform/samsung/s5p-mfc/s5p_mfc.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <media/v4l2-event.h>
 #include <linux/workqueue.h>
diff --git a/drivers/media/platform/st/sti/bdisp/bdisp-debug.c b/drivers/media/platform/st/sti/bdisp/bdisp-debug.c
index a27f638df11c..f80986d9eefd 100644
--- a/drivers/media/platform/st/sti/bdisp/bdisp-debug.c
+++ b/drivers/media/platform/st/sti/bdisp/bdisp-debug.c
@@ -6,6 +6,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "bdisp.h"
 #include "bdisp-filter.h"
diff --git a/drivers/media/platform/st/sti/bdisp/bdisp-v4l2.c b/drivers/media/platform/st/sti/bdisp/bdisp-v4l2.c
index 1328b4eb6b9f..496dfa839cb0 100644
--- a/drivers/media/platform/st/sti/bdisp/bdisp-v4l2.c
+++ b/drivers/media/platform/st/sti/bdisp/bdisp-v4l2.c
@@ -11,6 +11,7 @@
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-event.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/platform/st/sti/c8sectpfe/c8sectpfe-core.c b/drivers/media/platform/st/sti/c8sectpfe/c8sectpfe-core.c
index e4cf27b5a072..4579c51aa3bd 100644
--- a/drivers/media/platform/st/sti/c8sectpfe/c8sectpfe-core.c
+++ b/drivers/media/platform/st/sti/c8sectpfe/c8sectpfe-core.c
@@ -30,6 +30,7 @@
 #include <linux/pinctrl/pinctrl.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/usb.h>
 #include <linux/wait.h>
diff --git a/drivers/media/platform/st/sti/delta/delta-debug.c b/drivers/media/platform/st/sti/delta/delta-debug.c
index 4b2eb6b63aa2..709111133e46 100644
--- a/drivers/media/platform/st/sti/delta/delta-debug.c
+++ b/drivers/media/platform/st/sti/delta/delta-debug.c
@@ -8,6 +8,7 @@
 
 #include "delta.h"
 #include "delta-debug.h"
+#include <linux/sprintf.h>
 
 char *delta_streaminfo_str(struct delta_streaminfo *s, char *str,
 			   unsigned int len)
diff --git a/drivers/media/platform/st/sti/delta/delta-ipc.c b/drivers/media/platform/st/sti/delta/delta-ipc.c
index 21d3e08e259a..73adb3f80308 100644
--- a/drivers/media/platform/st/sti/delta/delta-ipc.c
+++ b/drivers/media/platform/st/sti/delta/delta-ipc.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/rpmsg.h>
+#include <linux/completion.h>
 
 #include "delta.h"
 #include "delta-ipc.h"
diff --git a/drivers/media/platform/st/sti/delta/delta-mjpeg-dec.c b/drivers/media/platform/st/sti/delta/delta-mjpeg-dec.c
index 0533d4a083d2..7612b748f202 100644
--- a/drivers/media/platform/st/sti/delta/delta-mjpeg-dec.c
+++ b/drivers/media/platform/st/sti/delta/delta-mjpeg-dec.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "delta.h"
 #include "delta-ipc.h"
diff --git a/drivers/media/platform/st/sti/delta/delta-mjpeg-hdr.c b/drivers/media/platform/st/sti/delta/delta-mjpeg-hdr.c
index 90e5b2f72c82..5c0e899529d0 100644
--- a/drivers/media/platform/st/sti/delta/delta-mjpeg-hdr.c
+++ b/drivers/media/platform/st/sti/delta/delta-mjpeg-hdr.c
@@ -6,6 +6,7 @@
 
 #include "delta.h"
 #include "delta-mjpeg.h"
+#include <linux/sprintf.h>
 
 #define MJPEG_SOF_0  0xc0
 #define MJPEG_SOF_1  0xc1
diff --git a/drivers/media/platform/st/sti/delta/delta-v4l2.c b/drivers/media/platform/st/sti/delta/delta-v4l2.c
index da402d1e9171..c22ca3d57715 100644
--- a/drivers/media/platform/st/sti/delta/delta-v4l2.c
+++ b/drivers/media/platform/st/sti/delta/delta-v4l2.c
@@ -11,6 +11,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-event.h>
diff --git a/drivers/media/platform/st/sti/delta/delta.h b/drivers/media/platform/st/sti/delta/delta.h
index 914556030e70..f94fc0772a63 100644
--- a/drivers/media/platform/st/sti/delta/delta.h
+++ b/drivers/media/platform/st/sti/delta/delta.h
@@ -8,6 +8,7 @@
 #define DELTA_H
 
 #include <linux/rpmsg.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-mem2mem.h>
 
diff --git a/drivers/media/platform/st/sti/hva/hva-debugfs.c b/drivers/media/platform/st/sti/hva/hva-debugfs.c
index a86a07b6fbc7..879c4d440750 100644
--- a/drivers/media/platform/st/sti/hva/hva-debugfs.c
+++ b/drivers/media/platform/st/sti/hva/hva-debugfs.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "hva.h"
 #include "hva-hw.h"
diff --git a/drivers/media/platform/st/sti/hva/hva-hw.c b/drivers/media/platform/st/sti/hva/hva-hw.c
index fe4ea2e7f37e..6f6447869082 100644
--- a/drivers/media/platform/st/sti/hva/hva-hw.c
+++ b/drivers/media/platform/st/sti/hva/hva-hw.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/media/platform/st/sti/hva/hva-v4l2.c b/drivers/media/platform/st/sti/hva/hva-v4l2.c
index 161a5c0fbc4e..779868d2e560 100644
--- a/drivers/media/platform/st/sti/hva/hva-v4l2.c
+++ b/drivers/media/platform/st/sti/hva/hva-v4l2.c
@@ -9,6 +9,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-ioctl.h>
 #include <media/videobuf2-dma-contig.h>
diff --git a/drivers/media/platform/sunxi/sun4i-csi/sun4i_csi.c b/drivers/media/platform/sunxi/sun4i-csi/sun4i_csi.c
index 097a3a08ef7d..6a3454345181 100644
--- a/drivers/media/platform/sunxi/sun4i-csi/sun4i_csi.c
+++ b/drivers/media/platform/sunxi/sun4i-csi/sun4i_csi.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 
 #include <media/v4l2-dev.h>
diff --git a/drivers/media/platform/sunxi/sun6i-csi/sun6i_csi_capture.c b/drivers/media/platform/sunxi/sun6i-csi/sun6i_csi_capture.c
index 14c0dc827c52..48906c82bf3c 100644
--- a/drivers/media/platform/sunxi/sun6i-csi/sun6i_csi_capture.c
+++ b/drivers/media/platform/sunxi/sun6i-csi/sun6i_csi_capture.c
@@ -8,6 +8,7 @@
 
 #include <linux/of.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/platform/sunxi/sun8i-di/sun8i-di.c b/drivers/media/platform/sunxi/sun8i-di/sun8i-di.c
index 954fabec27f6..75a42556061a 100644
--- a/drivers/media/platform/sunxi/sun8i-di/sun8i-di.c
+++ b/drivers/media/platform/sunxi/sun8i-di/sun8i-di.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-device.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/platform/sunxi/sun8i-rotate/sun8i_rotate.c b/drivers/media/platform/sunxi/sun8i-rotate/sun8i_rotate.c
index a12323ca89fa..db37bcdbc181 100644
--- a/drivers/media/platform/sunxi/sun8i-rotate/sun8i_rotate.c
+++ b/drivers/media/platform/sunxi/sun8i-rotate/sun8i_rotate.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-device.h>
 #include <media/v4l2-event.h>
diff --git a/drivers/media/platform/ti/am437x/am437x-vpfe.c b/drivers/media/platform/ti/am437x/am437x-vpfe.c
index 77e12457d149..e5af371247d8 100644
--- a/drivers/media/platform/ti/am437x/am437x-vpfe.c
+++ b/drivers/media/platform/ti/am437x/am437x-vpfe.c
@@ -21,6 +21,7 @@
 #include <linux/slab.h>
 #include <linux/uaccess.h>
 #include <linux/videodev2.h>
+#include <linux/completion.h>
 
 #include <media/v4l2-common.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/platform/ti/cal/cal-camerarx.c b/drivers/media/platform/ti/cal/cal-camerarx.c
index 4afc2ad00330..a2ef869de663 100644
--- a/drivers/media/platform/ti/cal/cal-camerarx.c
+++ b/drivers/media/platform/ti/cal/cal-camerarx.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ctrls.h>
 #include <media/v4l2-fwnode.h>
diff --git a/drivers/media/platform/ti/cal/cal-video.c b/drivers/media/platform/ti/cal/cal-video.c
index e1ba5dfc217e..19c05634d1ef 100644
--- a/drivers/media/platform/ti/cal/cal-video.c
+++ b/drivers/media/platform/ti/cal/cal-video.c
@@ -11,6 +11,7 @@
 
 #include <linux/ioctl.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 
 #include <media/media-device.h>
diff --git a/drivers/media/platform/ti/j721e-csi2rx/j721e-csi2rx.c b/drivers/media/platform/ti/j721e-csi2rx/j721e-csi2rx.c
index 2b078c5d7f5d..fd5e23bc516f 100644
--- a/drivers/media/platform/ti/j721e-csi2rx/j721e-csi2rx.c
+++ b/drivers/media/platform/ti/j721e-csi2rx/j721e-csi2rx.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/module.h>
 #include <linux/of_platform.h>
diff --git a/drivers/media/platform/ti/omap/omap_vout.c b/drivers/media/platform/ti/omap/omap_vout.c
index 1c56b6a87ced..1fb8409fd172 100644
--- a/drivers/media/platform/ti/omap/omap_vout.c
+++ b/drivers/media/platform/ti/omap/omap_vout.c
@@ -31,6 +31,7 @@
 
 #include <linux/init.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/sched.h>
 #include <linux/types.h>
diff --git a/drivers/media/platform/ti/omap3isp/isp.c b/drivers/media/platform/ti/omap3isp/isp.c
index 1cda23244c7b..6e619b792487 100644
--- a/drivers/media/platform/ti/omap3isp/isp.c
+++ b/drivers/media/platform/ti/omap3isp/isp.c
@@ -41,6 +41,7 @@
 
 #include <linux/clk.h>
 #include <linux/clkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/media/platform/ti/omap3isp/ispstat.c b/drivers/media/platform/ti/omap3isp/ispstat.c
index 359a846205b0..7ce36cae6a0d 100644
--- a/drivers/media/platform/ti/omap3isp/ispstat.c
+++ b/drivers/media/platform/ti/omap3isp/ispstat.c
@@ -14,6 +14,7 @@
 
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/media/platform/ti/omap3isp/ispvideo.c b/drivers/media/platform/ti/omap3isp/ispvideo.c
index daca689dc082..46c333c6dd0d 100644
--- a/drivers/media/platform/ti/omap3isp/ispvideo.c
+++ b/drivers/media/platform/ti/omap3isp/ispvideo.c
@@ -17,6 +17,7 @@
 #include <linux/scatterlist.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <media/v4l2-dev.h>
diff --git a/drivers/media/platform/ti/vpe/vpe.c b/drivers/media/platform/ti/vpe/vpe.c
index 6848cbc82f52..6cb8df6de1d8 100644
--- a/drivers/media/platform/ti/vpe/vpe.c
+++ b/drivers/media/platform/ti/vpe/vpe.c
@@ -27,6 +27,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/log2.h>
 #include <linux/sizes.h>
diff --git a/drivers/media/platform/video-mux.c b/drivers/media/platform/video-mux.c
index 31e9e92e723e..8cdaf506d79a 100644
--- a/drivers/media/platform/video-mux.c
+++ b/drivers/media/platform/video-mux.c
@@ -14,6 +14,7 @@
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-async.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-fwnode.h>
diff --git a/drivers/media/platform/xilinx/xilinx-dma.c b/drivers/media/platform/xilinx/xilinx-dma.c
index a96de5d388a1..973a82139961 100644
--- a/drivers/media/platform/xilinx/xilinx-dma.c
+++ b/drivers/media/platform/xilinx/xilinx-dma.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-dev.h>
 #include <media/v4l2-fh.h>
diff --git a/drivers/media/radio/radio-isa.c b/drivers/media/radio/radio-isa.c
index ad49151f5ff0..9754e9c61304 100644
--- a/drivers/media/radio/radio-isa.c
+++ b/drivers/media/radio/radio-isa.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/ioport.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/io.h>
 #include <linux/slab.h>
diff --git a/drivers/media/radio/radio-sf16fmr2.c b/drivers/media/radio/radio-sf16fmr2.c
index d0dde55b7930..a18eea81cdad 100644
--- a/drivers/media/radio/radio-sf16fmr2.c
+++ b/drivers/media/radio/radio-sf16fmr2.c
@@ -15,6 +15,7 @@
 #include <linux/io.h>		/* outb, outb_p			*/
 #include <linux/isa.h>
 #include <linux/pnp.h>
+#include <linux/sprintf.h>
 #include <media/drv-intf/tea575x.h>
 
 MODULE_AUTHOR("Ondrej Zary");
diff --git a/drivers/media/radio/radio-shark.c b/drivers/media/radio/radio-shark.c
index 0c50b3a9623e..74a9bacdea07 100644
--- a/drivers/media/radio/radio-shark.c
+++ b/drivers/media/radio/radio-shark.c
@@ -26,6 +26,7 @@
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/workqueue.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/radio/radio-shark2.c b/drivers/media/radio/radio-shark2.c
index d9ef241e1778..aea5a1bacba4 100644
--- a/drivers/media/radio/radio-shark2.c
+++ b/drivers/media/radio/radio-shark2.c
@@ -26,6 +26,7 @@
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/workqueue.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/radio/radio-tea5764.c b/drivers/media/radio/radio-tea5764.c
index 14e7dd3889ff..7552f7bb6222 100644
--- a/drivers/media/radio/radio-tea5764.c
+++ b/drivers/media/radio/radio-tea5764.c
@@ -22,6 +22,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/init.h>			/* Initdata			*/
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>		/* kernel radio structs		*/
 #include <linux/i2c.h>			/* I2C				*/
 #include <media/v4l2-common.h>
diff --git a/drivers/media/radio/radio-timb.c b/drivers/media/radio/radio-timb.c
index 04daa9c358c2..28f392fd36f0 100644
--- a/drivers/media/radio/radio-timb.c
+++ b/drivers/media/radio/radio-timb.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/radio/radio-wl1273.c b/drivers/media/radio/radio-wl1273.c
index f6b98c304b72..805aad79a6a2 100644
--- a/drivers/media/radio/radio-wl1273.c
+++ b/drivers/media/radio/radio-wl1273.c
@@ -16,6 +16,7 @@
 #include <media/v4l2-ctrls.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-ioctl.h>
+#include <linux/completion.h>
 
 #define DRIVER_DESC "Wl1273 FM Radio"
 
diff --git a/drivers/media/radio/si470x/radio-si470x-common.c b/drivers/media/radio/si470x/radio-si470x-common.c
index dc0c1d8d23f0..62a59068a18c 100644
--- a/drivers/media/radio/si470x/radio-si470x-common.c
+++ b/drivers/media/radio/si470x/radio-si470x-common.c
@@ -100,6 +100,7 @@
 
 /* kernel includes */
 #include "radio-si470x.h"
+#include <linux/completion.h>
 
 /**************************************************************************
  * Module Parameters
diff --git a/drivers/media/radio/si470x/radio-si470x-i2c.c b/drivers/media/radio/si470x/radio-si470x-i2c.c
index fd449e42c191..e39275242610 100644
--- a/drivers/media/radio/si470x/radio-si470x-i2c.c
+++ b/drivers/media/radio/si470x/radio-si470x-i2c.c
@@ -21,6 +21,7 @@
 #include <linux/delay.h>
 #include <linux/gpio/consumer.h>
 #include <linux/interrupt.h>
+#include <linux/completion.h>
 
 #include "radio-si470x.h"
 
diff --git a/drivers/media/radio/si470x/radio-si470x-usb.c b/drivers/media/radio/si470x/radio-si470x-usb.c
index aa7a580dbecc..4359e5755279 100644
--- a/drivers/media/radio/si470x/radio-si470x-usb.c
+++ b/drivers/media/radio/si470x/radio-si470x-usb.c
@@ -24,6 +24,7 @@
 #include <linux/usb.h>
 #include <linux/hid.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "radio-si470x.h"
 
diff --git a/drivers/media/radio/si4713/si4713.c b/drivers/media/radio/si4713/si4713.c
index ddaf7a60b7d0..94f6256449b5 100644
--- a/drivers/media/radio/si4713/si4713.c
+++ b/drivers/media/radio/si4713/si4713.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/gpio/consumer.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-common.h>
diff --git a/drivers/media/radio/wl128x/fmdrv_common.c b/drivers/media/radio/wl128x/fmdrv_common.c
index 3da8e5102bec..63497c95546c 100644
--- a/drivers/media/radio/wl128x/fmdrv_common.c
+++ b/drivers/media/radio/wl128x/fmdrv_common.c
@@ -24,6 +24,8 @@
 #include <linux/module.h>
 #include <linux/nospec.h>
 #include <linux/jiffies.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "fmdrv.h"
 #include "fmdrv_v4l2.h"
diff --git a/drivers/media/radio/wl128x/fmdrv_rx.c b/drivers/media/radio/wl128x/fmdrv_rx.c
index 419cf2e03bcf..87872ad2cedc 100644
--- a/drivers/media/radio/wl128x/fmdrv_rx.c
+++ b/drivers/media/radio/wl128x/fmdrv_rx.c
@@ -11,6 +11,7 @@
 #include "fmdrv.h"
 #include "fmdrv_common.h"
 #include "fmdrv_rx.h"
+#include <linux/completion.h>
 
 void fm_rx_reset_rds_cache(struct fmdev *fmdev)
 {
diff --git a/drivers/media/radio/wl128x/fmdrv_tx.c b/drivers/media/radio/wl128x/fmdrv_tx.c
index c589de02f4f5..216e667f6030 100644
--- a/drivers/media/radio/wl128x/fmdrv_tx.c
+++ b/drivers/media/radio/wl128x/fmdrv_tx.c
@@ -10,6 +10,7 @@
 #include "fmdrv.h"
 #include "fmdrv_common.h"
 #include "fmdrv_tx.h"
+#include <linux/completion.h>
 
 int fm_tx_set_stereo_mono(struct fmdev *fmdev, u16 mode)
 {
diff --git a/drivers/media/radio/wl128x/fmdrv_v4l2.c b/drivers/media/radio/wl128x/fmdrv_v4l2.c
index 1c146d14dbbd..30bc5c7965c1 100644
--- a/drivers/media/radio/wl128x/fmdrv_v4l2.c
+++ b/drivers/media/radio/wl128x/fmdrv_v4l2.c
@@ -16,6 +16,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include "fmdrv.h"
 #include "fmdrv_v4l2.h"
diff --git a/drivers/media/rc/ati_remote.c b/drivers/media/rc/ati_remote.c
index d7721e60776e..818ea0cb6284 100644
--- a/drivers/media/rc/ati_remote.c
+++ b/drivers/media/rc/ati_remote.c
@@ -78,6 +78,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 #include <linux/wait.h>
 #include <linux/jiffies.h>
diff --git a/drivers/media/rc/bpf-lirc.c b/drivers/media/rc/bpf-lirc.c
index 2f7564f26445..da832fe6cb91 100644
--- a/drivers/media/rc/bpf-lirc.c
+++ b/drivers/media/rc/bpf-lirc.c
@@ -7,6 +7,7 @@
 #include <linux/filter.h>
 #include <linux/bpf_lirc.h>
 #include "rc-core-priv.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #define lirc_rcu_dereference(p)						\
 	rcu_dereference_protected(p, lockdep_is_held(&ir_raw_handler_lock))
diff --git a/drivers/media/rc/ene_ir.c b/drivers/media/rc/ene_ir.c
index 11ee21a7db8f..822e9d27a4ac 100644
--- a/drivers/media/rc/ene_ir.c
+++ b/drivers/media/rc/ene_ir.c
@@ -26,6 +26,7 @@
 #include <linux/slab.h>
 #include <media/rc-core.h>
 #include "ene_ir.h"
+#include <linux/completion.h>
 
 static int sample_period;
 static bool learning_mode_force;
diff --git a/drivers/media/rc/iguanair.c b/drivers/media/rc/iguanair.c
index 276bf3c8a8cb..8169567f9126 100644
--- a/drivers/media/rc/iguanair.c
+++ b/drivers/media/rc/iguanair.c
@@ -8,6 +8,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/input.h>
 #include <linux/slab.h>
diff --git a/drivers/media/rc/imon.c b/drivers/media/rc/imon.c
index 5719dda6e0f0..49826b97341f 100644
--- a/drivers/media/rc/imon.c
+++ b/drivers/media/rc/imon.c
@@ -21,8 +21,10 @@
 #include <linux/ktime.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/ratelimit.h>
+#include <linux/completion.h>
 
 #include <linux/input.h>
 #include <linux/usb.h>
diff --git a/drivers/media/rc/ir_toy.c b/drivers/media/rc/ir_toy.c
index 69e630d85262..5978574495e4 100644
--- a/drivers/media/rc/ir_toy.c
+++ b/drivers/media/rc/ir_toy.c
@@ -15,6 +15,7 @@
 #include <asm/unaligned.h>
 #include <linux/completion.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/usb.h>
 #include <linux/slab.h>
diff --git a/drivers/media/rc/mceusb.c b/drivers/media/rc/mceusb.c
index c76ba24c1f55..e5e23295d49b 100644
--- a/drivers/media/rc/mceusb.c
+++ b/drivers/media/rc/mceusb.c
@@ -25,11 +25,13 @@
 #include <linux/device.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/usb.h>
 #include <linux/usb/input.h>
 #include <linux/pm_wakeup.h>
 #include <media/rc-core.h>
+#include <linux/completion.h>
 
 #define DRIVER_VERSION	"1.95"
 #define DRIVER_AUTHOR	"Jarod Wilson <jarod@redhat.com>"
diff --git a/drivers/media/rc/meson-ir-tx.c b/drivers/media/rc/meson-ir-tx.c
index fded2c256f2a..5acda210d486 100644
--- a/drivers/media/rc/meson-ir-tx.c
+++ b/drivers/media/rc/meson-ir-tx.c
@@ -16,6 +16,7 @@
 #include <linux/spinlock.h>
 #include <linux/of_irq.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <media/rc-core.h>
 
diff --git a/drivers/media/rc/nuvoton-cir.c b/drivers/media/rc/nuvoton-cir.c
index 2214d41ef579..a46ed47e83dd 100644
--- a/drivers/media/rc/nuvoton-cir.c
+++ b/drivers/media/rc/nuvoton-cir.c
@@ -23,12 +23,14 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pnp.h>
 #include <linux/io.h>
 #include <linux/interrupt.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <media/rc-core.h>
 #include <linux/pci_ids.h>
 
diff --git a/drivers/media/rc/rc-main.c b/drivers/media/rc/rc-main.c
index 6bdad6341844..9006eea48037 100644
--- a/drivers/media/rc/rc-main.c
+++ b/drivers/media/rc/rc-main.c
@@ -7,6 +7,7 @@
 
 #include <media/rc-core.h>
 #include <linux/bsearch.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
 #include <linux/delay.h>
 #include <linux/input.h>
@@ -16,6 +17,7 @@
 #include <linux/device.h>
 #include <linux/module.h>
 #include "rc-core-priv.h"
+#include <linux/sprintf.h>
 
 /* Sizes are in bytes, 256 bytes allows for 32 entries on x64 */
 #define IR_TAB_MIN_SIZE	256
diff --git a/drivers/media/rc/redrat3.c b/drivers/media/rc/redrat3.c
index 9f2947af33aa..6e0670090093 100644
--- a/drivers/media/rc/redrat3.c
+++ b/drivers/media/rc/redrat3.c
@@ -36,6 +36,7 @@
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/input.h>
 #include <media/rc-core.h>
diff --git a/drivers/media/rc/xbox_remote.c b/drivers/media/rc/xbox_remote.c
index a1572381d097..53dfddb0c1f2 100644
--- a/drivers/media/rc/xbox_remote.c
+++ b/drivers/media/rc/xbox_remote.c
@@ -16,6 +16,7 @@
 
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 #include <media/rc-core.h>
 
diff --git a/drivers/media/test-drivers/vicodec/codec-v4l2-fwht.c b/drivers/media/test-drivers/vicodec/codec-v4l2-fwht.c
index 0c83678fcdad..228304c83bed 100644
--- a/drivers/media/test-drivers/vicodec/codec-v4l2-fwht.c
+++ b/drivers/media/test-drivers/vicodec/codec-v4l2-fwht.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/printk.h> // for pr_err()
 #include <linux/string.h>
 #include <linux/videodev2.h>
 #include "codec-v4l2-fwht.h"
diff --git a/drivers/media/test-drivers/vicodec/vicodec-core.c b/drivers/media/test-drivers/vicodec/vicodec-core.c
index e13f5452b927..2f8b08208c03 100644
--- a/drivers/media/test-drivers/vicodec/vicodec-core.c
+++ b/drivers/media/test-drivers/vicodec/vicodec-core.c
@@ -14,6 +14,7 @@
 #include <linux/fs.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_device.h>
 #include <media/v4l2-mem2mem.h>
diff --git a/drivers/media/test-drivers/vim2m.c b/drivers/media/test-drivers/vim2m.c
index 3e3b424b4860..3ecca9bd5a14 100644
--- a/drivers/media/test-drivers/vim2m.c
+++ b/drivers/media/test-drivers/vim2m.c
@@ -18,6 +18,7 @@
 #include <linux/fs.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_device.h>
 #include <media/v4l2-mem2mem.h>
diff --git a/drivers/media/test-drivers/vimc/vimc-capture.c b/drivers/media/test-drivers/vimc/vimc-capture.c
index 2a2d19d23bab..5a408f178312 100644
--- a/drivers/media/test-drivers/vimc/vimc-capture.c
+++ b/drivers/media/test-drivers/vimc/vimc-capture.c
@@ -9,6 +9,7 @@
 #include <media/videobuf2-core.h>
 #include <media/videobuf2-dma-contig.h>
 #include <media/videobuf2-vmalloc.h>
+#include <linux/sprintf.h>
 
 #include "vimc-common.h"
 #include "vimc-streamer.h"
diff --git a/drivers/media/test-drivers/vimc/vimc-core.c b/drivers/media/test-drivers/vimc/vimc-core.c
index af127476e920..3ce6b2f68524 100644
--- a/drivers/media/test-drivers/vimc/vimc-core.c
+++ b/drivers/media/test-drivers/vimc/vimc-core.c
@@ -10,6 +10,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <media/media-device.h>
 #include <media/tpg/v4l2-tpg.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/test-drivers/vimc/vimc-sensor.c b/drivers/media/test-drivers/vimc/vimc-sensor.c
index 5e34b1aed95e..35c7448db15c 100644
--- a/drivers/media/test-drivers/vimc/vimc-sensor.c
+++ b/drivers/media/test-drivers/vimc/vimc-sensor.c
@@ -11,6 +11,7 @@
 #include <media/v4l2-event.h>
 #include <media/v4l2-subdev.h>
 #include <media/tpg/v4l2-tpg.h>
+#include <linux/sprintf.h>
 
 #include "vimc-common.h"
 
diff --git a/drivers/media/test-drivers/visl/visl-debugfs.c b/drivers/media/test-drivers/visl/visl-debugfs.c
index 45f2a8268014..96456bcca58c 100644
--- a/drivers/media/test-drivers/visl/visl-debugfs.c
+++ b/drivers/media/test-drivers/visl/visl-debugfs.c
@@ -11,6 +11,7 @@
 #include <linux/debugfs.h>
 #include <linux/list.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-mem2mem.h>
 
 #include "visl-debugfs.h"
diff --git a/drivers/media/test-drivers/visl/visl-dec.c b/drivers/media/test-drivers/visl/visl-dec.c
index f21260054e0f..9fcc1185eab8 100644
--- a/drivers/media/test-drivers/visl/visl-dec.c
+++ b/drivers/media/test-drivers/visl/visl-dec.c
@@ -14,6 +14,7 @@
 #include "visl-trace-h264.h"
 #include "visl-trace-hevc.h"
 #include "visl-trace-av1.h"
+#include <linux/sprintf.h>
 
 #include <linux/delay.h>
 #include <linux/workqueue.h>
diff --git a/drivers/media/test-drivers/visl/visl-video.c b/drivers/media/test-drivers/visl/visl-video.c
index b9a4b44bd0ed..73fce2a65097 100644
--- a/drivers/media/test-drivers/visl/visl-video.c
+++ b/drivers/media/test-drivers/visl/visl-video.c
@@ -5,6 +5,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/font.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-event.h>
 #include <media/v4l2-ioctl.h>
 #include <media/videobuf2-vmalloc.h>
diff --git a/drivers/media/test-drivers/vivid/vivid-cec.c b/drivers/media/test-drivers/vivid/vivid-cec.c
index 1f7469ff04d5..cb6c46a50ed2 100644
--- a/drivers/media/test-drivers/vivid/vivid-cec.c
+++ b/drivers/media/test-drivers/vivid/vivid-cec.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <media/cec.h>
 
 #include "vivid-core.h"
diff --git a/drivers/media/test-drivers/vivid/vivid-core.c b/drivers/media/test-drivers/vivid/vivid-core.c
index 159c72cbb5bf..53b5611ac6e2 100644
--- a/drivers/media/test-drivers/vivid/vivid-core.c
+++ b/drivers/media/test-drivers/vivid/vivid-core.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/font.h>
 #include <linux/mutex.h>
diff --git a/drivers/media/test-drivers/vivid/vivid-kthread-cap.c b/drivers/media/test-drivers/vivid/vivid-kthread-cap.c
index 42048727d7ff..6a173eda2e41 100644
--- a/drivers/media/test-drivers/vivid/vivid-kthread-cap.c
+++ b/drivers/media/test-drivers/vivid/vivid-kthread-cap.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/font.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/kthread.h>
 #include <linux/freezer.h>
diff --git a/drivers/media/test-drivers/vivid/vivid-rds-gen.c b/drivers/media/test-drivers/vivid/vivid-rds-gen.c
index c57771119a34..337d486cff00 100644
--- a/drivers/media/test-drivers/vivid/vivid-rds-gen.c
+++ b/drivers/media/test-drivers/vivid/vivid-rds-gen.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/ktime.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/videodev2.h>
 
diff --git a/drivers/media/test-drivers/vivid/vivid-vid-cap.c b/drivers/media/test-drivers/vivid/vivid-vid-cap.c
index 2804975fe278..6570902a189b 100644
--- a/drivers/media/test-drivers/vivid/vivid-vid-cap.c
+++ b/drivers/media/test-drivers/vivid/vivid-vid-cap.c
@@ -8,6 +8,7 @@
 #include <linux/errno.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/videodev2.h>
 #include <linux/v4l2-dv-timings.h>
diff --git a/drivers/media/test-drivers/vivid/vivid-vid-out.c b/drivers/media/test-drivers/vivid/vivid-vid-out.c
index 1653b2988f7e..c016e3ede8a1 100644
--- a/drivers/media/test-drivers/vivid/vivid-vid-out.c
+++ b/drivers/media/test-drivers/vivid/vivid-vid-out.c
@@ -8,6 +8,7 @@
 #include <linux/errno.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/v4l2-dv-timings.h>
 #include <media/v4l2-common.h>
diff --git a/drivers/media/usb/au0828/au0828-input.c b/drivers/media/usb/au0828/au0828-input.c
index 3d3368202cd0..c3f1b36d7a08 100644
--- a/drivers/media/usb/au0828/au0828-input.c
+++ b/drivers/media/usb/au0828/au0828-input.c
@@ -7,6 +7,7 @@
 // Based on em28xx-input.c.
 
 #include "au0828.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/media/usb/cx231xx/cx231xx-417.c b/drivers/media/usb/cx231xx/cx231xx-417.c
index 343a4433ed24..a0a585c22b36 100644
--- a/drivers/media/usb/cx231xx/cx231xx-417.c
+++ b/drivers/media/usb/cx231xx/cx231xx-417.c
@@ -12,6 +12,7 @@
  */
 
 #include "cx231xx.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/media/usb/cx231xx/cx231xx-cards.c b/drivers/media/usb/cx231xx/cx231xx-cards.c
index b314603932d7..e6803a89f3ad 100644
--- a/drivers/media/usb/cx231xx/cx231xx-cards.c
+++ b/drivers/media/usb/cx231xx/cx231xx-cards.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/delay.h>
 #include <linux/i2c.h>
+#include <linux/sprintf.h>
 #include <media/tuner.h>
 #include <media/tveeprom.h>
 #include <media/v4l2-common.h>
diff --git a/drivers/media/usb/cx231xx/cx231xx-i2c.c b/drivers/media/usb/cx231xx/cx231xx-i2c.c
index c6659253c6fb..13f68fed89a2 100644
--- a/drivers/media/usb/cx231xx/cx231xx-i2c.c
+++ b/drivers/media/usb/cx231xx/cx231xx-i2c.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/i2c.h>
 #include <linux/i2c-mux.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <media/tuner.h>
 
diff --git a/drivers/media/usb/cx231xx/cx231xx-video.c b/drivers/media/usb/cx231xx/cx231xx-video.c
index 8f347bbeeb32..33fe74a851ac 100644
--- a/drivers/media/usb/cx231xx/cx231xx-video.c
+++ b/drivers/media/usb/cx231xx/cx231xx-video.c
@@ -20,6 +20,7 @@
 #include <linux/mm.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-common.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/media/usb/dvb-usb-v2/usb_urb.c b/drivers/media/usb/dvb-usb-v2/usb_urb.c
index 2ad2ddeaff51..4036e6866b5d 100644
--- a/drivers/media/usb/dvb-usb-v2/usb_urb.c
+++ b/drivers/media/usb/dvb-usb-v2/usb_urb.c
@@ -10,6 +10,7 @@
  * Hybrid USB devices (analog and DVB).
  */
 #include "dvb_usb_common.h"
+#include <linux/completion.h>
 
 /* URB stuff for streaming */
 
diff --git a/drivers/media/usb/dvb-usb/cxusb-analog.c b/drivers/media/usb/dvb-usb/cxusb-analog.c
index b5d8c6b75ae1..b705add7ce40 100644
--- a/drivers/media/usb/dvb-usb/cxusb-analog.c
+++ b/drivers/media/usb/dvb-usb/cxusb-analog.c
@@ -22,6 +22,7 @@
 //  * controls support
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/slab.h>
 #include <linux/string.h>
diff --git a/drivers/media/usb/dvb-usb/usb-urb.c b/drivers/media/usb/dvb-usb/usb-urb.c
index 9771f0954c69..9dd9a0083262 100644
--- a/drivers/media/usb/dvb-usb/usb-urb.c
+++ b/drivers/media/usb/dvb-usb/usb-urb.c
@@ -10,6 +10,7 @@
  * Hybrid USB devices (analog and DVB).
  */
 #include "dvb-usb-common.h"
+#include <linux/completion.h>
 
 /* URB stuff for streaming */
 static void usb_urb_complete(struct urb *urb)
diff --git a/drivers/media/usb/em28xx/em28xx-audio.c b/drivers/media/usb/em28xx/em28xx-audio.c
index ce1b0d9e0741..5f2d8bb153af 100644
--- a/drivers/media/usb/em28xx/em28xx-audio.c
+++ b/drivers/media/usb/em28xx/em28xx-audio.c
@@ -12,6 +12,7 @@
 // and inherits all the copyrights
 
 #include "em28xx.h"
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/usb.h>
diff --git a/drivers/media/usb/em28xx/em28xx-cards.c b/drivers/media/usb/em28xx/em28xx-cards.c
index e6b4d69f5874..5cd13792ddda 100644
--- a/drivers/media/usb/em28xx/em28xx-cards.c
+++ b/drivers/media/usb/em28xx/em28xx-cards.c
@@ -10,6 +10,7 @@
 // Copyright (C) 2012 Frank Schfer <fschaefer.oss@googlemail.com>
 
 #include "em28xx.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/drivers/media/usb/em28xx/em28xx-video.c b/drivers/media/usb/em28xx/em28xx-video.c
index 4aef584e21da..d700a3133fb8 100644
--- a/drivers/media/usb/em28xx/em28xx-video.c
+++ b/drivers/media/usb/em28xx/em28xx-video.c
@@ -13,6 +13,7 @@
 //		by Luca Risolia <luca.risolia@studio.unibo.it>
 
 #include "em28xx.h"
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/list.h>
diff --git a/drivers/media/usb/go7007/go7007-usb.c b/drivers/media/usb/go7007/go7007-usb.c
index eeb85981e02b..0e296569b4d5 100644
--- a/drivers/media/usb/go7007/go7007-usb.c
+++ b/drivers/media/usb/go7007/go7007-usb.c
@@ -7,6 +7,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/list.h>
 #include <linux/slab.h>
diff --git a/drivers/media/usb/gspca/gspca.c b/drivers/media/usb/gspca/gspca.c
index e8c8bdb9c40b..3434a85e0bdf 100644
--- a/drivers/media/usb/gspca/gspca.c
+++ b/drivers/media/usb/gspca/gspca.c
@@ -14,6 +14,7 @@
 
 #include <linux/init.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
diff --git a/drivers/media/usb/pvrusb2/pvrusb2-ctrl.c b/drivers/media/usb/pvrusb2/pvrusb2-ctrl.c
index 8ae3ad80cccb..02acd989624c 100644
--- a/drivers/media/usb/pvrusb2/pvrusb2-ctrl.c
+++ b/drivers/media/usb/pvrusb2/pvrusb2-ctrl.c
@@ -7,6 +7,8 @@
 #include "pvrusb2-ctrl.h"
 #include "pvrusb2-hdw-internal.h"
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mutex.h>
 
diff --git a/drivers/media/usb/pvrusb2/pvrusb2-debugifc.c b/drivers/media/usb/pvrusb2/pvrusb2-debugifc.c
index 84cfb5ce8b8d..a4ad4f0b0c18 100644
--- a/drivers/media/usb/pvrusb2/pvrusb2-debugifc.c
+++ b/drivers/media/usb/pvrusb2/pvrusb2-debugifc.c
@@ -4,6 +4,8 @@
  *  Copyright (C) 2005 Mike Isely <isely@pobox.com>
  */
 
+#include <linux/hex.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include "pvrusb2-debugifc.h"
 #include "pvrusb2-hdw.h"
diff --git a/drivers/media/usb/pvrusb2/pvrusb2-hdw.c b/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
index 29cc207194b9..18018b4b1cf8 100644
--- a/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
+++ b/drivers/media/usb/pvrusb2/pvrusb2-hdw.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/module.h>
@@ -27,6 +28,7 @@
 #include "pvrusb2-cx2584x-v4l.h"
 #include "pvrusb2-cs53l32a.h"
 #include "pvrusb2-audio.h"
+#include <linux/completion.h>
 
 #define TV_MIN_FREQ     55250000L
 #define TV_MAX_FREQ    850000000L
diff --git a/drivers/media/usb/pvrusb2/pvrusb2-std.c b/drivers/media/usb/pvrusb2/pvrusb2-std.c
index e7ab41401577..827ba216d76d 100644
--- a/drivers/media/usb/pvrusb2/pvrusb2-std.c
+++ b/drivers/media/usb/pvrusb2/pvrusb2-std.c
@@ -8,6 +8,7 @@
 #include "pvrusb2-debug.h"
 #include <asm/string.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct std_name {
 	const char *name;
diff --git a/drivers/media/usb/pvrusb2/pvrusb2-sysfs.c b/drivers/media/usb/pvrusb2/pvrusb2-sysfs.c
index 3077399901aa..0eff8ffdcf1d 100644
--- a/drivers/media/usb/pvrusb2/pvrusb2-sysfs.c
+++ b/drivers/media/usb/pvrusb2/pvrusb2-sysfs.c
@@ -9,6 +9,7 @@
 #include "pvrusb2-sysfs.h"
 #include "pvrusb2-hdw.h"
 #include "pvrusb2-debug.h"
+#include <linux/sprintf.h>
 #ifdef CONFIG_VIDEO_PVRUSB2_DEBUGIFC
 #include "pvrusb2-debugifc.h"
 #endif /* CONFIG_VIDEO_PVRUSB2_DEBUGIFC */
diff --git a/drivers/media/usb/pvrusb2/pvrusb2-v4l2.c b/drivers/media/usb/pvrusb2/pvrusb2-v4l2.c
index c04ab7258d64..cacd207ffce7 100644
--- a/drivers/media/usb/pvrusb2/pvrusb2-v4l2.c
+++ b/drivers/media/usb/pvrusb2/pvrusb2-v4l2.c
@@ -13,6 +13,7 @@
 #include "pvrusb2-debug.h"
 #include "pvrusb2-v4l2.h"
 #include "pvrusb2-ioread.h"
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/module.h>
 #include <media/v4l2-dev.h>
diff --git a/drivers/media/usb/pwc/pwc-if.c b/drivers/media/usb/pwc/pwc-if.c
index e342199711d3..e62eda9f55aa 100644
--- a/drivers/media/usb/pwc/pwc-if.c
+++ b/drivers/media/usb/pwc/pwc-if.c
@@ -47,6 +47,7 @@
 
 #include <linux/errno.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/poll.h>
diff --git a/drivers/media/usb/siano/smsusb.c b/drivers/media/usb/siano/smsusb.c
index 9d9e14c858e6..6b6555fe4afb 100644
--- a/drivers/media/usb/siano/smsusb.c
+++ b/drivers/media/usb/siano/smsusb.c
@@ -9,6 +9,7 @@ Copyright (C) 2005-2009, Uri Shkolnik, Anatoly Greenblat
 ****************************************************************/
 
 #include "smscoreapi.h"
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/media/usb/stk1160/stk1160-v4l.c b/drivers/media/usb/stk1160/stk1160-v4l.c
index a1f785a5ffd8..e0c11d5eed7c 100644
--- a/drivers/media/usb/stk1160/stk1160-v4l.c
+++ b/drivers/media/usb/stk1160/stk1160-v4l.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/media/usb/usbtv/usbtv-audio.c b/drivers/media/usb/usbtv/usbtv-audio.c
index 333bd305a4f9..aba4afcc07e0 100644
--- a/drivers/media/usb/usbtv/usbtv-audio.c
+++ b/drivers/media/usb/usbtv/usbtv-audio.c
@@ -40,6 +40,7 @@
 #include <sound/initval.h>
 #include <sound/ac97_codec.h>
 #include <sound/pcm_params.h>
+#include <linux/sprintf.h>
 
 #include "usbtv.h"
 
diff --git a/drivers/media/usb/uvc/uvc_debugfs.c b/drivers/media/usb/uvc/uvc_debugfs.c
index 1a1258d4ffca..8c57a551b64c 100644
--- a/drivers/media/usb/uvc/uvc_debugfs.c
+++ b/drivers/media/usb/uvc/uvc_debugfs.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #include "uvcvideo.h"
diff --git a/drivers/media/usb/uvc/uvc_driver.c b/drivers/media/usb/uvc/uvc_driver.c
index bbd90123a4e7..2a917a77920a 100644
--- a/drivers/media/usb/uvc/uvc_driver.c
+++ b/drivers/media/usb/uvc/uvc_driver.c
@@ -13,6 +13,7 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/uvc.h>
 #include <linux/videodev2.h>
diff --git a/drivers/media/usb/uvc/uvc_video.c b/drivers/media/usb/uvc/uvc_video.c
index 7cbf4692bd87..83130c5d8a19 100644
--- a/drivers/media/usb/uvc/uvc_video.c
+++ b/drivers/media/usb/uvc/uvc_video.c
@@ -12,6 +12,7 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/hcd.h>
 #include <linux/videodev2.h>
diff --git a/drivers/media/v4l2-core/v4l2-async.c b/drivers/media/v4l2-core/v4l2-async.c
index 3ec323bd528b..cb47b65b9840 100644
--- a/drivers/media/v4l2-core/v4l2-async.c
+++ b/drivers/media/v4l2-core/v4l2-async.c
@@ -18,6 +18,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/types.h>
+#include <linux/completion.h>
 
 #include <media/v4l2-async.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/media/v4l2-core/v4l2-dev.c b/drivers/media/v4l2-core/v4l2-dev.c
index d13954bd31fd..e34f81711f08 100644
--- a/drivers/media/v4l2-core/v4l2-dev.c
+++ b/drivers/media/v4l2-core/v4l2-dev.c
@@ -15,7 +15,9 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
diff --git a/drivers/media/v4l2-core/v4l2-device.c b/drivers/media/v4l2-core/v4l2-device.c
index d2e58ae91f9b..161bbc1be0e5 100644
--- a/drivers/media/v4l2-core/v4l2-device.c
+++ b/drivers/media/v4l2-core/v4l2-device.c
@@ -10,6 +10,7 @@
 #include <linux/ioctl.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <media/v4l2-device.h>
 #include <media/v4l2-ctrls.h>
diff --git a/drivers/media/v4l2-core/v4l2-h264.c b/drivers/media/v4l2-core/v4l2-h264.c
index c00197d095e7..1131be28db5c 100644
--- a/drivers/media/v4l2-core/v4l2-h264.c
+++ b/drivers/media/v4l2-core/v4l2-h264.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/sort.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-h264.h>
 
diff --git a/drivers/media/v4l2-core/v4l2-i2c.c b/drivers/media/v4l2-core/v4l2-i2c.c
index b4acca75644b..dd357b8b3599 100644
--- a/drivers/media/v4l2-core/v4l2-i2c.c
+++ b/drivers/media/v4l2-core/v4l2-i2c.c
@@ -5,6 +5,7 @@
 
 #include <linux/i2c.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <media/v4l2-device.h>
 
diff --git a/drivers/media/v4l2-core/v4l2-ioctl.c b/drivers/media/v4l2-core/v4l2-ioctl.c
index 33076af4dfdb..393b1cb07dc0 100644
--- a/drivers/media/v4l2-core/v4l2-ioctl.c
+++ b/drivers/media/v4l2-core/v4l2-ioctl.c
@@ -9,9 +9,11 @@
  */
 
 #include <linux/compat.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/version.h>
diff --git a/drivers/media/v4l2-core/v4l2-mem2mem.c b/drivers/media/v4l2-core/v4l2-mem2mem.c
index 75517134a5e9..f3d9ea19eca7 100644
--- a/drivers/media/v4l2-core/v4l2-mem2mem.c
+++ b/drivers/media/v4l2-core/v4l2-mem2mem.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/media-device.h>
 #include <media/videobuf2-v4l2.h>
diff --git a/drivers/media/v4l2-core/v4l2-spi.c b/drivers/media/v4l2-core/v4l2-spi.c
index a7092c3930d6..143bb392525c 100644
--- a/drivers/media/v4l2-core/v4l2-spi.c
+++ b/drivers/media/v4l2-core/v4l2-spi.c
@@ -5,6 +5,7 @@
 
 #include <linux/module.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <media/v4l2-device.h>
 
diff --git a/drivers/media/v4l2-core/v4l2-subdev.c b/drivers/media/v4l2-core/v4l2-subdev.c
index 4c6198c48dd6..61f3b83fd7c4 100644
--- a/drivers/media/v4l2-core/v4l2-subdev.c
+++ b/drivers/media/v4l2-core/v4l2-subdev.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/overflow.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/version.h>
diff --git a/drivers/memory/brcmstb_dpfe.c b/drivers/memory/brcmstb_dpfe.c
index 5028467b2dc9..2a8a16ac2f2f 100644
--- a/drivers/memory/brcmstb_dpfe.c
+++ b/drivers/memory/brcmstb_dpfe.c
@@ -31,9 +31,11 @@
 #include <linux/delay.h>
 #include <linux/firmware.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define DRVNAME			"brcmstb-dpfe"
 
diff --git a/drivers/memory/brcmstb_memc.c b/drivers/memory/brcmstb_memc.c
index ea9213f7152e..e37e063fb6d1 100644
--- a/drivers/memory/brcmstb_memc.c
+++ b/drivers/memory/brcmstb_memc.c
@@ -7,10 +7,12 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #define REG_MEMC_CNTRLR_CONFIG		0x00
 #define  CNTRLR_CONFIG_LPDDR4_SHIFT	5
diff --git a/drivers/memory/bt1-l2-ctl.c b/drivers/memory/bt1-l2-ctl.c
index 78bd71b203f2..20ca1bc5bbb4 100644
--- a/drivers/memory/bt1-l2-ctl.c
+++ b/drivers/memory/bt1-l2-ctl.c
@@ -9,8 +9,10 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/platform_device.h>
diff --git a/drivers/memory/tegra/tegra186.c b/drivers/memory/tegra/tegra186.c
index 1b3183951bfe..5d7b5ba86dc5 100644
--- a/drivers/memory/tegra/tegra186.c
+++ b/drivers/memory/tegra/tegra186.c
@@ -10,6 +10,7 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <soc/tegra/mc.h>
 
diff --git a/drivers/memory/tegra/tegra20.c b/drivers/memory/tegra/tegra20.c
index aa4b97d5e732..8c67551448b7 100644
--- a/drivers/memory/tegra/tegra20.c
+++ b/drivers/memory/tegra/tegra20.c
@@ -9,6 +9,7 @@
 #include <linux/mutex.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <dt-bindings/memory/tegra20-mc.h>
diff --git a/drivers/memory/tegra/tegra234.c b/drivers/memory/tegra/tegra234.c
index abff87f917cb..cf595c6460ed 100644
--- a/drivers/memory/tegra/tegra234.c
+++ b/drivers/memory/tegra/tegra234.c
@@ -6,6 +6,7 @@
 #include <soc/tegra/mc.h>
 
 #include <dt-bindings/memory/tegra234-mc.h>
+#include <linux/device.h>
 #include <linux/interconnect.h>
 #include <linux/tegra-icc.h>
 
diff --git a/drivers/memstick/core/memstick.c b/drivers/memstick/core/memstick.c
index 23fea51ecbdd..723835d1323d 100644
--- a/drivers/memstick/core/memstick.c
+++ b/drivers/memstick/core/memstick.c
@@ -15,6 +15,8 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "memstick"
 
diff --git a/drivers/memstick/core/ms_block.c b/drivers/memstick/core/ms_block.c
index 04115cd92433..0e52156a6a5f 100644
--- a/drivers/memstick/core/ms_block.c
+++ b/drivers/memstick/core/ms_block.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/blk-mq.h>
+#include <linux/completion.h>
 #include <linux/memstick.h>
 #include <linux/idr.h>
 #include <linux/hdreg.h>
@@ -21,6 +22,7 @@
 #include <linux/bitmap.h>
 #include <linux/scatterlist.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/mutex.h>
 #include "ms_block.h"
diff --git a/drivers/memstick/core/mspro_block.c b/drivers/memstick/core/mspro_block.c
index 5a69ed33999b..f1565f9a35d0 100644
--- a/drivers/memstick/core/mspro_block.c
+++ b/drivers/memstick/core/mspro_block.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/blk-mq.h>
+#include <linux/completion.h>
 #include <linux/idr.h>
 #include <linux/hdreg.h>
 #include <linux/kthread.h>
@@ -17,6 +18,7 @@
 #include <linux/mutex.h>
 #include <linux/memstick.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "mspro_block"
 
diff --git a/drivers/memstick/host/jmb38x_ms.c b/drivers/memstick/host/jmb38x_ms.c
index e77eb8b0eb12..594f55b8cd11 100644
--- a/drivers/memstick/host/jmb38x_ms.c
+++ b/drivers/memstick/host/jmb38x_ms.c
@@ -14,6 +14,7 @@
 #include <linux/memstick.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "jmb38x_ms"
 
diff --git a/drivers/memstick/host/r592.c b/drivers/memstick/host/r592.c
index 461f5ffd02bc..b941c8d02f7c 100644
--- a/drivers/memstick/host/r592.c
+++ b/drivers/memstick/host/r592.c
@@ -17,6 +17,7 @@
 #include <linux/sched.h>
 #include <linux/highmem.h>
 #include <asm/byteorder.h>
+#include <linux/completion.h>
 #include <linux/swab.h>
 #include "r592.h"
 
diff --git a/drivers/message/fusion/mptbase.c b/drivers/message/fusion/mptbase.c
index 4bf669c55649..61869f1cea02 100644
--- a/drivers/message/fusion/mptbase.c
+++ b/drivers/message/fusion/mptbase.c
@@ -52,10 +52,12 @@
 #include <linux/init.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/kdev_t.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/message/fusion/mptctl.c b/drivers/message/fusion/mptctl.c
index 9f3999750c23..aca479c3d712 100644
--- a/drivers/message/fusion/mptctl.c
+++ b/drivers/message/fusion/mptctl.c
@@ -50,12 +50,14 @@
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/delay.h>	/* for mdelay */
 #include <linux/miscdevice.h>
 #include <linux/mutex.h>
 #include <linux/compat.h>
+#include <linux/completion.h>
 
 #include <asm/io.h>
 #include <linux/uaccess.h>
diff --git a/drivers/message/fusion/mptfc.c b/drivers/message/fusion/mptfc.c
index c459f709107b..78b949287457 100644
--- a/drivers/message/fusion/mptfc.c
+++ b/drivers/message/fusion/mptfc.c
@@ -52,6 +52,7 @@
 #include <linux/delay.h>	/* for mdelay */
 #include <linux/interrupt.h>
 #include <linux/reboot.h>	/* notifier code */
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/sort.h>
 #include <linux/slab.h>
diff --git a/drivers/message/fusion/mptsas.c b/drivers/message/fusion/mptsas.c
index 300f8e955a53..3518f01af1e3 100644
--- a/drivers/message/fusion/mptsas.c
+++ b/drivers/message/fusion/mptsas.c
@@ -51,6 +51,7 @@
 #include <linux/jiffies.h>
 #include <linux/workqueue.h>
 #include <linux/delay.h>	/* for mdelay */
+#include <linux/completion.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/message/fusion/mptscsih.c b/drivers/message/fusion/mptscsih.c
index 9080a73b4ea6..4f835f9d5cda 100644
--- a/drivers/message/fusion/mptscsih.c
+++ b/drivers/message/fusion/mptscsih.c
@@ -51,9 +51,11 @@
 #include <linux/errno.h>
 #include <linux/kdev_t.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>	/* for mdelay */
 #include <linux/interrupt.h>
 #include <linux/reboot.h>	/* notifier code */
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include <scsi/scsi.h>
diff --git a/drivers/message/fusion/mptspi.c b/drivers/message/fusion/mptspi.c
index 6c5920db1e9d..801cb0d577a6 100644
--- a/drivers/message/fusion/mptspi.c
+++ b/drivers/message/fusion/mptspi.c
@@ -51,6 +51,7 @@
 #include <linux/errno.h>
 #include <linux/kdev_t.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>	/* for mdelay */
 #include <linux/interrupt.h>
 #include <linux/reboot.h>	/* notifier code */
diff --git a/drivers/mfd/aat2870-core.c b/drivers/mfd/aat2870-core.c
index 2fee62f1016c..32bef877d08b 100644
--- a/drivers/mfd/aat2870-core.c
+++ b/drivers/mfd/aat2870-core.c
@@ -9,7 +9,9 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/i2c.h>
 #include <linux/delay.h>
diff --git a/drivers/mfd/ab8500-core.c b/drivers/mfd/ab8500-core.c
index 15c95828b09a..b406284a5cfe 100644
--- a/drivers/mfd/ab8500-core.c
+++ b/drivers/mfd/ab8500-core.c
@@ -21,6 +21,7 @@
 #include <linux/mfd/abx500/ab8500.h>
 #include <linux/mfd/dbx500-prcmu.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 /*
  * Interrupt register offsets
diff --git a/drivers/mfd/abx500-core.c b/drivers/mfd/abx500-core.c
index e896531d0354..db2e1706d987 100644
--- a/drivers/mfd/abx500-core.c
+++ b/drivers/mfd/abx500-core.c
@@ -7,6 +7,7 @@
 
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/device.h> // for devm_kzalloc()
 #include <linux/err.h>
 #include <linux/init.h>
 #include <linux/export.h>
diff --git a/drivers/mfd/atc260x-core.c b/drivers/mfd/atc260x-core.c
index 67473b58b03d..023ba4e9e09b 100644
--- a/drivers/mfd/atc260x-core.c
+++ b/drivers/mfd/atc260x-core.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/mfd/atc260x/core.h>
 #include <linux/mfd/core.h>
 #include <linux/module.h>
diff --git a/drivers/mfd/cs42l43-sdw.c b/drivers/mfd/cs42l43-sdw.c
index 65f7b1d78248..8f1c0fe993b3 100644
--- a/drivers/mfd/cs42l43-sdw.c
+++ b/drivers/mfd/cs42l43-sdw.c
@@ -18,6 +18,7 @@
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_registers.h>
 #include <linux/soundwire/sdw_type.h>
+#include <linux/completion.h>
 
 #include "cs42l43.h"
 
diff --git a/drivers/mfd/cs42l43.c b/drivers/mfd/cs42l43.c
index 56bd9dbbe10b..aa1160e2c7ec 100644
--- a/drivers/mfd/cs42l43.c
+++ b/drivers/mfd/cs42l43.c
@@ -9,6 +9,7 @@
 #include <linux/array_size.h>
 #include <linux/bitops.h>
 #include <linux/build_bug.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
diff --git a/drivers/mfd/da9052-core.c b/drivers/mfd/da9052-core.c
index dc85801b9fa0..cc57911b2acf 100644
--- a/drivers/mfd/da9052-core.c
+++ b/drivers/mfd/da9052-core.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/property.h>
+#include <linux/completion.h>
 
 #include <linux/mfd/da9052/da9052.h>
 #include <linux/mfd/da9052/pdata.h>
diff --git a/drivers/mfd/da9052-irq.c b/drivers/mfd/da9052-irq.c
index abbdbf0337e2..f938afede0d3 100644
--- a/drivers/mfd/da9052-irq.c
+++ b/drivers/mfd/da9052-irq.c
@@ -18,6 +18,7 @@
 #include <linux/irqdomain.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <linux/mfd/da9052/da9052.h>
 #include <linux/mfd/da9052/reg.h>
diff --git a/drivers/mfd/dln2.c b/drivers/mfd/dln2.c
index fbbe82c6e75b..3e6539a0f8a9 100644
--- a/drivers/mfd/dln2.c
+++ b/drivers/mfd/dln2.c
@@ -19,6 +19,7 @@
 #include <linux/mfd/core.h>
 #include <linux/mfd/dln2.h>
 #include <linux/rculist.h>
+#include <linux/completion.h>
 
 struct dln2_header {
 	__le16 size;
diff --git a/drivers/mfd/ezx-pcap.c b/drivers/mfd/ezx-pcap.c
index 8d006f6be48c..56d146df95b4 100644
--- a/drivers/mfd/ezx-pcap.c
+++ b/drivers/mfd/ezx-pcap.c
@@ -15,6 +15,7 @@
 #include <linux/spi/spi.h>
 #include <linux/gpio.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #define PCAP_ADC_MAXQ		8
 struct pcap_adc_request {
diff --git a/drivers/mfd/gateworks-gsc.c b/drivers/mfd/gateworks-gsc.c
index b02bfdc871e9..238855786163 100644
--- a/drivers/mfd/gateworks-gsc.c
+++ b/drivers/mfd/gateworks-gsc.c
@@ -12,6 +12,7 @@
 #include <linux/device.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/gsc.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
@@ -19,6 +20,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include <asm/unaligned.h>
 
diff --git a/drivers/mfd/intel-m10-bmc-core.c b/drivers/mfd/intel-m10-bmc-core.c
index 8ad5b3821584..a89c32b95277 100644
--- a/drivers/mfd/intel-m10-bmc-core.c
+++ b/drivers/mfd/intel-m10-bmc-core.c
@@ -11,6 +11,7 @@
 #include <linux/mfd/core.h>
 #include <linux/mfd/intel-m10-bmc.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 void m10bmc_fw_state_set(struct intel_m10bmc *m10bmc, enum m10bmc_fw_state new_state)
 {
diff --git a/drivers/mfd/intel_pmc_bxt.c b/drivers/mfd/intel_pmc_bxt.c
index 9f01d38acc7f..ef21129203e3 100644
--- a/drivers/mfd/intel_pmc_bxt.c
+++ b/drivers/mfd/intel_pmc_bxt.c
@@ -18,11 +18,13 @@
 #include <linux/errno.h>
 #include <linux/interrupt.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/core.h>
 #include <linux/mfd/intel_pmc_bxt.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/platform_data/itco_wdt.h>
+#include <linux/sprintf.h>
 
 #include <asm/intel_scu_ipc.h>
 
diff --git a/drivers/mfd/intel_soc_pmic_bxtwc.c b/drivers/mfd/intel_soc_pmic_bxtwc.c
index 8dac0d41f64f..db61280e0068 100644
--- a/drivers/mfd/intel_soc_pmic_bxtwc.c
+++ b/drivers/mfd/intel_soc_pmic_bxtwc.c
@@ -11,6 +11,7 @@
 #include <linux/err.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/core.h>
 #include <linux/mfd/intel_soc_pmic.h>
 #include <linux/mfd/intel_soc_pmic_bxtwc.h>
diff --git a/drivers/mfd/ioc3.c b/drivers/mfd/ioc3.c
index 58656837b7c6..ba6dfe99c4b4 100644
--- a/drivers/mfd/ioc3.c
+++ b/drivers/mfd/ioc3.c
@@ -21,6 +21,7 @@
 #include <linux/platform_device.h>
 #include <linux/platform_data/sgi-w1.h>
 #include <linux/rtc/ds1685.h>
+#include <linux/sprintf.h>
 
 #include <asm/pci/bridge.h>
 #include <asm/sn/ioc3.h>
diff --git a/drivers/mfd/ipaq-micro.c b/drivers/mfd/ipaq-micro.c
index c964ea6539aa..7e46edfaa141 100644
--- a/drivers/mfd/ipaq-micro.c
+++ b/drivers/mfd/ipaq-micro.c
@@ -25,6 +25,7 @@
 #include <linux/random.h>
 #include <linux/slab.h>
 #include <linux/list.h>
+#include <linux/completion.h>
 
 #include <mach/hardware.h>
 
diff --git a/drivers/mfd/kempld-core.c b/drivers/mfd/kempld-core.c
index 67af36a38913..e359b59934a9 100644
--- a/drivers/mfd/kempld-core.c
+++ b/drivers/mfd/kempld-core.c
@@ -14,6 +14,7 @@
 #include <linux/io.h>
 #include <linux/delay.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #define MAX_ID_LEN 4
 static char force_device_id[MAX_ID_LEN + 1] = "";
diff --git a/drivers/mfd/lm3533-core.c b/drivers/mfd/lm3533-core.c
index c211183cecb2..335e4fdc9e30 100644
--- a/drivers/mfd/lm3533-core.c
+++ b/drivers/mfd/lm3533-core.c
@@ -13,6 +13,7 @@
 #include <linux/err.h>
 #include <linux/gpio.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/core.h>
 #include <linux/regmap.h>
 #include <linux/seq_file.h>
diff --git a/drivers/mfd/max77620.c b/drivers/mfd/max77620.c
index 74ef3f6d576c..a9c4e69e9adf 100644
--- a/drivers/mfd/max77620.c
+++ b/drivers/mfd/max77620.c
@@ -32,6 +32,7 @@
 #include <linux/of.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 static struct max77620_chip *max77620_scratch;
 
diff --git a/drivers/mfd/mc13xxx-core.c b/drivers/mfd/mc13xxx-core.c
index 1000572761a8..bcf8b5f2f496 100644
--- a/drivers/mfd/mc13xxx-core.c
+++ b/drivers/mfd/mc13xxx-core.c
@@ -7,11 +7,13 @@
  * Copyright 2009 Pengutronix, Sascha Hauer <s.hauer@pengutronix.de>
  */
 
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/platform_device.h>
 #include <linux/mfd/core.h>
+#include <linux/sprintf.h>
 
 #include "mc13xxx.h"
 
diff --git a/drivers/mfd/omap-usb-host.c b/drivers/mfd/omap-usb-host.c
index 949feb03d4f8..3ffa521e933d 100644
--- a/drivers/mfd/omap-usb-host.c
+++ b/drivers/mfd/omap-usb-host.c
@@ -8,6 +8,7 @@
  */
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
diff --git a/drivers/mfd/omap-usb-tll.c b/drivers/mfd/omap-usb-tll.c
index b6303ddb013b..f17fd83f0d07 100644
--- a/drivers/mfd/omap-usb-tll.c
+++ b/drivers/mfd/omap-usb-tll.c
@@ -8,6 +8,7 @@
  */
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
diff --git a/drivers/mfd/pcf50633-core.c b/drivers/mfd/pcf50633-core.c
index 014a68711b18..ccd1a4f7216f 100644
--- a/drivers/mfd/pcf50633-core.c
+++ b/drivers/mfd/pcf50633-core.c
@@ -9,6 +9,7 @@
 
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/module.h>
 #include <linux/types.h>
diff --git a/drivers/mfd/qcom_rpm.c b/drivers/mfd/qcom_rpm.c
index 27446f43e3f3..d6d4bd7ffa7a 100644
--- a/drivers/mfd/qcom_rpm.c
+++ b/drivers/mfd/qcom_rpm.c
@@ -10,6 +10,7 @@
 #include <linux/property.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/interrupt.h>
 #include <linux/mfd/qcom_rpm.h>
diff --git a/drivers/mfd/rave-sp.c b/drivers/mfd/rave-sp.c
index ef326d6d566e..3032dc48910e 100644
--- a/drivers/mfd/rave-sp.c
+++ b/drivers/mfd/rave-sp.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/crc-itu-t.h>
 #include <linux/delay.h>
 #include <linux/export.h>
diff --git a/drivers/mfd/sm501.c b/drivers/mfd/sm501.c
index b3592982a83b..d9d4970b1ca6 100644
--- a/drivers/mfd/sm501.c
+++ b/drivers/mfd/sm501.c
@@ -20,6 +20,7 @@
 #include <linux/gpio/driver.h>
 #include <linux/gpio/machine.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/sm501.h>
 #include <linux/sm501-regs.h>
diff --git a/drivers/mfd/stm32-timers.c b/drivers/mfd/stm32-timers.c
index 9fd13d88950c..5d3cff509b84 100644
--- a/drivers/mfd/stm32-timers.c
+++ b/drivers/mfd/stm32-timers.c
@@ -5,11 +5,13 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/mfd/stm32-timers.h>
 #include <linux/module.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #define STM32_TIMERS_MAX_REGISTERS	0x3fc
 
diff --git a/drivers/mfd/syscon.c b/drivers/mfd/syscon.c
index c9550368d9ea..1326efcc4f05 100644
--- a/drivers/mfd/syscon.c
+++ b/drivers/mfd/syscon.c
@@ -23,6 +23,7 @@
 #include <linux/reset.h>
 #include <linux/mfd/syscon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 static struct platform_driver syscon_driver;
 
diff --git a/drivers/mfd/timberdale.c b/drivers/mfd/timberdale.c
index 07e5aa10a146..3196541e4076 100644
--- a/drivers/mfd/timberdale.c
+++ b/drivers/mfd/timberdale.c
@@ -13,6 +13,7 @@
 #include <linux/pci.h>
 #include <linux/mfd/core.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/timb_gpio.h>
 
diff --git a/drivers/mfd/tps65010.c b/drivers/mfd/tps65010.c
index 2b9105295f30..bd5908c2f950 100644
--- a/drivers/mfd/tps65010.c
+++ b/drivers/mfd/tps65010.c
@@ -13,6 +13,7 @@
 #include <linux/interrupt.h>
 #include <linux/i2c.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
diff --git a/drivers/mfd/tps65911-comparator.c b/drivers/mfd/tps65911-comparator.c
index f206a9c50e9d..f49400ec52c4 100644
--- a/drivers/mfd/tps65911-comparator.c
+++ b/drivers/mfd/tps65911-comparator.c
@@ -16,6 +16,7 @@
 #include <linux/debugfs.h>
 #include <linux/gpio.h>
 #include <linux/mfd/tps65910.h>
+#include <linux/sprintf.h>
 
 #define COMP1					0
 #define COMP2					1
diff --git a/drivers/mfd/twl4030-irq.c b/drivers/mfd/twl4030-irq.c
index 87496c1cb8bc..a5908d0052e6 100644
--- a/drivers/mfd/twl4030-irq.c
+++ b/drivers/mfd/twl4030-irq.c
@@ -22,6 +22,7 @@
 #include <linux/of.h>
 #include <linux/irqdomain.h>
 #include <linux/mfd/twl.h>
+#include <linux/sprintf.h>
 
 #include "twl-core.h"
 
diff --git a/drivers/mfd/twl6040.c b/drivers/mfd/twl6040.c
index 9ce34dfd99b3..de1b706dd207 100644
--- a/drivers/mfd/twl6040.c
+++ b/drivers/mfd/twl6040.c
@@ -23,6 +23,7 @@
 #include <linux/mfd/core.h>
 #include <linux/mfd/twl6040.h>
 #include <linux/regulator/consumer.h>
+#include <linux/completion.h>
 
 #define VIBRACTRL_MEMBER(reg) ((reg == TWL6040_REG_VIBCTLL) ? 0 : 1)
 #define TWL6040_NUM_SUPPLIES	(2)
diff --git a/drivers/mfd/ucb1x00-assabet.c b/drivers/mfd/ucb1x00-assabet.c
index 6a389737c615..76654e9eee03 100644
--- a/drivers/mfd/ucb1x00-assabet.c
+++ b/drivers/mfd/ucb1x00-assabet.c
@@ -16,6 +16,7 @@
 #include <linux/platform_device.h>
 #include <linux/proc_fs.h>
 #include <linux/mfd/ucb1x00.h>
+#include <linux/sprintf.h>
 
 #define UCB1X00_ATTR(name,input)\
 static ssize_t name##_show(struct device *dev, struct device_attribute *attr, \
diff --git a/drivers/mfd/wm831x-auxadc.c b/drivers/mfd/wm831x-auxadc.c
index 18618a8f9206..2d795f469e4d 100644
--- a/drivers/mfd/wm831x-auxadc.c
+++ b/drivers/mfd/wm831x-auxadc.c
@@ -9,6 +9,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/mfd/core.h>
 #include <linux/slab.h>
diff --git a/drivers/mfd/wm831x-otp.c b/drivers/mfd/wm831x-otp.c
index 25f5d9fe33a1..d824ed5af5e2 100644
--- a/drivers/mfd/wm831x-otp.c
+++ b/drivers/mfd/wm831x-otp.c
@@ -14,6 +14,7 @@
 #include <linux/delay.h>
 #include <linux/mfd/core.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/wm831x/core.h>
 #include <linux/mfd/wm831x/otp.h>
diff --git a/drivers/mfd/wm8350-core.c b/drivers/mfd/wm8350-core.c
index fbc77b218215..b9b0eb021ee5 100644
--- a/drivers/mfd/wm8350-core.c
+++ b/drivers/mfd/wm8350-core.c
@@ -12,6 +12,7 @@
 #include <linux/export.h>
 #include <linux/slab.h>
 #include <linux/bug.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
diff --git a/drivers/misc/ad525x_dpot.c b/drivers/misc/ad525x_dpot.c
index 756ef6912b5a..b27967da3bfe 100644
--- a/drivers/misc/ad525x_dpot.c
+++ b/drivers/misc/ad525x_dpot.c
@@ -72,7 +72,9 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "ad525x_dpot.h"
 
diff --git a/drivers/misc/altera-stapl/altera.c b/drivers/misc/altera-stapl/altera.c
index 587427b73914..2f8065801887 100644
--- a/drivers/misc/altera-stapl/altera.c
+++ b/drivers/misc/altera-stapl/altera.c
@@ -11,9 +11,11 @@
 
 #include <asm/unaligned.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/firmware.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/module.h>
 #include <misc/altera.h>
 #include "altera-exprt.h"
diff --git a/drivers/misc/apds9802als.c b/drivers/misc/apds9802als.c
index 693f0e539f37..0a717ba6110d 100644
--- a/drivers/misc/apds9802als.c
+++ b/drivers/misc/apds9802als.c
@@ -14,7 +14,9 @@
 #include <linux/i2c.h>
 #include <linux/err.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/pm_runtime.h>
 
diff --git a/drivers/misc/apds990x.c b/drivers/misc/apds990x.c
index 92b92be91d60..d1e8b93f9c45 100644
--- a/drivers/misc/apds990x.c
+++ b/drivers/misc/apds990x.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
@@ -16,6 +17,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/pm_runtime.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/slab.h>
 #include <linux/platform_data/apds990x.h>
diff --git a/drivers/misc/bcm-vk/bcm_vk_dev.c b/drivers/misc/bcm-vk/bcm_vk_dev.c
index d4a96137728d..d0b63e3b2e85 100644
--- a/drivers/misc/bcm-vk/bcm_vk_dev.c
+++ b/drivers/misc/bcm-vk/bcm_vk_dev.c
@@ -15,6 +15,7 @@
 #include <linux/mutex.h>
 #include <linux/pci.h>
 #include <linux/pci_regs.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/misc/bcm_vk.h>
 
 #include "bcm_vk.h"
diff --git a/drivers/misc/bh1770glc.c b/drivers/misc/bh1770glc.c
index 1629b62fd052..2666d435f343 100644
--- a/drivers/misc/bh1770glc.c
+++ b/drivers/misc/bh1770glc.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
@@ -16,6 +17,7 @@
 #include <linux/platform_data/bh1770glc.h>
 #include <linux/regulator/consumer.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/delay.h>
 #include <linux/wait.h>
diff --git a/drivers/misc/c2port/core.c b/drivers/misc/c2port/core.c
index 2bb1dd2511f9..f123fc4c09a4 100644
--- a/drivers/misc/c2port/core.c
+++ b/drivers/misc/c2port/core.c
@@ -17,6 +17,7 @@
 #include <linux/idr.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/c2port.h>
 
diff --git a/drivers/misc/cardreader/alcor_pci.c b/drivers/misc/cardreader/alcor_pci.c
index 0142c4bf4f42..d10a81756fe9 100644
--- a/drivers/misc/cardreader/alcor_pci.c
+++ b/drivers/misc/cardreader/alcor_pci.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/idr.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/irq.h>
diff --git a/drivers/misc/cardreader/rtsx_pcr.c b/drivers/misc/cardreader/rtsx_pcr.c
index 1a64364700eb..418b06d04790 100644
--- a/drivers/misc/cardreader/rtsx_pcr.c
+++ b/drivers/misc/cardreader/rtsx_pcr.c
@@ -20,6 +20,7 @@
 #include <linux/rtsx_pci.h>
 #include <linux/mmc/card.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
 
diff --git a/drivers/misc/cb710/debug.c b/drivers/misc/cb710/debug.c
index 20d672edf7cd..d4d384718c8a 100644
--- a/drivers/misc/cb710/debug.c
+++ b/drivers/misc/cb710/debug.c
@@ -7,6 +7,7 @@
 #include <linux/cb710.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define CB710_REG_COUNT		0x80
 
diff --git a/drivers/misc/cxl/api.c b/drivers/misc/cxl/api.c
index d85c56530863..9c32a6f53711 100644
--- a/drivers/misc/cxl/api.c
+++ b/drivers/misc/cxl/api.c
@@ -6,6 +6,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/file.h>
+#include <linux/sprintf.h>
 #include <misc/cxl.h>
 #include <linux/module.h>
 #include <linux/mount.h>
diff --git a/drivers/misc/cxl/cxl.h b/drivers/misc/cxl/cxl.h
index 6ad0ab892675..e57957d36043 100644
--- a/drivers/misc/cxl/cxl.h
+++ b/drivers/misc/cxl/cxl.h
@@ -12,6 +12,7 @@
 #include <linux/types.h>
 #include <linux/cdev.h>
 #include <linux/pid.h>
+#include <linux/idr.h>
 #include <linux/io.h>
 #include <linux/pci.h>
 #include <linux/fs.h>
diff --git a/drivers/misc/cxl/debugfs.c b/drivers/misc/cxl/debugfs.c
index 7b987bf498b5..cd21f8f238f1 100644
--- a/drivers/misc/cxl/debugfs.c
+++ b/drivers/misc/cxl/debugfs.c
@@ -6,6 +6,7 @@
 #include <linux/debugfs.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "cxl.h"
 
diff --git a/drivers/misc/cxl/file.c b/drivers/misc/cxl/file.c
index 012e11b959bc..06af3ac664e7 100644
--- a/drivers/misc/cxl/file.c
+++ b/drivers/misc/cxl/file.c
@@ -19,6 +19,7 @@
 #include <asm/cputable.h>
 #include <asm/current.h>
 #include <asm/copro.h>
+#include <linux/sprintf.h>
 
 #include "cxl.h"
 #include "trace.h"
diff --git a/drivers/misc/cxl/guest.c b/drivers/misc/cxl/guest.c
index fb95a2d5cef4..2ad16adbf040 100644
--- a/drivers/misc/cxl/guest.c
+++ b/drivers/misc/cxl/guest.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/delay.h>
 #include <linux/irqdomain.h>
diff --git a/drivers/misc/cxl/irq.c b/drivers/misc/cxl/irq.c
index b730e022a48e..3810798f3e54 100644
--- a/drivers/misc/cxl/irq.c
+++ b/drivers/misc/cxl/irq.c
@@ -5,6 +5,7 @@
 
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/sched.h>
 #include <linux/wait.h>
diff --git a/drivers/misc/cxl/native.c b/drivers/misc/cxl/native.c
index fbe16a6ab7ad..34df35e98fb5 100644
--- a/drivers/misc/cxl/native.c
+++ b/drivers/misc/cxl/native.c
@@ -9,6 +9,7 @@
 #include <linux/slab.h>
 #include <linux/mutex.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/delay.h>
 #include <linux/irqdomain.h>
diff --git a/drivers/misc/cxl/of.c b/drivers/misc/cxl/of.c
index 25ce725035e7..130183c1c84c 100644
--- a/drivers/misc/cxl/of.c
+++ b/drivers/misc/cxl/of.c
@@ -9,6 +9,7 @@
 #include <linux/slab.h>
 #include <linux/of_address.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 
 #include "cxl.h"
 
diff --git a/drivers/misc/cxl/sysfs.c b/drivers/misc/cxl/sysfs.c
index 315c43f17dd3..a1d35d72d4b2 100644
--- a/drivers/misc/cxl/sysfs.c
+++ b/drivers/misc/cxl/sysfs.c
@@ -4,7 +4,9 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/pci_regs.h>
 
diff --git a/drivers/misc/ds1682.c b/drivers/misc/ds1682.c
index 21fc5bc85c5c..626464ad94a9 100644
--- a/drivers/misc/ds1682.c
+++ b/drivers/misc/ds1682.c
@@ -30,6 +30,8 @@
 
 #include <linux/module.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/list.h>
 #include <linux/sysfs.h>
diff --git a/drivers/misc/dw-xdata-pcie.c b/drivers/misc/dw-xdata-pcie.c
index efd0ca8cc925..473c328176a3 100644
--- a/drivers/misc/dw-xdata-pcie.c
+++ b/drivers/misc/dw-xdata-pcie.c
@@ -8,7 +8,10 @@
 
 #include <linux/miscdevice.h>
 #include <linux/bitfield.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/pci-epf.h>
+#include <linux/idr.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/device.h>
@@ -16,6 +19,7 @@
 #include <linux/mutex.h>
 #include <linux/delay.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #define DW_XDATA_DRIVER_NAME		"dw-xdata-pcie"
 
diff --git a/drivers/misc/eeprom/eeprom_93xx46.c b/drivers/misc/eeprom/eeprom_93xx46.c
index b630625b3024..452a451b6b06 100644
--- a/drivers/misc/eeprom/eeprom_93xx46.c
+++ b/drivers/misc/eeprom/eeprom_93xx46.c
@@ -19,6 +19,7 @@
 #include <linux/spi/spi.h>
 #include <linux/nvmem-provider.h>
 #include <linux/eeprom_93xx46.h>
+#include <linux/sprintf.h>
 
 #define OP_START	0x4
 #define OP_WRITE	(OP_START | 0x1)
diff --git a/drivers/misc/eeprom/idt_89hpesx.c b/drivers/misc/eeprom/idt_89hpesx.c
index d807d08e2614..fc571995faf3 100644
--- a/drivers/misc/eeprom/idt_89hpesx.c
+++ b/drivers/misc/eeprom/idt_89hpesx.c
@@ -38,7 +38,9 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
diff --git a/drivers/misc/enclosure.c b/drivers/misc/enclosure.c
index 76511d279aff..ce3e11f166be 100644
--- a/drivers/misc/enclosure.c
+++ b/drivers/misc/enclosure.c
@@ -12,11 +12,13 @@
 #include <linux/device.h>
 #include <linux/enclosure.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 static LIST_HEAD(container_list);
 static DEFINE_MUTEX(container_list_lock);
diff --git a/drivers/misc/gehc-achc.c b/drivers/misc/gehc-achc.c
index b8fca4d393c6..2469331a6dff 100644
--- a/drivers/misc/gehc-achc.c
+++ b/drivers/misc/gehc-achc.c
@@ -10,6 +10,7 @@
 #include <linux/firmware.h>
 #include <linux/gpio/consumer.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/misc/genwqe/card_ddcb.c b/drivers/misc/genwqe/card_ddcb.c
index 500b1feaf1f6..1d0e41b2da01 100644
--- a/drivers/misc/genwqe/card_ddcb.c
+++ b/drivers/misc/genwqe/card_ddcb.c
@@ -20,6 +20,7 @@
 
 #include <linux/types.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/pci.h>
 #include <linux/string.h>
diff --git a/drivers/misc/genwqe/card_debugfs.c b/drivers/misc/genwqe/card_debugfs.c
index 491fb4482da2..39443e0ebef7 100644
--- a/drivers/misc/genwqe/card_debugfs.c
+++ b/drivers/misc/genwqe/card_debugfs.c
@@ -20,6 +20,7 @@
 #include <linux/kernel.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "card_base.h"
diff --git a/drivers/misc/genwqe/card_sysfs.c b/drivers/misc/genwqe/card_sysfs.c
index b2f115602523..529b21be1193 100644
--- a/drivers/misc/genwqe/card_sysfs.c
+++ b/drivers/misc/genwqe/card_sysfs.c
@@ -17,6 +17,8 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/pci.h>
diff --git a/drivers/misc/genwqe/genwqe_driver.h b/drivers/misc/genwqe/genwqe_driver.h
index 8c333481b3ba..bbb610009379 100644
--- a/drivers/misc/genwqe/genwqe_driver.h
+++ b/drivers/misc/genwqe/genwqe_driver.h
@@ -24,6 +24,7 @@
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/printk.h>
+#include <linux/sprintf.h>
 
 #include <asm/byteorder.h>
 #include <linux/genwqe/genwqe_card.h>
diff --git a/drivers/misc/hmc6352.c b/drivers/misc/hmc6352.c
index 759eaeb64307..4c367dfa4010 100644
--- a/drivers/misc/hmc6352.c
+++ b/drivers/misc/hmc6352.c
@@ -14,6 +14,8 @@
 #include <linux/i2c.h>
 #include <linux/err.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/nospec.h>
 
diff --git a/drivers/misc/ibmasm/ibmasm.h b/drivers/misc/ibmasm/ibmasm.h
index a5ced88ca923..d34bfbe45e33 100644
--- a/drivers/misc/ibmasm/ibmasm.h
+++ b/drivers/misc/ibmasm/ibmasm.h
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/list.h>
diff --git a/drivers/misc/ibmasm/ibmasmfs.c b/drivers/misc/ibmasm/ibmasmfs.c
index c44de892a61e..6c7f2470e37c 100644
--- a/drivers/misc/ibmasm/ibmasmfs.c
+++ b/drivers/misc/ibmasm/ibmasmfs.c
@@ -61,8 +61,10 @@
 
 #include <linux/fs.h>
 #include <linux/fs_context.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/io.h>
 #include "ibmasm.h"
diff --git a/drivers/misc/ibmasm/module.c b/drivers/misc/ibmasm/module.c
index dc8a06c06c63..43de0d1c502e 100644
--- a/drivers/misc/ibmasm/module.c
+++ b/drivers/misc/ibmasm/module.c
@@ -42,6 +42,7 @@
 #include "ibmasm.h"
 #include "lowlevel.h"
 #include "remote.h"
+#include <linux/sprintf.h>
 
 int ibmasm_debug = 0;
 module_param(ibmasm_debug, int , S_IRUGO | S_IWUSR);
diff --git a/drivers/misc/ics932s401.c b/drivers/misc/ics932s401.c
index ee6296b98078..68d676d9bebd 100644
--- a/drivers/misc/ics932s401.c
+++ b/drivers/misc/ics932s401.c
@@ -14,6 +14,7 @@
 #include <linux/delay.h>
 #include <linux/log2.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Addresses to scan */
 static const unsigned short normal_i2c[] = { 0x69, I2C_CLIENT_END };
diff --git a/drivers/misc/isl29003.c b/drivers/misc/isl29003.c
index ebf0635aee64..ea112285d3ed 100644
--- a/drivers/misc/isl29003.c
+++ b/drivers/misc/isl29003.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/delay.h>
 
diff --git a/drivers/misc/isl29020.c b/drivers/misc/isl29020.c
index c5976fa8c825..83fd320ebfe6 100644
--- a/drivers/misc/isl29020.c
+++ b/drivers/misc/isl29020.c
@@ -16,6 +16,8 @@
 #include <linux/i2c.h>
 #include <linux/err.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/pm_runtime.h>
 
diff --git a/drivers/misc/kgdbts.c b/drivers/misc/kgdbts.c
index 88b91ad8e541..d73e02b1ff7c 100644
--- a/drivers/misc/kgdbts.c
+++ b/drivers/misc/kgdbts.c
@@ -85,6 +85,8 @@
 #include <linux/kernel.h>
 #include <linux/kgdb.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/syscalls.h>
 #include <linux/nmi.h>
diff --git a/drivers/misc/lattice-ecp3-config.c b/drivers/misc/lattice-ecp3-config.c
index bac4df2e5231..33a10498bf71 100644
--- a/drivers/misc/lattice-ecp3-config.c
+++ b/drivers/misc/lattice-ecp3-config.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/delay.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #define FIRMWARE_NAME	"lattice-ecp3.bit"
 
diff --git a/drivers/misc/lis3lv02d/lis3lv02d.c b/drivers/misc/lis3lv02d/lis3lv02d.c
index 49868a45c0ad..59394829b86e 100644
--- a/drivers/misc/lis3lv02d/lis3lv02d.c
+++ b/drivers/misc/lis3lv02d/lis3lv02d.c
@@ -10,9 +10,11 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/signal.h>
 #include <linux/dmi.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/platform_device.h>
 #include <linux/interrupt.h>
diff --git a/drivers/misc/lkdtm/core.c b/drivers/misc/lkdtm/core.c
index 5732fd59a227..aca29a99b8ea 100644
--- a/drivers/misc/lkdtm/core.c
+++ b/drivers/misc/lkdtm/core.c
@@ -19,6 +19,7 @@
  */
 #include "lkdtm.h"
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/buffer_head.h>
 #include <linux/kprobes.h>
@@ -26,6 +27,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 
 #define DEFAULT_COUNT 10
diff --git a/drivers/misc/lkdtm/heap.c b/drivers/misc/lkdtm/heap.c
index b1b316f99703..2ea3574de879 100644
--- a/drivers/misc/lkdtm/heap.c
+++ b/drivers/misc/lkdtm/heap.c
@@ -8,6 +8,7 @@
 #include <linux/slab.h>
 #include <linux/vmalloc.h>
 #include <linux/sched.h>
+#include <linux/jiffies.h>
 
 static struct kmem_cache *double_free_cache;
 static struct kmem_cache *a_cache;
diff --git a/drivers/misc/mei/bus.c b/drivers/misc/mei/bus.c
index f9bcff197615..b379330054db 100644
--- a/drivers/misc/mei/bus.c
+++ b/drivers/misc/mei/bus.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/sched/signal.h>
 #include <linux/init.h>
 #include <linux/errno.h>
@@ -15,6 +16,7 @@
 #include <linux/interrupt.h>
 #include <linux/scatterlist.h>
 #include <linux/mei_cl_bus.h>
+#include <linux/sprintf.h>
 
 #include "mei_dev.h"
 #include "client.h"
diff --git a/drivers/misc/mei/client.c b/drivers/misc/mei/client.c
index 9d090fa07516..e7886e1816da 100644
--- a/drivers/misc/mei/client.c
+++ b/drivers/misc/mei/client.c
@@ -7,6 +7,7 @@
 #include <linux/sched/signal.h>
 #include <linux/wait.h>
 #include <linux/delay.h>
+#include <linux/kref.h>
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/misc/mei/debugfs.c b/drivers/misc/mei/debugfs.c
index 3b098d4c8e3d..f7a3ea46561a 100644
--- a/drivers/misc/mei/debugfs.c
+++ b/drivers/misc/mei/debugfs.c
@@ -6,6 +6,7 @@
 
 #include <linux/slab.h>
 #include <linux/kernel.h>
+#include <linux/kref.h>
 #include <linux/device.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
diff --git a/drivers/misc/mei/gsc-me.c b/drivers/misc/mei/gsc-me.c
index 9e558ec2ea1d..b70448c5d574 100644
--- a/drivers/misc/mei/gsc-me.c
+++ b/drivers/misc/mei/gsc-me.c
@@ -10,6 +10,7 @@
 #include <linux/device.h>
 #include <linux/irqreturn.h>
 #include <linux/jiffies.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/ktime.h>
 #include <linux/delay.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/misc/mei/hbm.c b/drivers/misc/mei/hbm.c
index 026b1f686c16..8ca9862c46b7 100644
--- a/drivers/misc/mei/hbm.c
+++ b/drivers/misc/mei/hbm.c
@@ -4,6 +4,7 @@
  * Intel Management Engine Interface (Intel MEI) Linux driver
  */
 #include <linux/export.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/sched.h>
 #include <linux/wait.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/misc/mei/hw-txe.c b/drivers/misc/mei/hw-txe.c
index 5d0f68b95c29..a1d55b07aa26 100644
--- a/drivers/misc/mei/hw-txe.c
+++ b/drivers/misc/mei/hw-txe.c
@@ -6,6 +6,7 @@
 
 #include <linux/pci.h>
 #include <linux/jiffies.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/ktime.h>
 #include <linux/delay.h>
 #include <linux/kthread.h>
diff --git a/drivers/misc/mei/init.c b/drivers/misc/mei/init.c
index 8ef2b1df8ac7..64e8b70f7388 100644
--- a/drivers/misc/mei/init.c
+++ b/drivers/misc/mei/init.c
@@ -6,6 +6,7 @@
 
 #include <linux/export.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/delay.h>
 
diff --git a/drivers/misc/mei/main.c b/drivers/misc/mei/main.c
index 79e6f3c1341f..80d5ee1baa50 100644
--- a/drivers/misc/mei/main.c
+++ b/drivers/misc/mei/main.c
@@ -8,12 +8,15 @@
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/fs.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/poll.h>
+#include <linux/idr.h>
 #include <linux/init.h>
 #include <linux/ioctl.h>
 #include <linux/cdev.h>
diff --git a/drivers/misc/mei/vsc-fw-loader.c b/drivers/misc/mei/vsc-fw-loader.c
index ffa4ccd96a10..08d42a9c2f81 100644
--- a/drivers/misc/mei/vsc-fw-loader.c
+++ b/drivers/misc/mei/vsc-fw-loader.c
@@ -12,6 +12,7 @@
 #include <linux/firmware.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/types.h>
 
diff --git a/drivers/misc/nsm.c b/drivers/misc/nsm.c
index 0eaa3b4484bd..4a450b47190d 100644
--- a/drivers/misc/nsm.c
+++ b/drivers/misc/nsm.c
@@ -13,6 +13,7 @@
 #include <linux/fs.h>
 #include <linux/interrupt.h>
 #include <linux/hw_random.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/miscdevice.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
@@ -25,6 +26,7 @@
 #include <linux/virtio.h>
 #include <linux/wait.h>
 #include <uapi/linux/nsm.h>
+#include <linux/completion.h>
 
 /* Timeout for NSM virtqueue respose in milliseconds. */
 #define NSM_DEFAULT_TIMEOUT_MSECS (120000) /* 2 minutes */
diff --git a/drivers/misc/ocxl/afu_irq.c b/drivers/misc/ocxl/afu_irq.c
index 36f7379b8e2d..af89537dc499 100644
--- a/drivers/misc/ocxl/afu_irq.c
+++ b/drivers/misc/ocxl/afu_irq.c
@@ -6,6 +6,7 @@
 #include <asm/xive.h>
 #include "ocxl_internal.h"
 #include "trace.h"
+#include <linux/sprintf.h>
 
 struct afu_irq {
 	int id;
diff --git a/drivers/misc/ocxl/core.c b/drivers/misc/ocxl/core.c
index aebfc53a2d09..a62a0c1dc373 100644
--- a/drivers/misc/ocxl/core.c
+++ b/drivers/misc/ocxl/core.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0+
 // Copyright 2019 IBM Corp.
 #include <linux/idr.h>
+#include <linux/kref.h>
 #include "ocxl_internal.h"
 
 static struct ocxl_fn *ocxl_fn_get(struct ocxl_fn *fn)
diff --git a/drivers/misc/ocxl/file.c b/drivers/misc/ocxl/file.c
index 7eb74711ac96..6c61b9eb76e0 100644
--- a/drivers/misc/ocxl/file.c
+++ b/drivers/misc/ocxl/file.c
@@ -4,6 +4,7 @@
 #include <linux/poll.h>
 #include <linux/sched/signal.h>
 #include <linux/eventfd.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <uapi/misc/ocxl.h>
 #include <asm/reg.h>
diff --git a/drivers/misc/ocxl/link.c b/drivers/misc/ocxl/link.c
index 03402203cacd..b0cff91efc5b 100644
--- a/drivers/misc/ocxl/link.c
+++ b/drivers/misc/ocxl/link.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0+
 // Copyright 2017 IBM Corp.
 #include <linux/sched/mm.h>
+#include <linux/kref.h>
 #include <linux/mutex.h>
 #include <linux/mm.h>
 #include <linux/mm_types.h>
@@ -10,6 +11,7 @@
 #include <asm/copro.h>
 #include <asm/pnv-ocxl.h>
 #include <asm/xive.h>
+#include <linux/sprintf.h>
 #include <misc/ocxl.h>
 #include "ocxl_internal.h"
 #include "trace.h"
diff --git a/drivers/misc/ocxl/ocxl_internal.h b/drivers/misc/ocxl/ocxl_internal.h
index 10125a22d5a5..fbbcb2efd3ac 100644
--- a/drivers/misc/ocxl/ocxl_internal.h
+++ b/drivers/misc/ocxl/ocxl_internal.h
@@ -5,6 +5,7 @@
 
 #include <linux/pci.h>
 #include <linux/cdev.h>
+#include <linux/idr.h>
 #include <linux/list.h>
 #include <misc/ocxl.h>
 
diff --git a/drivers/misc/ocxl/sysfs.c b/drivers/misc/ocxl/sysfs.c
index 405180d47d9b..7f78683a2e4f 100644
--- a/drivers/misc/ocxl/sysfs.c
+++ b/drivers/misc/ocxl/sysfs.c
@@ -2,6 +2,8 @@
 // Copyright 2017 IBM Corp.
 #include <linux/sysfs.h>
 #include "ocxl_internal.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static inline struct ocxl_afu *to_afu(struct device *device)
 {
diff --git a/drivers/misc/open-dice.c b/drivers/misc/open-dice.c
index d279a4f195e2..24aee326356a 100644
--- a/drivers/misc/open-dice.c
+++ b/drivers/misc/open-dice.c
@@ -25,6 +25,7 @@
 #include <linux/module.h>
 #include <linux/of_reserved_mem.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "open-dice"
 
diff --git a/drivers/misc/pch_phub.c b/drivers/misc/pch_phub.c
index 8d2b7135738e..3351aec437c7 100644
--- a/drivers/misc/pch_phub.c
+++ b/drivers/misc/pch_phub.c
@@ -5,6 +5,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fs.h>
 #include <linux/uaccess.h>
diff --git a/drivers/misc/pci_endpoint_test.c b/drivers/misc/pci_endpoint_test.c
index c38a6083f0a7..f02b18d090d7 100644
--- a/drivers/misc/pci_endpoint_test.c
+++ b/drivers/misc/pci_endpoint_test.c
@@ -9,17 +9,21 @@
 #include <linux/crc32.h>
 #include <linux/delay.h>
 #include <linux/fs.h>
+#include <linux/idr.h>
 #include <linux/io.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/miscdevice.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/random.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/pci.h>
 #include <linux/pci_ids.h>
+#include <linux/completion.h>
 
 #include <linux/pci_regs.h>
 
diff --git a/drivers/misc/sgi-gru/grufault.c b/drivers/misc/sgi-gru/grufault.c
index 629edb6486de..2c8d8a4e4a79 100644
--- a/drivers/misc/sgi-gru/grufault.c
+++ b/drivers/misc/sgi-gru/grufault.c
@@ -27,6 +27,7 @@
 #include "grulib.h"
 #include "gru_instructions.h"
 #include <asm/uv/uv_hub.h>
+#include <linux/completion.h>
 
 /* Return codes for vtop functions */
 #define VTOP_SUCCESS               0
diff --git a/drivers/misc/sgi-gru/grukservices.c b/drivers/misc/sgi-gru/grukservices.c
index 37e804bbb1f2..62ca98e9953b 100644
--- a/drivers/misc/sgi-gru/grukservices.c
+++ b/drivers/misc/sgi-gru/grukservices.c
@@ -16,6 +16,7 @@
 #include <linux/miscdevice.h>
 #include <linux/proc_fs.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/sync_core.h>
 #include <linux/uaccess.h>
 #include <linux/delay.h>
@@ -27,6 +28,7 @@
 #include "grukservices.h"
 #include "gru_instructions.h"
 #include <asm/uv/uv_hub.h>
+#include <linux/completion.h>
 
 /*
  * Kernel GRU Usage
diff --git a/drivers/misc/sgi-gru/gruprocfs.c b/drivers/misc/sgi-gru/gruprocfs.c
index 97b8b38ab47d..0aa3fbe75d2e 100644
--- a/drivers/misc/sgi-gru/gruprocfs.c
+++ b/drivers/misc/sgi-gru/gruprocfs.c
@@ -11,6 +11,7 @@
 
 #include <linux/proc_fs.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/uaccess.h>
 #include "gru.h"
diff --git a/drivers/misc/sgi-xp/xpc_channel.c b/drivers/misc/sgi-xp/xpc_channel.c
index 8e6607fc8a67..cc5178d6d310 100644
--- a/drivers/misc/sgi-xp/xpc_channel.c
+++ b/drivers/misc/sgi-xp/xpc_channel.c
@@ -16,6 +16,7 @@
 
 #include <linux/device.h>
 #include "xpc.h"
+#include <linux/completion.h>
 
 /*
  * Process a connect message from a remote partition.
diff --git a/drivers/misc/sgi-xp/xpc_main.c b/drivers/misc/sgi-xp/xpc_main.c
index 61b66e318488..d490db5d4e1b 100644
--- a/drivers/misc/sgi-xp/xpc_main.c
+++ b/drivers/misc/sgi-xp/xpc_main.c
@@ -53,6 +53,7 @@
 #include <linux/kdebug.h>
 #include <linux/kthread.h>
 #include "xpc.h"
+#include <linux/completion.h>
 
 #ifdef CONFIG_X86_64
 #include <asm/traps.h>
diff --git a/drivers/misc/smpro-misc.c b/drivers/misc/smpro-misc.c
index 6c427141e51b..2e878212662e 100644
--- a/drivers/misc/smpro-misc.c
+++ b/drivers/misc/smpro-misc.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/kstrtox.h>
 
 /* Boot Stage/Progress Registers */
 #define BOOTSTAGE	0xB0
diff --git a/drivers/misc/ti-st/st_kim.c b/drivers/misc/ti-st/st_kim.c
index 4b1be0bb6ac0..0a23292fb773 100644
--- a/drivers/misc/ti-st/st_kim.c
+++ b/drivers/misc/ti-st/st_kim.c
@@ -12,6 +12,7 @@
 #include <linux/jiffies.h>
 #include <linux/firmware.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/gpio.h>
 #include <linux/debugfs.h>
@@ -19,6 +20,7 @@
 #include <linux/sched.h>
 #include <linux/sysfs.h>
 #include <linux/tty.h>
+#include <linux/completion.h>
 
 #include <linux/skbuff.h>
 #include <linux/ti_wilink_st.h>
diff --git a/drivers/misc/tifm_7xx1.c b/drivers/misc/tifm_7xx1.c
index 7dd86a9858ab..5ae4ed104a6c 100644
--- a/drivers/misc/tifm_7xx1.c
+++ b/drivers/misc/tifm_7xx1.c
@@ -8,6 +8,7 @@
 #include <linux/tifm.h>
 #include <linux/dma-mapping.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #define DRIVER_NAME "tifm_7xx1"
 #define DRIVER_VERSION "0.8"
diff --git a/drivers/misc/tifm_core.c b/drivers/misc/tifm_core.c
index eee9b6581604..810bf6290ab8 100644
--- a/drivers/misc/tifm_core.c
+++ b/drivers/misc/tifm_core.c
@@ -10,6 +10,7 @@
 #include <linux/init.h>
 #include <linux/idr.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "tifm_core"
 #define DRIVER_VERSION "0.8"
diff --git a/drivers/misc/tsl2550.c b/drivers/misc/tsl2550.c
index a3bc2823143e..bf831bf0ac87 100644
--- a/drivers/misc/tsl2550.c
+++ b/drivers/misc/tsl2550.c
@@ -9,7 +9,9 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #define TSL2550_DRV_NAME	"tsl2550"
 #define DRIVER_VERSION		"1.2"
diff --git a/drivers/misc/uacce/uacce.c b/drivers/misc/uacce/uacce.c
index bdc2e6fda782..231b714eafc2 100644
--- a/drivers/misc/uacce/uacce.c
+++ b/drivers/misc/uacce/uacce.c
@@ -2,6 +2,7 @@
 #include <linux/compat.h>
 #include <linux/dma-mapping.h>
 #include <linux/iommu.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/poll.h>
 #include <linux/slab.h>
diff --git a/drivers/misc/vcpu_stall_detector.c b/drivers/misc/vcpu_stall_detector.c
index 6479c962da1a..be69d9c4a993 100644
--- a/drivers/misc/vcpu_stall_detector.c
+++ b/drivers/misc/vcpu_stall_detector.c
@@ -17,6 +17,7 @@
 #include <linux/percpu.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/hrtimer.h>
 
 #define VCPU_STALL_REG_STATUS		(0x00)
 #define VCPU_STALL_REG_LOAD_CNT		(0x04)
diff --git a/drivers/misc/vmw_balloon.c b/drivers/misc/vmw_balloon.c
index c817d8c21641..219ae75f0a34 100644
--- a/drivers/misc/vmw_balloon.c
+++ b/drivers/misc/vmw_balloon.c
@@ -22,6 +22,7 @@
 #include <linux/mm.h>
 #include <linux/vmalloc.h>
 #include <linux/sched.h>
+#include <linux/shrinker.h>
 #include <linux/module.h>
 #include <linux/workqueue.h>
 #include <linux/debugfs.h>
diff --git a/drivers/misc/xilinx_sdfec.c b/drivers/misc/xilinx_sdfec.c
index 94a0ee19bf20..4b4ddf6f8dde 100644
--- a/drivers/misc/xilinx_sdfec.c
+++ b/drivers/misc/xilinx_sdfec.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/miscdevice.h>
+#include <linux/idr.h>
 #include <linux/io.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
@@ -22,6 +23,7 @@
 #include <linux/clk.h>
 #include <linux/compat.h>
 #include <linux/highmem.h>
+#include <linux/sprintf.h>
 
 #include <uapi/misc/xilinx_sdfec.h>
 
diff --git a/drivers/misc/xilinx_tmr_manager.c b/drivers/misc/xilinx_tmr_manager.c
index 03912a90fd95..f5532f2d3f06 100644
--- a/drivers/misc/xilinx_tmr_manager.c
+++ b/drivers/misc/xilinx_tmr_manager.c
@@ -14,6 +14,7 @@
  */
 
 #include <asm/xilinx_mb_manager.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
diff --git a/drivers/mmc/core/block.c b/drivers/mmc/core/block.c
index bd165cef2bbc..bb7200bc9888 100644
--- a/drivers/mmc/core/block.c
+++ b/drivers/mmc/core/block.c
@@ -21,6 +21,8 @@
 #include <linux/moduleparam.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/fs.h>
diff --git a/drivers/mmc/core/mmc.c b/drivers/mmc/core/mmc.c
index f410bee50132..082471970afc 100644
--- a/drivers/mmc/core/mmc.c
+++ b/drivers/mmc/core/mmc.c
@@ -10,6 +10,7 @@
 #include <linux/err.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/pm_runtime.h>
 #include <linux/random.h>
diff --git a/drivers/mmc/core/mmc_test.c b/drivers/mmc/core/mmc_test.c
index 8f7f587a0025..1fce5969be50 100644
--- a/drivers/mmc/core/mmc_test.c
+++ b/drivers/mmc/core/mmc_test.c
@@ -8,6 +8,8 @@
 #include <linux/mmc/host.h>
 #include <linux/mmc/mmc.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 
 #include <linux/scatterlist.h>
 #include <linux/list.h>
diff --git a/drivers/mmc/host/bcm2835.c b/drivers/mmc/host/bcm2835.c
index 35d8fdea668b..99fe9afa6934 100644
--- a/drivers/mmc/host/bcm2835.c
+++ b/drivers/mmc/host/bcm2835.c
@@ -42,6 +42,7 @@
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/mmc/host/cqhci-core.c b/drivers/mmc/host/cqhci-core.c
index 41e94cd14109..43f4851fdfde 100644
--- a/drivers/mmc/host/cqhci-core.c
+++ b/drivers/mmc/host/cqhci-core.c
@@ -6,12 +6,14 @@
 #include <linux/highmem.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
 #include <linux/scatterlist.h>
 #include <linux/platform_device.h>
 #include <linux/ktime.h>
+#include <linux/completion.h>
 
 #include <linux/mmc/mmc.h>
 #include <linux/mmc/host.h>
diff --git a/drivers/mmc/host/dw_mmc.c b/drivers/mmc/host/dw_mmc.c
index 829af2c98a44..d6b25229602b 100644
--- a/drivers/mmc/host/dw_mmc.c
+++ b/drivers/mmc/host/dw_mmc.c
@@ -9,6 +9,7 @@
 
 #include <linux/blkdev.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/mmc/host/litex_mmc.c b/drivers/mmc/host/litex_mmc.c
index 4ec8072dc60b..9b8c6cb35e8f 100644
--- a/drivers/mmc/host/litex_mmc.c
+++ b/drivers/mmc/host/litex_mmc.c
@@ -11,6 +11,7 @@
 
 #include <linux/bits.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
diff --git a/drivers/mmc/host/meson-gx-mmc.c b/drivers/mmc/host/meson-gx-mmc.c
index c7c067b9415a..cf0d89a7dbe8 100644
--- a/drivers/mmc/host/meson-gx-mmc.c
+++ b/drivers/mmc/host/meson-gx-mmc.c
@@ -27,6 +27,7 @@
 #include <linux/interrupt.h>
 #include <linux/bitfield.h>
 #include <linux/pinctrl/consumer.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME "meson-gx-mmc"
 
diff --git a/drivers/mmc/host/meson-mx-sdhc-clkc.c b/drivers/mmc/host/meson-mx-sdhc-clkc.c
index 19200b7079a6..7b717050c5d5 100644
--- a/drivers/mmc/host/meson-mx-sdhc-clkc.c
+++ b/drivers/mmc/host/meson-mx-sdhc-clkc.c
@@ -9,6 +9,7 @@
 #include <linux/clk-provider.h>
 #include <linux/device.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "meson-mx-sdhc.h"
 
diff --git a/drivers/mmc/host/mmc_spi.c b/drivers/mmc/host/mmc_spi.c
index bf35761f783a..b881c1850a5a 100644
--- a/drivers/mmc/host/mmc_spi.c
+++ b/drivers/mmc/host/mmc_spi.c
@@ -19,6 +19,7 @@
 #include <linux/crc7.h>
 #include <linux/crc-itu-t.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 
 #include <linux/mmc/host.h>
 #include <linux/mmc/mmc.h>		/* for R1_SPI_* bit values */
diff --git a/drivers/mmc/host/moxart-mmc.c b/drivers/mmc/host/moxart-mmc.c
index 5cfdd3a86e54..9608bcc4c0b3 100644
--- a/drivers/mmc/host/moxart-mmc.c
+++ b/drivers/mmc/host/moxart-mmc.c
@@ -20,6 +20,7 @@
 #include <linux/errno.h>
 #include <linux/interrupt.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
 #include <linux/mmc/host.h>
diff --git a/drivers/mmc/host/mtk-sd.c b/drivers/mmc/host/mtk-sd.c
index 1634b1f5d201..d4a51f71304e 100644
--- a/drivers/mmc/host/mtk-sd.c
+++ b/drivers/mmc/host/mtk-sd.c
@@ -12,6 +12,7 @@
 #include <linux/iopoll.h>
 #include <linux/ioport.h>
 #include <linux/irq.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of.h>
 #include <linux/of_gpio.h>
 #include <linux/pinctrl/consumer.h>
diff --git a/drivers/mmc/host/omap.c b/drivers/mmc/host/omap.c
index 9fb8995b43a1..89ee5e1dea60 100644
--- a/drivers/mmc/host/omap.c
+++ b/drivers/mmc/host/omap.c
@@ -18,6 +18,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/delay.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/of.h>
 #include <linux/mmc/host.h>
diff --git a/drivers/mmc/host/omap_hsmmc.c b/drivers/mmc/host/omap_hsmmc.c
index e120aeb869b8..d7a00ef03886 100644
--- a/drivers/mmc/host/omap_hsmmc.c
+++ b/drivers/mmc/host/omap_hsmmc.c
@@ -26,6 +26,7 @@
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/clk.h>
 #include <linux/of.h>
diff --git a/drivers/mmc/host/owl-mmc.c b/drivers/mmc/host/owl-mmc.c
index fc08f25c34eb..2a1cebafe8a9 100644
--- a/drivers/mmc/host/owl-mmc.c
+++ b/drivers/mmc/host/owl-mmc.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-direction.h>
diff --git a/drivers/mmc/host/renesas_sdhi_sys_dmac.c b/drivers/mmc/host/renesas_sdhi_sys_dmac.c
index 9cf7f9feab72..8057aaad1b2a 100644
--- a/drivers/mmc/host/renesas_sdhi_sys_dmac.c
+++ b/drivers/mmc/host/renesas_sdhi_sys_dmac.c
@@ -20,6 +20,7 @@
 #include <linux/pagemap.h>
 #include <linux/scatterlist.h>
 #include <linux/sys_soc.h>
+#include <linux/completion.h>
 
 #include "renesas_sdhi.h"
 #include "tmio_mmc.h"
diff --git a/drivers/mmc/host/rtsx_usb_sdmmc.c b/drivers/mmc/host/rtsx_usb_sdmmc.c
index ded9b6849e35..5b60fef201fe 100644
--- a/drivers/mmc/host/rtsx_usb_sdmmc.c
+++ b/drivers/mmc/host/rtsx_usb_sdmmc.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/delay.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/mmc/host.h>
 #include <linux/mmc/mmc.h>
diff --git a/drivers/mmc/host/sdhci-omap.c b/drivers/mmc/host/sdhci-omap.c
index e78faef67d7a..321466cf948b 100644
--- a/drivers/mmc/host/sdhci-omap.c
+++ b/drivers/mmc/host/sdhci-omap.c
@@ -17,6 +17,7 @@
 #include <linux/pm_wakeirq.h>
 #include <linux/regulator/consumer.h>
 #include <linux/pinctrl/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/thermal.h>
 
diff --git a/drivers/mmc/host/sdhci-s3c.c b/drivers/mmc/host/sdhci-s3c.c
index 0e8a8ac14e56..4265c6e9d269 100644
--- a/drivers/mmc/host/sdhci-s3c.c
+++ b/drivers/mmc/host/sdhci-s3c.c
@@ -23,6 +23,7 @@
 #include <linux/of_gpio.h>
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <linux/mmc/host.h>
 
diff --git a/drivers/mmc/host/sdhci.c b/drivers/mmc/host/sdhci.c
index c79f73459915..5d023eed8862 100644
--- a/drivers/mmc/host/sdhci.c
+++ b/drivers/mmc/host/sdhci.c
@@ -12,6 +12,7 @@
 #include <linux/bitfield.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/ktime.h>
 #include <linux/highmem.h>
 #include <linux/io.h>
@@ -23,6 +24,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/pm_runtime.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <linux/leds.h>
 
diff --git a/drivers/mmc/host/uniphier-sd.c b/drivers/mmc/host/uniphier-sd.c
index 1404989e6151..580e27ba7966 100644
--- a/drivers/mmc/host/uniphier-sd.c
+++ b/drivers/mmc/host/uniphier-sd.c
@@ -8,6 +8,7 @@
 #include <linux/clk.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mfd/syscon.h>
 #include <linux/mfd/tmio.h>
 #include <linux/mmc/host.h>
diff --git a/drivers/mmc/host/vub300.c b/drivers/mmc/host/vub300.c
index fd67c0682b38..9c6af0bdd566 100644
--- a/drivers/mmc/host/vub300.c
+++ b/drivers/mmc/host/vub300.c
@@ -38,6 +38,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/kref.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/usb.h>
 #include <linux/mutex.h>
@@ -49,6 +50,7 @@
 #include <linux/ctype.h>
 #include <linux/firmware.h>
 #include <linux/scatterlist.h>
+#include <linux/completion.h>
 
 struct host_controller_info {
 	u8 info_size;
diff --git a/drivers/mmc/host/wmt-sdmmc.c b/drivers/mmc/host/wmt-sdmmc.c
index 77d5f1d24489..e2764230f973 100644
--- a/drivers/mmc/host/wmt-sdmmc.c
+++ b/drivers/mmc/host/wmt-sdmmc.c
@@ -16,6 +16,7 @@
 #include <linux/io.h>
 #include <linux/irq.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 
 #include <linux/of.h>
diff --git a/drivers/most/configfs.c b/drivers/most/configfs.c
index 36d8c917f65f..f714e55e8b59 100644
--- a/drivers/most/configfs.c
+++ b/drivers/most/configfs.c
@@ -10,7 +10,9 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/configfs.h>
+#include <linux/kstrtox.h>
 #include <linux/most.h>
+#include <linux/sprintf.h>
 
 #define MAX_STRING_SIZE 80
 
diff --git a/drivers/most/core.c b/drivers/most/core.c
index e4412c7d25b0..d64ec95dfe63 100644
--- a/drivers/most/core.c
+++ b/drivers/most/core.c
@@ -12,6 +12,7 @@
 #include <linux/device.h>
 #include <linux/list.h>
 #include <linux/poll.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/kobject.h>
 #include <linux/mutex.h>
diff --git a/drivers/most/most_snd.c b/drivers/most/most_snd.c
index 45d762804c5e..174905973404 100644
--- a/drivers/most/most_snd.c
+++ b/drivers/most/most_snd.c
@@ -10,8 +10,10 @@
 #include <linux/module.h>
 #include <linux/printk.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/drivers/most/most_usb.c b/drivers/most/most_usb.c
index 485d5ca39951..6a94a9ca9824 100644
--- a/drivers/most/most_usb.c
+++ b/drivers/most/most_usb.c
@@ -7,10 +7,13 @@
 
 #include <linux/module.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/list.h>
 #include <linux/completion.h>
diff --git a/drivers/mtd/chips/gen_probe.c b/drivers/mtd/chips/gen_probe.c
index 9e53fcd7600d..389c867ad208 100644
--- a/drivers/mtd/chips/gen_probe.c
+++ b/drivers/mtd/chips/gen_probe.c
@@ -11,6 +11,7 @@
 #include <linux/mtd/map.h>
 #include <linux/mtd/cfi.h>
 #include <linux/mtd/gen_probe.h>
+#include <linux/sprintf.h>
 
 static struct mtd_info *check_cmd_set(struct map_info *, int);
 static struct cfi_private *genprobe_ident_chips(struct map_info *map,
diff --git a/drivers/mtd/devices/block2mtd.c b/drivers/mtd/devices/block2mtd.c
index 97a00ec9a4d4..5ae0ea459ee8 100644
--- a/drivers/mtd/devices/block2mtd.c
+++ b/drivers/mtd/devices/block2mtd.c
@@ -18,10 +18,13 @@
 
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/file.h> // for fput()
 #include <linux/fs.h>
 #include <linux/blkdev.h>
 #include <linux/backing-dev.h>
 #include <linux/bio.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/list.h>
 #include <linux/init.h>
@@ -30,6 +33,7 @@
 #include <linux/mount.h>
 #include <linux/slab.h>
 #include <linux/major.h>
+#include <linux/sprintf.h>
 
 /* Maximum number of comma-separated items in the 'block2mtd=' parameter */
 #define BLOCK2MTD_PARAM_MAX_COUNT 3
diff --git a/drivers/mtd/devices/docg3.c b/drivers/mtd/devices/docg3.c
index a2b643af7019..91d22b2a9a41 100644
--- a/drivers/mtd/devices/docg3.c
+++ b/drivers/mtd/devices/docg3.c
@@ -10,6 +10,7 @@
 #include <linux/errno.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/io.h>
diff --git a/drivers/mtd/devices/mtd_dataflash.c b/drivers/mtd/devices/mtd_dataflash.c
index ec52277e3dd5..b6492707c781 100644
--- a/drivers/mtd/devices/mtd_dataflash.c
+++ b/drivers/mtd/devices/mtd_dataflash.c
@@ -13,6 +13,7 @@
 #include <linux/err.h>
 #include <linux/math64.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <linux/spi/spi.h>
 #include <linux/spi/flash.h>
diff --git a/drivers/mtd/devices/slram.c b/drivers/mtd/devices/slram.c
index 28131a127d06..7cdbb5360acf 100644
--- a/drivers/mtd/devices/slram.c
+++ b/drivers/mtd/devices/slram.c
@@ -34,6 +34,7 @@
 #include <linux/uaccess.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/ptrace.h>
 #include <linux/slab.h>
 #include <linux/string.h>
diff --git a/drivers/mtd/maps/amd76xrom.c b/drivers/mtd/maps/amd76xrom.c
index 281fcbaa74e7..d917949d89dc 100644
--- a/drivers/mtd/maps/amd76xrom.c
+++ b/drivers/mtd/maps/amd76xrom.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/mtd/maps/ck804xrom.c b/drivers/mtd/maps/ck804xrom.c
index c0216bc740cc..00369dd57bea 100644
--- a/drivers/mtd/maps/ck804xrom.c
+++ b/drivers/mtd/maps/ck804xrom.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/mtd/maps/esb2rom.c b/drivers/mtd/maps/esb2rom.c
index 15d5b76ff504..bc0bf66f4e7d 100644
--- a/drivers/mtd/maps/esb2rom.c
+++ b/drivers/mtd/maps/esb2rom.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/mtd/maps/ichxrom.c b/drivers/mtd/maps/ichxrom.c
index c8b2793691db..3c769e7588ea 100644
--- a/drivers/mtd/maps/ichxrom.c
+++ b/drivers/mtd/maps/ichxrom.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/mtd/maps/pcmciamtd.c b/drivers/mtd/maps/pcmciamtd.c
index 2ac79e1cedd9..d0ba32bb3a86 100644
--- a/drivers/mtd/maps/pcmciamtd.c
+++ b/drivers/mtd/maps/pcmciamtd.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/init.h>
 #include <asm/io.h>
diff --git a/drivers/mtd/maps/sa1100-flash.c b/drivers/mtd/maps/sa1100-flash.c
index d4ce2376d33f..968e748149f8 100644
--- a/drivers/mtd/maps/sa1100-flash.c
+++ b/drivers/mtd/maps/sa1100-flash.c
@@ -5,6 +5,7 @@
  * (C) 2000 Nicolas Pitre <nico@fluxnic.net>
  */
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ioport.h>
 #include <linux/kernel.h>
diff --git a/drivers/mtd/maps/vmu-flash.c b/drivers/mtd/maps/vmu-flash.c
index 53019d313db7..7740a6578887 100644
--- a/drivers/mtd/maps/vmu-flash.c
+++ b/drivers/mtd/maps/vmu-flash.c
@@ -12,6 +12,7 @@
 #include <linux/maple.h>
 #include <linux/mtd/mtd.h>
 #include <linux/mtd/map.h>
+#include <linux/sprintf.h>
 
 struct vmu_cache {
 	unsigned char *buffer;		/* Cache */
diff --git a/drivers/mtd/mtd_blkdevs.c b/drivers/mtd/mtd_blkdevs.c
index f0526dcc2162..cb09e9fe5c6a 100644
--- a/drivers/mtd/mtd_blkdevs.c
+++ b/drivers/mtd/mtd_blkdevs.c
@@ -5,6 +5,7 @@
  * Copyright  2003-2010 David Woodhouse <dwmw2@infradead.org>
  */
 
+#include <linux/highmem.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/module.h>
@@ -18,6 +19,7 @@
 #include <linux/spinlock.h>
 #include <linux/hdreg.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "mtdcore.h"
diff --git a/drivers/mtd/mtdcore.c b/drivers/mtd/mtdcore.c
index 5887feb347a4..b22388633bf7 100644
--- a/drivers/mtd/mtdcore.c
+++ b/drivers/mtd/mtdcore.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/ptrace.h>
 #include <linux/seq_file.h>
 #include <linux/string.h>
diff --git a/drivers/mtd/mtdoops.c b/drivers/mtd/mtdoops.c
index 2f11585b5613..c55d56c374d6 100644
--- a/drivers/mtd/mtdoops.c
+++ b/drivers/mtd/mtdoops.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/console.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/mtd/mtdpstore.c b/drivers/mtd/mtdpstore.c
index 7ac8ac901306..2ec6c033475e 100644
--- a/drivers/mtd/mtdpstore.c
+++ b/drivers/mtd/mtdpstore.c
@@ -3,6 +3,7 @@
 #define dev_fmt(fmt) "mtdoops-pstore: " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pstore_blk.h>
 #include <linux/mtd/mtd.h>
diff --git a/drivers/mtd/mtdsuper.c b/drivers/mtd/mtdsuper.c
index b7e3763c47f0..c1c9cc839523 100644
--- a/drivers/mtd/mtdsuper.c
+++ b/drivers/mtd/mtdsuper.c
@@ -12,6 +12,7 @@
 #include <linux/namei.h>
 #include <linux/export.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/major.h>
 #include <linux/backing-dev.h>
diff --git a/drivers/mtd/mtdswap.c b/drivers/mtd/mtdswap.c
index 680366616da2..29816037e8bc 100644
--- a/drivers/mtd/mtdswap.c
+++ b/drivers/mtd/mtdswap.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mtd/mtd.h>
 #include <linux/mtd/blktrans.h>
diff --git a/drivers/mtd/nand/ecc-mtk.c b/drivers/mtd/nand/ecc-mtk.c
index c75bb8b80cc1..dffd8c2ee997 100644
--- a/drivers/mtd/nand/ecc-mtk.c
+++ b/drivers/mtd/nand/ecc-mtk.c
@@ -10,6 +10,8 @@
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/iopoll.h>
 #include <linux/of.h>
diff --git a/drivers/mtd/nand/ecc-mxic.c b/drivers/mtd/nand/ecc-mxic.c
index 47e10945b8d2..152ff82fc248 100644
--- a/drivers/mtd/nand/ecc-mxic.c
+++ b/drivers/mtd/nand/ecc-mxic.c
@@ -22,6 +22,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 /* DPE Configuration */
 #define DP_CONFIG 0x00
diff --git a/drivers/mtd/nand/onenand/onenand_base.c b/drivers/mtd/nand/onenand/onenand_base.c
index f66385faf631..d32274a728f4 100644
--- a/drivers/mtd/nand/onenand/onenand_base.c
+++ b/drivers/mtd/nand/onenand/onenand_base.c
@@ -20,6 +20,7 @@
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
 #include <linux/sched.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/jiffies.h>
diff --git a/drivers/mtd/nand/onenand/onenand_omap2.c b/drivers/mtd/nand/onenand/onenand_omap2.c
index a12f8f3efd07..080d8d4f789b 100644
--- a/drivers/mtd/nand/onenand/onenand_omap2.c
+++ b/drivers/mtd/nand/onenand/onenand_omap2.c
@@ -23,6 +23,7 @@
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/gpio/consumer.h>
+#include <linux/completion.h>
 
 #include <asm/mach/flash.h>
 
diff --git a/drivers/mtd/nand/onenand/onenand_samsung.c b/drivers/mtd/nand/onenand/onenand_samsung.c
index fd6890a03d55..588a7351e94f 100644
--- a/drivers/mtd/nand/onenand/onenand_samsung.c
+++ b/drivers/mtd/nand/onenand/onenand_samsung.c
@@ -21,6 +21,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/completion.h>
 
 #include "samsung.h"
 
diff --git a/drivers/mtd/nand/raw/arasan-nand-controller.c b/drivers/mtd/nand/raw/arasan-nand-controller.c
index 2ff1d2b13e3c..c3caecee8319 100644
--- a/drivers/mtd/nand/raw/arasan-nand-controller.c
+++ b/drivers/mtd/nand/raw/arasan-nand-controller.c
@@ -18,6 +18,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/interrupt.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/mtd/mtd.h>
 #include <linux/mtd/partitions.h>
diff --git a/drivers/mtd/nand/raw/atmel/nand-controller.c b/drivers/mtd/nand/raw/atmel/nand-controller.c
index 4cb478bbee4a..4fba42901330 100644
--- a/drivers/mtd/nand/raw/atmel/nand-controller.c
+++ b/drivers/mtd/nand/raw/atmel/nand-controller.c
@@ -46,6 +46,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
 #include <linux/genalloc.h>
diff --git a/drivers/mtd/nand/raw/brcmnand/brcmnand.c b/drivers/mtd/nand/raw/brcmnand/brcmnand.c
index 8faca43ae1ff..28e9ca5ce003 100644
--- a/drivers/mtd/nand/raw/brcmnand/brcmnand.c
+++ b/drivers/mtd/nand/raw/brcmnand/brcmnand.c
@@ -4,6 +4,8 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/delay.h>
@@ -26,6 +28,7 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/static_key.h>
 #include <linux/list.h>
 #include <linux/log2.h>
diff --git a/drivers/mtd/nand/raw/cadence-nand-controller.c b/drivers/mtd/nand/raw/cadence-nand-controller.c
index 04f84d87c657..7d1ddb35324b 100644
--- a/drivers/mtd/nand/raw/cadence-nand-controller.c
+++ b/drivers/mtd/nand/raw/cadence-nand-controller.c
@@ -9,6 +9,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
 #include <linux/interrupt.h>
diff --git a/drivers/mtd/nand/raw/cafe_nand.c b/drivers/mtd/nand/raw/cafe_nand.c
index 66385c4fb994..fb0f9b56793f 100644
--- a/drivers/mtd/nand/raw/cafe_nand.c
+++ b/drivers/mtd/nand/raw/cafe_nand.c
@@ -12,6 +12,7 @@
 #define DEBUG
 
 #include <linux/device.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #undef DEBUG
 #include <linux/mtd/mtd.h>
 #include <linux/mtd/rawnand.h>
diff --git a/drivers/mtd/nand/raw/cs553x_nand.c b/drivers/mtd/nand/raw/cs553x_nand.c
index f0a15717cf05..fac7750813cd 100644
--- a/drivers/mtd/nand/raw/cs553x_nand.c
+++ b/drivers/mtd/nand/raw/cs553x_nand.c
@@ -21,6 +21,7 @@
 #include <linux/mtd/rawnand.h>
 #include <linux/mtd/partitions.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #include <asm/msr.h>
 
diff --git a/drivers/mtd/nand/raw/denali.c b/drivers/mtd/nand/raw/denali.c
index fa2439cb4daa..7fac6525c2ca 100644
--- a/drivers/mtd/nand/raw/denali.c
+++ b/drivers/mtd/nand/raw/denali.c
@@ -12,6 +12,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/mtd/mtd.h>
 #include <linux/mtd/rawnand.h>
diff --git a/drivers/mtd/nand/raw/fsl_elbc_nand.c b/drivers/mtd/nand/raw/fsl_elbc_nand.c
index df6a0d5c86bb..3c389141fb61 100644
--- a/drivers/mtd/nand/raw/fsl_elbc_nand.c
+++ b/drivers/mtd/nand/raw/fsl_elbc_nand.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/string.h>
diff --git a/drivers/mtd/nand/raw/fsl_ifc_nand.c b/drivers/mtd/nand/raw/fsl_ifc_nand.c
index f0e2318ce088..b67d1a5c4c11 100644
--- a/drivers/mtd/nand/raw/fsl_ifc_nand.c
+++ b/drivers/mtd/nand/raw/fsl_ifc_nand.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/of_address.h>
diff --git a/drivers/mtd/nand/raw/gpmi-nand/gpmi-nand.c b/drivers/mtd/nand/raw/gpmi-nand/gpmi-nand.c
index e71ad2fcec23..62cc0e73f27d 100644
--- a/drivers/mtd/nand/raw/gpmi-nand/gpmi-nand.c
+++ b/drivers/mtd/nand/raw/gpmi-nand/gpmi-nand.c
@@ -6,6 +6,7 @@
  * Copyright (C) 2008 Embedded Alley Solutions, Inc.
  */
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/sched/task_stack.h>
diff --git a/drivers/mtd/nand/raw/hisi504_nand.c b/drivers/mtd/nand/raw/hisi504_nand.c
index fe291a2e5c77..2ac723579384 100644
--- a/drivers/mtd/nand/raw/hisi504_nand.c
+++ b/drivers/mtd/nand/raw/hisi504_nand.c
@@ -13,6 +13,7 @@
 #include <linux/mtd/mtd.h>
 #include <linux/sizes.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/delay.h>
diff --git a/drivers/mtd/nand/raw/lpc32xx_mlc.c b/drivers/mtd/nand/raw/lpc32xx_mlc.c
index 488fd452611a..2e4360b3f62f 100644
--- a/drivers/mtd/nand/raw/lpc32xx_mlc.c
+++ b/drivers/mtd/nand/raw/lpc32xx_mlc.c
@@ -20,6 +20,7 @@
 #include <linux/mtd/rawnand.h>
 #include <linux/mtd/partitions.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/delay.h>
 #include <linux/completion.h>
diff --git a/drivers/mtd/nand/raw/lpc32xx_slc.c b/drivers/mtd/nand/raw/lpc32xx_slc.c
index 1c5fa855b9f2..9689800cc96b 100644
--- a/drivers/mtd/nand/raw/lpc32xx_slc.c
+++ b/drivers/mtd/nand/raw/lpc32xx_slc.c
@@ -17,6 +17,7 @@
 #include <linux/mtd/rawnand.h>
 #include <linux/mtd/partitions.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/delay.h>
 #include <linux/io.h>
diff --git a/drivers/mtd/nand/raw/marvell_nand.c b/drivers/mtd/nand/raw/marvell_nand.c
index 5b0f5a9cef81..6eedab6161dc 100644
--- a/drivers/mtd/nand/raw/marvell_nand.c
+++ b/drivers/mtd/nand/raw/marvell_nand.c
@@ -76,6 +76,7 @@
 
 #include <linux/module.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/mtd/rawnand.h>
 #include <linux/of.h>
 #include <linux/iopoll.h>
diff --git a/drivers/mtd/nand/raw/meson_nand.c b/drivers/mtd/nand/raw/meson_nand.c
index cdb58aca59c0..6d2ee89e47ea 100644
--- a/drivers/mtd/nand/raw/meson_nand.c
+++ b/drivers/mtd/nand/raw/meson_nand.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
+#include <linux/completion.h>
 #include <linux/mtd/rawnand.h>
 #include <linux/mtd/mtd.h>
 #include <linux/mfd/syscon.h>
diff --git a/drivers/mtd/nand/raw/mtk_nand.c b/drivers/mtd/nand/raw/mtk_nand.c
index 60198e33d2d5..38e881e930c1 100644
--- a/drivers/mtd/nand/raw/mtk_nand.c
+++ b/drivers/mtd/nand/raw/mtk_nand.c
@@ -11,6 +11,8 @@
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mtd/rawnand.h>
 #include <linux/mtd/mtd.h>
 #include <linux/module.h>
diff --git a/drivers/mtd/nand/raw/mxc_nand.c b/drivers/mtd/nand/raw/mxc_nand.c
index 003008355b3c..ce936609bd05 100644
--- a/drivers/mtd/nand/raw/mxc_nand.c
+++ b/drivers/mtd/nand/raw/mxc_nand.c
@@ -15,6 +15,7 @@
 #include <linux/device.h>
 #include <linux/platform_device.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/io.h>
 #include <linux/irq.h>
diff --git a/drivers/mtd/nand/raw/mxic_nand.c b/drivers/mtd/nand/raw/mxic_nand.c
index be8050e84b4f..e9767984ad81 100644
--- a/drivers/mtd/nand/raw/mxic_nand.c
+++ b/drivers/mtd/nand/raw/mxic_nand.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
 #include <linux/interrupt.h>
diff --git a/drivers/mtd/nand/raw/nandsim.c b/drivers/mtd/nand/raw/nandsim.c
index 179b28459b4b..d9af2c95282b 100644
--- a/drivers/mtd/nand/raw/nandsim.c
+++ b/drivers/mtd/nand/raw/nandsim.c
@@ -13,6 +13,8 @@
 #define pr_fmt(fmt)  "[nandsim]" fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/mtd/nand/raw/ndfc.c b/drivers/mtd/nand/raw/ndfc.c
index 3bb32a7c6d67..2bc5ce97e744 100644
--- a/drivers/mtd/nand/raw/ndfc.c
+++ b/drivers/mtd/nand/raw/ndfc.c
@@ -26,6 +26,7 @@
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #define NDFC_MAX_CS    4
 
diff --git a/drivers/mtd/nand/raw/omap2.c b/drivers/mtd/nand/raw/omap2.c
index cf76afc6c0ed..48c2ca3c0e5f 100644
--- a/drivers/mtd/nand/raw/omap2.c
+++ b/drivers/mtd/nand/raw/omap2.c
@@ -23,6 +23,7 @@
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
+#include <linux/completion.h>
 
 #include <linux/platform_data/elm.h>
 
diff --git a/drivers/mtd/nand/raw/omap_elm.c b/drivers/mtd/nand/raw/omap_elm.c
index 4a97d4a76454..9b6aa48dc7e1 100644
--- a/drivers/mtd/nand/raw/omap_elm.c
+++ b/drivers/mtd/nand/raw/omap_elm.c
@@ -8,6 +8,7 @@
 #define DRIVER_NAME	"omap-elm"
 
 #include <linux/platform_device.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/mtd/nand/raw/qcom_nandc.c b/drivers/mtd/nand/raw/qcom_nandc.c
index b079605c84d3..2aec7e751e28 100644
--- a/drivers/mtd/nand/raw/qcom_nandc.c
+++ b/drivers/mtd/nand/raw/qcom_nandc.c
@@ -4,6 +4,7 @@
  */
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/mtd/nand/raw/r852.c b/drivers/mtd/nand/raw/r852.c
index ed0cf732d20e..3dc55cd8e854 100644
--- a/drivers/mtd/nand/raw/r852.c
+++ b/drivers/mtd/nand/raw/r852.c
@@ -17,6 +17,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <asm/byteorder.h>
+#include <linux/completion.h>
 #include <linux/sched.h>
 #include "sm_common.h"
 #include "r852.h"
diff --git a/drivers/mtd/nand/raw/renesas-nand-controller.c b/drivers/mtd/nand/raw/renesas-nand-controller.c
index c9a01feff8df..740eb9c6bbe5 100644
--- a/drivers/mtd/nand/raw/renesas-nand-controller.c
+++ b/drivers/mtd/nand/raw/renesas-nand-controller.c
@@ -8,6 +8,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/iopoll.h>
diff --git a/drivers/mtd/nand/raw/rockchip-nand-controller.c b/drivers/mtd/nand/raw/rockchip-nand-controller.c
index 7baaef69d70a..3afac3a7e40d 100644
--- a/drivers/mtd/nand/raw/rockchip-nand-controller.c
+++ b/drivers/mtd/nand/raw/rockchip-nand-controller.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
diff --git a/drivers/mtd/nand/raw/stm32_fmc2_nand.c b/drivers/mtd/nand/raw/stm32_fmc2_nand.c
index 88811139aaf5..99c5989ba6d8 100644
--- a/drivers/mtd/nand/raw/stm32_fmc2_nand.c
+++ b/drivers/mtd/nand/raw/stm32_fmc2_nand.c
@@ -6,6 +6,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/errno.h>
diff --git a/drivers/mtd/nand/raw/sunxi_nand.c b/drivers/mtd/nand/raw/sunxi_nand.c
index 4ec17c8bce5a..65b8f891bb2d 100644
--- a/drivers/mtd/nand/raw/sunxi_nand.c
+++ b/drivers/mtd/nand/raw/sunxi_nand.c
@@ -23,6 +23,7 @@
 #include <linux/mtd/rawnand.h>
 #include <linux/mtd/partitions.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/interrupt.h>
diff --git a/drivers/mtd/nand/raw/txx9ndfmc.c b/drivers/mtd/nand/raw/txx9ndfmc.c
index 37f79c019a72..67718fd94c74 100644
--- a/drivers/mtd/nand/raw/txx9ndfmc.c
+++ b/drivers/mtd/nand/raw/txx9ndfmc.c
@@ -17,6 +17,7 @@
 #include <linux/mtd/partitions.h>
 #include <linux/io.h>
 #include <linux/platform_data/txx9/ndfmc.h>
+#include <linux/sprintf.h>
 
 /* TXX9 NDFMC Registers */
 #define TXX9_NDFDTR	0x00
diff --git a/drivers/mtd/nand/raw/vf610_nfc.c b/drivers/mtd/nand/raw/vf610_nfc.c
index f31d23219f91..8500f1022a20 100644
--- a/drivers/mtd/nand/raw/vf610_nfc.c
+++ b/drivers/mtd/nand/raw/vf610_nfc.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/mtd/parsers/bcm47xxpart.c b/drivers/mtd/parsers/bcm47xxpart.c
index 13daf9bffd08..0e447f751753 100644
--- a/drivers/mtd/parsers/bcm47xxpart.c
+++ b/drivers/mtd/parsers/bcm47xxpart.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/bcm47xx_nvram.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
diff --git a/drivers/mtd/parsers/cmdlinepart.c b/drivers/mtd/parsers/cmdlinepart.c
index b34856def816..6bf0d7d03884 100644
--- a/drivers/mtd/parsers/cmdlinepart.c
+++ b/drivers/mtd/parsers/cmdlinepart.c
@@ -43,6 +43,7 @@
 #include <linux/mtd/partitions.h>
 #include <linux/module.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 
 /* debug macro */
 #if 0
diff --git a/drivers/mtd/parsers/ofpart_bcm4908.c b/drivers/mtd/parsers/ofpart_bcm4908.c
index bb072a0940e4..1ab708ad7711 100644
--- a/drivers/mtd/parsers/ofpart_bcm4908.c
+++ b/drivers/mtd/parsers/ofpart_bcm4908.c
@@ -5,6 +5,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/mtd/mtd.h>
 #include <linux/slab.h>
diff --git a/drivers/mtd/parsers/ofpart_linksys_ns.c b/drivers/mtd/parsers/ofpart_linksys_ns.c
index 318c42d0256b..9b6155d6f540 100644
--- a/drivers/mtd/parsers/ofpart_linksys_ns.c
+++ b/drivers/mtd/parsers/ofpart_linksys_ns.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/bcm47xx_nvram.h>
+#include <linux/kstrtox.h>
 #include <linux/mtd/mtd.h>
 #include <linux/mtd/partitions.h>
 
diff --git a/drivers/mtd/parsers/parser_imagetag.c b/drivers/mtd/parsers/parser_imagetag.c
index fab0949aabba..b62bc8bfcfb2 100644
--- a/drivers/mtd/parsers/parser_imagetag.c
+++ b/drivers/mtd/parsers/parser_imagetag.c
@@ -12,6 +12,7 @@
 
 #include <linux/bcm963xx_tag.h>
 #include <linux/crc32.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/sizes.h>
diff --git a/drivers/mtd/parsers/tplink_safeloader.c b/drivers/mtd/parsers/tplink_safeloader.c
index 1c689dafca2a..f6d6248a2a74 100644
--- a/drivers/mtd/parsers/tplink_safeloader.c
+++ b/drivers/mtd/parsers/tplink_safeloader.c
@@ -9,6 +9,7 @@
 #include <linux/mtd/partitions.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define TPLINK_SAFELOADER_DATA_OFFSET		4
 #define TPLINK_SAFELOADER_MAX_PARTS		32
diff --git a/drivers/mtd/tests/readtest.c b/drivers/mtd/tests/readtest.c
index 99670ef91f2b..645c4678b7a6 100644
--- a/drivers/mtd/tests/readtest.c
+++ b/drivers/mtd/tests/readtest.c
@@ -16,6 +16,7 @@
 #include <linux/mtd/mtd.h>
 #include <linux/slab.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #include "mtd_test.h"
 
diff --git a/drivers/mtd/ubi/block.c b/drivers/mtd/ubi/block.c
index 654bd7372cd8..fd3d1c88ba00 100644
--- a/drivers/mtd/ubi/block.c
+++ b/drivers/mtd/ubi/block.c
@@ -31,6 +31,7 @@
 #include <linux/init.h>
 #include <linux/err.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
@@ -41,6 +42,7 @@
 #include <linux/scatterlist.h>
 #include <linux/idr.h>
 #include <asm/div64.h>
+#include <linux/sprintf.h>
 
 #include "ubi-media.h"
 #include "ubi.h"
diff --git a/drivers/mtd/ubi/build.c b/drivers/mtd/ubi/build.c
index 7d4ff1193db6..f736e3161a27 100644
--- a/drivers/mtd/ubi/build.c
+++ b/drivers/mtd/ubi/build.c
@@ -17,8 +17,10 @@
  */
 
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <linux/namei.h>
 #include <linux/stat.h>
diff --git a/drivers/mtd/ubi/debug.c b/drivers/mtd/ubi/debug.c
index d57f52bd2ff3..e3144c840ef0 100644
--- a/drivers/mtd/ubi/debug.c
+++ b/drivers/mtd/ubi/debug.c
@@ -7,6 +7,8 @@
 
 #include "ubi.h"
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
 #include <linux/seq_file.h>
diff --git a/drivers/mtd/ubi/vmt.c b/drivers/mtd/ubi/vmt.c
index 2c867d16f89f..2e672a4e0529 100644
--- a/drivers/mtd/ubi/vmt.c
+++ b/drivers/mtd/ubi/vmt.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/export.h>
 #include "ubi.h"
+#include <linux/sprintf.h>
 
 static int self_check_volumes(struct ubi_device *ubi);
 
diff --git a/drivers/mtd/ubi/wl.c b/drivers/mtd/ubi/wl.c
index a357f3d27f2f..8a74c3cef5ca 100644
--- a/drivers/mtd/ubi/wl.c
+++ b/drivers/mtd/ubi/wl.c
@@ -91,6 +91,7 @@
 #include <linux/kthread.h>
 #include "ubi.h"
 #include "wl.h"
+#include <linux/sprintf.h>
 
 /* Number of physical eraseblocks reserved for wear-leveling purposes */
 #define WL_RESERVED_PEBS 1
diff --git a/drivers/net/Space.c b/drivers/net/Space.c
index dc50797a2ed0..c0482c3ab74d 100644
--- a/drivers/net/Space.c
+++ b/drivers/net/Space.c
@@ -28,6 +28,7 @@
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/netlink.h>
+#include <linux/sprintf.h>
 #include <net/Space.h>
 
 /*
diff --git a/drivers/net/arcnet/arc-rimi.c b/drivers/net/arcnet/arc-rimi.c
index 8c3ccc7c83cd..573e5b7a0caa 100644
--- a/drivers/net/arcnet/arc-rimi.c
+++ b/drivers/net/arcnet/arc-rimi.c
@@ -37,6 +37,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include "arcdevice.h"
 #include "com9026.h"
diff --git a/drivers/net/arcnet/arcnet.c b/drivers/net/arcnet/arcnet.c
index 166bfc3c8e6c..c12f1c96c564 100644
--- a/drivers/net/arcnet/arcnet.c
+++ b/drivers/net/arcnet/arcnet.c
@@ -44,6 +44,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/netdevice.h>
diff --git a/drivers/net/arcnet/com20020-isa.c b/drivers/net/arcnet/com20020-isa.c
index 293a621e654c..1d7fc3ddd567 100644
--- a/drivers/net/arcnet/com20020-isa.c
+++ b/drivers/net/arcnet/com20020-isa.c
@@ -31,6 +31,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ioport.h>
 #include <linux/errno.h>
diff --git a/drivers/net/arcnet/com20020-pci.c b/drivers/net/arcnet/com20020-pci.c
index 7b5c8bb02f11..35f5f9bf8331 100644
--- a/drivers/net/arcnet/com20020-pci.c
+++ b/drivers/net/arcnet/com20020-pci.c
@@ -32,6 +32,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ioport.h>
 #include <linux/errno.h>
diff --git a/drivers/net/arcnet/com90io.c b/drivers/net/arcnet/com90io.c
index 37b47749fc8b..c71ca0adcec2 100644
--- a/drivers/net/arcnet/com90io.c
+++ b/drivers/net/arcnet/com90io.c
@@ -38,6 +38,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include "arcdevice.h"
 #include "com9026.h"
diff --git a/drivers/net/arcnet/com90xx.c b/drivers/net/arcnet/com90xx.c
index f49dae194284..74e25cc37b9a 100644
--- a/drivers/net/arcnet/com90xx.c
+++ b/drivers/net/arcnet/com90xx.c
@@ -27,6 +27,7 @@
 
 #define pr_fmt(fmt) "arcnet:" KBUILD_MODNAME ": " fmt
 
+#include <linux/kernel.h> // for get_options()
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
@@ -36,6 +37,7 @@
 #include <linux/netdevice.h>
 #include <linux/slab.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include "arcdevice.h"
 #include "com9026.h"
diff --git a/drivers/net/bonding/bond_main.c b/drivers/net/bonding/bond_main.c
index a8a6c5309518..5204e41504e6 100644
--- a/drivers/net/bonding/bond_main.c
+++ b/drivers/net/bonding/bond_main.c
@@ -34,6 +34,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/filter.h>
diff --git a/drivers/net/bonding/bond_netlink.c b/drivers/net/bonding/bond_netlink.c
index 29b4c3d1b9b6..bb976caf7278 100644
--- a/drivers/net/bonding/bond_netlink.c
+++ b/drivers/net/bonding/bond_netlink.c
@@ -11,6 +11,7 @@
 #include <linux/etherdevice.h>
 #include <linux/if_link.h>
 #include <linux/if_ether.h>
+#include <linux/sprintf.h>
 #include <net/netlink.h>
 #include <net/rtnetlink.h>
 #include <net/bonding.h>
diff --git a/drivers/net/bonding/bond_options.c b/drivers/net/bonding/bond_options.c
index 4cdbc7e084f4..feb4942f6ed5 100644
--- a/drivers/net/bonding/bond_options.c
+++ b/drivers/net/bonding/bond_options.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/hex.h>
 #include <linux/if.h>
 #include <linux/netdevice.h>
 #include <linux/spinlock.h>
@@ -13,6 +14,7 @@
 #include <linux/ctype.h>
 #include <linux/inet.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include <net/bonding.h>
 
diff --git a/drivers/net/bonding/bond_sysfs.c b/drivers/net/bonding/bond_sysfs.c
index 2805135a7205..bb8cb1364682 100644
--- a/drivers/net/bonding/bond_sysfs.c
+++ b/drivers/net/bonding/bond_sysfs.c
@@ -10,6 +10,7 @@
 #include <linux/device.h>
 #include <linux/sched/signal.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/netdevice.h>
diff --git a/drivers/net/caif/caif_serial.c b/drivers/net/caif/caif_serial.c
index ed3a589def6b..3174f892416a 100644
--- a/drivers/net/caif/caif_serial.c
+++ b/drivers/net/caif/caif_serial.c
@@ -8,6 +8,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/skbuff.h>
 #include <linux/netdevice.h>
diff --git a/drivers/net/can/at91_can.c b/drivers/net/can/at91_can.c
index 11f434d708b3..4e2521db41f9 100644
--- a/drivers/net/can/at91_can.c
+++ b/drivers/net/can/at91_can.c
@@ -13,6 +13,7 @@
 #include <linux/if_arp.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
 #include <linux/of.h>
diff --git a/drivers/net/can/can327.c b/drivers/net/can/can327.c
index 24af63961030..d8ff96bb265a 100644
--- a/drivers/net/can/can327.c
+++ b/drivers/net/can/can327.c
@@ -14,6 +14,7 @@
 
 #include <linux/init.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/bitops.h>
 #include <linux/ctype.h>
diff --git a/drivers/net/can/flexcan/flexcan-core.c b/drivers/net/can/flexcan/flexcan-core.c
index 8ea7f2795551..23d655030136 100644
--- a/drivers/net/can/flexcan/flexcan-core.c
+++ b/drivers/net/can/flexcan/flexcan-core.c
@@ -19,6 +19,7 @@
 #include <linux/firmware/imx/sci.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
diff --git a/drivers/net/can/grcan.c b/drivers/net/can/grcan.c
index 6d3ba71a6a73..054a45cf2434 100644
--- a/drivers/net/can/grcan.c
+++ b/drivers/net/can/grcan.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/netdevice.h>
@@ -34,6 +35,7 @@
 #include <linux/spinlock.h>
 #include <linux/of.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 
 #include <linux/dma-mapping.h>
 
diff --git a/drivers/net/can/janz-ican3.c b/drivers/net/can/janz-ican3.c
index d048ea565b89..1ffd9a3ed67c 100644
--- a/drivers/net/can/janz-ican3.c
+++ b/drivers/net/can/janz-ican3.c
@@ -6,11 +6,14 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <linux/ethtool.h>
 #include <linux/platform_device.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/netdevice.h>
 #include <linux/can.h>
diff --git a/drivers/net/can/kvaser_pciefd.c b/drivers/net/can/kvaser_pciefd.c
index a57005faa04f..712523193c4d 100644
--- a/drivers/net/can/kvaser_pciefd.c
+++ b/drivers/net/can/kvaser_pciefd.c
@@ -7,6 +7,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/can/dev.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/ethtool.h>
 #include <linux/iopoll.h>
diff --git a/drivers/net/can/sja1000/peak_pci.c b/drivers/net/can/sja1000/peak_pci.c
index da396d641e24..22e0704c0839 100644
--- a/drivers/net/can/sja1000/peak_pci.c
+++ b/drivers/net/can/sja1000/peak_pci.c
@@ -19,6 +19,7 @@
 #include <linux/i2c-algo-bit.h>
 #include <linux/can.h>
 #include <linux/can/dev.h>
+#include <linux/sprintf.h>
 
 #include "sja1000.h"
 
diff --git a/drivers/net/can/slcan/slcan-core.c b/drivers/net/can/slcan/slcan-core.c
index 24c6622d36bd..6873e6efa198 100644
--- a/drivers/net/can/slcan/slcan-core.c
+++ b/drivers/net/can/slcan/slcan-core.c
@@ -41,6 +41,8 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include <linux/uaccess.h>
 #include <linux/bitops.h>
diff --git a/drivers/net/can/softing/softing_main.c b/drivers/net/can/softing/softing_main.c
index bd25137062c5..9d3fd2f77092 100644
--- a/drivers/net/can/softing/softing_main.c
+++ b/drivers/net/can/softing/softing_main.c
@@ -6,9 +6,11 @@
  */
 
 #include <linux/ethtool.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #include "softing.h"
 
diff --git a/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c b/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c
index eebf967f4711..230d14500ae7 100644
--- a/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c
+++ b/drivers/net/can/spi/mcp251xfd/mcp251xfd-core.c
@@ -20,6 +20,7 @@
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/property.h>
+#include <linux/hrtimer.h>
 
 #include "mcp251xfd.h"
 
diff --git a/drivers/net/can/spi/mcp251xfd/mcp251xfd-ring.c b/drivers/net/can/spi/mcp251xfd/mcp251xfd-ring.c
index bfe4caa0c99d..1182bc8dd529 100644
--- a/drivers/net/can/spi/mcp251xfd/mcp251xfd-ring.c
+++ b/drivers/net/can/spi/mcp251xfd/mcp251xfd-ring.c
@@ -17,6 +17,8 @@
 #include "mcp251xfd.h"
 #include "mcp251xfd-ram.h"
 
+#include <linux/hrtimer.h>
+
 static inline u8
 mcp251xfd_cmd_prepare_write_reg(const struct mcp251xfd_priv *priv,
 				union mcp251xfd_write_reg_buf *write_reg_buf,
diff --git a/drivers/net/can/spi/mcp251xfd/mcp251xfd-rx.c b/drivers/net/can/spi/mcp251xfd/mcp251xfd-rx.c
index ced8d9c81f8c..1cfdd6ec3a12 100644
--- a/drivers/net/can/spi/mcp251xfd/mcp251xfd-rx.c
+++ b/drivers/net/can/spi/mcp251xfd/mcp251xfd-rx.c
@@ -13,6 +13,7 @@
 //
 
 #include <linux/bitfield.h>
+#include <linux/hrtimer.h>
 
 #include "mcp251xfd.h"
 
diff --git a/drivers/net/can/spi/mcp251xfd/mcp251xfd-tef.c b/drivers/net/can/spi/mcp251xfd/mcp251xfd-tef.c
index e5bd57b65aaf..75b226a868be 100644
--- a/drivers/net/can/spi/mcp251xfd/mcp251xfd-tef.c
+++ b/drivers/net/can/spi/mcp251xfd/mcp251xfd-tef.c
@@ -13,6 +13,7 @@
 //
 
 #include <linux/bitfield.h>
+#include <linux/hrtimer.h>
 
 #include "mcp251xfd.h"
 
diff --git a/drivers/net/can/usb/esd_usb.c b/drivers/net/can/usb/esd_usb.c
index 41a0e4261d15..2c1b37ed82e9 100644
--- a/drivers/net/can/usb/esd_usb.c
+++ b/drivers/net/can/usb/esd_usb.c
@@ -14,6 +14,7 @@
 #include <linux/netdevice.h>
 #include <linux/signal.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
 #include <linux/usb.h>
 
diff --git a/drivers/net/can/usb/etas_es58x/es58x_devlink.c b/drivers/net/can/usb/etas_es58x/es58x_devlink.c
index 635edeb8f68c..74948a2d623e 100644
--- a/drivers/net/can/usb/etas_es58x/es58x_devlink.c
+++ b/drivers/net/can/usb/etas_es58x/es58x_devlink.c
@@ -9,6 +9,7 @@
 
 #include <linux/ctype.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <net/devlink.h>
 
diff --git a/drivers/net/can/vxcan.c b/drivers/net/can/vxcan.c
index 98c669ad5141..49f600438992 100644
--- a/drivers/net/can/vxcan.c
+++ b/drivers/net/can/vxcan.c
@@ -21,6 +21,7 @@
 #include <linux/can/vxcan.h>
 #include <linux/can/can-ml.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/rtnetlink.h>
 
 #define DRV_NAME "vxcan"
diff --git a/drivers/net/dsa/b53/b53_srab.c b/drivers/net/dsa/b53/b53_srab.c
index f3f95332ff17..5720aded5b9f 100644
--- a/drivers/net/dsa/b53/b53_srab.c
+++ b/drivers/net/dsa/b53/b53_srab.c
@@ -23,6 +23,7 @@
 #include <linux/platform_device.h>
 #include <linux/platform_data/b53.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include "b53_priv.h"
 #include "b53_serdes.h"
diff --git a/drivers/net/dsa/bcm_sf2.c b/drivers/net/dsa/bcm_sf2.c
index bc77ee9e6d0a..26b00ef3fc24 100644
--- a/drivers/net/dsa/bcm_sf2.c
+++ b/drivers/net/dsa/bcm_sf2.c
@@ -20,6 +20,7 @@
 #include <linux/of_address.h>
 #include <linux/of_net.h>
 #include <linux/of_mdio.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 #include <linux/ethtool.h>
 #include <linux/if_bridge.h>
diff --git a/drivers/net/dsa/bcm_sf2_cfp.c b/drivers/net/dsa/bcm_sf2_cfp.c
index c88ee3dd4299..b35ccd9068ac 100644
--- a/drivers/net/dsa/bcm_sf2_cfp.c
+++ b/drivers/net/dsa/bcm_sf2_cfp.c
@@ -10,6 +10,7 @@
 #include <linux/if_ether.h>
 #include <linux/in.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 #include <linux/bitmap.h>
 #include <net/flow_offload.h>
diff --git a/drivers/net/dsa/hirschmann/hellcreek_ptp.c b/drivers/net/dsa/hirschmann/hellcreek_ptp.c
index 5249a1c2a80b..e70803a5008f 100644
--- a/drivers/net/dsa/hirschmann/hellcreek_ptp.c
+++ b/drivers/net/dsa/hirschmann/hellcreek_ptp.c
@@ -14,6 +14,7 @@
 #include "hellcreek.h"
 #include "hellcreek_ptp.h"
 #include "hellcreek_hwtstamp.h"
+#include <linux/sprintf.h>
 
 u16 hellcreek_ptp_read(struct hellcreek *hellcreek, unsigned int offset)
 {
diff --git a/drivers/net/dsa/lantiq_gswip.c b/drivers/net/dsa/lantiq_gswip.c
index de48b194048f..8623de6c7cca 100644
--- a/drivers/net/dsa/lantiq_gswip.c
+++ b/drivers/net/dsa/lantiq_gswip.c
@@ -42,6 +42,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 #include <dt-bindings/mips/lantiq_rcu_gphy.h>
 
diff --git a/drivers/net/dsa/microchip/ksz9477_acl.c b/drivers/net/dsa/microchip/ksz9477_acl.c
index 7ba778df63ac..50ae67ce56d5 100644
--- a/drivers/net/dsa/microchip/ksz9477_acl.c
+++ b/drivers/net/dsa/microchip/ksz9477_acl.c
@@ -44,6 +44,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 
 #include "ksz9477.h"
 #include "ksz9477_reg.h"
diff --git a/drivers/net/dsa/microchip/ksz_common.c b/drivers/net/dsa/microchip/ksz_common.c
index 9ff5132f3ac6..d31df017b7cc 100644
--- a/drivers/net/dsa/microchip/ksz_common.c
+++ b/drivers/net/dsa/microchip/ksz_common.c
@@ -23,6 +23,7 @@
 #include <linux/of_mdio.h>
 #include <linux/of_net.h>
 #include <linux/micrel_phy.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 #include <net/pkt_cls.h>
 #include <net/switchdev.h>
diff --git a/drivers/net/dsa/microchip/ksz_ptp.c b/drivers/net/dsa/microchip/ksz_ptp.c
index 1fe105913c75..bbb14d02f589 100644
--- a/drivers/net/dsa/microchip/ksz_ptp.c
+++ b/drivers/net/dsa/microchip/ksz_ptp.c
@@ -11,6 +11,8 @@
 #include <linux/kernel.h>
 #include <linux/ptp_classify.h>
 #include <linux/ptp_clock_kernel.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "ksz_common.h"
 #include "ksz_ptp.h"
diff --git a/drivers/net/dsa/mt7530.c b/drivers/net/dsa/mt7530.c
index 03d966fa67b2..4393204bd84f 100644
--- a/drivers/net/dsa/mt7530.c
+++ b/drivers/net/dsa/mt7530.c
@@ -20,6 +20,7 @@
 #include <linux/reset.h>
 #include <linux/gpio/consumer.h>
 #include <linux/gpio/driver.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 
 #include "mt7530.h"
diff --git a/drivers/net/dsa/mv88e6xxx/chip.c b/drivers/net/dsa/mv88e6xxx/chip.c
index 9caecb4dfbfa..621b671aaa1b 100644
--- a/drivers/net/dsa/mv88e6xxx/chip.c
+++ b/drivers/net/dsa/mv88e6xxx/chip.c
@@ -30,6 +30,7 @@
 #include <linux/netdevice.h>
 #include <linux/gpio/consumer.h>
 #include <linux/phylink.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 
 #include "chip.h"
diff --git a/drivers/net/dsa/mv88e6xxx/global1_atu.c b/drivers/net/dsa/mv88e6xxx/global1_atu.c
index ce3b3690c3c0..d6ee0817019e 100644
--- a/drivers/net/dsa/mv88e6xxx/global1_atu.c
+++ b/drivers/net/dsa/mv88e6xxx/global1_atu.c
@@ -9,6 +9,7 @@
 #include <linux/bitfield.h>
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
+#include <linux/sprintf.h>
 
 #include "chip.h"
 #include "global1.h"
diff --git a/drivers/net/dsa/mv88e6xxx/global1_vtu.c b/drivers/net/dsa/mv88e6xxx/global1_vtu.c
index bcfb4a812055..9541d3295937 100644
--- a/drivers/net/dsa/mv88e6xxx/global1_vtu.c
+++ b/drivers/net/dsa/mv88e6xxx/global1_vtu.c
@@ -10,6 +10,7 @@
 #include <linux/bitfield.h>
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
+#include <linux/sprintf.h>
 
 #include "chip.h"
 #include "global1.h"
diff --git a/drivers/net/dsa/mv88e6xxx/global2.c b/drivers/net/dsa/mv88e6xxx/global2.c
index b2b5f6ba438f..a2db0243adae 100644
--- a/drivers/net/dsa/mv88e6xxx/global2.c
+++ b/drivers/net/dsa/mv88e6xxx/global2.c
@@ -11,6 +11,7 @@
 #include <linux/bitfield.h>
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
+#include <linux/sprintf.h>
 
 #include "chip.h"
 #include "global1.h" /* for MV88E6XXX_G1_STS_IRQ_DEVICE */
diff --git a/drivers/net/dsa/mv88e6xxx/pcs-6185.c b/drivers/net/dsa/mv88e6xxx/pcs-6185.c
index 4d677f836807..82c367d189ad 100644
--- a/drivers/net/dsa/mv88e6xxx/pcs-6185.c
+++ b/drivers/net/dsa/mv88e6xxx/pcs-6185.c
@@ -7,6 +7,7 @@
  * Copyright (c) 2017 Andrew Lunn <andrew@lunn.ch>
  */
 #include <linux/phylink.h>
+#include <linux/sprintf.h>
 
 #include "global2.h"
 #include "port.h"
diff --git a/drivers/net/dsa/mv88e6xxx/pcs-6352.c b/drivers/net/dsa/mv88e6xxx/pcs-6352.c
index 88f624b65470..1f8765653c86 100644
--- a/drivers/net/dsa/mv88e6xxx/pcs-6352.c
+++ b/drivers/net/dsa/mv88e6xxx/pcs-6352.c
@@ -7,6 +7,7 @@
  * Copyright (c) 2017 Andrew Lunn <andrew@lunn.ch>
  */
 #include <linux/phylink.h>
+#include <linux/sprintf.h>
 
 #include "global2.h"
 #include "port.h"
diff --git a/drivers/net/dsa/mv88e6xxx/pcs-639x.c b/drivers/net/dsa/mv88e6xxx/pcs-639x.c
index d758a6c1b226..6592b5974618 100644
--- a/drivers/net/dsa/mv88e6xxx/pcs-639x.c
+++ b/drivers/net/dsa/mv88e6xxx/pcs-639x.c
@@ -9,6 +9,7 @@
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
 #include <linux/mii.h>
+#include <linux/sprintf.h>
 
 #include "chip.h"
 #include "global2.h"
diff --git a/drivers/net/dsa/mv88e6xxx/ptp.c b/drivers/net/dsa/mv88e6xxx/ptp.c
index 56391e09b325..a35a7e7d171b 100644
--- a/drivers/net/dsa/mv88e6xxx/ptp.c
+++ b/drivers/net/dsa/mv88e6xxx/ptp.c
@@ -15,6 +15,7 @@
 #include "global2.h"
 #include "hwtstamp.h"
 #include "ptp.h"
+#include <linux/sprintf.h>
 
 #define MV88E6XXX_MAX_ADJ_PPB	1000000
 
diff --git a/drivers/net/dsa/ocelot/felix.c b/drivers/net/dsa/ocelot/felix.c
index 61e95487732d..a5dcb1146de5 100644
--- a/drivers/net/dsa/ocelot/felix.c
+++ b/drivers/net/dsa/ocelot/felix.c
@@ -21,6 +21,7 @@
 #include <linux/of_net.h>
 #include <linux/pci.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <net/pkt_sched.h>
 #include <net/dsa.h>
 #include "felix.h"
diff --git a/drivers/net/dsa/ocelot/felix_vsc9959.c b/drivers/net/dsa/ocelot/felix_vsc9959.c
index 3c5509e75a54..0b2a971b701d 100644
--- a/drivers/net/dsa/ocelot/felix_vsc9959.c
+++ b/drivers/net/dsa/ocelot/felix_vsc9959.c
@@ -3,6 +3,8 @@
  * Copyright 2018-2019 NXP
  */
 #include <linux/fsl/enetc_mdio.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 #include <soc/mscc/ocelot_qsys.h>
 #include <soc/mscc/ocelot_vcap.h>
 #include <soc/mscc/ocelot_ana.h>
diff --git a/drivers/net/dsa/qca/ar9331.c b/drivers/net/dsa/qca/ar9331.c
index 8d9d271ac3af..dc01280b4ad0 100644
--- a/drivers/net/dsa/qca/ar9331.c
+++ b/drivers/net/dsa/qca/ar9331.c
@@ -45,6 +45,7 @@
 #include <linux/of_mdio.h>
 #include <linux/regmap.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 
 #define AR9331_SW_NAME				"ar9331_switch"
diff --git a/drivers/net/dsa/qca/qca8k-8xxx.c b/drivers/net/dsa/qca/qca8k-8xxx.c
index dab66c0c6f64..e94f9162d778 100644
--- a/drivers/net/dsa/qca/qca8k-8xxx.c
+++ b/drivers/net/dsa/qca/qca8k-8xxx.c
@@ -10,7 +10,9 @@
 #include <linux/phy.h>
 #include <linux/netdevice.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 #include <linux/of_net.h>
 #include <linux/of_mdio.h>
diff --git a/drivers/net/dsa/qca/qca8k-leds.c b/drivers/net/dsa/qca/qca8k-leds.c
index 811ebeeff4ed..59ff9e2c2005 100644
--- a/drivers/net/dsa/qca/qca8k-leds.c
+++ b/drivers/net/dsa/qca/qca8k-leds.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/property.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 
 #include "qca8k.h"
diff --git a/drivers/net/dsa/realtek/realtek-smi.c b/drivers/net/dsa/realtek/realtek-smi.c
index 755546ed8db6..9e02fb14ceef 100644
--- a/drivers/net/dsa/realtek/realtek-smi.c
+++ b/drivers/net/dsa/realtek/realtek-smi.c
@@ -38,6 +38,7 @@
 #include <linux/regmap.h>
 #include <linux/bitops.h>
 #include <linux/if_bridge.h>
+#include <linux/sprintf.h>
 
 #include "realtek.h"
 
diff --git a/drivers/net/dsa/rzn1_a5psw.c b/drivers/net/dsa/rzn1_a5psw.c
index 10092ea85e46..1b9cbf7bcd25 100644
--- a/drivers/net/dsa/rzn1_a5psw.c
+++ b/drivers/net/dsa/rzn1_a5psw.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_mdio.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 
 #include "rzn1_a5psw.h"
diff --git a/drivers/net/dsa/sja1105/sja1105_mdio.c b/drivers/net/dsa/sja1105/sja1105_mdio.c
index 833e55e4b961..a9813914afb5 100644
--- a/drivers/net/dsa/sja1105/sja1105_mdio.c
+++ b/drivers/net/dsa/sja1105/sja1105_mdio.c
@@ -4,6 +4,7 @@
 #include <linux/pcs/pcs-xpcs.h>
 #include <linux/of_mdio.h>
 #include "sja1105.h"
+#include <linux/sprintf.h>
 
 #define SJA1110_PCS_BANK_REG		SJA1110_SPI_ADDR(0x3fc)
 
diff --git a/drivers/net/ethernet/3com/3c515.c b/drivers/net/ethernet/3com/3c515.c
index ba3e7aa1a28f..5bd9ece97c93 100644
--- a/drivers/net/ethernet/3com/3c515.c
+++ b/drivers/net/ethernet/3com/3c515.c
@@ -56,6 +56,7 @@ static int max_interrupt_work = 20;
 #include <linux/isapnp.h>
 #include <linux/kernel.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/in.h>
diff --git a/drivers/net/ethernet/3com/3c589_cs.c b/drivers/net/ethernet/3com/3c589_cs.c
index 5267e9dcd87e..66a84ed499c6 100644
--- a/drivers/net/ethernet/3com/3c589_cs.c
+++ b/drivers/net/ethernet/3com/3c589_cs.c
@@ -28,6 +28,7 @@
 #include <linux/kernel.h>
 #include <linux/ptrace.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/3com/3c59x.c b/drivers/net/ethernet/3com/3c59x.c
index 082388bb6169..7a65550d4830 100644
--- a/drivers/net/ethernet/3com/3c59x.c
+++ b/drivers/net/ethernet/3com/3c59x.c
@@ -72,6 +72,7 @@ static int vortex_debug = 1;
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/3com/typhoon.c b/drivers/net/ethernet/3com/typhoon.c
index aaaff3ba43ef..26afa6b1aeb3 100644
--- a/drivers/net/ethernet/3com/typhoon.c
+++ b/drivers/net/ethernet/3com/typhoon.c
@@ -101,6 +101,7 @@ static const int multicast_filter_limit = 32;
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/8390/ax88796.c b/drivers/net/ethernet/8390/ax88796.c
index 2874680ef24d..9e599d0c400f 100644
--- a/drivers/net/ethernet/8390/ax88796.c
+++ b/drivers/net/ethernet/8390/ax88796.c
@@ -16,6 +16,7 @@
 #include <linux/io.h>
 #include <linux/platform_device.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/ethernet/8390/etherh.c b/drivers/net/ethernet/8390/etherh.c
index 05d39ecb97ff..d25a95d5a2ef 100644
--- a/drivers/net/ethernet/8390/etherh.c
+++ b/drivers/net/ethernet/8390/etherh.c
@@ -25,6 +25,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/8390/ne.c b/drivers/net/ethernet/8390/ne.c
index 350683a09d2e..2d3b4537830f 100644
--- a/drivers/net/ethernet/8390/ne.c
+++ b/drivers/net/ethernet/8390/ne.c
@@ -50,6 +50,7 @@ static const char version2[] =
 #include <linux/etherdevice.h>
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <net/Space.h>
 
 #include <asm/io.h>
diff --git a/drivers/net/ethernet/8390/smc-ultra.c b/drivers/net/ethernet/8390/smc-ultra.c
index 22ca804b2e95..55200c10fa4f 100644
--- a/drivers/net/ethernet/8390/smc-ultra.c
+++ b/drivers/net/ethernet/8390/smc-ultra.c
@@ -58,6 +58,7 @@ static const char version[] =
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/8390/wd.c b/drivers/net/ethernet/8390/wd.c
index ffd639477dfc..a47f378e120e 100644
--- a/drivers/net/ethernet/8390/wd.c
+++ b/drivers/net/ethernet/8390/wd.c
@@ -29,6 +29,7 @@ static const char version[] =
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/actions/owl-emac.c b/drivers/net/ethernet/actions/owl-emac.c
index e03193da5874..3464c5967499 100644
--- a/drivers/net/ethernet/actions/owl-emac.c
+++ b/drivers/net/ethernet/actions/owl-emac.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include "owl-emac.h"
 
diff --git a/drivers/net/ethernet/adi/adin1110.c b/drivers/net/ethernet/adi/adin1110.c
index d7c274af6d4d..a0f1ffc2173f 100644
--- a/drivers/net/ethernet/adi/adin1110.c
+++ b/drivers/net/ethernet/adi/adin1110.c
@@ -23,6 +23,7 @@
 #include <linux/phy.h>
 #include <linux/property.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 #include <net/switchdev.h>
 
diff --git a/drivers/net/ethernet/aeroflex/greth.c b/drivers/net/ethernet/aeroflex/greth.c
index 27af7746d645..643e6c51a036 100644
--- a/drivers/net/ethernet/aeroflex/greth.c
+++ b/drivers/net/ethernet/aeroflex/greth.c
@@ -20,6 +20,7 @@
 
 #include <linux/dma-mapping.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/interrupt.h>
 #include <linux/netdevice.h>
diff --git a/drivers/net/ethernet/agere/et131x.c b/drivers/net/ethernet/agere/et131x.c
index 3d9220f9c9fe..b1e9cdf6855b 100644
--- a/drivers/net/ethernet/agere/et131x.c
+++ b/drivers/net/ethernet/agere/et131x.c
@@ -55,6 +55,7 @@
 
 #include <linux/pci.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 
diff --git a/drivers/net/ethernet/alteon/acenic.c b/drivers/net/ethernet/alteon/acenic.c
index eafef84fe3be..76a6f759a6a7 100644
--- a/drivers/net/ethernet/alteon/acenic.c
+++ b/drivers/net/ethernet/alteon/acenic.c
@@ -48,6 +48,7 @@
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/ioport.h>
diff --git a/drivers/net/ethernet/altera/altera_msgdma.c b/drivers/net/ethernet/altera/altera_msgdma.c
index ac1efd08267a..57e8e54daa36 100644
--- a/drivers/net/ethernet/altera/altera_msgdma.c
+++ b/drivers/net/ethernet/altera/altera_msgdma.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/netdevice.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include "altera_utils.h"
 #include "altera_tse.h"
 #include "altera_msgdmahw.h"
diff --git a/drivers/net/ethernet/altera/altera_sgdma.c b/drivers/net/ethernet/altera/altera_sgdma.c
index 7f247ccbe6ba..3b1fab4913f1 100644
--- a/drivers/net/ethernet/altera/altera_sgdma.c
+++ b/drivers/net/ethernet/altera/altera_sgdma.c
@@ -8,6 +8,7 @@
 #include "altera_tse.h"
 #include "altera_sgdmahw.h"
 #include "altera_sgdma.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void sgdma_setup_descrip(struct sgdma_descrip __iomem *desc,
 				struct sgdma_descrip __iomem *ndesc,
diff --git a/drivers/net/ethernet/altera/altera_tse_ethtool.c b/drivers/net/ethernet/altera/altera_tse_ethtool.c
index 81313c85833e..5eca835d6c1c 100644
--- a/drivers/net/ethernet/altera/altera_tse_ethtool.c
+++ b/drivers/net/ethernet/altera/altera_tse_ethtool.c
@@ -20,6 +20,7 @@
 #include <linux/kernel.h>
 #include <linux/netdevice.h>
 #include <linux/phy.h>
+#include <linux/sprintf.h>
 
 #include "altera_tse.h"
 
diff --git a/drivers/net/ethernet/altera/altera_tse_main.c b/drivers/net/ethernet/altera/altera_tse_main.c
index 1c8763be0e4b..8fcc33418259 100644
--- a/drivers/net/ethernet/altera/altera_tse_main.c
+++ b/drivers/net/ethernet/altera/altera_tse_main.c
@@ -39,6 +39,7 @@
 #include <linux/regmap.h>
 #include <linux/skbuff.h>
 #include <asm/cacheflush.h>
+#include <linux/sprintf.h>
 
 #include "altera_utils.h"
 #include "altera_tse.h"
diff --git a/drivers/net/ethernet/amazon/ena/ena_com.c b/drivers/net/ethernet/amazon/ena/ena_com.c
index 9e9e4a03f1a8..d68934cf770d 100644
--- a/drivers/net/ethernet/amazon/ena/ena_com.c
+++ b/drivers/net/ethernet/amazon/ena/ena_com.c
@@ -4,6 +4,8 @@
  */
 
 #include "ena_com.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*****************************************************************************/
 /*****************************************************************************/
diff --git a/drivers/net/ethernet/amazon/ena/ena_ethtool.c b/drivers/net/ethernet/amazon/ena/ena_ethtool.c
index 0cb6cc1cef56..1727046303b8 100644
--- a/drivers/net/ethernet/amazon/ena/ena_ethtool.c
+++ b/drivers/net/ethernet/amazon/ena/ena_ethtool.c
@@ -5,6 +5,7 @@
 
 #include <linux/ethtool.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "ena_netdev.h"
 #include "ena_xdp.h"
diff --git a/drivers/net/ethernet/amazon/ena/ena_netdev.c b/drivers/net/ethernet/amazon/ena/ena_netdev.c
index 03be2c008c4d..bd28869cae88 100644
--- a/drivers/net/ethernet/amazon/ena/ena_netdev.c
+++ b/drivers/net/ethernet/amazon/ena/ena_netdev.c
@@ -7,6 +7,7 @@
 
 #ifdef CONFIG_RFS_ACCEL
 #include <linux/cpu_rmap.h>
+#include <linux/sprintf.h>
 #endif /* CONFIG_RFS_ACCEL */
 #include <linux/ethtool.h>
 #include <linux/kernel.h>
diff --git a/drivers/net/ethernet/amd/amd8111e.c b/drivers/net/ethernet/amd/amd8111e.c
index ea6cfc2095e1..00f3171c860d 100644
--- a/drivers/net/ethernet/amd/amd8111e.c
+++ b/drivers/net/ethernet/amd/amd8111e.c
@@ -56,6 +56,7 @@ Revision History:
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/compiler.h>
 #include <linux/delay.h>
diff --git a/drivers/net/ethernet/amd/au1000_eth.c b/drivers/net/ethernet/amd/au1000_eth.c
index 85c978149bf6..fdb57dac0a83 100644
--- a/drivers/net/ethernet/amd/au1000_eth.c
+++ b/drivers/net/ethernet/amd/au1000_eth.c
@@ -20,8 +20,10 @@
 
 #include <linux/capability.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/amd/declance.c b/drivers/net/ethernet/amd/declance.c
index ec8df05e7bf6..a9719edd40db 100644
--- a/drivers/net/ethernet/amd/declance.c
+++ b/drivers/net/ethernet/amd/declance.c
@@ -59,6 +59,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/string.h>
 #include <linux/tc.h>
diff --git a/drivers/net/ethernet/amd/lance.c b/drivers/net/ethernet/amd/lance.c
index 6cf38180cc01..ba33a24cc57d 100644
--- a/drivers/net/ethernet/amd/lance.c
+++ b/drivers/net/ethernet/amd/lance.c
@@ -46,6 +46,7 @@ static const char version[] = "lance.c:v1.16 2006/11/09 dplatt@3do.com, becker@c
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/amd/nmclan_cs.c b/drivers/net/ethernet/amd/nmclan_cs.c
index 0dd391c84c13..9ddbbbf18a27 100644
--- a/drivers/net/ethernet/amd/nmclan_cs.c
+++ b/drivers/net/ethernet/amd/nmclan_cs.c
@@ -132,6 +132,7 @@ Include Files
 #include <linux/kernel.h>
 #include <linux/ptrace.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/amd/pcnet32.c b/drivers/net/ethernet/amd/pcnet32.c
index 72db9f9e7bee..1372996316cc 100644
--- a/drivers/net/ethernet/amd/pcnet32.c
+++ b/drivers/net/ethernet/amd/pcnet32.c
@@ -30,6 +30,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/ioport.h>
diff --git a/drivers/net/ethernet/amd/pds_core/adminq.c b/drivers/net/ethernet/amd/pds_core/adminq.c
index c83a0a80d533..1f2479936eca 100644
--- a/drivers/net/ethernet/amd/pds_core/adminq.c
+++ b/drivers/net/ethernet/amd/pds_core/adminq.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2023 Advanced Micro Devices, Inc */
 
 #include <linux/dynamic_debug.h>
+#include <linux/completion.h>
 
 #include "core.h"
 
diff --git a/drivers/net/ethernet/amd/pds_core/auxbus.c b/drivers/net/ethernet/amd/pds_core/auxbus.c
index 11c23a7f3172..00c9453be5b5 100644
--- a/drivers/net/ethernet/amd/pds_core/auxbus.c
+++ b/drivers/net/ethernet/amd/pds_core/auxbus.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2023 Advanced Micro Devices, Inc */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include <linux/pds/pds_auxbus.h>
diff --git a/drivers/net/ethernet/amd/pds_core/core.c b/drivers/net/ethernet/amd/pds_core/core.c
index 1234a4a8a4ae..cc52e1ff12f5 100644
--- a/drivers/net/ethernet/amd/pds_core/core.c
+++ b/drivers/net/ethernet/amd/pds_core/core.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2023 Advanced Micro Devices, Inc */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "core.h"
diff --git a/drivers/net/ethernet/amd/pds_core/dev.c b/drivers/net/ethernet/amd/pds_core/dev.c
index e494e1298dc9..4acda72b77e9 100644
--- a/drivers/net/ethernet/amd/pds_core/dev.c
+++ b/drivers/net/ethernet/amd/pds_core/dev.c
@@ -3,6 +3,7 @@
 
 #include <linux/errno.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 
 #include "core.h"
diff --git a/drivers/net/ethernet/amd/pds_core/devlink.c b/drivers/net/ethernet/amd/pds_core/devlink.c
index 54864f27c87a..387adea342d3 100644
--- a/drivers/net/ethernet/amd/pds_core/devlink.c
+++ b/drivers/net/ethernet/amd/pds_core/devlink.c
@@ -3,6 +3,7 @@
 
 #include "core.h"
 #include <linux/pds/pds_auxbus.h>
+#include <linux/sprintf.h>
 
 static struct
 pdsc_viftype *pdsc_dl_find_viftype_by_id(struct pdsc *pdsc,
diff --git a/drivers/net/ethernet/amd/pds_core/main.c b/drivers/net/ethernet/amd/pds_core/main.c
index cdbf053b5376..e799dcb8b349 100644
--- a/drivers/net/ethernet/amd/pds_core/main.c
+++ b/drivers/net/ethernet/amd/pds_core/main.c
@@ -4,6 +4,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <linux/pds/pds_common.h>
 
diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c b/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c
index b0a6c96b6ef4..d301899743e1 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-debugfs.c
@@ -115,8 +115,10 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "xgbe.h"
 #include "xgbe-common.h"
diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-dev.c b/drivers/net/ethernet/amd/xgbe/xgbe-dev.c
index f393228d41c7..8efccda4e5f1 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-dev.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-dev.c
@@ -118,8 +118,10 @@
 #include <linux/mdio.h>
 #include <linux/clk.h>
 #include <linux/bitrev.h>
+#include <linux/completion.h>
 #include <linux/crc32.h>
 #include <linux/crc32poly.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "xgbe.h"
 #include "xgbe-common.h"
diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-drv.c b/drivers/net/ethernet/amd/xgbe/xgbe-drv.c
index 6b73648b3779..2ff189acf7c8 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-drv.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-drv.c
@@ -116,11 +116,14 @@
 
 #include <linux/module.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/if_vlan.h>
 #include <linux/interrupt.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/if_ether.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/net_tstamp.h>
 #include <linux/phy.h>
 #include <net/vxlan.h>
diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-ethtool.c b/drivers/net/ethernet/amd/xgbe/xgbe-ethtool.c
index 58e7e88aae5b..d7ec94a1980d 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-ethtool.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-ethtool.c
@@ -117,6 +117,7 @@
 #include <linux/spinlock.h>
 #include <linux/phy.h>
 #include <linux/net_tstamp.h>
+#include <linux/sprintf.h>
 
 #include "xgbe.h"
 #include "xgbe-common.h"
diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-main.c b/drivers/net/ethernet/amd/xgbe/xgbe-main.c
index 0e8698928e4d..629881964900 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-main.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-main.c
@@ -121,6 +121,7 @@
 #include <linux/etherdevice.h>
 #include <linux/io.h>
 #include <linux/notifier.h>
+#include <linux/completion.h>
 
 #include "xgbe.h"
 #include "xgbe-common.h"
diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-phy-v2.c b/drivers/net/ethernet/amd/xgbe/xgbe-phy-v2.c
index 6a716337f48b..3feee771c0cb 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-phy-v2.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-phy-v2.c
@@ -120,6 +120,7 @@
 #include <linux/mdio.h>
 #include <linux/phy.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 #include "xgbe.h"
 #include "xgbe-common.h"
diff --git a/drivers/net/ethernet/amd/xgbe/xgbe-ptp.c b/drivers/net/ethernet/amd/xgbe/xgbe-ptp.c
index 7051bd7cf6dc..1967d01bd2f6 100644
--- a/drivers/net/ethernet/amd/xgbe/xgbe-ptp.c
+++ b/drivers/net/ethernet/amd/xgbe/xgbe-ptp.c
@@ -118,6 +118,7 @@
 #include <linux/clocksource.h>
 #include <linux/ptp_clock_kernel.h>
 #include <linux/net_tstamp.h>
+#include <linux/sprintf.h>
 
 #include "xgbe.h"
 #include "xgbe-common.h"
diff --git a/drivers/net/ethernet/apm/xgene-v2/ethtool.c b/drivers/net/ethernet/apm/xgene-v2/ethtool.c
index b78d1a99fe81..e5e8d12a4085 100644
--- a/drivers/net/ethernet/apm/xgene-v2/ethtool.c
+++ b/drivers/net/ethernet/apm/xgene-v2/ethtool.c
@@ -8,6 +8,7 @@
  */
 
 #include "main.h"
+#include <linux/sprintf.h>
 
 #define XGE_STAT(m)		{ #m, offsetof(struct xge_pdata, stats.m) }
 #define XGE_EXTD_STAT(m, n)					\
diff --git a/drivers/net/ethernet/apm/xgene-v2/main.c b/drivers/net/ethernet/apm/xgene-v2/main.c
index 9e90c2381491..37ff611642ea 100644
--- a/drivers/net/ethernet/apm/xgene-v2/main.c
+++ b/drivers/net/ethernet/apm/xgene-v2/main.c
@@ -8,6 +8,8 @@
  */
 
 #include "main.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 static const struct acpi_device_id xge_acpi_match[];
 
diff --git a/drivers/net/ethernet/apm/xgene-v2/mdio.c b/drivers/net/ethernet/apm/xgene-v2/mdio.c
index eba06831aec2..54f4d5ba9c26 100644
--- a/drivers/net/ethernet/apm/xgene-v2/mdio.c
+++ b/drivers/net/ethernet/apm/xgene-v2/mdio.c
@@ -8,6 +8,7 @@
  */
 
 #include "main.h"
+#include <linux/sprintf.h>
 
 static int xge_mdio_write(struct mii_bus *bus, int phy_id, int reg, u16 data)
 {
diff --git a/drivers/net/ethernet/apm/xgene-v2/ring.c b/drivers/net/ethernet/apm/xgene-v2/ring.c
index fbea4bc438a9..26f373189da1 100644
--- a/drivers/net/ethernet/apm/xgene-v2/ring.c
+++ b/drivers/net/ethernet/apm/xgene-v2/ring.c
@@ -8,6 +8,7 @@
  */
 
 #include "main.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /* create circular linked list of descriptors */
 void xge_setup_desc(struct xge_desc_ring *ring)
diff --git a/drivers/net/ethernet/apm/xgene/xgene_enet_ethtool.c b/drivers/net/ethernet/apm/xgene/xgene_enet_ethtool.c
index ada70425b48c..0c1fca3b26af 100644
--- a/drivers/net/ethernet/apm/xgene/xgene_enet_ethtool.c
+++ b/drivers/net/ethernet/apm/xgene/xgene_enet_ethtool.c
@@ -7,6 +7,7 @@
 
 #include <linux/ethtool.h>
 #include "xgene_enet_main.h"
+#include <linux/sprintf.h>
 
 struct xgene_gstrings_stats {
 	char name[ETH_GSTRING_LEN];
diff --git a/drivers/net/ethernet/apm/xgene/xgene_enet_hw.c b/drivers/net/ethernet/apm/xgene/xgene_enet_hw.c
index e641dbbea1e2..c4802a12e73b 100644
--- a/drivers/net/ethernet/apm/xgene/xgene_enet_hw.c
+++ b/drivers/net/ethernet/apm/xgene/xgene_enet_hw.c
@@ -9,6 +9,7 @@
 
 #include "xgene_enet_main.h"
 #include "xgene_enet_hw.h"
+#include <linux/sprintf.h>
 
 static void xgene_enet_ring_init(struct xgene_enet_desc_ring *ring)
 {
diff --git a/drivers/net/ethernet/apm/xgene/xgene_enet_main.c b/drivers/net/ethernet/apm/xgene/xgene_enet_main.c
index 44900026d11b..daf96875cd37 100644
--- a/drivers/net/ethernet/apm/xgene/xgene_enet_main.c
+++ b/drivers/net/ethernet/apm/xgene/xgene_enet_main.c
@@ -12,6 +12,7 @@
 #include "xgene_enet_hw.h"
 #include "xgene_enet_sgmac.h"
 #include "xgene_enet_xgmac.h"
+#include <linux/sprintf.h>
 
 #define RES_ENET_CSR	0
 #define RES_RING_CSR	1
diff --git a/drivers/net/ethernet/apple/bmac.c b/drivers/net/ethernet/apple/bmac.c
index 9e653e2925f7..4890f8c6818a 100644
--- a/drivers/net/ethernet/apple/bmac.c
+++ b/drivers/net/ethernet/apple/bmac.c
@@ -14,6 +14,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/net/ethernet/aquantia/atlantic/aq_ethtool.c b/drivers/net/ethernet/aquantia/atlantic/aq_ethtool.c
index a2606ee3b0a5..c30d66b04406 100644
--- a/drivers/net/ethernet/aquantia/atlantic/aq_ethtool.c
+++ b/drivers/net/ethernet/aquantia/atlantic/aq_ethtool.c
@@ -14,6 +14,7 @@
 #include "aq_filters.h"
 #include "aq_macsec.h"
 #include "aq_main.h"
+#include <linux/sprintf.h>
 
 #include <linux/linkmode.h>
 #include <linux/ptp_clock_kernel.h>
diff --git a/drivers/net/ethernet/aquantia/atlantic/aq_ptp.c b/drivers/net/ethernet/aquantia/atlantic/aq_ptp.c
index 5acb3e16b567..f4b87d1e08a7 100644
--- a/drivers/net/ethernet/aquantia/atlantic/aq_ptp.c
+++ b/drivers/net/ethernet/aquantia/atlantic/aq_ptp.c
@@ -13,6 +13,7 @@
 #include <linux/ptp_classify.h>
 #include <linux/interrupt.h>
 #include <linux/clocksource.h>
+#include <linux/sprintf.h>
 
 #include "aq_nic.h"
 #include "aq_ptp.h"
diff --git a/drivers/net/ethernet/arc/emac_mdio.c b/drivers/net/ethernet/arc/emac_mdio.c
index 87f40c2ba904..9a5bc2dbcc4b 100644
--- a/drivers/net/ethernet/arc/emac_mdio.c
+++ b/drivers/net/ethernet/arc/emac_mdio.c
@@ -9,6 +9,7 @@
 #include <linux/of_mdio.h>
 #include <linux/platform_device.h>
 #include <linux/gpio/consumer.h>
+#include <linux/sprintf.h>
 
 #include "emac.h"
 
diff --git a/drivers/net/ethernet/asix/ax88796c_main.c b/drivers/net/ethernet/asix/ax88796c_main.c
index 11e8996b33d7..6c563e409509 100644
--- a/drivers/net/ethernet/asix/ax88796c_main.c
+++ b/drivers/net/ethernet/asix/ax88796c_main.c
@@ -10,6 +10,7 @@
 
 #include "ax88796c_main.h"
 #include "ax88796c_ioctl.h"
+#include <linux/sprintf.h>
 
 #include <linux/bitmap.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/ethernet/atheros/ag71xx.c b/drivers/net/ethernet/atheros/ag71xx.c
index 0f2f400b5bc4..3077c70c8fdc 100644
--- a/drivers/net/ethernet/atheros/ag71xx.c
+++ b/drivers/net/ethernet/atheros/ag71xx.c
@@ -38,6 +38,7 @@
 #include <linux/reset.h>
 #include <linux/clk.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <net/selftests.h>
 
 /* For our NAPI weight bigger does *NOT* mean better - it means more
diff --git a/drivers/net/ethernet/atheros/alx/main.c b/drivers/net/ethernet/atheros/alx/main.c
index 49bb9a8f00e6..067528495439 100644
--- a/drivers/net/ethernet/atheros/alx/main.c
+++ b/drivers/net/ethernet/atheros/alx/main.c
@@ -42,6 +42,7 @@
 #include <linux/bitops.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 #include <net/ip6_checksum.h>
 #include <linux/crc32.h>
 #include "alx.h"
diff --git a/drivers/net/ethernet/broadcom/asp2/bcmasp_intf.c b/drivers/net/ethernet/broadcom/asp2/bcmasp_intf.c
index 3a15f269c7d1..d93b2afbf525 100644
--- a/drivers/net/ethernet/broadcom/asp2/bcmasp_intf.c
+++ b/drivers/net/ethernet/broadcom/asp2/bcmasp_intf.c
@@ -13,6 +13,7 @@
 #include <linux/phy_fixed.h>
 #include <linux/ptp_classify.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <net/ipv6.h>
 
diff --git a/drivers/net/ethernet/broadcom/b44.c b/drivers/net/ethernet/broadcom/b44.c
index 3e4fb3c3e834..5c872dbaac98 100644
--- a/drivers/net/ethernet/broadcom/b44.c
+++ b/drivers/net/ethernet/broadcom/b44.c
@@ -14,8 +14,10 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
diff --git a/drivers/net/ethernet/broadcom/bcm63xx_enet.c b/drivers/net/ethernet/broadcom/bcm63xx_enet.c
index 3196c4dea076..f68aaf1ea929 100644
--- a/drivers/net/ethernet/broadcom/bcm63xx_enet.c
+++ b/drivers/net/ethernet/broadcom/bcm63xx_enet.c
@@ -17,6 +17,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/platform_device.h>
 #include <linux/if_vlan.h>
+#include <linux/sprintf.h>
 
 #include <bcm63xx_dev_enet.h>
 #include "bcm63xx_enet.h"
diff --git a/drivers/net/ethernet/broadcom/bcmsysport.c b/drivers/net/ethernet/broadcom/bcmsysport.c
index c9faa8540859..d4acc996d68d 100644
--- a/drivers/net/ethernet/broadcom/bcmsysport.c
+++ b/drivers/net/ethernet/broadcom/bcmsysport.c
@@ -9,6 +9,7 @@
 
 #include <linux/init.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/netdevice.h>
@@ -20,6 +21,7 @@
 #include <linux/of_mdio.h>
 #include <linux/phy.h>
 #include <linux/phy_fixed.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 #include <linux/clk.h>
 #include <net/ip.h>
diff --git a/drivers/net/ethernet/broadcom/bgmac-bcma-mdio.c b/drivers/net/ethernet/broadcom/bgmac-bcma-mdio.c
index 50b8e97a811d..211bc1ccb253 100644
--- a/drivers/net/ethernet/broadcom/bgmac-bcma-mdio.c
+++ b/drivers/net/ethernet/broadcom/bgmac-bcma-mdio.c
@@ -12,6 +12,7 @@
 #include <linux/brcmphy.h>
 #include <linux/of_mdio.h>
 #include "bgmac.h"
+#include <linux/sprintf.h>
 
 static bool bcma_mdio_wait_value(struct bcma_device *core, u16 reg, u32 mask,
 				 u32 value, int timeout)
diff --git a/drivers/net/ethernet/broadcom/bgmac-bcma.c b/drivers/net/ethernet/broadcom/bgmac-bcma.c
index 36f9bad28e6a..85f2a4eab971 100644
--- a/drivers/net/ethernet/broadcom/bgmac-bcma.c
+++ b/drivers/net/ethernet/broadcom/bgmac-bcma.c
@@ -14,6 +14,7 @@
 #include <linux/of_mdio.h>
 #include <linux/of_net.h>
 #include "bgmac.h"
+#include <linux/sprintf.h>
 
 static inline bool bgmac_is_bcm4707_family(struct bcma_device *core)
 {
diff --git a/drivers/net/ethernet/broadcom/bgmac.c b/drivers/net/ethernet/broadcom/bgmac.c
index 6ffdc4229407..3c07be08d4c1 100644
--- a/drivers/net/ethernet/broadcom/bgmac.c
+++ b/drivers/net/ethernet/broadcom/bgmac.c
@@ -13,6 +13,8 @@
 #include <linux/etherdevice.h>
 #include <linux/interrupt.h>
 #include <linux/bcm47xx_nvram.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/phy.h>
 #include <linux/phy_fixed.h>
 #include <net/dsa.h>
diff --git a/drivers/net/ethernet/broadcom/bnx2.c b/drivers/net/ethernet/broadcom/bnx2.c
index 0d917a9699c5..e489a9b73361 100644
--- a/drivers/net/ethernet/broadcom/bnx2.c
+++ b/drivers/net/ethernet/broadcom/bnx2.c
@@ -14,6 +14,7 @@
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 
 #include <linux/stringify.h>
 #include <linux/kernel.h>
diff --git a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.c b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.c
index 528441b28c4e..a4e6694b69fd 100644
--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_cmn.c
@@ -24,6 +24,7 @@
 #include <linux/interrupt.h>
 #include <linux/ip.h>
 #include <linux/crash_dump.h>
+#include <linux/sprintf.h>
 #include <net/tcp.h>
 #include <net/gro.h>
 #include <net/ipv6.h>
diff --git a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_ethtool.c b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_ethtool.c
index 58956ed8f531..997569fb9477 100644
--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_ethtool.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_ethtool.c
@@ -21,6 +21,7 @@
 
 #include <linux/ethtool.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sched.h>
 #include <linux/crc32.h>
diff --git a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c
index ea310057fe3a..b5338c49fc16 100644
--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_link.c
@@ -25,6 +25,7 @@
 #include <linux/delay.h>
 #include <linux/ethtool.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include "bnx2x.h"
 #include "bnx2x_cmn.h"
diff --git a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
index 0d8e61c63c7c..712fe2934dec 100644
--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c
@@ -23,6 +23,7 @@
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
 #include <linux/device.h>  /* for dev_info() */
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
 #include <linux/ioport.h>
@@ -35,6 +36,7 @@
 #include <linux/skbuff.h>
 #include <linux/dma-mapping.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/irq.h>
 #include <linux/delay.h>
 #include <asm/byteorder.h>
diff --git a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_self_test.c b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_self_test.c
index 3f8bdad3351c..45c303955e21 100644
--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_self_test.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_self_test.c
@@ -2,6 +2,7 @@
 #include <linux/kernel.h>
 #include <linux/netdevice.h>
 #include "bnx2x.h"
+#include <linux/sprintf.h>
 
 #define NA 0xCD
 
diff --git a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_sriov.c b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_sriov.c
index 77d4cb4ad782..e51acd2a0da0 100644
--- a/drivers/net/ethernet/broadcom/bnx2x/bnx2x_sriov.c
+++ b/drivers/net/ethernet/broadcom/bnx2x/bnx2x_sriov.c
@@ -23,6 +23,7 @@
 #include "bnx2x_init.h"
 #include "bnx2x_cmn.h"
 #include "bnx2x_sp.h"
+#include <linux/completion.h>
 #include <linux/crc32.h>
 #include <linux/if_vlan.h>
 
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt.c b/drivers/net/ethernet/broadcom/bnxt/bnxt.c
index 6f415425dc14..9a561048e2ae 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/stringify.h>
 #include <linux/kernel.h>
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_coredump.c b/drivers/net/ethernet/broadcom/bnxt/bnxt_coredump.c
index c06789882036..e710af72bf3e 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_coredump.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_coredump.c
@@ -14,6 +14,7 @@
 #include "bnxt.h"
 #include "bnxt_hwrm.h"
 #include "bnxt_coredump.h"
+#include <linux/sprintf.h>
 
 static int bnxt_hwrm_dbg_dma_data(struct bnxt *bp, void *msg,
 				  struct bnxt_hwrm_dbg_dma_info *info)
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_debugfs.c b/drivers/net/ethernet/broadcom/bnxt/bnxt_debugfs.c
index 156c2404854f..2666130c5eb4 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_debugfs.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_debugfs.c
@@ -14,6 +14,7 @@
 #include <linux/dim.h>
 #include "bnxt.h"
 #include "bnxt_debugfs.h"
+#include <linux/sprintf.h>
 
 static struct dentry *bnxt_debug_mnt;
 
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c b/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
index ae4529c043f0..a471e56bf3e5 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c
@@ -9,6 +9,7 @@
 
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <net/devlink.h>
 #include "bnxt_hsi.h"
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c b/drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
index dfb5944683f8..5de2d440d079 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c
@@ -10,6 +10,7 @@
 
 #include <linux/bitops.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <linux/ethtool.h>
 #include <linux/ethtool_netlink.h>
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c b/drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c
index 1df3d56cc4b5..c6543a2cca13 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_hwrm.c
@@ -20,6 +20,7 @@
 #include <linux/netdevice.h>
 #include <linux/pci.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 
 #include "bnxt_hsi.h"
 #include "bnxt.h"
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_ptp.c b/drivers/net/ethernet/broadcom/bnxt/bnxt_ptp.c
index cc07660330f5..4251dad3c0e2 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_ptp.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_ptp.c
@@ -12,6 +12,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/net_tstamp.h>
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include <linux/ptp_classify.h>
 #include <linux/clocksource.h>
diff --git a/drivers/net/ethernet/broadcom/bnxt/bnxt_vfr.c b/drivers/net/ethernet/broadcom/bnxt/bnxt_vfr.c
index 1467b94a6427..b0e8436b66e9 100644
--- a/drivers/net/ethernet/broadcom/bnxt/bnxt_vfr.c
+++ b/drivers/net/ethernet/broadcom/bnxt/bnxt_vfr.c
@@ -11,6 +11,7 @@
 #include <linux/etherdevice.h>
 #include <linux/rtnetlink.h>
 #include <linux/jhash.h>
+#include <linux/sprintf.h>
 #include <net/pkt_cls.h>
 
 #include "bnxt_hsi.h"
diff --git a/drivers/net/ethernet/broadcom/genet/bcmmii.c b/drivers/net/ethernet/broadcom/genet/bcmmii.c
index cbbe004621bc..c16760b2330c 100644
--- a/drivers/net/ethernet/broadcom/genet/bcmmii.c
+++ b/drivers/net/ethernet/broadcom/genet/bcmmii.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/wait.h>
diff --git a/drivers/net/ethernet/broadcom/sb1250-mac.c b/drivers/net/ethernet/broadcom/sb1250-mac.c
index fcf8485f3446..a8910fcf4091 100644
--- a/drivers/net/ethernet/broadcom/sb1250-mac.c
+++ b/drivers/net/ethernet/broadcom/sb1250-mac.c
@@ -13,6 +13,7 @@
 #include <linux/bug.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/broadcom/tg3.c b/drivers/net/ethernet/broadcom/tg3.c
index 50f674031f72..f78a9dc601e5 100644
--- a/drivers/net/ethernet/broadcom/tg3.c
+++ b/drivers/net/ethernet/broadcom/tg3.c
@@ -24,6 +24,7 @@
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <linux/kernel.h>
 #include <linux/sched/signal.h>
diff --git a/drivers/net/ethernet/brocade/bna/bfa_ioc.c b/drivers/net/ethernet/brocade/bna/bfa_ioc.c
index 9c80ab07a735..aeb923001ae1 100644
--- a/drivers/net/ethernet/brocade/bna/bfa_ioc.c
+++ b/drivers/net/ethernet/brocade/bna/bfa_ioc.c
@@ -12,6 +12,7 @@
 #include "bfa_ioc.h"
 #include "bfi_reg.h"
 #include "bfa_defs.h"
+#include <linux/sprintf.h>
 
 /* IOC local definitions */
 
diff --git a/drivers/net/ethernet/brocade/bna/bfa_ioc.h b/drivers/net/ethernet/brocade/bna/bfa_ioc.h
index f30d06ec4ffe..a8aa3ef8c293 100644
--- a/drivers/net/ethernet/brocade/bna/bfa_ioc.h
+++ b/drivers/net/ethernet/brocade/bna/bfa_ioc.h
@@ -15,6 +15,7 @@
 #include "bfa_cs.h"
 #include "bfi.h"
 #include "cna.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define BFA_IOC_TOV		3000	/* msecs */
 #define BFA_IOC_HWSEM_TOV	500	/* msecs */
diff --git a/drivers/net/ethernet/brocade/bna/bnad.c b/drivers/net/ethernet/brocade/bna/bnad.c
index 31191b520b58..4c5e3a687bd8 100644
--- a/drivers/net/ethernet/brocade/bna/bnad.c
+++ b/drivers/net/ethernet/brocade/bna/bnad.c
@@ -9,6 +9,7 @@
  * www.qlogic.com
  */
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/netdevice.h>
 #include <linux/skbuff.h>
 #include <linux/etherdevice.h>
@@ -19,6 +20,7 @@
 #include <linux/ip.h>
 #include <linux/prefetch.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "bnad.h"
 #include "bna.h"
diff --git a/drivers/net/ethernet/brocade/bna/bnad_debugfs.c b/drivers/net/ethernet/brocade/bna/bnad_debugfs.c
index 7246e13dd559..785db1af00f8 100644
--- a/drivers/net/ethernet/brocade/bna/bnad_debugfs.c
+++ b/drivers/net/ethernet/brocade/bna/bnad_debugfs.c
@@ -12,6 +12,8 @@
 #include <linux/debugfs.h>
 #include <linux/module.h>
 #include "bnad.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /*
  * BNA debufs interface
diff --git a/drivers/net/ethernet/brocade/bna/bnad_ethtool.c b/drivers/net/ethernet/brocade/bna/bnad_ethtool.c
index d1ad6c9f8140..7e87643398da 100644
--- a/drivers/net/ethernet/brocade/bna/bnad_ethtool.c
+++ b/drivers/net/ethernet/brocade/bna/bnad_ethtool.c
@@ -10,6 +10,7 @@
  */
 
 #include "cna.h"
+#include <linux/completion.h>
 
 #include <linux/netdevice.h>
 #include <linux/skbuff.h>
diff --git a/drivers/net/ethernet/cadence/macb_main.c b/drivers/net/ethernet/cadence/macb_main.c
index 898debfd4db3..24a133b629df 100644
--- a/drivers/net/ethernet/cadence/macb_main.c
+++ b/drivers/net/ethernet/cadence/macb_main.c
@@ -9,9 +9,11 @@
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
 #include <linux/crc32.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/circ_buf.h>
 #include <linux/slab.h>
diff --git a/drivers/net/ethernet/cavium/liquidio/lio_core.c b/drivers/net/ethernet/cavium/liquidio/lio_core.c
index f38d31bfab1b..c5c575cae773 100644
--- a/drivers/net/ethernet/cavium/liquidio/lio_core.c
+++ b/drivers/net/ethernet/cavium/liquidio/lio_core.c
@@ -25,6 +25,8 @@
 #include "octeon_nic.h"
 #include "octeon_main.h"
 #include "octeon_network.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Cavium Networks, <support@cavium.com>");
 MODULE_DESCRIPTION("Cavium LiquidIO Intelligent Server Adapter Core");
diff --git a/drivers/net/ethernet/cavium/liquidio/lio_ethtool.c b/drivers/net/ethernet/cavium/liquidio/lio_ethtool.c
index d3e07b6ed5e1..3f30db4f9a86 100644
--- a/drivers/net/ethernet/cavium/liquidio/lio_ethtool.c
+++ b/drivers/net/ethernet/cavium/liquidio/lio_ethtool.c
@@ -31,6 +31,8 @@
 #include "cn66xx_device.h"
 #include "cn23xx_pf_device.h"
 #include "cn23xx_vf_device.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static int lio_reset_queues(struct net_device *netdev, uint32_t num_qs);
 
diff --git a/drivers/net/ethernet/cavium/liquidio/lio_main.c b/drivers/net/ethernet/cavium/liquidio/lio_main.c
index 34f02a8ec2ca..5b80ddfd0f3d 100644
--- a/drivers/net/ethernet/cavium/liquidio/lio_main.c
+++ b/drivers/net/ethernet/cavium/liquidio/lio_main.c
@@ -17,8 +17,10 @@
  ***********************************************************************/
 #include <linux/module.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <net/vxlan.h>
 #include <linux/kthread.h>
 #include "liquidio_common.h"
@@ -35,6 +37,7 @@
 #include "cn23xx_pf_device.h"
 #include "liquidio_image.h"
 #include "lio_vf_rep.h"
+#include <linux/completion.h>
 
 MODULE_AUTHOR("Cavium Networks, <support@cavium.com>");
 MODULE_DESCRIPTION("Cavium LiquidIO Intelligent Server Adapter Driver");
diff --git a/drivers/net/ethernet/cavium/liquidio/lio_vf_main.c b/drivers/net/ethernet/cavium/liquidio/lio_vf_main.c
index 62c2eadc33e3..360d0ceaf8f3 100644
--- a/drivers/net/ethernet/cavium/liquidio/lio_vf_main.c
+++ b/drivers/net/ethernet/cavium/liquidio/lio_vf_main.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <net/vxlan.h>
 #include "liquidio_common.h"
 #include "octeon_droq.h"
@@ -28,6 +29,7 @@
 #include "octeon_main.h"
 #include "octeon_network.h"
 #include "cn23xx_vf_device.h"
+#include <linux/completion.h>
 
 MODULE_AUTHOR("Cavium Networks, <support@cavium.com>");
 MODULE_DESCRIPTION("Cavium LiquidIO Intelligent Server Adapter Virtual Function Driver");
diff --git a/drivers/net/ethernet/cavium/liquidio/lio_vf_rep.c b/drivers/net/ethernet/cavium/liquidio/lio_vf_rep.c
index aa6c0dfb6f1c..f25071109995 100644
--- a/drivers/net/ethernet/cavium/liquidio/lio_vf_rep.c
+++ b/drivers/net/ethernet/cavium/liquidio/lio_vf_rep.c
@@ -26,6 +26,8 @@
 #include "octeon_main.h"
 #include "octeon_network.h"
 #include "lio_vf_rep.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static int lio_vf_rep_open(struct net_device *ndev);
 static int lio_vf_rep_stop(struct net_device *ndev);
diff --git a/drivers/net/ethernet/cavium/liquidio/octeon_console.c b/drivers/net/ethernet/cavium/liquidio/octeon_console.c
index 67c3570f875f..b13024ef839a 100644
--- a/drivers/net/ethernet/cavium/liquidio/octeon_console.c
+++ b/drivers/net/ethernet/cavium/liquidio/octeon_console.c
@@ -29,6 +29,7 @@
 #include "octeon_device.h"
 #include "liquidio_image.h"
 #include "octeon_mem_ops.h"
+#include <linux/sprintf.h>
 
 static void octeon_remote_lock(void);
 static void octeon_remote_unlock(void);
diff --git a/drivers/net/ethernet/cavium/liquidio/octeon_device.c b/drivers/net/ethernet/cavium/liquidio/octeon_device.c
index 6b6cb73482d7..94d32f62e652 100644
--- a/drivers/net/ethernet/cavium/liquidio/octeon_device.c
+++ b/drivers/net/ethernet/cavium/liquidio/octeon_device.c
@@ -17,6 +17,7 @@
  ***********************************************************************/
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "liquidio_common.h"
 #include "octeon_droq.h"
diff --git a/drivers/net/ethernet/cavium/liquidio/octeon_main.h b/drivers/net/ethernet/cavium/liquidio/octeon_main.h
index 5b4cb725f60f..8d8edb577a72 100644
--- a/drivers/net/ethernet/cavium/liquidio/octeon_main.h
+++ b/drivers/net/ethernet/cavium/liquidio/octeon_main.h
@@ -23,6 +23,7 @@
 #ifndef _OCTEON_MAIN_H_
 #define  _OCTEON_MAIN_H_
 
+#include <linux/completion.h>
 #include <linux/sched/signal.h>
 
 #if BITS_PER_LONG == 32
diff --git a/drivers/net/ethernet/cavium/liquidio/octeon_nic.c b/drivers/net/ethernet/cavium/liquidio/octeon_nic.c
index dee56ea740e7..fc14f51e2f04 100644
--- a/drivers/net/ethernet/cavium/liquidio/octeon_nic.c
+++ b/drivers/net/ethernet/cavium/liquidio/octeon_nic.c
@@ -25,6 +25,7 @@
 #include "octeon_device.h"
 #include "octeon_nic.h"
 #include "octeon_main.h"
+#include <linux/completion.h>
 
 void *
 octeon_alloc_soft_command_resp(struct octeon_device    *oct,
diff --git a/drivers/net/ethernet/cavium/liquidio/response_manager.c b/drivers/net/ethernet/cavium/liquidio/response_manager.c
index 861050966e18..cbbb3bb4b0f6 100644
--- a/drivers/net/ethernet/cavium/liquidio/response_manager.c
+++ b/drivers/net/ethernet/cavium/liquidio/response_manager.c
@@ -24,6 +24,7 @@
 #include "response_manager.h"
 #include "octeon_device.h"
 #include "octeon_main.h"
+#include <linux/completion.h>
 
 static void oct_poll_req_completion(struct work_struct *work);
 
diff --git a/drivers/net/ethernet/cavium/octeon/octeon_mgmt.c b/drivers/net/ethernet/cavium/octeon/octeon_mgmt.c
index 007d4b06819e..7c5e60592de4 100644
--- a/drivers/net/ethernet/cavium/octeon/octeon_mgmt.c
+++ b/drivers/net/ethernet/cavium/octeon/octeon_mgmt.c
@@ -22,6 +22,7 @@
 #include <linux/slab.h>
 #include <linux/phy.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <asm/octeon/octeon.h>
 #include <asm/octeon/cvmx-mixx-defs.h>
diff --git a/drivers/net/ethernet/cavium/thunder/nic_main.c b/drivers/net/ethernet/cavium/thunder/nic_main.c
index 0ec65ec634df..65215c6a45ab 100644
--- a/drivers/net/ethernet/cavium/thunder/nic_main.c
+++ b/drivers/net/ethernet/cavium/thunder/nic_main.c
@@ -9,6 +9,7 @@
 #include <linux/etherdevice.h>
 #include <linux/of.h>
 #include <linux/if_vlan.h>
+#include <linux/sprintf.h>
 
 #include "nic_reg.h"
 #include "nic.h"
diff --git a/drivers/net/ethernet/cavium/thunder/nicvf_ethtool.c b/drivers/net/ethernet/cavium/thunder/nicvf_ethtool.c
index 34125b8cd935..91cf76c74ef5 100644
--- a/drivers/net/ethernet/cavium/thunder/nicvf_ethtool.c
+++ b/drivers/net/ethernet/cavium/thunder/nicvf_ethtool.c
@@ -8,6 +8,7 @@
 #include <linux/ethtool.h>
 #include <linux/pci.h>
 #include <linux/net_tstamp.h>
+#include <linux/sprintf.h>
 
 #include "nic_reg.h"
 #include "nic.h"
diff --git a/drivers/net/ethernet/cavium/thunder/nicvf_main.c b/drivers/net/ethernet/cavium/thunder/nicvf_main.c
index eff350e0bc2a..05e1b195e62c 100644
--- a/drivers/net/ethernet/cavium/thunder/nicvf_main.c
+++ b/drivers/net/ethernet/cavium/thunder/nicvf_main.c
@@ -18,6 +18,7 @@
 #include <linux/bpf_trace.h>
 #include <linux/filter.h>
 #include <linux/net_tstamp.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include "nic_reg.h"
diff --git a/drivers/net/ethernet/cavium/thunder/thunder_bgx.c b/drivers/net/ethernet/cavium/thunder/thunder_bgx.c
index a317feb8decb..9287fba72f2a 100644
--- a/drivers/net/ethernet/cavium/thunder/thunder_bgx.c
+++ b/drivers/net/ethernet/cavium/thunder/thunder_bgx.c
@@ -13,6 +13,7 @@
 #include <linux/of.h>
 #include <linux/of_mdio.h>
 #include <linux/of_net.h>
+#include <linux/sprintf.h>
 
 #include "nic_reg.h"
 #include "nic.h"
diff --git a/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c b/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
index 2236f1d35f2b..ed0bea43af11 100644
--- a/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
+++ b/drivers/net/ethernet/chelsio/cxgb3/cxgb3_main.c
@@ -34,6 +34,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/dma-mapping.h>
 #include <linux/netdevice.h>
@@ -41,6 +42,7 @@
 #include <linux/if_vlan.h>
 #include <linux/mdio.h>
 #include <linux/sockios.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/proc_fs.h>
 #include <linux/rtnetlink.h>
diff --git a/drivers/net/ethernet/chelsio/cxgb3/cxgb3_offload.c b/drivers/net/ethernet/chelsio/cxgb3/cxgb3_offload.c
index 89256b866840..f7fe5e69772d 100644
--- a/drivers/net/ethernet/chelsio/cxgb3/cxgb3_offload.c
+++ b/drivers/net/ethernet/chelsio/cxgb3/cxgb3_offload.c
@@ -34,6 +34,7 @@
 
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/neighbour.h>
 #include <linux/notifier.h>
 #include <linux/atomic.h>
diff --git a/drivers/net/ethernet/chelsio/cxgb3/t3_hw.c b/drivers/net/ethernet/chelsio/cxgb3/t3_hw.c
index a06003bfa04b..56e8e8f182be 100644
--- a/drivers/net/ethernet/chelsio/cxgb3/t3_hw.c
+++ b/drivers/net/ethernet/chelsio/cxgb3/t3_hw.c
@@ -34,6 +34,8 @@
 #include "regs.h"
 #include "sge_defs.h"
 #include "firmware_exports.h"
+#include <linux/hex.h>
+#include <linux/kstrtox.h>
 
 static void t3_port_intr_clear(struct adapter *adapter, int idx);
 
diff --git a/drivers/net/ethernet/chelsio/cxgb4/clip_tbl.c b/drivers/net/ethernet/chelsio/cxgb4/clip_tbl.c
index 163efab27e9b..2c3abd036f7c 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/clip_tbl.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/clip_tbl.c
@@ -14,6 +14,7 @@
 #include <linux/netdevice.h>
 #include <linux/jhash.h>
 #include <linux/if_vlan.h>
+#include <linux/sprintf.h>
 #include <net/addrconf.h>
 #include "cxgb4.h"
 #include "clip_tbl.h"
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cudbg_lib.c b/drivers/net/ethernet/chelsio/cxgb4/cudbg_lib.c
index 557c591a6ce3..2a1b6da32d84 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cudbg_lib.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cudbg_lib.c
@@ -5,6 +5,7 @@
 
 #include <linux/sort.h>
 #include <linux/string.h>
+#include <linux/kstrtox.h>
 
 #include "t4_regs.h"
 #include "cxgb4.h"
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_cudbg.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_cudbg.c
index dd66b244466d..7a08f511bc11 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_cudbg.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_cudbg.c
@@ -7,6 +7,7 @@
 #include "cxgb4.h"
 #include "cxgb4_cudbg.h"
 #include "cudbg_zlib.h"
+#include <linux/sprintf.h>
 
 static const struct cxgb4_collect_entity cxgb4_collect_mem_dump[] = {
 	{ CUDBG_EDC0, cudbg_collect_edc0_meminfo },
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_debugfs.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_debugfs.c
index 14e0d989c3ba..571a773c2d6c 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_debugfs.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_debugfs.c
@@ -34,6 +34,8 @@
 
 #include <linux/seq_file.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/sort.h>
 #include <linux/ctype.h>
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_ethtool.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_ethtool.c
index 47eecde36285..ecee55ce38f9 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_ethtool.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_ethtool.c
@@ -5,6 +5,7 @@
 
 #include <linux/firmware.h>
 #include <linux/mdio.h>
+#include <linux/sprintf.h>
 
 #include "cxgb4.h"
 #include "t4_regs.h"
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c
index 786ceae34488..dd0cb1184d81 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_filter.c
@@ -32,6 +32,7 @@
  * SOFTWARE.
  */
 #include <net/ipv6.h>
+#include <linux/completion.h>
 
 #include "cxgb4.h"
 #include "t4_regs.h"
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
index 2eb33a727bba..b99365fcec4d 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c
@@ -55,6 +55,7 @@
 #include <linux/sched.h>
 #include <linux/seq_file.h>
 #include <linux/sockios.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/workqueue.h>
 #include <net/neighbour.h>
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_flower.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_flower.c
index 72ac4a34424b..41e1a088c8cd 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_flower.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_flower.c
@@ -36,6 +36,7 @@
 #include <net/tc_act/tc_pedit.h>
 #include <net/tc_act/tc_gact.h>
 #include <net/tc_act/tc_vlan.h>
+#include <linux/completion.h>
 
 #include "cxgb4.h"
 #include "cxgb4_filter.h"
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_mqprio.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_mqprio.c
index 338b04f339b3..586c49ae50cb 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_mqprio.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_tc_mqprio.c
@@ -4,6 +4,8 @@
 #include "cxgb4.h"
 #include "cxgb4_tc_mqprio.h"
 #include "sched.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static int cxgb4_mqprio_validate(struct net_device *dev,
 				 struct tc_mqprio_qopt_offload *mqprio)
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_thermal.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_thermal.c
index dea9d2907666..f8034b1152d1 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_thermal.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_thermal.c
@@ -6,6 +6,7 @@
  */
 
 #include "cxgb4.h"
+#include <linux/sprintf.h>
 
 #define CXGB4_NUM_TRIPS 1
 
diff --git a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_uld.c b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_uld.c
index 17faac715882..6b84f11ce534 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/cxgb4_uld.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/cxgb4_uld.c
@@ -38,6 +38,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/debugfs.h>
 #include <linux/export.h>
diff --git a/drivers/net/ethernet/chelsio/cxgb4/l2t.c b/drivers/net/ethernet/chelsio/cxgb4/l2t.c
index 1e5f5b1a22a6..ffca43db1f13 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/l2t.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/l2t.c
@@ -40,6 +40,7 @@
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <net/neighbour.h>
 #include "cxgb4.h"
 #include "l2t.h"
diff --git a/drivers/net/ethernet/chelsio/cxgb4/sge.c b/drivers/net/ethernet/chelsio/cxgb4/sge.c
index b5ff2e1a9975..7438b594d107 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/sge.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/sge.c
@@ -41,10 +41,12 @@
 #include <linux/jiffies.h>
 #include <linux/prefetch.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <net/xfrm.h>
 #include <net/ipv6.h>
 #include <net/tcp.h>
 #include <net/busy_poll.h>
+#include <linux/completion.h>
 #ifdef CONFIG_CHELSIO_T4_FCOE
 #include <scsi/fc/fc_fcoe.h>
 #endif /* CONFIG_CHELSIO_T4_FCOE */
diff --git a/drivers/net/ethernet/chelsio/cxgb4/srq.c b/drivers/net/ethernet/chelsio/cxgb4/srq.c
index 9a54302bb046..098dde7d1345 100644
--- a/drivers/net/ethernet/chelsio/cxgb4/srq.c
+++ b/drivers/net/ethernet/chelsio/cxgb4/srq.c
@@ -35,6 +35,7 @@
 #include "cxgb4.h"
 #include "t4_msg.h"
 #include "srq.h"
+#include <linux/completion.h>
 
 struct srq_data *t4_init_srq(int srq_size)
 {
diff --git a/drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c b/drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c
index 9ba0864592e8..61ca8cfa6014 100644
--- a/drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c
+++ b/drivers/net/ethernet/chelsio/cxgb4vf/cxgb4vf_main.c
@@ -45,6 +45,7 @@
 #include <linux/debugfs.h>
 #include <linux/ethtool.h>
 #include <linux/mdio.h>
+#include <linux/sprintf.h>
 
 #include "t4vf_common.h"
 #include "t4vf_defs.h"
diff --git a/drivers/net/ethernet/chelsio/inline_crypto/ch_ktls/chcr_ktls.c b/drivers/net/ethernet/chelsio/inline_crypto/ch_ktls/chcr_ktls.c
index 6482728794dd..80480161558f 100644
--- a/drivers/net/ethernet/chelsio/inline_crypto/ch_ktls/chcr_ktls.c
+++ b/drivers/net/ethernet/chelsio/inline_crypto/ch_ktls/chcr_ktls.c
@@ -11,6 +11,7 @@
 #include <linux/netdevice.h>
 #include <crypto/aes.h>
 #include "chcr_ktls.h"
+#include <linux/completion.h>
 
 static LIST_HEAD(uld_ctx_list);
 static DEFINE_MUTEX(dev_mutex);
diff --git a/drivers/net/ethernet/cirrus/cs89x0.c b/drivers/net/ethernet/cirrus/cs89x0.c
index 0a21a10a791c..f2dffc8dc9fe 100644
--- a/drivers/net/ethernet/cirrus/cs89x0.c
+++ b/drivers/net/ethernet/cirrus/cs89x0.c
@@ -51,11 +51,13 @@
 #include <linux/module.h>
 #include <linux/printk.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/cisco/enic/enic_main.c b/drivers/net/ethernet/cisco/enic/enic_main.c
index 37bd38d772e8..ba74a7b039c7 100644
--- a/drivers/net/ethernet/cisco/enic/enic_main.c
+++ b/drivers/net/ethernet/cisco/enic/enic_main.c
@@ -19,6 +19,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/types.h>
diff --git a/drivers/net/ethernet/cisco/enic/enic_pp.c b/drivers/net/ethernet/cisco/enic/enic_pp.c
index 4720a952725d..ef36d9e68fb0 100644
--- a/drivers/net/ethernet/cisco/enic/enic_pp.c
+++ b/drivers/net/ethernet/cisco/enic/enic_pp.c
@@ -2,6 +2,7 @@
 // Copyright 2011 Cisco Systems, Inc.  All rights reserved.
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/types.h>
diff --git a/drivers/net/ethernet/cortina/gemini.c b/drivers/net/ethernet/cortina/gemini.c
index 705c3eb19cd3..6ae699443a1b 100644
--- a/drivers/net/ethernet/cortina/gemini.c
+++ b/drivers/net/ethernet/cortina/gemini.c
@@ -36,6 +36,7 @@
 #include <linux/ethtool.h>
 #include <linux/tcp.h>
 #include <linux/u64_stats_sync.h>
+#include <linux/hrtimer.h>
 
 #include <linux/in.h>
 #include <linux/ip.h>
diff --git a/drivers/net/ethernet/davicom/dm9051.c b/drivers/net/ethernet/davicom/dm9051.c
index bcfe52c11804..822b0d84be08 100644
--- a/drivers/net/ethernet/davicom/dm9051.c
+++ b/drivers/net/ethernet/davicom/dm9051.c
@@ -17,6 +17,7 @@
 #include <linux/skbuff.h>
 #include <linux/spinlock.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "dm9051.h"
diff --git a/drivers/net/ethernet/dec/tulip/tulip_core.c b/drivers/net/ethernet/dec/tulip/tulip_core.c
index ecfad43df45a..7e0768f3e5d4 100644
--- a/drivers/net/ethernet/dec/tulip/tulip_core.c
+++ b/drivers/net/ethernet/dec/tulip/tulip_core.c
@@ -24,6 +24,7 @@
 #include <linux/mii.h>
 #include <linux/crc32.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #ifdef CONFIG_SPARC
diff --git a/drivers/net/ethernet/dnet.c b/drivers/net/ethernet/dnet.c
index 2a18df3605f1..ebdbc08e9bff 100644
--- a/drivers/net/ethernet/dnet.c
+++ b/drivers/net/ethernet/dnet.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
diff --git a/drivers/net/ethernet/emulex/benet/be_cmds.c b/drivers/net/ethernet/emulex/benet/be_cmds.c
index 61adcebeef01..46c4a5d72052 100644
--- a/drivers/net/ethernet/emulex/benet/be_cmds.c
+++ b/drivers/net/ethernet/emulex/benet/be_cmds.c
@@ -14,6 +14,9 @@
 #include <linux/module.h>
 #include "be.h"
 #include "be_cmds.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 const char * const be_misconfig_evt_port_state[] = {
 	"Physical Link is functional",
diff --git a/drivers/net/ethernet/emulex/benet/be_ethtool.c b/drivers/net/ethernet/emulex/benet/be_ethtool.c
index f001a649f58f..1759ec88a011 100644
--- a/drivers/net/ethernet/emulex/benet/be_ethtool.c
+++ b/drivers/net/ethernet/emulex/benet/be_ethtool.c
@@ -14,6 +14,7 @@
 #include "be.h"
 #include "be_cmds.h"
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 struct be_ethtool_stat {
 	char desc[ETH_GSTRING_LEN];
diff --git a/drivers/net/ethernet/emulex/benet/be_main.c b/drivers/net/ethernet/emulex/benet/be_main.c
index ad862ed7888a..c9cd775ecb74 100644
--- a/drivers/net/ethernet/emulex/benet/be_main.c
+++ b/drivers/net/ethernet/emulex/benet/be_main.c
@@ -16,7 +16,10 @@
 #include "be.h"
 #include "be_cmds.h"
 #include <asm/div64.h>
+#include <linux/completion.h>
 #include <linux/if_bridge.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 #include <net/busy_poll.h>
 #include <net/vxlan.h>
 
diff --git a/drivers/net/ethernet/engleder/tsnep_ethtool.c b/drivers/net/ethernet/engleder/tsnep_ethtool.c
index 65ec1abc9442..d5065ccf701a 100644
--- a/drivers/net/ethernet/engleder/tsnep_ethtool.c
+++ b/drivers/net/ethernet/engleder/tsnep_ethtool.c
@@ -2,6 +2,7 @@
 /* Copyright (C) 2021 Gerhard Engleder <gerhard@engleder-embedded.com> */
 
 #include "tsnep.h"
+#include <linux/sprintf.h>
 
 static const char tsnep_stats_strings[][ETH_GSTRING_LEN] = {
 	"rx_packets",
diff --git a/drivers/net/ethernet/engleder/tsnep_main.c b/drivers/net/ethernet/engleder/tsnep_main.c
index 4b15af6b7122..11ca2d6a7ea7 100644
--- a/drivers/net/ethernet/engleder/tsnep_main.c
+++ b/drivers/net/ethernet/engleder/tsnep_main.c
@@ -17,7 +17,9 @@
 
 #include "tsnep.h"
 #include "tsnep_hw.h"
+#include <linux/sprintf.h>
 
+#include <linux/highmem.h> // for kmap_local_page()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_net.h>
diff --git a/drivers/net/ethernet/engleder/tsnep_ptp.c b/drivers/net/ethernet/engleder/tsnep_ptp.c
index 54fbf0126815..87788630c4fb 100644
--- a/drivers/net/ethernet/engleder/tsnep_ptp.c
+++ b/drivers/net/ethernet/engleder/tsnep_ptp.c
@@ -2,6 +2,7 @@
 /* Copyright (C) 2021 Gerhard Engleder <gerhard@engleder-embedded.com> */
 
 #include "tsnep.h"
+#include <linux/sprintf.h>
 
 void tsnep_get_system_time(struct tsnep_adapter *adapter, u64 *time)
 {
diff --git a/drivers/net/ethernet/ethoc.c b/drivers/net/ethernet/ethoc.c
index ad41c9019018..78f0c4666760 100644
--- a/drivers/net/ethernet/ethoc.c
+++ b/drivers/net/ethernet/ethoc.c
@@ -22,6 +22,7 @@
 #include <linux/of.h>
 #include <linux/of_net.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/ethoc.h>
 
 static int buffer_size = 0x8000; /* 32 KBytes */
diff --git a/drivers/net/ethernet/faraday/ftgmac100.c b/drivers/net/ethernet/faraday/ftgmac100.c
index fddfd1dd5070..3d598be8207e 100644
--- a/drivers/net/ethernet/faraday/ftgmac100.c
+++ b/drivers/net/ethernet/faraday/ftgmac100.c
@@ -24,6 +24,7 @@
 #include <linux/crc32.h>
 #include <linux/if_vlan.h>
 #include <linux/of_net.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <net/ncsi.h>
 
diff --git a/drivers/net/ethernet/faraday/ftmac100.c b/drivers/net/ethernet/faraday/ftmac100.c
index 003bc9a45c65..d78541fc18b8 100644
--- a/drivers/net/ethernet/faraday/ftmac100.c
+++ b/drivers/net/ethernet/faraday/ftmac100.c
@@ -16,6 +16,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mii.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
diff --git a/drivers/net/ethernet/fealnx.c b/drivers/net/ethernet/fealnx.c
index ed18450fd2cc..dd7f0649166b 100644
--- a/drivers/net/ethernet/fealnx.c
+++ b/drivers/net/ethernet/fealnx.c
@@ -68,6 +68,7 @@ static int full_duplex[MAX_UNITS] = { -1, -1, -1, -1, -1, -1, -1, -1 };
 /* Include files, designed to support most kernel versions 2.0.0 and later. */
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/freescale/dpaa/dpaa_eth_sysfs.c b/drivers/net/ethernet/freescale/dpaa/dpaa_eth_sysfs.c
index 4fee74c024bd..7e0ba11634ac 100644
--- a/drivers/net/ethernet/freescale/dpaa/dpaa_eth_sysfs.c
+++ b/drivers/net/ethernet/freescale/dpaa/dpaa_eth_sysfs.c
@@ -9,6 +9,7 @@
 #include <linux/of_net.h>
 #include "dpaa_eth.h"
 #include "mac.h"
+#include <linux/sprintf.h>
 
 static ssize_t dpaa_eth_show_addr(struct device *dev,
 				  struct device_attribute *attr, char *buf)
diff --git a/drivers/net/ethernet/freescale/dpaa/dpaa_ethtool.c b/drivers/net/ethernet/freescale/dpaa/dpaa_ethtool.c
index 5bd0b36d1feb..df81e60ecf28 100644
--- a/drivers/net/ethernet/freescale/dpaa/dpaa_ethtool.c
+++ b/drivers/net/ethernet/freescale/dpaa/dpaa_ethtool.c
@@ -11,6 +11,7 @@
 #include <linux/platform_device.h>
 #include <linux/net_tstamp.h>
 #include <linux/fsl/ptp_qoriq.h>
+#include <linux/sprintf.h>
 
 #include "dpaa_eth.h"
 #include "mac.h"
diff --git a/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-debugfs.c b/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-debugfs.c
index 1af254caeb0d..02d4d21f934b 100644
--- a/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-debugfs.c
+++ b/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-debugfs.c
@@ -6,6 +6,7 @@
 #include <linux/debugfs.h>
 #include "dpaa2-eth.h"
 #include "dpaa2-eth-debugfs.h"
+#include <linux/sprintf.h>
 
 #define DPAA2_ETH_DBG_ROOT "dpaa2-eth"
 
diff --git a/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-devlink.c b/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-devlink.c
index 76f808d38066..9efa9de20e7a 100644
--- a/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-devlink.c
+++ b/drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-devlink.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: (GPL-2.0+ OR BSD-3-Clause)
 #include "dpaa2-eth.h"
+#include <linux/sprintf.h>
 /* Copyright 2020 NXP
  */
 
diff --git a/drivers/net/ethernet/freescale/dpaa2/dpaa2-ethtool.c b/drivers/net/ethernet/freescale/dpaa2/dpaa2-ethtool.c
index e80e9388c71f..a655729fbc5f 100644
--- a/drivers/net/ethernet/freescale/dpaa2/dpaa2-ethtool.c
+++ b/drivers/net/ethernet/freescale/dpaa2/dpaa2-ethtool.c
@@ -5,6 +5,7 @@
 
 #include <linux/net_tstamp.h>
 #include <linux/nospec.h>
+#include <linux/sprintf.h>
 
 #include "dpni.h"	/* DPNI_LINK_OPT_* */
 #include "dpaa2-eth.h"
diff --git a/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch-ethtool.c b/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch-ethtool.c
index 6bc1988be311..dc9dc7ddf865 100644
--- a/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch-ethtool.c
+++ b/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch-ethtool.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 #include "dpaa2-switch.h"
 
diff --git a/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch.c b/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch.c
index f3543a2df68d..20ea109bc02d 100644
--- a/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch.c
+++ b/drivers/net/ethernet/freescale/dpaa2/dpaa2-switch.c
@@ -8,6 +8,8 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/interrupt.h>
 #include <linux/kthread.h>
diff --git a/drivers/net/ethernet/freescale/enetc/enetc.c b/drivers/net/ethernet/freescale/enetc/enetc.c
index 9f07f4947b63..58e74ed22cab 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc.c
@@ -3,6 +3,8 @@
 
 #include "enetc.h"
 #include <linux/bpf_trace.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/udp.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/net/ethernet/freescale/enetc/enetc.h b/drivers/net/ethernet/freescale/enetc/enetc.h
index a9c2ff22431c..9e7daa5ed24d 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc.h
+++ b/drivers/net/ethernet/freescale/enetc/enetc.h
@@ -6,6 +6,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/skbuff.h>
 #include <linux/ethtool.h>
 #include <linux/if_vlan.h>
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_cbdr.c b/drivers/net/ethernet/freescale/enetc/enetc_cbdr.c
index 20bfdf7fb4b4..37207665a35c 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_cbdr.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_cbdr.c
@@ -2,6 +2,7 @@
 /* Copyright 2017-2019 NXP */
 
 #include "enetc.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 int enetc_setup_cbdr(struct device *dev, struct enetc_hw *hw, int bd_count,
 		     struct enetc_cbdr *cbdr)
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_ethtool.c b/drivers/net/ethernet/freescale/enetc/enetc_ethtool.c
index f7753ea5b57e..c095d97c1e5a 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_ethtool.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_ethtool.c
@@ -5,6 +5,7 @@
 #include <linux/net_tstamp.h>
 #include <linux/module.h>
 #include "enetc.h"
+#include <linux/sprintf.h>
 
 static const u32 enetc_si_regs[] = {
 	ENETC_SIMR, ENETC_SIPMAR0, ENETC_SIPMAR1, ENETC_SICBDRMR,
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_msg.c b/drivers/net/ethernet/freescale/enetc/enetc_msg.c
index 40d22ebe9224..1e08cf6c85fa 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_msg.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_msg.c
@@ -2,6 +2,8 @@
 /* Copyright 2017-2019 NXP */
 
 #include "enetc_pf.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 static void enetc_msg_disable_mr_int(struct enetc_hw *hw)
 {
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_pci_mdio.c b/drivers/net/ethernet/freescale/enetc/enetc_pci_mdio.c
index a1b595bd7993..c16175329bf1 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_pci_mdio.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_pci_mdio.c
@@ -3,6 +3,7 @@
 #include <linux/fsl/enetc_mdio.h>
 #include <linux/of_mdio.h>
 #include "enetc_pf.h"
+#include <linux/sprintf.h>
 
 #define ENETC_MDIO_DEV_ID	0xee01
 #define ENETC_MDIO_DEV_NAME	"FSL PCIe IE Central MDIO"
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_pf.c b/drivers/net/ethernet/freescale/enetc/enetc_pf.c
index 11b14555802c..1df46fa2b455 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_pf.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_pf.c
@@ -2,6 +2,7 @@
 /* Copyright 2017-2019 NXP */
 
 #include <asm/unaligned.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mdio.h>
 #include <linux/module.h>
 #include <linux/fsl/enetc_mdio.h>
@@ -11,6 +12,7 @@
 #include <linux/pcs-lynx.h>
 #include "enetc_ierb.h"
 #include "enetc_pf.h"
+#include <linux/sprintf.h>
 
 #define ENETC_DRV_NAME_STR "ENETC PF driver"
 
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_qos.c b/drivers/net/ethernet/freescale/enetc/enetc_qos.c
index b65da49dd926..9e0afc6dc0ec 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_qos.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_qos.c
@@ -2,6 +2,7 @@
 /* Copyright 2019 NXP */
 
 #include "enetc.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <net/pkt_sched.h>
 #include <linux/math64.h>
diff --git a/drivers/net/ethernet/freescale/enetc/enetc_vf.c b/drivers/net/ethernet/freescale/enetc/enetc_vf.c
index dfcaac302e24..eb020a86225a 100644
--- a/drivers/net/ethernet/freescale/enetc/enetc_vf.c
+++ b/drivers/net/ethernet/freescale/enetc/enetc_vf.c
@@ -3,6 +3,7 @@
 
 #include <linux/module.h>
 #include "enetc.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define ENETC_DRV_NAME_STR "ENETC VF driver"
 
diff --git a/drivers/net/ethernet/freescale/fec_main.c b/drivers/net/ethernet/freescale/fec_main.c
index 42bdc01a304e..2047ca3e84dc 100644
--- a/drivers/net/ethernet/freescale/fec_main.c
+++ b/drivers/net/ethernet/freescale/fec_main.c
@@ -24,6 +24,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/pm_runtime.h>
 #include <linux/ptrace.h>
diff --git a/drivers/net/ethernet/freescale/fec_mpc52xx_phy.c b/drivers/net/ethernet/freescale/fec_mpc52xx_phy.c
index 39689826cc8f..d9edd188d456 100644
--- a/drivers/net/ethernet/freescale/fec_mpc52xx_phy.c
+++ b/drivers/net/ethernet/freescale/fec_mpc52xx_phy.c
@@ -21,6 +21,7 @@
 #include <asm/io.h>
 #include <asm/mpc52xx.h>
 #include "fec_mpc52xx.h"
+#include <linux/sprintf.h>
 
 struct mpc52xx_fec_mdio_priv {
 	struct mpc52xx_fec __iomem *regs;
diff --git a/drivers/net/ethernet/freescale/fec_ptp.c b/drivers/net/ethernet/freescale/fec_ptp.c
index 181d9bfbee22..6f36d1ffbc61 100644
--- a/drivers/net/ethernet/freescale/fec_ptp.c
+++ b/drivers/net/ethernet/freescale/fec_ptp.c
@@ -32,6 +32,7 @@
 #include <linux/of.h>
 #include <linux/of_gpio.h>
 #include <linux/of_net.h>
+#include <linux/hrtimer.h>
 
 #include "fec.h"
 
diff --git a/drivers/net/ethernet/freescale/fs_enet/mii-bitbang.c b/drivers/net/ethernet/freescale/fs_enet/mii-bitbang.c
index f965a2329055..6e39794819ae 100644
--- a/drivers/net/ethernet/freescale/fs_enet/mii-bitbang.c
+++ b/drivers/net/ethernet/freescale/fs_enet/mii-bitbang.c
@@ -24,6 +24,7 @@
 #include <linux/of_address.h>
 #include <linux/of_mdio.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 
 #include "fs_enet.h"
 
diff --git a/drivers/net/ethernet/freescale/fs_enet/mii-fec.c b/drivers/net/ethernet/freescale/fs_enet/mii-fec.c
index 7bb69727952a..06e2c4536bb7 100644
--- a/drivers/net/ethernet/freescale/fs_enet/mii-fec.c
+++ b/drivers/net/ethernet/freescale/fs_enet/mii-fec.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/string.h>
diff --git a/drivers/net/ethernet/freescale/fsl_pq_mdio.c b/drivers/net/ethernet/freescale/fsl_pq_mdio.c
index 026f7270a54d..d79df2482329 100644
--- a/drivers/net/ethernet/freescale/fsl_pq_mdio.c
+++ b/drivers/net/ethernet/freescale/fsl_pq_mdio.c
@@ -13,6 +13,7 @@
 
 #include <linux/kernel.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
diff --git a/drivers/net/ethernet/freescale/gianfar.c b/drivers/net/ethernet/freescale/gianfar.c
index a811238c018d..5611af2fbfa3 100644
--- a/drivers/net/ethernet/freescale/gianfar.c
+++ b/drivers/net/ethernet/freescale/gianfar.c
@@ -61,6 +61,7 @@
 
 #include <linux/kernel.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/unistd.h>
diff --git a/drivers/net/ethernet/freescale/ucc_geth.c b/drivers/net/ethernet/freescale/ucc_geth.c
index ab421243a419..09840f04badd 100644
--- a/drivers/net/ethernet/freescale/ucc_geth.c
+++ b/drivers/net/ethernet/freescale/ucc_geth.c
@@ -15,6 +15,7 @@
 #include <linux/init.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/freescale/xgmac_mdio.c b/drivers/net/ethernet/freescale/xgmac_mdio.c
index 65dc07d0df0f..5c6b5498cf69 100644
--- a/drivers/net/ethernet/freescale/xgmac_mdio.c
+++ b/drivers/net/ethernet/freescale/xgmac_mdio.c
@@ -24,6 +24,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Number of microseconds to wait for a register to respond */
 #define TIMEOUT	1000
diff --git a/drivers/net/ethernet/fujitsu/fmvj18x_cs.c b/drivers/net/ethernet/fujitsu/fmvj18x_cs.c
index 4859493471db..9b41682cc0c0 100644
--- a/drivers/net/ethernet/fujitsu/fmvj18x_cs.c
+++ b/drivers/net/ethernet/fujitsu/fmvj18x_cs.c
@@ -37,6 +37,7 @@
 #include <linux/kernel.h>
 #include <linux/ptrace.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/fungible/funcore/fun_dev.c b/drivers/net/ethernet/fungible/funcore/fun_dev.c
index a7fbd4cd560a..7d322d1791dc 100644
--- a/drivers/net/ethernet/fungible/funcore/fun_dev.c
+++ b/drivers/net/ethernet/fungible/funcore/fun_dev.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: (GPL-2.0-only OR BSD-3-Clause)
 
 #include <linux/bitmap.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/net/ethernet/fungible/funcore/fun_queue.c b/drivers/net/ethernet/fungible/funcore/fun_queue.c
index 8ab9f68434f5..7672730f2c87 100644
--- a/drivers/net/ethernet/fungible/funcore/fun_queue.c
+++ b/drivers/net/ethernet/fungible/funcore/fun_queue.c
@@ -7,6 +7,7 @@
 #include <linux/netdevice.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "fun_dev.h"
 #include "fun_queue.h"
diff --git a/drivers/net/ethernet/fungible/funeth/funeth_main.c b/drivers/net/ethernet/fungible/funeth/funeth_main.c
index df86770731ad..2aac16504a2b 100644
--- a/drivers/net/ethernet/fungible/funeth/funeth_main.c
+++ b/drivers/net/ethernet/fungible/funeth/funeth_main.c
@@ -7,11 +7,13 @@
 #include <linux/filter.h>
 #include <linux/idr.h>
 #include <linux/if_vlan.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/netdevice.h>
 #include <linux/pci.h>
 #include <linux/rtnetlink.h>
 #include <linux/inetdevice.h>
+#include <linux/sprintf.h>
 
 #include "funeth.h"
 #include "funeth_devlink.h"
diff --git a/drivers/net/ethernet/google/gve/gve_ethtool.c b/drivers/net/ethernet/google/gve/gve_ethtool.c
index e5397aa1e48f..a16650acd277 100644
--- a/drivers/net/ethernet/google/gve/gve_ethtool.c
+++ b/drivers/net/ethernet/google/gve/gve_ethtool.c
@@ -9,6 +9,7 @@
 #include "gve.h"
 #include "gve_adminq.h"
 #include "gve_dqo.h"
+#include <linux/sprintf.h>
 
 static void gve_get_drvinfo(struct net_device *netdev,
 			    struct ethtool_drvinfo *info)
diff --git a/drivers/net/ethernet/google/gve/gve_main.c b/drivers/net/ethernet/google/gve/gve_main.c
index db6d9ae7cd78..b8bc195db48b 100644
--- a/drivers/net/ethernet/google/gve/gve_main.c
+++ b/drivers/net/ethernet/google/gve/gve_main.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/workqueue.h>
 #include <linux/utsname.h>
diff --git a/drivers/net/ethernet/hisilicon/hip04_eth.c b/drivers/net/ethernet/hisilicon/hip04_eth.c
index b91e7a06b97f..4b75a40daa7f 100644
--- a/drivers/net/ethernet/hisilicon/hip04_eth.c
+++ b/drivers/net/ethernet/hisilicon/hip04_eth.c
@@ -15,6 +15,7 @@
 #include <linux/of_net.h>
 #include <linux/mfd/syscon.h>
 #include <linux/regmap.h>
+#include <linux/hrtimer.h>
 
 #define SC_PPE_RESET_DREQ		0x026C
 
diff --git a/drivers/net/ethernet/hisilicon/hix5hd2_gmac.c b/drivers/net/ethernet/hisilicon/hix5hd2_gmac.c
index 1a972b093a42..ec99984ea425 100644
--- a/drivers/net/ethernet/hisilicon/hix5hd2_gmac.c
+++ b/drivers/net/ethernet/hisilicon/hix5hd2_gmac.c
@@ -14,6 +14,7 @@
 #include <linux/reset.h>
 #include <linux/clk.h>
 #include <linux/circ_buf.h>
+#include <linux/sprintf.h>
 
 #define STATION_ADDR_LOW		0x0000
 #define STATION_ADDR_HIGH		0x0004
diff --git a/drivers/net/ethernet/hisilicon/hns/hns_ae_adapt.c b/drivers/net/ethernet/hisilicon/hns/hns_ae_adapt.c
index bc3e406f0139..3dc9c2d7f3fc 100644
--- a/drivers/net/ethernet/hisilicon/hns/hns_ae_adapt.c
+++ b/drivers/net/ethernet/hisilicon/hns/hns_ae_adapt.c
@@ -6,6 +6,7 @@
 #include <linux/etherdevice.h>
 #include <linux/netdevice.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "hnae.h"
 #include "hns_dsaf_mac.h"
diff --git a/drivers/net/ethernet/hisilicon/hns/hns_dsaf_main.c b/drivers/net/ethernet/hisilicon/hns/hns_dsaf_main.c
index 1b67da1f6fa8..f12fa1c5d631 100644
--- a/drivers/net/ethernet/hisilicon/hns/hns_dsaf_main.c
+++ b/drivers/net/ethernet/hisilicon/hns/hns_dsaf_main.c
@@ -16,6 +16,7 @@
 #include <linux/of_irq.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "hns_dsaf_mac.h"
diff --git a/drivers/net/ethernet/hisilicon/hns/hns_enet.c b/drivers/net/ethernet/hisilicon/hns/hns_enet.c
index 8a713eed4465..092f15fb0df7 100644
--- a/drivers/net/ethernet/hisilicon/hns/hns_enet.c
+++ b/drivers/net/ethernet/hisilicon/hns/hns_enet.c
@@ -16,6 +16,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 
 #include "hnae.h"
 #include "hns_enet.h"
diff --git a/drivers/net/ethernet/hisilicon/hns/hns_ethtool.c b/drivers/net/ethernet/hisilicon/hns/hns_ethtool.c
index a5bb306b2cf1..43024533d31e 100644
--- a/drivers/net/ethernet/hisilicon/hns/hns_ethtool.c
+++ b/drivers/net/ethernet/hisilicon/hns/hns_ethtool.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include "hns_enet.h"
+#include <linux/sprintf.h>
 
 #define HNS_PHY_PAGE_MDIX	0
 #define HNS_PHY_PAGE_LED	3
diff --git a/drivers/net/ethernet/hisilicon/hns3/hnae3.h b/drivers/net/ethernet/hisilicon/hns3/hnae3.h
index d7e175a9cb49..e8c98a1808e0 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hnae3.h
+++ b/drivers/net/ethernet/hisilicon/hns3/hnae3.h
@@ -30,6 +30,7 @@
 #include <linux/netdevice.h>
 #include <linux/pci.h>
 #include <linux/pkt_sched.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/bitmap.h>
 #include <net/pkt_cls.h>
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_cmd.c b/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_cmd.c
index d92ad6082d8e..76afb1757bd9 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_cmd.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_cmd.c
@@ -3,6 +3,7 @@
 
 #include "hnae3.h"
 #include "hclge_comm_cmd.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void hclge_comm_cmd_config_regs(struct hclge_comm_hw *hw,
 				       struct hclge_comm_cmq_ring *ring)
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_tqp_stats.c b/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_tqp_stats.c
index f3c9395d8351..2671f7c3db98 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_tqp_stats.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3_common/hclge_comm_tqp_stats.c
@@ -2,6 +2,7 @@
 // Copyright (c) 2021-2021 Hisilicon Limited.
 
 #include <linux/err.h>
+#include <linux/sprintf.h>
 
 #include "hnae3.h"
 #include "hclge_comm_cmd.h"
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3_debugfs.c b/drivers/net/ethernet/hisilicon/hns3/hns3_debugfs.c
index c083d1d10767..a8f365dd9049 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3_debugfs.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3_debugfs.c
@@ -3,6 +3,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include "hnae3.h"
 #include "hns3_debugfs.h"
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3_enet.c b/drivers/net/ethernet/hisilicon/hns3/hns3_enet.c
index f1695c889d3a..7a6e1407785e 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3_enet.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3_enet.c
@@ -4,6 +4,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/etherdevice.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #ifdef CONFIG_RFS_ACCEL
 #include <linux/cpu_rmap.h>
 #endif
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3_ethtool.c b/drivers/net/ethernet/hisilicon/hns3/hns3_ethtool.c
index 999a0ee162a6..3e46a5cc7c51 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3_ethtool.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3_ethtool.c
@@ -2,6 +2,7 @@
 // Copyright (c) 2016-2017 Hisilicon Limited.
 
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/phy.h>
 #include <linux/sfp.h>
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_debugfs.c b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_debugfs.c
index 9ec471ced3d6..a6072efe4dd9 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_debugfs.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_debugfs.c
@@ -3,6 +3,7 @@
 
 #include <linux/device.h>
 #include <linux/sched/clock.h>
+#include <linux/sprintf.h>
 
 #include "hclge_debugfs.h"
 #include "hclge_err.h"
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_devlink.c b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_devlink.c
index 9a939c0b217f..546f6011cb35 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_devlink.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_devlink.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2021 Hisilicon Limited. */
 
 #include <net/devlink.h>
+#include <linux/sprintf.h>
 
 #include "hclge_devlink.h"
 
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_main.c b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_main.c
index 5ea9e59569ef..a3a1cd5bdfa5 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_main.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_main.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/if_vlan.h>
 #include <linux/crash_dump.h>
+#include <linux/sprintf.h>
 #include <net/ipv6.h>
 #include <net/rtnetlink.h>
 #include "hclge_cmd.h"
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mdio.c b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mdio.c
index 85fb11de43a1..15f368110a00 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mdio.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_mdio.c
@@ -4,6 +4,7 @@
 #include <linux/etherdevice.h>
 #include <linux/kernel.h>
 #include <linux/marvell_phy.h>
+#include <linux/sprintf.h>
 
 #include "hclge_cmd.h"
 #include "hclge_main.h"
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_ptp.c b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_ptp.c
index 80a2a0073d97..caf7ca071a99 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_ptp.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_ptp.c
@@ -4,6 +4,7 @@
 #include <linux/skbuff.h>
 #include "hclge_main.h"
 #include "hnae3.h"
+#include <linux/sprintf.h>
 
 static int hclge_ptp_get_cycle(struct hclge_dev *hdev)
 {
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_devlink.c b/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_devlink.c
index 1b535142c65a..ce23b3b6eac3 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_devlink.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_devlink.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2021 Hisilicon Limited. */
 
 #include <net/devlink.h>
+#include <linux/sprintf.h>
 
 #include "hclgevf_devlink.h"
 
diff --git a/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_main.c b/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_main.c
index 0aa9beefd1c7..02521cddf3a5 100644
--- a/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_main.c
+++ b/drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_main.c
@@ -3,6 +3,7 @@
 
 #include <linux/etherdevice.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 #include <net/rtnetlink.h>
 #include "hclgevf_cmd.h"
 #include "hclgevf_main.h"
diff --git a/drivers/net/ethernet/hisilicon/hns_mdio.c b/drivers/net/ethernet/hisilicon/hns_mdio.c
index ed73707176c1..240d3673b26e 100644
--- a/drivers/net/ethernet/hisilicon/hns_mdio.c
+++ b/drivers/net/ethernet/hisilicon/hns_mdio.c
@@ -19,6 +19,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #define MDIO_DRV_NAME "Hi-HNS_MDIO"
 #define MDIO_BUS_NAME "Hisilicon MII Bus"
diff --git a/drivers/net/ethernet/huawei/hinic/hinic_debugfs.c b/drivers/net/ethernet/huawei/hinic/hinic_debugfs.c
index 061952c6c21a..0b34888804b4 100644
--- a/drivers/net/ethernet/huawei/hinic/hinic_debugfs.c
+++ b/drivers/net/ethernet/huawei/hinic/hinic_debugfs.c
@@ -5,6 +5,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include "hinic_debugfs.h"
 
diff --git a/drivers/net/ethernet/huawei/hinic/hinic_ethtool.c b/drivers/net/ethernet/huawei/hinic/hinic_ethtool.c
index 0304f03d4093..1a2cae35c0ee 100644
--- a/drivers/net/ethernet/huawei/hinic/hinic_ethtool.c
+++ b/drivers/net/ethernet/huawei/hinic/hinic_ethtool.c
@@ -17,6 +17,7 @@
 #include <linux/pci.h>
 #include <linux/device.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/huawei/hinic/hinic_hw_cmdq.c b/drivers/net/ethernet/huawei/hinic/hinic_hw_cmdq.c
index d39eec9c62bf..d8414d150db0 100644
--- a/drivers/net/ethernet/huawei/hinic/hinic_hw_cmdq.c
+++ b/drivers/net/ethernet/huawei/hinic/hinic_hw_cmdq.c
@@ -14,6 +14,7 @@
 #include <linux/spinlock.h>
 #include <linux/sizes.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/log2.h>
 #include <linux/io.h>
 #include <linux/completion.h>
diff --git a/drivers/net/ethernet/huawei/hinic/hinic_hw_eqs.c b/drivers/net/ethernet/huawei/hinic/hinic_hw_eqs.c
index 045c47786a04..f1f69207e5aa 100644
--- a/drivers/net/ethernet/huawei/hinic/hinic_hw_eqs.c
+++ b/drivers/net/ethernet/huawei/hinic/hinic_hw_eqs.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/pci.h>
diff --git a/drivers/net/ethernet/huawei/hinic/hinic_hw_mbox.c b/drivers/net/ethernet/huawei/hinic/hinic_hw_mbox.c
index 3f9c31d29215..423c349736d0 100644
--- a/drivers/net/ethernet/huawei/hinic/hinic_hw_mbox.c
+++ b/drivers/net/ethernet/huawei/hinic/hinic_hw_mbox.c
@@ -4,6 +4,7 @@
  */
 #include <linux/pci.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/types.h>
 #include <linux/completion.h>
 #include <linux/semaphore.h>
diff --git a/drivers/net/ethernet/huawei/hinic/hinic_port.c b/drivers/net/ethernet/huawei/hinic/hinic_port.c
index f81a43d2cdfc..f0908bd67a12 100644
--- a/drivers/net/ethernet/huawei/hinic/hinic_port.c
+++ b/drivers/net/ethernet/huawei/hinic/hinic_port.c
@@ -11,6 +11,7 @@
 #include <linux/pci.h>
 #include <linux/device.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 
 #include "hinic_hw_if.h"
 #include "hinic_hw_dev.h"
diff --git a/drivers/net/ethernet/ibm/ehea/ehea_main.c b/drivers/net/ethernet/ibm/ehea/ehea_main.c
index 1e29e5c9a2df..e00d7775eee7 100644
--- a/drivers/net/ethernet/ibm/ehea/ehea_main.c
+++ b/drivers/net/ethernet/ibm/ehea/ehea_main.c
@@ -17,6 +17,7 @@
 #include <linux/device.h>
 #include <linux/in.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/udp.h>
 #include <linux/if.h>
diff --git a/drivers/net/ethernet/ibm/emac/core.c b/drivers/net/ethernet/ibm/emac/core.c
index e6e47b1842ea..3eb5a151263c 100644
--- a/drivers/net/ethernet/ibm/emac/core.c
+++ b/drivers/net/ethernet/ibm/emac/core.c
@@ -21,6 +21,7 @@
 
 #include <linux/module.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/delay.h>
diff --git a/drivers/net/ethernet/ibm/ibmveth.c b/drivers/net/ethernet/ibm/ibmveth.c
index b5aef0b29efe..a06fe4b924e5 100644
--- a/drivers/net/ethernet/ibm/ibmveth.c
+++ b/drivers/net/ethernet/ibm/ibmveth.c
@@ -12,10 +12,13 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/dma-mapping.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/skbuff.h>
diff --git a/drivers/net/ethernet/ibm/ibmvnic.c b/drivers/net/ethernet/ibm/ibmvnic.c
index 30c47b8470ad..222979aeb459 100644
--- a/drivers/net/ethernet/ibm/ibmvnic.c
+++ b/drivers/net/ethernet/ibm/ibmvnic.c
@@ -34,6 +34,7 @@
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/completion.h>
diff --git a/drivers/net/ethernet/intel/e1000e/ethtool.c b/drivers/net/ethernet/intel/e1000e/ethtool.c
index ff243ae71b78..5f19089d307d 100644
--- a/drivers/net/ethernet/intel/e1000e/ethtool.c
+++ b/drivers/net/ethernet/intel/e1000e/ethtool.c
@@ -9,6 +9,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/pm_runtime.h>
 
diff --git a/drivers/net/ethernet/intel/e1000e/netdev.c b/drivers/net/ethernet/intel/e1000e/netdev.c
index af5d9d97a0d6..426ee4014d9d 100644
--- a/drivers/net/ethernet/intel/e1000e/netdev.c
+++ b/drivers/net/ethernet/intel/e1000e/netdev.c
@@ -4,6 +4,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/pci.h>
diff --git a/drivers/net/ethernet/intel/e1000e/ptp.c b/drivers/net/ethernet/intel/e1000e/ptp.c
index bbcfd529399b..d7991d951da2 100644
--- a/drivers/net/ethernet/intel/e1000e/ptp.c
+++ b/drivers/net/ethernet/intel/e1000e/ptp.c
@@ -7,6 +7,7 @@
  */
 
 #include "e1000.h"
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_E1000E_HWTS
 #include <linux/clocksource.h>
diff --git a/drivers/net/ethernet/intel/fm10k/fm10k_debugfs.c b/drivers/net/ethernet/intel/fm10k/fm10k_debugfs.c
index 5c77054d67c6..4e3666738809 100644
--- a/drivers/net/ethernet/intel/fm10k/fm10k_debugfs.c
+++ b/drivers/net/ethernet/intel/fm10k/fm10k_debugfs.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2013 - 2018 Intel Corporation. */
 
 #include "fm10k.h"
+#include <linux/sprintf.h>
 
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
diff --git a/drivers/net/ethernet/intel/fm10k/fm10k_ethtool.c b/drivers/net/ethernet/intel/fm10k/fm10k_ethtool.c
index 1bc5b6c0b897..f2b2986d8452 100644
--- a/drivers/net/ethernet/intel/fm10k/fm10k_ethtool.c
+++ b/drivers/net/ethernet/intel/fm10k/fm10k_ethtool.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2013 - 2019 Intel Corporation. */
 
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "fm10k.h"
diff --git a/drivers/net/ethernet/intel/fm10k/fm10k_pci.c b/drivers/net/ethernet/intel/fm10k/fm10k_pci.c
index d748b98274e7..8ffaf73d2995 100644
--- a/drivers/net/ethernet/intel/fm10k/fm10k_pci.c
+++ b/drivers/net/ethernet/intel/fm10k/fm10k_pci.c
@@ -3,6 +3,7 @@
 
 #include <linux/module.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 
 #include "fm10k.h"
 
diff --git a/drivers/net/ethernet/intel/i40e/i40e.h b/drivers/net/ethernet/intel/i40e/i40e.h
index 9b701615c7c6..f2e57e85804a 100644
--- a/drivers/net/ethernet/intel/i40e/i40e.h
+++ b/drivers/net/ethernet/intel/i40e/i40e.h
@@ -6,6 +6,7 @@
 
 #include <linux/pci.h>
 #include <linux/ptp_clock_kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/avf/virtchnl.h>
 #include <linux/net/intel/i40e_client.h>
diff --git a/drivers/net/ethernet/intel/i40e/i40e_adminq.c b/drivers/net/ethernet/intel/i40e/i40e_adminq.c
index f73f5930fc58..74d44edc16e7 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_adminq.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_adminq.c
@@ -5,6 +5,7 @@
 #include "i40e_alloc.h"
 #include "i40e_register.h"
 #include "i40e_prototype.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void i40e_resume_aq(struct i40e_hw *hw);
 
diff --git a/drivers/net/ethernet/intel/i40e/i40e_adminq.h b/drivers/net/ethernet/intel/i40e/i40e_adminq.h
index ee86d2c53079..60b559cd3368 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_adminq.h
+++ b/drivers/net/ethernet/intel/i40e/i40e_adminq.h
@@ -4,6 +4,7 @@
 #ifndef _I40E_ADMINQ_H_
 #define _I40E_ADMINQ_H_
 
+#include <linux/errno.h>
 #include <linux/mutex.h>
 #include "i40e_alloc.h"
 #include "i40e_adminq_cmd.h"
diff --git a/drivers/net/ethernet/intel/i40e/i40e_common.c b/drivers/net/ethernet/intel/i40e/i40e_common.c
index de6ca6295742..12fb838537dc 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_common.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_common.c
@@ -5,11 +5,13 @@
 #include <linux/bitfield.h>
 #include <linux/delay.h>
 #include <linux/etherdevice.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 #include "i40e_adminq_cmd.h"
 #include "i40e_devids.h"
 #include "i40e_prototype.h"
 #include "i40e_register.h"
+#include <linux/sprintf.h>
 
 /**
  * i40e_set_mac_type - Sets MAC type
diff --git a/drivers/net/ethernet/intel/i40e/i40e_ddp.c b/drivers/net/ethernet/intel/i40e/i40e_ddp.c
index 2f53f0f53bc3..ff7e0146d3d9 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_ddp.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_ddp.c
@@ -3,6 +3,7 @@
 
 #include <linux/firmware.h>
 #include "i40e.h"
+#include <linux/sprintf.h>
 
 #define I40_DDP_FLASH_REGION		100
 #define I40E_PROFILE_INFO_SIZE		48
diff --git a/drivers/net/ethernet/intel/i40e/i40e_debugfs.c b/drivers/net/ethernet/intel/i40e/i40e_debugfs.c
index ef70ddbe9c2f..79d595aa3931 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_debugfs.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_debugfs.c
@@ -8,6 +8,7 @@
 #include <linux/if_bridge.h>
 #include "i40e.h"
 #include "i40e_virtchnl_pf.h"
+#include <linux/sprintf.h>
 
 static struct dentry *i40e_dbg_root;
 
diff --git a/drivers/net/ethernet/intel/i40e/i40e_devlink.c b/drivers/net/ethernet/intel/i40e/i40e_devlink.c
index cc4e9e2addb7..3869322008de 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_devlink.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_devlink.c
@@ -4,6 +4,7 @@
 #include <net/devlink.h>
 #include "i40e.h"
 #include "i40e_devlink.h"
+#include <linux/sprintf.h>
 
 static void i40e_info_get_dsn(struct i40e_pf *pf, char *buf, size_t len)
 {
diff --git a/drivers/net/ethernet/intel/i40e/i40e_ethtool.c b/drivers/net/ethernet/intel/i40e/i40e_ethtool.c
index 1b5473358e1a..689d6a1731f1 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_ethtool.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_ethtool.c
@@ -7,6 +7,7 @@
 #include "i40e_diag.h"
 #include "i40e_txrx_common.h"
 #include "i40e_virtchnl_pf.h"
+#include <linux/sprintf.h>
 
 /* ethtool statistics helpers */
 
diff --git a/drivers/net/ethernet/intel/i40e/i40e_hmc.h b/drivers/net/ethernet/intel/i40e/i40e_hmc.h
index 480e3a883cc7..53ce1738f919 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_hmc.h
+++ b/drivers/net/ethernet/intel/i40e/i40e_hmc.h
@@ -7,6 +7,9 @@
 #include "i40e_alloc.h"
 #include "i40e_io.h"
 #include "i40e_register.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
+#include <linux/kernel.h> // for upper_32_bits()
 
 #define I40E_HMC_MAX_BP_COUNT 512
 
diff --git a/drivers/net/ethernet/intel/i40e/i40e_lan_hmc.c b/drivers/net/ethernet/intel/i40e/i40e_lan_hmc.c
index beaaf5c309d5..257c8f371256 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_lan_hmc.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_lan_hmc.c
@@ -6,6 +6,8 @@
 #include "i40e_lan_hmc.h"
 #include "i40e_type.h"
 
+#include <linux/minmax.h>
+
 /* lan specific interface functions */
 
 /**
diff --git a/drivers/net/ethernet/intel/i40e/i40e_main.c b/drivers/net/ethernet/intel/i40e/i40e_main.c
index 6e7fd473abfd..7473d20948c0 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_main.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_main.c
@@ -6,6 +6,7 @@
 #include <linux/if_bridge.h>
 #include <linux/if_macvlan.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/pkt_cls.h>
 #include <net/xdp_sock_drv.h>
 
diff --git a/drivers/net/ethernet/intel/i40e/i40e_ptp.c b/drivers/net/ethernet/intel/i40e/i40e_ptp.c
index e7ebcb09f23c..dc91b5974cea 100644
--- a/drivers/net/ethernet/intel/i40e/i40e_ptp.c
+++ b/drivers/net/ethernet/intel/i40e/i40e_ptp.c
@@ -5,6 +5,7 @@
 #include <linux/posix-clock.h>
 #include "i40e.h"
 #include "i40e_devids.h"
+#include <linux/sprintf.h>
 
 /* The XL710 timesync is very much like Intel's 82599 design when it comes to
  * the fundamental clock design. However, the clock operations are much simpler
diff --git a/drivers/net/ethernet/intel/iavf/iavf_adminq.c b/drivers/net/ethernet/intel/iavf/iavf_adminq.c
index 82fcd18ad660..e8cb4b35b55f 100644
--- a/drivers/net/ethernet/intel/iavf/iavf_adminq.c
+++ b/drivers/net/ethernet/intel/iavf/iavf_adminq.c
@@ -6,6 +6,7 @@
 #include "iavf_register.h"
 #include "iavf_adminq.h"
 #include "iavf_prototype.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /**
  *  iavf_alloc_adminq_asq_ring - Allocate Admin Queue send rings
diff --git a/drivers/net/ethernet/intel/iavf/iavf_common.c b/drivers/net/ethernet/intel/iavf/iavf_common.c
index 5a25233a89d5..89887e820bc2 100644
--- a/drivers/net/ethernet/intel/iavf/iavf_common.c
+++ b/drivers/net/ethernet/intel/iavf/iavf_common.c
@@ -6,6 +6,7 @@
 #include "iavf_type.h"
 #include "iavf_adminq.h"
 #include "iavf_prototype.h"
+#include <linux/sprintf.h>
 
 /**
  * iavf_aq_str - convert AQ err code to a string
diff --git a/drivers/net/ethernet/intel/iavf/iavf_ethtool.c b/drivers/net/ethernet/intel/iavf/iavf_ethtool.c
index 378c3e9ddf9d..e98cd623f29d 100644
--- a/drivers/net/ethernet/intel/iavf/iavf_ethtool.c
+++ b/drivers/net/ethernet/intel/iavf/iavf_ethtool.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2013 - 2018 Intel Corporation. */
 
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 /* ethtool support for iavf */
diff --git a/drivers/net/ethernet/intel/iavf/iavf_main.c b/drivers/net/ethernet/intel/iavf/iavf_main.c
index 335fd13e86f7..7387f3b7d4b7 100644
--- a/drivers/net/ethernet/intel/iavf/iavf_main.c
+++ b/drivers/net/ethernet/intel/iavf/iavf_main.c
@@ -3,6 +3,7 @@
 
 #include "iavf.h"
 #include "iavf_prototype.h"
+#include <linux/sprintf.h>
 /* All iavf tracepoints are defined by the include below, which must
  * be included exactly once across the whole kernel with
  * CREATE_TRACE_POINTS defined
diff --git a/drivers/net/ethernet/intel/iavf/iavf_virtchnl.c b/drivers/net/ethernet/intel/iavf/iavf_virtchnl.c
index 22f2df7c460b..ade77e6b1d19 100644
--- a/drivers/net/ethernet/intel/iavf/iavf_virtchnl.c
+++ b/drivers/net/ethernet/intel/iavf/iavf_virtchnl.c
@@ -3,6 +3,7 @@
 
 #include "iavf.h"
 #include "iavf_prototype.h"
+#include <linux/sprintf.h>
 
 /**
  * iavf_send_pf_msg
diff --git a/drivers/net/ethernet/intel/ice/ice_controlq.c b/drivers/net/ethernet/intel/ice/ice_controlq.c
index e7d2474c431c..ba8e3b0c4cb3 100644
--- a/drivers/net/ethernet/intel/ice/ice_controlq.c
+++ b/drivers/net/ethernet/intel/ice/ice_controlq.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2018, Intel Corporation. */
 
 #include "ice_common.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define ICE_CQ_INIT_REGS(qinfo, prefix)				\
 do {								\
diff --git a/drivers/net/ethernet/intel/ice/ice_debugfs.c b/drivers/net/ethernet/intel/ice/ice_debugfs.c
index 85aa31dd86b1..2f230173e35a 100644
--- a/drivers/net/ethernet/intel/ice/ice_debugfs.c
+++ b/drivers/net/ethernet/intel/ice/ice_debugfs.c
@@ -3,7 +3,9 @@
 
 #include <linux/fs.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "ice.h"
 
diff --git a/drivers/net/ethernet/intel/ice/ice_devlink.c b/drivers/net/ethernet/intel/ice/ice_devlink.c
index 65be56f2af9e..c9d1a7a4d409 100644
--- a/drivers/net/ethernet/intel/ice/ice_devlink.c
+++ b/drivers/net/ethernet/intel/ice/ice_devlink.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2020, Intel Corporation. */
 
 #include <linux/vmalloc.h>
+#include <linux/sprintf.h>
 
 #include "ice.h"
 #include "ice_lib.h"
diff --git a/drivers/net/ethernet/intel/ice/ice_ethtool.c b/drivers/net/ethernet/intel/ice/ice_ethtool.c
index 3cc364a4d682..e94eb471cd7c 100644
--- a/drivers/net/ethernet/intel/ice/ice_ethtool.c
+++ b/drivers/net/ethernet/intel/ice/ice_ethtool.c
@@ -9,6 +9,7 @@
 #include "ice_fltr.h"
 #include "ice_lib.h"
 #include "ice_dcb_lib.h"
+#include <linux/sprintf.h>
 #include <net/dcbnl.h>
 
 struct ice_stats {
diff --git a/drivers/net/ethernet/intel/ice/ice_main.c b/drivers/net/ethernet/intel/ice/ice_main.c
index 2b7960824bc3..ce4f4eafcdb7 100644
--- a/drivers/net/ethernet/intel/ice/ice_main.c
+++ b/drivers/net/ethernet/intel/ice/ice_main.c
@@ -15,6 +15,7 @@
 #include "ice_dcb_nl.h"
 #include "ice_devlink.h"
 #include "ice_hwmon.h"
+#include <linux/sprintf.h>
 /* Including ice_trace.h with CREATE_TRACE_POINTS defined will generate the
  * ice tracepoint functions. This must be done exactly once across the
  * ice driver.
diff --git a/drivers/net/ethernet/intel/ice/ice_ptp.c b/drivers/net/ethernet/intel/ice/ice_ptp.c
index c11eba07283c..4b232b2eaafd 100644
--- a/drivers/net/ethernet/intel/ice/ice_ptp.c
+++ b/drivers/net/ethernet/intel/ice/ice_ptp.c
@@ -4,6 +4,8 @@
 #include "ice.h"
 #include "ice_lib.h"
 #include "ice_trace.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #define E810_OUT_PROP_DELAY_NS 1
 
diff --git a/drivers/net/ethernet/intel/ice/ice_ptp_hw.c b/drivers/net/ethernet/intel/ice/ice_ptp_hw.c
index 187ce9b54e1a..06909608cff8 100644
--- a/drivers/net/ethernet/intel/ice/ice_ptp_hw.c
+++ b/drivers/net/ethernet/intel/ice/ice_ptp_hw.c
@@ -6,6 +6,7 @@
 #include "ice_ptp_hw.h"
 #include "ice_ptp_consts.h"
 #include "ice_cgu_regs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static struct dpll_pin_frequency ice_cgu_pin_freq_common[] = {
 	DPLL_PIN_FREQUENCY_1PPS,
diff --git a/drivers/net/ethernet/intel/ice/ice_repr.c b/drivers/net/ethernet/intel/ice/ice_repr.c
index 5f30fb131f74..d64fe8d7dcd3 100644
--- a/drivers/net/ethernet/intel/ice/ice_repr.c
+++ b/drivers/net/ethernet/intel/ice/ice_repr.c
@@ -7,6 +7,7 @@
 #include "ice_sriov.h"
 #include "ice_tc_lib.h"
 #include "ice_dcb_lib.h"
+#include <linux/sprintf.h>
 
 /**
  * ice_repr_get_sw_port_id - get port ID associated with representor
diff --git a/drivers/net/ethernet/intel/ice/ice_sched.c b/drivers/net/ethernet/intel/ice/ice_sched.c
index d174a4eeb899..61c5c123c78c 100644
--- a/drivers/net/ethernet/intel/ice/ice_sched.c
+++ b/drivers/net/ethernet/intel/ice/ice_sched.c
@@ -3,6 +3,7 @@
 
 #include <net/devlink.h>
 #include "ice_sched.h"
+#include <linux/sprintf.h>
 
 /**
  * ice_sched_add_root_node - Insert the Tx scheduler root node in SW DB
diff --git a/drivers/net/ethernet/intel/idpf/idpf_controlq.c b/drivers/net/ethernet/intel/idpf/idpf_controlq.c
index c7f43d2fcd13..ee73b605b708 100644
--- a/drivers/net/ethernet/intel/idpf/idpf_controlq.c
+++ b/drivers/net/ethernet/intel/idpf/idpf_controlq.c
@@ -2,6 +2,9 @@
 /* Copyright (C) 2023 Intel Corporation */
 
 #include "idpf_controlq.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
+#include <linux/kernel.h> // for lower_32_bits(), upper_32_bits()
 
 /**
  * idpf_ctlq_setup_regs - initialize control queue registers
diff --git a/drivers/net/ethernet/intel/idpf/idpf_lib.c b/drivers/net/ethernet/intel/idpf/idpf_lib.c
index 58179bd733ff..2d7fc1da87fc 100644
--- a/drivers/net/ethernet/intel/idpf/idpf_lib.c
+++ b/drivers/net/ethernet/intel/idpf/idpf_lib.c
@@ -2,6 +2,7 @@
 /* Copyright (C) 2023 Intel Corporation */
 
 #include "idpf.h"
+#include <linux/sprintf.h>
 
 static const struct net_device_ops idpf_netdev_ops_splitq;
 static const struct net_device_ops idpf_netdev_ops_singleq;
diff --git a/drivers/net/ethernet/intel/idpf/idpf_txrx.c b/drivers/net/ethernet/intel/idpf/idpf_txrx.c
index 2f8ad79ae3f0..c48a13e59aea 100644
--- a/drivers/net/ethernet/intel/idpf/idpf_txrx.c
+++ b/drivers/net/ethernet/intel/idpf/idpf_txrx.c
@@ -2,6 +2,7 @@
 /* Copyright (C) 2023 Intel Corporation */
 
 #include "idpf.h"
+#include <linux/sprintf.h>
 
 /**
  * idpf_buf_lifo_push - push a buffer pointer onto stack
diff --git a/drivers/net/ethernet/intel/igb/igb_hwmon.c b/drivers/net/ethernet/intel/igb/igb_hwmon.c
index 21a29a0ca7f4..3a1f6c6c96cc 100644
--- a/drivers/net/ethernet/intel/igb/igb_hwmon.c
+++ b/drivers/net/ethernet/intel/igb/igb_hwmon.c
@@ -4,6 +4,7 @@
 #include "igb.h"
 #include "e1000_82575.h"
 #include "e1000_hw.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/types.h>
diff --git a/drivers/net/ethernet/intel/igb/igb_main.c b/drivers/net/ethernet/intel/igb/igb_main.c
index 4df8d4153aa5..2413cae2c74d 100644
--- a/drivers/net/ethernet/intel/igb/igb_main.c
+++ b/drivers/net/ethernet/intel/igb/igb_main.c
@@ -4,6 +4,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/bitops.h>
diff --git a/drivers/net/ethernet/intel/igb/igb_ptp.c b/drivers/net/ethernet/intel/igb/igb_ptp.c
index 319c544b9f04..7d8820f59907 100644
--- a/drivers/net/ethernet/intel/igb/igb_ptp.c
+++ b/drivers/net/ethernet/intel/igb/igb_ptp.c
@@ -5,6 +5,7 @@
 #include <linux/device.h>
 #include <linux/pci.h>
 #include <linux/ptp_classify.h>
+#include <linux/sprintf.h>
 
 #include "igb.h"
 
diff --git a/drivers/net/ethernet/intel/igbvf/netdev.c b/drivers/net/ethernet/intel/igbvf/netdev.c
index a4d4f00e6a87..ae003172609d 100644
--- a/drivers/net/ethernet/intel/igbvf/netdev.c
+++ b/drivers/net/ethernet/intel/igbvf/netdev.c
@@ -17,6 +17,7 @@
 #include <linux/prefetch.h>
 #include <linux/sctp.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/net/ethernet/intel/igc/igc_dump.c b/drivers/net/ethernet/intel/igc/igc_dump.c
index c09c95cc5f70..1c68907fb47b 100644
--- a/drivers/net/ethernet/intel/igc/igc_dump.c
+++ b/drivers/net/ethernet/intel/igc/igc_dump.c
@@ -2,6 +2,7 @@
 /* Copyright (c)  2018 Intel Corporation */
 
 #include "igc.h"
+#include <linux/sprintf.h>
 
 struct igc_reg_info {
 	u32 ofs;
diff --git a/drivers/net/ethernet/intel/igc/igc_ethtool.c b/drivers/net/ethernet/intel/igc/igc_ethtool.c
index 47c797dd2cd9..04776aed0a82 100644
--- a/drivers/net/ethernet/intel/igc/igc_ethtool.c
+++ b/drivers/net/ethernet/intel/igc/igc_ethtool.c
@@ -5,6 +5,7 @@
 #include <linux/if_vlan.h>
 #include <linux/pm_runtime.h>
 #include <linux/mdio.h>
+#include <linux/sprintf.h>
 
 #include "igc.h"
 #include "igc_diag.h"
diff --git a/drivers/net/ethernet/intel/igc/igc_main.c b/drivers/net/ethernet/intel/igc/igc_main.c
index c3fe62813f43..bd210fe444f7 100644
--- a/drivers/net/ethernet/intel/igc/igc_main.c
+++ b/drivers/net/ethernet/intel/igc/igc_main.c
@@ -2,6 +2,7 @@
 /* Copyright (c)  2018 Intel Corporation */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/if_vlan.h>
 #include <linux/tcp.h>
diff --git a/drivers/net/ethernet/intel/igc/igc_ptp.c b/drivers/net/ethernet/intel/igc/igc_ptp.c
index 885faaa7b9de..8fad80772630 100644
--- a/drivers/net/ethernet/intel/igc/igc_ptp.c
+++ b/drivers/net/ethernet/intel/igc/igc_ptp.c
@@ -2,6 +2,7 @@
 /* Copyright (c)  2019 Intel Corporation */
 
 #include "igc.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/device.h>
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_debugfs.c b/drivers/net/ethernet/intel/ixgbe/ixgbe_debugfs.c
index 5b1cf49df3d3..13ef4a5e2f77 100644
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_debugfs.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_debugfs.c
@@ -3,6 +3,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "ixgbe.h"
 
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_fcoe.c b/drivers/net/ethernet/intel/ixgbe/ixgbe_fcoe.c
index 18d63c8c2ff4..ddc551cfc49f 100644
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_fcoe.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_fcoe.c
@@ -6,6 +6,7 @@
 #include <linux/gfp.h>
 #include <linux/if_vlan.h>
 #include <generated/utsrelease.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_device.h>
 #include <scsi/fc/fc_fs.h>
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c b/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
index e23c3614fb10..3c7af25446c7 100644
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_main.c
@@ -5,6 +5,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/string.h>
 #include <linux/in.h>
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c b/drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
index 75e9453331ed..16cb42ca68a4 100644
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_phy.c
@@ -5,6 +5,7 @@
 #include <linux/delay.h>
 #include <linux/iopoll.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #include "ixgbe.h"
 #include "ixgbe_phy.h"
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_ptp.c b/drivers/net/ethernet/intel/ixgbe/ixgbe_ptp.c
index 9339edbd9082..f33b0d3f2f69 100644
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_ptp.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_ptp.c
@@ -4,6 +4,7 @@
 #include "ixgbe.h"
 #include <linux/ptp_classify.h>
 #include <linux/clocksource.h>
+#include <linux/sprintf.h>
 
 /*
  * The 82599 and the X540 do not have true 64bit nanosecond scale
diff --git a/drivers/net/ethernet/intel/ixgbe/ixgbe_sysfs.c b/drivers/net/ethernet/intel/ixgbe/ixgbe_sysfs.c
index 204844288c16..d52025f69fd9 100644
--- a/drivers/net/ethernet/intel/ixgbe/ixgbe_sysfs.c
+++ b/drivers/net/ethernet/intel/ixgbe/ixgbe_sysfs.c
@@ -4,6 +4,7 @@
 #include "ixgbe.h"
 #include "ixgbe_common.h"
 #include "ixgbe_type.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/types.h>
diff --git a/drivers/net/ethernet/intel/ixgbevf/ethtool.c b/drivers/net/ethernet/intel/ixgbevf/ethtool.c
index 7ac53171b041..b50c5a98d646 100644
--- a/drivers/net/ethernet/intel/ixgbevf/ethtool.c
+++ b/drivers/net/ethernet/intel/ixgbevf/ethtool.c
@@ -11,6 +11,7 @@
 #include <linux/pci.h>
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/if_vlan.h>
 #include <linux/uaccess.h>
diff --git a/drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c b/drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c
index a44e4bd56142..17fd4fde35bb 100644
--- a/drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c
+++ b/drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/string.h>
 #include <linux/in.h>
diff --git a/drivers/net/ethernet/lantiq_etop.c b/drivers/net/ethernet/lantiq_etop.c
index 1d5b7bb6380f..604cb90ed993 100644
--- a/drivers/net/ethernet/lantiq_etop.c
+++ b/drivers/net/ethernet/lantiq_etop.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/uaccess.h>
diff --git a/drivers/net/ethernet/marvell/mv643xx_eth.c b/drivers/net/ethernet/marvell/mv643xx_eth.c
index f0bdc06d253d..73fb4dcf7e6b 100644
--- a/drivers/net/ethernet/marvell/mv643xx_eth.c
+++ b/drivers/net/ethernet/marvell/mv643xx_eth.c
@@ -30,6 +30,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/in.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <net/tso.h>
 #include <linux/tcp.h>
 #include <linux/udp.h>
diff --git a/drivers/net/ethernet/marvell/mvmdio.c b/drivers/net/ethernet/marvell/mvmdio.c
index 9190eff6c0bb..d6b7ead6d540 100644
--- a/drivers/net/ethernet/marvell/mvmdio.c
+++ b/drivers/net/ethernet/marvell/mvmdio.c
@@ -31,6 +31,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #define MVMDIO_SMI_DATA_SHIFT		0
diff --git a/drivers/net/ethernet/marvell/mvneta_bm.c b/drivers/net/ethernet/marvell/mvneta_bm.c
index 3f46a0fed048..623a3bd6ac7b 100644
--- a/drivers/net/ethernet/marvell/mvneta_bm.c
+++ b/drivers/net/ethernet/marvell/mvneta_bm.c
@@ -21,6 +21,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <net/hwbm.h>
 #include "mvneta_bm.h"
 
diff --git a/drivers/net/ethernet/marvell/mvpp2/mvpp2_debugfs.c b/drivers/net/ethernet/marvell/mvpp2/mvpp2_debugfs.c
index 0f9bc4f8ec3b..eaf5e1c018ea 100644
--- a/drivers/net/ethernet/marvell/mvpp2/mvpp2_debugfs.c
+++ b/drivers/net/ethernet/marvell/mvpp2/mvpp2_debugfs.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include "mvpp2.h"
 #include "mvpp2_prs.h"
diff --git a/drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c b/drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c
index 23adf53c2aa1..ec3b1dc9dfc4 100644
--- a/drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c
+++ b/drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c
@@ -32,6 +32,7 @@
 #include <linux/hrtimer.h>
 #include <linux/ktime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/ppp_defs.h>
 #include <net/ip.h>
 #include <net/ipv6.h>
diff --git a/drivers/net/ethernet/marvell/mvpp2/mvpp2_tai.c b/drivers/net/ethernet/marvell/mvpp2/mvpp2_tai.c
index 95862aff49f1..f14cc2cfc1f0 100644
--- a/drivers/net/ethernet/marvell/mvpp2/mvpp2_tai.c
+++ b/drivers/net/ethernet/marvell/mvpp2/mvpp2_tai.c
@@ -33,6 +33,7 @@
  * Consequently, we support none of these.
  */
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/ptp_clock_kernel.h>
 #include <linux/slab.h>
 
diff --git a/drivers/net/ethernet/marvell/octeon_ep/octep_ethtool.c b/drivers/net/ethernet/marvell/octeon_ep/octep_ethtool.c
index 7d0124b283da..b62c60288485 100644
--- a/drivers/net/ethernet/marvell/octeon_ep/octep_ethtool.c
+++ b/drivers/net/ethernet/marvell/octeon_ep/octep_ethtool.c
@@ -8,6 +8,7 @@
 #include <linux/pci.h>
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 #include "octep_config.h"
 #include "octep_main.h"
diff --git a/drivers/net/ethernet/marvell/octeon_ep/octep_main.c b/drivers/net/ethernet/marvell/octeon_ep/octep_main.c
index 7c9faa714a10..4836f8cf82a6 100644
--- a/drivers/net/ethernet/marvell/octeon_ep/octep_main.c
+++ b/drivers/net/ethernet/marvell/octeon_ep/octep_main.c
@@ -11,6 +11,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "octep_config.h"
diff --git a/drivers/net/ethernet/marvell/octeontx2/af/cgx.c b/drivers/net/ethernet/marvell/octeontx2/af/cgx.c
index 6c70c8498690..024b89567526 100644
--- a/drivers/net/ethernet/marvell/octeontx2/af/cgx.c
+++ b/drivers/net/ethernet/marvell/octeontx2/af/cgx.c
@@ -16,6 +16,7 @@
 #include <linux/of.h>
 #include <linux/of_mdio.h>
 #include <linux/of_net.h>
+#include <linux/sprintf.h>
 
 #include "cgx.h"
 #include "rvu.h"
diff --git a/drivers/net/ethernet/marvell/octeontx2/af/rvu.c b/drivers/net/ethernet/marvell/octeontx2/af/rvu.c
index edd12d09dc89..91fbeeff578c 100644
--- a/drivers/net/ethernet/marvell/octeontx2/af/rvu.c
+++ b/drivers/net/ethernet/marvell/octeontx2/af/rvu.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/irq.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include "cgx.h"
diff --git a/drivers/net/ethernet/marvell/octeontx2/af/rvu_cpt.c b/drivers/net/ethernet/marvell/octeontx2/af/rvu_cpt.c
index f047185f38e0..9053bd2b7a81 100644
--- a/drivers/net/ethernet/marvell/octeontx2/af/rvu_cpt.c
+++ b/drivers/net/ethernet/marvell/octeontx2/af/rvu_cpt.c
@@ -11,6 +11,7 @@
 #include "rvu_reg.h"
 #include "mbox.h"
 #include "rvu.h"
+#include <linux/sprintf.h>
 
 /* CPT PF device id */
 #define	PCI_DEVID_OTX2_CPT_PF	0xA0FD
diff --git a/drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c b/drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c
index e6d7914ce61c..db91b93aa15c 100644
--- a/drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c
+++ b/drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c
@@ -9,8 +9,10 @@
 
 #include <linux/fs.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "rvu_struct.h"
 #include "rvu_reg.h"
diff --git a/drivers/net/ethernet/marvell/octeontx2/af/rvu_devlink.c b/drivers/net/ethernet/marvell/octeontx2/af/rvu_devlink.c
index 1e6fbd98423d..9fc4e121a525 100644
--- a/drivers/net/ethernet/marvell/octeontx2/af/rvu_devlink.c
+++ b/drivers/net/ethernet/marvell/octeontx2/af/rvu_devlink.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "rvu.h"
 #include "rvu_reg.h"
diff --git a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ethtool.c b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ethtool.c
index 7f786de61014..2d75fb8fa26a 100644
--- a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ethtool.c
+++ b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ethtool.c
@@ -7,6 +7,7 @@
 
 #include <linux/pci.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/etherdevice.h>
 #include <linux/log2.h>
diff --git a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c
index e5fe67e73865..6212f79fadd0 100644
--- a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c
+++ b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c
@@ -12,6 +12,7 @@
 #include <linux/of.h>
 #include <linux/if_vlan.h>
 #include <linux/iommu.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <linux/bpf.h>
 #include <linux/bpf_trace.h>
diff --git a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ptp.c b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ptp.c
index 63130ba37e9d..39d9440fc11c 100644
--- a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ptp.c
+++ b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_ptp.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "otx2_common.h"
 #include "otx2_ptp.h"
diff --git a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c
index 35e06048356f..8e083cb11ef2 100644
--- a/drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c
+++ b/drivers/net/ethernet/marvell/octeontx2/nic/otx2_vf.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/net_tstamp.h>
+#include <linux/sprintf.h>
 
 #include "otx2_common.h"
 #include "otx2_reg.h"
diff --git a/drivers/net/ethernet/marvell/prestera/prestera_devlink.c b/drivers/net/ethernet/marvell/prestera/prestera_devlink.c
index 2a4c9df4eb79..360039680a2a 100644
--- a/drivers/net/ethernet/marvell/prestera/prestera_devlink.c
+++ b/drivers/net/ethernet/marvell/prestera/prestera_devlink.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2019-2020 Marvell International Ltd. All rights reserved */
 
 #include <net/devlink.h>
+#include <linux/sprintf.h>
 
 #include "prestera_devlink.h"
 #include "prestera_hw.h"
diff --git a/drivers/net/ethernet/marvell/prestera/prestera_ethtool.c b/drivers/net/ethernet/marvell/prestera/prestera_ethtool.c
index 2f52daba58e6..71d944bfb79b 100644
--- a/drivers/net/ethernet/marvell/prestera/prestera_ethtool.c
+++ b/drivers/net/ethernet/marvell/prestera/prestera_ethtool.c
@@ -4,6 +4,7 @@
 #include <linux/ethtool.h>
 #include <linux/kernel.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include "prestera_ethtool.h"
 #include "prestera.h"
diff --git a/drivers/net/ethernet/marvell/prestera/prestera_pci.c b/drivers/net/ethernet/marvell/prestera/prestera_pci.c
index 35857dc19542..2e68944455a8 100644
--- a/drivers/net/ethernet/marvell/prestera/prestera_pci.c
+++ b/drivers/net/ethernet/marvell/prestera/prestera_pci.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "prestera.h"
 
diff --git a/drivers/net/ethernet/marvell/pxa168_eth.c b/drivers/net/ethernet/marvell/pxa168_eth.c
index dd6ca2e4fd51..660d2b7f629f 100644
--- a/drivers/net/ethernet/marvell/pxa168_eth.c
+++ b/drivers/net/ethernet/marvell/pxa168_eth.c
@@ -27,6 +27,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/pxa168_eth.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/types.h>
 #include <linux/udp.h>
diff --git a/drivers/net/ethernet/marvell/skge.c b/drivers/net/ethernet/marvell/skge.c
index 1b43704baceb..8bef8feeabd9 100644
--- a/drivers/net/ethernet/marvell/skge.c
+++ b/drivers/net/ethernet/marvell/skge.c
@@ -34,6 +34,7 @@
 #include <linux/dmi.h>
 #include <linux/prefetch.h>
 #include <asm/irq.h>
+#include <linux/sprintf.h>
 
 #include "skge.h"
 
diff --git a/drivers/net/ethernet/marvell/sky2.c b/drivers/net/ethernet/marvell/sky2.c
index 07720841a8d7..b69c7114e2bf 100644
--- a/drivers/net/ethernet/marvell/sky2.c
+++ b/drivers/net/ethernet/marvell/sky2.c
@@ -23,6 +23,7 @@
 #include <linux/interrupt.h>
 #include <linux/ip.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <linux/tcp.h>
 #include <linux/in.h>
diff --git a/drivers/net/ethernet/mediatek/mtk_eth_soc.c b/drivers/net/ethernet/mediatek/mtk_eth_soc.c
index de123350bd46..1a15301963c1 100644
--- a/drivers/net/ethernet/mediatek/mtk_eth_soc.c
+++ b/drivers/net/ethernet/mediatek/mtk_eth_soc.c
@@ -17,6 +17,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/if_vlan.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/interrupt.h>
 #include <linux/pinctrl/devinfo.h>
diff --git a/drivers/net/ethernet/mediatek/mtk_ppe_debugfs.c b/drivers/net/ethernet/mediatek/mtk_ppe_debugfs.c
index 1a97feca77f2..ce2f8d2a5969 100644
--- a/drivers/net/ethernet/mediatek/mtk_ppe_debugfs.c
+++ b/drivers/net/ethernet/mediatek/mtk_ppe_debugfs.c
@@ -4,6 +4,7 @@
 #include <linux/kernel.h>
 #include <linux/debugfs.h>
 #include "mtk_eth_soc.h"
+#include <linux/sprintf.h>
 
 struct mtk_flow_addr_info
 {
diff --git a/drivers/net/ethernet/mediatek/mtk_star_emac.c b/drivers/net/ethernet/mediatek/mtk_star_emac.c
index 31aebeb2e285..34fe214a11a2 100644
--- a/drivers/net/ethernet/mediatek/mtk_star_emac.c
+++ b/drivers/net/ethernet/mediatek/mtk_star_emac.c
@@ -24,6 +24,7 @@
 #include <linux/regmap.h>
 #include <linux/skbuff.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #define MTK_STAR_DRVNAME			"mtk_star_emac"
 
diff --git a/drivers/net/ethernet/mediatek/mtk_wed_debugfs.c b/drivers/net/ethernet/mediatek/mtk_wed_debugfs.c
index 781c691473e1..b2afa61a2b91 100644
--- a/drivers/net/ethernet/mediatek/mtk_wed_debugfs.c
+++ b/drivers/net/ethernet/mediatek/mtk_wed_debugfs.c
@@ -5,6 +5,7 @@
 #include <linux/soc/mediatek/mtk_wed.h>
 #include "mtk_wed.h"
 #include "mtk_wed_regs.h"
+#include <linux/sprintf.h>
 
 struct reg_dump {
 	const char *name;
diff --git a/drivers/net/ethernet/mellanox/mlx4/cmd.c b/drivers/net/ethernet/mellanox/mlx4/cmd.c
index 7f20813456e2..88ffb5b936b0 100644
--- a/drivers/net/ethernet/mellanox/mlx4/cmd.c
+++ b/drivers/net/ethernet/mellanox/mlx4/cmd.c
@@ -37,6 +37,7 @@
 #include <linux/export.h>
 #include <linux/pci.h>
 #include <linux/errno.h>
+#include <linux/completion.h>
 
 #include <linux/mlx4/cmd.h>
 #include <linux/mlx4/device.h>
diff --git a/drivers/net/ethernet/mellanox/mlx4/cq.c b/drivers/net/ethernet/mellanox/mlx4/cq.c
index e130e7259275..dc5b0578459a 100644
--- a/drivers/net/ethernet/mellanox/mlx4/cq.c
+++ b/drivers/net/ethernet/mellanox/mlx4/cq.c
@@ -36,6 +36,7 @@
 
 #include <linux/hardirq.h>
 #include <linux/export.h>
+#include <linux/completion.h>
 
 #include <linux/mlx4/cmd.h>
 #include <linux/mlx4/cq.h>
diff --git a/drivers/net/ethernet/mellanox/mlx4/en_clock.c b/drivers/net/ethernet/mellanox/mlx4/en_clock.c
index cd754cd76bde..8986e39f546d 100644
--- a/drivers/net/ethernet/mellanox/mlx4/en_clock.c
+++ b/drivers/net/ethernet/mellanox/mlx4/en_clock.c
@@ -33,6 +33,7 @@
 
 #include <linux/mlx4/device.h>
 #include <linux/clocksource.h>
+#include <linux/sprintf.h>
 
 #include "mlx4_en.h"
 
diff --git a/drivers/net/ethernet/mellanox/mlx4/en_ethtool.c b/drivers/net/ethernet/mellanox/mlx4/en_ethtool.c
index 619e1c3ef7f9..14b6d14f4419 100644
--- a/drivers/net/ethernet/mellanox/mlx4/en_ethtool.c
+++ b/drivers/net/ethernet/mellanox/mlx4/en_ethtool.c
@@ -37,6 +37,7 @@
 #include <linux/mlx4/driver.h>
 #include <linux/mlx4/device.h>
 #include <linux/in.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <linux/bitmap.h>
 #include <linux/mii.h>
diff --git a/drivers/net/ethernet/mellanox/mlx4/eq.c b/drivers/net/ethernet/mellanox/mlx4/eq.c
index 9572a45f6143..0be64d642c3f 100644
--- a/drivers/net/ethernet/mellanox/mlx4/eq.c
+++ b/drivers/net/ethernet/mellanox/mlx4/eq.c
@@ -36,6 +36,7 @@
 #include <linux/export.h>
 #include <linux/mm.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 
 #include <linux/mlx4/cmd.h>
 #include <linux/cpu_rmap.h>
diff --git a/drivers/net/ethernet/mellanox/mlx4/main.c b/drivers/net/ethernet/mellanox/mlx4/main.c
index 7b02ff61126d..afd48bab3c36 100644
--- a/drivers/net/ethernet/mellanox/mlx4/main.c
+++ b/drivers/net/ethernet/mellanox/mlx4/main.c
@@ -37,12 +37,14 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
 #include <linux/io-mapping.h>
 #include <linux/delay.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 #include <net/devlink.h>
 
 #include <uapi/rdma/mlx4-abi.h>
diff --git a/drivers/net/ethernet/mellanox/mlx4/mcg.c b/drivers/net/ethernet/mellanox/mlx4/mcg.c
index 24d0c7c46878..7e4d9c739493 100644
--- a/drivers/net/ethernet/mellanox/mlx4/mcg.c
+++ b/drivers/net/ethernet/mellanox/mlx4/mcg.c
@@ -33,6 +33,7 @@
 
 #include <linux/string.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 
 #include <linux/mlx4/cmd.h>
 #include <linux/mlx4/qp.h>
diff --git a/drivers/net/ethernet/mellanox/mlx4/qp.c b/drivers/net/ethernet/mellanox/mlx4/qp.c
index 913ed255990f..ff764b8ed137 100644
--- a/drivers/net/ethernet/mellanox/mlx4/qp.c
+++ b/drivers/net/ethernet/mellanox/mlx4/qp.c
@@ -35,6 +35,7 @@
 
 #include <linux/gfp.h>
 #include <linux/export.h>
+#include <linux/completion.h>
 
 #include <linux/mlx4/cmd.h>
 #include <linux/mlx4/qp.h>
diff --git a/drivers/net/ethernet/mellanox/mlx4/srq.c b/drivers/net/ethernet/mellanox/mlx4/srq.c
index dd890f5d7b72..5c0827985c32 100644
--- a/drivers/net/ethernet/mellanox/mlx4/srq.c
+++ b/drivers/net/ethernet/mellanox/mlx4/srq.c
@@ -36,6 +36,7 @@
 #include <linux/mlx4/srq.h>
 #include <linux/export.h>
 #include <linux/gfp.h>
+#include <linux/completion.h>
 
 #include "mlx4.h"
 #include "icm.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/cmd.c b/drivers/net/ethernet/mellanox/mlx5/core/cmd.c
index 4957412ff1f6..e6c7d5f03bd2 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/cmd.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/cmd.c
@@ -40,6 +40,8 @@
 #include <linux/mlx5/driver.h>
 #include <linux/mlx5/eq.h>
 #include <linux/debugfs.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "mlx5_core.h"
 #include "lib/eq.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/cq.c b/drivers/net/ethernet/mellanox/mlx5/core/cq.c
index 4caa1b6f40ba..295445ea70a6 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/cq.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/cq.c
@@ -37,6 +37,7 @@
 #include <linux/mlx5/cq.h>
 #include "mlx5_core.h"
 #include "lib/eq.h"
+#include <linux/completion.h>
 
 #define TASKLET_MAX_TIME 2
 #define TASKLET_MAX_TIME_JIFFIES msecs_to_jiffies(TASKLET_MAX_TIME)
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/debugfs.c b/drivers/net/ethernet/mellanox/mlx5/core/debugfs.c
index 09652dc89115..d098c8cf99c8 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/debugfs.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/debugfs.c
@@ -36,6 +36,7 @@
 #include <linux/mlx5/driver.h>
 #include "mlx5_core.h"
 #include "lib/eq.h"
+#include <linux/sprintf.h>
 
 enum {
 	QP_PID,
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/devlink.c b/drivers/net/ethernet/mellanox/mlx5/core/devlink.c
index 3e064234f6fe..7e12dbe51540 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/devlink.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/devlink.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2019 Mellanox Technologies */
 
 #include <devlink.h>
+#include <linux/sprintf.h>
 
 #include "mlx5_core.h"
 #include "fw_reset.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/diag/fw_tracer.c b/drivers/net/ethernet/mellanox/mlx5/core/diag/fw_tracer.c
index 080e7eab52c7..6494e05dca43 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/diag/fw_tracer.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/diag/fw_tracer.c
@@ -33,6 +33,8 @@
 #include "lib/eq.h"
 #include "fw_tracer.h"
 #include "fw_tracer_tracepoint.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 static int mlx5_query_mtrc_caps(struct mlx5_fw_tracer *tracer)
 {
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/mod_hdr.c b/drivers/net/ethernet/mellanox/mlx5/core/en/mod_hdr.c
index cf60f0a3ff23..a8211ee844a9 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/mod_hdr.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/mod_hdr.c
@@ -3,6 +3,7 @@
 
 #include <linux/jhash.h>
 #include "mod_hdr.h"
+#include <linux/completion.h>
 
 #define MLX5_MH_ACT_SZ MLX5_UN_SZ_BYTES(set_add_copy_action_in_auto)
 
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_rx.c b/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_rx.c
index 4358798d6ce1..ca1f55f35118 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_rx.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_rx.c
@@ -7,6 +7,7 @@
 #include "devlink.h"
 #include "ptp.h"
 #include "lib/tout.h"
+#include <linux/sprintf.h>
 
 /* Keep this string array consistent with the MLX5E_RQ_STATE_* enums in en.h */
 static const char * const rq_sw_state_type_name[] = {
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c b/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
index 6b44ddce14e9..8c6dc81395f6 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/reporter_tx.c
@@ -5,6 +5,7 @@
 #include "en/ptp.h"
 #include "en/devlink.h"
 #include "lib/tout.h"
+#include <linux/sprintf.h>
 
 /* Keep this string array consistent with the MLX5E_SQ_STATE_* enums in en.h */
 static const char * const sq_sw_state_type_name[] = {
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c b/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c
index f1d1e1542e81..397c3a5b1944 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun_encap.c
@@ -9,6 +9,7 @@
 #include "tc_tun.h"
 #include "rep/tc.h"
 #include "diag/en_tc_tracepoint.h"
+#include <linux/completion.h>
 
 enum {
 	MLX5E_ROUTE_ENTRY_VALID     = BIT(0),
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec.c b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec.c
index c54fd01ea635..82e3b0a0ca45 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec.c
@@ -33,7 +33,9 @@
 
 #include <crypto/internal/geniv.h>
 #include <crypto/aead.h>
+#include <linux/completion.h>
 #include <linux/inetdevice.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/netdevice.h>
 #include <net/netevent.h>
 
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_fs.c b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_fs.c
index 41a2543a52cd..7f61b2417ed5 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_fs.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_fs.c
@@ -11,6 +11,7 @@
 #include "lib/fs_chains.h"
 #include "esw/ipsec_fs.h"
 #include "en_rep.h"
+#include <linux/completion.h>
 
 #define NUM_IPSEC_FTE BIT(15)
 #define MLX5_REFORMAT_TYPE_ADD_ESP_TRANSPORT_SIZE 16
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_offload.c b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_offload.c
index 6e00afe4671b..a02232270379 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_offload.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_offload.c
@@ -8,6 +8,7 @@
 #include "lib/ipsec_fs_roce.h"
 #include "fs_core.h"
 #include "eswitch.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 enum {
 	MLX5_IPSEC_ASO_REMOVE_FLOW_PKT_CNT_OFFSET,
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ktls_rx.c b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ktls_rx.c
index 9b597cb24598..7b1d127a5ea0 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ktls_rx.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_accel/ktls_rx.c
@@ -7,6 +7,7 @@
 #include "en_accel/ktls_txrx.h"
 #include "en_accel/ktls_utils.h"
 #include "en_accel/fs_tcp.h"
+#include <linux/completion.h>
 
 struct accel_rule {
 	struct work_struct work;
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c b/drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
index cc51ce16df14..69a48771e5a4 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c
@@ -31,6 +31,7 @@
  */
 
 #include <linux/ethtool_netlink.h>
+#include <linux/sprintf.h>
 
 #include "en.h"
 #include "en/port.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_rep.c b/drivers/net/ethernet/mellanox/mlx5/core/en_rep.c
index 05527418fa64..b271cbbad36a 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_rep.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_rep.c
@@ -32,6 +32,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/mlx5/fs.h>
+#include <linux/sprintf.h>
 #include <net/switchdev.h>
 #include <net/pkt_cls.h>
 #include <net/act_api.h>
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_selftest.c b/drivers/net/ethernet/mellanox/mlx5/core/en_selftest.c
index 08a75654f5f1..fad5f29b12c7 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_selftest.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_selftest.c
@@ -36,6 +36,7 @@
 #include "en.h"
 #include "en/port.h"
 #include "eswitch.h"
+#include <linux/completion.h>
 
 static int mlx5e_test_health_info(struct mlx5e_priv *priv)
 {
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/en_stats.c b/drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
index 4b96ad657145..c1a8c6eb494d 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/en_stats.c
@@ -36,6 +36,7 @@
 #include "en_accel/en_accel.h"
 #include "en/ptp.h"
 #include "en/port.h"
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_PAGE_POOL_STATS
 #include <net/page_pool/helpers.h>
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/fpga/conn.c b/drivers/net/ethernet/mellanox/mlx5/core/fpga/conn.c
index c4de6bf8d1b6..27cad54c3c75 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/fpga/conn.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/fpga/conn.c
@@ -34,6 +34,7 @@
 #include <net/addrconf.h>
 #include <linux/etherdevice.h>
 #include <linux/mlx5/vport.h>
+#include <linux/completion.h>
 
 #include "mlx5_core.h"
 #include "lib/mlx5.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c b/drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c
index e5c1012921d2..a02146b1e19e 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/fpga/core.c
@@ -32,6 +32,7 @@
 
 #include <linux/etherdevice.h>
 #include <linux/mlx5/driver.h>
+#include <linux/sprintf.h>
 
 #include "mlx5_core.h"
 #include "lib/mlx5.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/fpga/sdk.h b/drivers/net/ethernet/mellanox/mlx5/core/fpga/sdk.h
index 89ef592656c8..4e88c63687c4 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/fpga/sdk.h
+++ b/drivers/net/ethernet/mellanox/mlx5/core/fpga/sdk.h
@@ -36,6 +36,7 @@
 
 #include <linux/types.h>
 #include <linux/dma-direction.h>
+#include <linux/completion.h>
 
 /**
  * DOC: Innova SDK
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c b/drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
index f27eab6e4929..838a1acda49d 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/fw_reset.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2020, Mellanox Technologies inc.  All rights reserved. */
 
 #include <devlink.h>
+#include <linux/completion.h>
 
 #include "fw_reset.h"
 #include "diag/fw_tracer.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/hwmon.c b/drivers/net/ethernet/mellanox/mlx5/core/hwmon.c
index 353f81dccd1c..7d978c09c3b6 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/hwmon.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/hwmon.c
@@ -8,6 +8,7 @@
 #include <linux/mlx5/port.h>
 #include "mlx5_core.h"
 #include "hwmon.h"
+#include <linux/sprintf.h>
 
 #define CHANNELS_TYPE_NUM 2 /* chip channel and temp channel */
 #define CHIP_CONFIG_NUM 1
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c b/drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c
index d14459e5c04f..7a48d6ab5478 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/lag/lag.c
@@ -31,6 +31,7 @@
  */
 
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <net/bonding.h>
 #include <linux/mlx5/driver.h>
 #include <linux/mlx5/eswitch.h>
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c b/drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c
index 82889f30506e..b4a4ca99af0a 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/lag/mpesw.c
@@ -7,6 +7,7 @@
 #include "eswitch.h"
 #include "esw/acl/ofld.h"
 #include "lib/events.h"
+#include <linux/completion.h>
 
 static void mlx5_mpesw_metadata_cleanup(struct mlx5_lag *ldev)
 {
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/lib/clock.c b/drivers/net/ethernet/mellanox/mlx5/core/lib/clock.c
index 0361741632a6..3dc3c0185988 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/lib/clock.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/lib/clock.c
@@ -34,6 +34,7 @@
 #include <linux/highmem.h>
 #include <linux/log2.h>
 #include <linux/ptp_clock_kernel.h>
+#include <linux/sprintf.h>
 #include <rdma/mlx5-abi.h>
 #include "lib/eq.h"
 #include "en.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/main.c b/drivers/net/ethernet/mellanox/mlx5/core/main.c
index c2593625c09a..913426774a0b 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/main.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/main.c
@@ -46,6 +46,7 @@
 #include <linux/kmod.h>
 #include <linux/mlx5/mlx5_ifc.h>
 #include <linux/mlx5/vport.h>
+#include <linux/sprintf.h>
 #include <linux/version.h>
 #include <net/devlink.h>
 #include "mlx5_core.h"
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/pci_irq.c b/drivers/net/ethernet/mellanox/mlx5/core/pci_irq.c
index 4dcf995cb1a2..1c23288092fe 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/pci_irq.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/pci_irq.c
@@ -11,6 +11,7 @@
 #include "pci_irq.h"
 #include "lib/sf.h"
 #include "lib/eq.h"
+#include <linux/sprintf.h>
 #ifdef CONFIG_RFS_ACCEL
 #include <linux/cpu_rmap.h>
 #endif
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/sf/vhca_event.c b/drivers/net/ethernet/mellanox/mlx5/core/sf/vhca_event.c
index cda01ba441ae..5a8cf0365e79 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/sf/vhca_event.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/sf/vhca_event.c
@@ -6,6 +6,7 @@
 #include "mlx5_core.h"
 #include "vhca_event.h"
 #include "ecpf.h"
+#include <linux/sprintf.h>
 #define CREATE_TRACE_POINTS
 #include "diag/vhca_tracepoint.h"
 
diff --git a/drivers/net/ethernet/mellanox/mlx5/core/steering/dr_dbg.c b/drivers/net/ethernet/mellanox/mlx5/core/steering/dr_dbg.c
index 64f4cc284aea..e1089dbf365e 100644
--- a/drivers/net/ethernet/mellanox/mlx5/core/steering/dr_dbg.c
+++ b/drivers/net/ethernet/mellanox/mlx5/core/steering/dr_dbg.c
@@ -2,8 +2,10 @@
 // Copyright (c) 2021, NVIDIA CORPORATION & AFFILIATES. All rights reserved.
 
 #include <linux/debugfs.h>
+#include <linux/hex.h>
 #include <linux/kernel.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/version.h>
 #include "dr_types.h"
 
diff --git a/drivers/net/ethernet/mellanox/mlxbf_gige/mlxbf_gige_mdio.c b/drivers/net/ethernet/mellanox/mlxbf_gige/mlxbf_gige_mdio.c
index 654190263535..a518b69af5e4 100644
--- a/drivers/net/ethernet/mellanox/mlxbf_gige/mlxbf_gige_mdio.c
+++ b/drivers/net/ethernet/mellanox/mlxbf_gige/mlxbf_gige_mdio.c
@@ -20,6 +20,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #include "mlxbf_gige.h"
 #include "mlxbf_gige_regs.h"
diff --git a/drivers/net/ethernet/mellanox/mlxfw/mlxfw_fsm.c b/drivers/net/ethernet/mellanox/mlxfw/mlxfw_fsm.c
index 46245e0b2462..091ab86510a1 100644
--- a/drivers/net/ethernet/mellanox/mlxfw/mlxfw_fsm.c
+++ b/drivers/net/ethernet/mellanox/mlxfw/mlxfw_fsm.c
@@ -6,6 +6,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "mlxfw.h"
 #include "mlxfw_mfa2.h"
diff --git a/drivers/net/ethernet/mellanox/mlxsw/core.c b/drivers/net/ethernet/mellanox/mlxsw/core.c
index e4d7739bd7c8..0fafe9c84e8d 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/core.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core.c
@@ -11,6 +11,7 @@
 #include <linux/completion.h>
 #include <linux/skbuff.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/gfp.h>
diff --git a/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c b/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c
index 9c12e1feb643..10c4224de0b9 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core_hwmon.c
@@ -2,6 +2,8 @@
 /* Copyright (c) 2015-2018 Mellanox Technologies. All rights reserved */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/sysfs.h>
diff --git a/drivers/net/ethernet/mellanox/mlxsw/core_linecards.c b/drivers/net/ethernet/mellanox/mlxsw/core_linecards.c
index 025e0db983fe..6301cece3211 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/core_linecards.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core_linecards.c
@@ -4,6 +4,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/workqueue.h>
diff --git a/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c b/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c
index f1b48d6615f6..c33f310abca3 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/core_thermal.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/sysfs.h>
diff --git a/drivers/net/ethernet/mellanox/mlxsw/minimal.c b/drivers/net/ethernet/mellanox/mlxsw/minimal.c
index f0ceb196a6ce..5e265c1a8ff2 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/minimal.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/minimal.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "core.h"
diff --git a/drivers/net/ethernet/mellanox/mlxsw/spectrum_ethtool.c b/drivers/net/ethernet/mellanox/mlxsw/spectrum_ethtool.c
index 0f29e9c19411..1f602b725266 100644
--- a/drivers/net/ethernet/mellanox/mlxsw/spectrum_ethtool.c
+++ b/drivers/net/ethernet/mellanox/mlxsw/spectrum_ethtool.c
@@ -5,6 +5,7 @@
 #include "core.h"
 #include "spectrum.h"
 #include "core_env.h"
+#include <linux/sprintf.h>
 
 static const char mlxsw_sp_driver_version[] = "1.0";
 
diff --git a/drivers/net/ethernet/micrel/ks8851_common.c b/drivers/net/ethernet/micrel/ks8851_common.c
index 0bf13b38b8f5..d72e9e81b469 100644
--- a/drivers/net/ethernet/micrel/ks8851_common.c
+++ b/drivers/net/ethernet/micrel/ks8851_common.c
@@ -19,6 +19,7 @@
 #include <linux/mii.h>
 #include <linux/gpio/consumer.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #include <linux/of_mdio.h>
 #include <linux/of_net.h>
diff --git a/drivers/net/ethernet/micrel/ksz884x.c b/drivers/net/ethernet/micrel/ksz884x.c
index c5aeeb964c17..57c601d4bf4b 100644
--- a/drivers/net/ethernet/micrel/ksz884x.c
+++ b/drivers/net/ethernet/micrel/ksz884x.c
@@ -26,6 +26,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/micrel_phy.h>
+#include <linux/sprintf.h>
 
 
 /* DMA Registers */
diff --git a/drivers/net/ethernet/microchip/lan743x_main.c b/drivers/net/ethernet/microchip/lan743x_main.c
index 45e209a7d083..82b2331a5058 100644
--- a/drivers/net/ethernet/microchip/lan743x_main.c
+++ b/drivers/net/ethernet/microchip/lan743x_main.c
@@ -17,6 +17,7 @@
 #include <linux/crc16.h>
 #include "lan743x_main.h"
 #include "lan743x_ethtool.h"
+#include <linux/sprintf.h>
 
 #define MMD_ACCESS_ADDRESS	0
 #define MMD_ACCESS_WRITE	1
diff --git a/drivers/net/ethernet/microchip/lan743x_ptp.c b/drivers/net/ethernet/microchip/lan743x_ptp.c
index 2801f08bf1c9..3e272e5a6253 100644
--- a/drivers/net/ethernet/microchip/lan743x_ptp.c
+++ b/drivers/net/ethernet/microchip/lan743x_ptp.c
@@ -2,6 +2,7 @@
 /* Copyright (C) 2018 Microchip Technology Inc. */
 
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include <linux/ptp_clock_kernel.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/microchip/lan966x/lan966x_ethtool.c b/drivers/net/ethernet/microchip/lan966x/lan966x_ethtool.c
index 06811c60d598..c0841754f47b 100644
--- a/drivers/net/ethernet/microchip/lan966x/lan966x_ethtool.c
+++ b/drivers/net/ethernet/microchip/lan966x/lan966x_ethtool.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0+
 
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include "lan966x_main.h"
 
diff --git a/drivers/net/ethernet/microchip/lan966x/lan966x_fdma.c b/drivers/net/ethernet/microchip/lan966x/lan966x_fdma.c
index 3960534ac2ad..ece1d46ffbec 100644
--- a/drivers/net/ethernet/microchip/lan966x/lan966x_fdma.c
+++ b/drivers/net/ethernet/microchip/lan966x/lan966x_fdma.c
@@ -2,6 +2,7 @@
 
 #include <linux/bpf.h>
 #include <linux/filter.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <net/page_pool/helpers.h>
 
 #include "lan966x_main.h"
diff --git a/drivers/net/ethernet/microchip/lan966x/lan966x_main.c b/drivers/net/ethernet/microchip/lan966x/lan966x_main.c
index 2635ef8958c8..bf7c7a9e2c41 100644
--- a/drivers/net/ethernet/microchip/lan966x/lan966x_main.c
+++ b/drivers/net/ethernet/microchip/lan966x/lan966x_main.c
@@ -10,6 +10,7 @@
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <net/addrconf.h>
 
 #include "lan966x_main.h"
diff --git a/drivers/net/ethernet/microchip/lan966x/lan966x_ptp.c b/drivers/net/ethernet/microchip/lan966x/lan966x_ptp.c
index 63905bb5a63a..47fb654bb5eb 100644
--- a/drivers/net/ethernet/microchip/lan966x/lan966x_ptp.c
+++ b/drivers/net/ethernet/microchip/lan966x/lan966x_ptp.c
@@ -1,6 +1,8 @@
 // SPDX-License-Identifier: GPL-2.0+
 
 #include <linux/ptp_classify.h>
+#include <linux/sprintf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "lan966x_main.h"
 #include "vcap_api.h"
diff --git a/drivers/net/ethernet/microchip/lan966x/lan966x_taprio.c b/drivers/net/ethernet/microchip/lan966x/lan966x_taprio.c
index 3f5b212066c5..baec3bfc804a 100644
--- a/drivers/net/ethernet/microchip/lan966x/lan966x_taprio.c
+++ b/drivers/net/ethernet/microchip/lan966x/lan966x_taprio.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0+
 
 #include "lan966x_main.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define LAN966X_TAPRIO_TIMEOUT_MS		1000
 #define LAN966X_TAPRIO_ENTRIES_PER_PORT		2
diff --git a/drivers/net/ethernet/microchip/sparx5/sparx5_ethtool.c b/drivers/net/ethernet/microchip/sparx5/sparx5_ethtool.c
index a06dc5a9b355..f367677ba2d0 100644
--- a/drivers/net/ethernet/microchip/sparx5/sparx5_ethtool.c
+++ b/drivers/net/ethernet/microchip/sparx5/sparx5_ethtool.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 #include "sparx5_main_regs.h"
 #include "sparx5_main.h"
diff --git a/drivers/net/ethernet/microchip/sparx5/sparx5_main.c b/drivers/net/ethernet/microchip/sparx5/sparx5_main.c
index d1f7fc8b1b71..53932cd15d2f 100644
--- a/drivers/net/ethernet/microchip/sparx5/sparx5_main.c
+++ b/drivers/net/ethernet/microchip/sparx5/sparx5_main.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/of_net.h>
 #include <linux/of_mdio.h>
+#include <linux/sprintf.h>
 #include <net/switchdev.h>
 #include <linux/etherdevice.h>
 #include <linux/io.h>
diff --git a/drivers/net/ethernet/microchip/sparx5/sparx5_netdev.c b/drivers/net/ethernet/microchip/sparx5/sparx5_netdev.c
index 705a004b324f..3cc4aea9c52b 100644
--- a/drivers/net/ethernet/microchip/sparx5/sparx5_netdev.c
+++ b/drivers/net/ethernet/microchip/sparx5/sparx5_netdev.c
@@ -8,6 +8,7 @@
 #include "sparx5_main.h"
 #include "sparx5_port.h"
 #include "sparx5_tc.h"
+#include <linux/sprintf.h>
 
 /* The IFH bit position of the first VSTAX bit. This is because the
  * VSTAX bit positions in Data sheet is starting from zero.
diff --git a/drivers/net/ethernet/microchip/sparx5/sparx5_ptp.c b/drivers/net/ethernet/microchip/sparx5/sparx5_ptp.c
index 5a932460db58..4e4d616e40c1 100644
--- a/drivers/net/ethernet/microchip/sparx5/sparx5_ptp.c
+++ b/drivers/net/ethernet/microchip/sparx5/sparx5_ptp.c
@@ -7,6 +7,7 @@
  * https://github.com/microchip-ung/sparx-5_reginfo
  */
 #include <linux/ptp_classify.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "sparx5_main_regs.h"
 #include "sparx5_main.h"
diff --git a/drivers/net/ethernet/microchip/vcap/vcap_api_debugfs.c b/drivers/net/ethernet/microchip/vcap/vcap_api_debugfs.c
index 59bfbda29bb3..1c9dd3d93512 100644
--- a/drivers/net/ethernet/microchip/vcap/vcap_api_debugfs.c
+++ b/drivers/net/ethernet/microchip/vcap/vcap_api_debugfs.c
@@ -7,6 +7,7 @@
 
 #include "vcap_api_private.h"
 #include "vcap_api_debugfs.h"
+#include <linux/sprintf.h>
 
 struct vcap_admin_debugfs_info {
 	struct vcap_control *vctrl;
diff --git a/drivers/net/ethernet/microsoft/mana/gdma_main.c b/drivers/net/ethernet/microsoft/mana/gdma_main.c
index 1332db9a08eb..e5d07d81e3e6 100644
--- a/drivers/net/ethernet/microsoft/mana/gdma_main.c
+++ b/drivers/net/ethernet/microsoft/mana/gdma_main.c
@@ -3,8 +3,10 @@
 
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/version.h>
+#include <linux/completion.h>
 
 #include <net/mana/mana.h>
 
diff --git a/drivers/net/ethernet/microsoft/mana/hw_channel.c b/drivers/net/ethernet/microsoft/mana/hw_channel.c
index 2729a2c5acf9..bd93a9372ed6 100644
--- a/drivers/net/ethernet/microsoft/mana/hw_channel.c
+++ b/drivers/net/ethernet/microsoft/mana/hw_channel.c
@@ -3,6 +3,7 @@
 
 #include <net/mana/gdma.h>
 #include <net/mana/hw_channel.h>
+#include <linux/completion.h>
 
 static int mana_hwc_get_msg_index(struct hw_channel_context *hwc, u16 *msg_id)
 {
diff --git a/drivers/net/ethernet/microsoft/mana/mana_en.c b/drivers/net/ethernet/microsoft/mana/mana_en.c
index 59287c6e6cee..56407b9f776f 100644
--- a/drivers/net/ethernet/microsoft/mana/mana_en.c
+++ b/drivers/net/ethernet/microsoft/mana/mana_en.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2021, Microsoft Corporation. */
 
 #include <uapi/linux/bpf.h>
+#include <linux/completion.h>
 
 #include <linux/inetdevice.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/ethernet/microsoft/mana/mana_ethtool.c b/drivers/net/ethernet/microsoft/mana/mana_ethtool.c
index ab2413d71f6c..b00761eac848 100644
--- a/drivers/net/ethernet/microsoft/mana/mana_ethtool.c
+++ b/drivers/net/ethernet/microsoft/mana/mana_ethtool.c
@@ -4,6 +4,7 @@
 #include <linux/inetdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 #include <net/mana/mana.h>
 
diff --git a/drivers/net/ethernet/mscc/ocelot_ptp.c b/drivers/net/ethernet/mscc/ocelot_ptp.c
index cb32234a5bf1..f81f39044090 100644
--- a/drivers/net/ethernet/mscc/ocelot_ptp.c
+++ b/drivers/net/ethernet/mscc/ocelot_ptp.c
@@ -5,6 +5,8 @@
  * Copyright 2020 NXP
  */
 #include <linux/time64.h>
+#include <linux/sprintf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/dsa/ocelot.h>
 #include <linux/ptp_classify.h>
diff --git a/drivers/net/ethernet/mscc/ocelot_stats.c b/drivers/net/ethernet/mscc/ocelot_stats.c
index c018783757fb..a776f0567546 100644
--- a/drivers/net/ethernet/mscc/ocelot_stats.c
+++ b/drivers/net/ethernet/mscc/ocelot_stats.c
@@ -7,6 +7,7 @@
 #include <linux/ethtool_netlink.h>
 #include <linux/spinlock.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include "ocelot.h"
 
diff --git a/drivers/net/ethernet/mscc/ocelot_vsc7514.c b/drivers/net/ethernet/mscc/ocelot_vsc7514.c
index 993212c3a7da..aff7af273c7f 100644
--- a/drivers/net/ethernet/mscc/ocelot_vsc7514.c
+++ b/drivers/net/ethernet/mscc/ocelot_vsc7514.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/mfd/syscon.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <net/switchdev.h>
 
 #include <soc/mscc/ocelot.h>
diff --git a/drivers/net/ethernet/myricom/myri10ge/myri10ge.c b/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
index 7b7e1c5b00f4..3ed922cf24c0 100644
--- a/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
+++ b/drivers/net/ethernet/myricom/myri10ge/myri10ge.c
@@ -43,6 +43,7 @@
 #include <linux/tcp.h>
 #include <linux/netdevice.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/module.h>
 #include <linux/pci.h>
@@ -57,6 +58,7 @@
 #include <linux/ethtool.h>
 #include <linux/firmware.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/timer.h>
 #include <linux/vmalloc.h>
 #include <linux/crc32.h>
diff --git a/drivers/net/ethernet/natsemi/natsemi.c b/drivers/net/ethernet/natsemi/natsemi.c
index 650a5a166070..6397042eb0a0 100644
--- a/drivers/net/ethernet/natsemi/natsemi.c
+++ b/drivers/net/ethernet/natsemi/natsemi.c
@@ -29,6 +29,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/neterion/s2io.c b/drivers/net/ethernet/neterion/s2io.c
index 55408f16fbbc..e15f03e64c13 100644
--- a/drivers/net/ethernet/neterion/s2io.c
+++ b/drivers/net/ethernet/neterion/s2io.c
@@ -53,6 +53,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/ioport.h>
diff --git a/drivers/net/ethernet/netronome/nfp/abm/ctrl.c b/drivers/net/ethernet/netronome/nfp/abm/ctrl.c
index 69e84ff7f2e5..3ba087afbc34 100644
--- a/drivers/net/ethernet/netronome/nfp/abm/ctrl.c
+++ b/drivers/net/ethernet/netronome/nfp/abm/ctrl.c
@@ -4,6 +4,7 @@
 #include <linux/bitops.h>
 #include <linux/kernel.h>
 #include <linux/log2.h>
+#include <linux/sprintf.h>
 
 #include "../nfpcore/nfp_cpp.h"
 #include "../nfpcore/nfp_nffw.h"
diff --git a/drivers/net/ethernet/netronome/nfp/abm/main.c b/drivers/net/ethernet/netronome/nfp/abm/main.c
index 5d3df28c648f..d82fba3dea14 100644
--- a/drivers/net/ethernet/netronome/nfp/abm/main.c
+++ b/drivers/net/ethernet/netronome/nfp/abm/main.c
@@ -9,6 +9,7 @@
 #include <linux/rcupdate.h>
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "../nfpcore/nfp.h"
 #include "../nfpcore/nfp_cpp.h"
diff --git a/drivers/net/ethernet/netronome/nfp/devlink_param.c b/drivers/net/ethernet/netronome/nfp/devlink_param.c
index a655f9e69a7b..ad744670ad4b 100644
--- a/drivers/net/ethernet/netronome/nfp/devlink_param.c
+++ b/drivers/net/ethernet/netronome/nfp/devlink_param.c
@@ -2,6 +2,8 @@
 /* Copyright (C) 2019 Netronome Systems, Inc. */
 
 #include <net/devlink.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "nfpcore/nfp.h"
 #include "nfpcore/nfp_nsp.h"
diff --git a/drivers/net/ethernet/netronome/nfp/nfp_main.c b/drivers/net/ethernet/netronome/nfp/nfp_main.c
index 71301dbd8fb5..54c8bceadb9e 100644
--- a/drivers/net/ethernet/netronome/nfp/nfp_main.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_main.c
@@ -10,10 +10,12 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/pci.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <net/devlink.h>
 
diff --git a/drivers/net/ethernet/netronome/nfp/nfp_net.h b/drivers/net/ethernet/netronome/nfp/nfp_net.h
index 46764aeccb37..3b1d64c9a8df 100644
--- a/drivers/net/ethernet/netronome/nfp/nfp_net.h
+++ b/drivers/net/ethernet/netronome/nfp/nfp_net.h
@@ -14,6 +14,7 @@
 
 #include <linux/atomic.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/list.h>
 #include <linux/netdevice.h>
 #include <linux/pci.h>
diff --git a/drivers/net/ethernet/netronome/nfp/nfp_net_common.c b/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
index f28e769e6fda..8f2d89e514c3 100644
--- a/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_net_common.c
@@ -32,6 +32,7 @@
 #include <linux/if_vlan.h>
 #include <linux/if_bridge.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/ktime.h>
 
diff --git a/drivers/net/ethernet/netronome/nfp/nfp_net_debugfs.c b/drivers/net/ethernet/netronome/nfp/nfp_net_debugfs.c
index d8b735ccf899..fd5301eba6c6 100644
--- a/drivers/net/ethernet/netronome/nfp/nfp_net_debugfs.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_net_debugfs.c
@@ -3,6 +3,7 @@
 #include <linux/debugfs.h>
 #include <linux/module.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 
 #include "nfp_net.h"
 #include "nfp_net_dp.h"
diff --git a/drivers/net/ethernet/netronome/nfp/nfp_net_ethtool.c b/drivers/net/ethernet/netronome/nfp/nfp_net_ethtool.c
index fbca8d0efd85..99582e68c06a 100644
--- a/drivers/net/ethernet/netronome/nfp/nfp_net_ethtool.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_net_ethtool.c
@@ -19,6 +19,7 @@
 #include <linux/ethtool.h>
 #include <linux/firmware.h>
 #include <linux/sfp.h>
+#include <linux/sprintf.h>
 
 #include "nfpcore/nfp.h"
 #include "nfpcore/nfp_dev.h"
diff --git a/drivers/net/ethernet/netronome/nfp/nfp_port.c b/drivers/net/ethernet/netronome/nfp/nfp_port.c
index 54640bcb70fb..e24b77d62f0f 100644
--- a/drivers/net/ethernet/netronome/nfp/nfp_port.c
+++ b/drivers/net/ethernet/netronome/nfp/nfp_port.c
@@ -3,6 +3,7 @@
 
 #include <linux/lockdep.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include "nfpcore/nfp_cpp.h"
 #include "nfpcore/nfp_nsp.h"
diff --git a/drivers/net/ethernet/netronome/nfp/nfpcore/nfp6000_pcie.c b/drivers/net/ethernet/netronome/nfp/nfpcore/nfp6000_pcie.c
index 3f10c5365c80..11e7a875deac 100644
--- a/drivers/net/ethernet/netronome/nfp/nfpcore/nfp6000_pcie.c
+++ b/drivers/net/ethernet/netronome/nfp/nfpcore/nfp6000_pcie.c
@@ -24,6 +24,7 @@
 #include <linux/interrupt.h>
 #include <linux/sort.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 
diff --git a/drivers/net/ethernet/ni/nixge.c b/drivers/net/ethernet/ni/nixge.c
index fa1f78b03cb2..afe0aec71c86 100644
--- a/drivers/net/ethernet/ni/nixge.c
+++ b/drivers/net/ethernet/ni/nixge.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/etherdevice.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/netdevice.h>
 #include <linux/of.h>
@@ -17,6 +18,7 @@
 #include <linux/nvmem-consumer.h>
 #include <linux/ethtool.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #define TX_BD_NUM		64
 #define RX_BD_NUM		128
diff --git a/drivers/net/ethernet/nvidia/forcedeth.c b/drivers/net/ethernet/nvidia/forcedeth.c
index 7a549b834e97..36fe0e87ecc4 100644
--- a/drivers/net/ethernet/nvidia/forcedeth.c
+++ b/drivers/net/ethernet/nvidia/forcedeth.c
@@ -32,7 +32,9 @@
 #define FORCEDETH_VERSION		"0.64"
 #define DRV_NAME			"forcedeth"
 
+#include <linux/kernel.h> // for system_state
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/nxp/lpc_eth.c b/drivers/net/ethernet/nxp/lpc_eth.c
index dd3e58a1319c..86b54e12661b 100644
--- a/drivers/net/ethernet/nxp/lpc_eth.c
+++ b/drivers/net/ethernet/nxp/lpc_eth.c
@@ -21,6 +21,7 @@
 #include <linux/platform_device.h>
 #include <linux/spinlock.h>
 #include <linux/soc/nxp/lpc32xx-misc.h>
+#include <linux/sprintf.h>
 
 #define MODNAME "lpc-eth"
 #define DRV_VERSION "1.00"
diff --git a/drivers/net/ethernet/pasemi/pasemi_mac.c b/drivers/net/ethernet/pasemi/pasemi_mac.c
index ed7dd0a04235..6f914cb930af 100644
--- a/drivers/net/ethernet/pasemi/pasemi_mac.c
+++ b/drivers/net/ethernet/pasemi/pasemi_mac.c
@@ -17,6 +17,7 @@
 #include <asm/dma-mapping.h>
 #include <linux/in.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 
 #include <linux/ip.h>
 #include <net/checksum.h>
diff --git a/drivers/net/ethernet/pensando/ionic/ionic_dev.c b/drivers/net/ethernet/pensando/ionic/ionic_dev.c
index 1e7c71f7f081..d0b2b5709d68 100644
--- a/drivers/net/ethernet/pensando/ionic/ionic_dev.c
+++ b/drivers/net/ethernet/pensando/ionic/ionic_dev.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2017 - 2019 Pensando Systems, Inc */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/io.h>
diff --git a/drivers/net/ethernet/pensando/ionic/ionic_devlink.c b/drivers/net/ethernet/pensando/ionic/ionic_devlink.c
index 4ec66a6be073..94ffb36c9e86 100644
--- a/drivers/net/ethernet/pensando/ionic/ionic_devlink.c
+++ b/drivers/net/ethernet/pensando/ionic/ionic_devlink.c
@@ -3,6 +3,7 @@
 
 #include <linux/module.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include "ionic.h"
 #include "ionic_bus.h"
diff --git a/drivers/net/ethernet/pensando/ionic/ionic_lif.c b/drivers/net/ethernet/pensando/ionic/ionic_lif.c
index cf2d5ad7b68c..214133b5d033 100644
--- a/drivers/net/ethernet/pensando/ionic/ionic_lif.c
+++ b/drivers/net/ethernet/pensando/ionic/ionic_lif.c
@@ -10,8 +10,10 @@
 #include <linux/rtnetlink.h>
 #include <linux/interrupt.h>
 #include <linux/pci.h>
+#include <linux/completion.h>
 #include <linux/cpumask.h>
 #include <linux/crash_dump.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "ionic.h"
diff --git a/drivers/net/ethernet/pensando/ionic/ionic_main.c b/drivers/net/ethernet/pensando/ionic/ionic_main.c
index 165ab08ad2dd..4df48d137066 100644
--- a/drivers/net/ethernet/pensando/ionic/ionic_main.c
+++ b/drivers/net/ethernet/pensando/ionic/ionic_main.c
@@ -7,6 +7,7 @@
 #include <linux/netdevice.h>
 #include <linux/utsname.h>
 #include <generated/utsrelease.h>
+#include <linux/completion.h>
 #include <linux/ctype.h>
 
 #include "ionic.h"
diff --git a/drivers/net/ethernet/pensando/ionic/ionic_phc.c b/drivers/net/ethernet/pensando/ionic/ionic_phc.c
index 7505efdff8e9..7f64d5ee7913 100644
--- a/drivers/net/ethernet/pensando/ionic/ionic_phc.c
+++ b/drivers/net/ethernet/pensando/ionic/ionic_phc.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 /* Copyright(c) 2017 - 2021 Pensando Systems, Inc */
 
+#include <linux/completion.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 
diff --git a/drivers/net/ethernet/pensando/ionic/ionic_rx_filter.c b/drivers/net/ethernet/pensando/ionic/ionic_rx_filter.c
index 1ee2f285cb42..39849b32f4a2 100644
--- a/drivers/net/ethernet/pensando/ionic/ionic_rx_filter.c
+++ b/drivers/net/ethernet/pensando/ionic/ionic_rx_filter.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2017 - 2019 Pensando Systems, Inc */
 
 #include <linux/netdevice.h>
+#include <linux/completion.h>
 #include <linux/dynamic_debug.h>
 #include <linux/etherdevice.h>
 #include <linux/list.h>
diff --git a/drivers/net/ethernet/qlogic/netxen/netxen_nic_ethtool.c b/drivers/net/ethernet/qlogic/netxen/netxen_nic_ethtool.c
index 8c4cb910e09b..5c599a286319 100644
--- a/drivers/net/ethernet/qlogic/netxen/netxen_nic_ethtool.c
+++ b/drivers/net/ethernet/qlogic/netxen/netxen_nic_ethtool.c
@@ -11,6 +11,7 @@
 #include <asm/io.h>
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 #include "netxen_nic.h"
 #include "netxen_nic_hw.h"
diff --git a/drivers/net/ethernet/qlogic/netxen/netxen_nic_init.c b/drivers/net/ethernet/qlogic/netxen/netxen_nic_init.c
index 51fa880eaf6c..e353f9c018bb 100644
--- a/drivers/net/ethernet/qlogic/netxen/netxen_nic_init.c
+++ b/drivers/net/ethernet/qlogic/netxen/netxen_nic_init.c
@@ -9,6 +9,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/if_vlan.h>
+#include <linux/sprintf.h>
 #include <net/checksum.h>
 #include "netxen_nic.h"
 #include "netxen_nic_hw.h"
diff --git a/drivers/net/ethernet/qlogic/netxen/netxen_nic_main.c b/drivers/net/ethernet/qlogic/netxen/netxen_nic_main.c
index ed24d6af7487..3262578a38b0 100644
--- a/drivers/net/ethernet/qlogic/netxen/netxen_nic_main.c
+++ b/drivers/net/ethernet/qlogic/netxen/netxen_nic_main.c
@@ -6,9 +6,11 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/interrupt.h>
 #include "netxen_nic_hw.h"
+#include <linux/kstrtox.h>
 
 #include "netxen_nic.h"
 
diff --git a/drivers/net/ethernet/qlogic/qed/qed_debug.c b/drivers/net/ethernet/qlogic/qed/qed_debug.c
index f67be4b8ad43..24ee76299016 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_debug.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_debug.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/crc32.h>
 #include "qed.h"
diff --git a/drivers/net/ethernet/qlogic/qed/qed_dev.c b/drivers/net/ethernet/qlogic/qed/qed_dev.c
index 86a93cac2647..13d746bdb7a2 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_dev.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_dev.c
@@ -14,6 +14,7 @@
 #include <linux/mutex.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/vmalloc.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/ethernet/qlogic/qed/qed_devlink.c b/drivers/net/ethernet/qlogic/qed/qed_devlink.c
index dad8e617c393..38325a523c24 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_devlink.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_devlink.c
@@ -6,6 +6,7 @@
 
 #include <linux/kernel.h>
 #include <linux/qed/qed_if.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "qed.h"
 #include "qed_devlink.h"
diff --git a/drivers/net/ethernet/qlogic/qed/qed_hw.c b/drivers/net/ethernet/qlogic/qed/qed_hw.c
index 6263f847b6b9..2950e0072cd2 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_hw.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_hw.c
@@ -15,6 +15,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/qed/qed_chain.h>
 #include "qed.h"
diff --git a/drivers/net/ethernet/qlogic/qed/qed_int.c b/drivers/net/ethernet/qlogic/qed/qed_int.c
index 2661c483c67e..ba8d2a437ce3 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_int.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_int.c
@@ -15,6 +15,7 @@
 #include <linux/kernel.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include "qed.h"
 #include "qed_hsi.h"
diff --git a/drivers/net/ethernet/qlogic/qed/qed_main.c b/drivers/net/ethernet/qlogic/qed/qed_main.c
index c278f8893042..094f4452b9c3 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_main.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_main.c
@@ -11,6 +11,7 @@
 #include <linux/delay.h>
 #include <asm/byteorder.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/qlogic/qed/qed_mng_tlv.c b/drivers/net/ethernet/qlogic/qed/qed_mng_tlv.c
index f55eed092f25..0589f81e32e6 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_mng_tlv.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_mng_tlv.c
@@ -7,6 +7,7 @@
 #include <linux/errno.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/vmalloc.h>
 #include "qed.h"
diff --git a/drivers/net/ethernet/qlogic/qed/qed_rdma.c b/drivers/net/ethernet/qlogic/qed/qed_rdma.c
index 9a1660a12c57..03bc4b460b08 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_rdma.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_rdma.c
@@ -18,6 +18,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <net/addrconf.h>
 #include "qed.h"
diff --git a/drivers/net/ethernet/qlogic/qed/qed_sriov.c b/drivers/net/ethernet/qlogic/qed/qed_sriov.c
index fa167b1aa019..088a8de8085b 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_sriov.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_sriov.c
@@ -6,6 +6,7 @@
 
 #include <linux/etherdevice.h>
 #include <linux/crc32.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/crash_dump.h>
 #include <linux/qed/qed_iov_if.h>
diff --git a/drivers/net/ethernet/qlogic/qed/qed_vf.c b/drivers/net/ethernet/qlogic/qed/qed_vf.c
index 0e265ed1f501..17336ae7b839 100644
--- a/drivers/net/ethernet/qlogic/qed/qed_vf.c
+++ b/drivers/net/ethernet/qlogic/qed/qed_vf.c
@@ -9,6 +9,7 @@
 #include "qed.h"
 #include "qed_sriov.h"
 #include "qed_vf.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void *qed_vf_pf_prep(struct qed_hwfn *p_hwfn, u16 type, u16 length)
 {
diff --git a/drivers/net/ethernet/qlogic/qede/qede_ethtool.c b/drivers/net/ethernet/qlogic/qede/qede_ethtool.c
index dfa15619fd78..5b8138a0dda9 100644
--- a/drivers/net/ethernet/qlogic/qede/qede_ethtool.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_ethtool.c
@@ -8,6 +8,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/pci.h>
 #include <linux/capability.h>
diff --git a/drivers/net/ethernet/qlogic/qede/qede_filter.c b/drivers/net/ethernet/qlogic/qede/qede_filter.c
index a5ac21a0ee33..3d2475412469 100644
--- a/drivers/net/ethernet/qlogic/qede/qede_filter.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_filter.c
@@ -6,6 +6,7 @@
 
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 #include <net/udp_tunnel.h>
 #include <linux/bitops.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/net/ethernet/qlogic/qede/qede_fp.c b/drivers/net/ethernet/qlogic/qede/qede_fp.c
index cb1746bc0e0c..b4788e6726e7 100644
--- a/drivers/net/ethernet/qlogic/qede/qede_fp.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_fp.c
@@ -6,6 +6,7 @@
 
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/skbuff.h>
 #include <linux/bpf_trace.h>
 #include <net/udp_tunnel.h>
diff --git a/drivers/net/ethernet/qlogic/qede/qede_main.c b/drivers/net/ethernet/qlogic/qede/qede_main.c
index 99df00c30b8c..323d613c28c9 100644
--- a/drivers/net/ethernet/qlogic/qede/qede_main.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_main.c
@@ -13,6 +13,7 @@
 #include <linux/skbuff.h>
 #include <linux/errno.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/qlogic/qede/qede_ptp.c b/drivers/net/ethernet/qlogic/qede/qede_ptp.c
index 747cc5e2bb78..d5733e292e68 100644
--- a/drivers/net/ethernet/qlogic/qede/qede_ptp.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_ptp.c
@@ -5,6 +5,7 @@
  */
 
 #include "qede_ptp.h"
+#include <linux/sprintf.h>
 #define QEDE_PTP_TX_TIMEOUT (2 * HZ)
 
 struct qede_ptp {
diff --git a/drivers/net/ethernet/qlogic/qede/qede_rdma.c b/drivers/net/ethernet/qlogic/qede/qede_rdma.c
index 6304514a6f2c..970c90725856 100644
--- a/drivers/net/ethernet/qlogic/qede/qede_rdma.c
+++ b/drivers/net/ethernet/qlogic/qede/qede_rdma.c
@@ -10,6 +10,7 @@
 #include <linux/mutex.h>
 #include <linux/qed/qede_rdma.h>
 #include "qede.h"
+#include <linux/completion.h>
 
 static struct qedr_driver *qedr_drv;
 static LIST_HEAD(qedr_dev_list);
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_83xx_hw.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_83xx_hw.c
index bcef8ab715bf..a67e22441cb7 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_83xx_hw.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_83xx_hw.c
@@ -8,6 +8,7 @@
 #include <linux/ipv6.h>
 #include <linux/ethtool.h>
 #include <linux/interrupt.h>
+#include <linux/completion.h>
 
 #include "qlcnic.h"
 #include "qlcnic_sriov.h"
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ctx.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ctx.c
index eb827b86ecae..beb1aea3e089 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ctx.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ctx.c
@@ -5,6 +5,7 @@
  */
 
 #include "qlcnic.h"
+#include <linux/sprintf.h>
 
 static const struct qlcnic_mailbox_metadata qlcnic_mbx_tbl[] = {
 	{QLCNIC_CMD_CREATE_RX_CTX, 4, 1},
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
index c1436e1554de..95d00c38b865 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c
@@ -10,6 +10,7 @@
 #include <linux/io.h>
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 
 #include "qlcnic.h"
 
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_init.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_init.c
index 09f20c794754..f6599b0863ee 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_init.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_init.c
@@ -6,6 +6,7 @@
 
 #include "qlcnic.h"
 #include "qlcnic_hw.h"
+#include <linux/sprintf.h>
 
 struct crb_addr_pair {
 	u32 addr;
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_io.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_io.c
index 41894d154013..f21cba7d7e38 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_io.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_io.c
@@ -6,6 +6,7 @@
 
 #include <linux/netdevice.h>
 #include <linux/if_vlan.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <linux/ipv6.h>
 #include <net/checksum.h>
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c
index 90df4a0909fa..8cd18806d78e 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c
@@ -6,6 +6,7 @@
 
 #include <linux/vmalloc.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/swab.h>
 #include <linux/dma-mapping.h>
 #include <linux/if_vlan.h>
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_minidump.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_minidump.c
index 7ecb3dfe30bd..6312395ad893 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_minidump.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_minidump.c
@@ -5,6 +5,7 @@
  */
 
 #include <net/ip.h>
+#include <linux/sprintf.h>
 
 #include "qlcnic.h"
 #include "qlcnic_hdr.h"
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_common.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_common.c
index f9dd50152b1e..f2ce289c13b3 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_common.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_common.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/types.h>
+#include <linux/completion.h>
 
 #include "qlcnic_sriov.h"
 #include "qlcnic.h"
diff --git a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sysfs.c b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sysfs.c
index 74125188beb8..23bacbb19f96 100644
--- a/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sysfs.c
+++ b/drivers/net/ethernet/qlogic/qlcnic/qlcnic_sysfs.c
@@ -6,6 +6,8 @@
 
 #include <linux/slab.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/swab.h>
 #include <linux/dma-mapping.h>
 #include <net/ip.h>
diff --git a/drivers/net/ethernet/qualcomm/emac/emac-mac.c b/drivers/net/ethernet/qualcomm/emac/emac-mac.c
index d5c688a8d7be..f3ca10806e7a 100644
--- a/drivers/net/ethernet/qualcomm/emac/emac-mac.c
+++ b/drivers/net/ethernet/qualcomm/emac/emac-mac.c
@@ -11,6 +11,7 @@
 #include <linux/crc32.h>
 #include <linux/if_vlan.h>
 #include <linux/jiffies.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/phy.h>
 #include <linux/of.h>
 #include <net/ip6_checksum.h>
diff --git a/drivers/net/ethernet/qualcomm/emac/emac-phy.c b/drivers/net/ethernet/qualcomm/emac/emac-phy.c
index 5c94af7bb6b6..a956073599a8 100644
--- a/drivers/net/ethernet/qualcomm/emac/emac-phy.c
+++ b/drivers/net/ethernet/qualcomm/emac/emac-phy.c
@@ -10,6 +10,7 @@
 #include <linux/iopoll.h>
 #include <linux/acpi.h>
 #include "emac.h"
+#include <linux/sprintf.h>
 
 /* EMAC base register offsets */
 #define EMAC_MDIO_CTRL                                        0x001414
diff --git a/drivers/net/ethernet/qualcomm/rmnet/rmnet_map_data.c b/drivers/net/ethernet/qualcomm/rmnet/rmnet_map_data.c
index a5e3d1a88305..1c06334a38db 100644
--- a/drivers/net/ethernet/qualcomm/rmnet/rmnet_map_data.c
+++ b/drivers/net/ethernet/qualcomm/rmnet/rmnet_map_data.c
@@ -9,6 +9,7 @@
 #include <linux/ipv6.h>
 #include <net/ip6_checksum.h>
 #include <linux/bitfield.h>
+#include <linux/hrtimer.h>
 #include "rmnet_config.h"
 #include "rmnet_map.h"
 #include "rmnet_private.h"
diff --git a/drivers/net/ethernet/rdc/r6040.c b/drivers/net/ethernet/rdc/r6040.c
index f4d434c379e7..9597d25f0a37 100644
--- a/drivers/net/ethernet/rdc/r6040.c
+++ b/drivers/net/ethernet/rdc/r6040.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/realtek/r8169_main.c b/drivers/net/ethernet/realtek/r8169_main.c
index b43db3c49d82..e64e1f4f64ec 100644
--- a/drivers/net/ethernet/realtek/r8169_main.c
+++ b/drivers/net/ethernet/realtek/r8169_main.c
@@ -16,11 +16,13 @@
 #include <linux/clk.h>
 #include <linux/delay.h>
 #include <linux/ethtool.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/phy.h>
 #include <linux/if_vlan.h>
 #include <linux/in.h>
 #include <linux/io.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/net/ethernet/renesas/ravb_main.c b/drivers/net/ethernet/renesas/ravb_main.c
index f9a1e9038dbf..5d67ba71eb3a 100644
--- a/drivers/net/ethernet/renesas/ravb_main.c
+++ b/drivers/net/ethernet/renesas/ravb_main.c
@@ -27,6 +27,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/reset.h>
 #include <linux/math64.h>
 #include <net/ip.h>
diff --git a/drivers/net/ethernet/renesas/rswitch.c b/drivers/net/ethernet/renesas/rswitch.c
index dcab638c57fe..efb22c3c34b1 100644
--- a/drivers/net/ethernet/renesas/rswitch.c
+++ b/drivers/net/ethernet/renesas/rswitch.c
@@ -22,6 +22,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #include "rswitch.h"
diff --git a/drivers/net/ethernet/renesas/sh_eth.c b/drivers/net/ethernet/renesas/sh_eth.c
index 475e1e8c1d35..ccd62edce4ef 100644
--- a/drivers/net/ethernet/renesas/sh_eth.c
+++ b/drivers/net/ethernet/renesas/sh_eth.c
@@ -29,6 +29,7 @@
 #include <linux/if_vlan.h>
 #include <linux/sh_eth.h>
 #include <linux/of_mdio.h>
+#include <linux/sprintf.h>
 
 #include "sh_eth.h"
 
diff --git a/drivers/net/ethernet/samsung/sxgbe/sxgbe_dma.c b/drivers/net/ethernet/samsung/sxgbe/sxgbe_dma.c
index 243db04b968c..61139c0e84d0 100644
--- a/drivers/net/ethernet/samsung/sxgbe/sxgbe_dma.c
+++ b/drivers/net/ethernet/samsung/sxgbe/sxgbe_dma.c
@@ -9,6 +9,7 @@
 #include <linux/delay.h>
 #include <linux/export.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/netdevice.h>
 #include <linux/phy.h>
 
diff --git a/drivers/net/ethernet/samsung/sxgbe/sxgbe_main.c b/drivers/net/ethernet/samsung/sxgbe/sxgbe_main.c
index ecbe3994f2b1..7a125660ed09 100644
--- a/drivers/net/ethernet/samsung/sxgbe/sxgbe_main.c
+++ b/drivers/net/ethernet/samsung/sxgbe/sxgbe_main.c
@@ -21,6 +21,7 @@
 #include <linux/interrupt.h>
 #include <linux/ip.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mii.h>
 #include <linux/module.h>
 #include <linux/net_tstamp.h>
@@ -30,6 +31,7 @@
 #include <linux/prefetch.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/sxgbe_platform.h>
 
diff --git a/drivers/net/ethernet/samsung/sxgbe/sxgbe_mdio.c b/drivers/net/ethernet/samsung/sxgbe/sxgbe_mdio.c
index 0227223c06fa..7edec534336f 100644
--- a/drivers/net/ethernet/samsung/sxgbe/sxgbe_mdio.c
+++ b/drivers/net/ethernet/samsung/sxgbe/sxgbe_mdio.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/phy.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sxgbe_platform.h>
 
 #include "sxgbe_common.h"
diff --git a/drivers/net/ethernet/seeq/ether3.c b/drivers/net/ethernet/seeq/ether3.c
index c672f92d65e9..4bdf66cdfd1f 100644
--- a/drivers/net/ethernet/seeq/ether3.c
+++ b/drivers/net/ethernet/seeq/ether3.c
@@ -45,6 +45,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/sfc/ef10.c b/drivers/net/ethernet/sfc/ef10.c
index 8fa6c0e9195b..f503f7c923a1 100644
--- a/drivers/net/ethernet/sfc/ef10.c
+++ b/drivers/net/ethernet/sfc/ef10.c
@@ -21,6 +21,7 @@
 #include "ef10_sriov.h"
 #include <linux/in.h>
 #include <linux/jhash.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/workqueue.h>
 #include <net/udp_tunnel.h>
diff --git a/drivers/net/ethernet/sfc/ef100_nic.c b/drivers/net/ethernet/sfc/ef100_nic.c
index 6da06931187d..71771db82958 100644
--- a/drivers/net/ethernet/sfc/ef100_nic.c
+++ b/drivers/net/ethernet/sfc/ef100_nic.c
@@ -27,6 +27,7 @@
 #include "tc.h"
 #include "mae.h"
 #include "rx_common.h"
+#include <linux/sprintf.h>
 
 #define EF100_MAX_VIS 4096
 #define EF100_NUM_MCDI_BUFFERS	1
diff --git a/drivers/net/ethernet/sfc/ef100_rep.c b/drivers/net/ethernet/sfc/ef100_rep.c
index 0b3083ef0ead..dcee60f54c7e 100644
--- a/drivers/net/ethernet/sfc/ef100_rep.c
+++ b/drivers/net/ethernet/sfc/ef100_rep.c
@@ -17,6 +17,7 @@
 #include "rx_common.h"
 #include "tc_bindings.h"
 #include "efx_devlink.h"
+#include <linux/sprintf.h>
 
 #define EFX_EF100_REP_DRIVER	"efx_ef100_rep"
 
diff --git a/drivers/net/ethernet/sfc/efx.c b/drivers/net/ethernet/sfc/efx.c
index e9d9de8e648a..ad544cd97711 100644
--- a/drivers/net/ethernet/sfc/efx.c
+++ b/drivers/net/ethernet/sfc/efx.c
@@ -13,6 +13,7 @@
 #include <linux/delay.h>
 #include <linux/notifier.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/in.h>
 #include <linux/ethtool.h>
diff --git a/drivers/net/ethernet/sfc/efx_channels.c b/drivers/net/ethernet/sfc/efx_channels.c
index c9e17a8208a9..3ac0a44e8266 100644
--- a/drivers/net/ethernet/sfc/efx_channels.c
+++ b/drivers/net/ethernet/sfc/efx_channels.c
@@ -19,6 +19,7 @@
 #include "nic.h"
 #include "sriov.h"
 #include "workarounds.h"
+#include <linux/sprintf.h>
 
 /* This is the first interrupt mode to try out of:
  * 0 => MSI-X
diff --git a/drivers/net/ethernet/sfc/efx_common.c b/drivers/net/ethernet/sfc/efx_common.c
index 175bd9cdfdac..664c5e34a650 100644
--- a/drivers/net/ethernet/sfc/efx_common.c
+++ b/drivers/net/ethernet/sfc/efx_common.c
@@ -12,6 +12,7 @@
 #include <linux/filter.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <net/gre.h>
 #include "efx_common.h"
 #include "efx_channels.h"
diff --git a/drivers/net/ethernet/sfc/efx_devlink.c b/drivers/net/ethernet/sfc/efx_devlink.c
index 3cd750820fdd..ded9b2622363 100644
--- a/drivers/net/ethernet/sfc/efx_devlink.c
+++ b/drivers/net/ethernet/sfc/efx_devlink.c
@@ -15,6 +15,7 @@
 #include "mcdi.h"
 #include "mcdi_functions.h"
 #include "mcdi_pcol.h"
+#include <linux/sprintf.h>
 #ifdef CONFIG_SFC_SRIOV
 #include "mae.h"
 #include "ef100_rep.h"
diff --git a/drivers/net/ethernet/sfc/ethtool_common.c b/drivers/net/ethernet/sfc/ethtool_common.c
index 7d5e5db4eac5..0d835881e4b3 100644
--- a/drivers/net/ethernet/sfc/ethtool_common.c
+++ b/drivers/net/ethernet/sfc/ethtool_common.c
@@ -16,6 +16,7 @@
 #include "rx_common.h"
 #include "ethtool_common.h"
 #include "mcdi_port_common.h"
+#include <linux/sprintf.h>
 
 struct efx_sw_stat_desc {
 	const char *name;
diff --git a/drivers/net/ethernet/sfc/falcon/efx.c b/drivers/net/ethernet/sfc/falcon/efx.c
index e001f27085c6..eccf89dd5986 100644
--- a/drivers/net/ethernet/sfc/falcon/efx.c
+++ b/drivers/net/ethernet/sfc/falcon/efx.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/notifier.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/in.h>
 #include <linux/ethtool.h>
diff --git a/drivers/net/ethernet/sfc/falcon/ethtool.c b/drivers/net/ethernet/sfc/falcon/ethtool.c
index f4db683b80f7..5a4d02abe688 100644
--- a/drivers/net/ethernet/sfc/falcon/ethtool.c
+++ b/drivers/net/ethernet/sfc/falcon/ethtool.c
@@ -15,6 +15,7 @@
 #include "efx.h"
 #include "filter.h"
 #include "nic.h"
+#include <linux/sprintf.h>
 
 struct ef4_sw_stat_desc {
 	const char *name;
diff --git a/drivers/net/ethernet/sfc/falcon/falcon.c b/drivers/net/ethernet/sfc/falcon/falcon.c
index 7a1c9337081b..2f1acc11841d 100644
--- a/drivers/net/ethernet/sfc/falcon/falcon.c
+++ b/drivers/net/ethernet/sfc/falcon/falcon.c
@@ -14,6 +14,7 @@
 #include <linux/mii.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include "net_driver.h"
 #include "bitfield.h"
diff --git a/drivers/net/ethernet/sfc/falcon/falcon_boards.c b/drivers/net/ethernet/sfc/falcon/falcon_boards.c
index 2d2d8099011e..3aa74da6b85b 100644
--- a/drivers/net/ethernet/sfc/falcon/falcon_boards.c
+++ b/drivers/net/ethernet/sfc/falcon/falcon_boards.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 
 #include "net_driver.h"
 #include "phy.h"
diff --git a/drivers/net/ethernet/sfc/mcdi.c b/drivers/net/ethernet/sfc/mcdi.c
index 76578502226e..b2942df7d280 100644
--- a/drivers/net/ethernet/sfc/mcdi.c
+++ b/drivers/net/ethernet/sfc/mcdi.c
@@ -11,6 +11,8 @@
 #include "nic.h"
 #include "io.h"
 #include "mcdi_pcol.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /**************************************************************************
  *
diff --git a/drivers/net/ethernet/sfc/mcdi_mon.c b/drivers/net/ethernet/sfc/mcdi_mon.c
index f5128db7c7e7..2ca90480a667 100644
--- a/drivers/net/ethernet/sfc/mcdi_mon.c
+++ b/drivers/net/ethernet/sfc/mcdi_mon.c
@@ -7,6 +7,7 @@
 #include <linux/bitops.h>
 #include <linux/slab.h>
 #include <linux/hwmon.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 
 #include "net_driver.h"
diff --git a/drivers/net/ethernet/sfc/ptp.c b/drivers/net/ethernet/sfc/ptp.c
index c3bffbf0ba2b..735a2a5ebd3b 100644
--- a/drivers/net/ethernet/sfc/ptp.c
+++ b/drivers/net/ethernet/sfc/ptp.c
@@ -31,6 +31,7 @@
  *	timestamp.
  */
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <linux/time.h>
 #include <linux/errno.h>
diff --git a/drivers/net/ethernet/sfc/siena/efx.c b/drivers/net/ethernet/sfc/siena/efx.c
index 59d3a6043379..51455717666b 100644
--- a/drivers/net/ethernet/sfc/siena/efx.c
+++ b/drivers/net/ethernet/sfc/siena/efx.c
@@ -13,6 +13,7 @@
 #include <linux/delay.h>
 #include <linux/notifier.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/in.h>
 #include <linux/ethtool.h>
diff --git a/drivers/net/ethernet/sfc/siena/efx_channels.c b/drivers/net/ethernet/sfc/siena/efx_channels.c
index a7346e965bfe..ccad560880d5 100644
--- a/drivers/net/ethernet/sfc/siena/efx_channels.c
+++ b/drivers/net/ethernet/sfc/siena/efx_channels.c
@@ -19,6 +19,7 @@
 #include "nic.h"
 #include "sriov.h"
 #include "workarounds.h"
+#include <linux/sprintf.h>
 
 /* This is the first interrupt mode to try out of:
  * 0 => MSI-X
diff --git a/drivers/net/ethernet/sfc/siena/efx_common.c b/drivers/net/ethernet/sfc/siena/efx_common.c
index e4b294b8e9ac..ba8a01c1fc55 100644
--- a/drivers/net/ethernet/sfc/siena/efx_common.c
+++ b/drivers/net/ethernet/sfc/siena/efx_common.c
@@ -12,6 +12,7 @@
 #include <linux/filter.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <net/gre.h>
 #include "efx_common.h"
 #include "efx_channels.h"
diff --git a/drivers/net/ethernet/sfc/siena/ethtool_common.c b/drivers/net/ethernet/sfc/siena/ethtool_common.c
index 5f0a8127e967..d23153b8cf19 100644
--- a/drivers/net/ethernet/sfc/siena/ethtool_common.c
+++ b/drivers/net/ethernet/sfc/siena/ethtool_common.c
@@ -16,6 +16,7 @@
 #include "rx_common.h"
 #include "ethtool_common.h"
 #include "mcdi_port_common.h"
+#include <linux/sprintf.h>
 
 struct efx_sw_stat_desc {
 	const char *name;
diff --git a/drivers/net/ethernet/sfc/siena/mcdi.c b/drivers/net/ethernet/sfc/siena/mcdi.c
index 3f7899daa86a..e776b6f7a1ef 100644
--- a/drivers/net/ethernet/sfc/siena/mcdi.c
+++ b/drivers/net/ethernet/sfc/siena/mcdi.c
@@ -12,6 +12,8 @@
 #include "io.h"
 #include "farch_regs.h"
 #include "mcdi_pcol.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /**************************************************************************
  *
diff --git a/drivers/net/ethernet/sfc/siena/mcdi_mon.c b/drivers/net/ethernet/sfc/siena/mcdi_mon.c
index 56a9c56ed9e3..54c30808da1a 100644
--- a/drivers/net/ethernet/sfc/siena/mcdi_mon.c
+++ b/drivers/net/ethernet/sfc/siena/mcdi_mon.c
@@ -7,6 +7,7 @@
 #include <linux/bitops.h>
 #include <linux/slab.h>
 #include <linux/hwmon.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 
 #include "net_driver.h"
diff --git a/drivers/net/ethernet/sfc/siena/ptp.c b/drivers/net/ethernet/sfc/siena/ptp.c
index 4b5e2f0ba350..79ed089afb62 100644
--- a/drivers/net/ethernet/sfc/siena/ptp.c
+++ b/drivers/net/ethernet/sfc/siena/ptp.c
@@ -31,6 +31,7 @@
  *	timestamp.
  */
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <linux/time.h>
 #include <linux/ktime.h>
diff --git a/drivers/net/ethernet/sfc/siena/siena_sriov.c b/drivers/net/ethernet/sfc/siena/siena_sriov.c
index 554b799288b8..91ce9f4ef84f 100644
--- a/drivers/net/ethernet/sfc/siena/siena_sriov.c
+++ b/drivers/net/ethernet/sfc/siena/siena_sriov.c
@@ -16,6 +16,7 @@
 #include "farch_regs.h"
 #include "siena_sriov.h"
 #include "vfdi.h"
+#include <linux/sprintf.h>
 
 /* Number of longs required to track all the VIs in a VF */
 #define VI_MASK_LENGTH BITS_TO_LONGS(1 << EFX_VI_SCALE_MAX)
diff --git a/drivers/net/ethernet/sfc/tc_counters.c b/drivers/net/ethernet/sfc/tc_counters.c
index c44088424323..807a65f8f738 100644
--- a/drivers/net/ethernet/sfc/tc_counters.c
+++ b/drivers/net/ethernet/sfc/tc_counters.c
@@ -13,6 +13,7 @@
 #include "mae_counter_format.h"
 #include "mae.h"
 #include "rx_common.h"
+#include <linux/sprintf.h>
 
 /* Counter-management hashtables */
 
diff --git a/drivers/net/ethernet/sgi/ioc3-eth.c b/drivers/net/ethernet/sgi/ioc3-eth.c
index 98d0b561a057..1d03a6891dc1 100644
--- a/drivers/net/ethernet/sgi/ioc3-eth.c
+++ b/drivers/net/ethernet/sgi/ioc3-eth.c
@@ -34,6 +34,7 @@
 #include <linux/in.h>
 #include <linux/io.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/udp.h>
 #include <linux/gfp.h>
diff --git a/drivers/net/ethernet/smsc/smc9194.c b/drivers/net/ethernet/smsc/smc9194.c
index af661c65ffe2..23754b80de64 100644
--- a/drivers/net/ethernet/smsc/smc9194.c
+++ b/drivers/net/ethernet/smsc/smc9194.c
@@ -59,6 +59,7 @@ static const char version[] =
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/smsc/smsc911x.c b/drivers/net/ethernet/smsc/smsc911x.c
index 74f1ccc96459..be9ec561523d 100644
--- a/drivers/net/ethernet/smsc/smsc911x.c
+++ b/drivers/net/ethernet/smsc/smsc911x.c
@@ -33,6 +33,7 @@
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/bug.h>
 #include <linux/bitops.h>
diff --git a/drivers/net/ethernet/smsc/smsc9420.c b/drivers/net/ethernet/smsc/smsc9420.c
index 15cb96c2506d..534ba602a3c9 100644
--- a/drivers/net/ethernet/smsc/smsc9420.c
+++ b/drivers/net/ethernet/smsc/smsc9420.c
@@ -20,6 +20,7 @@
 #include <linux/module.h>
 #include <asm/unaligned.h>
 #include "smsc9420.h"
+#include <linux/sprintf.h>
 
 #define DRV_NAME		"smsc9420"
 #define DRV_MDIONAME		"smsc9420-mdio"
diff --git a/drivers/net/ethernet/socionext/netsec.c b/drivers/net/ethernet/socionext/netsec.c
index 5ab8b81b84e6..60621269cc0e 100644
--- a/drivers/net/ethernet/socionext/netsec.c
+++ b/drivers/net/ethernet/socionext/netsec.c
@@ -2,6 +2,7 @@
 
 #include <linux/types.h>
 #include <linux/clk.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/acpi.h>
@@ -13,6 +14,7 @@
 #include <linux/netlink.h>
 #include <linux/bpf.h>
 #include <linux/bpf_trace.h>
+#include <linux/sprintf.h>
 
 #include <net/tcp.h>
 #include <net/page_pool/helpers.h>
diff --git a/drivers/net/ethernet/socionext/sni_ave.c b/drivers/net/ethernet/socionext/sni_ave.c
index eed24e67c5a6..b5e768f5594d 100644
--- a/drivers/net/ethernet/socionext/sni_ave.c
+++ b/drivers/net/ethernet/socionext/sni_ave.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mfd/syscon.h>
 #include <linux/mii.h>
 #include <linux/module.h>
@@ -22,6 +23,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/u64_stats_sync.h>
 
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac-intel.c b/drivers/net/ethernet/stmicro/stmmac/dwmac-intel.c
index 60283543ffc8..068dd5c1af5c 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac-intel.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac-intel.c
@@ -9,6 +9,7 @@
 #include "dwmac4.h"
 #include "stmmac.h"
 #include "stmmac_ptp.h"
+#include <linux/sprintf.h>
 
 struct intel_priv_data {
 	int mdio_adhoc_addr;	/* mdio address for serdes & etc */
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac-meson8b.c b/drivers/net/ethernet/stmicro/stmmac/dwmac-meson8b.c
index b23944aa344e..140aef4c48ce 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac-meson8b.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac-meson8b.c
@@ -17,6 +17,7 @@
 #include <linux/of_net.h>
 #include <linux/mfd/syscon.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/stmmac.h>
 
 #include "stmmac_platform.h"
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac-socfpga.c b/drivers/net/ethernet/stmicro/stmmac/dwmac-socfpga.c
index 68f85e4605cb..d3b520f32ab7 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac-socfpga.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac-socfpga.c
@@ -13,6 +13,7 @@
 #include <linux/mdio/mdio-regmap.h>
 #include <linux/pcs-lynx.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/stmmac.h>
 
 #include "stmmac.h"
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c b/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c
index b21d99faa2d0..ef9e67558d1b 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac-sun8i.c
@@ -8,6 +8,7 @@
 #include <linux/clk.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mdio-mux.h>
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac1000_dma.c b/drivers/net/ethernet/stmicro/stmmac/dwmac1000_dma.c
index daf79cdbd3ec..2bad7e7f8ce8 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac1000_dma.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac1000_dma.c
@@ -15,6 +15,7 @@
 #include <asm/io.h>
 #include "dwmac1000.h"
 #include "dwmac_dma.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void dwmac1000_dma_axi(void __iomem *ioaddr, struct stmmac_axi *axi)
 {
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac100_dma.c b/drivers/net/ethernet/stmicro/stmmac/dwmac100_dma.c
index dea270f60cc3..dfd59d8b7644 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac100_dma.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac100_dma.c
@@ -17,6 +17,7 @@
 #include <asm/io.h>
 #include "dwmac100.h"
 #include "dwmac_dma.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void dwmac100_dma_init(void __iomem *ioaddr,
 			      struct stmmac_dma_cfg *dma_cfg, int atds)
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac4_descs.c b/drivers/net/ethernet/stmicro/stmmac/dwmac4_descs.c
index 1c5802e0d7f4..a4ab31d30cff 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac4_descs.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac4_descs.c
@@ -12,6 +12,7 @@
 #include "common.h"
 #include "dwmac4.h"
 #include "dwmac4_descs.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int dwmac4_wrback_get_tx_status(struct stmmac_extra_stats *x,
 				       struct dma_desc *p,
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwmac4_dma.c b/drivers/net/ethernet/stmicro/stmmac/dwmac4_dma.c
index 84d3a8551b03..c3d3a0f32f35 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwmac4_dma.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwmac4_dma.c
@@ -14,6 +14,7 @@
 #include "dwmac4.h"
 #include "dwmac4_dma.h"
 #include "stmmac.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void dwmac4_dma_axi(void __iomem *ioaddr, struct stmmac_axi *axi)
 {
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_descs.c b/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_descs.c
index fc82862a612c..fd3a4df817df 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_descs.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_descs.c
@@ -7,6 +7,7 @@
 #include <linux/stmmac.h>
 #include "common.h"
 #include "dwxgmac2.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int dwxgmac2_get_tx_status(struct stmmac_extra_stats *x,
 				  struct dma_desc *p, void __iomem *ioaddr)
diff --git a/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c b/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
index dd2ab6185c40..06c6a0e770d6 100644
--- a/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
+++ b/drivers/net/ethernet/stmicro/stmmac/dwxgmac2_dma.c
@@ -7,6 +7,7 @@
 #include <linux/iopoll.h>
 #include "stmmac.h"
 #include "dwxgmac2.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int dwxgmac2_dma_reset(void __iomem *ioaddr)
 {
diff --git a/drivers/net/ethernet/stmicro/stmmac/stmmac_ethtool.c b/drivers/net/ethernet/stmicro/stmmac/stmmac_ethtool.c
index 0e44b84fb7e7..b84a59fa9870 100644
--- a/drivers/net/ethernet/stmicro/stmmac/stmmac_ethtool.c
+++ b/drivers/net/ethernet/stmicro/stmmac/stmmac_ethtool.c
@@ -15,6 +15,7 @@
 #include <linux/phylink.h>
 #include <linux/net_tstamp.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #include "stmmac.h"
 #include "dwmac_dma.h"
diff --git a/drivers/net/ethernet/stmicro/stmmac/stmmac_main.c b/drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
index 5236956cc7e4..345fa21780c7 100644
--- a/drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
+++ b/drivers/net/ethernet/stmicro/stmmac/stmmac_main.c
@@ -18,6 +18,8 @@
 #include <linux/kernel.h>
 #include <linux/interrupt.h>
 #include <linux/ip.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/skbuff.h>
 #include <linux/ethtool.h>
diff --git a/drivers/net/ethernet/stmicro/stmmac/stmmac_mdio.c b/drivers/net/ethernet/stmicro/stmmac/stmmac_mdio.c
index 0542cfd1817e..7a745d8176b1 100644
--- a/drivers/net/ethernet/stmicro/stmmac/stmmac_mdio.c
+++ b/drivers/net/ethernet/stmicro/stmmac/stmmac_mdio.c
@@ -19,6 +19,7 @@
 #include <linux/phy.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "dwxgmac2.h"
 #include "stmmac.h"
diff --git a/drivers/net/ethernet/stmicro/stmmac/stmmac_selftests.c b/drivers/net/ethernet/stmicro/stmmac/stmmac_selftests.c
index 3ca1c2a816ff..fab2cdab3aae 100644
--- a/drivers/net/ethernet/stmicro/stmmac/stmmac_selftests.c
+++ b/drivers/net/ethernet/stmicro/stmmac/stmmac_selftests.c
@@ -12,6 +12,7 @@
 #include <linux/ethtool.h>
 #include <linux/ip.h>
 #include <linux/phy.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <net/pkt_cls.h>
 #include <net/pkt_sched.h>
diff --git a/drivers/net/ethernet/sun/ldmvsw.c b/drivers/net/ethernet/sun/ldmvsw.c
index a9a6670b5ff1..8f07b29012de 100644
--- a/drivers/net/ethernet/sun/ldmvsw.c
+++ b/drivers/net/ethernet/sun/ldmvsw.c
@@ -17,6 +17,7 @@
 #include <linux/mutex.h>
 #include <linux/netdevice.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #if defined(CONFIG_IPV6)
diff --git a/drivers/net/ethernet/sun/niu.c b/drivers/net/ethernet/sun/niu.c
index 21431f43e4c2..3ab886b5a565 100644
--- a/drivers/net/ethernet/sun/niu.c
+++ b/drivers/net/ethernet/sun/niu.c
@@ -29,6 +29,7 @@
 #include <linux/crc32.h>
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/io.h>
 #include <linux/of.h>
diff --git a/drivers/net/ethernet/sun/sunhme.c b/drivers/net/ethernet/sun/sunhme.c
index b983b9c23be6..8143878bbfa5 100644
--- a/drivers/net/ethernet/sun/sunhme.c
+++ b/drivers/net/ethernet/sun/sunhme.c
@@ -28,6 +28,7 @@
 #include <linux/io.h>
 #include <linux/ioport.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mii.h>
 #include <linux/mm.h>
 #include <linux/module.h>
@@ -39,6 +40,7 @@
 #include <linux/random.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
diff --git a/drivers/net/ethernet/sun/sunqe.c b/drivers/net/ethernet/sun/sunqe.c
index aedd13c94225..545adc800b76 100644
--- a/drivers/net/ethernet/sun/sunqe.c
+++ b/drivers/net/ethernet/sun/sunqe.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/fcntl.h>
diff --git a/drivers/net/ethernet/sun/sunvnet.c b/drivers/net/ethernet/sun/sunvnet.c
index e220620d0ffc..189c22cad527 100644
--- a/drivers/net/ethernet/sun/sunvnet.c
+++ b/drivers/net/ethernet/sun/sunvnet.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
diff --git a/drivers/net/ethernet/sunplus/spl2sw_mdio.c b/drivers/net/ethernet/sunplus/spl2sw_mdio.c
index c8ef17e34f3c..7c901dcc26c6 100644
--- a/drivers/net/ethernet/sunplus/spl2sw_mdio.c
+++ b/drivers/net/ethernet/sunplus/spl2sw_mdio.c
@@ -7,6 +7,7 @@
 #include <linux/netdevice.h>
 #include <linux/bitfield.h>
 #include <linux/of_mdio.h>
+#include <linux/sprintf.h>
 
 #include "spl2sw_register.h"
 #include "spl2sw_define.h"
diff --git a/drivers/net/ethernet/synopsys/dwc-xlgmac-desc.c b/drivers/net/ethernet/synopsys/dwc-xlgmac-desc.c
index 589797bad1f9..8d6305cfce65 100644
--- a/drivers/net/ethernet/synopsys/dwc-xlgmac-desc.c
+++ b/drivers/net/ethernet/synopsys/dwc-xlgmac-desc.c
@@ -17,6 +17,7 @@
 
 #include "dwc-xlgmac.h"
 #include "dwc-xlgmac-reg.h"
+#include <linux/sprintf.h>
 
 static void xlgmac_unmap_desc_data(struct xlgmac_pdata *pdata,
 				   struct xlgmac_desc_data *desc_data)
diff --git a/drivers/net/ethernet/synopsys/dwc-xlgmac-ethtool.c b/drivers/net/ethernet/synopsys/dwc-xlgmac-ethtool.c
index e794da727fe0..f7a4d029d4ae 100644
--- a/drivers/net/ethernet/synopsys/dwc-xlgmac-ethtool.c
+++ b/drivers/net/ethernet/synopsys/dwc-xlgmac-ethtool.c
@@ -18,6 +18,7 @@
 #include <linux/ethtool.h>
 #include <linux/kernel.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include "dwc-xlgmac.h"
 #include "dwc-xlgmac-reg.h"
diff --git a/drivers/net/ethernet/synopsys/dwc-xlgmac-hw.c b/drivers/net/ethernet/synopsys/dwc-xlgmac-hw.c
index 76eb7db80f13..a824e61f6a4f 100644
--- a/drivers/net/ethernet/synopsys/dwc-xlgmac-hw.c
+++ b/drivers/net/ethernet/synopsys/dwc-xlgmac-hw.c
@@ -22,6 +22,7 @@
 #include <linux/crc32.h>
 #include <linux/crc32poly.h>
 #include <linux/dcbnl.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "dwc-xlgmac.h"
 #include "dwc-xlgmac-reg.h"
diff --git a/drivers/net/ethernet/synopsys/dwc-xlgmac-net.c b/drivers/net/ethernet/synopsys/dwc-xlgmac-net.c
index 36b948820c1e..f3a81203046d 100644
--- a/drivers/net/ethernet/synopsys/dwc-xlgmac-net.c
+++ b/drivers/net/ethernet/synopsys/dwc-xlgmac-net.c
@@ -16,8 +16,10 @@
  */
 
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "dwc-xlgmac.h"
 #include "dwc-xlgmac-reg.h"
diff --git a/drivers/net/ethernet/ti/am65-cpsw-nuss.c b/drivers/net/ethernet/ti/am65-cpsw-nuss.c
index 9d2f4ac783e4..5721de6a8d2c 100644
--- a/drivers/net/ethernet/ti/am65-cpsw-nuss.c
+++ b/drivers/net/ethernet/ti/am65-cpsw-nuss.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/etherdevice.h>
 #include <linux/if_vlan.h>
 #include <linux/interrupt.h>
@@ -27,9 +28,11 @@
 #include <linux/regmap.h>
 #include <linux/rtnetlink.h>
 #include <linux/mfd/syscon.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/dma/ti-cppi5.h>
 #include <linux/dma/k3-udma-glue.h>
+#include <linux/hrtimer.h>
 #include <net/switchdev.h>
 
 #include "cpsw_ale.h"
diff --git a/drivers/net/ethernet/ti/am65-cpts.c b/drivers/net/ethernet/ti/am65-cpts.c
index c66618d91c28..26a46cdc96c7 100644
--- a/drivers/net/ethernet/ti/am65-cpts.c
+++ b/drivers/net/ethernet/ti/am65-cpts.c
@@ -10,6 +10,7 @@
 #include <linux/err.h>
 #include <linux/if_vlan.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/netdevice.h>
 #include <linux/net_tstamp.h>
diff --git a/drivers/net/ethernet/ti/cpsw.c b/drivers/net/ethernet/ti/cpsw.c
index c0a5abd8d9a8..4cc8992e6cac 100644
--- a/drivers/net/ethernet/ti/cpsw.c
+++ b/drivers/net/ethernet/ti/cpsw.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
diff --git a/drivers/net/ethernet/ti/cpsw_ethtool.c b/drivers/net/ethernet/ti/cpsw_ethtool.c
index f7b283353ba2..b51f48b1bbcc 100644
--- a/drivers/net/ethernet/ti/cpsw_ethtool.c
+++ b/drivers/net/ethernet/ti/cpsw_ethtool.c
@@ -14,6 +14,7 @@
 #include <linux/phy.h>
 #include <linux/pm_runtime.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 
 #include "cpsw.h"
 #include "cpts.h"
diff --git a/drivers/net/ethernet/ti/cpsw_new.c b/drivers/net/ethernet/ti/cpsw_new.c
index 087dcb67505a..bde23ffb499b 100644
--- a/drivers/net/ethernet/ti/cpsw_new.c
+++ b/drivers/net/ethernet/ti/cpsw_new.c
@@ -8,6 +8,7 @@
 #include <linux/io.h>
 #include <linux/clk.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/module.h>
 #include <linux/irqreturn.h>
diff --git a/drivers/net/ethernet/ti/cpts.c b/drivers/net/ethernet/ti/cpts.c
index bcccf43d368b..6c54d893960c 100644
--- a/drivers/net/ethernet/ti/cpts.c
+++ b/drivers/net/ethernet/ti/cpts.c
@@ -6,6 +6,7 @@
  *
  */
 #include <linux/clk-provider.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/if.h>
 #include <linux/hrtimer.h>
diff --git a/drivers/net/ethernet/ti/davinci_mdio.c b/drivers/net/ethernet/ti/davinci_mdio.c
index 8e07d4a1b6ba..8da9570c9335 100644
--- a/drivers/net/ethernet/ti/davinci_mdio.c
+++ b/drivers/net/ethernet/ti/davinci_mdio.c
@@ -26,6 +26,7 @@
 #include <linux/of_mdio.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/mdio-bitbang.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 /*
diff --git a/drivers/net/ethernet/ti/icssg/icss_iep.c b/drivers/net/ethernet/ti/icssg/icss_iep.c
index 3025e9c18970..1d7f39841a90 100644
--- a/drivers/net/ethernet/ti/icssg/icss_iep.c
+++ b/drivers/net/ethernet/ti/icssg/icss_iep.c
@@ -10,6 +10,7 @@
 #include <linux/clk.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_platform.h>
diff --git a/drivers/net/ethernet/ti/icssg/icssg_config.c b/drivers/net/ethernet/ti/icssg/icssg_config.c
index 99de8a40ed60..10dd36bea51a 100644
--- a/drivers/net/ethernet/ti/icssg/icssg_config.c
+++ b/drivers/net/ethernet/ti/icssg/icssg_config.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/regmap.h>
 #include <uapi/linux/if_ether.h>
 #include "icssg_config.h"
diff --git a/drivers/net/ethernet/ti/icssg/icssg_prueth.c b/drivers/net/ethernet/ti/icssg/icssg_prueth.c
index 411898a4f38c..1d99346c43c4 100644
--- a/drivers/net/ethernet/ti/icssg/icssg_prueth.c
+++ b/drivers/net/ethernet/ti/icssg/icssg_prueth.c
@@ -8,6 +8,7 @@
 
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/dma/ti-cppi5.h>
@@ -27,6 +28,7 @@
 #include <linux/remoteproc/pruss.h>
 #include <linux/regmap.h>
 #include <linux/remoteproc.h>
+#include <linux/sprintf.h>
 
 #include "icssg_prueth.h"
 #include "icssg_mii_rt.h"
diff --git a/drivers/net/ethernet/ti/netcp_core.c b/drivers/net/ethernet/ti/netcp_core.c
index 11b90e1da0c6..73696bcd50e8 100644
--- a/drivers/net/ethernet/ti/netcp_core.c
+++ b/drivers/net/ethernet/ti/netcp_core.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/soc/ti/knav_qmss.h>
 #include <linux/soc/ti/knav_dma.h>
+#include <linux/sprintf.h>
 
 #include "netcp.h"
 
diff --git a/drivers/net/ethernet/ti/tlan.c b/drivers/net/ethernet/ti/tlan.c
index b3da76efa8f5..9660dff17f2b 100644
--- a/drivers/net/ethernet/ti/tlan.c
+++ b/drivers/net/ethernet/ti/tlan.c
@@ -30,6 +30,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/hardirq.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/toshiba/ps3_gelic_wireless.c b/drivers/net/ethernet/toshiba/ps3_gelic_wireless.c
index 44488c153ea2..5b3ec1cc4f84 100644
--- a/drivers/net/ethernet/toshiba/ps3_gelic_wireless.c
+++ b/drivers/net/ethernet/toshiba/ps3_gelic_wireless.c
@@ -10,6 +10,8 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
diff --git a/drivers/net/ethernet/toshiba/tc35815.c b/drivers/net/ethernet/toshiba/tc35815.c
index 6e3758dfbdbd..d953eaefe44e 100644
--- a/drivers/net/ethernet/toshiba/tc35815.c
+++ b/drivers/net/ethernet/toshiba/tc35815.c
@@ -28,6 +28,7 @@ static const char version[] = "tc35815.c:v" DRV_VERSION "\n";
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/wangxun/libwx/wx_hw.c b/drivers/net/ethernet/wangxun/libwx/wx_hw.c
index 945c13d1a982..af33c58242a8 100644
--- a/drivers/net/ethernet/wangxun/libwx/wx_hw.c
+++ b/drivers/net/ethernet/wangxun/libwx/wx_hw.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2015 - 2022 Beijing WangXun Technology Co., Ltd. */
 
 #include <linux/etherdevice.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/netdevice.h>
 #include <linux/if_ether.h>
 #include <linux/if_vlan.h>
diff --git a/drivers/net/ethernet/wangxun/ngbe/ngbe_main.c b/drivers/net/ethernet/wangxun/ngbe/ngbe_main.c
index fdd6b4f70b7a..149bfbd9bab0 100644
--- a/drivers/net/ethernet/wangxun/ngbe/ngbe_main.c
+++ b/drivers/net/ethernet/wangxun/ngbe/ngbe_main.c
@@ -2,9 +2,11 @@
 /* Copyright (c) 2019 - 2022 Beijing WangXun Technology Co., Ltd. */
 
 #include <linux/types.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/etherdevice.h>
 #include <net/ip.h>
diff --git a/drivers/net/ethernet/wangxun/ngbe/ngbe_mdio.c b/drivers/net/ethernet/wangxun/ngbe/ngbe_mdio.c
index ec54b18c5fe7..ed6f39cb45ac 100644
--- a/drivers/net/ethernet/wangxun/ngbe/ngbe_mdio.c
+++ b/drivers/net/ethernet/wangxun/ngbe/ngbe_mdio.c
@@ -5,6 +5,7 @@
 #include <linux/iopoll.h>
 #include <linux/pci.h>
 #include <linux/phy.h>
+#include <linux/sprintf.h>
 
 #include "../libwx/wx_type.h"
 #include "../libwx/wx_hw.h"
diff --git a/drivers/net/ethernet/wangxun/txgbe/txgbe_irq.c b/drivers/net/ethernet/wangxun/txgbe/txgbe_irq.c
index b3e3605d1edb..738cf8737db9 100644
--- a/drivers/net/ethernet/wangxun/txgbe/txgbe_irq.c
+++ b/drivers/net/ethernet/wangxun/txgbe/txgbe_irq.c
@@ -3,6 +3,7 @@
 
 #include <linux/irqdomain.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "../libwx/wx_type.h"
 #include "../libwx/wx_lib.h"
diff --git a/drivers/net/ethernet/wangxun/txgbe/txgbe_main.c b/drivers/net/ethernet/wangxun/txgbe/txgbe_main.c
index e67a21294158..f408130f6bb7 100644
--- a/drivers/net/ethernet/wangxun/txgbe/txgbe_main.c
+++ b/drivers/net/ethernet/wangxun/txgbe/txgbe_main.c
@@ -2,9 +2,11 @@
 /* Copyright (c) 2015 - 2022 Beijing WangXun Technology Co., Ltd. */
 
 #include <linux/types.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/etherdevice.h>
 #include <linux/phylink.h>
diff --git a/drivers/net/ethernet/wangxun/txgbe/txgbe_phy.c b/drivers/net/ethernet/wangxun/txgbe/txgbe_phy.c
index bae0a8ee7014..4467b06b3a52 100644
--- a/drivers/net/ethernet/wangxun/txgbe/txgbe_phy.c
+++ b/drivers/net/ethernet/wangxun/txgbe/txgbe_phy.c
@@ -12,6 +12,7 @@
 #include <linux/regmap.h>
 #include <linux/pcs/pcs-xpcs.h>
 #include <linux/phylink.h>
+#include <linux/sprintf.h>
 
 #include "../libwx/wx_type.h"
 #include "../libwx/wx_lib.h"
diff --git a/drivers/net/ethernet/wiznet/w5100.c b/drivers/net/ethernet/wiznet/w5100.c
index b26fd15c25ae..b247deeebf15 100644
--- a/drivers/net/ethernet/wiznet/w5100.c
+++ b/drivers/net/ethernet/wiznet/w5100.c
@@ -14,6 +14,7 @@
 #include <linux/platform_data/wiznet.h>
 #include <linux/ethtool.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/delay.h>
diff --git a/drivers/net/ethernet/wiznet/w5300.c b/drivers/net/ethernet/wiznet/w5300.c
index f165616f36fe..c121d4ab4ba8 100644
--- a/drivers/net/ethernet/wiznet/w5300.c
+++ b/drivers/net/ethernet/wiznet/w5300.c
@@ -15,6 +15,7 @@
 #include <linux/platform_data/wiznet.h>
 #include <linux/ethtool.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/delay.h>
diff --git a/drivers/net/ethernet/xilinx/ll_temac_main.c b/drivers/net/ethernet/xilinx/ll_temac_main.c
index 9df39cf8b097..2e1508fc5180 100644
--- a/drivers/net/ethernet/xilinx/ll_temac_main.c
+++ b/drivers/net/ethernet/xilinx/ll_temac_main.c
@@ -41,6 +41,7 @@
 #include <linux/platform_device.h>
 #include <linux/skbuff.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>      /* needed for sizeof(tcphdr) */
 #include <linux/udp.h>      /* needed for sizeof(udphdr) */
 #include <linux/phy.h>
diff --git a/drivers/net/ethernet/xilinx/ll_temac_mdio.c b/drivers/net/ethernet/xilinx/ll_temac_mdio.c
index 07a9fb49eda1..f38f7c8dff41 100644
--- a/drivers/net/ethernet/xilinx/ll_temac_mdio.c
+++ b/drivers/net/ethernet/xilinx/ll_temac_mdio.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/of_mdio.h>
 #include <linux/platform_data/xilinx-ll-temac.h>
+#include <linux/sprintf.h>
 
 #include "ll_temac.h"
 
diff --git a/drivers/net/ethernet/xilinx/xilinx_axienet.h b/drivers/net/ethernet/xilinx/xilinx_axienet.h
index 807ead678551..515dce133569 100644
--- a/drivers/net/ethernet/xilinx/xilinx_axienet.h
+++ b/drivers/net/ethernet/xilinx/xilinx_axienet.h
@@ -13,6 +13,7 @@
 #include <linux/spinlock.h>
 #include <linux/interrupt.h>
 #include <linux/if_vlan.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/phylink.h>
 #include <linux/skbuff.h>
 
diff --git a/drivers/net/ethernet/xilinx/xilinx_axienet_main.c b/drivers/net/ethernet/xilinx/xilinx_axienet_main.c
index aaf780fd4f5e..0f530dc8ce8d 100644
--- a/drivers/net/ethernet/xilinx/xilinx_axienet_main.c
+++ b/drivers/net/ethernet/xilinx/xilinx_axienet_main.c
@@ -25,6 +25,7 @@
 #include <linux/clk.h>
 #include <linux/delay.h>
 #include <linux/etherdevice.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/netdevice.h>
 #include <linux/of.h>
diff --git a/drivers/net/ethernet/xilinx/xilinx_axienet_mdio.c b/drivers/net/ethernet/xilinx/xilinx_axienet_mdio.c
index 2f07fde361aa..7d8fedb973fc 100644
--- a/drivers/net/ethernet/xilinx/xilinx_axienet_mdio.c
+++ b/drivers/net/ethernet/xilinx/xilinx_axienet_mdio.c
@@ -14,6 +14,7 @@
 #include <linux/of_mdio.h>
 #include <linux/jiffies.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #include "xilinx_axienet.h"
 
diff --git a/drivers/net/ethernet/xilinx/xilinx_emaclite.c b/drivers/net/ethernet/xilinx/xilinx_emaclite.c
index 940452d0a4d2..02631f86031b 100644
--- a/drivers/net/ethernet/xilinx/xilinx_emaclite.c
+++ b/drivers/net/ethernet/xilinx/xilinx_emaclite.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/ethernet/xircom/xirc2ps_cs.c b/drivers/net/ethernet/xircom/xirc2ps_cs.c
index e9bc38fd2025..ae9153068d2c 100644
--- a/drivers/net/ethernet/xircom/xirc2ps_cs.c
+++ b/drivers/net/ethernet/xircom/xirc2ps_cs.c
@@ -69,6 +69,7 @@
 #include <linux/init.h>
 #include <linux/ptrace.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ethernet/xscale/ixp4xx_eth.c b/drivers/net/ethernet/xscale/ixp4xx_eth.c
index e0d26148dfd9..aea18b2c7e27 100644
--- a/drivers/net/ethernet/xscale/ixp4xx_eth.c
+++ b/drivers/net/ethernet/xscale/ixp4xx_eth.c
@@ -39,6 +39,7 @@
 #include <linux/soc/ixp4xx/npe.h>
 #include <linux/soc/ixp4xx/qmgr.h>
 #include <linux/soc/ixp4xx/cpu.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #define IXP4XX_ETH_NPEA		0x00
diff --git a/drivers/net/fjes/fjes_ethtool.c b/drivers/net/fjes/fjes_ethtool.c
index 19c99529566b..a3b8497c89fa 100644
--- a/drivers/net/fjes/fjes_ethtool.c
+++ b/drivers/net/fjes/fjes_ethtool.c
@@ -10,6 +10,7 @@
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "fjes.h"
 
diff --git a/drivers/net/hamradio/6pack.c b/drivers/net/hamradio/6pack.c
index 6ed38a3cdd73..1ffbe4520638 100644
--- a/drivers/net/hamradio/6pack.c
+++ b/drivers/net/hamradio/6pack.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/uaccess.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/hamradio/baycom_epp.c b/drivers/net/hamradio/baycom_epp.c
index ccfc83857c26..d720acbfae44 100644
--- a/drivers/net/hamradio/baycom_epp.c
+++ b/drivers/net/hamradio/baycom_epp.c
@@ -26,10 +26,12 @@
 /*****************************************************************************/
 
 #include <linux/crc-ccitt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/workqueue.h>
 #include <linux/fs.h>
diff --git a/drivers/net/hamradio/baycom_par.c b/drivers/net/hamradio/baycom_par.c
index fd7da5bb1fa5..ac0cff2b8bc7 100644
--- a/drivers/net/hamradio/baycom_par.c
+++ b/drivers/net/hamradio/baycom_par.c
@@ -54,6 +54,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/hamradio/baycom_ser_fdx.c b/drivers/net/hamradio/baycom_ser_fdx.c
index 646f605e358f..0a5f6624a3d3 100644
--- a/drivers/net/hamradio/baycom_ser_fdx.c
+++ b/drivers/net/hamradio/baycom_ser_fdx.c
@@ -57,8 +57,11 @@
 /*****************************************************************************/
 
 #include <linux/capability.h>
+#include <linux/kernel.h> // for get_options()
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/hamradio/baycom_ser_hdx.c b/drivers/net/hamradio/baycom_ser_hdx.c
index 5d1ab4840753..82849f40a95c 100644
--- a/drivers/net/hamradio/baycom_ser_hdx.c
+++ b/drivers/net/hamradio/baycom_ser_hdx.c
@@ -46,8 +46,10 @@
 /*****************************************************************************/
 
 #include <linux/capability.h>
+#include <linux/kernel.h> // for get_options()
 #include <linux/module.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/hamradio/mkiss.c b/drivers/net/hamradio/mkiss.c
index 5f38a002bd9e..48e84eb87263 100644
--- a/drivers/net/hamradio/mkiss.c
+++ b/drivers/net/hamradio/mkiss.c
@@ -7,6 +7,7 @@
  */
 #include <linux/module.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/uaccess.h>
 #include <linux/crc16.h>
 #include <linux/string.h>
diff --git a/drivers/net/hamradio/scc.c b/drivers/net/hamradio/scc.c
index a9184a78650b..1415e0388f14 100644
--- a/drivers/net/hamradio/scc.c
+++ b/drivers/net/hamradio/scc.c
@@ -152,6 +152,7 @@
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/signal.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/interrupt.h>
 #include <linux/ioport.h>
diff --git a/drivers/net/hamradio/yam.c b/drivers/net/hamradio/yam.c
index 2ed2f836f09a..e4e70eb54731 100644
--- a/drivers/net/hamradio/yam.c
+++ b/drivers/net/hamradio/yam.c
@@ -28,6 +28,7 @@
 /*****************************************************************************/
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/net.h>
 #include <linux/in.h>
diff --git a/drivers/net/hyperv/netvsc.c b/drivers/net/hyperv/netvsc.c
index a6fcbda64ecc..0269563f6ed0 100644
--- a/drivers/net/hyperv/netvsc.c
+++ b/drivers/net/hyperv/netvsc.c
@@ -21,6 +21,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/prefetch.h>
 #include <linux/filter.h>
+#include <linux/completion.h>
 
 #include <asm/sync_bitops.h>
 #include <asm/mshyperv.h>
diff --git a/drivers/net/hyperv/netvsc_drv.c b/drivers/net/hyperv/netvsc_drv.c
index 11831a1c9762..79aa636fffec 100644
--- a/drivers/net/hyperv/netvsc_drv.c
+++ b/drivers/net/hyperv/netvsc_drv.c
@@ -10,7 +10,9 @@
 
 #include <linux/init.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/ethtool.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/highmem.h>
 #include <linux/device.h>
diff --git a/drivers/net/hyperv/rndis_filter.c b/drivers/net/hyperv/rndis_filter.c
index ecc2128ca9b7..1bdeb906dbdf 100644
--- a/drivers/net/hyperv/rndis_filter.c
+++ b/drivers/net/hyperv/rndis_filter.c
@@ -9,6 +9,7 @@
 #include <linux/ethtool.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/highmem.h>
 #include <linux/slab.h>
@@ -21,6 +22,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/ucs2_string.h>
 #include <linux/string.h>
+#include <linux/completion.h>
 
 #include "hyperv_net.h"
 #include "netvsc_trace.h"
diff --git a/drivers/net/ieee802154/adf7242.c b/drivers/net/ieee802154/adf7242.c
index cc7ddc40020f..412f96e4e6f9 100644
--- a/drivers/net/ieee802154/adf7242.c
+++ b/drivers/net/ieee802154/adf7242.c
@@ -12,6 +12,7 @@
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/spinlock.h>
 #include <linux/firmware.h>
@@ -21,6 +22,7 @@
 #include <linux/irq.h>
 #include <linux/debugfs.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/ieee802154.h>
 #include <net/mac802154.h>
 #include <net/cfg802154.h>
diff --git a/drivers/net/ieee802154/at86rf230.c b/drivers/net/ieee802154/at86rf230.c
index 164c7f605af5..550d31c8ea91 100644
--- a/drivers/net/ieee802154/at86rf230.c
+++ b/drivers/net/ieee802154/at86rf230.c
@@ -23,6 +23,7 @@
 #include <linux/skbuff.h>
 #include <linux/of_gpio.h>
 #include <linux/ieee802154.h>
+#include <linux/completion.h>
 
 #include <net/mac802154.h>
 #include <net/cfg802154.h>
diff --git a/drivers/net/ieee802154/ca8210.c b/drivers/net/ieee802154/ca8210.c
index f732c150462b..9904bbf472d4 100644
--- a/drivers/net/ieee802154/ca8210.c
+++ b/drivers/net/ieee802154/ca8210.c
@@ -49,6 +49,7 @@
 
 #include <linux/cdev.h>
 #include <linux/clk-provider.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/gpio/consumer.h>
@@ -65,6 +66,7 @@
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/workqueue.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ieee802154/cc2520.c b/drivers/net/ieee802154/cc2520.c
index a94d8dd71aad..b62919f6e3ea 100644
--- a/drivers/net/ieee802154/cc2520.c
+++ b/drivers/net/ieee802154/cc2520.c
@@ -17,6 +17,7 @@
 #include <linux/ieee802154.h>
 #include <linux/crc-ccitt.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include <net/mac802154.h>
 #include <net/cfg802154.h>
diff --git a/drivers/net/ipa/gsi.c b/drivers/net/ipa/gsi.c
index 9a0b1fe4a93a..afc8c4085e5d 100644
--- a/drivers/net/ipa/gsi.c
+++ b/drivers/net/ipa/gsi.c
@@ -7,6 +7,8 @@
 #include <linux/types.h>
 #include <linux/bits.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mutex.h>
 #include <linux/completion.h>
 #include <linux/io.h>
diff --git a/drivers/net/ipa/gsi_trans.c b/drivers/net/ipa/gsi_trans.c
index ee6fb00b71eb..326365979d2e 100644
--- a/drivers/net/ipa/gsi_trans.c
+++ b/drivers/net/ipa/gsi_trans.c
@@ -7,6 +7,7 @@
 #include <linux/types.h>
 #include <linux/bits.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/refcount.h>
 #include <linux/scatterlist.h>
 #include <linux/dma-direction.h>
diff --git a/drivers/net/ipa/ipa_cmd.c b/drivers/net/ipa/ipa_cmd.c
index f1419fbd776c..cb4ab53d4a44 100644
--- a/drivers/net/ipa/ipa_cmd.c
+++ b/drivers/net/ipa/ipa_cmd.c
@@ -8,6 +8,7 @@
 #include <linux/device.h>
 #include <linux/slab.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/dma-direction.h>
 
 #include "gsi.h"
diff --git a/drivers/net/ipa/ipa_endpoint.c b/drivers/net/ipa/ipa_endpoint.c
index afa1d56d9095..45ed38f8d12e 100644
--- a/drivers/net/ipa/ipa_endpoint.c
+++ b/drivers/net/ipa/ipa_endpoint.c
@@ -8,6 +8,7 @@
 #include <linux/device.h>
 #include <linux/slab.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/if_rmnet.h>
 #include <linux/dma-direction.h>
 
diff --git a/drivers/net/ipa/ipa_main.c b/drivers/net/ipa/ipa_main.c
index 00475fd7a205..582710f274eb 100644
--- a/drivers/net/ipa/ipa_main.c
+++ b/drivers/net/ipa/ipa_main.c
@@ -7,6 +7,7 @@
 #include <linux/types.h>
 #include <linux/atomic.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/bug.h>
 #include <linux/io.h>
diff --git a/drivers/net/ipa/ipa_qmi.c b/drivers/net/ipa/ipa_qmi.c
index f70f0a1d1cda..d48913825d24 100644
--- a/drivers/net/ipa/ipa_qmi.c
+++ b/drivers/net/ipa/ipa_qmi.c
@@ -9,6 +9,7 @@
 #include <linux/slab.h>
 #include <linux/qrtr.h>
 #include <linux/soc/qcom/qmi.h>
+#include <linux/completion.h>
 
 #include "ipa.h"
 #include "ipa_endpoint.h"
diff --git a/drivers/net/ipvlan/ipvtap.c b/drivers/net/ipvlan/ipvtap.c
index 1afc4c47be73..dc0d7986eb3c 100644
--- a/drivers/net/ipvlan/ipvtap.c
+++ b/drivers/net/ipvlan/ipvtap.c
@@ -11,6 +11,7 @@
 #include <linux/skbuff.h>
 #include <linux/cache.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/wait.h>
diff --git a/drivers/net/macvtap.c b/drivers/net/macvtap.c
index 29a5929d48e5..d0c32baefbeb 100644
--- a/drivers/net/macvtap.c
+++ b/drivers/net/macvtap.c
@@ -11,6 +11,7 @@
 #include <linux/skbuff.h>
 #include <linux/cache.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/wait.h>
diff --git a/drivers/net/mctp/mctp-i2c.c b/drivers/net/mctp/mctp-i2c.c
index b37a9e4bade4..ee94639c00ff 100644
--- a/drivers/net/mctp/mctp-i2c.c
+++ b/drivers/net/mctp/mctp-i2c.c
@@ -22,8 +22,10 @@
 #include <linux/i2c.h>
 #include <linux/i2c-mux.h>
 #include <linux/if_arp.h>
+#include <linux/sprintf.h>
 #include <net/mctp.h>
 #include <net/mctpdevice.h>
+#include <linux/completion.h>
 
 /* byte_count is limited to u8 */
 #define MCTP_I2C_MAXBLOCK 255
diff --git a/drivers/net/mctp/mctp-i3c.c b/drivers/net/mctp/mctp-i3c.c
index 8e989c157caa..066f7fa7d564 100644
--- a/drivers/net/mctp/mctp-i3c.c
+++ b/drivers/net/mctp/mctp-i3c.c
@@ -14,6 +14,7 @@
 #include <linux/i3c/master.h>
 #include <linux/if_arp.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <net/mctp.h>
 #include <net/mctpdevice.h>
 
diff --git a/drivers/net/mctp/mctp-serial.c b/drivers/net/mctp/mctp-serial.c
index 5bf6fdff701c..254d80b65f64 100644
--- a/drivers/net/mctp/mctp-serial.c
+++ b/drivers/net/mctp/mctp-serial.c
@@ -17,6 +17,7 @@
 #include <linux/if_arp.h>
 #include <linux/module.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/workqueue.h>
 #include <linux/crc-ccitt.h>
diff --git a/drivers/net/mdio/mdio-aspeed.c b/drivers/net/mdio/mdio-aspeed.c
index c2170650415c..7c2fe8ea00ca 100644
--- a/drivers/net/mdio/mdio-aspeed.c
+++ b/drivers/net/mdio/mdio-aspeed.c
@@ -11,6 +11,7 @@
 #include <linux/of_mdio.h>
 #include <linux/phy.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define DRV_NAME "mdio-aspeed"
 
diff --git a/drivers/net/mdio/mdio-bcm-iproc.c b/drivers/net/mdio/mdio-bcm-iproc.c
index 5a2d26c6afdc..75d7a9b096bc 100644
--- a/drivers/net/mdio/mdio-bcm-iproc.c
+++ b/drivers/net/mdio/mdio-bcm-iproc.c
@@ -13,6 +13,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #define IPROC_GPHY_MDCDIV    0x1a
 
diff --git a/drivers/net/mdio/mdio-bcm-unimac.c b/drivers/net/mdio/mdio-bcm-unimac.c
index 68f8ee0ec8ba..c9d0260f0926 100644
--- a/drivers/net/mdio/mdio-bcm-unimac.c
+++ b/drivers/net/mdio/mdio-bcm-unimac.c
@@ -17,6 +17,7 @@
 #include <linux/platform_data/mdio-bcm-unimac.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #define MDIO_CMD		0x00
 #define  MDIO_START_BUSY	(1 << 29)
diff --git a/drivers/net/mdio/mdio-gpio.c b/drivers/net/mdio/mdio-gpio.c
index 778db310a28d..b7115c5b4e28 100644
--- a/drivers/net/mdio/mdio-gpio.c
+++ b/drivers/net/mdio/mdio-gpio.c
@@ -26,6 +26,7 @@
 #include <linux/platform_data/mdio-gpio.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct mdio_gpio_info {
 	struct mdiobb_ctrl ctrl;
diff --git a/drivers/net/mdio/mdio-hisi-femac.c b/drivers/net/mdio/mdio-hisi-femac.c
index 6703f626ee83..f0fefdeb6aaa 100644
--- a/drivers/net/mdio/mdio-hisi-femac.c
+++ b/drivers/net/mdio/mdio-hisi-femac.c
@@ -12,6 +12,7 @@
 #include <linux/of_address.h>
 #include <linux/of_mdio.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define MDIO_RWCTRL		0x00
 #define MDIO_RO_DATA		0x04
diff --git a/drivers/net/mdio/mdio-i2c.c b/drivers/net/mdio/mdio-i2c.c
index da2001ea1f99..d55e06302d56 100644
--- a/drivers/net/mdio/mdio-i2c.c
+++ b/drivers/net/mdio/mdio-i2c.c
@@ -14,6 +14,7 @@
 #include <linux/mdio/mdio-i2c.h>
 #include <linux/phy.h>
 #include <linux/sfp.h>
+#include <linux/sprintf.h>
 
 /*
  * I2C bus addresses 0x50 and 0x51 are normally an EEPROM, which is
diff --git a/drivers/net/mdio/mdio-ipq4019.c b/drivers/net/mdio/mdio-ipq4019.c
index 9d8f43b28aac..bffb088e5f45 100644
--- a/drivers/net/mdio/mdio-ipq4019.c
+++ b/drivers/net/mdio/mdio-ipq4019.c
@@ -12,6 +12,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/clk.h>
+#include <linux/sprintf.h>
 
 #define MDIO_MODE_REG				0x40
 #define   MDIO_MODE_MDC_MODE			BIT(12)
diff --git a/drivers/net/mdio/mdio-ipq8064.c b/drivers/net/mdio/mdio-ipq8064.c
index f71b6e1c66e4..4d18f303a5bf 100644
--- a/drivers/net/mdio/mdio-ipq8064.c
+++ b/drivers/net/mdio/mdio-ipq8064.c
@@ -12,6 +12,7 @@
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* MII address register definitions */
 #define MII_ADDR_REG_ADDR			0x10
diff --git a/drivers/net/mdio/mdio-moxart.c b/drivers/net/mdio/mdio-moxart.c
index d35af8cd7c4d..4afbfd39bb4c 100644
--- a/drivers/net/mdio/mdio-moxart.c
+++ b/drivers/net/mdio/mdio-moxart.c
@@ -12,6 +12,7 @@
 #include <linux/of_mdio.h>
 #include <linux/phy.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define REG_PHY_CTRL            0
 #define REG_PHY_WRITE_DATA      4
diff --git a/drivers/net/mdio/mdio-mscc-miim.c b/drivers/net/mdio/mdio-mscc-miim.c
index c29377c85307..74a3c5cdd43a 100644
--- a/drivers/net/mdio/mdio-mscc-miim.c
+++ b/drivers/net/mdio/mdio-mscc-miim.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #define MSCC_MIIM_REG_STATUS		0x0
 #define		MSCC_MIIM_STATUS_STAT_PENDING	BIT(2)
diff --git a/drivers/net/mdio/mdio-mux-bcm-iproc.c b/drivers/net/mdio/mdio-mux-bcm-iproc.c
index 1ce7d67ba72e..02aa14c17a6d 100644
--- a/drivers/net/mdio/mdio-mux-bcm-iproc.c
+++ b/drivers/net/mdio/mdio-mux-bcm-iproc.c
@@ -13,6 +13,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 
 #define MDIO_RATE_ADJ_EXT_OFFSET	0x000
 #define MDIO_RATE_ADJ_INT_OFFSET	0x004
diff --git a/drivers/net/mdio/mdio-mux-bcm6368.c b/drivers/net/mdio/mdio-mux-bcm6368.c
index 1b77e0e3e6e1..12780cb960ed 100644
--- a/drivers/net/mdio/mdio-mux-bcm6368.c
+++ b/drivers/net/mdio/mdio-mux-bcm6368.c
@@ -16,6 +16,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 
 #define MDIOC_REG		0x0
 #define MDIOC_EXT_MASK		BIT(16)
diff --git a/drivers/net/mdio/mdio-mux-meson-g12a.c b/drivers/net/mdio/mdio-mux-meson-g12a.c
index 754b0f2cf15b..cfc7846cffe0 100644
--- a/drivers/net/mdio/mdio-mux-meson-g12a.c
+++ b/drivers/net/mdio/mdio-mux-meson-g12a.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/phy.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define ETH_PLL_STS		0x40
 #define ETH_PLL_CTL0		0x44
diff --git a/drivers/net/mdio/mdio-mux-meson-gxl.c b/drivers/net/mdio/mdio-mux-meson-gxl.c
index 89554021b5cc..b3e680d27e2b 100644
--- a/drivers/net/mdio/mdio-mux-meson-gxl.c
+++ b/drivers/net/mdio/mdio-mux-meson-gxl.c
@@ -9,6 +9,7 @@
 #include <linux/io.h>
 #include <linux/mdio-mux.h>
 #include <linux/module.h>
+#include <linux/mod_devicetable.h>
 #include <linux/platform_device.h>
 
 #define ETH_REG2		0x0
diff --git a/drivers/net/mdio/mdio-mux-multiplexer.c b/drivers/net/mdio/mdio-mux-multiplexer.c
index 569b13383191..97e307d946a8 100644
--- a/drivers/net/mdio/mdio-mux-multiplexer.c
+++ b/drivers/net/mdio/mdio-mux-multiplexer.c
@@ -6,6 +6,7 @@
 
 #include <linux/mdio-mux.h>
 #include <linux/module.h>
+#include <linux/mod_devicetable.h>
 #include <linux/mux/consumer.h>
 #include <linux/platform_device.h>
 
diff --git a/drivers/net/mdio/mdio-mux.c b/drivers/net/mdio/mdio-mux.c
index fe0e46bd7964..9f0a3dd82241 100644
--- a/drivers/net/mdio/mdio-mux.c
+++ b/drivers/net/mdio/mdio-mux.c
@@ -9,6 +9,7 @@
 #include <linux/of_mdio.h>
 #include <linux/phy.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define DRV_DESCRIPTION "MDIO bus multiplexer driver"
 
diff --git a/drivers/net/mdio/mdio-mvusb.c b/drivers/net/mdio/mdio-mvusb.c
index 554837c21e73..afc8a467746c 100644
--- a/drivers/net/mdio/mdio-mvusb.c
+++ b/drivers/net/mdio/mdio-mvusb.c
@@ -4,6 +4,7 @@
 #include <linux/module.h>
 #include <linux/of_mdio.h>
 #include <linux/phy.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #define USB_MARVELL_VID	0x1286
diff --git a/drivers/net/mdio/mdio-octeon.c b/drivers/net/mdio/mdio-octeon.c
index 037a38cfed56..e11208a4bb54 100644
--- a/drivers/net/mdio/mdio-octeon.c
+++ b/drivers/net/mdio/mdio-octeon.c
@@ -10,6 +10,7 @@
 #include <linux/of_mdio.h>
 #include <linux/phy.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "mdio-cavium.h"
 
diff --git a/drivers/net/mdio/mdio-sun4i.c b/drivers/net/mdio/mdio-sun4i.c
index 4511bcc73b36..db9ee2292a44 100644
--- a/drivers/net/mdio/mdio-sun4i.c
+++ b/drivers/net/mdio/mdio-sun4i.c
@@ -18,6 +18,7 @@
 #include <linux/phy.h>
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #define EMAC_MAC_MCMD_REG	(0x00)
 #define EMAC_MAC_MADR_REG	(0x04)
diff --git a/drivers/net/mdio/mdio-thunder.c b/drivers/net/mdio/mdio-thunder.c
index 6067d96b2b7b..8796e5f99ad5 100644
--- a/drivers/net/mdio/mdio-thunder.c
+++ b/drivers/net/mdio/mdio-thunder.c
@@ -11,6 +11,7 @@
 #include <linux/of_mdio.h>
 #include <linux/pci.h>
 #include <linux/phy.h>
+#include <linux/sprintf.h>
 
 #include "mdio-cavium.h"
 
diff --git a/drivers/net/mdio/mdio-xgene.c b/drivers/net/mdio/mdio-xgene.c
index 2772a3098543..e4180f1b42d8 100644
--- a/drivers/net/mdio/mdio-xgene.c
+++ b/drivers/net/mdio/mdio-xgene.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/prefetch.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 
 u32 xgene_mdio_rd_mac(struct xgene_mdio_pdata *pdata, u32 rd_addr)
diff --git a/drivers/net/netconsole.c b/drivers/net/netconsole.c
index 0de108a1c0c8..2fa798800b0d 100644
--- a/drivers/net/netconsole.c
+++ b/drivers/net/netconsole.c
@@ -26,11 +26,13 @@
 
 #include <linux/mm.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/console.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/netpoll.h>
 #include <linux/inet.h>
diff --git a/drivers/net/netdevsim/bpf.c b/drivers/net/netdevsim/bpf.c
index 608953d4f98d..8ed3172edb6a 100644
--- a/drivers/net/netdevsim/bpf.c
+++ b/drivers/net/netdevsim/bpf.c
@@ -19,6 +19,7 @@
 #include <linux/kernel.h>
 #include <linux/mutex.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <net/pkt_cls.h>
 
 #include "netdevsim.h"
diff --git a/drivers/net/netdevsim/bus.c b/drivers/net/netdevsim/bus.c
index aedab1d9623a..e0cde7439f4a 100644
--- a/drivers/net/netdevsim/bus.c
+++ b/drivers/net/netdevsim/bus.c
@@ -7,10 +7,12 @@
 #include <linux/device.h>
 #include <linux/idr.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/mutex.h>
 #include <linux/refcount.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include "netdevsim.h"
diff --git a/drivers/net/netdevsim/dev.c b/drivers/net/netdevsim/dev.c
index 92a7a36b93ac..27a851c81b9c 100644
--- a/drivers/net/netdevsim/dev.c
+++ b/drivers/net/netdevsim/dev.c
@@ -18,13 +18,16 @@
 #include <linux/debugfs.h>
 #include <linux/device.h>
 #include <linux/etherdevice.h>
+#include <linux/hex.h>
 #include <linux/inet.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/mutex.h>
 #include <linux/random.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <net/devlink.h>
 #include <net/ip.h>
diff --git a/drivers/net/netdevsim/fib.c b/drivers/net/netdevsim/fib.c
index a1f91ff8ec56..509fe6b94ae2 100644
--- a/drivers/net/netdevsim/fib.c
+++ b/drivers/net/netdevsim/fib.c
@@ -20,6 +20,7 @@
 #include <linux/list.h>
 #include <linux/rhashtable.h>
 #include <linux/spinlock_types.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <net/fib_notifier.h>
 #include <net/inet_dscp.h>
diff --git a/drivers/net/netdevsim/hwstats.c b/drivers/net/netdevsim/hwstats.c
index 0e58aa7f0374..941c8bac26b8 100644
--- a/drivers/net/netdevsim/hwstats.c
+++ b/drivers/net/netdevsim/hwstats.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 
 #include "netdevsim.h"
 
diff --git a/drivers/net/netdevsim/ipsec.c b/drivers/net/netdevsim/ipsec.c
index f0d58092e7e9..a59e95a624a9 100644
--- a/drivers/net/netdevsim/ipsec.c
+++ b/drivers/net/netdevsim/ipsec.c
@@ -3,6 +3,7 @@
 
 #include <crypto/aead.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <net/xfrm.h>
 
 #include "netdevsim.h"
diff --git a/drivers/net/netdevsim/psample.c b/drivers/net/netdevsim/psample.c
index f0c6477dd0ae..b3c705322019 100644
--- a/drivers/net/netdevsim/psample.c
+++ b/drivers/net/netdevsim/psample.c
@@ -6,6 +6,7 @@
 #include <linux/etherdevice.h>
 #include <linux/inet.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/random.h>
 #include <linux/slab.h>
 #include <net/devlink.h>
diff --git a/drivers/net/phy/bcm-phy-ptp.c b/drivers/net/phy/bcm-phy-ptp.c
index 617d384d4551..eec82432213f 100644
--- a/drivers/net/phy/bcm-phy-ptp.c
+++ b/drivers/net/phy/bcm-phy-ptp.c
@@ -11,6 +11,7 @@
 #include <linux/ptp_clock_kernel.h>
 #include <linux/net_tstamp.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include "bcm-phy-lib.h"
diff --git a/drivers/net/phy/dp83640.c b/drivers/net/phy/dp83640.c
index 5c42c47dc564..ecc32fe90505 100644
--- a/drivers/net/phy/dp83640.c
+++ b/drivers/net/phy/dp83640.c
@@ -19,6 +19,7 @@
 #include <linux/phy.h>
 #include <linux/ptp_classify.h>
 #include <linux/ptp_clock_kernel.h>
+#include <linux/sprintf.h>
 
 #include "dp83640_reg.h"
 
diff --git a/drivers/net/phy/fixed_phy.c b/drivers/net/phy/fixed_phy.c
index aef739c20ac4..f7dd967f3465 100644
--- a/drivers/net/phy/fixed_phy.c
+++ b/drivers/net/phy/fixed_phy.c
@@ -22,6 +22,7 @@
 #include <linux/idr.h>
 #include <linux/netdevice.h>
 #include <linux/linkmode.h>
+#include <linux/sprintf.h>
 
 #include "swphy.h"
 
diff --git a/drivers/net/phy/micrel.c b/drivers/net/phy/micrel.c
index 9b6973581989..a4bcb723bf94 100644
--- a/drivers/net/phy/micrel.c
+++ b/drivers/net/phy/micrel.c
@@ -33,6 +33,7 @@
 #include <linux/ptp_classify.h>
 #include <linux/net_tstamp.h>
 #include <linux/gpio/consumer.h>
+#include <linux/sprintf.h>
 
 /* Operation Mode Strap Override */
 #define MII_KSZPHY_OMSO				0x16
diff --git a/drivers/net/phy/mscc/mscc_macsec.c b/drivers/net/phy/mscc/mscc_macsec.c
index 4f39ba63a9a9..26d33e0415bc 100644
--- a/drivers/net/phy/mscc/mscc_macsec.c
+++ b/drivers/net/phy/mscc/mscc_macsec.c
@@ -9,6 +9,7 @@
 
 #include <linux/phy.h>
 #include <dt-bindings/net/mscc-phy-vsc8531.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <crypto/aes.h>
 
diff --git a/drivers/net/phy/mscc/mscc_main.c b/drivers/net/phy/mscc/mscc_main.c
index 6f74ce0ab1aa..bc945e181601 100644
--- a/drivers/net/phy/mscc/mscc_main.c
+++ b/drivers/net/phy/mscc/mscc_main.c
@@ -19,6 +19,7 @@
 #include <dt-bindings/net/mscc-phy-vsc8531.h>
 #include "mscc_serdes.h"
 #include "mscc.h"
+#include <linux/sprintf.h>
 
 static const struct vsc85xx_hw_stat vsc85xx_hw_stats[] = {
 	{
diff --git a/drivers/net/phy/phy_device.c b/drivers/net/phy/phy_device.c
index 9f37c0bfbf8d..4b9e67a5a0bc 100644
--- a/drivers/net/phy/phy_device.c
+++ b/drivers/net/phy/phy_device.c
@@ -35,6 +35,7 @@
 #include <linux/sfp.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/uaccess.h>
 #include <linux/unistd.h>
diff --git a/drivers/net/phy/phy_led_triggers.c b/drivers/net/phy/phy_led_triggers.c
index f550576eb9da..4accf387d09a 100644
--- a/drivers/net/phy/phy_led_triggers.c
+++ b/drivers/net/phy/phy_led_triggers.c
@@ -4,6 +4,7 @@
 #include <linux/phy.h>
 #include <linux/phy_led_triggers.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 static struct phy_led_trigger *phy_speed_to_led_trigger(struct phy_device *phy,
 							unsigned int speed)
diff --git a/drivers/net/plip/plip.c b/drivers/net/plip/plip.c
index 40ce8abe6999..08e9d41c22f3 100644
--- a/drivers/net/plip/plip.c
+++ b/drivers/net/plip/plip.c
@@ -85,8 +85,11 @@ static const char version[] = "NET3 PLIP version 2.4-parport gniibe@mri.co.jp\n"
 */
 
 #include <linux/compat.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/interrupt.h>
diff --git a/drivers/net/ppp/ppp_async.c b/drivers/net/ppp/ppp_async.c
index 125793d8aefa..fb8f2b519d90 100644
--- a/drivers/net/ppp/ppp_async.c
+++ b/drivers/net/ppp/ppp_async.c
@@ -30,6 +30,7 @@
 #include <linux/jiffies.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <linux/uaccess.h>
 #include <asm/string.h>
 
diff --git a/drivers/net/ppp/ppp_generic.c b/drivers/net/ppp/ppp_generic.c
index 0193af2d31c9..a051424cc70f 100644
--- a/drivers/net/ppp/ppp_generic.c
+++ b/drivers/net/ppp/ppp_generic.c
@@ -36,6 +36,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/if_arp.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/spinlock.h>
 #include <linux/rwsem.h>
diff --git a/drivers/net/slip/slip.c b/drivers/net/slip/slip.c
index 0aba3569ccc0..192c7a98edd3 100644
--- a/drivers/net/slip/slip.c
+++ b/drivers/net/slip/slip.c
@@ -65,6 +65,7 @@
 #include <linux/compat.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 #include <linux/bitops.h>
diff --git a/drivers/net/thunderbolt/main.c b/drivers/net/thunderbolt/main.c
index 0a53ec293d04..256f27d62879 100644
--- a/drivers/net/thunderbolt/main.c
+++ b/drivers/net/thunderbolt/main.c
@@ -13,6 +13,7 @@
 #include <linux/highmem.h>
 #include <linux/if_vlan.h>
 #include <linux/jhash.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/etherdevice.h>
 #include <linux/rtnetlink.h>
diff --git a/drivers/net/usb/aqc111.c b/drivers/net/usb/aqc111.c
index 7b8afa589a53..b31ac4665f36 100644
--- a/drivers/net/usb/aqc111.c
+++ b/drivers/net/usb/aqc111.c
@@ -11,6 +11,7 @@
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
 #include <linux/mii.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/crc32.h>
 #include <linux/if_vlan.h>
diff --git a/drivers/net/usb/asix_devices.c b/drivers/net/usb/asix_devices.c
index f7cff58fe044..ed8c0e16054e 100644
--- a/drivers/net/usb/asix_devices.c
+++ b/drivers/net/usb/asix_devices.c
@@ -8,6 +8,7 @@
  */
 
 #include "asix.h"
+#include <linux/sprintf.h>
 
 #define PHY_MODE_MARVELL	0x0000
 #define MII_MARVELL_LED_CTRL	0x0018
diff --git a/drivers/net/usb/ax88172a.c b/drivers/net/usb/ax88172a.c
index e47bb125048d..c999a83f1781 100644
--- a/drivers/net/usb/ax88172a.c
+++ b/drivers/net/usb/ax88172a.c
@@ -14,6 +14,7 @@
 
 #include "asix.h"
 #include <linux/phy.h>
+#include <linux/sprintf.h>
 
 struct ax88172a_private {
 	struct mii_bus *mdio;
diff --git a/drivers/net/usb/cdc_ncm.c b/drivers/net/usb/cdc_ncm.c
index db05622f1f70..2337df89072d 100644
--- a/drivers/net/usb/cdc_ncm.c
+++ b/drivers/net/usb/cdc_ncm.c
@@ -44,6 +44,7 @@
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/mii.h>
 #include <linux/crc32.h>
diff --git a/drivers/net/usb/hso.c b/drivers/net/usb/hso.c
index f088ea2ba6f3..712c170c6535 100644
--- a/drivers/net/usb/hso.c
+++ b/drivers/net/usb/hso.c
@@ -45,6 +45,7 @@
 #include <linux/netdevice.h>
 #include <linux/module.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
diff --git a/drivers/net/usb/lan78xx.c b/drivers/net/usb/lan78xx.c
index 106282612bc2..dbdd15b5da44 100644
--- a/drivers/net/usb/lan78xx.c
+++ b/drivers/net/usb/lan78xx.c
@@ -6,6 +6,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/crc32.h>
 #include <linux/signal.h>
diff --git a/drivers/net/usb/pegasus.c b/drivers/net/usb/pegasus.c
index 81ca64debc5b..7f0a42acda10 100644
--- a/drivers/net/usb/pegasus.c
+++ b/drivers/net/usb/pegasus.c
@@ -8,6 +8,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
diff --git a/drivers/net/usb/qmi_wwan.c b/drivers/net/usb/qmi_wwan.c
index e2e181378f41..cfcf27dce0a5 100644
--- a/drivers/net/usb/qmi_wwan.c
+++ b/drivers/net/usb/qmi_wwan.c
@@ -16,6 +16,7 @@
 #include <linux/kstrtox.h>
 #include <linux/mii.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/cdc.h>
 #include <linux/usb/usbnet.h>
diff --git a/drivers/net/usb/r8152.c b/drivers/net/usb/r8152.c
index 3d806b3ff425..a155d6747bcf 100644
--- a/drivers/net/usb/r8152.c
+++ b/drivers/net/usb/r8152.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
+#include <linux/hex.h>
 #include <linux/mii.h>
 #include <linux/ethtool.h>
 #include <linux/usb.h>
diff --git a/drivers/net/usb/smsc95xx.c b/drivers/net/usb/smsc95xx.c
index a530f20ee257..580897cf4d48 100644
--- a/drivers/net/usb/smsc95xx.c
+++ b/drivers/net/usb/smsc95xx.c
@@ -11,6 +11,7 @@
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
 #include <linux/mii.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/bitrev.h>
 #include <linux/crc16.h>
diff --git a/drivers/net/usb/usbnet.c b/drivers/net/usb/usbnet.c
index 2d14b0d78541..263e542b234c 100644
--- a/drivers/net/usb/usbnet.c
+++ b/drivers/net/usb/usbnet.c
@@ -23,6 +23,7 @@
 #include <linux/etherdevice.h>
 #include <linux/ctype.h>
 #include <linux/ethtool.h>
+#include <linux/hex.h>
 #include <linux/workqueue.h>
 #include <linux/mii.h>
 #include <linux/usb.h>
diff --git a/drivers/net/veth.c b/drivers/net/veth.c
index 578e36ea1589..256a21aa0fee 100644
--- a/drivers/net/veth.c
+++ b/drivers/net/veth.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/ethtool.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 #include <linux/u64_stats_sync.h>
 
 #include <net/rtnetlink.h>
diff --git a/drivers/net/virtio_net.c b/drivers/net/virtio_net.c
index d7ce4a1011ea..b3cac0bc7723 100644
--- a/drivers/net/virtio_net.c
+++ b/drivers/net/virtio_net.c
@@ -8,6 +8,7 @@
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_net.h>
 #include <linux/bpf.h>
diff --git a/drivers/net/vmxnet3/vmxnet3_drv.c b/drivers/net/vmxnet3/vmxnet3_drv.c
index 0578864792b6..7aad60db5e89 100644
--- a/drivers/net/vmxnet3/vmxnet3_drv.c
+++ b/drivers/net/vmxnet3/vmxnet3_drv.c
@@ -25,6 +25,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/ip6_checksum.h>
 
 #include "vmxnet3_int.h"
diff --git a/drivers/net/wan/c101.c b/drivers/net/wan/c101.c
index 8dd14d916c3a..0e712861b3e2 100644
--- a/drivers/net/wan/c101.c
+++ b/drivers/net/wan/c101.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/capability.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/types.h>
 #include <linux/string.h>
diff --git a/drivers/net/wan/hdlc_ppp.c b/drivers/net/wan/hdlc_ppp.c
index 37a3c989cba1..da51a7ddab5c 100644
--- a/drivers/net/wan/hdlc_ppp.c
+++ b/drivers/net/wan/hdlc_ppp.c
@@ -18,6 +18,7 @@
 #include <linux/skbuff.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #define DEBUG_CP		0 /* also bytes# to dump */
 #define DEBUG_STATE		0
diff --git a/drivers/net/wan/n2.c b/drivers/net/wan/n2.c
index f3e80722ba1d..45dd8d2e8342 100644
--- a/drivers/net/wan/n2.c
+++ b/drivers/net/wan/n2.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/capability.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
diff --git a/drivers/net/wireless/ath/ar5523/ar5523.c b/drivers/net/wireless/ath/ar5523/ar5523.c
index 815f8f599f5d..70b7dd2d3ce6 100644
--- a/drivers/net/wireless/ath/ar5523/ar5523.c
+++ b/drivers/net/wireless/ath/ar5523/ar5523.c
@@ -25,6 +25,7 @@
  * that and only has minimal functionality.
  */
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/list.h>
diff --git a/drivers/net/wireless/ath/ath10k/ce.c b/drivers/net/wireless/ath/ath10k/ce.c
index afae4a8027f8..b1a261f5f9b4 100644
--- a/drivers/net/wireless/ath/ath10k/ce.c
+++ b/drivers/net/wireless/ath/ath10k/ce.c
@@ -9,6 +9,7 @@
 #include "hif.h"
 #include "ce.h"
 #include "debug.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * Support for Copy Engine hardware, which is mainly used for
diff --git a/drivers/net/wireless/ath/ath10k/core.c b/drivers/net/wireless/ath/ath10k/core.c
index 9ce6f49ab261..5bce95def6a0 100644
--- a/drivers/net/wireless/ath/ath10k/core.c
+++ b/drivers/net/wireless/ath/ath10k/core.c
@@ -15,6 +15,8 @@
 #include <linux/pm_qos.h>
 #include <linux/nvmem-consumer.h>
 #include <asm/byteorder.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include "mac.h"
diff --git a/drivers/net/wireless/ath/ath10k/debug.c b/drivers/net/wireless/ath/ath10k/debug.c
index b93a64bf8190..514cd2ac0872 100644
--- a/drivers/net/wireless/ath/ath10k/debug.c
+++ b/drivers/net/wireless/ath/ath10k/debug.c
@@ -8,10 +8,13 @@
 
 #include <linux/module.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/crc32.h>
 #include <linux/firmware.h>
 #include <linux/kstrtox.h>
+#include <linux/completion.h>
 
 #include "core.h"
 #include "debug.h"
diff --git a/drivers/net/wireless/ath/ath10k/debugfs_sta.c b/drivers/net/wireless/ath/ath10k/debugfs_sta.c
index 394bf3c32abf..aa51d27065eb 100644
--- a/drivers/net/wireless/ath/ath10k/debugfs_sta.c
+++ b/drivers/net/wireless/ath/ath10k/debugfs_sta.c
@@ -9,6 +9,8 @@
 #include "wmi-ops.h"
 #include "txrx.h"
 #include "debug.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static void ath10k_rx_stats_update_amsdu_subfrm(struct ath10k *ar,
 						struct ath10k_sta_tid_stats *stats,
diff --git a/drivers/net/wireless/ath/ath10k/htc.c b/drivers/net/wireless/ath/ath10k/htc.c
index a6e21ce90bad..ab1ba7ce9e79 100644
--- a/drivers/net/wireless/ath/ath10k/htc.c
+++ b/drivers/net/wireless/ath/ath10k/htc.c
@@ -8,6 +8,7 @@
 #include "core.h"
 #include "hif.h"
 #include "debug.h"
+#include <linux/completion.h>
 
 /********/
 /* Send */
diff --git a/drivers/net/wireless/ath/ath10k/htt.c b/drivers/net/wireless/ath/ath10k/htt.c
index dbaf262cd7c1..a614cfbb6761 100644
--- a/drivers/net/wireless/ath/ath10k/htt.c
+++ b/drivers/net/wireless/ath/ath10k/htt.c
@@ -7,6 +7,7 @@
 
 #include <linux/slab.h>
 #include <linux/if_ether.h>
+#include <linux/completion.h>
 
 #include "htt.h"
 #include "core.h"
diff --git a/drivers/net/wireless/ath/ath10k/htt_rx.c b/drivers/net/wireless/ath/ath10k/htt_rx.c
index 7d28ae5453cf..e95e346e23bf 100644
--- a/drivers/net/wireless/ath/ath10k/htt_rx.c
+++ b/drivers/net/wireless/ath/ath10k/htt_rx.c
@@ -13,6 +13,8 @@
 #include "debug.h"
 #include "trace.h"
 #include "mac.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/log2.h>
 #include <linux/bitfield.h>
diff --git a/drivers/net/wireless/ath/ath10k/htt_tx.c b/drivers/net/wireless/ath/ath10k/htt_tx.c
index 9725feecefd6..e35f2cca1959 100644
--- a/drivers/net/wireless/ath/ath10k/htt_tx.c
+++ b/drivers/net/wireless/ath/ath10k/htt_tx.c
@@ -11,6 +11,7 @@
 #include "hif.h"
 #include "txrx.h"
 #include "debug.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static u8 ath10k_htt_tx_txq_calc_size(size_t count)
 {
diff --git a/drivers/net/wireless/ath/ath10k/mac.c b/drivers/net/wireless/ath/ath10k/mac.c
index 41053219ee95..9435857b3791 100644
--- a/drivers/net/wireless/ath/ath10k/mac.c
+++ b/drivers/net/wireless/ath/ath10k/mac.c
@@ -7,6 +7,7 @@
  */
 
 #include "mac.h"
+#include <linux/completion.h>
 
 #include <net/cfg80211.h>
 #include <net/mac80211.h>
diff --git a/drivers/net/wireless/ath/ath10k/pci.c b/drivers/net/wireless/ath/ath10k/pci.c
index 5c34b156b4ff..cc1313bc0b1b 100644
--- a/drivers/net/wireless/ath/ath10k/pci.c
+++ b/drivers/net/wireless/ath/ath10k/pci.c
@@ -10,6 +10,7 @@
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include "debug.h"
diff --git a/drivers/net/wireless/ath/ath10k/sdio.c b/drivers/net/wireless/ath/ath10k/sdio.c
index 0ab5433f6cf6..80f84c8e77f8 100644
--- a/drivers/net/wireless/ath/ath10k/sdio.c
+++ b/drivers/net/wireless/ath/ath10k/sdio.c
@@ -25,6 +25,8 @@
 #include "trace.h"
 #include "sdio.h"
 #include "coredump.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 void ath10k_sdio_fw_crashed_dump(struct ath10k *ar);
 
diff --git a/drivers/net/wireless/ath/ath10k/snoc.c b/drivers/net/wireless/ath/ath10k/snoc.c
index a1db5a973780..98c20c13b0a9 100644
--- a/drivers/net/wireless/ath/ath10k/snoc.c
+++ b/drivers/net/wireless/ath/ath10k/snoc.c
@@ -5,6 +5,7 @@
 
 #include <linux/bits.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/of.h>
@@ -15,6 +16,7 @@
 #include <linux/remoteproc/qcom_rproc.h>
 #include <linux/of_address.h>
 #include <linux/iommu.h>
+#include <linux/sprintf.h>
 
 #include "ce.h"
 #include "coredump.h"
diff --git a/drivers/net/wireless/ath/ath10k/spectral.c b/drivers/net/wireless/ath/ath10k/spectral.c
index 2240994390ed..f50413e5fa23 100644
--- a/drivers/net/wireless/ath/ath10k/spectral.c
+++ b/drivers/net/wireless/ath/ath10k/spectral.c
@@ -7,6 +7,8 @@
 #include "core.h"
 #include "debug.h"
 #include "wmi-ops.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static void send_fft_sample(struct ath10k *ar,
 			    const struct fft_sample_tlv *fft_sample_tlv)
diff --git a/drivers/net/wireless/ath/ath10k/testmode.c b/drivers/net/wireless/ath/ath10k/testmode.c
index 7a9b9bbcdbfc..9ffc37d65658 100644
--- a/drivers/net/wireless/ath/ath10k/testmode.c
+++ b/drivers/net/wireless/ath/ath10k/testmode.c
@@ -4,6 +4,7 @@
  */
 
 #include "testmode.h"
+#include <linux/sprintf.h>
 
 #include <net/netlink.h>
 #include <linux/firmware.h>
diff --git a/drivers/net/wireless/ath/ath10k/thermal.c b/drivers/net/wireless/ath/ath10k/thermal.c
index 31c8d7fbb095..a99e169e284c 100644
--- a/drivers/net/wireless/ath/ath10k/thermal.c
+++ b/drivers/net/wireless/ath/ath10k/thermal.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/thermal.h>
 #include <linux/hwmon.h>
@@ -12,6 +13,7 @@
 #include "core.h"
 #include "debug.h"
 #include "wmi-ops.h"
+#include <linux/completion.h>
 
 static int
 ath10k_thermal_get_max_throttle_state(struct thermal_cooling_device *cdev,
diff --git a/drivers/net/wireless/ath/ath10k/txrx.c b/drivers/net/wireless/ath/ath10k/txrx.c
index da3bc35e41aa..84acc63204ff 100644
--- a/drivers/net/wireless/ath/ath10k/txrx.c
+++ b/drivers/net/wireless/ath/ath10k/txrx.c
@@ -10,6 +10,7 @@
 #include "htt.h"
 #include "mac.h"
 #include "debug.h"
+#include <linux/completion.h>
 
 static void ath10k_report_offchan_tx(struct ath10k *ar, struct sk_buff *skb)
 {
diff --git a/drivers/net/wireless/ath/ath10k/wmi-tlv.c b/drivers/net/wireless/ath/ath10k/wmi-tlv.c
index aed97fd121ba..1dacd7f04371 100644
--- a/drivers/net/wireless/ath/ath10k/wmi-tlv.c
+++ b/drivers/net/wireless/ath/ath10k/wmi-tlv.c
@@ -15,6 +15,8 @@
 #include "p2p.h"
 #include "testmode.h"
 #include <linux/bitfield.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /***************/
 /* TLV helpers */
diff --git a/drivers/net/wireless/ath/ath10k/wmi.c b/drivers/net/wireless/ath/ath10k/wmi.c
index ddf15717d504..c66bda4f0e4d 100644
--- a/drivers/net/wireless/ath/ath10k/wmi.c
+++ b/drivers/net/wireless/ath/ath10k/wmi.c
@@ -8,6 +8,8 @@
 
 #include <linux/skbuff.h>
 #include <linux/ctype.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include "htc.h"
diff --git a/drivers/net/wireless/ath/ath10k/wow.c b/drivers/net/wireless/ath/ath10k/wow.c
index aa7b2e703f3d..64dcada400ca 100644
--- a/drivers/net/wireless/ath/ath10k/wow.c
+++ b/drivers/net/wireless/ath/ath10k/wow.c
@@ -6,6 +6,7 @@
  */
 
 #include "mac.h"
+#include <linux/completion.h>
 
 #include <net/mac80211.h>
 #include "hif.h"
diff --git a/drivers/net/wireless/ath/ath11k/ahb.c b/drivers/net/wireless/ath/ath11k/ahb.c
index 7c0a23517949..856b647f8790 100644
--- a/drivers/net/wireless/ath/ath11k/ahb.c
+++ b/drivers/net/wireless/ath/ath11k/ahb.c
@@ -10,12 +10,14 @@
 #include <linux/of_device.h>
 #include <linux/of.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of_address.h>
 #include <linux/iommu.h>
 #include "ahb.h"
 #include "debug.h"
 #include "hif.h"
 #include "qmi.h"
+#include <linux/completion.h>
 #include <linux/remoteproc.h>
 #include "pcic.h"
 #include <linux/soc/qcom/smem.h>
diff --git a/drivers/net/wireless/ath/ath11k/core.c b/drivers/net/wireless/ath/ath11k/core.c
index 0c6ecbb9a066..c7e922f7ac0b 100644
--- a/drivers/net/wireless/ath/ath11k/core.c
+++ b/drivers/net/wireless/ath/ath11k/core.c
@@ -9,6 +9,8 @@
 #include <linux/remoteproc.h>
 #include <linux/firmware.h>
 #include <linux/of.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include "dp_tx.h"
diff --git a/drivers/net/wireless/ath/ath11k/core.h b/drivers/net/wireless/ath/ath11k/core.h
index 0b2d4a93d706..bca5a0dd39e2 100644
--- a/drivers/net/wireless/ath/ath11k/core.h
+++ b/drivers/net/wireless/ath/ath11k/core.h
@@ -16,6 +16,7 @@
 #include <linux/rhashtable.h>
 #include <linux/average.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 
 #include "qmi.h"
 #include "htc.h"
diff --git a/drivers/net/wireless/ath/ath11k/dbring.c b/drivers/net/wireless/ath/ath11k/dbring.c
index fbb6e8d8a476..6d5aca1d1287 100644
--- a/drivers/net/wireless/ath/ath11k/dbring.c
+++ b/drivers/net/wireless/ath/ath11k/dbring.c
@@ -6,6 +6,7 @@
 
 #include "core.h"
 #include "debug.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define ATH11K_DB_MAGIC_VALUE 0xdeadbeaf
 
diff --git a/drivers/net/wireless/ath/ath11k/debug.c b/drivers/net/wireless/ath/ath11k/debug.c
index 2b8544355fc1..b0789b1a1f59 100644
--- a/drivers/net/wireless/ath/ath11k/debug.c
+++ b/drivers/net/wireless/ath/ath11k/debug.c
@@ -7,6 +7,7 @@
 #include <linux/vmalloc.h>
 #include "core.h"
 #include "debug.h"
+#include <linux/sprintf.h>
 
 void ath11k_info(struct ath11k_base *ab, const char *fmt, ...)
 {
diff --git a/drivers/net/wireless/ath/ath11k/debugfs.c b/drivers/net/wireless/ath/ath11k/debugfs.c
index a48e737ef35d..0d175d7caaa8 100644
--- a/drivers/net/wireless/ath/ath11k/debugfs.c
+++ b/drivers/net/wireless/ath/ath11k/debugfs.c
@@ -5,6 +5,10 @@
  */
 
 #include <linux/vmalloc.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "debugfs.h"
 
diff --git a/drivers/net/wireless/ath/ath11k/debugfs_htt_stats.c b/drivers/net/wireless/ath/ath11k/debugfs_htt_stats.c
index 870e86a31bf8..d4e4813d5377 100644
--- a/drivers/net/wireless/ath/ath11k/debugfs_htt_stats.c
+++ b/drivers/net/wireless/ath/ath11k/debugfs_htt_stats.c
@@ -10,6 +10,8 @@
 #include "dp_rx.h"
 #include "debug.h"
 #include "debugfs_htt_stats.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define HTT_MAX_PRINT_CHAR_PER_ELEM 15
 
diff --git a/drivers/net/wireless/ath/ath11k/debugfs_sta.c b/drivers/net/wireless/ath/ath11k/debugfs_sta.c
index f56a24b6c8da..bd9b90163b04 100644
--- a/drivers/net/wireless/ath/ath11k/debugfs_sta.c
+++ b/drivers/net/wireless/ath/ath11k/debugfs_sta.c
@@ -5,6 +5,8 @@
  */
 
 #include <linux/vmalloc.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "debugfs_sta.h"
 #include "core.h"
diff --git a/drivers/net/wireless/ath/ath11k/dp_rx.c b/drivers/net/wireless/ath/ath11k/dp_rx.c
index afd481f5858f..d7112eb27a42 100644
--- a/drivers/net/wireless/ath/ath11k/dp_rx.c
+++ b/drivers/net/wireless/ath/ath11k/dp_rx.c
@@ -18,6 +18,7 @@
 #include "hal_rx.h"
 #include "dp_tx.h"
 #include "peer.h"
+#include <linux/completion.h>
 
 #define ATH11K_DP_RX_FRAGMENT_TIMEOUT_MS (2 * HZ)
 
diff --git a/drivers/net/wireless/ath/ath11k/dp_tx.c b/drivers/net/wireless/ath/ath11k/dp_tx.c
index 272b1c35f98d..4c051f35e9c9 100644
--- a/drivers/net/wireless/ath/ath11k/dp_tx.c
+++ b/drivers/net/wireless/ath/ath11k/dp_tx.c
@@ -11,6 +11,8 @@
 #include "hw.h"
 #include "peer.h"
 #include "mac.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static enum hal_tcl_encap_type
 ath11k_dp_tx_get_encap_type(struct ath11k_vif *arvif, struct sk_buff *skb)
diff --git a/drivers/net/wireless/ath/ath11k/hal_rx.c b/drivers/net/wireless/ath/ath11k/hal_rx.c
index 8f7dd43dc1bd..6bd5c13ecb02 100644
--- a/drivers/net/wireless/ath/ath11k/hal_rx.c
+++ b/drivers/net/wireless/ath/ath11k/hal_rx.c
@@ -10,6 +10,7 @@
 #include "hal_rx.h"
 #include "hal_desc.h"
 #include "hif.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void ath11k_hal_reo_set_desc_hdr(struct hal_desc_header *hdr,
 					u8 owner, u8 buffer_type, u32 magic)
diff --git a/drivers/net/wireless/ath/ath11k/htc.c b/drivers/net/wireless/ath/ath11k/htc.c
index 23054ab29a5e..d98e8dfebdc5 100644
--- a/drivers/net/wireless/ath/ath11k/htc.c
+++ b/drivers/net/wireless/ath/ath11k/htc.c
@@ -5,6 +5,7 @@
  */
 #include <linux/skbuff.h>
 #include <linux/ctype.h>
+#include <linux/completion.h>
 
 #include "debug.h"
 #include "hif.h"
diff --git a/drivers/net/wireless/ath/ath11k/mac.c b/drivers/net/wireless/ath/ath11k/mac.c
index f7cab50bdfd1..30f3e607d414 100644
--- a/drivers/net/wireless/ath/ath11k/mac.c
+++ b/drivers/net/wireless/ath/ath11k/mac.c
@@ -8,6 +8,7 @@
 #include <net/cfg80211.h>
 #include <linux/etherdevice.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/inetdevice.h>
 #include <net/if_inet6.h>
 #include <net/ipv6.h>
diff --git a/drivers/net/wireless/ath/ath11k/peer.c b/drivers/net/wireless/ath/ath11k/peer.c
index 6d0126c39301..23d8cb31a37b 100644
--- a/drivers/net/wireless/ath/ath11k/peer.c
+++ b/drivers/net/wireless/ath/ath11k/peer.c
@@ -7,6 +7,7 @@
 #include "core.h"
 #include "peer.h"
 #include "debug.h"
+#include <linux/completion.h>
 
 static struct ath11k_peer *ath11k_peer_find_list_by_id(struct ath11k_base *ab,
 						       int peer_id)
diff --git a/drivers/net/wireless/ath/ath11k/qmi.c b/drivers/net/wireless/ath/ath11k/qmi.c
index 2c7cab62b9bb..92ae1000cdd9 100644
--- a/drivers/net/wireless/ath/ath11k/qmi.c
+++ b/drivers/net/wireless/ath/ath11k/qmi.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/elf.h>
+#include <linux/sprintf.h>
 
 #include "qmi.h"
 #include "core.h"
diff --git a/drivers/net/wireless/ath/ath11k/reg.c b/drivers/net/wireless/ath/ath11k/reg.c
index 737fcd450d4b..a2cfec0df22f 100644
--- a/drivers/net/wireless/ath/ath11k/reg.c
+++ b/drivers/net/wireless/ath/ath11k/reg.c
@@ -4,6 +4,7 @@
  * Copyright (c) 2021-2023 Qualcomm Innovation Center, Inc. All rights reserved.
  */
 #include <linux/rtnetlink.h>
+#include <linux/completion.h>
 
 #include "core.h"
 #include "debug.h"
diff --git a/drivers/net/wireless/ath/ath11k/spectral.c b/drivers/net/wireless/ath/ath11k/spectral.c
index 79e091134515..659fbc1c3b52 100644
--- a/drivers/net/wireless/ath/ath11k/spectral.c
+++ b/drivers/net/wireless/ath/ath11k/spectral.c
@@ -7,6 +7,8 @@
 #include <linux/relay.h>
 #include "core.h"
 #include "debug.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define ATH11K_SPECTRAL_NUM_RESP_PER_EVENT	2
 #define ATH11K_SPECTRAL_EVENT_TIMEOUT_MS	1
diff --git a/drivers/net/wireless/ath/ath11k/thermal.c b/drivers/net/wireless/ath/ath11k/thermal.c
index c29b11ab5bfa..f2a6c67e04b3 100644
--- a/drivers/net/wireless/ath/ath11k/thermal.c
+++ b/drivers/net/wireless/ath/ath11k/thermal.c
@@ -5,12 +5,14 @@
  */
 
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/thermal.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include "core.h"
 #include "debug.h"
+#include <linux/completion.h>
 
 static int
 ath11k_thermal_get_max_throttle_state(struct thermal_cooling_device *cdev,
diff --git a/drivers/net/wireless/ath/ath11k/trace.h b/drivers/net/wireless/ath/ath11k/trace.h
index 235ab8ea715f..0425b678893c 100644
--- a/drivers/net/wireless/ath/ath11k/trace.h
+++ b/drivers/net/wireless/ath/ath11k/trace.h
@@ -8,6 +8,7 @@
 
 #include <linux/tracepoint.h>
 #include "core.h"
+#include <linux/sprintf.h>
 
 #define _TRACE_H_
 
diff --git a/drivers/net/wireless/ath/ath11k/wmi.c b/drivers/net/wireless/ath/ath11k/wmi.c
index 3c9f3b0bcfaa..2ad4cfa41db2 100644
--- a/drivers/net/wireless/ath/ath11k/wmi.c
+++ b/drivers/net/wireless/ath/ath11k/wmi.c
@@ -5,6 +5,8 @@
  */
 #include <linux/skbuff.h>
 #include <linux/ctype.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include <net/cfg80211.h>
 #include <linux/completion.h>
diff --git a/drivers/net/wireless/ath/ath11k/wow.c b/drivers/net/wireless/ath/ath11k/wow.c
index 99d8ba45a75b..b437502f8a3c 100644
--- a/drivers/net/wireless/ath/ath11k/wow.c
+++ b/drivers/net/wireless/ath/ath11k/wow.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/completion.h>
 
 #include "mac.h"
 
diff --git a/drivers/net/wireless/ath/ath12k/core.c b/drivers/net/wireless/ath/ath12k/core.c
index 1baad3302157..eef180c415b0 100644
--- a/drivers/net/wireless/ath/ath12k/core.c
+++ b/drivers/net/wireless/ath/ath12k/core.c
@@ -14,6 +14,8 @@
 #include "dp_rx.h"
 #include "debug.h"
 #include "hif.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 unsigned int ath12k_debug_mask;
 module_param_named(debug_mask, ath12k_debug_mask, uint, 0644);
diff --git a/drivers/net/wireless/ath/ath12k/core.h b/drivers/net/wireless/ath/ath12k/core.h
index 5c6c1e2eddb6..ee21abd2eb37 100644
--- a/drivers/net/wireless/ath/ath12k/core.h
+++ b/drivers/net/wireless/ath/ath12k/core.h
@@ -24,6 +24,7 @@
 #include "hal_rx.h"
 #include "reg.h"
 #include "dbring.h"
+#include <linux/sprintf.h>
 
 #define SM(_v, _f) (((_v) << _f##_LSB) & _f##_MASK)
 
diff --git a/drivers/net/wireless/ath/ath12k/dbring.c b/drivers/net/wireless/ath/ath12k/dbring.c
index 788160c84c68..72b6ac21c1d6 100644
--- a/drivers/net/wireless/ath/ath12k/dbring.c
+++ b/drivers/net/wireless/ath/ath12k/dbring.c
@@ -6,6 +6,7 @@
 
 #include "core.h"
 #include "debug.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int ath12k_dbring_bufs_replenish(struct ath12k *ar,
 					struct ath12k_dbring *ring,
diff --git a/drivers/net/wireless/ath/ath12k/debug.c b/drivers/net/wireless/ath/ath12k/debug.c
index fe5a732ba9ec..d6edcd2585a0 100644
--- a/drivers/net/wireless/ath/ath12k/debug.c
+++ b/drivers/net/wireless/ath/ath12k/debug.c
@@ -7,6 +7,7 @@
 #include <linux/vmalloc.h>
 #include "core.h"
 #include "debug.h"
+#include <linux/sprintf.h>
 
 void ath12k_info(struct ath12k_base *ab, const char *fmt, ...)
 {
diff --git a/drivers/net/wireless/ath/ath12k/dp_mon.c b/drivers/net/wireless/ath/ath12k/dp_mon.c
index 2432ab605c85..121e0b7d90c5 100644
--- a/drivers/net/wireless/ath/ath12k/dp_mon.c
+++ b/drivers/net/wireless/ath/ath12k/dp_mon.c
@@ -9,6 +9,7 @@
 #include "dp_rx.h"
 #include "dp_tx.h"
 #include "peer.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void ath12k_dp_mon_rx_handle_ofdma_info(void *rx_tlv,
 					       struct hal_rx_user_status *rx_user_status)
diff --git a/drivers/net/wireless/ath/ath12k/dp_rx.c b/drivers/net/wireless/ath/ath12k/dp_rx.c
index a31c24b54851..9df21731fffe 100644
--- a/drivers/net/wireless/ath/ath12k/dp_rx.c
+++ b/drivers/net/wireless/ath/ath12k/dp_rx.c
@@ -17,6 +17,7 @@
 #include "dp_tx.h"
 #include "peer.h"
 #include "dp_mon.h"
+#include <linux/completion.h>
 
 #define ATH12K_DP_RX_FRAGMENT_TIMEOUT_MS (2 * HZ)
 
diff --git a/drivers/net/wireless/ath/ath12k/dp_tx.c b/drivers/net/wireless/ath/ath12k/dp_tx.c
index d4db94112deb..977f050b62c3 100644
--- a/drivers/net/wireless/ath/ath12k/dp_tx.c
+++ b/drivers/net/wireless/ath/ath12k/dp_tx.c
@@ -8,6 +8,8 @@
 #include "dp_tx.h"
 #include "debug.h"
 #include "hw.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static enum hal_tcl_encap_type
 ath12k_dp_tx_get_encap_type(struct ath12k_vif *arvif, struct sk_buff *skb)
diff --git a/drivers/net/wireless/ath/ath12k/hal_rx.c b/drivers/net/wireless/ath/ath12k/hal_rx.c
index f7c1aaa3b5d4..e2d1d5c66b48 100644
--- a/drivers/net/wireless/ath/ath12k/hal_rx.c
+++ b/drivers/net/wireless/ath/ath12k/hal_rx.c
@@ -10,6 +10,7 @@
 #include "hal_rx.h"
 #include "hal_desc.h"
 #include "hif.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static void ath12k_hal_reo_set_desc_hdr(struct hal_desc_header *hdr,
 					u8 owner, u8 buffer_type, u32 magic)
diff --git a/drivers/net/wireless/ath/ath12k/htc.c b/drivers/net/wireless/ath/ath12k/htc.c
index 23f7428abd95..635d5086ca23 100644
--- a/drivers/net/wireless/ath/ath12k/htc.c
+++ b/drivers/net/wireless/ath/ath12k/htc.c
@@ -5,6 +5,7 @@
  */
 #include <linux/skbuff.h>
 #include <linux/ctype.h>
+#include <linux/completion.h>
 
 #include "debug.h"
 #include "hif.h"
diff --git a/drivers/net/wireless/ath/ath12k/mac.c b/drivers/net/wireless/ath/ath12k/mac.c
index 18fb42c045cc..c87b5df69e20 100644
--- a/drivers/net/wireless/ath/ath12k/mac.c
+++ b/drivers/net/wireless/ath/ath12k/mac.c
@@ -14,6 +14,7 @@
 #include "dp_tx.h"
 #include "dp_rx.h"
 #include "peer.h"
+#include <linux/completion.h>
 
 #define CHAN2G(_channel, _freq, _flags) { \
 	.band                   = NL80211_BAND_2GHZ, \
diff --git a/drivers/net/wireless/ath/ath12k/peer.c b/drivers/net/wireless/ath/ath12k/peer.c
index 19c0626fbff1..a5925edd41c3 100644
--- a/drivers/net/wireless/ath/ath12k/peer.c
+++ b/drivers/net/wireless/ath/ath12k/peer.c
@@ -7,6 +7,7 @@
 #include "core.h"
 #include "peer.h"
 #include "debug.h"
+#include <linux/completion.h>
 
 struct ath12k_peer *ath12k_peer_find(struct ath12k_base *ab, int vdev_id,
 				     const u8 *addr)
diff --git a/drivers/net/wireless/ath/ath12k/qmi.c b/drivers/net/wireless/ath/ath12k/qmi.c
index 69f56400367c..83e7a408c1ec 100644
--- a/drivers/net/wireless/ath/ath12k/qmi.c
+++ b/drivers/net/wireless/ath/ath12k/qmi.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/elf.h>
+#include <linux/sprintf.h>
 
 #include "qmi.h"
 #include "core.h"
diff --git a/drivers/net/wireless/ath/ath12k/wmi.c b/drivers/net/wireless/ath/ath12k/wmi.c
index 75c3a0d9b9ec..cf521bef8618 100644
--- a/drivers/net/wireless/ath/ath12k/wmi.c
+++ b/drivers/net/wireless/ath/ath12k/wmi.c
@@ -5,6 +5,7 @@
  */
 #include <linux/skbuff.h>
 #include <linux/ctype.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <net/mac80211.h>
 #include <net/cfg80211.h>
 #include <linux/completion.h>
diff --git a/drivers/net/wireless/ath/ath5k/debug.c b/drivers/net/wireless/ath/ath5k/debug.c
index ec130510aeb2..60effe7ef83e 100644
--- a/drivers/net/wireless/ath/ath5k/debug.c
+++ b/drivers/net/wireless/ath/ath5k/debug.c
@@ -62,6 +62,7 @@
 
 #include <linux/export.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <linux/seq_file.h>
diff --git a/drivers/net/wireless/ath/ath5k/led.c b/drivers/net/wireless/ath/ath5k/led.c
index 439052984796..c3d2c051f989 100644
--- a/drivers/net/wireless/ath/ath5k/led.c
+++ b/drivers/net/wireless/ath/ath5k/led.c
@@ -43,6 +43,7 @@
 
 #include <linux/pci.h>
 #include "ath5k.h"
+#include <linux/sprintf.h>
 
 #define ATH_SDEVICE(subv, subd) \
 	.vendor = PCI_ANY_ID, .device = PCI_ANY_ID, \
diff --git a/drivers/net/wireless/ath/ath5k/sysfs.c b/drivers/net/wireless/ath/ath5k/sysfs.c
index 37bf64106473..62c1f2ec36d6 100644
--- a/drivers/net/wireless/ath/ath5k/sysfs.c
+++ b/drivers/net/wireless/ath/ath5k/sysfs.c
@@ -2,6 +2,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 
 #include "ath5k.h"
diff --git a/drivers/net/wireless/ath/ath6kl/debug.c b/drivers/net/wireless/ath/ath6kl/debug.c
index b837d31416df..014a4e6db83a 100644
--- a/drivers/net/wireless/ath/ath6kl/debug.c
+++ b/drivers/net/wireless/ath/ath6kl/debug.c
@@ -16,6 +16,10 @@
  */
 
 #include "core.h"
+#include <linux/completion.h>
+#include <linux/hex.h> // for mac_pton()
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/skbuff.h>
 #include <linux/fs.h>
diff --git a/drivers/net/wireless/ath/ath6kl/hif.c b/drivers/net/wireless/ath/ath6kl/hif.c
index d1942537ea10..1a30d476ab31 100644
--- a/drivers/net/wireless/ath/ath6kl/hif.c
+++ b/drivers/net/wireless/ath/ath6kl/hif.c
@@ -15,6 +15,7 @@
  * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  */
 #include "hif.h"
+#include <linux/completion.h>
 
 #include <linux/export.h>
 
diff --git a/drivers/net/wireless/ath/ath6kl/init.c b/drivers/net/wireless/ath/ath6kl/init.c
index 15f455adb860..cdc37f6816bc 100644
--- a/drivers/net/wireless/ath/ath6kl/init.c
+++ b/drivers/net/wireless/ath/ath6kl/init.c
@@ -23,6 +23,7 @@
 #include <linux/export.h>
 #include <linux/of.h>
 #include <linux/mmc/sdio_func.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "core.h"
diff --git a/drivers/net/wireless/ath/ath6kl/main.c b/drivers/net/wireless/ath/ath6kl/main.c
index 8f9fe23e9755..52c184c2858d 100644
--- a/drivers/net/wireless/ath/ath6kl/main.c
+++ b/drivers/net/wireless/ath/ath6kl/main.c
@@ -22,6 +22,7 @@
 #include "cfg80211.h"
 #include "target.h"
 #include "debug.h"
+#include <linux/sprintf.h>
 
 struct ath6kl_sta *ath6kl_find_sta(struct ath6kl_vif *vif, u8 *node_addr)
 {
diff --git a/drivers/net/wireless/ath/ath6kl/sdio.c b/drivers/net/wireless/ath/ath6kl/sdio.c
index 8a43c48ec1cf..31108498f725 100644
--- a/drivers/net/wireless/ath/ath6kl/sdio.c
+++ b/drivers/net/wireless/ath/ath6kl/sdio.c
@@ -29,6 +29,7 @@
 #include "debug.h"
 #include "cfg80211.h"
 #include "trace.h"
+#include <linux/completion.h>
 
 struct ath6kl_sdio {
 	struct sdio_func *func;
diff --git a/drivers/net/wireless/ath/ath9k/ar9003_eeprom.c b/drivers/net/wireless/ath/ath9k/ar9003_eeprom.c
index 944f46cdf34c..759ae52ba101 100644
--- a/drivers/net/wireless/ath/ath9k/ar9003_eeprom.c
+++ b/drivers/net/wireless/ath/ath9k/ar9003_eeprom.c
@@ -20,6 +20,7 @@
 #include "ar9003_phy.h"
 #include "ar9003_eeprom.h"
 #include "ar9003_mci.h"
+#include <linux/sprintf.h>
 
 #define COMP_HDR_LEN 4
 #define COMP_CKSUM_LEN 2
diff --git a/drivers/net/wireless/ath/ath9k/ath9k.h b/drivers/net/wireless/ath/ath9k/ath9k.h
index 668fc07b3073..71cf894b02fa 100644
--- a/drivers/net/wireless/ath/ath9k/ath9k.h
+++ b/drivers/net/wireless/ath/ath9k/ath9k.h
@@ -23,6 +23,7 @@
 #include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/hw_random.h>
 
diff --git a/drivers/net/wireless/ath/ath9k/ath9k_pci_owl_loader.c b/drivers/net/wireless/ath/ath9k/ath9k_pci_owl_loader.c
index a5eb43f30320..1083c6622d08 100644
--- a/drivers/net/wireless/ath/ath9k/ath9k_pci_owl_loader.c
+++ b/drivers/net/wireless/ath/ath9k/ath9k_pci_owl_loader.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/ath9k_platform.h>
 #include <linux/nvmem-consumer.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 struct owl_ctx {
diff --git a/drivers/net/wireless/ath/ath9k/channel.c b/drivers/net/wireless/ath/ath9k/channel.c
index 571062f2e82a..a62ee75b2e78 100644
--- a/drivers/net/wireless/ath/ath9k/channel.c
+++ b/drivers/net/wireless/ath/ath9k/channel.c
@@ -15,6 +15,7 @@
  */
 
 #include "ath9k.h"
+#include <linux/completion.h>
 
 /* Set/change channels.  If the channel is really being changed, it's done
  * by reseting the chip.  To accomplish this we must first cleanup any pending
diff --git a/drivers/net/wireless/ath/ath9k/common-debug.c b/drivers/net/wireless/ath/ath9k/common-debug.c
index 7aefb79f6bed..780bded31d3a 100644
--- a/drivers/net/wireless/ath/ath9k/common-debug.c
+++ b/drivers/net/wireless/ath/ath9k/common-debug.c
@@ -15,6 +15,7 @@
  */
 
 #include "common.h"
+#include <linux/sprintf.h>
 
 static ssize_t read_file_modal_eeprom(struct file *file, char __user *user_buf,
 				      size_t count, loff_t *ppos)
diff --git a/drivers/net/wireless/ath/ath9k/common-spectral.c b/drivers/net/wireless/ath/ath9k/common-spectral.c
index 4b27445a5fb8..968b31edcf20 100644
--- a/drivers/net/wireless/ath/ath9k/common-spectral.c
+++ b/drivers/net/wireless/ath/ath9k/common-spectral.c
@@ -17,6 +17,8 @@
 #include <linux/relay.h>
 #include <linux/random.h>
 #include "ath9k.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static s8 fix_rssi_inv_only(u8 rssi_val)
 {
diff --git a/drivers/net/wireless/ath/ath9k/debug.c b/drivers/net/wireless/ath/ath9k/debug.c
index d84e3ee7b5d9..b075debab422 100644
--- a/drivers/net/wireless/ath/ath9k/debug.c
+++ b/drivers/net/wireless/ath/ath9k/debug.c
@@ -15,9 +15,11 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/export.h>
 #include <asm/unaligned.h>
+#include <linux/kstrtox.h>
 
 #include "ath9k.h"
 
diff --git a/drivers/net/wireless/ath/ath9k/debug_sta.c b/drivers/net/wireless/ath/ath9k/debug_sta.c
index 1e2a30019fb6..a3384ceeef54 100644
--- a/drivers/net/wireless/ath/ath9k/debug_sta.c
+++ b/drivers/net/wireless/ath/ath9k/debug_sta.c
@@ -15,6 +15,7 @@
  */
 
 #include "ath9k.h"
+#include <linux/sprintf.h>
 
 /*************/
 /* node_aggr */
diff --git a/drivers/net/wireless/ath/ath9k/dfs_debug.c b/drivers/net/wireless/ath/ath9k/dfs_debug.c
index 8e18e9b4ef48..779e95a81f20 100644
--- a/drivers/net/wireless/ath/ath9k/dfs_debug.c
+++ b/drivers/net/wireless/ath/ath9k/dfs_debug.c
@@ -17,6 +17,8 @@
 
 #include <linux/debugfs.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "ath9k.h"
 #include "dfs_debug.h"
diff --git a/drivers/net/wireless/ath/ath9k/eeprom_4k.c b/drivers/net/wireless/ath/ath9k/eeprom_4k.c
index e8c2cc03be0c..23ca71de92c4 100644
--- a/drivers/net/wireless/ath/ath9k/eeprom_4k.c
+++ b/drivers/net/wireless/ath/ath9k/eeprom_4k.c
@@ -17,6 +17,7 @@
 #include <asm/unaligned.h>
 #include "hw.h"
 #include "ar9002_phy.h"
+#include <linux/sprintf.h>
 
 static int ath9k_hw_4k_get_eeprom_ver(struct ath_hw *ah)
 {
diff --git a/drivers/net/wireless/ath/ath9k/eeprom_9287.c b/drivers/net/wireless/ath/ath9k/eeprom_9287.c
index fd5312c2a7e3..0ea5c841b4eb 100644
--- a/drivers/net/wireless/ath/ath9k/eeprom_9287.c
+++ b/drivers/net/wireless/ath/ath9k/eeprom_9287.c
@@ -17,6 +17,7 @@
 #include <asm/unaligned.h>
 #include "hw.h"
 #include "ar9002_phy.h"
+#include <linux/sprintf.h>
 
 #define SIZE_EEPROM_AR9287 (sizeof(struct ar9287_eeprom) / sizeof(u16))
 
diff --git a/drivers/net/wireless/ath/ath9k/eeprom_def.c b/drivers/net/wireless/ath/ath9k/eeprom_def.c
index 7685f8ab371e..885c7a1e7e6c 100644
--- a/drivers/net/wireless/ath/ath9k/eeprom_def.c
+++ b/drivers/net/wireless/ath/ath9k/eeprom_def.c
@@ -17,6 +17,7 @@
 #include <asm/unaligned.h>
 #include "hw.h"
 #include "ar9002_phy.h"
+#include <linux/sprintf.h>
 
 static void ath9k_get_txgain_index(struct ath_hw *ah,
 		struct ath9k_channel *chan,
diff --git a/drivers/net/wireless/ath/ath9k/gpio.c b/drivers/net/wireless/ath/ath9k/gpio.c
index b457e52dd365..b1c34cda2b0a 100644
--- a/drivers/net/wireless/ath/ath9k/gpio.c
+++ b/drivers/net/wireless/ath/ath9k/gpio.c
@@ -15,6 +15,7 @@
  */
 
 #include "ath9k.h"
+#include <linux/sprintf.h>
 
 /********************************/
 /*	 LED functions		*/
diff --git a/drivers/net/wireless/ath/ath9k/hif_usb.c b/drivers/net/wireless/ath/ath9k/hif_usb.c
index 0c7841f95228..088a68d46d9b 100644
--- a/drivers/net/wireless/ath/ath9k/hif_usb.c
+++ b/drivers/net/wireless/ath/ath9k/hif_usb.c
@@ -16,6 +16,8 @@
 
 #include <asm/unaligned.h>
 #include "htc.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 MODULE_FIRMWARE(HTC_7010_MODULE_FW);
 MODULE_FIRMWARE(HTC_9271_MODULE_FW);
diff --git a/drivers/net/wireless/ath/ath9k/htc_drv_debug.c b/drivers/net/wireless/ath/ath9k/htc_drv_debug.c
index f7c6d9bc9311..c64041cc06a0 100644
--- a/drivers/net/wireless/ath/ath9k/htc_drv_debug.c
+++ b/drivers/net/wireless/ath/ath9k/htc_drv_debug.c
@@ -15,6 +15,8 @@
  */
 
 #include "htc.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static ssize_t read_file_tgt_int_stats(struct file *file, char __user *user_buf,
 				       size_t count, loff_t *ppos)
diff --git a/drivers/net/wireless/ath/ath9k/htc_drv_gpio.c b/drivers/net/wireless/ath/ath9k/htc_drv_gpio.c
index ecb848b60725..d98b51ddda88 100644
--- a/drivers/net/wireless/ath/ath9k/htc_drv_gpio.c
+++ b/drivers/net/wireless/ath/ath9k/htc_drv_gpio.c
@@ -15,6 +15,7 @@
  */
 
 #include "htc.h"
+#include <linux/sprintf.h>
 
 /******************/
 /*     BTCOEX     */
diff --git a/drivers/net/wireless/ath/ath9k/htc_drv_init.c b/drivers/net/wireless/ath/ath9k/htc_drv_init.c
index 0aa5bdeb44a1..923653856b92 100644
--- a/drivers/net/wireless/ath/ath9k/htc_drv_init.c
+++ b/drivers/net/wireless/ath/ath9k/htc_drv_init.c
@@ -17,6 +17,8 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include "htc.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Atheros Communications");
 MODULE_LICENSE("Dual BSD/GPL");
diff --git a/drivers/net/wireless/ath/ath9k/htc_hst.c b/drivers/net/wireless/ath/ath9k/htc_hst.c
index eb631fd3336d..5e440f8f3089 100644
--- a/drivers/net/wireless/ath/ath9k/htc_hst.c
+++ b/drivers/net/wireless/ath/ath9k/htc_hst.c
@@ -17,6 +17,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include "htc.h"
+#include <linux/completion.h>
 
 static int htc_issue_send(struct htc_target *target, struct sk_buff* skb,
 			  u16 len, u8 flags, u8 epid)
diff --git a/drivers/net/wireless/ath/ath9k/hw.c b/drivers/net/wireless/ath/ath9k/hw.c
index 5982e0db45f9..49f89631d3be 100644
--- a/drivers/net/wireless/ath/ath9k/hw.c
+++ b/drivers/net/wireless/ath/ath9k/hw.c
@@ -17,6 +17,7 @@
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/bitops.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/wireless/ath/ath9k/hw.h b/drivers/net/wireless/ath/ath9k/hw.h
index 450ab19b1d4e..cbe656a5fd6d 100644
--- a/drivers/net/wireless/ath/ath9k/hw.h
+++ b/drivers/net/wireless/ath/ath9k/hw.h
@@ -21,6 +21,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 
 #include "mac.h"
 #include "ani.h"
diff --git a/drivers/net/wireless/ath/ath9k/init.c b/drivers/net/wireless/ath/ath9k/init.c
index 7fad7e75af6a..61f0f9235acb 100644
--- a/drivers/net/wireless/ath/ath9k/init.c
+++ b/drivers/net/wireless/ath/ath9k/init.c
@@ -19,12 +19,14 @@
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
 #include <linux/ath9k_platform.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_net.h>
 #include <linux/nvmem-consumer.h>
 #include <linux/relay.h>
 #include <linux/dmi.h>
+#include <linux/sprintf.h>
 #include <net/ieee80211_radiotap.h>
 
 #include "ath9k.h"
diff --git a/drivers/net/wireless/ath/ath9k/link.c b/drivers/net/wireless/ath/ath9k/link.c
index d1e5767aab3c..d67b4f6163f6 100644
--- a/drivers/net/wireless/ath/ath9k/link.c
+++ b/drivers/net/wireless/ath/ath9k/link.c
@@ -15,6 +15,7 @@
  */
 
 #include "ath9k.h"
+#include <linux/completion.h>
 
 /*
  * TX polling - checks if the TX engine is stuck somewhere
diff --git a/drivers/net/wireless/ath/ath9k/main.c b/drivers/net/wireless/ath/ath9k/main.c
index a2943aaecb20..1445f3b1127f 100644
--- a/drivers/net/wireless/ath/ath9k/main.c
+++ b/drivers/net/wireless/ath/ath9k/main.c
@@ -18,6 +18,7 @@
 #include <linux/delay.h>
 #include "ath9k.h"
 #include "btcoex.h"
+#include <linux/completion.h>
 
 static void ath9k_flush(struct ieee80211_hw *hw, struct ieee80211_vif *vif,
 			u32 queues, bool drop);
diff --git a/drivers/net/wireless/ath/ath9k/rng.c b/drivers/net/wireless/ath/ath9k/rng.c
index e1def77591c6..804e64ac5866 100644
--- a/drivers/net/wireless/ath/ath9k/rng.c
+++ b/drivers/net/wireless/ath/ath9k/rng.c
@@ -16,6 +16,7 @@
 
 #include <linux/hw_random.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 
 #include "ath9k.h"
 #include "hw.h"
diff --git a/drivers/net/wireless/ath/ath9k/tx99.c b/drivers/net/wireless/ath/ath9k/tx99.c
index f2144fd39093..05c047f02a02 100644
--- a/drivers/net/wireless/ath/ath9k/tx99.c
+++ b/drivers/net/wireless/ath/ath9k/tx99.c
@@ -15,6 +15,8 @@
  */
 
 #include "ath9k.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static void ath9k_tx99_stop(struct ath_softc *sc)
 {
diff --git a/drivers/net/wireless/ath/ath9k/wmi.c b/drivers/net/wireless/ath/ath9k/wmi.c
index 1476b42b52a9..c0047278cf47 100644
--- a/drivers/net/wireless/ath/ath9k/wmi.c
+++ b/drivers/net/wireless/ath/ath9k/wmi.c
@@ -15,6 +15,7 @@
  */
 
 #include "htc.h"
+#include <linux/completion.h>
 
 static const char *wmi_cmd_to_name(enum wmi_cmd_id wmi_cmd)
 {
diff --git a/drivers/net/wireless/ath/ath9k/xmit.c b/drivers/net/wireless/ath/ath9k/xmit.c
index f15684379b03..08bd20d6eb90 100644
--- a/drivers/net/wireless/ath/ath9k/xmit.c
+++ b/drivers/net/wireless/ath/ath9k/xmit.c
@@ -17,6 +17,7 @@
 #include <linux/dma-mapping.h>
 #include "ath9k.h"
 #include "ar9003_mac.h"
+#include <linux/completion.h>
 
 #define BITS_PER_BYTE           8
 #define OFDM_PLCP_BITS          22
diff --git a/drivers/net/wireless/ath/carl9170/debug.c b/drivers/net/wireless/ath/carl9170/debug.c
index bb40889d7c72..24cba89bbbc3 100644
--- a/drivers/net/wireless/ath/carl9170/debug.c
+++ b/drivers/net/wireless/ath/carl9170/debug.c
@@ -40,6 +40,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "carl9170.h"
 #include "cmd.h"
diff --git a/drivers/net/wireless/ath/carl9170/led.c b/drivers/net/wireless/ath/carl9170/led.c
index 2c74425f5059..bcbb9f851441 100644
--- a/drivers/net/wireless/ath/carl9170/led.c
+++ b/drivers/net/wireless/ath/carl9170/led.c
@@ -39,6 +39,7 @@
 
 #include "carl9170.h"
 #include "cmd.h"
+#include <linux/sprintf.h>
 
 int carl9170_led_set_state(struct ar9170 *ar, const u32 led_state)
 {
diff --git a/drivers/net/wireless/ath/carl9170/main.c b/drivers/net/wireless/ath/carl9170/main.c
index 7e7797bf44b7..6c585d00e460 100644
--- a/drivers/net/wireless/ath/carl9170/main.c
+++ b/drivers/net/wireless/ath/carl9170/main.c
@@ -41,11 +41,13 @@
 #include <linux/module.h>
 #include <linux/etherdevice.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include <net/cfg80211.h>
 #include "hw.h"
 #include "carl9170.h"
 #include "cmd.h"
+#include <linux/completion.h>
 
 static bool modparam_nohwcrypt;
 module_param_named(nohwcrypt, modparam_nohwcrypt, bool, 0444);
diff --git a/drivers/net/wireless/ath/carl9170/rx.c b/drivers/net/wireless/ath/carl9170/rx.c
index 908c4c8b7f82..fff3b34953c9 100644
--- a/drivers/net/wireless/ath/carl9170/rx.c
+++ b/drivers/net/wireless/ath/carl9170/rx.c
@@ -45,6 +45,7 @@
 #include "carl9170.h"
 #include "hw.h"
 #include "cmd.h"
+#include <linux/completion.h>
 
 static void carl9170_dbg_message(struct ar9170 *ar, const char *buf, u32 len)
 {
diff --git a/drivers/net/wireless/ath/carl9170/tx.c b/drivers/net/wireless/ath/carl9170/tx.c
index 6bb9aa2bfe65..812604601ae4 100644
--- a/drivers/net/wireless/ath/carl9170/tx.c
+++ b/drivers/net/wireless/ath/carl9170/tx.c
@@ -44,6 +44,7 @@
 #include "carl9170.h"
 #include "hw.h"
 #include "cmd.h"
+#include <linux/completion.h>
 
 static inline unsigned int __carl9170_get_queue(struct ar9170 *ar,
 						unsigned int queue)
diff --git a/drivers/net/wireless/ath/carl9170/usb.c b/drivers/net/wireless/ath/carl9170/usb.c
index c4edf8355941..675bde405f68 100644
--- a/drivers/net/wireless/ath/carl9170/usb.c
+++ b/drivers/net/wireless/ath/carl9170/usb.c
@@ -48,6 +48,7 @@
 #include "cmd.h"
 #include "hw.h"
 #include "fwcmd.h"
+#include <linux/completion.h>
 
 MODULE_AUTHOR("Johannes Berg <johannes@sipsolutions.net>");
 MODULE_AUTHOR("Christian Lamparter <chunkeey@googlemail.com>");
diff --git a/drivers/net/wireless/ath/wcn36xx/debug.c b/drivers/net/wireless/ath/wcn36xx/debug.c
index 58b3c0501bfd..6cb478b7ce62 100644
--- a/drivers/net/wireless/ath/wcn36xx/debug.c
+++ b/drivers/net/wireless/ath/wcn36xx/debug.c
@@ -17,6 +17,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include "wcn36xx.h"
 #include "debug.h"
diff --git a/drivers/net/wireless/ath/wcn36xx/smd.c b/drivers/net/wireless/ath/wcn36xx/smd.c
index 2cf86fc3f8fe..517d060ed205 100644
--- a/drivers/net/wireless/ath/wcn36xx/smd.c
+++ b/drivers/net/wireless/ath/wcn36xx/smd.c
@@ -17,6 +17,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/etherdevice.h>
 #include <linux/firmware.h>
 #include <linux/bitops.h>
diff --git a/drivers/net/wireless/ath/wil6210/debugfs.c b/drivers/net/wireless/ath/wil6210/debugfs.c
index c021ebcddee7..b1f7d9af088c 100644
--- a/drivers/net/wireless/ath/wil6210/debugfs.c
+++ b/drivers/net/wireless/ath/wil6210/debugfs.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/pci.h>
 #include <linux/rtnetlink.h>
@@ -14,6 +15,7 @@
 #include "wmi.h"
 #include "txrx.h"
 #include "pmc.h"
+#include <linux/sprintf.h>
 
 /* Nasty hack. Better have per device instances */
 static u32 mem_addr;
diff --git a/drivers/net/wireless/ath/wil6210/interrupt.c b/drivers/net/wireless/ath/wil6210/interrupt.c
index 67172385a5d6..c91d1139af26 100644
--- a/drivers/net/wireless/ath/wil6210/interrupt.c
+++ b/drivers/net/wireless/ath/wil6210/interrupt.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/interrupt.h>
+#include <linux/completion.h>
 
 #include "wil6210.h"
 #include "trace.h"
diff --git a/drivers/net/wireless/ath/wil6210/main.c b/drivers/net/wireless/ath/wil6210/main.c
index 94e61dbe94f8..886891388eab 100644
--- a/drivers/net/wireless/ath/wil6210/main.c
+++ b/drivers/net/wireless/ath/wil6210/main.c
@@ -7,7 +7,9 @@
 #include <linux/moduleparam.h>
 #include <linux/if_arp.h>
 #include <linux/etherdevice.h>
+#include <linux/kstrtox.h>
 #include <linux/rtnetlink.h>
+#include <linux/completion.h>
 
 #include "wil6210.h"
 #include "txrx.h"
diff --git a/drivers/net/wireless/ath/wil6210/pmc.c b/drivers/net/wireless/ath/wil6210/pmc.c
index a2f7b4c1da48..f145f20d1c47 100644
--- a/drivers/net/wireless/ath/wil6210/pmc.c
+++ b/drivers/net/wireless/ath/wil6210/pmc.c
@@ -7,6 +7,7 @@
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/fs.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/seq_file.h>
 #include "wmi.h"
 #include "wil6210.h"
diff --git a/drivers/net/wireless/ath/wil6210/txrx.h b/drivers/net/wireless/ath/wil6210/txrx.h
index 689f68d89a44..13fa8c16e6c8 100644
--- a/drivers/net/wireless/ath/wil6210/txrx.h
+++ b/drivers/net/wireless/ath/wil6210/txrx.h
@@ -9,6 +9,7 @@
 
 #include "wil6210.h"
 #include "txrx_edma.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define BUF_SW_OWNED    (1)
 #define BUF_HW_OWNED    (0)
diff --git a/drivers/net/wireless/ath/wil6210/txrx_edma.h b/drivers/net/wireless/ath/wil6210/txrx_edma.h
index ee90e225bb05..13b562b4ad4c 100644
--- a/drivers/net/wireless/ath/wil6210/txrx_edma.h
+++ b/drivers/net/wireless/ath/wil6210/txrx_edma.h
@@ -7,6 +7,7 @@
 #define WIL6210_TXRX_EDMA_H
 
 #include "wil6210.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /* limit status ring size in range [ring size..max ring size] */
 #define WIL_SRING_SIZE_ORDER_MIN	(WIL_RING_SIZE_ORDER_MIN)
diff --git a/drivers/net/wireless/ath/wil6210/wmi.c b/drivers/net/wireless/ath/wil6210/wmi.c
index 6fdb77d4c59e..4ef08229cc27 100644
--- a/drivers/net/wireless/ath/wil6210/wmi.c
+++ b/drivers/net/wireless/ath/wil6210/wmi.c
@@ -7,6 +7,7 @@
 #include <linux/moduleparam.h>
 #include <linux/etherdevice.h>
 #include <linux/if_arp.h>
+#include <linux/completion.h>
 
 #include "wil6210.h"
 #include "txrx.h"
diff --git a/drivers/net/wireless/atmel/at76c50x-usb.c b/drivers/net/wireless/atmel/at76c50x-usb.c
index 0b55a272bfd6..fa54c11c863c 100644
--- a/drivers/net/wireless/atmel/at76c50x-usb.c
+++ b/drivers/net/wireless/atmel/at76c50x-usb.c
@@ -28,6 +28,7 @@
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/netdevice.h>
 #include <linux/if_arp.h>
diff --git a/drivers/net/wireless/broadcom/b43/debugfs.c b/drivers/net/wireless/broadcom/b43/debugfs.c
index efa98444e3fb..7615d959ce24 100644
--- a/drivers/net/wireless/broadcom/b43/debugfs.c
+++ b/drivers/net/wireless/broadcom/b43/debugfs.c
@@ -16,6 +16,7 @@
 #include <linux/netdevice.h>
 #include <linux/pci.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include "b43.h"
 #include "main.h"
diff --git a/drivers/net/wireless/broadcom/b43/dma.c b/drivers/net/wireless/broadcom/b43/dma.c
index 6ac7dcebfff9..5f316b12162a 100644
--- a/drivers/net/wireless/broadcom/b43/dma.c
+++ b/drivers/net/wireless/broadcom/b43/dma.c
@@ -19,6 +19,7 @@
 #include "main.h"
 #include "debugfs.h"
 #include "xmit.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include <linux/dma-mapping.h>
 #include <linux/pci.h>
diff --git a/drivers/net/wireless/broadcom/b43/leds.c b/drivers/net/wireless/broadcom/b43/leds.c
index bfe1be345844..3545328891d9 100644
--- a/drivers/net/wireless/broadcom/b43/leds.c
+++ b/drivers/net/wireless/broadcom/b43/leds.c
@@ -16,6 +16,7 @@
 #include "b43.h"
 #include "leds.h"
 #include "rfkill.h"
+#include <linux/sprintf.h>
 
 
 static void b43_led_turn_on(struct b43_wldev *dev, u8 led_index,
diff --git a/drivers/net/wireless/broadcom/b43/main.c b/drivers/net/wireless/broadcom/b43/main.c
index badb2f494035..51b3aacca376 100644
--- a/drivers/net/wireless/broadcom/b43/main.c
+++ b/drivers/net/wireless/broadcom/b43/main.c
@@ -25,12 +25,14 @@
 #include <linux/if_arp.h>
 #include <linux/etherdevice.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/skbuff.h>
 #include <linux/io.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "b43.h"
 #include "main.h"
diff --git a/drivers/net/wireless/broadcom/b43/sysfs.c b/drivers/net/wireless/broadcom/b43/sysfs.c
index 0679d132968f..b78b128c2295 100644
--- a/drivers/net/wireless/broadcom/b43/sysfs.c
+++ b/drivers/net/wireless/broadcom/b43/sysfs.c
@@ -12,6 +12,8 @@
 
 #include <linux/capability.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "b43.h"
 #include "sysfs.h"
diff --git a/drivers/net/wireless/broadcom/b43legacy/debugfs.c b/drivers/net/wireless/broadcom/b43legacy/debugfs.c
index 6b0e8d117061..abd8a39cc538 100644
--- a/drivers/net/wireless/broadcom/b43legacy/debugfs.c
+++ b/drivers/net/wireless/broadcom/b43legacy/debugfs.c
@@ -16,6 +16,7 @@
 #include <linux/netdevice.h>
 #include <linux/pci.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include "b43legacy.h"
 #include "main.h"
diff --git a/drivers/net/wireless/broadcom/b43legacy/leds.c b/drivers/net/wireless/broadcom/b43legacy/leds.c
index 79e6fd205bfb..a464cd72148f 100644
--- a/drivers/net/wireless/broadcom/b43legacy/leds.c
+++ b/drivers/net/wireless/broadcom/b43legacy/leds.c
@@ -16,6 +16,7 @@
 #include "b43legacy.h"
 #include "leds.h"
 #include "rfkill.h"
+#include <linux/sprintf.h>
 
 
 static void b43legacy_led_turn_on(struct b43legacy_wldev *dev, u8 led_index,
diff --git a/drivers/net/wireless/broadcom/b43legacy/main.c b/drivers/net/wireless/broadcom/b43legacy/main.c
index 18eb610f600a..7e6435880696 100644
--- a/drivers/net/wireless/broadcom/b43legacy/main.c
+++ b/drivers/net/wireless/broadcom/b43legacy/main.c
@@ -21,6 +21,7 @@
 #include <linux/if_arp.h>
 #include <linux/etherdevice.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/sched/signal.h>
 #include <linux/skbuff.h>
@@ -28,6 +29,7 @@
 #include <linux/slab.h>
 #include <net/dst.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "b43legacy.h"
 #include "main.h"
diff --git a/drivers/net/wireless/broadcom/b43legacy/sysfs.c b/drivers/net/wireless/broadcom/b43legacy/sysfs.c
index eec087ca30e6..052dd179117e 100644
--- a/drivers/net/wireless/broadcom/b43legacy/sysfs.c
+++ b/drivers/net/wireless/broadcom/b43legacy/sysfs.c
@@ -15,6 +15,8 @@
 #include "main.h"
 #include "phy.h"
 #include "radio.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/capability.h>
 
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/cfg80211.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/cfg80211.c
index d0cb39278cb9..8b0a71236724 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/cfg80211.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/cfg80211.c
@@ -7,11 +7,14 @@
 
 #include <linux/kernel.h>
 #include <linux/etherdevice.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <net/cfg80211.h>
 #include <net/netlink.h>
 #include <uapi/linux/if_arp.h>
+#include <linux/completion.h>
 
 #include <brcmu_utils.h>
 #include <defs.h>
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/chip.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/chip.c
index 2ef92ef25517..49a568d5a595 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/chip.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/chip.c
@@ -5,6 +5,7 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/ssb/ssb_regs.h>
 #include <linux/bcma/bcma.h>
 #include <linux/bcma/bcma_regs.h>
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/dmi.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/dmi.c
index 86ff174936a9..1015bf74e4bf 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/dmi.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/dmi.c
@@ -8,6 +8,7 @@
 #include "core.h"
 #include "common.h"
 #include "brcm_hw_ids.h"
+#include <linux/sprintf.h>
 
 /* The DMI data never changes so we can use a static buf for this */
 static char dmi_board_type[128];
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/firmware.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/firmware.c
index 83f8ed7d00f9..c0a2d69dae49 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/firmware.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/firmware.c
@@ -10,6 +10,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/bcm47xx_nvram.h>
+#include <linux/sprintf.h>
 
 #include "debug.h"
 #include "firmware.h"
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/fwsignal.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/fwsignal.c
index 36af81975855..a6ac80b3d078 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/fwsignal.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/fwsignal.c
@@ -11,6 +11,7 @@
 #include <linux/etherdevice.h>
 #include <linux/err.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <net/cfg80211.h>
 
 #include <brcmu_utils.h>
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/of.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/of.c
index e406e11481a6..0674cfbe7f50 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/of.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/of.c
@@ -6,6 +6,7 @@
 #include <linux/of.h>
 #include <linux/of_irq.h>
 #include <linux/of_net.h>
+#include <linux/sprintf.h>
 
 #include <defs.h>
 #include "debug.h"
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/p2p.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/p2p.c
index 6e0c90f4718b..e6b0e231720b 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/p2p.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/p2p.c
@@ -7,6 +7,7 @@
 #include <linux/etherdevice.h>
 #include <linux/rtnetlink.h>
 #include <net/cfg80211.h>
+#include <linux/completion.h>
 
 #include <brcmu_wifi.h>
 #include <brcmu_utils.h>
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c
index 6b38d9de71af..516693037fd3 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c
@@ -5,6 +5,7 @@
 
 #include <linux/types.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/kthread.h>
 #include <linux/printk.h>
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c
index 0ccf735316c2..763355c855bd 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c
@@ -8,6 +8,7 @@
 #include <linux/firmware.h>
 #include <linux/usb.h>
 #include <linux/vmalloc.h>
+#include <linux/completion.h>
 
 #include <brcmu_utils.h>
 #include <brcm_hw_ids.h>
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmsmac/led.c b/drivers/net/wireless/broadcom/brcm80211/brcmsmac/led.c
index 9540a05247c2..f62e7ec1530d 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmsmac/led.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmsmac/led.c
@@ -4,6 +4,7 @@
 #include <linux/gpio/driver.h>
 #include <linux/gpio/machine.h>
 #include <linux/gpio/consumer.h>
+#include <linux/sprintf.h>
 
 #include "mac80211_if.h"
 #include "pub.h"
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c b/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
index 92860dc0a92e..841ba3ace1eb 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c
@@ -24,6 +24,7 @@
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/bcma/bcma.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include <defs.h>
 #include "phy/phy_int.h"
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmsmac/main.c b/drivers/net/wireless/broadcom/brcm80211/brcmsmac/main.c
index 34460b5815d0..4e5099e6da56 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmsmac/main.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmsmac/main.c
@@ -19,6 +19,7 @@
 
 #include <linux/pci_ids.h>
 #include <linux/if_ether.h>
+#include <linux/sprintf.h>
 #include <net/cfg80211.h>
 #include <net/mac80211.h>
 #include <brcm_hw_ids.h>
diff --git a/drivers/net/wireless/broadcom/brcm80211/brcmutil/utils.c b/drivers/net/wireless/broadcom/brcm80211/brcmutil/utils.c
index fe94db0ba3f3..086bafc00801 100644
--- a/drivers/net/wireless/broadcom/brcm80211/brcmutil/utils.c
+++ b/drivers/net/wireless/broadcom/brcm80211/brcmutil/utils.c
@@ -7,6 +7,7 @@
 
 #include <linux/netdevice.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <brcmu_utils.h>
 
diff --git a/drivers/net/wireless/intel/ipw2x00/ipw2100.c b/drivers/net/wireless/intel/ipw2x00/ipw2100.c
index b6636002c7d2..0acdbdadccb6 100644
--- a/drivers/net/wireless/intel/ipw2x00/ipw2100.c
+++ b/drivers/net/wireless/intel/ipw2x00/ipw2100.c
@@ -127,6 +127,7 @@ that only one external action is invoked at a time.
 #include <linux/ip.h>
 #include <linux/kernel.h>
 #include <linux/kmod.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
@@ -134,6 +135,7 @@ that only one external action is invoked at a time.
 #include <linux/dma-mapping.h>
 #include <linux/proc_fs.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/io.h>
 #include <linux/fs.h>
diff --git a/drivers/net/wireless/intel/ipw2x00/ipw2200.c b/drivers/net/wireless/intel/ipw2x00/ipw2200.c
index eed9ef17bc29..107cac8496fe 100644
--- a/drivers/net/wireless/intel/ipw2x00/ipw2200.c
+++ b/drivers/net/wireless/intel/ipw2x00/ipw2200.c
@@ -18,9 +18,11 @@
 
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/cfg80211-wext.h>
 #include "ipw2200.h"
 #include "ipw.h"
+#include <linux/kstrtox.h>
 
 
 #ifndef KBUILD_EXTMOD
diff --git a/drivers/net/wireless/intel/ipw2x00/libipw_module.c b/drivers/net/wireless/intel/ipw2x00/libipw_module.c
index 43bab92a4148..33378370eb4b 100644
--- a/drivers/net/wireless/intel/ipw2x00/libipw_module.c
+++ b/drivers/net/wireless/intel/ipw2x00/libipw_module.c
@@ -28,6 +28,7 @@
 #include <linux/proc_fs.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/types.h>
 #include <linux/wireless.h>
diff --git a/drivers/net/wireless/intel/ipw2x00/libipw_rx.c b/drivers/net/wireless/intel/ipw2x00/libipw_rx.c
index 48d6870bbf4e..613fcd8ef85c 100644
--- a/drivers/net/wireless/intel/ipw2x00/libipw_rx.c
+++ b/drivers/net/wireless/intel/ipw2x00/libipw_rx.c
@@ -21,6 +21,7 @@
 #include <linux/netdevice.h>
 #include <linux/proc_fs.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/types.h>
 #include <linux/wireless.h>
diff --git a/drivers/net/wireless/intel/ipw2x00/libipw_wx.c b/drivers/net/wireless/intel/ipw2x00/libipw_wx.c
index 903de34028ef..a357986acb16 100644
--- a/drivers/net/wireless/intel/ipw2x00/libipw_wx.c
+++ b/drivers/net/wireless/intel/ipw2x00/libipw_wx.c
@@ -21,6 +21,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #include <net/lib80211.h>
 #include <linux/wireless.h>
diff --git a/drivers/net/wireless/intel/iwlegacy/3945-debug.c b/drivers/net/wireless/intel/iwlegacy/3945-debug.c
index 4e3fc91b725e..2ec6eec348ad 100644
--- a/drivers/net/wireless/intel/iwlegacy/3945-debug.c
+++ b/drivers/net/wireless/intel/iwlegacy/3945-debug.c
@@ -10,6 +10,7 @@
 
 #include "common.h"
 #include "3945.h"
+#include <linux/sprintf.h>
 
 static int
 il3945_stats_flag(struct il_priv *il, char *buf, int bufsz)
diff --git a/drivers/net/wireless/intel/iwlegacy/3945-mac.c b/drivers/net/wireless/intel/iwlegacy/3945-mac.c
index 075b705a8d7b..4b24b1ece91e 100644
--- a/drivers/net/wireless/intel/iwlegacy/3945-mac.c
+++ b/drivers/net/wireless/intel/iwlegacy/3945-mac.c
@@ -15,6 +15,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/pci.h>
@@ -27,6 +28,7 @@
 #include <linux/firmware.h>
 #include <linux/etherdevice.h>
 #include <linux/if_arp.h>
+#include <linux/sprintf.h>
 
 #include <net/ieee80211_radiotap.h>
 #include <net/mac80211.h>
diff --git a/drivers/net/wireless/intel/iwlegacy/3945-rs.c b/drivers/net/wireless/intel/iwlegacy/3945-rs.c
index 0eaad980c85c..92506f145a72 100644
--- a/drivers/net/wireless/intel/iwlegacy/3945-rs.c
+++ b/drivers/net/wireless/intel/iwlegacy/3945-rs.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 
 #include <linux/netdevice.h>
diff --git a/drivers/net/wireless/intel/iwlegacy/4965-debug.c b/drivers/net/wireless/intel/iwlegacy/4965-debug.c
index c1f8c6bf8d6e..7cea4877bc46 100644
--- a/drivers/net/wireless/intel/iwlegacy/4965-debug.c
+++ b/drivers/net/wireless/intel/iwlegacy/4965-debug.c
@@ -9,6 +9,7 @@
 *****************************************************************************/
 #include "common.h"
 #include "4965.h"
+#include <linux/sprintf.h>
 
 static const char *fmt_value = "  %-30s %10u\n";
 static const char *fmt_table = "  %-30s %10u  %10u  %10u  %10u\n";
diff --git a/drivers/net/wireless/intel/iwlegacy/4965-mac.c b/drivers/net/wireless/intel/iwlegacy/4965-mac.c
index 4beb7be6d51d..0037068e83ab 100644
--- a/drivers/net/wireless/intel/iwlegacy/4965-mac.c
+++ b/drivers/net/wireless/intel/iwlegacy/4965-mac.c
@@ -15,6 +15,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/pci.h>
@@ -27,7 +28,9 @@
 #include <linux/firmware.h>
 #include <linux/etherdevice.h>
 #include <linux/if_arp.h>
+#include <linux/sprintf.h>
 #include <linux/units.h>
+#include <linux/completion.h>
 
 #include <net/mac80211.h>
 
diff --git a/drivers/net/wireless/intel/iwlegacy/4965-rs.c b/drivers/net/wireless/intel/iwlegacy/4965-rs.c
index 718efb1aa1b0..02cac6fb2e7b 100644
--- a/drivers/net/wireless/intel/iwlegacy/4965-rs.c
+++ b/drivers/net/wireless/intel/iwlegacy/4965-rs.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 
 #include <linux/netdevice.h>
diff --git a/drivers/net/wireless/intel/iwlegacy/common.c b/drivers/net/wireless/intel/iwlegacy/common.c
index 9d33a66a49b5..b75feae1a04f 100644
--- a/drivers/net/wireless/intel/iwlegacy/common.c
+++ b/drivers/net/wireless/intel/iwlegacy/common.c
@@ -13,6 +13,7 @@
 #include <linux/etherdevice.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/lockdep.h>
 #include <linux/pci.h>
diff --git a/drivers/net/wireless/intel/iwlegacy/debug.c b/drivers/net/wireless/intel/iwlegacy/debug.c
index d998a3f1b056..3654602b2c2b 100644
--- a/drivers/net/wireless/intel/iwlegacy/debug.c
+++ b/drivers/net/wireless/intel/iwlegacy/debug.c
@@ -9,6 +9,7 @@
  *****************************************************************************/
 #include <linux/ieee80211.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 
 #include "common.h"
diff --git a/drivers/net/wireless/intel/iwlwifi/dvm/debugfs.c b/drivers/net/wireless/intel/iwlwifi/dvm/debugfs.c
index b246dbd371b3..d8ee3e9bf41e 100644
--- a/drivers/net/wireless/intel/iwlwifi/dvm/debugfs.c
+++ b/drivers/net/wireless/intel/iwlwifi/dvm/debugfs.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/ieee80211.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 
 #include "iwl-debug.h"
diff --git a/drivers/net/wireless/intel/iwlwifi/dvm/led.c b/drivers/net/wireless/intel/iwlwifi/dvm/led.c
index 71f67a019cf6..571d9ee3497f 100644
--- a/drivers/net/wireless/intel/iwlwifi/dvm/led.c
+++ b/drivers/net/wireless/intel/iwlwifi/dvm/led.c
@@ -11,6 +11,7 @@
 #include <linux/delay.h>
 #include <linux/skbuff.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include <linux/etherdevice.h>
 #include <asm/unaligned.h>
diff --git a/drivers/net/wireless/intel/iwlwifi/dvm/main.c b/drivers/net/wireless/intel/iwlwifi/dvm/main.c
index 8774dd7b921e..33bc348964b7 100644
--- a/drivers/net/wireless/intel/iwlwifi/dvm/main.c
+++ b/drivers/net/wireless/intel/iwlwifi/dvm/main.c
@@ -20,6 +20,7 @@
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/if_arp.h>
+#include <linux/sprintf.h>
 
 #include <net/mac80211.h>
 
diff --git a/drivers/net/wireless/intel/iwlwifi/dvm/rs.c b/drivers/net/wireless/intel/iwlwifi/dvm/rs.c
index f4a6f76cf193..9967d676c8d7 100644
--- a/drivers/net/wireless/intel/iwlwifi/dvm/rs.c
+++ b/drivers/net/wireless/intel/iwlwifi/dvm/rs.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 
 #include <linux/netdevice.h>
diff --git a/drivers/net/wireless/intel/iwlwifi/fw/api/coex.h b/drivers/net/wireless/intel/iwlwifi/fw/api/coex.h
index bc27e15488f5..6fc43fe0d8f5 100644
--- a/drivers/net/wireless/intel/iwlwifi/fw/api/coex.h
+++ b/drivers/net/wireless/intel/iwlwifi/fw/api/coex.h
@@ -10,6 +10,7 @@
 
 #include <linux/types.h>
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 
 #define BITS(nb) (BIT(nb) - 1)
 
diff --git a/drivers/net/wireless/intel/iwlwifi/fw/dbg.c b/drivers/net/wireless/intel/iwlwifi/fw/dbg.c
index db6d7013df66..5b8a994b7867 100644
--- a/drivers/net/wireless/intel/iwlwifi/fw/dbg.c
+++ b/drivers/net/wireless/intel/iwlwifi/fw/dbg.c
@@ -13,6 +13,7 @@
 #include "iwl-prph.h"
 #include "iwl-csr.h"
 #include "iwl-fh.h"
+#include <linux/sprintf.h>
 /**
  * struct iwl_fw_dump_ptrs - set of pointers needed for the fw-error-dump
  *
diff --git a/drivers/net/wireless/intel/iwlwifi/fw/debugfs.c b/drivers/net/wireless/intel/iwlwifi/fw/debugfs.c
index 751a125a1566..c418f0e6c51e 100644
--- a/drivers/net/wireless/intel/iwlwifi/fw/debugfs.c
+++ b/drivers/net/wireless/intel/iwlwifi/fw/debugfs.c
@@ -7,7 +7,10 @@
 #include "api/commands.h"
 #include "debugfs.h"
 #include "dbg.h"
+#include <linux/hex.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 
 #define FWRT_DEBUGFS_OPEN_WRAPPER(name, buflen, argtype)		\
 struct dbgfs_##name##_data {						\
diff --git a/drivers/net/wireless/intel/iwlwifi/fw/dump.c b/drivers/net/wireless/intel/iwlwifi/fw/dump.c
index 8f107ceec407..114bb28ac9f0 100644
--- a/drivers/net/wireless/intel/iwlwifi/fw/dump.c
+++ b/drivers/net/wireless/intel/iwlwifi/fw/dump.c
@@ -13,6 +13,7 @@
 #include "iwl-prph.h"
 #include "iwl-csr.h"
 #include "pnvm.h"
+#include <linux/sprintf.h>
 
 #define FW_ASSERT_LMAC_FATAL			0x70
 #define FW_ASSERT_LMAC2_FATAL			0x72
diff --git a/drivers/net/wireless/intel/iwlwifi/fw/pnvm.h b/drivers/net/wireless/intel/iwlwifi/fw/pnvm.h
index 1bac3466154c..18331523ee48 100644
--- a/drivers/net/wireless/intel/iwlwifi/fw/pnvm.h
+++ b/drivers/net/wireless/intel/iwlwifi/fw/pnvm.h
@@ -7,6 +7,7 @@
 
 #include "iwl-drv.h"
 #include "fw/notif-wait.h"
+#include <linux/sprintf.h>
 
 #define MVM_UCODE_PNVM_TIMEOUT	(HZ / 4)
 
diff --git a/drivers/net/wireless/intel/iwlwifi/fw/rs.c b/drivers/net/wireless/intel/iwlwifi/fw/rs.c
index 8f99e501629e..79fa171eb278 100644
--- a/drivers/net/wireless/intel/iwlwifi/fw/rs.c
+++ b/drivers/net/wireless/intel/iwlwifi/fw/rs.c
@@ -7,6 +7,7 @@
 #include "fw/api/rs.h"
 #include "iwl-drv.h"
 #include "iwl-config.h"
+#include <linux/sprintf.h>
 
 #define IWL_DECLARE_RATE_INFO(r) \
 	[IWL_RATE_##r##M_INDEX] = IWL_RATE_##r##M_PLCP
diff --git a/drivers/net/wireless/intel/iwlwifi/iwl-drv.c b/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
index 91e974de0ade..ed7ec05dadb9 100644
--- a/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
+++ b/drivers/net/wireless/intel/iwlwifi/iwl-drv.c
@@ -8,6 +8,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/firmware.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "iwl-drv.h"
diff --git a/drivers/net/wireless/intel/iwlwifi/iwl-fh.h b/drivers/net/wireless/intel/iwlwifi/iwl-fh.h
index e0400ba2ab74..0091e9ce75c5 100644
--- a/drivers/net/wireless/intel/iwlwifi/iwl-fh.h
+++ b/drivers/net/wireless/intel/iwlwifi/iwl-fh.h
@@ -8,6 +8,7 @@
 
 #include <linux/types.h>
 #include <linux/bitfield.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "iwl-trans.h"
 
diff --git a/drivers/net/wireless/intel/iwlwifi/iwl-io.c b/drivers/net/wireless/intel/iwlwifi/iwl-io.c
index c60f9466c5fd..dd61a6cdfa85 100644
--- a/drivers/net/wireless/intel/iwlwifi/iwl-io.c
+++ b/drivers/net/wireless/intel/iwlwifi/iwl-io.c
@@ -6,6 +6,8 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/export.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include "iwl-drv.h"
 #include "iwl-io.h"
diff --git a/drivers/net/wireless/intel/iwlwifi/iwl-trans.c b/drivers/net/wireless/intel/iwlwifi/iwl-trans.c
index f95098c21c7d..2089a4f1aa65 100644
--- a/drivers/net/wireless/intel/iwlwifi/iwl-trans.c
+++ b/drivers/net/wireless/intel/iwlwifi/iwl-trans.c
@@ -6,6 +6,7 @@
  */
 #include <linux/kernel.h>
 #include <linux/bsearch.h>
+#include <linux/sprintf.h>
 
 #include "fw/api/tx.h"
 #include "iwl-trans.h"
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/debugfs-vif.c b/drivers/net/wireless/intel/iwlwifi/mvm/debugfs-vif.c
index aa3c9c2cbd7f..3f3d7f744aee 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/debugfs-vif.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/debugfs-vif.c
@@ -6,6 +6,8 @@
  */
 #include "mvm.h"
 #include "debugfs.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static void iwl_dbgfs_update_pm(struct iwl_mvm *mvm,
 				 struct ieee80211_vif *vif,
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/debugfs.c b/drivers/net/wireless/intel/iwlwifi/mvm/debugfs.c
index 79f4ac8cbc72..87957793b5bd 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/debugfs.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/debugfs.c
@@ -6,9 +6,12 @@
  */
 #include <linux/vmalloc.h>
 #include <linux/err.h>
+#include <linux/hex.h>
 #include <linux/ieee80211.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/dmi.h>
+#include <linux/sprintf.h>
 
 #include "mvm.h"
 #include "sta.h"
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/led.c b/drivers/net/wireless/intel/iwlwifi/mvm/led.c
index 1ea7c44250d4..e78647c04b1e 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/led.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/led.c
@@ -7,6 +7,7 @@
 #include "iwl-io.h"
 #include "iwl-csr.h"
 #include "mvm.h"
+#include <linux/sprintf.h>
 
 static void iwl_mvm_send_led_fw_cmd(struct iwl_mvm *mvm, bool on)
 {
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/mac-ctxt.c b/drivers/net/wireless/intel/iwlwifi/mvm/mac-ctxt.c
index cc592e288188..94b668e20776 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/mac-ctxt.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/mac-ctxt.c
@@ -6,6 +6,7 @@
  */
 #include <linux/etherdevice.h>
 #include <linux/crc32.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include "iwl-io.h"
 #include "iwl-prph.h"
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/ops.c b/drivers/net/wireless/intel/iwlwifi/mvm/ops.c
index 77dce70eccc4..895b20be57a3 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/ops.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/ops.c
@@ -6,6 +6,7 @@
  */
 #include <linux/module.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <net/mac80211.h>
 
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/power.c b/drivers/net/wireless/intel/iwlwifi/mvm/power.c
index 41e68aa6bec8..4eb71aa1e4db 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/power.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/power.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 
 #include <net/mac80211.h>
 
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/ptp.c b/drivers/net/wireless/intel/iwlwifi/mvm/ptp.c
index e89259de6f4c..090d05c20412 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/ptp.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/ptp.c
@@ -5,6 +5,7 @@
 
 #include "mvm.h"
 #include "iwl-debug.h"
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include <linux/math64.h>
 
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/rs.c b/drivers/net/wireless/intel/iwlwifi/mvm/rs.c
index a8c4e354e2ce..cacde3ef87d3 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/rs.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/rs.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 
 #include <linux/netdevice.h>
diff --git a/drivers/net/wireless/intel/iwlwifi/mvm/tt.c b/drivers/net/wireless/intel/iwlwifi/mvm/tt.c
index d2a00cbcbc42..03b56fcb8d66 100644
--- a/drivers/net/wireless/intel/iwlwifi/mvm/tt.c
+++ b/drivers/net/wireless/intel/iwlwifi/mvm/tt.c
@@ -5,6 +5,7 @@
  * Copyright (C) 2015-2016 Intel Deutschland GmbH
  */
 #include <linux/sort.h>
+#include <linux/sprintf.h>
 
 #include "mvm.h"
 
diff --git a/drivers/net/wireless/intel/iwlwifi/pcie/trans-gen2.c b/drivers/net/wireless/intel/iwlwifi/pcie/trans-gen2.c
index a4a4772330cf..499c7fdf4d8d 100644
--- a/drivers/net/wireless/intel/iwlwifi/pcie/trans-gen2.c
+++ b/drivers/net/wireless/intel/iwlwifi/pcie/trans-gen2.c
@@ -9,6 +9,7 @@
 #include "iwl-context-info-gen3.h"
 #include "internal.h"
 #include "fw/dbg.h"
+#include <linux/sprintf.h>
 
 #define FW_RESET_TIMEOUT (HZ / 5)
 
diff --git a/drivers/net/wireless/intel/iwlwifi/pcie/trans.c b/drivers/net/wireless/intel/iwlwifi/pcie/trans.c
index 6c76b2dd6878..e2fe9fb84878 100644
--- a/drivers/net/wireless/intel/iwlwifi/pcie/trans.c
+++ b/drivers/net/wireless/intel/iwlwifi/pcie/trans.c
@@ -7,9 +7,11 @@
 #include <linux/pci.h>
 #include <linux/interrupt.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/bitops.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
 #include <linux/wait.h>
diff --git a/drivers/net/wireless/intel/iwlwifi/queue/tx.h b/drivers/net/wireless/intel/iwlwifi/queue/tx.h
index 124b29aac4a1..560175d82204 100644
--- a/drivers/net/wireless/intel/iwlwifi/queue/tx.h
+++ b/drivers/net/wireless/intel/iwlwifi/queue/tx.h
@@ -6,6 +6,7 @@
 #define __iwl_trans_queue_tx_h__
 #include "iwl-fh.h"
 #include "fw/api/tx.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 struct iwl_tso_hdr_page {
 	struct page *page;
diff --git a/drivers/net/wireless/intersil/p54/fwio.c b/drivers/net/wireless/intersil/p54/fwio.c
index c4fe70e05b9b..52b656161bda 100644
--- a/drivers/net/wireless/intersil/p54/fwio.c
+++ b/drivers/net/wireless/intersil/p54/fwio.c
@@ -14,9 +14,11 @@
  */
 
 #include <linux/slab.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/etherdevice.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include <net/mac80211.h>
 
diff --git a/drivers/net/wireless/intersil/p54/led.c b/drivers/net/wireless/intersil/p54/led.c
index 4bc77010f9c1..debd0ca8ab29 100644
--- a/drivers/net/wireless/intersil/p54/led.c
+++ b/drivers/net/wireless/intersil/p54/led.c
@@ -15,6 +15,7 @@
 
 #include <linux/firmware.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 
 #include <net/mac80211.h>
 #ifdef CONFIG_P54_LEDS
diff --git a/drivers/net/wireless/intersil/p54/main.c b/drivers/net/wireless/intersil/p54/main.c
index 687841b2fa2a..fe02919c82dd 100644
--- a/drivers/net/wireless/intersil/p54/main.c
+++ b/drivers/net/wireless/intersil/p54/main.c
@@ -17,6 +17,7 @@
 #include <linux/firmware.h>
 #include <linux/etherdevice.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <net/mac80211.h>
 
diff --git a/drivers/net/wireless/intersil/p54/p54spi.c b/drivers/net/wireless/intersil/p54/p54spi.c
index 0073b5e0f9c9..97f8b6ebc16d 100644
--- a/drivers/net/wireless/intersil/p54/p54spi.c
+++ b/drivers/net/wireless/intersil/p54/p54spi.c
@@ -17,6 +17,7 @@
 #include <linux/etherdevice.h>
 #include <linux/gpio.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "p54spi.h"
 #include "p54.h"
diff --git a/drivers/net/wireless/intersil/p54/p54usb.c b/drivers/net/wireless/intersil/p54/p54usb.c
index cae47663b17b..ea57edab2320 100644
--- a/drivers/net/wireless/intersil/p54/p54usb.c
+++ b/drivers/net/wireless/intersil/p54/p54usb.c
@@ -18,6 +18,7 @@
 #include <linux/crc32.h>
 #include <linux/module.h>
 #include <net/mac80211.h>
+#include <linux/completion.h>
 
 #include "p54.h"
 #include "lmac.h"
diff --git a/drivers/net/wireless/intersil/p54/txrx.c b/drivers/net/wireless/intersil/p54/txrx.c
index 8414aa208655..5c722e2e0c1d 100644
--- a/drivers/net/wireless/intersil/p54/txrx.c
+++ b/drivers/net/wireless/intersil/p54/txrx.c
@@ -17,6 +17,7 @@
 #include <linux/firmware.h>
 #include <linux/etherdevice.h>
 #include <asm/div64.h>
+#include <linux/completion.h>
 
 #include <net/mac80211.h>
 
diff --git a/drivers/net/wireless/marvell/libertas/debugfs.c b/drivers/net/wireless/marvell/libertas/debugfs.c
index c604613ab506..a1ac5cdfd861 100644
--- a/drivers/net/wireless/marvell/libertas/debugfs.c
+++ b/drivers/net/wireless/marvell/libertas/debugfs.c
@@ -3,7 +3,9 @@
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/hardirq.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/export.h>
diff --git a/drivers/net/wireless/marvell/libertas/ethtool.c b/drivers/net/wireless/marvell/libertas/ethtool.c
index 9f53308a9935..b75ae17cafcd 100644
--- a/drivers/net/wireless/marvell/libertas/ethtool.c
+++ b/drivers/net/wireless/marvell/libertas/ethtool.c
@@ -3,6 +3,7 @@
 #include <linux/netdevice.h>
 #include <linux/ethtool.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "decl.h"
 #include "cmd.h"
diff --git a/drivers/net/wireless/marvell/libertas/if_sdio.c b/drivers/net/wireless/marvell/libertas/if_sdio.c
index 524034699972..92e9867eefb6 100644
--- a/drivers/net/wireless/marvell/libertas/if_sdio.c
+++ b/drivers/net/wireless/marvell/libertas/if_sdio.c
@@ -36,6 +36,7 @@
 #include <linux/mmc/sdio.h>
 #include <linux/mmc/host.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "host.h"
 #include "decl.h"
diff --git a/drivers/net/wireless/marvell/libertas/mesh.c b/drivers/net/wireless/marvell/libertas/mesh.c
index 2dd635935448..70144f133b70 100644
--- a/drivers/net/wireless/marvell/libertas/mesh.c
+++ b/drivers/net/wireless/marvell/libertas/mesh.c
@@ -4,11 +4,13 @@
 #include <linux/delay.h>
 #include <linux/etherdevice.h>
 #include <linux/hardirq.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/if_ether.h>
 #include <linux/if_arp.h>
 #include <linux/kthread.h>
 #include <linux/kfifo.h>
+#include <linux/sprintf.h>
 #include <net/cfg80211.h>
 
 #include "mesh.h"
diff --git a/drivers/net/wireless/marvell/libertas_tf/deb_defs.h b/drivers/net/wireless/marvell/libertas_tf/deb_defs.h
index 0b520df62f1f..682d963852e3 100644
--- a/drivers/net/wireless/marvell/libertas_tf/deb_defs.h
+++ b/drivers/net/wireless/marvell/libertas_tf/deb_defs.h
@@ -11,6 +11,7 @@
 #endif
 
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_LIBERTAS_THINFIRM_DEBUG
 #define DEBUG
diff --git a/drivers/net/wireless/marvell/mwifiex/debugfs.c b/drivers/net/wireless/marvell/mwifiex/debugfs.c
index d14a0f4c1b6d..a62e36e7ba04 100644
--- a/drivers/net/wireless/marvell/mwifiex/debugfs.c
+++ b/drivers/net/wireless/marvell/mwifiex/debugfs.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "main.h"
 #include "11n.h"
diff --git a/drivers/net/wireless/marvell/mwifiex/main.c b/drivers/net/wireless/marvell/mwifiex/main.c
index d99127dc466e..9bbe007a2b7f 100644
--- a/drivers/net/wireless/marvell/mwifiex/main.c
+++ b/drivers/net/wireless/marvell/mwifiex/main.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/suspend.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "main.h"
 #include "wmm.h"
diff --git a/drivers/net/wireless/marvell/mwifiex/pcie.c b/drivers/net/wireless/marvell/mwifiex/pcie.c
index 5f997becdbaa..f9c8aa6c3c9f 100644
--- a/drivers/net/wireless/marvell/mwifiex/pcie.c
+++ b/drivers/net/wireless/marvell/mwifiex/pcie.c
@@ -7,6 +7,8 @@
 
 #include <linux/iopoll.h>
 #include <linux/firmware.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "decl.h"
 #include "ioctl.h"
diff --git a/drivers/net/wireless/marvell/mwifiex/sdio.c b/drivers/net/wireless/marvell/mwifiex/sdio.c
index 75f53c2f1e1f..27175555af4c 100644
--- a/drivers/net/wireless/marvell/mwifiex/sdio.c
+++ b/drivers/net/wireless/marvell/mwifiex/sdio.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "decl.h"
 #include "ioctl.h"
diff --git a/drivers/net/wireless/marvell/mwifiex/sta_cmd.c b/drivers/net/wireless/marvell/mwifiex/sta_cmd.c
index e2800a831c8e..953fec5d14a2 100644
--- a/drivers/net/wireless/marvell/mwifiex/sta_cmd.c
+++ b/drivers/net/wireless/marvell/mwifiex/sta_cmd.c
@@ -13,6 +13,7 @@
 #include "wmm.h"
 #include "11n.h"
 #include "11ac.h"
+#include <linux/kstrtox.h>
 
 static bool drcs;
 module_param(drcs, bool, 0644);
diff --git a/drivers/net/wireless/marvell/mwifiex/sta_ioctl.c b/drivers/net/wireless/marvell/mwifiex/sta_ioctl.c
index 32a27fad7b79..790e9bc683ee 100644
--- a/drivers/net/wireless/marvell/mwifiex/sta_ioctl.c
+++ b/drivers/net/wireless/marvell/mwifiex/sta_ioctl.c
@@ -13,6 +13,7 @@
 #include "wmm.h"
 #include "11n.h"
 #include "cfg80211.h"
+#include <linux/sprintf.h>
 
 static int disconnect_on_suspend;
 module_param(disconnect_on_suspend, int, 0644);
diff --git a/drivers/net/wireless/marvell/mwifiex/usb.c b/drivers/net/wireless/marvell/mwifiex/usb.c
index 515e6db410f2..0030e69d6b63 100644
--- a/drivers/net/wireless/marvell/mwifiex/usb.c
+++ b/drivers/net/wireless/marvell/mwifiex/usb.c
@@ -7,6 +7,7 @@
 
 #include "main.h"
 #include "usb.h"
+#include <linux/completion.h>
 
 #define USB_VERSION	"1.0"
 
diff --git a/drivers/net/wireless/marvell/mwifiex/util.c b/drivers/net/wireless/marvell/mwifiex/util.c
index 745b1d925b21..aa5e27b6536b 100644
--- a/drivers/net/wireless/marvell/mwifiex/util.c
+++ b/drivers/net/wireless/marvell/mwifiex/util.c
@@ -12,6 +12,7 @@
 #include "main.h"
 #include "wmm.h"
 #include "11n.h"
+#include <linux/sprintf.h>
 
 static struct mwifiex_debug_data items[] = {
 	{"debug_mask", item_size(debug_mask),
diff --git a/drivers/net/wireless/marvell/mwl8k.c b/drivers/net/wireless/marvell/mwl8k.c
index ce8fea76dbb2..639a307cddbf 100644
--- a/drivers/net/wireless/marvell/mwl8k.c
+++ b/drivers/net/wireless/marvell/mwl8k.c
@@ -20,6 +20,7 @@
 #include <linux/completion.h>
 #include <linux/etherdevice.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include <linux/moduleparam.h>
 #include <linux/firmware.h>
diff --git a/drivers/net/wireless/mediatek/mt76/dma.c b/drivers/net/wireless/mediatek/mt76/dma.c
index 00230f106294..715782a51445 100644
--- a/drivers/net/wireless/mediatek/mt76/dma.c
+++ b/drivers/net/wireless/mediatek/mt76/dma.c
@@ -6,6 +6,8 @@
 #include <linux/dma-mapping.h>
 #include "mt76.h"
 #include "dma.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #if IS_ENABLED(CONFIG_NET_MEDIATEK_SOC_WED)
 
diff --git a/drivers/net/wireless/mediatek/mt76/eeprom.c b/drivers/net/wireless/mediatek/mt76/eeprom.c
index 0bc66cc19acd..e4613d9957a8 100644
--- a/drivers/net/wireless/mediatek/mt76/eeprom.c
+++ b/drivers/net/wireless/mediatek/mt76/eeprom.c
@@ -9,6 +9,7 @@
 #include <linux/nvmem-consumer.h>
 #include <linux/etherdevice.h>
 #include "mt76.h"
+#include <linux/sprintf.h>
 
 static int mt76_get_of_eeprom_data(struct mt76_dev *dev, void *eep, int len)
 {
diff --git a/drivers/net/wireless/mediatek/mt76/mac80211.c b/drivers/net/wireless/mediatek/mt76/mac80211.c
index 8bf82755ca4c..a596d5ca3c38 100644
--- a/drivers/net/wireless/mediatek/mt76/mac80211.c
+++ b/drivers/net/wireless/mediatek/mt76/mac80211.c
@@ -5,6 +5,7 @@
 #include <linux/sched.h>
 #include <linux/of.h>
 #include "mt76.h"
+#include <linux/sprintf.h>
 
 #define CHAN2G(_idx, _freq) {			\
 	.band = NL80211_BAND_2GHZ,		\
diff --git a/drivers/net/wireless/mediatek/mt76/mmio.c b/drivers/net/wireless/mediatek/mt76/mmio.c
index c3e0e23e0161..d166fe77bf64 100644
--- a/drivers/net/wireless/mediatek/mt76/mmio.c
+++ b/drivers/net/wireless/mediatek/mt76/mmio.c
@@ -6,6 +6,7 @@
 #include "mt76.h"
 #include "dma.h"
 #include "trace.h"
+#include <linux/completion.h>
 
 static u32 mt76_mmio_rr(struct mt76_dev *dev, u32 offset)
 {
diff --git a/drivers/net/wireless/mediatek/mt76/mt7603/mcu.c b/drivers/net/wireless/mediatek/mt76/mt7603/mcu.c
index 301668c3cc92..a21cc7bd3d30 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7603/mcu.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7603/mcu.c
@@ -4,6 +4,7 @@
 #include "mt7603.h"
 #include "mcu.h"
 #include "eeprom.h"
+#include <linux/sprintf.h>
 
 #define MCU_SKB_RESERVE	8
 
diff --git a/drivers/net/wireless/mediatek/mt76/mt7615/debugfs.c b/drivers/net/wireless/mediatek/mt76/mt7615/debugfs.c
index 2a6d317db5e0..36f115fa52b4 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7615/debugfs.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7615/debugfs.c
@@ -1,6 +1,8 @@
 // SPDX-License-Identifier: ISC
 
 #include "mt7615.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static int
 mt7615_reg_set(void *data, u64 val)
diff --git a/drivers/net/wireless/mediatek/mt76/mt7615/init.c b/drivers/net/wireless/mediatek/mt76/mt7615/init.c
index f7722f67db57..b52d57a8a4fe 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7615/init.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7615/init.c
@@ -14,6 +14,7 @@
 #include "mac.h"
 #include "mcu.h"
 #include "eeprom.h"
+#include <linux/sprintf.h>
 
 static ssize_t mt7615_thermal_show_temp(struct device *dev,
 					struct device_attribute *attr,
diff --git a/drivers/net/wireless/mediatek/mt76/mt7615/mcu.c b/drivers/net/wireless/mediatek/mt76/mt7615/mcu.c
index c807bd8d928d..6100406b88cf 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7615/mcu.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7615/mcu.c
@@ -10,6 +10,7 @@
 #include "mcu.h"
 #include "mac.h"
 #include "eeprom.h"
+#include <linux/sprintf.h>
 
 static bool prefer_offload_fw = true;
 module_param(prefer_offload_fw, bool, 0644);
diff --git a/drivers/net/wireless/mediatek/mt76/mt76_connac_mcu.c b/drivers/net/wireless/mediatek/mt76/mt76_connac_mcu.c
index 3a20ba0d2492..4356b30b5763 100644
--- a/drivers/net/wireless/mediatek/mt76/mt76_connac_mcu.c
+++ b/drivers/net/wireless/mediatek/mt76/mt76_connac_mcu.c
@@ -4,6 +4,7 @@
 #include <linux/firmware.h>
 #include "mt76_connac2_mac.h"
 #include "mt76_connac_mcu.h"
+#include <linux/sprintf.h>
 
 int mt76_connac_mcu_start_firmware(struct mt76_dev *dev, u32 addr, u32 option)
 {
diff --git a/drivers/net/wireless/mediatek/mt76/mt76x02_mcu.c b/drivers/net/wireless/mediatek/mt76/mt76x02_mcu.c
index 75978820a260..73dd84fdeb19 100644
--- a/drivers/net/wireless/mediatek/mt76/mt76x02_mcu.c
+++ b/drivers/net/wireless/mediatek/mt76/mt76x02_mcu.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/firmware.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "mt76x02_mcu.h"
 
diff --git a/drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c b/drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
index 85a78dea4085..b11bc7ab80a8 100644
--- a/drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
+++ b/drivers/net/wireless/mediatek/mt76/mt76x02_usb_core.c
@@ -5,6 +5,8 @@
 
 #include "mt76x02_usb.h"
 
+#include <linux/hrtimer.h>
+
 static void mt76x02u_remove_dma_hdr(struct sk_buff *skb)
 {
 	int hdr_len;
diff --git a/drivers/net/wireless/mediatek/mt76/mt7915/debugfs.c b/drivers/net/wireless/mediatek/mt76/mt7915/debugfs.c
index 6c3696c8c700..c43f4664c827 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7915/debugfs.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7915/debugfs.c
@@ -6,6 +6,8 @@
 #include "eeprom.h"
 #include "mcu.h"
 #include "mac.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define FW_BIN_LOG_MAGIC	0x44e98caf
 
diff --git a/drivers/net/wireless/mediatek/mt76/mt7915/init.c b/drivers/net/wireless/mediatek/mt76/mt7915/init.c
index cea2f6d9050a..6a289b411921 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7915/init.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7915/init.c
@@ -4,7 +4,9 @@
 #include <linux/etherdevice.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include "mt7915.h"
 #include "mac.h"
diff --git a/drivers/net/wireless/mediatek/mt76/mt7915/mmio.c b/drivers/net/wireless/mediatek/mt76/mt7915/mmio.c
index 3039f53e2245..8ce768b7ff8c 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7915/mmio.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7915/mmio.c
@@ -6,6 +6,7 @@
 #include <linux/platform_device.h>
 #include <linux/rtnetlink.h>
 #include <linux/pci.h>
+#include <linux/completion.h>
 
 #include "mt7915.h"
 #include "mac.h"
diff --git a/drivers/net/wireless/mediatek/mt76/mt7921/init.c b/drivers/net/wireless/mediatek/mt76/mt7921/init.c
index 48433c6d5e7d..3b7d6b09b6f0 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7921/init.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7921/init.c
@@ -4,6 +4,8 @@
 #include <linux/etherdevice.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <linux/firmware.h>
 #include "mt7921.h"
diff --git a/drivers/net/wireless/mediatek/mt76/mt7925/mcu.c b/drivers/net/wireless/mediatek/mt76/mt7925/mcu.c
index c5fd7116929b..777a77bc5012 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7925/mcu.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7925/mcu.c
@@ -6,6 +6,7 @@
 #include "mt7925.h"
 #include "mcu.h"
 #include "mac.h"
+#include <linux/sprintf.h>
 
 #define MT_STA_BFER			BIT(0)
 #define MT_STA_BFEE			BIT(1)
diff --git a/drivers/net/wireless/mediatek/mt76/mt7996/debugfs.c b/drivers/net/wireless/mediatek/mt76/mt7996/debugfs.c
index 9bd953586b04..634a479f5cd1 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7996/debugfs.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7996/debugfs.c
@@ -8,6 +8,8 @@
 #include "eeprom.h"
 #include "mcu.h"
 #include "mac.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define FW_BIN_LOG_MAGIC	0x44d9c99a
 
diff --git a/drivers/net/wireless/mediatek/mt76/mt7996/init.c b/drivers/net/wireless/mediatek/mt76/mt7996/init.c
index 0cf0d1fe420a..6c0d809b5b1b 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7996/init.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7996/init.c
@@ -4,9 +4,11 @@
  */
 
 #include <linux/etherdevice.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include "mt7996.h"
 #include "mac.h"
diff --git a/drivers/net/wireless/mediatek/mt76/mt7996/mcu.c b/drivers/net/wireless/mediatek/mt76/mt7996/mcu.c
index 3ec813077dc2..c9e87e99874a 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7996/mcu.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7996/mcu.c
@@ -9,6 +9,7 @@
 #include "mcu.h"
 #include "mac.h"
 #include "eeprom.h"
+#include <linux/sprintf.h>
 
 #define fw_name(_dev, name, ...)	({			\
 	char *_fw;						\
diff --git a/drivers/net/wireless/mediatek/mt76/mt7996/mmio.c b/drivers/net/wireless/mediatek/mt76/mt7996/mmio.c
index 9f2abfa273c9..4965ddbd3e74 100644
--- a/drivers/net/wireless/mediatek/mt76/mt7996/mmio.c
+++ b/drivers/net/wireless/mediatek/mt76/mt7996/mmio.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/rtnetlink.h>
+#include <linux/completion.h>
 
 #include "mt7996.h"
 #include "mac.h"
diff --git a/drivers/net/wireless/mediatek/mt7601u/mcu.c b/drivers/net/wireless/mediatek/mt7601u/mcu.c
index 1b5cc271a9e1..ef6e767a41fe 100644
--- a/drivers/net/wireless/mediatek/mt7601u/mcu.c
+++ b/drivers/net/wireless/mediatek/mt7601u/mcu.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/usb.h>
 #include <linux/skbuff.h>
+#include <linux/completion.h>
 
 #include "mt7601u.h"
 #include "dma.h"
diff --git a/drivers/net/wireless/mediatek/mt7601u/usb.c b/drivers/net/wireless/mediatek/mt7601u/usb.c
index c41ae251cb95..5a1f5d7de8a2 100644
--- a/drivers/net/wireless/mediatek/mt7601u/usb.c
+++ b/drivers/net/wireless/mediatek/mt7601u/usb.c
@@ -6,6 +6,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/usb.h>
+#include <linux/completion.h>
 
 #include "mt7601u.h"
 #include "usb.h"
diff --git a/drivers/net/wireless/microchip/wilc1000/cfg80211.c b/drivers/net/wireless/microchip/wilc1000/cfg80211.c
index f03fd15c0c97..d9c281cb8455 100644
--- a/drivers/net/wireless/microchip/wilc1000/cfg80211.c
+++ b/drivers/net/wireless/microchip/wilc1000/cfg80211.c
@@ -5,6 +5,7 @@
  */
 
 #include "cfg80211.h"
+#include <linux/completion.h>
 
 #define GO_NEG_REQ			0x00
 #define GO_NEG_RSP			0x01
diff --git a/drivers/net/wireless/microchip/wilc1000/hif.c b/drivers/net/wireless/microchip/wilc1000/hif.c
index d2b8c2630819..eea3090ee909 100644
--- a/drivers/net/wireless/microchip/wilc1000/hif.c
+++ b/drivers/net/wireless/microchip/wilc1000/hif.c
@@ -5,6 +5,7 @@
  */
 
 #include "netdev.h"
+#include <linux/completion.h>
 
 #define WILC_HIF_SCAN_TIMEOUT_MS                5000
 #define WILC_HIF_CONNECT_TIMEOUT_MS             9500
diff --git a/drivers/net/wireless/microchip/wilc1000/netdev.c b/drivers/net/wireless/microchip/wilc1000/netdev.c
index ef22bf6bf86a..527666ce5246 100644
--- a/drivers/net/wireless/microchip/wilc1000/netdev.c
+++ b/drivers/net/wireless/microchip/wilc1000/netdev.c
@@ -9,6 +9,7 @@
 #include <linux/firmware.h>
 #include <linux/netdevice.h>
 #include <linux/inetdevice.h>
+#include <linux/completion.h>
 
 #include "cfg80211.h"
 #include "wlan_cfg.h"
diff --git a/drivers/net/wireless/microchip/wilc1000/wlan.c b/drivers/net/wireless/microchip/wilc1000/wlan.c
index 6b2f2269ddf8..732876d53976 100644
--- a/drivers/net/wireless/microchip/wilc1000/wlan.c
+++ b/drivers/net/wireless/microchip/wilc1000/wlan.c
@@ -9,6 +9,7 @@
 #include <net/dsfield.h>
 #include "cfg80211.h"
 #include "wlan_cfg.h"
+#include <linux/completion.h>
 
 #define WAKE_UP_TRIAL_RETRY		10000
 
diff --git a/drivers/net/wireless/quantenna/qtnfmac/pcie/pcie.c b/drivers/net/wireless/quantenna/qtnfmac/pcie/pcie.c
index 9ad4c120fa28..1053ce76a1da 100644
--- a/drivers/net/wireless/quantenna/qtnfmac/pcie/pcie.c
+++ b/drivers/net/wireless/quantenna/qtnfmac/pcie/pcie.c
@@ -8,6 +8,7 @@
 #include <linux/mutex.h>
 #include <linux/netdevice.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/completion.h>
 
diff --git a/drivers/net/wireless/quantenna/qtnfmac/shm_ipc.c b/drivers/net/wireless/quantenna/qtnfmac/shm_ipc.c
index ff678951d3b2..ec0ba189c463 100644
--- a/drivers/net/wireless/quantenna/qtnfmac/shm_ipc.c
+++ b/drivers/net/wireless/quantenna/qtnfmac/shm_ipc.c
@@ -3,6 +3,7 @@
 
 #include <linux/types.h>
 #include <linux/io.h>
+#include <linux/completion.h>
 
 #include "shm_ipc.h"
 
diff --git a/drivers/net/wireless/quantenna/qtnfmac/trans.c b/drivers/net/wireless/quantenna/qtnfmac/trans.c
index 95356e280e23..21869d5be7b3 100644
--- a/drivers/net/wireless/quantenna/qtnfmac/trans.c
+++ b/drivers/net/wireless/quantenna/qtnfmac/trans.c
@@ -4,6 +4,7 @@
 #include <linux/types.h>
 #include <linux/export.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "core.h"
 #include "commands.h"
diff --git a/drivers/net/wireless/ralink/rt2x00/rt2x00debug.c b/drivers/net/wireless/ralink/rt2x00/rt2x00debug.c
index f2395309ec00..7486988c1012 100644
--- a/drivers/net/wireless/ralink/rt2x00/rt2x00debug.c
+++ b/drivers/net/wireless/ralink/rt2x00/rt2x00debug.c
@@ -12,10 +12,12 @@
 
 #include <linux/debugfs.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/poll.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "rt2x00.h"
diff --git a/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c b/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
index c20886b02e64..89fb7e38de21 100644
--- a/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
+++ b/drivers/net/wireless/ralink/rt2x00/rt2x00firmware.c
@@ -13,6 +13,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "rt2x00.h"
 #include "rt2x00lib.h"
diff --git a/drivers/net/wireless/ralink/rt2x00/rt2x00leds.c b/drivers/net/wireless/ralink/rt2x00/rt2x00leds.c
index f5361d582d4e..1a9d1692f95a 100644
--- a/drivers/net/wireless/ralink/rt2x00/rt2x00leds.c
+++ b/drivers/net/wireless/ralink/rt2x00/rt2x00leds.c
@@ -12,6 +12,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "rt2x00.h"
 #include "rt2x00lib.h"
diff --git a/drivers/net/wireless/realtek/rtl818x/rtl8187/leds.c b/drivers/net/wireless/realtek/rtl818x/rtl8187/leds.c
index f7d95c9624a0..3e5f6b9cd12b 100644
--- a/drivers/net/wireless/realtek/rtl818x/rtl8187/leds.c
+++ b/drivers/net/wireless/realtek/rtl818x/rtl8187/leds.c
@@ -15,6 +15,7 @@
 #include <net/mac80211.h>
 #include <linux/usb.h>
 #include <linux/eeprom_93cx6.h>
+#include <linux/sprintf.h>
 
 #include "rtl8187.h"
 #include "leds.h"
diff --git a/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8710b.c b/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8710b.c
index 46d57510e9fc..ef51f585aabb 100644
--- a/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8710b.c
+++ b/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8710b.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c b/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c
index 66bf92c164c3..811bf037a8c5 100644
--- a/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c
+++ b/drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c
@@ -21,6 +21,7 @@
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
diff --git a/drivers/net/wireless/realtek/rtlwifi/btcoexist/halbtcoutsrc.c b/drivers/net/wireless/realtek/rtlwifi/btcoexist/halbtcoutsrc.c
index be4c0e60d44d..09bb12b109c5 100644
--- a/drivers/net/wireless/realtek/rtlwifi/btcoexist/halbtcoutsrc.c
+++ b/drivers/net/wireless/realtek/rtlwifi/btcoexist/halbtcoutsrc.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2007-2013  Realtek Corporation.*/
 
 #include "halbt_precomp.h"
+#include <linux/completion.h>
 
 /***************************************************
  *		Debug related function
diff --git a/drivers/net/wireless/realtek/rtlwifi/btcoexist/rtl_btc.c b/drivers/net/wireless/realtek/rtlwifi/btcoexist/rtl_btc.c
index 4641999f3fe9..1aaa7594e26c 100644
--- a/drivers/net/wireless/realtek/rtlwifi/btcoexist/rtl_btc.c
+++ b/drivers/net/wireless/realtek/rtlwifi/btcoexist/rtl_btc.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2009-2013  Realtek Corporation.*/
 
 #include "../wifi.h"
+#include <linux/completion.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
 
diff --git a/drivers/net/wireless/realtek/rtlwifi/core.c b/drivers/net/wireless/realtek/rtlwifi/core.c
index 2e60a6991ca1..ec937550bf90 100644
--- a/drivers/net/wireless/realtek/rtlwifi/core.c
+++ b/drivers/net/wireless/realtek/rtlwifi/core.c
@@ -7,6 +7,7 @@
 #include "base.h"
 #include "ps.h"
 #include "pwrseqcmd.h"
+#include <linux/completion.h>
 
 #include "btcoexist/rtl_btc.h"
 #include <linux/firmware.h>
diff --git a/drivers/net/wireless/realtek/rtlwifi/debug.c b/drivers/net/wireless/realtek/rtlwifi/debug.c
index 9eb26dfe4ca9..69279b1cea47 100644
--- a/drivers/net/wireless/realtek/rtlwifi/debug.c
+++ b/drivers/net/wireless/realtek/rtlwifi/debug.c
@@ -3,6 +3,7 @@
 
 #include "wifi.h"
 #include "cam.h"
+#include <linux/sprintf.h>
 
 #include <linux/moduleparam.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/net/wireless/realtek/rtlwifi/pci.c b/drivers/net/wireless/realtek/rtlwifi/pci.c
index d059cfe5a2a9..f52b5e23f853 100644
--- a/drivers/net/wireless/realtek/rtlwifi/pci.c
+++ b/drivers/net/wireless/realtek/rtlwifi/pci.c
@@ -7,6 +7,7 @@
 #include "base.h"
 #include "ps.h"
 #include "efuse.h"
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/export.h>
 #include <linux/module.h>
diff --git a/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c b/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
index 675bdd32feb1..121f893136dd 100644
--- a/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
+++ b/drivers/net/wireless/realtek/rtlwifi/rtl8192se/sw.c
@@ -13,6 +13,7 @@
 #include "hw.h"
 #include "trx.h"
 #include "led.h"
+#include <linux/completion.h>
 
 #include <linux/module.h>
 
diff --git a/drivers/net/wireless/realtek/rtlwifi/usb.c b/drivers/net/wireless/realtek/rtlwifi/usb.c
index 1fc480fe18ad..a9c167f41843 100644
--- a/drivers/net/wireless/realtek/rtlwifi/usb.c
+++ b/drivers/net/wireless/realtek/rtlwifi/usb.c
@@ -7,6 +7,7 @@
 #include "base.h"
 #include "ps.h"
 #include "rtl8192c/fw_common.h"
+#include <linux/completion.h>
 #include <linux/export.h>
 #include <linux/module.h>
 
diff --git a/drivers/net/wireless/realtek/rtw88/coex.c b/drivers/net/wireless/realtek/rtw88/coex.c
index 86467d2f8888..d842d7e00b49 100644
--- a/drivers/net/wireless/realtek/rtw88/coex.c
+++ b/drivers/net/wireless/realtek/rtw88/coex.c
@@ -9,6 +9,7 @@
 #include "debug.h"
 #include "reg.h"
 #include "phy.h"
+#include <linux/sprintf.h>
 
 static u8 rtw_coex_next_rssi_state(struct rtw_dev *rtwdev, u8 pre_state,
 				   u8 rssi, u8 rssi_thresh)
diff --git a/drivers/net/wireless/realtek/rtw88/debug.c b/drivers/net/wireless/realtek/rtw88/debug.c
index 5b2036798159..1e034384f943 100644
--- a/drivers/net/wireless/realtek/rtw88/debug.c
+++ b/drivers/net/wireless/realtek/rtw88/debug.c
@@ -3,6 +3,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include "main.h"
 #include "coex.h"
@@ -13,6 +14,7 @@
 #include "reg.h"
 #include "ps.h"
 #include "regd.h"
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_RTW88_DEBUGFS
 
diff --git a/drivers/net/wireless/realtek/rtw88/fw.c b/drivers/net/wireless/realtek/rtw88/fw.c
index 3f037ddcecf1..144d32c5ba5c 100644
--- a/drivers/net/wireless/realtek/rtw88/fw.c
+++ b/drivers/net/wireless/realtek/rtw88/fw.c
@@ -3,6 +3,7 @@
  */
 
 #include <linux/iopoll.h>
+#include <linux/completion.h>
 
 #include "main.h"
 #include "coex.h"
diff --git a/drivers/net/wireless/realtek/rtw88/main.c b/drivers/net/wireless/realtek/rtw88/main.c
index 6d22628129d0..f547edc1b756 100644
--- a/drivers/net/wireless/realtek/rtw88/main.c
+++ b/drivers/net/wireless/realtek/rtw88/main.c
@@ -3,6 +3,7 @@
  */
 
 #include <linux/devcoredump.h>
+#include <linux/completion.h>
 
 #include "main.h"
 #include "regd.h"
diff --git a/drivers/net/wireless/realtek/rtw88/ps.c b/drivers/net/wireless/realtek/rtw88/ps.c
index add5a20b8432..77d92a8f6375 100644
--- a/drivers/net/wireless/realtek/rtw88/ps.c
+++ b/drivers/net/wireless/realtek/rtw88/ps.c
@@ -9,6 +9,7 @@
 #include "mac.h"
 #include "coex.h"
 #include "debug.h"
+#include <linux/completion.h>
 
 static int rtw_ips_pwr_up(struct rtw_dev *rtwdev)
 {
diff --git a/drivers/net/wireless/realtek/rtw89/core.c b/drivers/net/wireless/realtek/rtw89/core.c
index 650c507c8ed3..2b3a97cb71e7 100644
--- a/drivers/net/wireless/realtek/rtw89/core.c
+++ b/drivers/net/wireless/realtek/rtw89/core.c
@@ -3,6 +3,7 @@
  */
 #include <linux/ip.h>
 #include <linux/udp.h>
+#include <linux/completion.h>
 
 #include "cam.h"
 #include "chan.h"
diff --git a/drivers/net/wireless/realtek/rtw89/core.h b/drivers/net/wireless/realtek/rtw89/core.h
index 713383b6d818..1b5c5f08ad2b 100644
--- a/drivers/net/wireless/realtek/rtw89/core.h
+++ b/drivers/net/wireless/realtek/rtw89/core.h
@@ -7,6 +7,7 @@
 
 #include <linux/average.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/iopoll.h>
 #include <linux/workqueue.h>
diff --git a/drivers/net/wireless/realtek/rtw89/debug.c b/drivers/net/wireless/realtek/rtw89/debug.c
index 44829a148185..a45c6bbb9bdd 100644
--- a/drivers/net/wireless/realtek/rtw89/debug.c
+++ b/drivers/net/wireless/realtek/rtw89/debug.c
@@ -3,6 +3,9 @@
  */
 
 #include <linux/vmalloc.h>
+#include <linux/sprintf.h>
+#include <linux/hex.h>
+#include <linux/kstrtox.h>
 
 #include "coex.h"
 #include "debug.h"
diff --git a/drivers/net/wireless/realtek/rtw89/fw.c b/drivers/net/wireless/realtek/rtw89/fw.c
index 540ea16f048e..db328220d701 100644
--- a/drivers/net/wireless/realtek/rtw89/fw.c
+++ b/drivers/net/wireless/realtek/rtw89/fw.c
@@ -12,6 +12,8 @@
 #include "ps.h"
 #include "reg.h"
 #include "util.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static const u8 mss_signature[] = {0x4D, 0x53, 0x53, 0x4B, 0x50, 0x4F, 0x4F, 0x4C};
 
diff --git a/drivers/net/wireless/realtek/rtw89/fw.h b/drivers/net/wireless/realtek/rtw89/fw.h
index 5609e5f7d7eb..9f7ee0d5c693 100644
--- a/drivers/net/wireless/realtek/rtw89/fw.h
+++ b/drivers/net/wireless/realtek/rtw89/fw.h
@@ -6,6 +6,7 @@
 #define __RTW89_FW_H__
 
 #include "core.h"
+#include <linux/sprintf.h>
 
 enum rtw89_fw_dl_status {
 	RTW89_FWDL_INITIAL_STATE = 0,
diff --git a/drivers/net/wireless/rsi/rsi_91x_debugfs.c b/drivers/net/wireless/rsi/rsi_91x_debugfs.c
index c528e6ca2c8d..8916a93c855b 100644
--- a/drivers/net/wireless/rsi/rsi_91x_debugfs.c
+++ b/drivers/net/wireless/rsi/rsi_91x_debugfs.c
@@ -16,6 +16,8 @@
 
 #include "rsi_debugfs.h"
 #include "rsi_sdio.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /**
  * rsi_sdio_stats_read() - This function returns the sdio status of the driver.
diff --git a/drivers/net/wireless/rsi/rsi_91x_mac80211.c b/drivers/net/wireless/rsi/rsi_91x_mac80211.c
index 211fa25b9a78..a368da29a7f5 100644
--- a/drivers/net/wireless/rsi/rsi_91x_mac80211.c
+++ b/drivers/net/wireless/rsi/rsi_91x_mac80211.c
@@ -20,6 +20,7 @@
 #include "rsi_sdio.h"
 #include "rsi_common.h"
 #include "rsi_ps.h"
+#include <linux/completion.h>
 
 static const struct ieee80211_channel rsi_2ghz_channels[] = {
 	{ .band = NL80211_BAND_2GHZ, .center_freq = 2412,
diff --git a/drivers/net/wireless/rsi/rsi_91x_main.c b/drivers/net/wireless/rsi/rsi_91x_main.c
index 2112d8d277a9..c9752341feb3 100644
--- a/drivers/net/wireless/rsi/rsi_91x_main.c
+++ b/drivers/net/wireless/rsi/rsi_91x_main.c
@@ -24,6 +24,7 @@
 #include "rsi_coex.h"
 #include "rsi_hal.h"
 #include "rsi_usb.h"
+#include <linux/completion.h>
 
 u32 rsi_zone_enabled = /* INFO_ZONE |
 			INIT_ZONE |
diff --git a/drivers/net/wireless/rsi/rsi_91x_mgmt.c b/drivers/net/wireless/rsi/rsi_91x_mgmt.c
index 7f2c1608f2ce..054f8c990077 100644
--- a/drivers/net/wireless/rsi/rsi_91x_mgmt.c
+++ b/drivers/net/wireless/rsi/rsi_91x_mgmt.c
@@ -20,6 +20,7 @@
 #include "rsi_common.h"
 #include "rsi_ps.h"
 #include "rsi_hal.h"
+#include <linux/completion.h>
 
 static struct bootup_params boot_params_20 = {
 	.magic_number = cpu_to_le16(0x5aa5),
diff --git a/drivers/net/wireless/rsi/rsi_common.h b/drivers/net/wireless/rsi/rsi_common.h
index 7aa5124575cf..6ada115e723f 100644
--- a/drivers/net/wireless/rsi/rsi_common.h
+++ b/drivers/net/wireless/rsi/rsi_common.h
@@ -18,6 +18,7 @@
 #define __RSI_COMMON_H__
 
 #include <linux/kthread.h>
+#include <linux/completion.h>
 
 #define EVENT_WAIT_FOREVER              0
 #define FIRMWARE_RSI9113                "rs9113_wlan_qspi.rps"
diff --git a/drivers/net/wireless/silabs/wfx/bh.c b/drivers/net/wireless/silabs/wfx/bh.c
index 21dfdcf9cc27..6cc798ab06ca 100644
--- a/drivers/net/wireless/silabs/wfx/bh.c
+++ b/drivers/net/wireless/silabs/wfx/bh.c
@@ -7,6 +7,7 @@
  */
 #include <linux/gpio/consumer.h>
 #include <net/mac80211.h>
+#include <linux/completion.h>
 
 #include "bh.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/debug.c b/drivers/net/wireless/silabs/wfx/debug.c
index e8265208f9a5..01107416e91d 100644
--- a/drivers/net/wireless/silabs/wfx/debug.c
+++ b/drivers/net/wireless/silabs/wfx/debug.c
@@ -8,6 +8,7 @@
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
 #include <linux/crc32.h>
+#include <linux/completion.h>
 
 #include "debug.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/fwio.c b/drivers/net/wireless/silabs/wfx/fwio.c
index 52c7f560b062..3419af5f8c95 100644
--- a/drivers/net/wireless/silabs/wfx/fwio.c
+++ b/drivers/net/wireless/silabs/wfx/fwio.c
@@ -6,9 +6,11 @@
  * Copyright (c) 2010, ST-Ericsson
  */
 #include <linux/firmware.h>
+#include <linux/hex.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
 #include <linux/bitfield.h>
+#include <linux/sprintf.h>
 
 #include "fwio.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/hif_rx.c b/drivers/net/wireless/silabs/wfx/hif_rx.c
index 64ca8acb8e4f..6a13e0543d20 100644
--- a/drivers/net/wireless/silabs/wfx/hif_rx.c
+++ b/drivers/net/wireless/silabs/wfx/hif_rx.c
@@ -7,6 +7,7 @@
  */
 #include <linux/skbuff.h>
 #include <linux/etherdevice.h>
+#include <linux/completion.h>
 
 #include "hif_rx.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/hif_tx.c b/drivers/net/wireless/silabs/wfx/hif_tx.c
index 9f403d275cb1..e6e94791d383 100644
--- a/drivers/net/wireless/silabs/wfx/hif_tx.c
+++ b/drivers/net/wireless/silabs/wfx/hif_tx.c
@@ -7,6 +7,7 @@
  * Copyright (c) 2010, ST-Ericsson
  */
 #include <linux/etherdevice.h>
+#include <linux/completion.h>
 
 #include "hif_tx.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/main.c b/drivers/net/wireless/silabs/wfx/main.c
index e7198520bdff..297ad9aed760 100644
--- a/drivers/net/wireless/silabs/wfx/main.c
+++ b/drivers/net/wireless/silabs/wfx/main.c
@@ -18,6 +18,8 @@
 #include <linux/spi/spi.h>
 #include <linux/etherdevice.h>
 #include <linux/firmware.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "main.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/scan.c b/drivers/net/wireless/silabs/wfx/scan.c
index c3c103ff88cc..56cfe46d5007 100644
--- a/drivers/net/wireless/silabs/wfx/scan.c
+++ b/drivers/net/wireless/silabs/wfx/scan.c
@@ -6,6 +6,7 @@
  * Copyright (c) 2010, ST-Ericsson
  */
 #include <net/mac80211.h>
+#include <linux/completion.h>
 
 #include "scan.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/sta.c b/drivers/net/wireless/silabs/wfx/sta.c
index a904602f02ce..11db3a979191 100644
--- a/drivers/net/wireless/silabs/wfx/sta.c
+++ b/drivers/net/wireless/silabs/wfx/sta.c
@@ -7,6 +7,7 @@
  */
 #include <linux/etherdevice.h>
 #include <net/mac80211.h>
+#include <linux/completion.h>
 
 #include "sta.h"
 #include "wfx.h"
diff --git a/drivers/net/wireless/silabs/wfx/traces.h b/drivers/net/wireless/silabs/wfx/traces.h
index e011e8a46bd5..869130b52a50 100644
--- a/drivers/net/wireless/silabs/wfx/traces.h
+++ b/drivers/net/wireless/silabs/wfx/traces.h
@@ -13,6 +13,7 @@
 
 #include <linux/tracepoint.h>
 #include <net/mac80211.h>
+#include <linux/sprintf.h>
 
 #include "bus.h"
 #include "hif_api_cmd.h"
diff --git a/drivers/net/wireless/ti/wl1251/debugfs.c b/drivers/net/wireless/ti/wl1251/debugfs.c
index a1b778a0fda0..5d61d804b2bb 100644
--- a/drivers/net/wireless/ti/wl1251/debugfs.c
+++ b/drivers/net/wireless/ti/wl1251/debugfs.c
@@ -6,6 +6,7 @@
  */
 
 #include "debugfs.h"
+#include <linux/sprintf.h>
 
 #include <linux/skbuff.h>
 #include <linux/slab.h>
diff --git a/drivers/net/wireless/ti/wl18xx/debugfs.c b/drivers/net/wireless/ti/wl18xx/debugfs.c
index 80fbf740fe6d..f3c52743d0d6 100644
--- a/drivers/net/wireless/ti/wl18xx/debugfs.c
+++ b/drivers/net/wireless/ti/wl18xx/debugfs.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/pm_runtime.h>
+#include <linux/kstrtox.h>
 
 #include "../wlcore/debugfs.h"
 #include "../wlcore/wlcore.h"
diff --git a/drivers/net/wireless/ti/wlcore/boot.c b/drivers/net/wireless/ti/wlcore/boot.c
index f481c2e3dbc8..beaae0431281 100644
--- a/drivers/net/wireless/ti/wlcore/boot.c
+++ b/drivers/net/wireless/ti/wlcore/boot.c
@@ -9,6 +9,7 @@
 
 #include <linux/slab.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include "debug.h"
 #include "acx.h"
diff --git a/drivers/net/wireless/ti/wlcore/debugfs.c b/drivers/net/wireless/ti/wlcore/debugfs.c
index eb3d3f0e0b4d..a2e611104e09 100644
--- a/drivers/net/wireless/ti/wlcore/debugfs.c
+++ b/drivers/net/wireless/ti/wlcore/debugfs.c
@@ -8,6 +8,8 @@
  */
 
 #include "debugfs.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/skbuff.h>
 #include <linux/slab.h>
diff --git a/drivers/net/wireless/ti/wlcore/debugfs.h b/drivers/net/wireless/ti/wlcore/debugfs.h
index a9e13e6d65c5..7967f8f68d2e 100644
--- a/drivers/net/wireless/ti/wlcore/debugfs.h
+++ b/drivers/net/wireless/ti/wlcore/debugfs.h
@@ -11,6 +11,7 @@
 #define __DEBUGFS_H__
 
 #include "wlcore.h"
+#include <linux/sprintf.h>
 
 __printf(4, 5) int wl1271_format_buffer(char __user *userbuf, size_t count,
 					loff_t *ppos, char *fmt, ...);
diff --git a/drivers/net/wireless/ti/wlcore/main.c b/drivers/net/wireless/ti/wlcore/main.c
index ef12169f8044..65375131a808 100644
--- a/drivers/net/wireless/ti/wlcore/main.c
+++ b/drivers/net/wireless/ti/wlcore/main.c
@@ -14,6 +14,7 @@
 #include <linux/irq.h>
 #include <linux/pm_runtime.h>
 #include <linux/pm_wakeirq.h>
+#include <linux/completion.h>
 
 #include "wlcore.h"
 #include "debug.h"
diff --git a/drivers/net/wireless/ti/wlcore/sysfs.c b/drivers/net/wireless/ti/wlcore/sysfs.c
index f0c7e09b314d..e0a827880750 100644
--- a/drivers/net/wireless/ti/wlcore/sysfs.c
+++ b/drivers/net/wireless/ti/wlcore/sysfs.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "acx.h"
 #include "wlcore.h"
diff --git a/drivers/net/wireless/virtual/mac80211_hwsim.c b/drivers/net/wireless/virtual/mac80211_hwsim.c
index c337afd8bee2..6defa1d556c1 100644
--- a/drivers/net/wireless/virtual/mac80211_hwsim.c
+++ b/drivers/net/wireless/virtual/mac80211_hwsim.c
@@ -23,6 +23,7 @@
 #include <net/ieee80211_radiotap.h>
 #include <linux/if_arp.h>
 #include <linux/rtnetlink.h>
+#include <linux/hrtimer.h>
 #include <linux/etherdevice.h>
 #include <linux/platform_device.h>
 #include <linux/debugfs.h>
diff --git a/drivers/net/wireless/zydas/zd1211rw/zd_chip.c b/drivers/net/wireless/zydas/zd1211rw/zd_chip.c
index 3bb51dc8d035..7115b806acb8 100644
--- a/drivers/net/wireless/zydas/zd1211rw/zd_chip.c
+++ b/drivers/net/wireless/zydas/zd1211rw/zd_chip.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "zd_def.h"
 #include "zd_chip.h"
diff --git a/drivers/net/wireless/zydas/zd1211rw/zd_rf.c b/drivers/net/wireless/zydas/zd1211rw/zd_rf.c
index d356ae330363..857fbcd984b2 100644
--- a/drivers/net/wireless/zydas/zd1211rw/zd_rf.c
+++ b/drivers/net/wireless/zydas/zd1211rw/zd_rf.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include "zd_def.h"
diff --git a/drivers/net/wireless/zydas/zd1211rw/zd_usb.c b/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
index 8505d84eeed6..d5a4fabd11f4 100644
--- a/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
+++ b/drivers/net/wireless/zydas/zd1211rw/zd_usb.c
@@ -13,11 +13,13 @@
 #include <linux/errno.h>
 #include <linux/slab.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/workqueue.h>
 #include <linux/module.h>
 #include <net/mac80211.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "zd_def.h"
 #include "zd_mac.h"
diff --git a/drivers/net/wwan/iosm/iosm_ipc_coredump.c b/drivers/net/wwan/iosm/iosm_ipc_coredump.c
index 26ca30476f40..7fb5c2d1f130 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_coredump.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_coredump.c
@@ -3,6 +3,7 @@
  * Copyright (C) 2020-2021 Intel Corporation.
  */
 #include <linux/vmalloc.h>
+#include <linux/sprintf.h>
 
 #include "iosm_ipc_coredump.h"
 
diff --git a/drivers/net/wwan/iosm/iosm_ipc_devlink.c b/drivers/net/wwan/iosm/iosm_ipc_devlink.c
index 2fe724d623c0..868fc83722d9 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_devlink.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_devlink.c
@@ -3,6 +3,7 @@
  * Copyright (C) 2020-2021 Intel Corporation.
  */
 #include <linux/vmalloc.h>
+#include <linux/completion.h>
 
 #include "iosm_ipc_chnl_cfg.h"
 #include "iosm_ipc_coredump.h"
diff --git a/drivers/net/wwan/iosm/iosm_ipc_flash.c b/drivers/net/wwan/iosm/iosm_ipc_flash.c
index d890914aa349..1840100071e5 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_flash.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_flash.c
@@ -6,6 +6,7 @@
 #include "iosm_ipc_coredump.h"
 #include "iosm_ipc_devlink.h"
 #include "iosm_ipc_flash.h"
+#include <linux/sprintf.h>
 
 /* This function will pack the data to be sent to the modem using the
  * payload, payload length and pack id
diff --git a/drivers/net/wwan/iosm/iosm_ipc_imem.c b/drivers/net/wwan/iosm/iosm_ipc_imem.c
index 829515a601b3..08c9a5c76efb 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_imem.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_imem.c
@@ -4,6 +4,8 @@
  */
 
 #include <linux/delay.h>
+#include <linux/hrtimer.h>
+#include <linux/completion.h>
 
 #include "iosm_ipc_chnl_cfg.h"
 #include "iosm_ipc_devlink.h"
diff --git a/drivers/net/wwan/iosm/iosm_ipc_imem_ops.c b/drivers/net/wwan/iosm/iosm_ipc_imem_ops.c
index 109cf8930488..e805f05d5723 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_imem_ops.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_imem_ops.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/completion.h>
 
 #include "iosm_ipc_chnl_cfg.h"
 #include "iosm_ipc_devlink.h"
diff --git a/drivers/net/wwan/iosm/iosm_ipc_mux_codec.c b/drivers/net/wwan/iosm/iosm_ipc_mux_codec.c
index bff46f7ca59f..93ff7033af3c 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_mux_codec.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_mux_codec.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/nospec.h>
+#include <linux/completion.h>
 
 #include "iosm_ipc_imem_ops.h"
 #include "iosm_ipc_mux_codec.h"
diff --git a/drivers/net/wwan/iosm/iosm_ipc_pm.c b/drivers/net/wwan/iosm/iosm_ipc_pm.c
index 413601c72dcd..fe1500b5da86 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_pm.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_pm.c
@@ -4,6 +4,7 @@
  */
 
 #include "iosm_ipc_protocol.h"
+#include <linux/completion.h>
 
 /* Timeout value in MS for the PM to wait for device to reach active state */
 #define IPC_PM_ACTIVE_TIMEOUT_MS (500)
diff --git a/drivers/net/wwan/iosm/iosm_ipc_protocol.c b/drivers/net/wwan/iosm/iosm_ipc_protocol.c
index 63fc7012f09f..62649d69c0a5 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_protocol.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_protocol.c
@@ -8,6 +8,7 @@
 #include "iosm_ipc_protocol_ops.h"
 #include "iosm_ipc_pm.h"
 #include "iosm_ipc_task_queue.h"
+#include <linux/completion.h>
 
 int ipc_protocol_tq_msg_send(struct iosm_protocol *ipc_protocol,
 			     enum ipc_msg_prep_type msg_type,
diff --git a/drivers/net/wwan/iosm/iosm_ipc_protocol_ops.c b/drivers/net/wwan/iosm/iosm_ipc_protocol_ops.c
index 4627847c6daa..42a72dc1d0d3 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_protocol_ops.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_protocol_ops.c
@@ -5,6 +5,7 @@
 
 #include "iosm_ipc_protocol.h"
 #include "iosm_ipc_protocol_ops.h"
+#include <linux/completion.h>
 
 /* Get the next free message element.*/
 static union ipc_mem_msg_entry *
diff --git a/drivers/net/wwan/iosm/iosm_ipc_task_queue.c b/drivers/net/wwan/iosm/iosm_ipc_task_queue.c
index 852a99166144..560768421718 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_task_queue.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_task_queue.c
@@ -5,6 +5,7 @@
 
 #include "iosm_ipc_imem.h"
 #include "iosm_ipc_task_queue.h"
+#include <linux/completion.h>
 
 /* Actual tasklet function, will be called whenever tasklet is scheduled.
  * Calls event handler involves callback for each element in the message queue
diff --git a/drivers/net/wwan/iosm/iosm_ipc_trace.c b/drivers/net/wwan/iosm/iosm_ipc_trace.c
index eeecfa3d10c5..ef2a41e7d873 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_trace.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_trace.c
@@ -5,6 +5,8 @@
 
 #include <linux/wwan.h>
 #include "iosm_ipc_trace.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /* sub buffer size and number of sub buffer */
 #define IOSM_TRC_SUB_BUFF_SIZE 131072
diff --git a/drivers/net/wwan/iosm/iosm_ipc_uevent.c b/drivers/net/wwan/iosm/iosm_ipc_uevent.c
index d12188ffed7e..430607e56335 100644
--- a/drivers/net/wwan/iosm/iosm_ipc_uevent.c
+++ b/drivers/net/wwan/iosm/iosm_ipc_uevent.c
@@ -6,6 +6,7 @@
 #include <linux/device.h>
 #include <linux/kobject.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "iosm_ipc_uevent.h"
 
diff --git a/drivers/net/wwan/t7xx/t7xx_dpmaif.c b/drivers/net/wwan/t7xx/t7xx_dpmaif.c
index 6d3edadecbec..9379d6edb468 100644
--- a/drivers/net/wwan/t7xx/t7xx_dpmaif.c
+++ b/drivers/net/wwan/t7xx/t7xx_dpmaif.c
@@ -23,6 +23,7 @@
 #include <linux/dev_printk.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for lower_32_bits(), upper_32_bits()
 #include <linux/types.h>
 
 #include "t7xx_dpmaif.h"
diff --git a/drivers/net/wwan/t7xx/t7xx_hif_cldma.c b/drivers/net/wwan/t7xx/t7xx_hif_cldma.c
index abc41a7089fa..7974a95b6130 100644
--- a/drivers/net/wwan/t7xx/t7xx_hif_cldma.c
+++ b/drivers/net/wwan/t7xx/t7xx_hif_cldma.c
@@ -38,6 +38,7 @@
 #include <linux/skbuff.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/wait.h>
 #include <linux/workqueue.h>
diff --git a/drivers/net/wwan/wwan_core.c b/drivers/net/wwan/wwan_core.c
index 2ed20b20e7fc..53f8db5e4939 100644
--- a/drivers/net/wwan/wwan_core.c
+++ b/drivers/net/wwan/wwan_core.c
@@ -13,6 +13,7 @@
 #include <linux/poll.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 #include <linux/termios.h>
diff --git a/drivers/net/wwan/wwan_hwsim.c b/drivers/net/wwan/wwan_hwsim.c
index ff3dd24ddb33..3ccac85df00c 100644
--- a/drivers/net/wwan/wwan_hwsim.c
+++ b/drivers/net/wwan/wwan_hwsim.c
@@ -15,6 +15,7 @@
 #include <linux/list.h>
 #include <linux/skbuff.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/wwan.h>
 #include <linux/debugfs.h>
 #include <linux/workqueue.h>
diff --git a/drivers/net/xen-netback/interface.c b/drivers/net/xen-netback/interface.c
index 7cff90aa8d24..5dc410272ff6 100644
--- a/drivers/net/xen-netback/interface.c
+++ b/drivers/net/xen-netback/interface.c
@@ -29,6 +29,7 @@
  */
 
 #include "common.h"
+#include <linux/sprintf.h>
 
 #include <linux/kthread.h>
 #include <linux/sched/task.h>
diff --git a/drivers/net/xen-netback/xenbus.c b/drivers/net/xen-netback/xenbus.c
index a78a25b87240..888389c66c30 100644
--- a/drivers/net/xen-netback/xenbus.c
+++ b/drivers/net/xen-netback/xenbus.c
@@ -7,6 +7,8 @@
 */
 
 #include "common.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/rtnetlink.h>
 
diff --git a/drivers/net/xen-netfront.c b/drivers/net/xen-netfront.c
index ad29f370034e..cf61548b2121 100644
--- a/drivers/net/xen-netfront.c
+++ b/drivers/net/xen-netfront.c
@@ -33,11 +33,13 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/skbuff.h>
 #include <linux/ethtool.h>
 #include <linux/if_ether.h>
+#include <linux/sprintf.h>
 #include <net/tcp.h>
 #include <linux/udp.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/nfc/nfcmrvl/fw_dnld.c b/drivers/nfc/nfcmrvl/fw_dnld.c
index e83f65596a88..02d887acf0ba 100644
--- a/drivers/nfc/nfcmrvl/fw_dnld.c
+++ b/drivers/nfc/nfcmrvl/fw_dnld.c
@@ -9,6 +9,7 @@
 #include <asm/unaligned.h>
 #include <linux/firmware.h>
 #include <linux/nfc.h>
+#include <linux/sprintf.h>
 #include <net/nfc/nci.h>
 #include <net/nfc/nci_core.h>
 #include "nfcmrvl.h"
diff --git a/drivers/nfc/nfcmrvl/spi.c b/drivers/nfc/nfcmrvl/spi.c
index ad3359a4942c..1aee4441fa42 100644
--- a/drivers/nfc/nfcmrvl/spi.c
+++ b/drivers/nfc/nfcmrvl/spi.c
@@ -13,6 +13,7 @@
 #include <net/nfc/nci_core.h>
 #include <linux/spi/spi.h>
 #include "nfcmrvl.h"
+#include <linux/completion.h>
 
 #define SPI_WAIT_HANDSHAKE	1
 
diff --git a/drivers/nfc/nfcsim.c b/drivers/nfc/nfcsim.c
index a55381f80cd6..2e6df8ff0348 100644
--- a/drivers/nfc/nfcsim.c
+++ b/drivers/nfc/nfcsim.c
@@ -10,6 +10,8 @@
 #include <linux/ctype.h>
 #include <linux/debugfs.h>
 #include <linux/nfc.h>
+#include <linux/random.h>
+#include <linux/sprintf.h>
 #include <net/nfc/nfc.h>
 #include <net/nfc/digital.h>
 
diff --git a/drivers/nfc/nxp-nci/core.c b/drivers/nfc/nxp-nci/core.c
index 66b198663387..124e19128d18 100644
--- a/drivers/nfc/nxp-nci/core.c
+++ b/drivers/nfc/nxp-nci/core.c
@@ -13,6 +13,7 @@
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/nfc.h>
+#include <linux/completion.h>
 
 #include <net/nfc/nci_core.h>
 
diff --git a/drivers/nfc/pn533/pn533.c b/drivers/nfc/pn533/pn533.c
index b19c39dcfbd9..72e84e31bf81 100644
--- a/drivers/nfc/pn533/pn533.c
+++ b/drivers/nfc/pn533/pn533.c
@@ -14,6 +14,7 @@
 #include <linux/netdevice.h>
 #include <net/nfc/nfc.h>
 #include "pn533.h"
+#include <linux/completion.h>
 
 #define VERSION "0.3"
 
diff --git a/drivers/nfc/pn533/usb.c b/drivers/nfc/pn533/usb.c
index a187f0e0b0f7..0eb1b8d61648 100644
--- a/drivers/nfc/pn533/usb.c
+++ b/drivers/nfc/pn533/usb.c
@@ -15,6 +15,7 @@
 #include <linux/netdevice.h>
 #include <net/nfc/nfc.h>
 #include "pn533.h"
+#include <linux/completion.h>
 
 #define VERSION "0.1"
 
diff --git a/drivers/nfc/port100.c b/drivers/nfc/port100.c
index 00d8ea6dcb5d..ef6e28b067fb 100644
--- a/drivers/nfc/port100.c
+++ b/drivers/nfc/port100.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/usb.h>
 #include <net/nfc/digital.h>
+#include <linux/completion.h>
 
 #define VERSION "0.1"
 
diff --git a/drivers/nfc/st-nci/se.c b/drivers/nfc/st-nci/se.c
index b2f1ced8e6dd..4875aba95d32 100644
--- a/drivers/nfc/st-nci/se.c
+++ b/drivers/nfc/st-nci/se.c
@@ -8,8 +8,10 @@
 #include <linux/module.h>
 #include <linux/nfc.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <net/nfc/nci.h>
 #include <net/nfc/nci_core.h>
+#include <linux/completion.h>
 
 #include "st-nci.h"
 
diff --git a/drivers/nfc/st21nfca/core.c b/drivers/nfc/st21nfca/core.c
index 161caf2675cf..673a952341ef 100644
--- a/drivers/nfc/st21nfca/core.c
+++ b/drivers/nfc/st21nfca/core.c
@@ -7,7 +7,9 @@
 
 #include <linux/module.h>
 #include <linux/nfc.h>
+#include <linux/sprintf.h>
 #include <net/nfc/hci.h>
+#include <linux/completion.h>
 
 #include "st21nfca.h"
 
diff --git a/drivers/nfc/st21nfca/dep.c b/drivers/nfc/st21nfca/dep.c
index 1ec651e31064..504e4a06df3e 100644
--- a/drivers/nfc/st21nfca/dep.c
+++ b/drivers/nfc/st21nfca/dep.c
@@ -4,6 +4,7 @@
  */
 
 #include <net/nfc/hci.h>
+#include <linux/random.h>
 
 #include "st21nfca.h"
 
diff --git a/drivers/nfc/st21nfca/se.c b/drivers/nfc/st21nfca/se.c
index dae288bebcb5..ed5b84a1df41 100644
--- a/drivers/nfc/st21nfca/se.c
+++ b/drivers/nfc/st21nfca/se.c
@@ -4,6 +4,7 @@
  */
 
 #include <net/nfc/hci.h>
+#include <linux/completion.h>
 
 #include "st21nfca.h"
 
diff --git a/drivers/nfc/st21nfca/vendor_cmds.c b/drivers/nfc/st21nfca/vendor_cmds.c
index bfa418d4c6b0..9bf829ce5a25 100644
--- a/drivers/nfc/st21nfca/vendor_cmds.c
+++ b/drivers/nfc/st21nfca/vendor_cmds.c
@@ -10,6 +10,7 @@
 #include <linux/nfc.h>
 #include <net/nfc/hci.h>
 #include <net/nfc/llc.h>
+#include <linux/completion.h>
 
 #include "st21nfca.h"
 
diff --git a/drivers/nfc/st95hf/core.c b/drivers/nfc/st95hf/core.c
index ed704bb77226..2199fa3b8160 100644
--- a/drivers/nfc/st95hf/core.c
+++ b/drivers/nfc/st95hf/core.c
@@ -21,6 +21,7 @@
 #include <linux/wait.h>
 #include <net/nfc/digital.h>
 #include <net/nfc/nfc.h>
+#include <linux/completion.h>
 
 #include "spi.h"
 
diff --git a/drivers/nfc/st95hf/spi.c b/drivers/nfc/st95hf/spi.c
index ffaf2789c406..b6ac425b2599 100644
--- a/drivers/nfc/st95hf/spi.c
+++ b/drivers/nfc/st95hf/spi.c
@@ -7,6 +7,7 @@
  */
 
 #include "spi.h"
+#include <linux/completion.h>
 
 /* Function to send user provided buffer to ST95HF through SPI */
 int st95hf_spi_send(struct st95hf_spi_context *spicontext,
diff --git a/drivers/ntb/core.c b/drivers/ntb/core.c
index 27dd93deff6e..a1e448311318 100644
--- a/drivers/ntb/core.c
+++ b/drivers/ntb/core.c
@@ -56,6 +56,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <linux/ntb.h>
 #include <linux/pci.h>
diff --git a/drivers/ntb/hw/amd/ntb_hw_amd.c b/drivers/ntb/hw/amd/ntb_hw_amd.c
index d687e8c2cc78..39129a8512da 100644
--- a/drivers/ntb/hw/amd/ntb_hw_amd.c
+++ b/drivers/ntb/hw/amd/ntb_hw_amd.c
@@ -58,6 +58,7 @@
 #include <linux/random.h>
 #include <linux/slab.h>
 #include <linux/ntb.h>
+#include <linux/sprintf.h>
 
 #include "ntb_hw_amd.h"
 
diff --git a/drivers/ntb/hw/epf/ntb_hw_epf.c b/drivers/ntb/hw/epf/ntb_hw_epf.c
index b640aa0bf45e..3a79b1347a80 100644
--- a/drivers/ntb/hw/epf/ntb_hw_epf.c
+++ b/drivers/ntb/hw/epf/ntb_hw_epf.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
diff --git a/drivers/ntb/hw/idt/ntb_hw_idt.c b/drivers/ntb/hw/idt/ntb_hw_idt.c
index 48823b53ede3..23aadba76699 100644
--- a/drivers/ntb/hw/idt/ntb_hw_idt.c
+++ b/drivers/ntb/hw/idt/ntb_hw_idt.c
@@ -43,6 +43,7 @@
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/bitops.h>
+#include <linux/kstrtox.h>
 #include <linux/sizes.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
@@ -58,6 +59,7 @@
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
 #include <linux/ntb.h>
+#include <linux/sprintf.h>
 
 #include "ntb_hw_idt.h"
 
diff --git a/drivers/ntb/hw/intel/ntb_hw_gen1.c b/drivers/ntb/hw/intel/ntb_hw_gen1.c
index 079b8cd79785..e87cc7105bba 100644
--- a/drivers/ntb/hw/intel/ntb_hw_gen1.c
+++ b/drivers/ntb/hw/intel/ntb_hw_gen1.c
@@ -56,6 +56,7 @@
 #include <linux/random.h>
 #include <linux/slab.h>
 #include <linux/ntb.h>
+#include <linux/sprintf.h>
 
 #include "ntb_hw_intel.h"
 #include "ntb_hw_gen1.h"
diff --git a/drivers/ntb/hw/intel/ntb_hw_gen3.c b/drivers/ntb/hw/intel/ntb_hw_gen3.c
index ffcfc3e02c35..ad516f6a5821 100644
--- a/drivers/ntb/hw/intel/ntb_hw_gen3.c
+++ b/drivers/ntb/hw/intel/ntb_hw_gen3.c
@@ -53,6 +53,7 @@
 #include <linux/random.h>
 #include <linux/slab.h>
 #include <linux/ntb.h>
+#include <linux/sprintf.h>
 
 #include "ntb_hw_intel.h"
 #include "ntb_hw_gen1.h"
diff --git a/drivers/ntb/hw/intel/ntb_hw_gen4.c b/drivers/ntb/hw/intel/ntb_hw_gen4.c
index 22cac7975b3c..d6a8d43b45ad 100644
--- a/drivers/ntb/hw/intel/ntb_hw_gen4.c
+++ b/drivers/ntb/hw/intel/ntb_hw_gen4.c
@@ -10,6 +10,7 @@
 #include <linux/slab.h>
 #include <linux/ntb.h>
 #include <linux/log2.h>
+#include <linux/sprintf.h>
 
 #include "ntb_hw_intel.h"
 #include "ntb_hw_gen1.h"
diff --git a/drivers/ntb/hw/mscc/ntb_hw_switchtec.c b/drivers/ntb/hw/mscc/ntb_hw_switchtec.c
index d6bbcc7b5b90..0a00342b04d5 100644
--- a/drivers/ntb/hw/mscc/ntb_hw_switchtec.c
+++ b/drivers/ntb/hw/mscc/ntb_hw_switchtec.c
@@ -7,6 +7,7 @@
 #include <linux/interrupt.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kthread.h>
 #include <linux/module.h>
 #include <linux/ntb.h>
diff --git a/drivers/ntb/ntb_transport.c b/drivers/ntb/ntb_transport.c
index f9e7847a378e..a13aac4607ba 100644
--- a/drivers/ntb/ntb_transport.c
+++ b/drivers/ntb/ntb_transport.c
@@ -54,9 +54,11 @@
 #include <linux/errno.h>
 #include <linux/export.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 #include "linux/ntb.h"
diff --git a/drivers/ntb/test/ntb_msi_test.c b/drivers/ntb/test/ntb_msi_test.c
index 4e18e08776c9..a9b4a05e2fbd 100644
--- a/drivers/ntb/test/ntb_msi_test.c
+++ b/drivers/ntb/test/ntb_msi_test.c
@@ -5,7 +5,9 @@
 #include <linux/ntb.h>
 #include <linux/pci.h>
 #include <linux/radix-tree.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
+#include <linux/completion.h>
 
 MODULE_LICENSE("Dual BSD/GPL");
 MODULE_VERSION("0.1");
diff --git a/drivers/ntb/test/ntb_perf.c b/drivers/ntb/test/ntb_perf.c
index 72bc1d017a46..c5587807b7d5 100644
--- a/drivers/ntb/test/ntb_perf.c
+++ b/drivers/ntb/test/ntb_perf.c
@@ -69,8 +69,10 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
@@ -83,6 +85,7 @@
 #include <linux/debugfs.h>
 #include <linux/random.h>
 #include <linux/ntb.h>
+#include <linux/completion.h>
 
 #define DRIVER_NAME		"ntb_perf"
 #define DRIVER_VERSION		"2.0"
diff --git a/drivers/ntb/test/ntb_tool.c b/drivers/ntb/test/ntb_tool.c
index 641cb7e05a47..95176ec525c6 100644
--- a/drivers/ntb/test/ntb_tool.c
+++ b/drivers/ntb/test/ntb_tool.c
@@ -178,7 +178,9 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/debugfs.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/nubus/proc.c b/drivers/nubus/proc.c
index e7a347db708c..65d482b5abf6 100644
--- a/drivers/nubus/proc.c
+++ b/drivers/nubus/proc.c
@@ -26,6 +26,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/byteorder.h>
 
diff --git a/drivers/nvdimm/btt.c b/drivers/nvdimm/btt.c
index bb3726b622ad..35143999409e 100644
--- a/drivers/nvdimm/btt.c
+++ b/drivers/nvdimm/btt.c
@@ -6,6 +6,7 @@
 #include <linux/highmem.h>
 #include <linux/debugfs.h>
 #include <linux/blkdev.h>
+#include <linux/bio.h> // for struct bio_integrity_payload
 #include <linux/pagemap.h>
 #include <linux/module.h>
 #include <linux/device.h>
@@ -19,6 +20,7 @@
 #include <linux/cleanup.h>
 #include "btt.h"
 #include "nd.h"
+#include <linux/sprintf.h>
 
 enum log_ent_request {
 	LOG_NEW_ENT = 0,
diff --git a/drivers/nvdimm/btt_devs.c b/drivers/nvdimm/btt_devs.c
index 497fd434a6a1..39fe77cd470d 100644
--- a/drivers/nvdimm/btt_devs.c
+++ b/drivers/nvdimm/btt_devs.c
@@ -11,6 +11,7 @@
 #include "nd-core.h"
 #include "btt.h"
 #include "nd.h"
+#include <linux/sprintf.h>
 
 static void nd_btt_release(struct device *dev)
 {
diff --git a/drivers/nvdimm/bus.c b/drivers/nvdimm/bus.c
index ef3d0f83318b..67c47e6a6006 100644
--- a/drivers/nvdimm/bus.c
+++ b/drivers/nvdimm/bus.c
@@ -5,6 +5,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 #include <linux/libnvdimm.h>
 #include <linux/sched/mm.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
diff --git a/drivers/nvdimm/core.c b/drivers/nvdimm/core.c
index d91799b71d23..7e083d3e1274 100644
--- a/drivers/nvdimm/core.c
+++ b/drivers/nvdimm/core.c
@@ -3,8 +3,10 @@
  * Copyright(c) 2013-2015 Intel Corporation. All rights reserved.
  */
 #include <linux/libnvdimm.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/blk-integrity.h>
diff --git a/drivers/nvdimm/dimm_devs.c b/drivers/nvdimm/dimm_devs.c
index 21498d461fde..caf8646b27db 100644
--- a/drivers/nvdimm/dimm_devs.c
+++ b/drivers/nvdimm/dimm_devs.c
@@ -4,6 +4,7 @@
  */
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/device.h>
 #include <linux/ndctl.h>
diff --git a/drivers/nvdimm/label.c b/drivers/nvdimm/label.c
index 082253a3a956..db3757367070 100644
--- a/drivers/nvdimm/label.c
+++ b/drivers/nvdimm/label.c
@@ -4,6 +4,7 @@
  */
 #include <linux/device.h>
 #include <linux/ndctl.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include <linux/slab.h>
 #include <linux/io.h>
diff --git a/drivers/nvdimm/namespace_devs.c b/drivers/nvdimm/namespace_devs.c
index d6d558f94d6b..bbf41fbcf78b 100644
--- a/drivers/nvdimm/namespace_devs.c
+++ b/drivers/nvdimm/namespace_devs.c
@@ -13,6 +13,7 @@
 #include "pmem.h"
 #include "pfn.h"
 #include "nd.h"
+#include <linux/sprintf.h>
 
 static void namespace_io_release(struct device *dev)
 {
diff --git a/drivers/nvdimm/nd_perf.c b/drivers/nvdimm/nd_perf.c
index 2b6dc80d8fb5..0103befb0ed5 100644
--- a/drivers/nvdimm/nd_perf.c
+++ b/drivers/nvdimm/nd_perf.c
@@ -11,6 +11,7 @@
 
 #include <linux/nd.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define EVENT(_name, _code)     enum{_name = _code}
 
diff --git a/drivers/nvdimm/nd_virtio.c b/drivers/nvdimm/nd_virtio.c
index 1f8c667c6f1e..f4cbb0a553d9 100644
--- a/drivers/nvdimm/nd_virtio.c
+++ b/drivers/nvdimm/nd_virtio.c
@@ -9,6 +9,8 @@
 #include "virtio_pmem.h"
 #include "nd.h"
 
+#include <linux/bio.h>
+
  /* The interrupt handler */
 void virtio_pmem_host_ack(struct virtqueue *vq)
 {
diff --git a/drivers/nvdimm/pfn_devs.c b/drivers/nvdimm/pfn_devs.c
index 586348125b61..e17f962f0957 100644
--- a/drivers/nvdimm/pfn_devs.c
+++ b/drivers/nvdimm/pfn_devs.c
@@ -12,6 +12,7 @@
 #include "nd-core.h"
 #include "pfn.h"
 #include "nd.h"
+#include <linux/sprintf.h>
 
 static const bool page_struct_override = IS_ENABLED(CONFIG_NVDIMM_KMSAN);
 
diff --git a/drivers/nvdimm/pmem.c b/drivers/nvdimm/pmem.c
index e9898457a7bd..d2c8b587c5d8 100644
--- a/drivers/nvdimm/pmem.c
+++ b/drivers/nvdimm/pmem.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/hdreg.h>
 #include <linux/init.h>
@@ -18,6 +19,7 @@
 #include <linux/badblocks.h>
 #include <linux/memremap.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/blk-mq.h>
 #include <linux/pfn_t.h>
diff --git a/drivers/nvdimm/region_devs.c b/drivers/nvdimm/region_devs.c
index 9e4f7ff024a0..a2580eef1082 100644
--- a/drivers/nvdimm/region_devs.c
+++ b/drivers/nvdimm/region_devs.c
@@ -14,6 +14,7 @@
 #include <linux/nd.h>
 #include "nd-core.h"
 #include "nd.h"
+#include <linux/sprintf.h>
 
 /*
  * For readq() and writeq() on 32-bit builds, the hi-lo, lo-hi order is
diff --git a/drivers/nvdimm/security.c b/drivers/nvdimm/security.c
index a03e3c45f297..06975171b5d8 100644
--- a/drivers/nvdimm/security.c
+++ b/drivers/nvdimm/security.c
@@ -3,6 +3,7 @@
 
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/ndctl.h>
 #include <linux/slab.h>
 #include <linux/io.h>
@@ -14,6 +15,7 @@
 #include <keys/encrypted-type.h>
 #include "nd-core.h"
 #include "nd.h"
+#include <linux/sprintf.h>
 
 #define NVDIMM_BASE_KEY		0
 #define NVDIMM_NEW_KEY		1
diff --git a/drivers/nvme/common/auth.c b/drivers/nvme/common/auth.c
index a3455f1d67fa..959444fa983b 100644
--- a/drivers/nvme/common/auth.c
+++ b/drivers/nvme/common/auth.c
@@ -8,6 +8,7 @@
 #include <linux/base64.h>
 #include <linux/prandom.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <asm/unaligned.h>
 #include <crypto/hash.h>
 #include <crypto/dh.h>
diff --git a/drivers/nvme/common/keyring.c b/drivers/nvme/common/keyring.c
index 6f7e7a8fa5ae..0994ef2035af 100644
--- a/drivers/nvme/common/keyring.c
+++ b/drivers/nvme/common/keyring.c
@@ -5,6 +5,7 @@
 
 #include <linux/module.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/key.h>
 #include <linux/key-type.h>
 #include <keys/user-type.h>
diff --git a/drivers/nvme/host/apple.c b/drivers/nvme/host/apple.c
index c727cd1f264b..25bfde1b8338 100644
--- a/drivers/nvme/host/apple.c
+++ b/drivers/nvme/host/apple.c
@@ -30,6 +30,7 @@
 #include <linux/soc/apple/rtkit.h>
 #include <linux/soc/apple/sart.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/time64.h>
 
 #include "nvme.h"
diff --git a/drivers/nvme/host/core.c b/drivers/nvme/host/core.c
index 60537c9224bf..546e7bacc4f0 100644
--- a/drivers/nvme/host/core.c
+++ b/drivers/nvme/host/core.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/backing-dev.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pr.h>
 #include <linux/ptrace.h>
diff --git a/drivers/nvme/host/fabrics.c b/drivers/nvme/host/fabrics.c
index 3499acbf6a82..8aec466e8afc 100644
--- a/drivers/nvme/host/fabrics.c
+++ b/drivers/nvme/host/fabrics.c
@@ -13,6 +13,7 @@
 #include "nvme.h"
 #include "fabrics.h"
 #include <linux/nvme-keyring.h>
+#include <linux/sprintf.h>
 
 static LIST_HEAD(nvmf_transports);
 static DECLARE_RWSEM(nvmf_transports_rwsem);
diff --git a/drivers/nvme/host/fc.c b/drivers/nvme/host/fc.c
index 68a5d971657b..2000df6e5bfd 100644
--- a/drivers/nvme/host/fc.c
+++ b/drivers/nvme/host/fc.c
@@ -5,6 +5,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 #include <linux/module.h>
 #include <linux/parser.h>
+#include <linux/sprintf.h>
 #include <uapi/scsi/fc/fc_fs.h>
 #include <uapi/scsi/fc/fc_els.h>
 #include <linux/delay.h>
@@ -12,11 +13,14 @@
 #include <linux/blk-cgroup.h>
 #include "nvme.h"
 #include "fabrics.h"
+#include <linux/completion.h>
 #include <linux/nvme-fc-driver.h>
 #include <linux/nvme-fc.h>
 #include "fc.h"
 #include <scsi/scsi_transport_fc.h>
 #include <linux/blk-mq-pci.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 
 /* *************************** Data Structures/Defines ****************** */
 
diff --git a/drivers/nvme/host/ioctl.c b/drivers/nvme/host/ioctl.c
index 3dfd5ae99ae0..757f74e1e113 100644
--- a/drivers/nvme/host/ioctl.c
+++ b/drivers/nvme/host/ioctl.c
@@ -7,6 +7,7 @@
 #include <linux/nvme_ioctl.h>
 #include <linux/io_uring/cmd.h>
 #include "nvme.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 enum {
 	NVME_IOCTL_VEC		= (1 << 0),
diff --git a/drivers/nvme/host/multipath.c b/drivers/nvme/host/multipath.c
index 74de1e64aeea..1c38383897ac 100644
--- a/drivers/nvme/host/multipath.c
+++ b/drivers/nvme/host/multipath.c
@@ -5,6 +5,7 @@
 
 #include <linux/backing-dev.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <trace/events/block.h>
 #include "nvme.h"
diff --git a/drivers/nvme/host/nvme.h b/drivers/nvme/host/nvme.h
index 7b87763e2f8a..6708c23f5845 100644
--- a/drivers/nvme/host/nvme.h
+++ b/drivers/nvme/host/nvme.h
@@ -13,6 +13,7 @@
 #include <linux/blk-mq.h>
 #include <linux/sed-opal.h>
 #include <linux/fault-inject.h>
+#include <linux/idr.h>
 #include <linux/rcupdate.h>
 #include <linux/wait.h>
 #include <linux/t10-pi.h>
diff --git a/drivers/nvme/host/pci.c b/drivers/nvme/host/pci.c
index e6267a6aa380..470987425a28 100644
--- a/drivers/nvme/host/pci.c
+++ b/drivers/nvme/host/pci.c
@@ -10,10 +10,12 @@
 #include <linux/blk-mq.h>
 #include <linux/blk-mq-pci.h>
 #include <linux/blk-integrity.h>
+#include <linux/completion.h>
 #include <linux/dmi.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for lower_32_bits(), upper_32_bits()
 #include <linux/kstrtox.h>
 #include <linux/memremap.h>
 #include <linux/mm.h>
@@ -21,6 +23,7 @@
 #include <linux/mutex.h>
 #include <linux/once.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/t10-pi.h>
 #include <linux/types.h>
diff --git a/drivers/nvme/host/rdma.c b/drivers/nvme/host/rdma.c
index 20fdd40b1879..5a369e62fddf 100644
--- a/drivers/nvme/host/rdma.c
+++ b/drivers/nvme/host/rdma.c
@@ -13,6 +13,7 @@
 #include <linux/atomic.h>
 #include <linux/blk-mq.h>
 #include <linux/blk-integrity.h>
+#include <linux/completion.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/mutex.h>
diff --git a/drivers/nvme/host/sysfs.c b/drivers/nvme/host/sysfs.c
index f2832f70e7e0..d2fb4396120d 100644
--- a/drivers/nvme/host/sysfs.c
+++ b/drivers/nvme/host/sysfs.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/nvme-auth.h>
+#include <linux/kstrtox.h>
 
 #include "nvme.h"
 #include "fabrics.h"
diff --git a/drivers/nvme/host/tcp.c b/drivers/nvme/host/tcp.c
index a6d596e05602..8f1674694375 100644
--- a/drivers/nvme/host/tcp.c
+++ b/drivers/nvme/host/tcp.c
@@ -11,6 +11,7 @@
 #include <linux/key.h>
 #include <linux/nvme-tcp.h>
 #include <linux/nvme-keyring.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <net/tcp.h>
 #include <net/tls.h>
@@ -18,6 +19,7 @@
 #include <net/handshake.h>
 #include <linux/blk-mq.h>
 #include <crypto/hash.h>
+#include <linux/completion.h>
 #include <net/busy_poll.h>
 #include <trace/events/sock.h>
 
diff --git a/drivers/nvme/target/auth.c b/drivers/nvme/target/auth.c
index 3ddbc3880cac..401e6ec240bc 100644
--- a/drivers/nvme/target/auth.c
+++ b/drivers/nvme/target/auth.c
@@ -16,6 +16,7 @@
 #include <linux/random.h>
 #include <linux/nvme-auth.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include "nvmet.h"
 
diff --git a/drivers/nvme/target/configfs.c b/drivers/nvme/target/configfs.c
index 2482a0db2504..de109a070a04 100644
--- a/drivers/nvme/target/configfs.c
+++ b/drivers/nvme/target/configfs.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/ctype.h>
 #include <linux/pci.h>
diff --git a/drivers/nvme/target/core.c b/drivers/nvme/target/core.c
index 8658e9c08534..f3734c02a2b0 100644
--- a/drivers/nvme/target/core.c
+++ b/drivers/nvme/target/core.c
@@ -4,11 +4,14 @@
  * Copyright (c) 2015-2016 HGST, a Western Digital Company.
  */
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
+#include <linux/hex.h>
+#include <linux/idr.h>
 #include <linux/module.h>
 #include <linux/random.h>
 #include <linux/rculist.h>
 #include <linux/pci-p2pdma.h>
 #include <linux/scatterlist.h>
+#include <linux/completion.h>
 
 #include <generated/utsrelease.h>
 
diff --git a/drivers/nvme/target/fc.c b/drivers/nvme/target/fc.c
index fd229f310c93..38a470f948f0 100644
--- a/drivers/nvme/target/fc.c
+++ b/drivers/nvme/target/fc.c
@@ -6,6 +6,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/blk-mq.h>
+#include <linux/idr.h>
 #include <linux/parser.h>
 #include <linux/random.h>
 #include <uapi/scsi/fc/fc_fs.h>
diff --git a/drivers/nvme/target/fcloop.c b/drivers/nvme/target/fcloop.c
index 1471af250ea6..35c158d41739 100644
--- a/drivers/nvme/target/fcloop.c
+++ b/drivers/nvme/target/fcloop.c
@@ -5,7 +5,9 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 #include <linux/module.h>
 #include <linux/parser.h>
+#include <linux/sprintf.h>
 #include <uapi/scsi/fc/fc_fs.h>
+#include <linux/completion.h>
 
 #include "../host/nvme.h"
 #include "../target/nvmet.h"
diff --git a/drivers/nvme/target/io-cmd-bdev.c b/drivers/nvme/target/io-cmd-bdev.c
index 6426aac2634a..ab486227b5fc 100644
--- a/drivers/nvme/target/io-cmd-bdev.c
+++ b/drivers/nvme/target/io-cmd-bdev.c
@@ -6,6 +6,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 #include <linux/blkdev.h>
 #include <linux/blk-integrity.h>
+#include <linux/file.h> // for fput()
 #include <linux/memremap.h>
 #include <linux/module.h>
 #include "nvmet.h"
diff --git a/drivers/nvme/target/nvmet.h b/drivers/nvme/target/nvmet.h
index 33e61b4f478b..fe5af505c894 100644
--- a/drivers/nvme/target/nvmet.h
+++ b/drivers/nvme/target/nvmet.h
@@ -8,6 +8,7 @@
 
 #include <linux/dma-mapping.h>
 #include <linux/types.h>
+#include <linux/bio.h>
 #include <linux/device.h>
 #include <linux/kref.h>
 #include <linux/percpu-refcount.h>
diff --git a/drivers/nvme/target/rdma.c b/drivers/nvme/target/rdma.c
index 3a0f2c170f4c..79615466770c 100644
--- a/drivers/nvme/target/rdma.c
+++ b/drivers/nvme/target/rdma.c
@@ -9,10 +9,13 @@
 #include <linux/ctype.h>
 #include <linux/delay.h>
 #include <linux/err.h>
+#include <linux/hex.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/nvme.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/wait.h>
 #include <linux/inet.h>
diff --git a/drivers/nvme/target/tcp.c b/drivers/nvme/target/tcp.c
index c8655fc5aa5b..22cb181ea2b6 100644
--- a/drivers/nvme/target/tcp.c
+++ b/drivers/nvme/target/tcp.c
@@ -6,11 +6,13 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/err.h>
 #include <linux/key.h>
 #include <linux/nvme-tcp.h>
 #include <linux/nvme-keyring.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <net/tcp.h>
 #include <net/tls.h>
diff --git a/drivers/nvmem/brcm_nvram.c b/drivers/nvmem/brcm_nvram.c
index 5cdf339cfbec..7ef37bc450e4 100644
--- a/drivers/nvmem/brcm_nvram.c
+++ b/drivers/nvmem/brcm_nvram.c
@@ -5,6 +5,7 @@
 
 #include <linux/bcm47xx_nvram.h>
 #include <linux/etherdevice.h>
+#include <linux/hex.h>
 #include <linux/if_ether.h>
 #include <linux/io.h>
 #include <linux/mod_devicetable.h>
diff --git a/drivers/nvmem/core.c b/drivers/nvmem/core.c
index eb357ac2e54a..9af54584ec6d 100644
--- a/drivers/nvmem/core.c
+++ b/drivers/nvmem/core.c
@@ -18,6 +18,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "internals.h"
 
diff --git a/drivers/nvmem/u-boot-env.c b/drivers/nvmem/u-boot-env.c
index befbab156cda..1fbdc1fd9839 100644
--- a/drivers/nvmem/u-boot-env.c
+++ b/drivers/nvmem/u-boot-env.c
@@ -5,6 +5,7 @@
 
 #include <linux/crc32.h>
 #include <linux/etherdevice.h>
+#include <linux/hex.h>
 #include <linux/if_ether.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
diff --git a/drivers/of/address.c b/drivers/of/address.c
index ae46a3605904..bd4ab2083f74 100644
--- a/drivers/of/address.c
+++ b/drivers/of/address.c
@@ -5,7 +5,9 @@
 #include <linux/fwnode.h>
 #include <linux/io.h>
 #include <linux/ioport.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/logic_pio.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of_address.h>
 #include <linux/pci.h>
diff --git a/drivers/of/base.c b/drivers/of/base.c
index 49a9ad8134db..bc1ef736b3f3 100644
--- a/drivers/of/base.c
+++ b/drivers/of/base.c
@@ -19,12 +19,14 @@
 #include <linux/console.h>
 #include <linux/ctype.h>
 #include <linux/cpu.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/of_graph.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/proc_fs.h>
 
diff --git a/drivers/of/dynamic.c b/drivers/of/dynamic.c
index 3bf27052832f..9effc63f8ae4 100644
--- a/drivers/of/dynamic.c
+++ b/drivers/of/dynamic.c
@@ -12,6 +12,7 @@
 #include <linux/of.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/proc_fs.h>
 
diff --git a/drivers/of/kobj.c b/drivers/of/kobj.c
index 3dbce1e6f184..41a094acaaf6 100644
--- a/drivers/of/kobj.c
+++ b/drivers/of/kobj.c
@@ -1,6 +1,8 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 #include "of_private.h"
 
diff --git a/drivers/of/module.c b/drivers/of/module.c
index 0e8aa974f0f2..16fcd62abf37 100644
--- a/drivers/of/module.c
+++ b/drivers/of/module.c
@@ -6,6 +6,7 @@
 #include <linux/of.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 ssize_t of_modalias(const struct device_node *np, char *str, ssize_t len)
diff --git a/drivers/of/of_numa.c b/drivers/of/of_numa.c
index 5949829a1b00..9681c4dd5d82 100644
--- a/drivers/of/of_numa.c
+++ b/drivers/of/of_numa.c
@@ -10,6 +10,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/nodemask.h>
+#include <linux/topology.h> // for LOCAL_DISTANCE
 
 #include <asm/numa.h>
 
diff --git a/drivers/of/overlay.c b/drivers/of/overlay.c
index 2ae7e9d24a64..afadce1474bd 100644
--- a/drivers/of/overlay.c
+++ b/drivers/of/overlay.c
@@ -13,6 +13,7 @@
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/of_fdt.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/errno.h>
diff --git a/drivers/of/pdt.c b/drivers/of/pdt.c
index 7eda43c66c91..73c95ca93b68 100644
--- a/drivers/of/pdt.c
+++ b/drivers/of/pdt.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/of_pdt.h>
+#include <linux/sprintf.h>
 
 static struct of_pdt_ops *of_pdt_prom_ops __initdata;
 
diff --git a/drivers/of/platform.c b/drivers/of/platform.c
index b7708a06dc78..ab91920347d2 100644
--- a/drivers/of/platform.c
+++ b/drivers/of/platform.c
@@ -20,6 +20,7 @@
 #include <linux/of_irq.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfb.h>
 
 #include "of_private.h"
diff --git a/drivers/of/resolver.c b/drivers/of/resolver.c
index b278ab4338ce..974ad4bae68d 100644
--- a/drivers/of/resolver.c
+++ b/drivers/of/resolver.c
@@ -9,6 +9,7 @@
 #define pr_fmt(fmt)	"OF: resolver: " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
diff --git a/drivers/of/unittest.c b/drivers/of/unittest.c
index d7593bde2d02..2c97d90ae5e2 100644
--- a/drivers/of/unittest.c
+++ b/drivers/of/unittest.c
@@ -24,6 +24,7 @@
 #include <linux/platform_device.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 #include <linux/i2c.h>
 #include <linux/i2c-mux.h>
diff --git a/drivers/opp/debugfs.c b/drivers/opp/debugfs.c
index ec030b19164a..f64147febd5e 100644
--- a/drivers/opp/debugfs.c
+++ b/drivers/opp/debugfs.c
@@ -14,6 +14,7 @@
 #include <linux/init.h>
 #include <linux/limits.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "opp.h"
 
diff --git a/drivers/opp/of.c b/drivers/opp/of.c
index f9f0b22bccbb..6915ac6c8f08 100644
--- a/drivers/opp/of.c
+++ b/drivers/opp/of.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/export.h>
 #include <linux/energy_model.h>
+#include <linux/sprintf.h>
 
 #include "opp.h"
 
diff --git a/drivers/parisc/ccio-dma.c b/drivers/parisc/ccio-dma.c
index 9ce0d20a6c58..4c499a7c31d5 100644
--- a/drivers/parisc/ccio-dma.c
+++ b/drivers/parisc/ccio-dma.c
@@ -26,6 +26,7 @@
 #include <linux/mm.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/pci.h>
 #include <linux/reboot.h>
diff --git a/drivers/parisc/dino.c b/drivers/parisc/dino.c
index 01a50a051296..a62216e112df 100644
--- a/drivers/parisc/dino.c
+++ b/drivers/parisc/dino.c
@@ -41,6 +41,7 @@
 */
 
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/pci.h>
diff --git a/drivers/parisc/eisa.c b/drivers/parisc/eisa.c
index 9eab974e6baf..650800dd3d3c 100644
--- a/drivers/parisc/eisa.c
+++ b/drivers/parisc/eisa.c
@@ -26,6 +26,7 @@
 #include <linux/ioport.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/spinlock.h>
diff --git a/drivers/parisc/eisa_enumerator.c b/drivers/parisc/eisa_enumerator.c
index f0cb31198a8f..20a46f790336 100644
--- a/drivers/parisc/eisa_enumerator.c
+++ b/drivers/parisc/eisa_enumerator.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/byteorder.h>
 
diff --git a/drivers/parisc/lba_pci.c b/drivers/parisc/lba_pci.c
index 3fc3765fddaa..da0a6dd60073 100644
--- a/drivers/parisc/lba_pci.c
+++ b/drivers/parisc/lba_pci.c
@@ -28,6 +28,7 @@
 */
 
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/spinlock.h>
diff --git a/drivers/parisc/led.c b/drivers/parisc/led.c
index 1f75d2416001..3a6ff23f79e1 100644
--- a/drivers/parisc/led.c
+++ b/drivers/parisc/led.c
@@ -15,6 +15,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ioport.h>
 #include <linux/utsname.h>
diff --git a/drivers/parisc/pdc_stable.c b/drivers/parisc/pdc_stable.c
index 633266447e2f..d8a5093a4e31 100644
--- a/drivers/parisc/pdc_stable.c
+++ b/drivers/parisc/pdc_stable.c
@@ -44,6 +44,8 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/capability.h>
 #include <linux/ctype.h>
diff --git a/drivers/parport/parport_pc.c b/drivers/parport/parport_pc.c
index f33b5d1ddfc1..7622d82a9c4b 100644
--- a/drivers/parport/parport_pc.c
+++ b/drivers/parport/parport_pc.c
@@ -45,6 +45,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/signal.h>
 #include <linux/delay.h>
 #include <linux/errno.h>
diff --git a/drivers/parport/procfs.c b/drivers/parport/procfs.c
index bd388560ed59..56384b100f2c 100644
--- a/drivers/parport/procfs.c
+++ b/drivers/parport/procfs.c
@@ -21,6 +21,7 @@
 #include <linux/slab.h>
 #include <linux/parport.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/device.h>
 
diff --git a/drivers/pci/controller/dwc/pci-dra7xx.c b/drivers/pci/controller/dwc/pci-dra7xx.c
index 0e406677060d..07c3aff58731 100644
--- a/drivers/pci/controller/dwc/pci-dra7xx.c
+++ b/drivers/pci/controller/dwc/pci-dra7xx.c
@@ -24,6 +24,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/resource.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mfd/syscon.h>
 #include <linux/regmap.h>
diff --git a/drivers/pci/controller/dwc/pci-keystone.c b/drivers/pci/controller/dwc/pci-keystone.c
index c0c62533a3f1..c6d94a62f67c 100644
--- a/drivers/pci/controller/dwc/pci-keystone.c
+++ b/drivers/pci/controller/dwc/pci-keystone.c
@@ -16,6 +16,7 @@
 #include <linux/interrupt.h>
 #include <linux/irqchip/chained_irq.h>
 #include <linux/irqdomain.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mfd/syscon.h>
 #include <linux/msi.h>
 #include <linux/of.h>
@@ -26,6 +27,7 @@
 #include <linux/regmap.h>
 #include <linux/resource.h>
 #include <linux/signal.h>
+#include <linux/sprintf.h>
 
 #include "../../pci.h"
 #include "pcie-designware.h"
diff --git a/drivers/pci/controller/dwc/pcie-designware-ep.c b/drivers/pci/controller/dwc/pcie-designware-ep.c
index 9a437cfce073..c772ff969000 100644
--- a/drivers/pci/controller/dwc/pcie-designware-ep.c
+++ b/drivers/pci/controller/dwc/pcie-designware-ep.c
@@ -8,6 +8,7 @@
 
 #include <linux/align.h>
 #include <linux/bitfield.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of.h>
 #include <linux/platform_device.h>
 
diff --git a/drivers/pci/controller/dwc/pcie-designware-host.c b/drivers/pci/controller/dwc/pcie-designware-host.c
index d5fc31f8345f..db8ab242305d 100644
--- a/drivers/pci/controller/dwc/pcie-designware-host.c
+++ b/drivers/pci/controller/dwc/pcie-designware-host.c
@@ -11,6 +11,7 @@
 #include <linux/iopoll.h>
 #include <linux/irqchip/chained_irq.h>
 #include <linux/irqdomain.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/msi.h>
 #include <linux/of_address.h>
 #include <linux/of_pci.h>
diff --git a/drivers/pci/controller/dwc/pcie-designware.c b/drivers/pci/controller/dwc/pcie-designware.c
index 250cf7f40b85..c68623a0e217 100644
--- a/drivers/pci/controller/dwc/pcie-designware.c
+++ b/drivers/pci/controller/dwc/pcie-designware.c
@@ -15,9 +15,11 @@
 #include <linux/dma/edma.h>
 #include <linux/gpio/consumer.h>
 #include <linux/ioport.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include "../../pci.h"
diff --git a/drivers/pci/controller/dwc/pcie-qcom-ep.c b/drivers/pci/controller/dwc/pcie-qcom-ep.c
index 36e5e80cd22f..f6d926a4406d 100644
--- a/drivers/pci/controller/dwc/pcie-qcom-ep.c
+++ b/drivers/pci/controller/dwc/pcie-qcom-ep.c
@@ -15,6 +15,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/interconnect.h>
 #include <linux/mfd/syscon.h>
+#include <linux/of.h>
 #include <linux/phy/pcie.h>
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
diff --git a/drivers/pci/controller/dwc/pcie-tegra194-acpi.c b/drivers/pci/controller/dwc/pcie-tegra194-acpi.c
index 55f61914a986..7b0b167963fc 100644
--- a/drivers/pci/controller/dwc/pcie-tegra194-acpi.c
+++ b/drivers/pci/controller/dwc/pcie-tegra194-acpi.c
@@ -10,6 +10,7 @@
 #include <linux/pci.h>
 #include <linux/pci-acpi.h>
 #include <linux/pci-ecam.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "pcie-designware.h"
 
diff --git a/drivers/pci/controller/dwc/pcie-tegra194.c b/drivers/pci/controller/dwc/pcie-tegra194.c
index 7afa9e9aabe2..efc7b2c91c11 100644
--- a/drivers/pci/controller/dwc/pcie-tegra194.c
+++ b/drivers/pci/controller/dwc/pcie-tegra194.c
@@ -31,6 +31,7 @@
 #include <linux/random.h>
 #include <linux/reset.h>
 #include <linux/resource.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include "pcie-designware.h"
 #include <soc/tegra/bpmp.h>
diff --git a/drivers/pci/controller/pci-hyperv.c b/drivers/pci/controller/pci-hyperv.c
index 5880f4d061b8..48e89a18a0c7 100644
--- a/drivers/pci/controller/pci-hyperv.c
+++ b/drivers/pci/controller/pci-hyperv.c
@@ -50,6 +50,8 @@
 #include <linux/irqdomain.h>
 #include <linux/acpi.h>
 #include <asm/mshyperv.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /*
  * Protocol versions. The low word is the minor version, the high word the
diff --git a/drivers/pci/controller/pci-tegra.c b/drivers/pci/controller/pci-tegra.c
index 038d974a318e..4d37eb1db277 100644
--- a/drivers/pci/controller/pci-tegra.c
+++ b/drivers/pci/controller/pci-tegra.c
@@ -37,6 +37,7 @@
 #include <linux/reset.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/regulator/consumer.h>
 
diff --git a/drivers/pci/controller/pci-thunder-pem.c b/drivers/pci/controller/pci-thunder-pem.c
index 06a9855cb431..7a143df8dac4 100644
--- a/drivers/pci/controller/pci-thunder-pem.c
+++ b/drivers/pci/controller/pci-thunder-pem.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
 #include "../pci.h"
+#include <linux/sprintf.h>
 
 #if defined(CONFIG_PCI_HOST_THUNDER_PEM) || (defined(CONFIG_ACPI) && defined(CONFIG_PCI_QUIRKS))
 
diff --git a/drivers/pci/controller/pci-xgene-msi.c b/drivers/pci/controller/pci-xgene-msi.c
index 3ce38dfd0d29..652fda9ac302 100644
--- a/drivers/pci/controller/pci-xgene-msi.c
+++ b/drivers/pci/controller/pci-xgene-msi.c
@@ -9,6 +9,7 @@
 #include <linux/cpu.h>
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/msi.h>
 #include <linux/irqchip/chained_irq.h>
diff --git a/drivers/pci/controller/pci-xgene.c b/drivers/pci/controller/pci-xgene.c
index 8e457fa450a2..14d0dfd177a8 100644
--- a/drivers/pci/controller/pci-xgene.c
+++ b/drivers/pci/controller/pci-xgene.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/jiffies.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/memblock.h>
 #include <linux/init.h>
 #include <linux/of.h>
diff --git a/drivers/pci/controller/pcie-altera-msi.c b/drivers/pci/controller/pcie-altera-msi.c
index 6ad5427490b5..28d0a5ba9108 100644
--- a/drivers/pci/controller/pcie-altera-msi.c
+++ b/drivers/pci/controller/pcie-altera-msi.c
@@ -11,6 +11,7 @@
 #include <linux/irqchip/chained_irq.h>
 #include <linux/irqdomain.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/msi.h>
 #include <linux/of_address.h>
diff --git a/drivers/pci/controller/pcie-apple.c b/drivers/pci/controller/pcie-apple.c
index f7a248393a8f..06e731e8376d 100644
--- a/drivers/pci/controller/pcie-apple.c
+++ b/drivers/pci/controller/pcie-apple.c
@@ -29,6 +29,7 @@
 #include <linux/notifier.h>
 #include <linux/of_irq.h>
 #include <linux/pci-ecam.h>
+#include <linux/completion.h>
 
 #define CORE_RC_PHYIF_CTL		0x00024
 #define   CORE_RC_PHYIF_CTL_RUN		BIT(0)
diff --git a/drivers/pci/controller/pcie-iproc-msi.c b/drivers/pci/controller/pcie-iproc-msi.c
index 649fcb449f34..c6c2f4c57642 100644
--- a/drivers/pci/controller/pcie-iproc-msi.c
+++ b/drivers/pci/controller/pcie-iproc-msi.c
@@ -6,6 +6,7 @@
 #include <linux/interrupt.h>
 #include <linux/irqchip/chained_irq.h>
 #include <linux/irqdomain.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/msi.h>
 #include <linux/of_irq.h>
 #include <linux/of_pci.h>
diff --git a/drivers/pci/controller/pcie-mediatek.c b/drivers/pci/controller/pcie-mediatek.c
index 48372013f26d..77e441ce6fa2 100644
--- a/drivers/pci/controller/pcie-mediatek.c
+++ b/drivers/pci/controller/pcie-mediatek.c
@@ -26,6 +26,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include "../pci.h"
 
diff --git a/drivers/pci/controller/pcie-microchip-host.c b/drivers/pci/controller/pcie-microchip-host.c
index 137fb8570ba2..e8c30e6a46a2 100644
--- a/drivers/pci/controller/pcie-microchip-host.c
+++ b/drivers/pci/controller/pcie-microchip-host.c
@@ -11,6 +11,7 @@
 #include <linux/clk.h>
 #include <linux/irqchip/chained_irq.h>
 #include <linux/irqdomain.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/msi.h>
 #include <linux/of_address.h>
diff --git a/drivers/pci/controller/pcie-mt7621.c b/drivers/pci/controller/pcie-mt7621.c
index 79e225edb42a..8e55231177f0 100644
--- a/drivers/pci/controller/pcie-mt7621.c
+++ b/drivers/pci/controller/pcie-mt7621.c
@@ -28,6 +28,7 @@
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #include "../pci.h"
diff --git a/drivers/pci/controller/pcie-rcar-ep.c b/drivers/pci/controller/pcie-rcar-ep.c
index e6909271def7..8ca30a9ae021 100644
--- a/drivers/pci/controller/pcie-rcar-ep.c
+++ b/drivers/pci/controller/pcie-rcar-ep.c
@@ -13,6 +13,7 @@
 #include <linux/pci-epc.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include "pcie-rcar.h"
 
diff --git a/drivers/pci/controller/pcie-rcar.c b/drivers/pci/controller/pcie-rcar.c
index 7583699ef7b6..33f967173865 100644
--- a/drivers/pci/controller/pcie-rcar.c
+++ b/drivers/pci/controller/pcie-rcar.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 
 #include "pcie-rcar.h"
diff --git a/drivers/pci/controller/pcie-rockchip.c b/drivers/pci/controller/pcie-rockchip.c
index 0ef2e622d36e..1f32d4508483 100644
--- a/drivers/pci/controller/pcie-rockchip.c
+++ b/drivers/pci/controller/pcie-rockchip.c
@@ -20,6 +20,7 @@
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 
 #include "../pci.h"
 #include "pcie-rockchip.h"
diff --git a/drivers/pci/controller/vmd.c b/drivers/pci/controller/vmd.c
index 87b7856f375a..59291addaeb3 100644
--- a/drivers/pci/controller/vmd.c
+++ b/drivers/pci/controller/vmd.c
@@ -7,6 +7,7 @@
 #include <linux/device.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/idr.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/msi.h>
diff --git a/drivers/pci/doe.c b/drivers/pci/doe.c
index e3aab5edaf70..5b878ef79c24 100644
--- a/drivers/pci/doe.c
+++ b/drivers/pci/doe.c
@@ -13,6 +13,7 @@
 #define dev_fmt(fmt) "DOE: " fmt
 
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/jiffies.h>
 #include <linux/mutex.h>
diff --git a/drivers/pci/endpoint/functions/pci-epf-mhi.c b/drivers/pci/endpoint/functions/pci-epf-mhi.c
index 1c3e4ea76bd2..cf46f3dbebfe 100644
--- a/drivers/pci/endpoint/functions/pci-epf-mhi.c
+++ b/drivers/pci/endpoint/functions/pci-epf-mhi.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/pci-epc.h>
 #include <linux/pci-epf.h>
+#include <linux/completion.h>
 
 #define MHI_VERSION_1_0 0x01000000
 
diff --git a/drivers/pci/endpoint/functions/pci-epf-ntb.c b/drivers/pci/endpoint/functions/pci-epf-ntb.c
index 0553946005c4..50938f1c76fc 100644
--- a/drivers/pci/endpoint/functions/pci-epf-ntb.c
+++ b/drivers/pci/endpoint/functions/pci-epf-ntb.c
@@ -36,8 +36,10 @@
 
 #include <linux/delay.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/pci-epc.h>
 #include <linux/pci-epf.h>
diff --git a/drivers/pci/endpoint/functions/pci-epf-test.c b/drivers/pci/endpoint/functions/pci-epf-test.c
index 18c80002d3bd..cb578136e479 100644
--- a/drivers/pci/endpoint/functions/pci-epf-test.c
+++ b/drivers/pci/endpoint/functions/pci-epf-test.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/pci_ids.h>
 #include <linux/random.h>
+#include <linux/completion.h>
 
 #include <linux/pci-epc.h>
 #include <linux/pci-epf.h>
diff --git a/drivers/pci/endpoint/functions/pci-epf-vntb.c b/drivers/pci/endpoint/functions/pci-epf-vntb.c
index e75a2af77328..e56b2054192c 100644
--- a/drivers/pci/endpoint/functions/pci-epf-vntb.c
+++ b/drivers/pci/endpoint/functions/pci-epf-vntb.c
@@ -38,8 +38,11 @@
 
 #include <linux/delay.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/pci-epc.h>
 #include <linux/pci-epf.h>
diff --git a/drivers/pci/endpoint/pci-ep-cfs.c b/drivers/pci/endpoint/pci-ep-cfs.c
index 0ea64e24ed61..765418660209 100644
--- a/drivers/pci/endpoint/pci-ep-cfs.c
+++ b/drivers/pci/endpoint/pci-ep-cfs.c
@@ -8,7 +8,9 @@
 
 #include <linux/module.h>
 #include <linux/idr.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/pci-epc.h>
 #include <linux/pci-epf.h>
diff --git a/drivers/pci/endpoint/pci-epc-core.c b/drivers/pci/endpoint/pci-epc-core.c
index dcd4e66430c1..f4fc1f4998a9 100644
--- a/drivers/pci/endpoint/pci-epc-core.c
+++ b/drivers/pci/endpoint/pci-epc-core.c
@@ -7,7 +7,9 @@
  */
 
 #include <linux/device.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 
 #include <linux/pci-epc.h>
diff --git a/drivers/pci/endpoint/pci-epf-core.c b/drivers/pci/endpoint/pci-epf-core.c
index bf655383e5ed..1bb46e9aa753 100644
--- a/drivers/pci/endpoint/pci-epf-core.c
+++ b/drivers/pci/endpoint/pci-epf-core.c
@@ -8,6 +8,7 @@
 
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
 #include <linux/module.h>
 
diff --git a/drivers/pci/hotplug/acpiphp_core.c b/drivers/pci/hotplug/acpiphp_core.c
index 9dad14e80bcf..539e9b4bfaa0 100644
--- a/drivers/pci/hotplug/acpiphp_core.c
+++ b/drivers/pci/hotplug/acpiphp_core.c
@@ -22,6 +22,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/pci.h>
diff --git a/drivers/pci/hotplug/cpci_hotplug_core.c b/drivers/pci/hotplug/cpci_hotplug_core.c
index d0559d2faf50..d4f35de53ce3 100644
--- a/drivers/pci/hotplug/cpci_hotplug_core.c
+++ b/drivers/pci/hotplug/cpci_hotplug_core.c
@@ -23,6 +23,7 @@
 #include <linux/delay.h>
 #include <linux/kthread.h>
 #include "cpci_hotplug.h"
+#include <linux/sprintf.h>
 
 #define DRIVER_AUTHOR	"Scott Murray <scottm@somanetworks.com>"
 #define DRIVER_DESC	"CompactPCI Hot Plug Core"
diff --git a/drivers/pci/hotplug/cpcihp_generic.c b/drivers/pci/hotplug/cpcihp_generic.c
index 17d71edf046f..6f9a584dd877 100644
--- a/drivers/pci/hotplug/cpcihp_generic.c
+++ b/drivers/pci/hotplug/cpcihp_generic.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/string.h>
 #include "cpci_hotplug.h"
diff --git a/drivers/pci/hotplug/cpqphp_core.c b/drivers/pci/hotplug/cpqphp_core.c
index c94b40e64baf..b1545080f790 100644
--- a/drivers/pci/hotplug/cpqphp_core.c
+++ b/drivers/pci/hotplug/cpqphp_core.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/proc_fs.h>
 #include <linux/slab.h>
diff --git a/drivers/pci/hotplug/cpqphp_sysfs.c b/drivers/pci/hotplug/cpqphp_sysfs.c
index fed1360ee9b1..a1a494c9aaa4 100644
--- a/drivers/pci/hotplug/cpqphp_sysfs.c
+++ b/drivers/pci/hotplug/cpqphp_sysfs.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/proc_fs.h>
 #include <linux/workqueue.h>
diff --git a/drivers/pci/hotplug/ibmphp_ebda.c b/drivers/pci/hotplug/ibmphp_ebda.c
index 7fb75401ad8a..bcd68eecc01a 100644
--- a/drivers/pci/hotplug/ibmphp_ebda.c
+++ b/drivers/pci/hotplug/ibmphp_ebda.c
@@ -21,6 +21,7 @@
 #include <linux/list.h>
 #include <linux/init.h>
 #include "ibmphp.h"
+#include <linux/sprintf.h>
 
 /*
  * POST builds data blocks(in this data block definition, a char-1
diff --git a/drivers/pci/hotplug/pci_hotplug_core.c b/drivers/pci/hotplug/pci_hotplug_core.c
index 058d5937d8a9..5923c87f98bd 100644
--- a/drivers/pci/hotplug/pci_hotplug_core.c
+++ b/drivers/pci/hotplug/pci_hotplug_core.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>	/* try_module_get & module_put */
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/kobject.h>
diff --git a/drivers/pci/hotplug/pciehp_core.c b/drivers/pci/hotplug/pciehp_core.c
index ddd55ad97a58..1393527c157b 100644
--- a/drivers/pci/hotplug/pciehp_core.c
+++ b/drivers/pci/hotplug/pciehp_core.c
@@ -24,6 +24,7 @@
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include "pciehp.h"
diff --git a/drivers/pci/hotplug/pnv_php.c b/drivers/pci/hotplug/pnv_php.c
index 694349be9d0a..7bc74290ea85 100644
--- a/drivers/pci/hotplug/pnv_php.c
+++ b/drivers/pci/hotplug/pnv_php.c
@@ -7,6 +7,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/libfdt.h>
+#include <linux/kref.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/pci_hotplug.h>
diff --git a/drivers/pci/hotplug/rpaphp_core.c b/drivers/pci/hotplug/rpaphp_core.c
index 2316de0fd198..a3ab7e4705fe 100644
--- a/drivers/pci/hotplug/rpaphp_core.c
+++ b/drivers/pci/hotplug/rpaphp_core.c
@@ -9,6 +9,7 @@
  *
  */
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/of.h>
@@ -16,6 +17,7 @@
 #include <linux/pci_hotplug.h>
 #include <linux/smp.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <asm/firmware.h>
 #include <asm/eeh.h>       /* for eeh_add_device() */
diff --git a/drivers/pci/hotplug/s390_pci_hpc.c b/drivers/pci/hotplug/s390_pci_hpc.c
index a89b7de72dcf..865998b667e3 100644
--- a/drivers/pci/hotplug/s390_pci_hpc.c
+++ b/drivers/pci/hotplug/s390_pci_hpc.c
@@ -17,6 +17,7 @@
 #include <linux/pci_hotplug.h>
 #include <asm/pci_debug.h>
 #include <asm/sclp.h>
+#include <linux/sprintf.h>
 
 #define SLOT_NAME_SIZE	10
 
diff --git a/drivers/pci/hotplug/shpchp_core.c b/drivers/pci/hotplug/shpchp_core.c
index 56c7795ed890..95a83f33c375 100644
--- a/drivers/pci/hotplug/shpchp_core.c
+++ b/drivers/pci/hotplug/shpchp_core.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
diff --git a/drivers/pci/iov.c b/drivers/pci/iov.c
index aaa33e8dc4c9..1d2471a0a91b 100644
--- a/drivers/pci/iov.c
+++ b/drivers/pci/iov.c
@@ -10,6 +10,8 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include "pci.h"
diff --git a/drivers/pci/of.c b/drivers/pci/of.c
index 51e3dd0ea5ab..b8eb3686ef43 100644
--- a/drivers/pci/of.c
+++ b/drivers/pci/of.c
@@ -14,6 +14,7 @@
 #include <linux/of_address.h>
 #include <linux/of_pci.h>
 #include "pci.h"
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_PCI
 /**
diff --git a/drivers/pci/of_property.c b/drivers/pci/of_property.c
index c2c7334152bc..c9848e94a1cc 100644
--- a/drivers/pci/of_property.c
+++ b/drivers/pci/of_property.c
@@ -3,12 +3,14 @@
  * Copyright (C) 2022-2023, Advanced Micro Devices, Inc.
  */
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 #include <linux/of.h>
 #include <linux/of_irq.h>
 #include <linux/bitfield.h>
 #include <linux/bits.h>
 #include "pci.h"
+#include <linux/sprintf.h>
 
 #define OF_PCI_ADDRESS_CELLS		3
 #define OF_PCI_SIZE_CELLS		2
diff --git a/drivers/pci/p2pdma.c b/drivers/pci/p2pdma.c
index 0c361561b855..f8f2d8802164 100644
--- a/drivers/pci/p2pdma.c
+++ b/drivers/pci/p2pdma.c
@@ -11,6 +11,7 @@
 #define pr_fmt(fmt) "pci-p2pdma: " fmt
 #include <linux/ctype.h>
 #include <linux/dma-map-ops.h>
+#include <linux/kstrtox.h>
 #include <linux/pci-p2pdma.h>
 #include <linux/module.h>
 #include <linux/slab.h>
@@ -19,6 +20,7 @@
 #include <linux/percpu-refcount.h>
 #include <linux/random.h>
 #include <linux/seq_buf.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 
 struct pci_p2pdma {
diff --git a/drivers/pci/pci-bridge-emul.c b/drivers/pci/pci-bridge-emul.c
index 9334b2dd4764..0646aee513a9 100644
--- a/drivers/pci/pci-bridge-emul.c
+++ b/drivers/pci/pci-bridge-emul.c
@@ -19,6 +19,7 @@
 
 #include <linux/pci.h>
 #include "pci-bridge-emul.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define PCI_BRIDGE_CONF_END	PCI_STD_HEADER_SIZEOF
 #define PCI_CAP_SSID_SIZEOF	(PCI_SSVID_DEVICE_ID + 2)
diff --git a/drivers/pci/pci-driver.c b/drivers/pci/pci-driver.c
index ec838f2e892e..bfd7f2b4cb68 100644
--- a/drivers/pci/pci-driver.c
+++ b/drivers/pci/pci-driver.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/device.h>
 #include <linux/mempolicy.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/sched.h>
@@ -17,6 +18,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/suspend.h>
 #include <linux/kexec.h>
+#include <linux/kobject.h>
 #include <linux/of_device.h>
 #include <linux/acpi.h>
 #include <linux/dma-map-ops.h>
diff --git a/drivers/pci/pci-stub.c b/drivers/pci/pci-stub.c
index d1f4c1ce7bd1..e4e8df231927 100644
--- a/drivers/pci/pci-stub.c
+++ b/drivers/pci/pci-stub.c
@@ -18,6 +18,7 @@
 
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 static char ids[1024] __initdata;
 
diff --git a/drivers/pci/pci-sysfs.c b/drivers/pci/pci-sysfs.c
index 2321fdfefd7d..de64adebd433 100644
--- a/drivers/pci/pci-sysfs.c
+++ b/drivers/pci/pci-sysfs.c
@@ -14,8 +14,10 @@
 
 #include <linux/bitfield.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/export.h>
 #include <linux/topology.h>
diff --git a/drivers/pci/pci.c b/drivers/pci/pci.c
index a532bf597e57..5ce561a5c172 100644
--- a/drivers/pci/pci.c
+++ b/drivers/pci/pci.c
@@ -13,6 +13,7 @@
 #include <linux/delay.h>
 #include <linux/dmi.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/msi.h>
 #include <linux/of.h>
 #include <linux/pci.h>
@@ -20,10 +21,12 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/log2.h>
 #include <linux/logic_pio.h>
 #include <linux/pm_wakeup.h>
+#include <linux/idr.h> // for DEFINE_IDA
 #include <linux/device.h>
 #include <linux/pm_runtime.h>
 #include <linux/pci_hotplug.h>
diff --git a/drivers/pci/pcie/aspm.c b/drivers/pci/pcie/aspm.c
index 7f1d674ff171..38e718a91ade 100644
--- a/drivers/pci/pcie/aspm.c
+++ b/drivers/pci/pcie/aspm.c
@@ -9,6 +9,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/limits.h>
 #include <linux/math.h>
 #include <linux/module.h>
@@ -20,6 +21,7 @@
 #include <linux/init.h>
 #include <linux/printk.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 
 #include "../pci.h"
diff --git a/drivers/pci/pcie/ptm.c b/drivers/pci/pcie/ptm.c
index 7cfb6c0d5dcb..bb3b97d5d243 100644
--- a/drivers/pci/pcie/ptm.c
+++ b/drivers/pci/pcie/ptm.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/pci.h>
 #include "../pci.h"
+#include <linux/sprintf.h>
 
 /*
  * If the next upstream device supports PTM, return it; otherwise return
diff --git a/drivers/pci/probe.c b/drivers/pci/probe.c
index b5ccf5a16dc1..054f5d42fc88 100644
--- a/drivers/pci/probe.c
+++ b/drivers/pci/probe.c
@@ -20,6 +20,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/bitfield.h>
 #include "pci.h"
+#include <linux/sprintf.h>
 
 #define CARDBUS_LATENCY_TIMER	176	/* secondary latency timer */
 #define CARDBUS_RESERVE_BUSNR	3
diff --git a/drivers/pci/proc.c b/drivers/pci/proc.c
index f967709082d6..d23aaf808dae 100644
--- a/drivers/pci/proc.c
+++ b/drivers/pci/proc.c
@@ -12,6 +12,7 @@
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
 #include <linux/capability.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/security.h>
 #include <asm/byteorder.h>
diff --git a/drivers/pci/slot.c b/drivers/pci/slot.c
index 0f87cade10f7..9f14687700bf 100644
--- a/drivers/pci/slot.c
+++ b/drivers/pci/slot.c
@@ -11,6 +11,7 @@
 #include <linux/pci.h>
 #include <linux/err.h>
 #include "pci.h"
+#include <linux/sprintf.h>
 
 struct kset *pci_slots_kset;
 EXPORT_SYMBOL_GPL(pci_slots_kset);
diff --git a/drivers/pci/switch/switchtec.c b/drivers/pci/switch/switchtec.c
index 1804794d0e68..eea031b3f0ef 100644
--- a/drivers/pci/switch/switchtec.c
+++ b/drivers/pci/switch/switchtec.c
@@ -7,6 +7,7 @@
 #include <linux/switchtec.h>
 #include <linux/switchtec_ioctl.h>
 
+#include <linux/idr.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/fs.h>
diff --git a/drivers/pci/vgaarb.c b/drivers/pci/vgaarb.c
index 78748e8d2dba..f2d22a8f134c 100644
--- a/drivers/pci/vgaarb.c
+++ b/drivers/pci/vgaarb.c
@@ -21,6 +21,7 @@
 #include <linux/init.h>
 #include <linux/list.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/spinlock.h>
 #include <linux/poll.h>
diff --git a/drivers/pci/xen-pcifront.c b/drivers/pci/xen-pcifront.c
index 11636634ae51..f87dec5bb2e7 100644
--- a/drivers/pci/xen-pcifront.c
+++ b/drivers/pci/xen-pcifront.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <xen/xenbus.h>
 #include <xen/events.h>
 #include <xen/grant_table.h>
diff --git a/drivers/pcmcia/cs.c b/drivers/pcmcia/cs.c
index b33be1e63c98..8acf86b21653 100644
--- a/drivers/pcmcia/cs.c
+++ b/drivers/pcmcia/cs.c
@@ -27,6 +27,7 @@
 #include <linux/kthread.h>
 #include <linux/freezer.h>
 #include <asm/irq.h>
+#include <linux/completion.h>
 
 #include <pcmcia/ss.h>
 #include <pcmcia/cistpl.h>
diff --git a/drivers/pcmcia/cs_internal.h b/drivers/pcmcia/cs_internal.h
index 580369f3c0b0..04a9f4060740 100644
--- a/drivers/pcmcia/cs_internal.h
+++ b/drivers/pcmcia/cs_internal.h
@@ -17,6 +17,7 @@
 #ifndef _LINUX_CS_INTERNAL_H
 #define _LINUX_CS_INTERNAL_H
 
+#include <linux/ioport.h> // for struct resource
 #include <linux/kref.h>
 
 /* Flags in client state */
diff --git a/drivers/pcmcia/ds.c b/drivers/pcmcia/ds.c
index b4b8363d1de2..6fcd124c8d2c 100644
--- a/drivers/pcmcia/ds.c
+++ b/drivers/pcmcia/ds.c
@@ -16,6 +16,7 @@
 #include <linux/errno.h>
 #include <linux/list.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/crc32.h>
 #include <linux/firmware.h>
diff --git a/drivers/pcmcia/i82365.c b/drivers/pcmcia/i82365.c
index 891ccea2cccb..21cda28d5f2e 100644
--- a/drivers/pcmcia/i82365.c
+++ b/drivers/pcmcia/i82365.c
@@ -34,6 +34,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
 #include <linux/string.h>
diff --git a/drivers/pcmcia/rsrc_nonstatic.c b/drivers/pcmcia/rsrc_nonstatic.c
index bf9d070a4496..ef7e6319ee02 100644
--- a/drivers/pcmcia/rsrc_nonstatic.c
+++ b/drivers/pcmcia/rsrc_nonstatic.c
@@ -15,6 +15,7 @@
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/ioport.h>
diff --git a/drivers/pcmcia/sa11xx_base.c b/drivers/pcmcia/sa11xx_base.c
index 48140ac73ed6..1f3abd4d95e5 100644
--- a/drivers/pcmcia/sa11xx_base.c
+++ b/drivers/pcmcia/sa11xx_base.c
@@ -38,6 +38,7 @@
 #include <linux/spinlock.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <mach/hardware.h>
 #include <asm/irq.h>
diff --git a/drivers/pcmcia/soc_common.c b/drivers/pcmcia/soc_common.c
index 61b0c8952bb5..02ada013f89b 100644
--- a/drivers/pcmcia/soc_common.c
+++ b/drivers/pcmcia/soc_common.c
@@ -45,6 +45,7 @@
 #include <linux/mutex.h>
 #include <linux/regulator/consumer.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/pci.h>
 
diff --git a/drivers/pcmcia/socket_sysfs.c b/drivers/pcmcia/socket_sysfs.c
index c7a906664c36..fbd96f5e25bd 100644
--- a/drivers/pcmcia/socket_sysfs.c
+++ b/drivers/pcmcia/socket_sysfs.c
@@ -9,6 +9,7 @@
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/major.h>
 #include <linux/errno.h>
diff --git a/drivers/peci/controller/peci-aspeed.c b/drivers/peci/controller/peci-aspeed.c
index 7fdc25afcf2f..8fc416b4baa3 100644
--- a/drivers/peci/controller/peci-aspeed.c
+++ b/drivers/peci/controller/peci-aspeed.c
@@ -3,11 +3,14 @@
 // Copyright (c) 2018-2021 Intel Corporation
 
 #include <asm/unaligned.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
 #include <linux/clkdev.h>
 #include <linux/clk-provider.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/peci/controller/peci-npcm.c b/drivers/peci/controller/peci-npcm.c
index ec613d35c796..8b4a809ffee4 100644
--- a/drivers/peci/controller/peci-npcm.c
+++ b/drivers/peci/controller/peci-npcm.c
@@ -3,6 +3,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/jiffies.h>
 #include <linux/module.h>
diff --git a/drivers/peci/cpu.c b/drivers/peci/cpu.c
index bd990acd92b8..42f44580984a 100644
--- a/drivers/peci/cpu.c
+++ b/drivers/peci/cpu.c
@@ -6,6 +6,7 @@
 #include <linux/peci.h>
 #include <linux/peci-cpu.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/drivers/peci/sysfs.c b/drivers/peci/sysfs.c
index c04244075794..afabf7953bbd 100644
--- a/drivers/peci/sysfs.c
+++ b/drivers/peci/sysfs.c
@@ -3,6 +3,7 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/peci.h>
 
 #include "internal.h"
diff --git a/drivers/perf/alibaba_uncore_drw_pmu.c b/drivers/perf/alibaba_uncore_drw_pmu.c
index 8bdb63c62fbf..78a1c7070ba1 100644
--- a/drivers/perf/alibaba_uncore_drw_pmu.c
+++ b/drivers/perf/alibaba_uncore_drw_pmu.c
@@ -28,6 +28,7 @@
 #include <linux/printk.h>
 #include <linux/rculist.h>
 #include <linux/refcount.h>
+#include <linux/sprintf.h>
 
 
 #define ALI_DRW_PMU_COMMON_MAX_COUNTERS			16
diff --git a/drivers/perf/amlogic/meson_ddr_pmu_core.c b/drivers/perf/amlogic/meson_ddr_pmu_core.c
index bbc7285fd934..299ba59ab3e6 100644
--- a/drivers/perf/amlogic/meson_ddr_pmu_core.c
+++ b/drivers/perf/amlogic/meson_ddr_pmu_core.c
@@ -12,6 +12,7 @@
 #include <linux/perf_event.h>
 #include <linux/platform_device.h>
 #include <linux/printk.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
 
diff --git a/drivers/perf/apple_m1_cpu_pmu.c b/drivers/perf/apple_m1_cpu_pmu.c
index f322e5ca1114..4dffa4e8bf66 100644
--- a/drivers/perf/apple_m1_cpu_pmu.c
+++ b/drivers/perf/apple_m1_cpu_pmu.c
@@ -13,6 +13,7 @@
 #include <linux/of.h>
 #include <linux/perf/arm_pmu.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <asm/apple_m1_pmu.h>
 #include <asm/irq_regs.h>
diff --git a/drivers/perf/arm-ccn.c b/drivers/perf/arm-ccn.c
index c0d2a805a346..3c29314c55b8 100644
--- a/drivers/perf/arm-ccn.c
+++ b/drivers/perf/arm-ccn.c
@@ -9,6 +9,7 @@
 #include <linux/idr.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/perf_event.h>
diff --git a/drivers/perf/arm_cspmu/arm_cspmu.c b/drivers/perf/arm_cspmu/arm_cspmu.c
index b9a252272f1e..e5aa446f7822 100644
--- a/drivers/perf/arm_cspmu/arm_cspmu.c
+++ b/drivers/perf/arm_cspmu/arm_cspmu.c
@@ -25,6 +25,7 @@
 #include <linux/ctype.h>
 #include <linux/interrupt.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/of.h>
diff --git a/drivers/perf/arm_pmu_acpi.c b/drivers/perf/arm_pmu_acpi.c
index 05dda19c5359..662b52ed43f8 100644
--- a/drivers/perf/arm_pmu_acpi.c
+++ b/drivers/perf/arm_pmu_acpi.c
@@ -12,6 +12,7 @@
 #include <linux/irqdesc.h>
 #include <linux/percpu.h>
 #include <linux/perf/arm_pmu.h>
+#include <linux/sprintf.h>
 
 #include <asm/cpu.h>
 #include <asm/cputype.h>
diff --git a/drivers/perf/arm_pmuv3.c b/drivers/perf/arm_pmuv3.c
index 312320ac824f..8fe3c63ac37d 100644
--- a/drivers/perf/arm_pmuv3.c
+++ b/drivers/perf/arm_pmuv3.c
@@ -11,6 +11,8 @@
 #include <asm/irq_regs.h>
 #include <asm/perf_event.h>
 #include <asm/virt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #include <clocksource/arm_arch_timer.h>
 
diff --git a/drivers/perf/fsl_imx8_ddr_perf.c b/drivers/perf/fsl_imx8_ddr_perf.c
index 4e8fa5a48fcf..aaed26c74b71 100644
--- a/drivers/perf/fsl_imx8_ddr_perf.c
+++ b/drivers/perf/fsl_imx8_ddr_perf.c
@@ -14,6 +14,7 @@
 #include <linux/perf_event.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h> // used by PMU_FORMAT_ATTR()
 
 #define COUNTER_CNTL		0x0
 #define COUNTER_READ		0x20
diff --git a/drivers/perf/fsl_imx9_ddr_perf.c b/drivers/perf/fsl_imx9_ddr_perf.c
index 72c2d3074cde..848189b4da9b 100644
--- a/drivers/perf/fsl_imx9_ddr_perf.c
+++ b/drivers/perf/fsl_imx9_ddr_perf.c
@@ -9,6 +9,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/perf_event.h>
+#include <linux/sprintf.h> // used by PMU_FORMAT_ATTR()
 
 /* Performance monitor configuration */
 #define PMCFG1  			0x00
diff --git a/drivers/perf/marvell_cn10k_ddr_pmu.c b/drivers/perf/marvell_cn10k_ddr_pmu.c
index e2abca188dbe..96ef0eab20fa 100644
--- a/drivers/perf/marvell_cn10k_ddr_pmu.c
+++ b/drivers/perf/marvell_cn10k_ddr_pmu.c
@@ -12,6 +12,7 @@
 #include <linux/hrtimer.h>
 #include <linux/acpi.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h> // used by PMU_FORMAT_ATTR()
 
 /* Performance Counters Operating Mode Control Registers */
 #define DDRC_PERF_CNT_OP_MODE_CTRL	0x8020
diff --git a/drivers/perf/marvell_cn10k_tad_pmu.c b/drivers/perf/marvell_cn10k_tad_pmu.c
index 9e635f355470..898247d50689 100644
--- a/drivers/perf/marvell_cn10k_tad_pmu.c
+++ b/drivers/perf/marvell_cn10k_tad_pmu.c
@@ -12,6 +12,7 @@
 #include <linux/cpuhotplug.h>
 #include <linux/perf_event.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h> // used by PMU_FORMAT_ATTR()
 #include <linux/acpi.h>
 
 #define TAD_PFC_OFFSET		0x800
diff --git a/drivers/perf/thunderx2_pmu.c b/drivers/perf/thunderx2_pmu.c
index e16d10c763de..b434df201fc5 100644
--- a/drivers/perf/thunderx2_pmu.c
+++ b/drivers/perf/thunderx2_pmu.c
@@ -9,6 +9,7 @@
 #include <linux/cpuhotplug.h>
 #include <linux/perf_event.h>
 #include <linux/platform_device.h>
+#include <linux/hrtimer.h>
 
 /* Each ThunderX2(TX2) Socket has a L3C and DMC UNCORE PMU device.
  * Each UNCORE PMU device consists of 4 independent programmable counters.
diff --git a/drivers/perf/xgene_pmu.c b/drivers/perf/xgene_pmu.c
index 0d49343d704b..ff256d657ae3 100644
--- a/drivers/perf/xgene_pmu.c
+++ b/drivers/perf/xgene_pmu.c
@@ -13,6 +13,7 @@
 #include <linux/cpumask.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
 #include <linux/of_address.h>
diff --git a/drivers/phy/allwinner/phy-sun4i-usb.c b/drivers/phy/allwinner/phy-sun4i-usb.c
index e53a9a9317bc..652c1bbf0371 100644
--- a/drivers/phy/allwinner/phy-sun4i-usb.c
+++ b/drivers/phy/allwinner/phy-sun4i-usb.c
@@ -31,6 +31,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/usb/of.h>
 #include <linux/workqueue.h>
 
diff --git a/drivers/phy/broadcom/phy-brcm-usb.c b/drivers/phy/broadcom/phy-brcm-usb.c
index a16f0b58eb74..cd8aaa75cc51 100644
--- a/drivers/phy/broadcom/phy-brcm-usb.c
+++ b/drivers/phy/broadcom/phy-brcm-usb.c
@@ -17,6 +17,7 @@
 #include <linux/soc/brcmstb/brcmstb.h>
 #include <dt-bindings/phy/phy.h>
 #include <linux/mfd/syscon.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 
 #include "phy-brcm-usb-init.h"
diff --git a/drivers/phy/cadence/phy-cadence-sierra.c b/drivers/phy/cadence/phy-cadence-sierra.c
index d4eb93ce8232..93ffd9e303a2 100644
--- a/drivers/phy/cadence/phy-cadence-sierra.c
+++ b/drivers/phy/cadence/phy-cadence-sierra.c
@@ -22,6 +22,7 @@
 #include <linux/of_platform.h>
 #include <dt-bindings/phy/phy.h>
 #include <dt-bindings/phy/phy-cadence.h>
+#include <linux/sprintf.h>
 
 #define NUM_SSC_MODE		3
 #define NUM_PHY_TYPE		5
diff --git a/drivers/phy/cadence/phy-cadence-torrent.c b/drivers/phy/cadence/phy-cadence-torrent.c
index 95924a09960c..0789cdd1384b 100644
--- a/drivers/phy/cadence/phy-cadence-torrent.c
+++ b/drivers/phy/cadence/phy-cadence-torrent.c
@@ -21,6 +21,7 @@
 #include <linux/platform_device.h>
 #include <linux/reset.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #define REF_CLK_19_2MHZ		19200000
 #define REF_CLK_25MHZ		25000000
diff --git a/drivers/phy/mediatek/phy-mtk-mipi-csi-0-5.c b/drivers/phy/mediatek/phy-mtk-mipi-csi-0-5.c
index 972c129185f7..37eb72d50e4d 100644
--- a/drivers/phy/mediatek/phy-mtk-mipi-csi-0-5.c
+++ b/drivers/phy/mediatek/phy-mtk-mipi-csi-0-5.c
@@ -12,6 +12,7 @@
 #include <linux/io.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/of.h>
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
diff --git a/drivers/phy/mediatek/phy-mtk-pcie.c b/drivers/phy/mediatek/phy-mtk-pcie.c
index a2f69d6c72f0..614d02a5fc63 100644
--- a/drivers/phy/mediatek/phy-mtk-pcie.c
+++ b/drivers/phy/mediatek/phy-mtk-pcie.c
@@ -11,6 +11,7 @@
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "phy-mtk-io.h"
 
diff --git a/drivers/phy/mediatek/phy-mtk-tphy.c b/drivers/phy/mediatek/phy-mtk-tphy.c
index a4746f6cb8a1..50a0ba823267 100644
--- a/drivers/phy/mediatek/phy-mtk-tphy.c
+++ b/drivers/phy/mediatek/phy-mtk-tphy.c
@@ -10,6 +10,7 @@
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/iopoll.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/syscon.h>
 #include <linux/module.h>
 #include <linux/nvmem-consumer.h>
diff --git a/drivers/phy/motorola/phy-mapphone-mdm6600.c b/drivers/phy/motorola/phy-mapphone-mdm6600.c
index 376d023a0aa9..b13f49fabb00 100644
--- a/drivers/phy/motorola/phy-mapphone-mdm6600.c
+++ b/drivers/phy/motorola/phy-mapphone-mdm6600.c
@@ -12,6 +12,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include <linux/gpio/consumer.h>
 #include <linux/of_platform.h>
diff --git a/drivers/phy/qualcomm/phy-qcom-edp.c b/drivers/phy/qualcomm/phy-qcom-edp.c
index 9818d994c68b..250efb4df8d4 100644
--- a/drivers/phy/qualcomm/phy-qcom-edp.c
+++ b/drivers/phy/qualcomm/phy-qcom-edp.c
@@ -18,6 +18,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/phy/phy.h>
 
diff --git a/drivers/phy/qualcomm/phy-qcom-qmp-combo.c b/drivers/phy/qualcomm/phy-qcom-qmp-combo.c
index b6908a03da58..2296070624ff 100644
--- a/drivers/phy/qualcomm/phy-qcom-qmp-combo.c
+++ b/drivers/phy/qualcomm/phy-qcom-qmp-combo.c
@@ -18,6 +18,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb/typec.h>
 #include <linux/usb/typec_mux.h>
 
diff --git a/drivers/phy/qualcomm/phy-qcom-qmp-ufs.c b/drivers/phy/qualcomm/phy-qcom-qmp-ufs.c
index 590432d581f9..8382e8a59920 100644
--- a/drivers/phy/qualcomm/phy-qcom-qmp-ufs.c
+++ b/drivers/phy/qualcomm/phy-qcom-qmp-ufs.c
@@ -18,6 +18,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <ufs/unipro.h>
 
diff --git a/drivers/phy/renesas/phy-rcar-gen3-usb2.c b/drivers/phy/renesas/phy-rcar-gen3-usb2.c
index 6387c0d34c55..ee4dd94cc94a 100644
--- a/drivers/phy/renesas/phy-rcar-gen3-usb2.c
+++ b/drivers/phy/renesas/phy-rcar-gen3-usb2.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/usb/of.h>
 #include <linux/workqueue.h>
diff --git a/drivers/phy/starfive/phy-jh7110-pcie.c b/drivers/phy/starfive/phy-jh7110-pcie.c
index 734c8e007727..5b2ca43576e5 100644
--- a/drivers/phy/starfive/phy-jh7110-pcie.c
+++ b/drivers/phy/starfive/phy-jh7110-pcie.c
@@ -12,6 +12,7 @@
 #include <linux/io.h>
 #include <linux/module.h>
 #include <linux/mfd/syscon.h>
+#include <linux/of.h>
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
diff --git a/drivers/phy/tegra/xusb.c b/drivers/phy/tegra/xusb.c
index 142ebe0247cc..8291e21cb996 100644
--- a/drivers/phy/tegra/xusb.c
+++ b/drivers/phy/tegra/xusb.c
@@ -15,6 +15,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include <soc/tegra/fuse.h>
diff --git a/drivers/phy/ti/phy-j721e-wiz.c b/drivers/phy/ti/phy-j721e-wiz.c
index 00d7e6a6de03..159893562b87 100644
--- a/drivers/phy/ti/phy-j721e-wiz.c
+++ b/drivers/phy/ti/phy-j721e-wiz.c
@@ -23,6 +23,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
 #include <linux/reset-controller.h>
+#include <linux/sprintf.h>
 
 #define REF_CLK_19_2MHZ         19200000
 #define REF_CLK_25MHZ           25000000
diff --git a/drivers/phy/ti/phy-twl4030-usb.c b/drivers/phy/ti/phy-twl4030-usb.c
index 6b265992d988..b06c91644207 100644
--- a/drivers/phy/ti/phy-twl4030-usb.c
+++ b/drivers/phy/ti/phy-twl4030-usb.c
@@ -16,6 +16,7 @@
 #include <linux/interrupt.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/io.h>
 #include <linux/delay.h>
diff --git a/drivers/phy/xilinx/phy-zynqmp.c b/drivers/phy/xilinx/phy-zynqmp.c
index 2559c6594cea..f0ed50b67731 100644
--- a/drivers/phy/xilinx/phy-zynqmp.c
+++ b/drivers/phy/xilinx/phy-zynqmp.c
@@ -22,6 +22,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <dt-bindings/phy/phy.h>
 
diff --git a/drivers/pinctrl/bcm/pinctrl-bcm2835.c b/drivers/pinctrl/bcm/pinctrl-bcm2835.c
index 1489191a213f..8d3be95598e3 100644
--- a/drivers/pinctrl/bcm/pinctrl-bcm2835.c
+++ b/drivers/pinctrl/bcm/pinctrl-bcm2835.c
@@ -34,6 +34,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <dt-bindings/pinctrl/bcm2835.h>
 
diff --git a/drivers/pinctrl/core.c b/drivers/pinctrl/core.c
index ee56856cb80c..654bc78119b7 100644
--- a/drivers/pinctrl/core.c
+++ b/drivers/pinctrl/core.c
@@ -23,6 +23,7 @@
 #include <linux/list.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/gpio.h>
 #include <linux/gpio/driver.h>
diff --git a/drivers/pinctrl/devicetree.c b/drivers/pinctrl/devicetree.c
index df1efc2e5202..0b82379a6f95 100644
--- a/drivers/pinctrl/devicetree.c
+++ b/drivers/pinctrl/devicetree.c
@@ -9,6 +9,7 @@
 #include <linux/of.h>
 #include <linux/pinctrl/pinctrl.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include "devicetree.h"
diff --git a/drivers/pinctrl/freescale/pinctrl-mxs.c b/drivers/pinctrl/freescale/pinctrl-mxs.c
index e77311f26262..531a51a6e311 100644
--- a/drivers/pinctrl/freescale/pinctrl-mxs.c
+++ b/drivers/pinctrl/freescale/pinctrl-mxs.c
@@ -10,6 +10,7 @@
 #include <linux/platform_device.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/pinctrl/machine.h>
 #include <linux/pinctrl/pinconf.h>
diff --git a/drivers/pinctrl/mediatek/pinctrl-mtmips.c b/drivers/pinctrl/mediatek/pinctrl-mtmips.c
index efd77b6c56a1..e685ebcfc7b6 100644
--- a/drivers/pinctrl/mediatek/pinctrl-mtmips.c
+++ b/drivers/pinctrl/mediatek/pinctrl-mtmips.c
@@ -15,6 +15,7 @@
 #include <linux/pinctrl/pinmux.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/pinctrl/machine.h>
+#include <linux/sprintf.h>
 
 #include <asm/mach-ralink/ralink_regs.h>
 #include <asm/mach-ralink/mt7620.h>
diff --git a/drivers/pinctrl/mediatek/pinctrl-paris.c b/drivers/pinctrl/mediatek/pinctrl-paris.c
index b6bc31abd2b0..cae88eb9bb05 100644
--- a/drivers/pinctrl/mediatek/pinctrl-paris.c
+++ b/drivers/pinctrl/mediatek/pinctrl-paris.c
@@ -12,6 +12,7 @@
 #include <linux/gpio/driver.h>
 #include <linux/module.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 
 #include <linux/pinctrl/consumer.h>
 
diff --git a/drivers/pinctrl/mvebu/pinctrl-mvebu.c b/drivers/pinctrl/mvebu/pinctrl-mvebu.c
index 84a119718f86..8eaf35797b1a 100644
--- a/drivers/pinctrl/mvebu/pinctrl-mvebu.c
+++ b/drivers/pinctrl/mvebu/pinctrl-mvebu.c
@@ -15,6 +15,7 @@
 #include <linux/regmap.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/pinctrl/machine.h>
 #include <linux/pinctrl/pinconf.h>
diff --git a/drivers/pinctrl/nomadik/pinctrl-abx500.c b/drivers/pinctrl/nomadik/pinctrl-abx500.c
index 80e3ac333136..07dd27df96fd 100644
--- a/drivers/pinctrl/nomadik/pinctrl-abx500.c
+++ b/drivers/pinctrl/nomadik/pinctrl-abx500.c
@@ -22,6 +22,7 @@
 #include <linux/property.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #include <linux/mfd/abx500.h>
diff --git a/drivers/pinctrl/nomadik/pinctrl-nomadik.c b/drivers/pinctrl/nomadik/pinctrl-nomadik.c
index 7911353ac97d..3c225903384a 100644
--- a/drivers/pinctrl/nomadik/pinctrl-nomadik.c
+++ b/drivers/pinctrl/nomadik/pinctrl-nomadik.c
@@ -25,6 +25,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 /* Since we request GPIOs from ourself */
 #include <linux/pinctrl/consumer.h>
diff --git a/drivers/pinctrl/nxp/pinctrl-s32cc.c b/drivers/pinctrl/nxp/pinctrl-s32cc.c
index f0cad2c501f7..db4131c459d4 100644
--- a/drivers/pinctrl/nxp/pinctrl-s32cc.c
+++ b/drivers/pinctrl/nxp/pinctrl-s32cc.c
@@ -22,6 +22,7 @@
 #include <linux/regmap.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "../core.h"
 #include "../pinconf.h"
diff --git a/drivers/pinctrl/pinctrl-amd.c b/drivers/pinctrl/pinctrl-amd.c
index 49f89b70dcec..c3e5f004bfcb 100644
--- a/drivers/pinctrl/pinctrl-amd.c
+++ b/drivers/pinctrl/pinctrl-amd.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/spinlock.h>
 #include <linux/compiler.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/log2.h>
diff --git a/drivers/pinctrl/pinctrl-digicolor.c b/drivers/pinctrl/pinctrl-digicolor.c
index a0423172bdd6..674b392b7948 100644
--- a/drivers/pinctrl/pinctrl-digicolor.c
+++ b/drivers/pinctrl/pinctrl-digicolor.c
@@ -17,6 +17,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/platform_device.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <linux/pinctrl/machine.h>
 #include <linux/pinctrl/pinconf.h>
diff --git a/drivers/pinctrl/pinctrl-equilibrium.c b/drivers/pinctrl/pinctrl-equilibrium.c
index 6e1be38865c3..61455d3ffbca 100644
--- a/drivers/pinctrl/pinctrl-equilibrium.c
+++ b/drivers/pinctrl/pinctrl-equilibrium.c
@@ -12,6 +12,7 @@
 #include <linux/pinctrl/pinmux.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include "pinconf.h"
diff --git a/drivers/pinctrl/pinctrl-falcon.c b/drivers/pinctrl/pinctrl-falcon.c
index 0bf9ffbcc79f..3bb664ea3b60 100644
--- a/drivers/pinctrl/pinctrl-falcon.c
+++ b/drivers/pinctrl/pinctrl-falcon.c
@@ -18,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "pinctrl-lantiq.h"
 
diff --git a/drivers/pinctrl/pinctrl-ingenic.c b/drivers/pinctrl/pinctrl-ingenic.c
index bc6358a686fc..81a94d4a8ed4 100644
--- a/drivers/pinctrl/pinctrl-ingenic.c
+++ b/drivers/pinctrl/pinctrl-ingenic.c
@@ -19,6 +19,7 @@
 #include <linux/regmap.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/pinctrl/consumer.h>
 #include <linux/pinctrl/pinconf-generic.h>
diff --git a/drivers/pinctrl/pinctrl-pistachio.c b/drivers/pinctrl/pinctrl-pistachio.c
index 53408344927a..4c6853eded0d 100644
--- a/drivers/pinctrl/pinctrl-pistachio.c
+++ b/drivers/pinctrl/pinctrl-pistachio.c
@@ -20,6 +20,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "pinctrl-utils.h"
 
diff --git a/drivers/pinctrl/pinctrl-st.c b/drivers/pinctrl/pinctrl-st.c
index 5d9abd6547d0..ffc0a72a4f5f 100644
--- a/drivers/pinctrl/pinctrl-st.c
+++ b/drivers/pinctrl/pinctrl-st.c
@@ -18,6 +18,7 @@
 #include <linux/regmap.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include <linux/pinctrl/consumer.h>
diff --git a/drivers/pinctrl/pinmux.c b/drivers/pinctrl/pinmux.c
index abbb044d6ace..be87b6451f60 100644
--- a/drivers/pinctrl/pinmux.c
+++ b/drivers/pinctrl/pinmux.c
@@ -23,6 +23,7 @@
 #include <linux/radix-tree.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <linux/pinctrl/machine.h>
diff --git a/drivers/pinctrl/qcom/pinctrl-qdf2xxx.c b/drivers/pinctrl/qcom/pinctrl-qdf2xxx.c
index 4d2f6f495163..2832dfd3574b 100644
--- a/drivers/pinctrl/qcom/pinctrl-qdf2xxx.c
+++ b/drivers/pinctrl/qcom/pinctrl-qdf2xxx.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/pinctrl/pinctrl.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #include "pinctrl-msm.h"
 
diff --git a/drivers/pinctrl/samsung/pinctrl-samsung.c b/drivers/pinctrl/samsung/pinctrl-samsung.c
index ed07e23e0912..3cc3d1db0a4d 100644
--- a/drivers/pinctrl/samsung/pinctrl-samsung.c
+++ b/drivers/pinctrl/samsung/pinctrl-samsung.c
@@ -26,6 +26,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include "../core.h"
 #include "pinctrl-samsung.h"
diff --git a/drivers/pinctrl/sunxi/pinctrl-sunxi.c b/drivers/pinctrl/sunxi/pinctrl-sunxi.c
index 73bcf806af0e..b21b18f55296 100644
--- a/drivers/pinctrl/sunxi/pinctrl-sunxi.c
+++ b/drivers/pinctrl/sunxi/pinctrl-sunxi.c
@@ -22,6 +22,7 @@
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/pinctrl/consumer.h>
 #include <linux/pinctrl/machine.h>
diff --git a/drivers/platform/chrome/chromeos_acpi.c b/drivers/platform/chrome/chromeos_acpi.c
index e6e6dcfc74d1..d0a4d71474b9 100644
--- a/drivers/platform/chrome/chromeos_acpi.c
+++ b/drivers/platform/chrome/chromeos_acpi.c
@@ -11,6 +11,7 @@
  * sysfs directory tree.
  */
 #include <linux/acpi.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/kernel.h>
 #include <linux/list.h>
diff --git a/drivers/platform/chrome/cros_ec_chardev.c b/drivers/platform/chrome/cros_ec_chardev.c
index 81950bb2c6da..fcfe51b6dc7f 100644
--- a/drivers/platform/chrome/cros_ec_chardev.c
+++ b/drivers/platform/chrome/cros_ec_chardev.c
@@ -22,6 +22,7 @@
 #include <linux/platform_device.h>
 #include <linux/poll.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/platform/chrome/cros_ec_debugfs.c b/drivers/platform/chrome/cros_ec_debugfs.c
index 6bf6f0e7b597..a067bf9423d9 100644
--- a/drivers/platform/chrome/cros_ec_debugfs.c
+++ b/drivers/platform/chrome/cros_ec_debugfs.c
@@ -15,6 +15,7 @@
 #include <linux/poll.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #define DRV_NAME "cros-ec-debugfs"
diff --git a/drivers/platform/chrome/cros_ec_lightbar.c b/drivers/platform/chrome/cros_ec_lightbar.c
index 6677cc6c4984..31dbbc4b4d29 100644
--- a/drivers/platform/chrome/cros_ec_lightbar.c
+++ b/drivers/platform/chrome/cros_ec_lightbar.c
@@ -14,6 +14,7 @@
 #include <linux/platform_data/cros_ec_proto.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 #include <linux/slab.h>
diff --git a/drivers/platform/chrome/cros_ec_sysfs.c b/drivers/platform/chrome/cros_ec_sysfs.c
index 93e67ab4af06..f1c6b2150e51 100644
--- a/drivers/platform/chrome/cros_ec_sysfs.c
+++ b/drivers/platform/chrome/cros_ec_sysfs.c
@@ -8,6 +8,7 @@
 #include <linux/device.h>
 #include <linux/fs.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_data/cros_ec_commands.h>
 #include <linux/platform_data/cros_ec_proto.h>
diff --git a/drivers/platform/chrome/cros_usbpd_logger.c b/drivers/platform/chrome/cros_usbpd_logger.c
index f618757f8b32..9d29283845b8 100644
--- a/drivers/platform/chrome/cros_usbpd_logger.c
+++ b/drivers/platform/chrome/cros_usbpd_logger.c
@@ -12,6 +12,7 @@
 #include <linux/platform_data/cros_ec_proto.h>
 #include <linux/platform_device.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 
 #define DRV_NAME "cros-usbpd-logger"
 
diff --git a/drivers/platform/chrome/wilco_ec/debugfs.c b/drivers/platform/chrome/wilco_ec/debugfs.c
index 93c11f81ca45..012c24abc980 100644
--- a/drivers/platform/chrome/wilco_ec/debugfs.c
+++ b/drivers/platform/chrome/wilco_ec/debugfs.c
@@ -10,6 +10,7 @@
 #include <linux/ctype.h>
 #include <linux/debugfs.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_data/wilco-ec.h>
 #include <linux/platform_device.h>
diff --git a/drivers/platform/chrome/wilco_ec/sysfs.c b/drivers/platform/chrome/wilco_ec/sysfs.c
index 893c59dde32a..eb4af1e14073 100644
--- a/drivers/platform/chrome/wilco_ec/sysfs.c
+++ b/drivers/platform/chrome/wilco_ec/sysfs.c
@@ -10,7 +10,9 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_data/wilco-ec.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
diff --git a/drivers/platform/chrome/wilco_ec/telemetry.c b/drivers/platform/chrome/wilco_ec/telemetry.c
index b7c616f3d179..4031fc6dd4ad 100644
--- a/drivers/platform/chrome/wilco_ec/telemetry.c
+++ b/drivers/platform/chrome/wilco_ec/telemetry.c
@@ -30,6 +30,7 @@
 #include <linux/cdev.h>
 #include <linux/device.h>
 #include <linux/fs.h>
+#include <linux/idr.h>
 #include <linux/module.h>
 #include <linux/platform_data/wilco-ec.h>
 #include <linux/platform_device.h>
diff --git a/drivers/platform/loongarch/loongson-laptop.c b/drivers/platform/loongarch/loongson-laptop.c
index 99203584949d..1bceed18f993 100644
--- a/drivers/platform/loongarch/loongson-laptop.c
+++ b/drivers/platform/loongarch/loongson-laptop.c
@@ -19,6 +19,7 @@
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <acpi/video.h>
diff --git a/drivers/platform/mellanox/mlxbf-bootctl.c b/drivers/platform/mellanox/mlxbf-bootctl.c
index dd5f370c3168..806a614971cf 100644
--- a/drivers/platform/mellanox/mlxbf-bootctl.c
+++ b/drivers/platform/mellanox/mlxbf-bootctl.c
@@ -13,8 +13,10 @@
 #include <linux/delay.h>
 #include <linux/if_ether.h>
 #include <linux/iopoll.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "mlxbf-bootctl.h"
 
diff --git a/drivers/platform/mellanox/mlxbf-pmc.c b/drivers/platform/mellanox/mlxbf-pmc.c
index b1995ac268d7..f0c8367bc932 100644
--- a/drivers/platform/mellanox/mlxbf-pmc.c
+++ b/drivers/platform/mellanox/mlxbf-pmc.c
@@ -13,7 +13,9 @@
 #include <linux/bitfield.h>
 #include <linux/errno.h>
 #include <linux/hwmon.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <uapi/linux/psci.h>
 
diff --git a/drivers/platform/mellanox/mlxreg-hotplug.c b/drivers/platform/mellanox/mlxreg-hotplug.c
index 5c022b258f91..0e862a51292c 100644
--- a/drivers/platform/mellanox/mlxreg-hotplug.c
+++ b/drivers/platform/mellanox/mlxreg-hotplug.c
@@ -15,6 +15,7 @@
 #include <linux/platform_data/mlxreg.h>
 #include <linux/platform_device.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/regmap.h>
 #include <linux/workqueue.h>
diff --git a/drivers/platform/mellanox/mlxreg-io.c b/drivers/platform/mellanox/mlxreg-io.c
index ee7bd623ba44..0f5b1ddb0b1c 100644
--- a/drivers/platform/mellanox/mlxreg-io.c
+++ b/drivers/platform/mellanox/mlxreg-io.c
@@ -10,10 +10,12 @@
 #include <linux/device.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_data/mlxreg.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* Attribute parameters. */
 #define MLXREG_IO_ATT_SIZE	10
diff --git a/drivers/platform/mips/cpu_hwmon.c b/drivers/platform/mips/cpu_hwmon.c
index d8c5f9195f85..f4362dad1cc6 100644
--- a/drivers/platform/mips/cpu_hwmon.c
+++ b/drivers/platform/mips/cpu_hwmon.c
@@ -5,6 +5,7 @@
 #include <linux/jiffies.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
+#include <linux/sprintf.h>
 
 #include <loongson.h>
 #include <boot_param.h>
diff --git a/drivers/platform/olpc/olpc-ec.c b/drivers/platform/olpc/olpc-ec.c
index 921520475ff6..80b3e5983609 100644
--- a/drivers/platform/olpc/olpc-ec.c
+++ b/drivers/platform/olpc/olpc-ec.c
@@ -12,6 +12,7 @@
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/init.h>
 #include <linux/list.h>
diff --git a/drivers/platform/surface/aggregator/bus.c b/drivers/platform/surface/aggregator/bus.c
index 118caa651bec..326a34be9c0f 100644
--- a/drivers/platform/surface/aggregator/bus.c
+++ b/drivers/platform/surface/aggregator/bus.c
@@ -8,6 +8,7 @@
 #include <linux/device.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/surface_aggregator/controller.h>
 #include <linux/surface_aggregator/device.h>
diff --git a/drivers/platform/surface/aggregator/ssh_packet_layer.c b/drivers/platform/surface/aggregator/ssh_packet_layer.c
index d726b1a86319..56dc5535b9a1 100644
--- a/drivers/platform/surface/aggregator/ssh_packet_layer.c
+++ b/drivers/platform/surface/aggregator/ssh_packet_layer.c
@@ -7,6 +7,7 @@
 
 #include <asm/unaligned.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/error-injection.h>
 #include <linux/jiffies.h>
 #include <linux/kfifo.h>
diff --git a/drivers/platform/surface/aggregator/ssh_packet_layer.h b/drivers/platform/surface/aggregator/ssh_packet_layer.h
index c80e822070df..2a09334fb13e 100644
--- a/drivers/platform/surface/aggregator/ssh_packet_layer.h
+++ b/drivers/platform/surface/aggregator/ssh_packet_layer.h
@@ -9,6 +9,7 @@
 #define _SURFACE_AGGREGATOR_SSH_PACKET_LAYER_H
 
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/kfifo.h>
 #include <linux/ktime.h>
 #include <linux/list.h>
diff --git a/drivers/platform/surface/aggregator/trace.h b/drivers/platform/surface/aggregator/trace.h
index 55cc61bba1da..0b0e1b7b8476 100644
--- a/drivers/platform/surface/aggregator/trace.h
+++ b/drivers/platform/surface/aggregator/trace.h
@@ -12,6 +12,7 @@
 #define _SURFACE_AGGREGATOR_TRACE_H
 
 #include <linux/surface_aggregator/serial_hub.h>
+#include <linux/sprintf.h>
 
 #include <asm/unaligned.h>
 #include <linux/tracepoint.h>
diff --git a/drivers/platform/surface/surface3_power.c b/drivers/platform/surface/surface3_power.c
index 4c0f92562a79..80b0b6f30c79 100644
--- a/drivers/platform/surface/surface3_power.c
+++ b/drivers/platform/surface/surface3_power.c
@@ -38,6 +38,7 @@
 #include <linux/kernel.h>
 #include <linux/kthread.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uuid.h>
 #include <asm/unaligned.h>
diff --git a/drivers/platform/surface/surfacepro3_button.c b/drivers/platform/surface/surfacepro3_button.c
index 2755601f979c..99d09b7f2da8 100644
--- a/drivers/platform/surface/surfacepro3_button.c
+++ b/drivers/platform/surface/surfacepro3_button.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/input.h>
 #include <linux/acpi.h>
diff --git a/drivers/platform/x86/adv_swbutton.c b/drivers/platform/x86/adv_swbutton.c
index 6b23ba78e028..27718ecd14bc 100644
--- a/drivers/platform/x86/adv_swbutton.c
+++ b/drivers/platform/x86/adv_swbutton.c
@@ -10,6 +10,7 @@
 #include <linux/input.h>
 #include <linux/acpi.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #define ACPI_BUTTON_HID_SWBTN               "AHC0310"
 
diff --git a/drivers/platform/x86/amd/hsmp.c b/drivers/platform/x86/amd/hsmp.c
index 1927be901108..26f2bdc3de29 100644
--- a/drivers/platform/x86/amd/hsmp.c
+++ b/drivers/platform/x86/amd/hsmp.c
@@ -13,12 +13,14 @@
 #include <asm/amd_nb.h>
 #include <linux/delay.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/miscdevice.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
 #include <linux/semaphore.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME		"amd_hsmp"
 #define DRIVER_VERSION		"2.2"
diff --git a/drivers/platform/x86/amd/pmf/cnqf.c b/drivers/platform/x86/amd/pmf/cnqf.c
index bc8899e15c91..e51a9749d0bf 100644
--- a/drivers/platform/x86/amd/pmf/cnqf.c
+++ b/drivers/platform/x86/amd/pmf/cnqf.c
@@ -11,6 +11,7 @@
 #include <linux/string_choices.h>
 #include <linux/workqueue.h>
 #include "pmf.h"
+#include <linux/kstrtox.h>
 
 static struct cnqf_config config_store;
 
diff --git a/drivers/platform/x86/amd/pmf/tee-if.c b/drivers/platform/x86/amd/pmf/tee-if.c
index f8c0177afb0d..b6371c39628c 100644
--- a/drivers/platform/x86/amd/pmf/tee-if.c
+++ b/drivers/platform/x86/amd/pmf/tee-if.c
@@ -9,6 +9,8 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/tee_drv.h>
 #include <linux/uuid.h>
 #include "pmf.h"
diff --git a/drivers/platform/x86/apple-gmux.c b/drivers/platform/x86/apple-gmux.c
index 1417e230edbd..22bbb6d72970 100644
--- a/drivers/platform/x86/apple-gmux.c
+++ b/drivers/platform/x86/apple-gmux.c
@@ -15,6 +15,7 @@
 #include <linux/init.h>
 #include <linux/backlight.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/pnp.h>
 #include <linux/apple-gmux.h>
 #include <linux/slab.h>
diff --git a/drivers/platform/x86/asus-laptop.c b/drivers/platform/x86/asus-laptop.c
index bf03ea1b1274..774fddfe39bd 100644
--- a/drivers/platform/x86/asus-laptop.c
+++ b/drivers/platform/x86/asus-laptop.c
@@ -22,8 +22,10 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/err.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/platform/x86/asus-wmi.c b/drivers/platform/x86/asus-wmi.c
index 21dee425ea6f..25f8a2b2c8c1 100644
--- a/drivers/platform/x86/asus-wmi.c
+++ b/drivers/platform/x86/asus-wmi.c
@@ -25,6 +25,7 @@
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/minmax.h>
 #include <linux/module.h>
@@ -37,6 +38,7 @@
 #include <linux/rfkill.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/units.h>
 
diff --git a/drivers/platform/x86/classmate-laptop.c b/drivers/platform/x86/classmate-laptop.c
index 2edaea2492df..1bffab0bb292 100644
--- a/drivers/platform/x86/classmate-laptop.c
+++ b/drivers/platform/x86/classmate-laptop.c
@@ -5,8 +5,10 @@
 
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/acpi.h>
 #include <linux/backlight.h>
diff --git a/drivers/platform/x86/compal-laptop.c b/drivers/platform/x86/compal-laptop.c
index 61c745490d71..8d64f0a5520c 100644
--- a/drivers/platform/x86/compal-laptop.c
+++ b/drivers/platform/x86/compal-laptop.c
@@ -63,6 +63,7 @@
 #include <linux/acpi.h>
 #include <linux/dmi.h>
 #include <linux/backlight.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/rfkill.h>
 #include <linux/hwmon.h>
@@ -70,6 +71,7 @@
 #include <linux/power_supply.h>
 #include <linux/fb.h>
 #include <acpi/video.h>
+#include <linux/sprintf.h>
 
 /* ======= */
 /* Defines */
diff --git a/drivers/platform/x86/dell/alienware-wmi.c b/drivers/platform/x86/dell/alienware-wmi.c
index f5ee62ce1753..4b9aee4bb85d 100644
--- a/drivers/platform/x86/dell/alienware-wmi.c
+++ b/drivers/platform/x86/dell/alienware-wmi.c
@@ -8,10 +8,12 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/acpi.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/dmi.h>
 #include <linux/leds.h>
+#include <linux/sprintf.h>
 
 #define LEGACY_CONTROL_GUID		"A90597CE-A997-11DA-B012-B622A1EF5492"
 #define LEGACY_POWER_CONTROL_GUID	"A80593CE-A997-11DA-B012-B622A1EF5492"
diff --git a/drivers/platform/x86/dell/dcdbas.c b/drivers/platform/x86/dell/dcdbas.c
index a60e35056387..aaf08885b22d 100644
--- a/drivers/platform/x86/dell/dcdbas.c
+++ b/drivers/platform/x86/dell/dcdbas.c
@@ -22,12 +22,14 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mc146818rtc.h>
 #include <linux/module.h>
 #include <linux/reboot.h>
 #include <linux/sched.h>
 #include <linux/smp.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/mutex.h>
diff --git a/drivers/platform/x86/dell/dell-laptop.c b/drivers/platform/x86/dell/dell-laptop.c
index 42f7de2b4522..4b6f6e107173 100644
--- a/drivers/platform/x86/dell/dell-laptop.c
+++ b/drivers/platform/x86/dell/dell-laptop.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/backlight.h>
 #include <linux/err.h>
@@ -30,6 +31,7 @@
 #include <acpi/video.h>
 #include "dell-rbtn.h"
 #include "dell-smbios.h"
+#include <linux/sprintf.h>
 
 #include "dell-wmi-privacy.h"
 
diff --git a/drivers/platform/x86/dell/dell-smbios-base.c b/drivers/platform/x86/dell/dell-smbios-base.c
index e61bfaf8b5c4..3e2554b7632d 100644
--- a/drivers/platform/x86/dell/dell-smbios-base.c
+++ b/drivers/platform/x86/dell/dell-smbios-base.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include "dell-smbios.h"
+#include <linux/sprintf.h>
 
 static u32 da_supported_commands;
 static int da_num_tokens;
diff --git a/drivers/platform/x86/dell/dell-wmi-ddv.c b/drivers/platform/x86/dell/dell-wmi-ddv.c
index db1e9240dd02..f572fd9efd15 100644
--- a/drivers/platform/x86/dell/dell-wmi-ddv.c
+++ b/drivers/platform/x86/dell/dell-wmi-ddv.c
@@ -25,6 +25,7 @@
 #include <linux/power_supply.h>
 #include <linux/printk.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
 #include <linux/wmi.h>
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/biosattr-interface.c b/drivers/platform/x86/dell/dell-wmi-sysman/biosattr-interface.c
index c2dd2de6bc20..3114a7f5b5ee 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/biosattr-interface.c
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/biosattr-interface.c
@@ -6,6 +6,7 @@
  *  Copyright (c) 2020 Dell Inc.
  */
 
+#include <linux/kobject.h>
 #include <linux/wmi.h>
 #include "dell-wmi-sysman.h"
 
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/dell-wmi-sysman.h b/drivers/platform/x86/dell/dell-wmi-sysman/dell-wmi-sysman.h
index 3ad33a094588..d1fb1e591120 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/dell-wmi-sysman.h
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/dell-wmi-sysman.h
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/capability.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME					"dell-wmi-sysman"
 #define MAX_BUFF  512
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/enum-attributes.c b/drivers/platform/x86/dell/dell-wmi-sysman/enum-attributes.c
index 8cc212c85266..e737cdadfadb 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/enum-attributes.c
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/enum-attributes.c
@@ -7,6 +7,9 @@
  */
 
 #include "dell-wmi-sysman.h"
+#include <linux/sprintf.h>
+
+#include <linux/kobject.h>
 
 get_instance_id(enumeration);
 
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/int-attributes.c b/drivers/platform/x86/dell/dell-wmi-sysman/int-attributes.c
index 951e75b538fa..b36f7da2b265 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/int-attributes.c
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/int-attributes.c
@@ -7,6 +7,10 @@
  */
 
 #include "dell-wmi-sysman.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
+
+#include <linux/kobject.h>
 
 enum int_properties {MIN_VALUE = 6, MAX_VALUE, SCALAR_INCR};
 
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/passobj-attributes.c b/drivers/platform/x86/dell/dell-wmi-sysman/passobj-attributes.c
index 230e6ee96636..abb4147d9d86 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/passobj-attributes.c
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/passobj-attributes.c
@@ -7,6 +7,10 @@
  */
 
 #include "dell-wmi-sysman.h"
+#include <linux/sprintf.h>
+
+#include <linux/kobject.h>
+#include <linux/sysfs.h>
 
 enum po_properties {IS_PASS_SET = 1, MIN_PASS_LEN, MAX_PASS_LEN};
 
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/passwordattr-interface.c b/drivers/platform/x86/dell/dell-wmi-sysman/passwordattr-interface.c
index 86ec962aace9..c6ea8dbbded3 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/passwordattr-interface.c
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/passwordattr-interface.c
@@ -5,6 +5,7 @@
  *  Copyright (c) 2020 Dell Inc.
  */
 
+#include <linux/kobject.h>
 #include <linux/wmi.h>
 #include "dell-wmi-sysman.h"
 
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/string-attributes.c b/drivers/platform/x86/dell/dell-wmi-sysman/string-attributes.c
index c392f0ecf8b5..9136364649ba 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/string-attributes.c
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/string-attributes.c
@@ -7,6 +7,9 @@
  */
 
 #include "dell-wmi-sysman.h"
+#include <linux/sprintf.h>
+
+#include <linux/kobject.h>
 
 enum string_properties {MIN_LEN = 6, MAX_LEN};
 
diff --git a/drivers/platform/x86/dell/dell-wmi-sysman/sysman.c b/drivers/platform/x86/dell/dell-wmi-sysman/sysman.c
index b929b4f82420..72e8548b22c5 100644
--- a/drivers/platform/x86/dell/dell-wmi-sysman/sysman.c
+++ b/drivers/platform/x86/dell/dell-wmi-sysman/sysman.c
@@ -11,6 +11,8 @@
 #include <linux/dmi.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/wmi.h>
 #include "dell-wmi-sysman.h"
 #include "../../firmware_attributes_class.h"
diff --git a/drivers/platform/x86/dell/dell_rbu.c b/drivers/platform/x86/dell/dell_rbu.c
index 9f51e0fcab04..36825a154c07 100644
--- a/drivers/platform/x86/dell/dell_rbu.c
+++ b/drivers/platform/x86/dell/dell_rbu.c
@@ -32,6 +32,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/blkdev.h>
diff --git a/drivers/platform/x86/eeepc-laptop.c b/drivers/platform/x86/eeepc-laptop.c
index ff1b70269ccb..e2ffdf6788a3 100644
--- a/drivers/platform/x86/eeepc-laptop.c
+++ b/drivers/platform/x86/eeepc-laptop.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/platform_device.h>
 #include <linux/backlight.h>
diff --git a/drivers/platform/x86/eeepc-wmi.c b/drivers/platform/x86/eeepc-wmi.c
index 32d9f0ba6be3..e9bfbc1fe0c7 100644
--- a/drivers/platform/x86/eeepc-wmi.c
+++ b/drivers/platform/x86/eeepc-wmi.c
@@ -21,6 +21,7 @@
 #include <linux/dmi.h>
 #include <linux/fb.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 
 #include "asus-wmi.h"
 
diff --git a/drivers/platform/x86/fujitsu-laptop.c b/drivers/platform/x86/fujitsu-laptop.c
index 085e044e888e..97a5be22a81a 100644
--- a/drivers/platform/x86/fujitsu-laptop.c
+++ b/drivers/platform/x86/fujitsu-laptop.c
@@ -50,6 +50,7 @@
 #include <linux/leds.h>
 #include <linux/platform_device.h>
 #include <acpi/video.h>
+#include <linux/sprintf.h>
 
 #define FUJITSU_DRIVER_VERSION		"0.6.0"
 
diff --git a/drivers/platform/x86/fujitsu-tablet.c b/drivers/platform/x86/fujitsu-tablet.c
index 17f08ce7552d..badb2d34384e 100644
--- a/drivers/platform/x86/fujitsu-tablet.c
+++ b/drivers/platform/x86/fujitsu-tablet.c
@@ -18,6 +18,7 @@
 #include <linux/input.h>
 #include <linux/delay.h>
 #include <linux/dmi.h>
+#include <linux/sprintf.h>
 
 #define MODULENAME "fujitsu-tablet"
 
diff --git a/drivers/platform/x86/hdaps.c b/drivers/platform/x86/hdaps.c
index f11f726d2062..0aeb8f304f0f 100644
--- a/drivers/platform/x86/hdaps.c
+++ b/drivers/platform/x86/hdaps.c
@@ -22,6 +22,7 @@
 #include <linux/kernel.h>
 #include <linux/mutex.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/dmi.h>
 #include <linux/jiffies.h>
diff --git a/drivers/platform/x86/hp/hp-bioscfg/bioscfg.c b/drivers/platform/x86/hp/hp-bioscfg/bioscfg.c
index 8c9f4f3227fc..999ac59b80ac 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/bioscfg.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/bioscfg.c
@@ -8,8 +8,11 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/wmi.h>
 #include "bioscfg.h"
 #include "../../firmware_attributes_class.h"
diff --git a/drivers/platform/x86/hp/hp-bioscfg/enum-attributes.c b/drivers/platform/x86/hp/hp-bioscfg/enum-attributes.c
index a2402d31c146..b6288aec7b1d 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/enum-attributes.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/enum-attributes.c
@@ -8,6 +8,9 @@
 
 #include "bioscfg.h"
 
+#include <linux/kobject.h>
+#include <linux/sysfs.h>
+
 GET_INSTANCE_ID(enumeration);
 
 static ssize_t current_value_show(struct kobject *kobj, struct kobj_attribute *attr, char *buf)
diff --git a/drivers/platform/x86/hp/hp-bioscfg/int-attributes.c b/drivers/platform/x86/hp/hp-bioscfg/int-attributes.c
index 86b7ac63fec2..bfeecc996b0c 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/int-attributes.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/int-attributes.c
@@ -7,6 +7,10 @@
  */
 
 #include "bioscfg.h"
+#include <linux/kstrtox.h>
+
+#include <linux/kobject.h>
+#include <linux/sysfs.h>
 
 GET_INSTANCE_ID(integer);
 
diff --git a/drivers/platform/x86/hp/hp-bioscfg/order-list-attributes.c b/drivers/platform/x86/hp/hp-bioscfg/order-list-attributes.c
index 1ff09dfb7d7e..e8b8ccc1cf7c 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/order-list-attributes.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/order-list-attributes.c
@@ -8,6 +8,8 @@
 
 #include "bioscfg.h"
 
+#include <linux/kobject.h>
+
 GET_INSTANCE_ID(ordered_list);
 
 static ssize_t current_value_show(struct kobject *kobj, struct kobj_attribute *attr, char *buf)
diff --git a/drivers/platform/x86/hp/hp-bioscfg/passwdobj-attributes.c b/drivers/platform/x86/hp/hp-bioscfg/passwdobj-attributes.c
index f7efe217a4bb..2e05200eb595 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/passwdobj-attributes.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/passwdobj-attributes.c
@@ -8,6 +8,9 @@
 
 #include "bioscfg.h"
 
+#include <linux/kobject.h>
+#include <linux/sysfs.h>
+
 GET_INSTANCE_ID(password);
 /*
  * Clear all passwords copied to memory for a particular
diff --git a/drivers/platform/x86/hp/hp-bioscfg/spmobj-attributes.c b/drivers/platform/x86/hp/hp-bioscfg/spmobj-attributes.c
index 86f90238750c..67cbde761afa 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/spmobj-attributes.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/spmobj-attributes.c
@@ -7,6 +7,9 @@
  */
 
 #include "bioscfg.h"
+#include <linux/sprintf.h>
+
+#include <linux/kobject.h>
 
 static const char * const spm_state_types[] = {
 	"not provisioned",
diff --git a/drivers/platform/x86/hp/hp-bioscfg/string-attributes.c b/drivers/platform/x86/hp/hp-bioscfg/string-attributes.c
index f0c20070094d..038e6e9deddf 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/string-attributes.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/string-attributes.c
@@ -8,6 +8,9 @@
 
 #include "bioscfg.h"
 
+#include <linux/kobject.h>
+#include <linux/sysfs.h>
+
 #define WMI_STRING_TYPE "HPBIOS_BIOSString"
 
 GET_INSTANCE_ID(string);
diff --git a/drivers/platform/x86/hp/hp-bioscfg/surestart-attributes.c b/drivers/platform/x86/hp/hp-bioscfg/surestart-attributes.c
index b57e42f29282..3195365be1de 100644
--- a/drivers/platform/x86/hp/hp-bioscfg/surestart-attributes.c
+++ b/drivers/platform/x86/hp/hp-bioscfg/surestart-attributes.c
@@ -7,6 +7,8 @@
  */
 
 #include "bioscfg.h"
+
+#include <linux/kobject.h>
 #include <linux/types.h>
 
 /* Maximum number of log entries supported when log entry size is 16
diff --git a/drivers/platform/x86/hp/hp-wmi.c b/drivers/platform/x86/hp/hp-wmi.c
index 630519c08617..08156756e5f7 100644
--- a/drivers/platform/x86/hp/hp-wmi.c
+++ b/drivers/platform/x86/hp/hp-wmi.c
@@ -14,9 +14,11 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
diff --git a/drivers/platform/x86/hp/tc1100-wmi.c b/drivers/platform/x86/hp/tc1100-wmi.c
index 5298b0f6804f..7965c7f9b66a 100644
--- a/drivers/platform/x86/hp/tc1100-wmi.c
+++ b/drivers/platform/x86/hp/tc1100-wmi.c
@@ -11,9 +11,11 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/acpi.h>
 #include <linux/platform_device.h>
diff --git a/drivers/platform/x86/huawei-wmi.c b/drivers/platform/x86/huawei-wmi.c
index dde139c69945..467b04962901 100644
--- a/drivers/platform/x86/huawei-wmi.c
+++ b/drivers/platform/x86/huawei-wmi.c
@@ -11,11 +11,13 @@
 #include <linux/dmi.h>
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/power_supply.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/wmi.h>
 #include <acpi/battery.h>
diff --git a/drivers/platform/x86/ibm_rtl.c b/drivers/platform/x86/ibm_rtl.c
index 1d4bbae115f1..631f3a207f09 100644
--- a/drivers/platform/x86/ibm_rtl.c
+++ b/drivers/platform/x86/ibm_rtl.c
@@ -18,6 +18,7 @@
 #include <linux/efi.h>
 #include <linux/mutex.h>
 #include <asm/bios_ebda.h>
+#include <linux/sprintf.h>
 
 #include <linux/io-64-nonatomic-lo-hi.h>
 
diff --git a/drivers/platform/x86/ideapad-laptop.c b/drivers/platform/x86/ideapad-laptop.c
index 88eefccb6ed2..32dafb46b249 100644
--- a/drivers/platform/x86/ideapad-laptop.c
+++ b/drivers/platform/x86/ideapad-laptop.c
@@ -22,6 +22,7 @@
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
diff --git a/drivers/platform/x86/intel/ifs/load.c b/drivers/platform/x86/intel/ifs/load.c
index 584c44387e10..ed86effc3a09 100644
--- a/drivers/platform/x86/intel/ifs/load.c
+++ b/drivers/platform/x86/intel/ifs/load.c
@@ -5,6 +5,8 @@
 #include <linux/sizes.h>
 #include <asm/cpu.h>
 #include <asm/microcode.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "ifs.h"
 
diff --git a/drivers/platform/x86/intel/ifs/sysfs.c b/drivers/platform/x86/intel/ifs/sysfs.c
index 01b7502f46b0..1009b9ce3a1d 100644
--- a/drivers/platform/x86/intel/ifs/sysfs.c
+++ b/drivers/platform/x86/intel/ifs/sysfs.c
@@ -4,6 +4,7 @@
 #include <linux/cpu.h>
 #include <linux/delay.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/semaphore.h>
 #include <linux/slab.h>
 
diff --git a/drivers/platform/x86/intel/int1092/intel_sar.c b/drivers/platform/x86/intel/int1092/intel_sar.c
index 6246c066ade2..af9e69c42970 100644
--- a/drivers/platform/x86/intel/int1092/intel_sar.c
+++ b/drivers/platform/x86/intel/int1092/intel_sar.c
@@ -5,6 +5,7 @@
 
 #include <linux/acpi.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/sysfs.h>
 #include "intel_sar.h"
diff --git a/drivers/platform/x86/intel/int3472/clk_and_regulator.c b/drivers/platform/x86/intel/int3472/clk_and_regulator.c
index 16e36ac0a7b4..b1e4e7c0dfc9 100644
--- a/drivers/platform/x86/intel/int3472/clk_and_regulator.c
+++ b/drivers/platform/x86/intel/int3472/clk_and_regulator.c
@@ -9,6 +9,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/regulator/driver.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "common.h"
 
diff --git a/drivers/platform/x86/intel/int3472/led.c b/drivers/platform/x86/intel/int3472/led.c
index 9cbed694e2ca..947e1f61a97a 100644
--- a/drivers/platform/x86/intel/int3472/led.c
+++ b/drivers/platform/x86/intel/int3472/led.c
@@ -5,6 +5,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/leds.h>
 #include "common.h"
+#include <linux/sprintf.h>
 
 static int int3472_pled_set(struct led_classdev *led_cdev,
 				     enum led_brightness brightness)
diff --git a/drivers/platform/x86/intel/pmc/core.c b/drivers/platform/x86/intel/pmc/core.c
index 8f9c036809c7..dda917a24b91 100644
--- a/drivers/platform/x86/intel/pmc/core.c
+++ b/drivers/platform/x86/intel/pmc/core.c
@@ -16,6 +16,7 @@
 #include <linux/delay.h>
 #include <linux/dmi.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
diff --git a/drivers/platform/x86/intel/pmt/class.c b/drivers/platform/x86/intel/pmt/class.c
index 4b53940a64e2..1f140616f3d0 100644
--- a/drivers/platform/x86/intel/pmt/class.c
+++ b/drivers/platform/x86/intel/pmt/class.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/mm.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "../vsec.h"
 #include "class.h"
diff --git a/drivers/platform/x86/intel/pmt/crashlog.c b/drivers/platform/x86/intel/pmt/crashlog.c
index 4014c02cafdb..cfca0322e7e6 100644
--- a/drivers/platform/x86/intel/pmt/crashlog.c
+++ b/drivers/platform/x86/intel/pmt/crashlog.c
@@ -10,9 +10,11 @@
 
 #include <linux/auxiliary_bus.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/overflow.h>
 
diff --git a/drivers/platform/x86/intel/pmt/telemetry.c b/drivers/platform/x86/intel/pmt/telemetry.c
index 09258564dfc4..4c16360ed2af 100644
--- a/drivers/platform/x86/intel/pmt/telemetry.c
+++ b/drivers/platform/x86/intel/pmt/telemetry.c
@@ -10,6 +10,7 @@
 
 #include <linux/auxiliary_bus.h>
 #include <linux/kernel.h>
+#include <linux/kref.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
diff --git a/drivers/platform/x86/intel/punit_ipc.c b/drivers/platform/x86/intel/punit_ipc.c
index cd0ba84cc8e4..3ae7dcbe1060 100644
--- a/drivers/platform/x86/intel/punit_ipc.c
+++ b/drivers/platform/x86/intel/punit_ipc.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
diff --git a/drivers/platform/x86/intel/rst.c b/drivers/platform/x86/intel/rst.c
index 35814a7707af..d66947f1c787 100644
--- a/drivers/platform/x86/intel/rst.c
+++ b/drivers/platform/x86/intel/rst.c
@@ -4,8 +4,10 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 MODULE_LICENSE("GPL");
 
diff --git a/drivers/platform/x86/intel/telemetry/debugfs.c b/drivers/platform/x86/intel/telemetry/debugfs.c
index 1d4d0fbfd63c..3bae37ca6366 100644
--- a/drivers/platform/x86/intel/telemetry/debugfs.c
+++ b/drivers/platform/x86/intel/telemetry/debugfs.c
@@ -15,6 +15,7 @@
  */
 #include <linux/debugfs.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/intel_pmc_bxt.h>
 #include <linux/module.h>
 #include <linux/pci.h>
diff --git a/drivers/platform/x86/intel/tpmi.c b/drivers/platform/x86/intel/tpmi.c
index e73cdea67fff..30831dafc590 100644
--- a/drivers/platform/x86/intel/tpmi.c
+++ b/drivers/platform/x86/intel/tpmi.c
@@ -50,6 +50,7 @@
 #include <linux/bitfield.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
+#include <linux/idr.h>
 #include <linux/intel_tpmi.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
@@ -57,6 +58,7 @@
 #include <linux/pci.h>
 #include <linux/security.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include "vsec.h"
diff --git a/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.c b/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.c
index 33bb58dc3f78..0c3a6b50d55c 100644
--- a/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.c
+++ b/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.c
@@ -6,8 +6,11 @@
  *
  */
 #include <linux/cpu.h>
+#include <linux/idr.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include "uncore-frequency-common.h"
+#include <linux/sprintf.h>
 
 /* Mutex to control all mutual exclusions */
 static DEFINE_MUTEX(uncore_lock);
diff --git a/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.h b/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.h
index 0e5bf507e555..fe37efcf0801 100644
--- a/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.h
+++ b/drivers/platform/x86/intel/uncore-frequency/uncore-frequency-common.h
@@ -10,6 +10,7 @@
 #define __INTEL_UNCORE_FREQ_COMMON_H
 
 #include <linux/device.h>
+#include <linux/kobject.h>
 
 /**
  * struct uncore_data - Encapsulate all uncore data
diff --git a/drivers/platform/x86/intel/wmi/sbl-fw-update.c b/drivers/platform/x86/intel/wmi/sbl-fw-update.c
index 040153ad67c1..031bd422ef25 100644
--- a/drivers/platform/x86/intel/wmi/sbl-fw-update.c
+++ b/drivers/platform/x86/intel/wmi/sbl-fw-update.c
@@ -16,8 +16,10 @@
 
 #include <linux/acpi.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/wmi.h>
 
diff --git a/drivers/platform/x86/intel_scu_ipc.c b/drivers/platform/x86/intel_scu_ipc.c
index a68df4133403..2d5904506ffe 100644
--- a/drivers/platform/x86/intel_scu_ipc.c
+++ b/drivers/platform/x86/intel_scu_ipc.c
@@ -22,6 +22,7 @@
 #include <linux/iopoll.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include <asm/intel_scu_ipc.h>
 
diff --git a/drivers/platform/x86/lg-laptop.c b/drivers/platform/x86/lg-laptop.c
index ad3c39e9e9f5..6634b7761333 100644
--- a/drivers/platform/x86/lg-laptop.c
+++ b/drivers/platform/x86/lg-laptop.c
@@ -12,6 +12,7 @@
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
diff --git a/drivers/platform/x86/msi-ec.c b/drivers/platform/x86/msi-ec.c
index f19504dbf164..5a530e59c134 100644
--- a/drivers/platform/x86/msi-ec.c
+++ b/drivers/platform/x86/msi-ec.c
@@ -17,6 +17,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include "msi-ec.h"
+#include <linux/kstrtox.h>
 
 #include <acpi/battery.h>
 #include <linux/acpi.h>
diff --git a/drivers/platform/x86/msi-laptop.c b/drivers/platform/x86/msi-laptop.c
index f4c6c36e05a5..2e28758aa4cd 100644
--- a/drivers/platform/x86/msi-laptop.c
+++ b/drivers/platform/x86/msi-laptop.c
@@ -52,6 +52,7 @@
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
 #include <acpi/video.h>
+#include <linux/sprintf.h>
 
 #define MSI_LCD_LEVEL_MAX 9
 
diff --git a/drivers/platform/x86/panasonic-laptop.c b/drivers/platform/x86/panasonic-laptop.c
index cf845ee1c7b1..91481685f243 100644
--- a/drivers/platform/x86/panasonic-laptop.c
+++ b/drivers/platform/x86/panasonic-laptop.c
@@ -127,6 +127,7 @@
 #include <linux/input.h>
 #include <linux/input/sparse-keymap.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/seq_file.h>
diff --git a/drivers/platform/x86/samsung-laptop.c b/drivers/platform/x86/samsung-laptop.c
index b4aa8ba35d2d..9ab041ef83b1 100644
--- a/drivers/platform/x86/samsung-laptop.c
+++ b/drivers/platform/x86/samsung-laptop.c
@@ -9,6 +9,7 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/pci.h>
@@ -23,6 +24,7 @@
 #include <linux/debugfs.h>
 #include <linux/ctype.h>
 #include <linux/efi.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <acpi/video.h>
 
diff --git a/drivers/platform/x86/serial-multi-instantiate.c b/drivers/platform/x86/serial-multi-instantiate.c
index 8158e3cf5d6d..7674761814c1 100644
--- a/drivers/platform/x86/serial-multi-instantiate.c
+++ b/drivers/platform/x86/serial-multi-instantiate.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #define IRQ_RESOURCE_TYPE	GENMASK(1, 0)
diff --git a/drivers/platform/x86/silicom-platform.c b/drivers/platform/x86/silicom-platform.c
index c0910af16a3a..b236ff4473c6 100644
--- a/drivers/platform/x86/silicom-platform.c
+++ b/drivers/platform/x86/silicom-platform.c
@@ -12,6 +12,7 @@
 #include <linux/io.h>
 #include <linux/kernel.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/led-class-multicolor.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/platform/x86/sony-laptop.c b/drivers/platform/x86/sony-laptop.c
index 40878e327afd..6524144ad028 100644
--- a/drivers/platform/x86/sony-laptop.c
+++ b/drivers/platform/x86/sony-laptop.c
@@ -31,6 +31,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
diff --git a/drivers/platform/x86/system76_acpi.c b/drivers/platform/x86/system76_acpi.c
index 3da753b3d00d..fa7ea66b60ef 100644
--- a/drivers/platform/x86/system76_acpi.c
+++ b/drivers/platform/x86/system76_acpi.c
@@ -15,6 +15,7 @@
 #include <linux/init.h>
 #include <linux/input.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/module.h>
 #include <linux/pci_ids.h>
diff --git a/drivers/platform/x86/think-lmi.c b/drivers/platform/x86/think-lmi.c
index 3a396b763c49..29a63294aada 100644
--- a/drivers/platform/x86/think-lmi.c
+++ b/drivers/platform/x86/think-lmi.c
@@ -14,7 +14,10 @@
 #include <linux/acpi.h>
 #include <linux/errno.h>
 #include <linux/fs.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/types.h>
 #include <linux/dmi.h>
diff --git a/drivers/platform/x86/thinkpad_acpi.c b/drivers/platform/x86/thinkpad_acpi.c
index 897d4cd9e5f4..b52761cf000d 100644
--- a/drivers/platform/x86/thinkpad_acpi.c
+++ b/drivers/platform/x86/thinkpad_acpi.c
@@ -47,6 +47,7 @@
 #include <linux/input.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/leds.h>
 #include <linux/list.h>
@@ -64,6 +65,7 @@
 #include <linux/sched/signal.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/string_helpers.h>
 #include <linux/sysfs.h>
diff --git a/drivers/platform/x86/toshiba_acpi.c b/drivers/platform/x86/toshiba_acpi.c
index 291f14ef6702..d9b500aa8ddd 100644
--- a/drivers/platform/x86/toshiba_acpi.c
+++ b/drivers/platform/x86/toshiba_acpi.c
@@ -25,9 +25,11 @@
 #include <linux/compiler.h>
 #include <linux/dmi.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
diff --git a/drivers/platform/x86/toshiba_haps.c b/drivers/platform/x86/toshiba_haps.c
index 8c9f76286b08..3b94381954c3 100644
--- a/drivers/platform/x86/toshiba_haps.c
+++ b/drivers/platform/x86/toshiba_haps.c
@@ -8,8 +8,10 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/acpi.h>
 
diff --git a/drivers/platform/x86/uv_sysfs.c b/drivers/platform/x86/uv_sysfs.c
index 38d1b692d3c0..47c9ac493a17 100644
--- a/drivers/platform/x86/uv_sysfs.c
+++ b/drivers/platform/x86/uv_sysfs.c
@@ -15,6 +15,7 @@
 #include <asm/uv/uv.h>
 #include <asm/uv/uv_hub.h>
 #include <asm/uv/uv_geo.h>
+#include <linux/sprintf.h>
 
 #define INVALID_CNODE -1
 
diff --git a/drivers/platform/x86/wireless-hotkey.c b/drivers/platform/x86/wireless-hotkey.c
index 4422863f47bb..d585a0188362 100644
--- a/drivers/platform/x86/wireless-hotkey.c
+++ b/drivers/platform/x86/wireless-hotkey.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/acpi.h>
 #include <acpi/acpi_bus.h>
+#include <linux/sprintf.h>
 
 MODULE_LICENSE("GPL");
 MODULE_AUTHOR("Alex Hung");
diff --git a/drivers/platform/x86/wmi.c b/drivers/platform/x86/wmi.c
index b83c0f0ddd5c..478a324e79f5 100644
--- a/drivers/platform/x86/wmi.c
+++ b/drivers/platform/x86/wmi.c
@@ -22,11 +22,13 @@
 #include <linux/device.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/rwsem.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
 #include <linux/uuid.h>
diff --git a/drivers/platform/x86/xo15-ebook.c b/drivers/platform/x86/xo15-ebook.c
index df2bf1c58523..512342143822 100644
--- a/drivers/platform/x86/xo15-ebook.c
+++ b/drivers/platform/x86/xo15-ebook.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/input.h>
 #include <linux/acpi.h>
diff --git a/drivers/pmdomain/arm/scmi_perf_domain.c b/drivers/pmdomain/arm/scmi_perf_domain.c
index 709bbc448fad..39cd84de6e05 100644
--- a/drivers/pmdomain/arm/scmi_perf_domain.c
+++ b/drivers/pmdomain/arm/scmi_perf_domain.c
@@ -8,6 +8,7 @@
 #include <linux/err.h>
 #include <linux/device.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/pm_domain.h>
 #include <linux/pm_opp.h>
 #include <linux/scmi_protocol.h>
diff --git a/drivers/pmdomain/core.c b/drivers/pmdomain/core.c
index 46331e71108a..8fc85aa50367 100644
--- a/drivers/pmdomain/core.c
+++ b/drivers/pmdomain/core.c
@@ -9,6 +9,7 @@
 #include <linux/delay.h>
 #include <linux/kernel.h>
 #include <linux/io.h>
+#include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/pm_opp.h>
 #include <linux/pm_runtime.h>
@@ -18,6 +19,7 @@
 #include <linux/slab.h>
 #include <linux/err.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/export.h>
 #include <linux/cpu.h>
diff --git a/drivers/pmdomain/governor.c b/drivers/pmdomain/governor.c
index d1a10eeebd16..8e37c65f5084 100644
--- a/drivers/pmdomain/governor.c
+++ b/drivers/pmdomain/governor.c
@@ -10,6 +10,7 @@
 #include <linux/hrtimer.h>
 #include <linux/cpuidle.h>
 #include <linux/cpumask.h>
+#include <linux/device.h>
 #include <linux/ktime.h>
 
 static int dev_update_qos_constraint(struct device *dev, void *data)
diff --git a/drivers/pmdomain/imx/scu-pd.c b/drivers/pmdomain/imx/scu-pd.c
index 891c1d925a9d..7395e0d2e710 100644
--- a/drivers/pmdomain/imx/scu-pd.c
+++ b/drivers/pmdomain/imx/scu-pd.c
@@ -64,6 +64,7 @@
 #include <linux/pm.h>
 #include <linux/pm_domain.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* SCU Power Mode Protocol definition */
 struct imx_sc_msg_req_set_resource_power_mode {
diff --git a/drivers/pmdomain/qcom/cpr.c b/drivers/pmdomain/qcom/cpr.c
index c64e84a27cc7..5119f8283fb4 100644
--- a/drivers/pmdomain/qcom/cpr.c
+++ b/drivers/pmdomain/qcom/cpr.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/list.h>
diff --git a/drivers/pmdomain/ti/omap_prm.c b/drivers/pmdomain/ti/omap_prm.c
index b8ceb3c2b81c..0e729b52be38 100644
--- a/drivers/pmdomain/ti/omap_prm.c
+++ b/drivers/pmdomain/ti/omap_prm.c
@@ -18,6 +18,7 @@
 #include <linux/pm_domain.h>
 #include <linux/reset-controller.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <linux/platform_data/ti-prm.h>
 
diff --git a/drivers/pmdomain/xilinx/zynqmp-pm-domains.c b/drivers/pmdomain/xilinx/zynqmp-pm-domains.c
index 6fd514286d82..00824da622a6 100644
--- a/drivers/pmdomain/xilinx/zynqmp-pm-domains.c
+++ b/drivers/pmdomain/xilinx/zynqmp-pm-domains.c
@@ -12,10 +12,12 @@
 #include <linux/err.h>
 #include <linux/list.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/pm_domain.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/firmware/xlnx-zynqmp.h>
 
diff --git a/drivers/pnp/card.c b/drivers/pnp/card.c
index 9610a9f08ff4..77987da06ad2 100644
--- a/drivers/pnp/card.c
+++ b/drivers/pnp/card.c
@@ -9,6 +9,7 @@
 #include <linux/mutex.h>
 #include <linux/ctype.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/pnp.h>
 #include <linux/dma-mapping.h>
 #include "base.h"
diff --git a/drivers/pnp/core.c b/drivers/pnp/core.c
index 6a60c5d83383..aba574e93a6f 100644
--- a/drivers/pnp/core.c
+++ b/drivers/pnp/core.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/pnp.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/device.h>
@@ -14,6 +15,7 @@
 #include <linux/init.h>
 #include <linux/string.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/errno.h>
 #include <linux/dma-mapping.h>
 
diff --git a/drivers/pnp/interface.c b/drivers/pnp/interface.c
index 44efcdb87e6f..f2291c781744 100644
--- a/drivers/pnp/interface.c
+++ b/drivers/pnp/interface.c
@@ -9,8 +9,10 @@
  */
 
 #include <linux/pnp.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/types.h>
 #include <linux/stat.h>
diff --git a/drivers/pnp/isapnp/compat.c b/drivers/pnp/isapnp/compat.c
index d60d9e377da5..a0bf29cb3108 100644
--- a/drivers/pnp/isapnp/compat.c
+++ b/drivers/pnp/isapnp/compat.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/isapnp.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 static void pnp_convert_id(char *buf, unsigned short vendor,
diff --git a/drivers/pnp/isapnp/proc.c b/drivers/pnp/isapnp/proc.c
index 55ae72a2818b..c3e50f12b36e 100644
--- a/drivers/pnp/isapnp/proc.c
+++ b/drivers/pnp/isapnp/proc.c
@@ -8,6 +8,7 @@
 #include <linux/isapnp.h>
 #include <linux/proc_fs.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 extern struct pnp_protocol isapnp_protocol;
diff --git a/drivers/pnp/pnpbios/core.c b/drivers/pnp/pnpbios/core.c
index f7e86ae9f72f..a4edc61c74ed 100644
--- a/drivers/pnp/pnpbios/core.c
+++ b/drivers/pnp/pnpbios/core.c
@@ -49,6 +49,7 @@
 #include <linux/freezer.h>
 #include <linux/kmod.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 
 #include <asm/page.h>
 #include <asm/desc.h>
diff --git a/drivers/pnp/pnpbios/proc.c b/drivers/pnp/pnpbios/proc.c
index 0f0d819b157f..11b3a01c31eb 100644
--- a/drivers/pnp/pnpbios/proc.c
+++ b/drivers/pnp/pnpbios/proc.c
@@ -21,6 +21,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/proc_fs.h>
 #include <linux/pnp.h>
diff --git a/drivers/pnp/support.c b/drivers/pnp/support.c
index a6073db10ec6..39fca5ed5a9f 100644
--- a/drivers/pnp/support.c
+++ b/drivers/pnp/support.c
@@ -7,10 +7,12 @@
  *	Bjorn Helgaas <bjorn.helgaas@hp.com>
  */
 
+#include <linux/hex.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
 #include <linux/pnp.h>
 #include "base.h"
+#include <linux/sprintf.h>
 
 /**
  * pnp_is_active - Determines if a device is active based on its current
diff --git a/drivers/pnp/system.c b/drivers/pnp/system.c
index 835113b2cb04..b0605f7cee60 100644
--- a/drivers/pnp/system.c
+++ b/drivers/pnp/system.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/kernel.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 
 static const struct pnp_device_id pnp_dev_table[] = {
 	/* General ID for reserving resources */
diff --git a/drivers/power/reset/at91-reset.c b/drivers/power/reset/at91-reset.c
index 16512654295f..4da6535dfd39 100644
--- a/drivers/power/reset/at91-reset.c
+++ b/drivers/power/reset/at91-reset.c
@@ -19,6 +19,7 @@
 #include <linux/reboot.h>
 #include <linux/reset-controller.h>
 #include <linux/power/power_on_reason.h>
+#include <linux/sprintf.h>
 
 #include <soc/at91/at91sam9_ddrsdr.h>
 #include <soc/at91/at91sam9_sdramc.h>
diff --git a/drivers/power/reset/ltc2952-poweroff.c b/drivers/power/reset/ltc2952-poweroff.c
index fa25fbd53934..f94401ed1539 100644
--- a/drivers/power/reset/ltc2952-poweroff.c
+++ b/drivers/power/reset/ltc2952-poweroff.c
@@ -57,6 +57,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/reboot.h>
 #include <linux/property.h>
+#include <linux/hrtimer.h>
 
 struct ltc2952_poweroff {
 	struct hrtimer timer_trigger;
diff --git a/drivers/power/reset/vexpress-poweroff.c b/drivers/power/reset/vexpress-poweroff.c
index bb22b2db5907..ce302f4fddfa 100644
--- a/drivers/power/reset/vexpress-poweroff.c
+++ b/drivers/power/reset/vexpress-poweroff.c
@@ -5,11 +5,13 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/notifier.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/vexpress.h>
 
diff --git a/drivers/power/supply/ab8500_fg.c b/drivers/power/supply/ab8500_fg.c
index 8c593fbdd45a..a81b52a2b3fa 100644
--- a/drivers/power/supply/ab8500_fg.c
+++ b/drivers/power/supply/ab8500_fg.c
@@ -16,6 +16,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/component.h>
 #include <linux/device.h>
diff --git a/drivers/power/supply/bq2415x_charger.c b/drivers/power/supply/bq2415x_charger.c
index 6a4798a62588..2a6f2c54c60d 100644
--- a/drivers/power/supply/bq2415x_charger.c
+++ b/drivers/power/supply/bq2415x_charger.c
@@ -16,9 +16,11 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/param.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/sysfs.h>
 #include <linux/platform_device.h>
diff --git a/drivers/power/supply/bq24190_charger.c b/drivers/power/supply/bq24190_charger.c
index 2b393eb5c282..dbe4016d056f 100644
--- a/drivers/power/supply/bq24190_charger.c
+++ b/drivers/power/supply/bq24190_charger.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pm_runtime.h>
 #include <linux/power_supply.h>
 #include <linux/power/bq24190_charger.h>
diff --git a/drivers/power/supply/bq24257_charger.c b/drivers/power/supply/bq24257_charger.c
index 801d0d2c5f2e..33654fdd253a 100644
--- a/drivers/power/supply/bq24257_charger.c
+++ b/drivers/power/supply/bq24257_charger.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/power_supply.h>
 #include <linux/regmap.h>
 #include <linux/types.h>
diff --git a/drivers/power/supply/bq25890_charger.c b/drivers/power/supply/bq25890_charger.c
index 03fa11a1c9b6..67d96bacdc27 100644
--- a/drivers/power/supply/bq25890_charger.c
+++ b/drivers/power/supply/bq25890_charger.c
@@ -11,6 +11,7 @@
 #include <linux/power/bq25890_charger.h>
 #include <linux/regmap.h>
 #include <linux/regulator/driver.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/gpio/consumer.h>
 #include <linux/interrupt.h>
diff --git a/drivers/power/supply/charger-manager.c b/drivers/power/supply/charger-manager.c
index 96f0a7fbf105..54c5b3c8c420 100644
--- a/drivers/power/supply/charger-manager.c
+++ b/drivers/power/supply/charger-manager.c
@@ -18,6 +18,7 @@
 #include <linux/interrupt.h>
 #include <linux/rtc.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/platform_device.h>
 #include <linux/power/charger-manager.h>
diff --git a/drivers/power/supply/cros_peripheral_charger.c b/drivers/power/supply/cros_peripheral_charger.c
index a204f2355be4..be0b3892ef7d 100644
--- a/drivers/power/supply/cros_peripheral_charger.c
+++ b/drivers/power/supply/cros_peripheral_charger.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/power_supply.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <linux/types.h>
 #include <asm/unaligned.h>
diff --git a/drivers/power/supply/cros_usbpd-charger.c b/drivers/power/supply/cros_usbpd-charger.c
index b6c96376776a..40ab97635b8f 100644
--- a/drivers/power/supply/cros_usbpd-charger.c
+++ b/drivers/power/supply/cros_usbpd-charger.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/power_supply.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define CHARGER_USBPD_DIR_NAME			"CROS_USBPD_CHARGER%d"
 #define CHARGER_DEDICATED_DIR_NAME		"CROS_DEDICATED_CHARGER"
diff --git a/drivers/power/supply/ds2760_battery.c b/drivers/power/supply/ds2760_battery.c
index 7cf4ea06b500..3e37ce7c84e0 100644
--- a/drivers/power/supply/ds2760_battery.c
+++ b/drivers/power/supply/ds2760_battery.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/param.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/pm.h>
 #include <linux/slab.h>
diff --git a/drivers/power/supply/ds2780_battery.c b/drivers/power/supply/ds2780_battery.c
index 1e7f297f6cb1..9df5d6af8afb 100644
--- a/drivers/power/supply/ds2780_battery.c
+++ b/drivers/power/supply/ds2780_battery.c
@@ -9,6 +9,7 @@
  * Based on ds2760_battery and ds2782_battery drivers
  */
 
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/param.h>
diff --git a/drivers/power/supply/ds2781_battery.c b/drivers/power/supply/ds2781_battery.c
index c4f8ccc687f9..12b7e49812a0 100644
--- a/drivers/power/supply/ds2781_battery.c
+++ b/drivers/power/supply/ds2781_battery.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/power_supply.h>
 #include <linux/idr.h>
+#include <linux/kstrtox.h>
 
 #include <linux/w1.h>
 #include "../../w1/slaves/w1_ds2781.h"
diff --git a/drivers/power/supply/ds2782_battery.c b/drivers/power/supply/ds2782_battery.c
index 85aa9c465aa4..9dfa51820ebe 100644
--- a/drivers/power/supply/ds2782_battery.c
+++ b/drivers/power/supply/ds2782_battery.c
@@ -13,6 +13,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/swab.h>
diff --git a/drivers/power/supply/isp1704_charger.c b/drivers/power/supply/isp1704_charger.c
index 860d8614c98f..3e391539d836 100644
--- a/drivers/power/supply/isp1704_charger.c
+++ b/drivers/power/supply/isp1704_charger.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/sysfs.h>
diff --git a/drivers/power/supply/ltc4162-l-charger.c b/drivers/power/supply/ltc4162-l-charger.c
index f0eace731480..f6c8c8abe078 100644
--- a/drivers/power/supply/ltc4162-l-charger.c
+++ b/drivers/power/supply/ltc4162-l-charger.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
 #include <linux/power_supply.h>
diff --git a/drivers/power/supply/max14577_charger.c b/drivers/power/supply/max14577_charger.c
index b28c04157709..471f9ac9546a 100644
--- a/drivers/power/supply/max14577_charger.c
+++ b/drivers/power/supply/max14577_charger.c
@@ -10,6 +10,7 @@
 #include <linux/power_supply.h>
 #include <linux/mfd/max14577-private.h>
 #include <linux/mfd/max14577.h>
+#include <linux/kstrtox.h>
 
 struct max14577_charger {
 	struct device		*dev;
diff --git a/drivers/power/supply/max1721x_battery.c b/drivers/power/supply/max1721x_battery.c
index bac43ab9e97c..9fe45a736f0b 100644
--- a/drivers/power/supply/max1721x_battery.c
+++ b/drivers/power/supply/max1721x_battery.c
@@ -13,6 +13,7 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/w1.h>
 #include <linux/regmap.h>
 #include <linux/power_supply.h>
diff --git a/drivers/power/supply/max77693_charger.c b/drivers/power/supply/max77693_charger.c
index 2001e12c9f7d..3c797ec9d99f 100644
--- a/drivers/power/supply/max77693_charger.c
+++ b/drivers/power/supply/max77693_charger.c
@@ -12,6 +12,7 @@
 #include <linux/mfd/max77693.h>
 #include <linux/mfd/max77693-common.h>
 #include <linux/mfd/max77693-private.h>
+#include <linux/kstrtox.h>
 
 #define MAX77693_CHARGER_NAME				"max77693-charger"
 static const char *max77693_charger_model		= "MAX77693";
diff --git a/drivers/power/supply/mp2629_charger.c b/drivers/power/supply/mp2629_charger.c
index 3a2a28fbba73..f8ccc70471a2 100644
--- a/drivers/power/supply/mp2629_charger.c
+++ b/drivers/power/supply/mp2629_charger.c
@@ -11,6 +11,7 @@
 #include <linux/iio/consumer.h>
 #include <linux/iio/types.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/mp2629.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
diff --git a/drivers/power/supply/olpc_battery.c b/drivers/power/supply/olpc_battery.c
index 9f60094a5599..daf086edc94b 100644
--- a/drivers/power/supply/olpc_battery.c
+++ b/drivers/power/supply/olpc_battery.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/err.h>
 #include <linux/device.h>
diff --git a/drivers/power/supply/pcf50633-charger.c b/drivers/power/supply/pcf50633-charger.c
index 0e980522fee5..8e9867d9bd47 100644
--- a/drivers/power/supply/pcf50633-charger.c
+++ b/drivers/power/supply/pcf50633-charger.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/init.h>
diff --git a/drivers/power/supply/pmu_battery.c b/drivers/power/supply/pmu_battery.c
index eaab7500d99b..9f0d5acf5c5b 100644
--- a/drivers/power/supply/pmu_battery.c
+++ b/drivers/power/supply/pmu_battery.c
@@ -12,6 +12,7 @@
 #include <linux/adb.h>
 #include <linux/pmu.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 static struct pmu_battery_dev {
 	struct power_supply *bat;
diff --git a/drivers/power/supply/power_supply_core.c b/drivers/power/supply/power_supply_core.c
index ecef35ac3b7e..09d3b7b06ec5 100644
--- a/drivers/power/supply/power_supply_core.c
+++ b/drivers/power/supply/power_supply_core.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/slab.h>
diff --git a/drivers/power/supply/power_supply_leds.c b/drivers/power/supply/power_supply_leds.c
index c7db29d5fcb8..0ff82f8fa8f6 100644
--- a/drivers/power/supply/power_supply_leds.c
+++ b/drivers/power/supply/power_supply_leds.c
@@ -14,6 +14,7 @@
 #include <linux/power_supply.h>
 #include <linux/slab.h>
 #include <linux/leds.h>
+#include <linux/sprintf.h>
 
 #include "power_supply.h"
 
diff --git a/drivers/power/supply/power_supply_sysfs.c b/drivers/power/supply/power_supply_sysfs.c
index 977611e16373..d1bf02650029 100644
--- a/drivers/power/supply/power_supply_sysfs.c
+++ b/drivers/power/supply/power_supply_sysfs.c
@@ -12,8 +12,11 @@
 
 #include <linux/ctype.h>
 #include <linux/device.h>
+#include <linux/gfp.h> // for get_zeroed_page()
+#include <linux/kstrtox.h>
 #include <linux/power_supply.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/string_helpers.h>
 
diff --git a/drivers/power/supply/qcom_battmgr.c b/drivers/power/supply/qcom_battmgr.c
index ec163d1bcd18..19352b93ca93 100644
--- a/drivers/power/supply/qcom_battmgr.c
+++ b/drivers/power/supply/qcom_battmgr.c
@@ -4,6 +4,7 @@
  * Copyright (c) 2022, Linaro Ltd
  */
 #include <linux/auxiliary_bus.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/of_device.h>
diff --git a/drivers/power/supply/sbs-battery.c b/drivers/power/supply/sbs-battery.c
index a6c204c08232..003aebcc202e 100644
--- a/drivers/power/supply/sbs-battery.c
+++ b/drivers/power/supply/sbs-battery.c
@@ -20,6 +20,7 @@
 #include <linux/power/sbs-battery.h>
 #include <linux/power_supply.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 
 enum {
diff --git a/drivers/power/supply/surface_battery.c b/drivers/power/supply/surface_battery.c
index 196d290dc596..2f37aa6265d2 100644
--- a/drivers/power/supply/surface_battery.c
+++ b/drivers/power/supply/surface_battery.c
@@ -9,6 +9,7 @@
 #include <asm/unaligned.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/power_supply.h>
diff --git a/drivers/power/supply/test_power.c b/drivers/power/supply/test_power.c
index 0d0a77584c5d..61e704bef55a 100644
--- a/drivers/power/supply/test_power.c
+++ b/drivers/power/supply/test_power.c
@@ -17,6 +17,7 @@
 #include <linux/errno.h>
 #include <linux/delay.h>
 #include <generated/utsrelease.h>
+#include <linux/sprintf.h>
 
 enum test_power_id {
 	TEST_AC,
diff --git a/drivers/power/supply/wm831x_backup.c b/drivers/power/supply/wm831x_backup.c
index 9673fcf7f3af..ce66ea7c796d 100644
--- a/drivers/power/supply/wm831x_backup.c
+++ b/drivers/power/supply/wm831x_backup.c
@@ -10,6 +10,7 @@
 #include <linux/platform_device.h>
 #include <linux/power_supply.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/wm831x/core.h>
 #include <linux/mfd/wm831x/auxadc.h>
diff --git a/drivers/power/supply/wm831x_power.c b/drivers/power/supply/wm831x_power.c
index d56e499ac59f..656e4af64908 100644
--- a/drivers/power/supply/wm831x_power.c
+++ b/drivers/power/supply/wm831x_power.c
@@ -10,6 +10,7 @@
 #include <linux/platform_device.h>
 #include <linux/power_supply.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb/phy.h>
 
 #include <linux/mfd/wm831x/core.h>
diff --git a/drivers/powercap/dtpm.c b/drivers/powercap/dtpm.c
index ce920f17f45f..bd8127edd8a8 100644
--- a/drivers/powercap/dtpm.c
+++ b/drivers/powercap/dtpm.c
@@ -18,6 +18,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/dtpm.h>
+#include <linux/export.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/powercap.h>
diff --git a/drivers/powercap/dtpm_cpu.c b/drivers/powercap/dtpm_cpu.c
index ee0d1aa3e023..cb53a9a442b5 100644
--- a/drivers/powercap/dtpm_cpu.c
+++ b/drivers/powercap/dtpm_cpu.c
@@ -24,6 +24,7 @@
 #include <linux/of.h>
 #include <linux/pm_qos.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct dtpm_cpu {
 	struct dtpm dtpm;
diff --git a/drivers/powercap/intel_rapl_common.c b/drivers/powercap/intel_rapl_common.c
index 2feed036c1cd..fae3f090637b 100644
--- a/drivers/powercap/intel_rapl_common.c
+++ b/drivers/powercap/intel_rapl_common.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/device.h>
 #include <linux/slab.h>
diff --git a/drivers/powercap/powercap_sys.c b/drivers/powercap/powercap_sys.c
index 52c32dcbf7d8..1503be6f0510 100644
--- a/drivers/powercap/powercap_sys.c
+++ b/drivers/powercap/powercap_sys.c
@@ -10,6 +10,7 @@
 #include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/powercap.h>
+#include <linux/sprintf.h>
 
 #define to_powercap_zone(n) container_of(n, struct powercap_zone, dev)
 #define to_powercap_control_type(n) \
diff --git a/drivers/pps/clients/pps-gpio.c b/drivers/pps/clients/pps-gpio.c
index 2f4b11b4dfcd..c297ca01cfaf 100644
--- a/drivers/pps/clients/pps-gpio.c
+++ b/drivers/pps/clients/pps-gpio.c
@@ -20,6 +20,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/list.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/jiffies.h>
 
diff --git a/drivers/pps/clients/pps-ktimer.c b/drivers/pps/clients/pps-ktimer.c
index d33106bd7a29..7bb83872bb87 100644
--- a/drivers/pps/clients/pps-ktimer.c
+++ b/drivers/pps/clients/pps-ktimer.c
@@ -7,6 +7,7 @@
 
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
+#include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/pps/clients/pps-ldisc.c b/drivers/pps/clients/pps-ldisc.c
index 443d6bae19d1..65cbde654bfb 100644
--- a/drivers/pps/clients/pps-ldisc.c
+++ b/drivers/pps/clients/pps-ldisc.c
@@ -7,8 +7,10 @@
 
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
+#include <linux/device.h>
 #include <linux/module.h>
 #include <linux/serial_core.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/pps_kernel.h>
 #include <linux/bug.h>
diff --git a/drivers/pps/clients/pps_parport.c b/drivers/pps/clients/pps_parport.c
index 42f93d4c6ee3..9f9389158042 100644
--- a/drivers/pps/clients/pps_parport.c
+++ b/drivers/pps/clients/pps_parport.c
@@ -15,6 +15,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/idr.h>
 #include <linux/init.h>
 #include <linux/irqnr.h>
 #include <linux/time.h>
diff --git a/drivers/pps/kapi.c b/drivers/pps/kapi.c
index d9d566f70ed1..1df337bf5e7b 100644
--- a/drivers/pps/kapi.c
+++ b/drivers/pps/kapi.c
@@ -7,6 +7,7 @@
 
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
+#include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/pps/pps.c b/drivers/pps/pps.c
index 5d19baae6a38..a689fd42ccaa 100644
--- a/drivers/pps/pps.c
+++ b/drivers/pps/pps.c
@@ -15,6 +15,7 @@
 #include <linux/idr.h>
 #include <linux/mutex.h>
 #include <linux/cdev.h>
+#include <linux/device.h>
 #include <linux/poll.h>
 #include <linux/pps_kernel.h>
 #include <linux/slab.h>
diff --git a/drivers/pps/sysfs.c b/drivers/pps/sysfs.c
index 134bc33f6ad0..d7cab432c3cf 100644
--- a/drivers/pps/sysfs.c
+++ b/drivers/pps/sysfs.c
@@ -8,6 +8,7 @@
 
 #include <linux/device.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/pps_kernel.h>
 
diff --git a/drivers/ps3/ps3av.c b/drivers/ps3/ps3av.c
index f6c9e56bdba7..b5f265d01a24 100644
--- a/drivers/ps3/ps3av.c
+++ b/drivers/ps3/ps3av.c
@@ -12,6 +12,8 @@
 #include <linux/notifier.h>
 #include <linux/ioctl.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <asm/firmware.h>
 #include <asm/ps3av.h>
diff --git a/drivers/ps3/ps3stor_lib.c b/drivers/ps3/ps3stor_lib.c
index a12a1ad9b5fe..c83fb21c3666 100644
--- a/drivers/ps3/ps3stor_lib.c
+++ b/drivers/ps3/ps3stor_lib.c
@@ -8,6 +8,7 @@
 
 #include <linux/dma-mapping.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <asm/lv1call.h>
 #include <asm/ps3stor.h>
diff --git a/drivers/ptp/ptp_chardev.c b/drivers/ptp/ptp_chardev.c
index 7513018c9f9a..8ac4141855d7 100644
--- a/drivers/ptp/ptp_chardev.c
+++ b/drivers/ptp/ptp_chardev.c
@@ -9,6 +9,7 @@
 #include <linux/poll.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include <linux/debugfs.h>
 
diff --git a/drivers/ptp/ptp_clock.c b/drivers/ptp/ptp_clock.c
index 3aaf1a3430c5..b3d86f26154c 100644
--- a/drivers/ptp/ptp_clock.c
+++ b/drivers/ptp/ptp_clock.c
@@ -13,6 +13,7 @@
 #include <linux/posix-clock.h>
 #include <linux/pps_kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls.h>
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
diff --git a/drivers/ptp/ptp_clockmatrix.c b/drivers/ptp/ptp_clockmatrix.c
index f6f9d4adce04..5e019adb6da4 100644
--- a/drivers/ptp/ptp_clockmatrix.c
+++ b/drivers/ptp/ptp_clockmatrix.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include <linux/string.h>
 #include <linux/of.h>
diff --git a/drivers/ptp/ptp_fc3.c b/drivers/ptp/ptp_fc3.c
index 0e2286ba088a..0e82c95303a8 100644
--- a/drivers/ptp/ptp_fc3.c
+++ b/drivers/ptp/ptp_fc3.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include <linux/string.h>
 #include <linux/of.h>
diff --git a/drivers/ptp/ptp_idt82p33.c b/drivers/ptp/ptp_idt82p33.c
index 057190b9cd3d..a16b661355c5 100644
--- a/drivers/ptp/ptp_idt82p33.c
+++ b/drivers/ptp/ptp_idt82p33.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/timekeeping.h>
 #include <linux/bitops.h>
 #include <linux/of.h>
diff --git a/drivers/ptp/ptp_ocp.c b/drivers/ptp/ptp_ocp.c
index 6506cfb89aa9..b7954eb3400c 100644
--- a/drivers/ptp/ptp_ocp.c
+++ b/drivers/ptp/ptp_ocp.c
@@ -4,6 +4,7 @@
 #include <linux/bits.h>
 #include <linux/err.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/init.h>
@@ -18,6 +19,7 @@
 #include <linux/spi/spi.h>
 #include <linux/spi/xilinx_spi.h>
 #include <linux/spi/altera.h>
+#include <linux/sprintf.h>
 #include <net/devlink.h>
 #include <linux/i2c.h>
 #include <linux/mtd/mtd.h>
diff --git a/drivers/ptp/ptp_sysfs.c b/drivers/ptp/ptp_sysfs.c
index a15460aaa03b..b82f01dfe89f 100644
--- a/drivers/ptp/ptp_sysfs.c
+++ b/drivers/ptp/ptp_sysfs.c
@@ -6,7 +6,9 @@
  * Copyright 2021 NXP
  */
 #include <linux/capability.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "ptp_private.h"
 
diff --git a/drivers/ptp/ptp_vclock.c b/drivers/ptp/ptp_vclock.c
index dcf752c9e045..44ed8d6c4317 100644
--- a/drivers/ptp/ptp_vclock.c
+++ b/drivers/ptp/ptp_vclock.c
@@ -7,6 +7,7 @@
 #include <linux/slab.h>
 #include <linux/hashtable.h>
 #include "ptp_private.h"
+#include <linux/sprintf.h>
 
 #define PTP_VCLOCK_CC_SHIFT		31
 #define PTP_VCLOCK_CC_MULT		(1 << PTP_VCLOCK_CC_SHIFT)
diff --git a/drivers/pwm/pwm-jz4740.c b/drivers/pwm/pwm-jz4740.c
index 3933418e551b..c0ea5f94122b 100644
--- a/drivers/pwm/pwm-jz4740.c
+++ b/drivers/pwm/pwm-jz4740.c
@@ -19,6 +19,7 @@
 #include <linux/platform_device.h>
 #include <linux/pwm.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 struct soc_info {
 	unsigned int num_pwms;
diff --git a/drivers/pwm/pwm-mediatek.c b/drivers/pwm/pwm-mediatek.c
index 562102a47ac0..b7d94196e356 100644
--- a/drivers/pwm/pwm-mediatek.c
+++ b/drivers/pwm/pwm-mediatek.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/pwm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 /* PWM registers and bits definitions */
diff --git a/drivers/pwm/pwm-meson.c b/drivers/pwm/pwm-meson.c
index 2971bbf3b5e7..76cfed22bf25 100644
--- a/drivers/pwm/pwm-meson.c
+++ b/drivers/pwm/pwm-meson.c
@@ -41,6 +41,7 @@
 #include <linux/pwm.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #define REG_PWM_A		0x0
 #define REG_PWM_B		0x4
diff --git a/drivers/pwm/sysfs.c b/drivers/pwm/sysfs.c
index 1698609d91c8..b609793fa308 100644
--- a/drivers/pwm/sysfs.c
+++ b/drivers/pwm/sysfs.c
@@ -8,10 +8,13 @@
  */
 
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/err.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/kdev_t.h>
+#include <linux/kobject.h>
 #include <linux/pwm.h>
 
 struct pwm_export {
diff --git a/drivers/rapidio/devices/rio_mport_cdev.c b/drivers/rapidio/devices/rio_mport_cdev.c
index 27afbb9d544b..faa1c162fc19 100644
--- a/drivers/rapidio/devices/rio_mport_cdev.c
+++ b/drivers/rapidio/devices/rio_mport_cdev.c
@@ -12,7 +12,9 @@
  */
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kref.h>
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/ioctl.h>
 #include <linux/uaccess.h>
 #include <linux/list.h>
diff --git a/drivers/rapidio/devices/tsi721.c b/drivers/rapidio/devices/tsi721.c
index 4b84270a8906..8454bdf9d11c 100644
--- a/drivers/rapidio/devices/tsi721.c
+++ b/drivers/rapidio/devices/tsi721.c
@@ -20,6 +20,7 @@
 #include <linux/interrupt.h>
 #include <linux/kfifo.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include "tsi721.h"
 
diff --git a/drivers/rapidio/rio-sysfs.c b/drivers/rapidio/rio-sysfs.c
index 90d391210533..e0f6bae1b2d9 100644
--- a/drivers/rapidio/rio-sysfs.c
+++ b/drivers/rapidio/rio-sysfs.c
@@ -7,8 +7,10 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/rio.h>
 #include <linux/rio_drv.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/capability.h>
 
diff --git a/drivers/rapidio/rio_cm.c b/drivers/rapidio/rio_cm.c
index 9135227301c8..bd23f7ca1475 100644
--- a/drivers/rapidio/rio_cm.c
+++ b/drivers/rapidio/rio_cm.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kref.h>
 #include <linux/dma-mapping.h>
 #include <linux/delay.h>
 #include <linux/sched.h>
@@ -18,6 +19,7 @@
 #include <linux/idr.h>
 #include <linux/interrupt.h>
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/fs.h>
 #include <linux/poll.h>
 #include <linux/reboot.h>
diff --git a/drivers/rapidio/switches/idt_gen2.c b/drivers/rapidio/switches/idt_gen2.c
index 8a89bba17d39..9006828fdb8f 100644
--- a/drivers/rapidio/switches/idt_gen2.c
+++ b/drivers/rapidio/switches/idt_gen2.c
@@ -12,6 +12,7 @@
 #include <linux/rio_drv.h>
 #include <linux/rio_ids.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <asm/page.h>
 #include "../rio.h"
diff --git a/drivers/regulator/bd9571mwv-regulator.c b/drivers/regulator/bd9571mwv-regulator.c
index c7ceba56e7dc..e1830a2fd105 100644
--- a/drivers/regulator/bd9571mwv-regulator.c
+++ b/drivers/regulator/bd9571mwv-regulator.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/regulator/driver.h>
+#include <linux/kstrtox.h>
 
 #include <linux/mfd/bd9571mwv.h>
 
diff --git a/drivers/regulator/core.c b/drivers/regulator/core.c
index a968dabb48f5..04127adee90b 100644
--- a/drivers/regulator/core.c
+++ b/drivers/regulator/core.c
@@ -15,6 +15,7 @@
 #include <linux/async.h>
 #include <linux/err.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/delay.h>
 #include <linux/gpio/consumer.h>
diff --git a/drivers/regulator/da9055-regulator.c b/drivers/regulator/da9055-regulator.c
index 8fd9ac787588..0c0cd1e746fb 100644
--- a/drivers/regulator/da9055-regulator.c
+++ b/drivers/regulator/da9055-regulator.c
@@ -16,6 +16,7 @@
 #include <linux/regulator/machine.h>
 #include <linux/of.h>
 #include <linux/regulator/of_regulator.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/da9055/core.h>
 #include <linux/mfd/da9055/reg.h>
diff --git a/drivers/regulator/of_regulator.c b/drivers/regulator/of_regulator.c
index 03afc160fc72..a6a8d90e2ffc 100644
--- a/drivers/regulator/of_regulator.c
+++ b/drivers/regulator/of_regulator.c
@@ -12,6 +12,7 @@
 #include <linux/regulator/machine.h>
 #include <linux/regulator/driver.h>
 #include <linux/regulator/of_regulator.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/drivers/regulator/qcom-rpmh-regulator.c b/drivers/regulator/qcom-rpmh-regulator.c
index 80e304711345..0d587b288400 100644
--- a/drivers/regulator/qcom-rpmh-regulator.c
+++ b/drivers/regulator/qcom-rpmh-regulator.c
@@ -10,6 +10,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/regulator/driver.h>
 #include <linux/regulator/machine.h>
diff --git a/drivers/regulator/userspace-consumer.c b/drivers/regulator/userspace-consumer.c
index 53d1b9d6f69c..ecae4ff96910 100644
--- a/drivers/regulator/userspace-consumer.c
+++ b/drivers/regulator/userspace-consumer.c
@@ -19,6 +19,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/regulator/userspace-consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 struct userspace_consumer_data {
 	const char *name;
diff --git a/drivers/regulator/virtual.c b/drivers/regulator/virtual.c
index 0a0ee186c6af..1e5f635a0cb0 100644
--- a/drivers/regulator/virtual.c
+++ b/drivers/regulator/virtual.c
@@ -8,12 +8,14 @@
  */
 
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 struct virtual_consumer_data {
 	struct mutex lock;
diff --git a/drivers/regulator/wm831x-dcdc.c b/drivers/regulator/wm831x-dcdc.c
index 834d7c181971..99ce39e7ccf1 100644
--- a/drivers/regulator/wm831x-dcdc.c
+++ b/drivers/regulator/wm831x-dcdc.c
@@ -17,6 +17,7 @@
 #include <linux/regulator/machine.h>
 #include <linux/gpio/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/wm831x/core.h>
 #include <linux/mfd/wm831x/regulator.h>
diff --git a/drivers/regulator/wm831x-isink.c b/drivers/regulator/wm831x-isink.c
index ed5e191e8896..22f1cf2f40b2 100644
--- a/drivers/regulator/wm831x-isink.c
+++ b/drivers/regulator/wm831x-isink.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/regulator/driver.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/wm831x/core.h>
 #include <linux/mfd/wm831x/regulator.h>
diff --git a/drivers/regulator/wm831x-ldo.c b/drivers/regulator/wm831x-ldo.c
index 76b89b1cd519..f483257e4d5f 100644
--- a/drivers/regulator/wm831x-ldo.c
+++ b/drivers/regulator/wm831x-ldo.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/regulator/driver.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/wm831x/core.h>
 #include <linux/mfd/wm831x/regulator.h>
diff --git a/drivers/remoteproc/imx_dsp_rproc.c b/drivers/remoteproc/imx_dsp_rproc.c
index 087506e21508..6350610b0296 100644
--- a/drivers/remoteproc/imx_dsp_rproc.c
+++ b/drivers/remoteproc/imx_dsp_rproc.c
@@ -4,6 +4,7 @@
 #include <dt-bindings/firmware/imx/rsrc.h>
 #include <linux/arm-smccc.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/firmware.h>
 #include <linux/firmware/imx/sci.h>
diff --git a/drivers/remoteproc/keystone_remoteproc.c b/drivers/remoteproc/keystone_remoteproc.c
index 7e57b90bcaf8..4257072470fb 100644
--- a/drivers/remoteproc/keystone_remoteproc.c
+++ b/drivers/remoteproc/keystone_remoteproc.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/of_address.h>
 #include <linux/of_reserved_mem.h>
diff --git a/drivers/remoteproc/omap_remoteproc.c b/drivers/remoteproc/omap_remoteproc.c
index 8f50ab80e56f..d710eb387963 100644
--- a/drivers/remoteproc/omap_remoteproc.c
+++ b/drivers/remoteproc/omap_remoteproc.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/clk.h>
 #include <linux/clk/ti.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/io.h>
 #include <linux/of.h>
diff --git a/drivers/remoteproc/qcom_q6v5.c b/drivers/remoteproc/qcom_q6v5.c
index 4ee5e67a9f03..7292744db8e8 100644
--- a/drivers/remoteproc/qcom_q6v5.c
+++ b/drivers/remoteproc/qcom_q6v5.c
@@ -17,6 +17,7 @@
 #include <linux/remoteproc.h>
 #include "qcom_common.h"
 #include "qcom_q6v5.h"
+#include <linux/completion.h>
 
 #define Q6V5_LOAD_STATE_MSG_LEN	64
 #define Q6V5_PANIC_DELAY_MS	200
diff --git a/drivers/remoteproc/qcom_q6v5_mss.c b/drivers/remoteproc/qcom_q6v5_mss.c
index 394b2c1cb5e2..63b4ab95d6d6 100644
--- a/drivers/remoteproc/qcom_q6v5_mss.c
+++ b/drivers/remoteproc/qcom_q6v5_mss.c
@@ -28,6 +28,7 @@
 #include <linux/soc/qcom/mdt_loader.h>
 #include <linux/iopoll.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "remoteproc_internal.h"
 #include "qcom_common.h"
diff --git a/drivers/remoteproc/qcom_sysmon.c b/drivers/remoteproc/qcom_sysmon.c
index c24e4a882873..6a7479190e92 100644
--- a/drivers/remoteproc/qcom_sysmon.c
+++ b/drivers/remoteproc/qcom_sysmon.c
@@ -12,6 +12,8 @@
 #include <linux/platform_device.h>
 #include <linux/remoteproc/qcom_rproc.h>
 #include <linux/rpmsg.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "qcom_common.h"
 
diff --git a/drivers/remoteproc/qcom_wcnss.c b/drivers/remoteproc/qcom_wcnss.c
index 90de22c81da9..33f9bb710dcc 100644
--- a/drivers/remoteproc/qcom_wcnss.c
+++ b/drivers/remoteproc/qcom_wcnss.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/firmware.h>
 #include <linux/interrupt.h>
diff --git a/drivers/remoteproc/remoteproc_core.c b/drivers/remoteproc/remoteproc_core.c
index f276956f2c5c..e3040b3d5a67 100644
--- a/drivers/remoteproc/remoteproc_core.c
+++ b/drivers/remoteproc/remoteproc_core.c
@@ -25,6 +25,7 @@
 #include <linux/mutex.h>
 #include <linux/dma-mapping.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/debugfs.h>
 #include <linux/rculist.h>
diff --git a/drivers/remoteproc/remoteproc_debugfs.c b/drivers/remoteproc/remoteproc_debugfs.c
index b86c1d09c70c..d542848ca3f8 100644
--- a/drivers/remoteproc/remoteproc_debugfs.c
+++ b/drivers/remoteproc/remoteproc_debugfs.c
@@ -18,8 +18,10 @@
 
 #include <linux/kernel.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/remoteproc.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "remoteproc_internal.h"
diff --git a/drivers/remoteproc/remoteproc_sysfs.c b/drivers/remoteproc/remoteproc_sysfs.c
index 8c7ea8922638..aed92a15e290 100644
--- a/drivers/remoteproc/remoteproc_sysfs.c
+++ b/drivers/remoteproc/remoteproc_sysfs.c
@@ -5,6 +5,7 @@
 
 #include <linux/remoteproc.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "remoteproc_internal.h"
 
diff --git a/drivers/rpmsg/qcom_glink_native.c b/drivers/rpmsg/qcom_glink_native.c
index 82d460ff4777..bb9df423f1c7 100644
--- a/drivers/rpmsg/qcom_glink_native.c
+++ b/drivers/rpmsg/qcom_glink_native.c
@@ -19,6 +19,7 @@
 #include <linux/wait.h>
 #include <linux/workqueue.h>
 #include <linux/mailbox_client.h>
+#include <linux/completion.h>
 
 #include "rpmsg_internal.h"
 #include "qcom_glink_native.h"
diff --git a/drivers/rpmsg/qcom_smd.c b/drivers/rpmsg/qcom_smd.c
index 43f601c84b4f..87d81788dfc9 100644
--- a/drivers/rpmsg/qcom_smd.c
+++ b/drivers/rpmsg/qcom_smd.c
@@ -17,6 +17,7 @@
 #include <linux/sizes.h>
 #include <linux/slab.h>
 #include <linux/soc/qcom/smem.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/rpmsg.h>
 #include <linux/rpmsg/qcom_smd.h>
diff --git a/drivers/rpmsg/rpmsg_char.c b/drivers/rpmsg/rpmsg_char.c
index 1cb8d7474428..56df5a46bd5a 100644
--- a/drivers/rpmsg/rpmsg_char.c
+++ b/drivers/rpmsg/rpmsg_char.c
@@ -23,6 +23,7 @@
 #include <linux/rpmsg.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <uapi/linux/rpmsg.h>
 
diff --git a/drivers/rpmsg/rpmsg_core.c b/drivers/rpmsg/rpmsg_core.c
index 4295c01a2861..d7ab528d0290 100644
--- a/drivers/rpmsg/rpmsg_core.c
+++ b/drivers/rpmsg/rpmsg_core.c
@@ -12,11 +12,13 @@
 #define pr_fmt(fmt) "%s: " fmt, __func__
 
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/module.h>
 #include <linux/rpmsg.h>
 #include <linux/of_device.h>
 #include <linux/pm_domain.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "rpmsg_internal.h"
 
diff --git a/drivers/rtc/class.c b/drivers/rtc/class.c
index 921ee1827974..0a4853d45ec0 100644
--- a/drivers/rtc/class.c
+++ b/drivers/rtc/class.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/rtc.h>
 #include <linux/kdev_t.h>
+#include <linux/hrtimer.h>
 #include <linux/idr.h>
 #include <linux/slab.h>
 #include <linux/workqueue.h>
diff --git a/drivers/rtc/interface.c b/drivers/rtc/interface.c
index 1b63111cdda2..58f7d3a19dfe 100644
--- a/drivers/rtc/interface.c
+++ b/drivers/rtc/interface.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/rtc.h>
+#include <linux/hrtimer.h>
 #include <linux/sched.h>
 #include <linux/module.h>
 #include <linux/log2.h>
diff --git a/drivers/rtc/lib.c b/drivers/rtc/lib.c
index fe361652727a..a248c81af71f 100644
--- a/drivers/rtc/lib.c
+++ b/drivers/rtc/lib.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/rtc.h>
 
 static const unsigned char rtc_days_in_month[] = {
diff --git a/drivers/rtc/proc.c b/drivers/rtc/proc.c
index cbcdbb19d848..d5f43a0721ff 100644
--- a/drivers/rtc/proc.c
+++ b/drivers/rtc/proc.c
@@ -12,6 +12,7 @@
 #include <linux/rtc.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 
 #include "rtc-core.h"
 
diff --git a/drivers/rtc/rtc-ab8500.c b/drivers/rtc/rtc-ab8500.c
index 75bb2ac9005c..009ed5b4b811 100644
--- a/drivers/rtc/rtc-ab8500.c
+++ b/drivers/rtc/rtc-ab8500.c
@@ -19,6 +19,7 @@
 #include <linux/delay.h>
 #include <linux/of.h>
 #include <linux/pm_wakeirq.h>
+#include <linux/sprintf.h>
 
 #define AB8500_RTC_SOFF_STAT_REG	0x00
 #define AB8500_RTC_CC_CONF_REG		0x01
diff --git a/drivers/rtc/rtc-abx80x.c b/drivers/rtc/rtc-abx80x.c
index fde2b8054c2e..c66092d8c851 100644
--- a/drivers/rtc/rtc-abx80x.c
+++ b/drivers/rtc/rtc-abx80x.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 #include <linux/watchdog.h>
 
 #define ABX8XX_REG_HTH		0x00
diff --git a/drivers/rtc/rtc-bq32k.c b/drivers/rtc/rtc-bq32k.c
index 591e42391747..1a6631f4db09 100644
--- a/drivers/rtc/rtc-bq32k.c
+++ b/drivers/rtc/rtc-bq32k.c
@@ -11,11 +11,13 @@
 
 #include <linux/module.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/rtc.h>
 #include <linux/init.h>
 #include <linux/kstrtox.h>
 #include <linux/errno.h>
 #include <linux/bcd.h>
+#include <linux/sprintf.h>
 
 #define BQ32K_SECONDS		0x00	/* Seconds register address */
 #define BQ32K_SECONDS_MASK	0x7F	/* Mask over seconds value */
diff --git a/drivers/rtc/rtc-ds1307.c b/drivers/rtc/rtc-ds1307.c
index 506b7d1c2397..0025d1dd5f87 100644
--- a/drivers/rtc/rtc-ds1307.c
+++ b/drivers/rtc/rtc-ds1307.c
@@ -18,6 +18,7 @@
 #include <linux/rtc/ds1307.h>
 #include <linux/rtc.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/hwmon.h>
 #include <linux/hwmon-sysfs.h>
diff --git a/drivers/rtc/rtc-ds1343.c b/drivers/rtc/rtc-ds1343.c
index ed5a6ba89a3e..2b9888b8f8c2 100644
--- a/drivers/rtc/rtc-ds1343.c
+++ b/drivers/rtc/rtc-ds1343.c
@@ -19,6 +19,7 @@
 #include <linux/pm.h>
 #include <linux/pm_wakeirq.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define DALLAS_MAXIM_DS1343	0
 #define DALLAS_MAXIM_DS1344	1
diff --git a/drivers/rtc/rtc-ds1685.c b/drivers/rtc/rtc-ds1685.c
index 04dbf35cf3b7..eb83747a11e1 100644
--- a/drivers/rtc/rtc-ds1685.c
+++ b/drivers/rtc/rtc-ds1685.c
@@ -21,6 +21,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include <linux/rtc/ds1685.h>
diff --git a/drivers/rtc/rtc-ep93xx.c b/drivers/rtc/rtc-ep93xx.c
index 1fdd20d01560..42d5e239dfd3 100644
--- a/drivers/rtc/rtc-ep93xx.c
+++ b/drivers/rtc/rtc-ep93xx.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/io.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 
 #define EP93XX_RTC_DATA			0x000
 #define EP93XX_RTC_MATCH		0x004
diff --git a/drivers/rtc/rtc-hid-sensor-time.c b/drivers/rtc/rtc-hid-sensor-time.c
index b81cea505ee9..8ef9e8dde6ff 100644
--- a/drivers/rtc/rtc-hid-sensor-time.c
+++ b/drivers/rtc/rtc-hid-sensor-time.c
@@ -9,6 +9,7 @@
 #include <linux/hid-sensor-hub.h>
 #include <linux/iio/iio.h>
 #include <linux/rtc.h>
+#include <linux/completion.h>
 
 enum hid_time_channel {
 	CHANNEL_SCAN_INDEX_YEAR,
diff --git a/drivers/rtc/rtc-isl1208.c b/drivers/rtc/rtc-isl1208.c
index e50c23ee1646..f9d11c12947d 100644
--- a/drivers/rtc/rtc-isl1208.c
+++ b/drivers/rtc/rtc-isl1208.c
@@ -12,6 +12,7 @@
 #include <linux/of.h>
 #include <linux/of_irq.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 
 /* Register map */
 /* rtc section */
diff --git a/drivers/rtc/rtc-pcf2127.c b/drivers/rtc/rtc-pcf2127.c
index 9c04c4e1a49c..eb2430b2071d 100644
--- a/drivers/rtc/rtc-pcf2127.c
+++ b/drivers/rtc/rtc-pcf2127.c
@@ -27,6 +27,7 @@
 #include <linux/of_irq.h>
 #include <linux/of_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <linux/watchdog.h>
 
 /* Control register 1 */
diff --git a/drivers/rtc/rtc-rs5c372.c b/drivers/rtc/rtc-rs5c372.c
index f8fab0205f8c..347a2d408201 100644
--- a/drivers/rtc/rtc-rs5c372.c
+++ b/drivers/rtc/rtc-rs5c372.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 /*
  * Ricoh has a family of I2C based RTCs, which differ only slightly from
diff --git a/drivers/rtc/rtc-rv3028.c b/drivers/rtc/rtc-rv3028.c
index 2f001c59c61d..f331254b1521 100644
--- a/drivers/rtc/rtc-rv3028.c
+++ b/drivers/rtc/rtc-rv3028.c
@@ -20,6 +20,7 @@
 #include <linux/of.h>
 #include <linux/regmap.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 
 #define RV3028_SEC			0x00
 #define RV3028_MIN			0x01
diff --git a/drivers/rtc/rtc-rv3029c2.c b/drivers/rtc/rtc-rv3029c2.c
index 4a81feeb00ff..c5437c01352f 100644
--- a/drivers/rtc/rtc-rv3029c2.c
+++ b/drivers/rtc/rtc-rv3029c2.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/spi/spi.h>
 #include <linux/bcd.h>
 #include <linux/rtc.h>
@@ -19,6 +20,7 @@
 #include <linux/hwmon-sysfs.h>
 #include <linux/kstrtox.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* Register map */
 /* control section */
diff --git a/drivers/rtc/rtc-rx8025.c b/drivers/rtc/rtc-rx8025.c
index aabe62c283a1..f7ff5c71097e 100644
--- a/drivers/rtc/rtc-rx8025.c
+++ b/drivers/rtc/rtc-rx8025.c
@@ -22,6 +22,7 @@
 #include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 
 /* Register definitions */
 #define RX8025_REG_SEC		0x00
diff --git a/drivers/rtc/rtc-sh.c b/drivers/rtc/rtc-sh.c
index 27a191fa3704..0ea556324504 100644
--- a/drivers/rtc/rtc-sh.c
+++ b/drivers/rtc/rtc-sh.c
@@ -25,6 +25,7 @@
 #include <linux/log2.h>
 #include <linux/clk.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #ifdef CONFIG_SUPERH
 #include <asm/rtc.h>
 #else
diff --git a/drivers/rtc/rtc-starfire.c b/drivers/rtc/rtc-starfire.c
index fbd1ed41cbf1..16412f739451 100644
--- a/drivers/rtc/rtc-starfire.c
+++ b/drivers/rtc/rtc-starfire.c
@@ -10,6 +10,7 @@
 #include <linux/init.h>
 #include <linux/rtc.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <asm/oplib.h>
 
diff --git a/drivers/rtc/rtc-x1205.c b/drivers/rtc/rtc-x1205.c
index 807f953ae0ae..48490d567133 100644
--- a/drivers/rtc/rtc-x1205.c
+++ b/drivers/rtc/rtc-x1205.c
@@ -20,6 +20,7 @@
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 
 /* offsets into CCR area */
 
diff --git a/drivers/rtc/sysfs.c b/drivers/rtc/sysfs.c
index e3062c4d3f2c..655e8c34d6ce 100644
--- a/drivers/rtc/sysfs.c
+++ b/drivers/rtc/sysfs.c
@@ -9,6 +9,7 @@
 #include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/rtc.h>
+#include <linux/sprintf.h>
 
 #include "rtc-core.h"
 
diff --git a/drivers/s390/block/dasd.c b/drivers/s390/block/dasd.c
index 359c081ac378..38504d6732c0 100644
--- a/drivers/s390/block/dasd.c
+++ b/drivers/s390/block/dasd.c
@@ -19,6 +19,7 @@
 #include <linux/mutex.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <asm/ccwdev.h>
diff --git a/drivers/s390/block/dasd_3990_erp.c b/drivers/s390/block/dasd_3990_erp.c
index 459b7f8ac883..9c4cc799fe08 100644
--- a/drivers/s390/block/dasd_3990_erp.c
+++ b/drivers/s390/block/dasd_3990_erp.c
@@ -9,6 +9,7 @@
 
 #include <linux/timer.h>
 #include <asm/idals.h>
+#include <linux/sprintf.h>
 
 #include "dasd_int.h"
 #include "dasd_eckd.h"
diff --git a/drivers/s390/block/dasd_alias.c b/drivers/s390/block/dasd_alias.c
index e84cd5436556..bd76f7b4abf9 100644
--- a/drivers/s390/block/dasd_alias.c
+++ b/drivers/s390/block/dasd_alias.c
@@ -11,6 +11,7 @@
 #include <asm/ebcdic.h>
 #include "dasd_int.h"
 #include "dasd_eckd.h"
+#include <linux/completion.h>
 
 /*
  * General concept of alias management:
diff --git a/drivers/s390/block/dasd_devmap.c b/drivers/s390/block/dasd_devmap.c
index 0316c20823ee..c4b726017116 100644
--- a/drivers/s390/block/dasd_devmap.c
+++ b/drivers/s390/block/dasd_devmap.c
@@ -15,8 +15,10 @@
 
 #include <linux/ctype.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <asm/debug.h>
 #include <linux/uaccess.h>
diff --git a/drivers/s390/block/dasd_eckd.c b/drivers/s390/block/dasd_eckd.c
index 8aade17d885c..89f5a11c2492 100644
--- a/drivers/s390/block/dasd_eckd.c
+++ b/drivers/s390/block/dasd_eckd.c
@@ -19,6 +19,7 @@
 #include <linux/compat.h>
 #include <linux/init.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/io.h>
 
diff --git a/drivers/s390/block/dasd_fba.c b/drivers/s390/block/dasd_fba.c
index 045e548630df..4fbd4cb72049 100644
--- a/drivers/s390/block/dasd_fba.c
+++ b/drivers/s390/block/dasd_fba.c
@@ -10,6 +10,7 @@
 #include <linux/stddef.h>
 #include <linux/kernel.h>
 #include <asm/debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/slab.h>
 #include <linux/hdreg.h>	/* HDIO_GETGEO			    */
diff --git a/drivers/s390/block/dasd_genhd.c b/drivers/s390/block/dasd_genhd.c
index 4ce59f0041c2..3fe3fd8270cc 100644
--- a/drivers/s390/block/dasd_genhd.c
+++ b/drivers/s390/block/dasd_genhd.c
@@ -15,6 +15,7 @@
 #include <linux/major.h>
 #include <linux/fs.h>
 #include <linux/blkpg.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 
diff --git a/drivers/s390/block/dcssblk.c b/drivers/s390/block/dcssblk.c
index f363c1d51d9a..deaa11a4fc91 100644
--- a/drivers/s390/block/dcssblk.c
+++ b/drivers/s390/block/dcssblk.c
@@ -18,6 +18,7 @@
 #include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/pfn_t.h>
+#include <linux/sprintf.h>
 #include <linux/uio.h>
 #include <linux/dax.h>
 #include <linux/io.h>
diff --git a/drivers/s390/block/scm_blk.c b/drivers/s390/block/scm_blk.c
index ade95e91b3c8..57c46d74eba0 100644
--- a/drivers/s390/block/scm_blk.c
+++ b/drivers/s390/block/scm_blk.c
@@ -20,6 +20,7 @@
 #include <linux/io.h>
 #include <asm/eadm.h>
 #include "scm_blk.h"
+#include <linux/sprintf.h>
 
 debug_info_t *scm_debug;
 static int scm_major;
diff --git a/drivers/s390/char/con3215.c b/drivers/s390/char/con3215.c
index 0b0324fe4aff..f759f06b3c92 100644
--- a/drivers/s390/char/con3215.c
+++ b/drivers/s390/char/con3215.c
@@ -12,6 +12,7 @@
 
 #include <linux/types.h>
 #include <linux/kdev_t.h>
+#include <linux/kstrtox.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/vt_kern.h>
diff --git a/drivers/s390/char/con3270.c b/drivers/s390/char/con3270.c
index 251d2a1c3eef..bca862edf7e1 100644
--- a/drivers/s390/char/con3270.c
+++ b/drivers/s390/char/con3270.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kdev_t.h>
 #include <linux/tty.h>
diff --git a/drivers/s390/char/diag_ftp.c b/drivers/s390/char/diag_ftp.c
index 9418a9270d03..caf02d4fb46a 100644
--- a/drivers/s390/char/diag_ftp.c
+++ b/drivers/s390/char/diag_ftp.c
@@ -18,6 +18,7 @@
 #include <asm/asm-extable.h>
 #include <asm/ctlreg.h>
 #include <asm/diag.h>
+#include <linux/completion.h>
 
 #include "hmcdrv_ftp.h"
 #include "diag_ftp.h"
diff --git a/drivers/s390/char/hmcdrv_dev.c b/drivers/s390/char/hmcdrv_dev.c
index 8d50c894711f..816706cbbb13 100644
--- a/drivers/s390/char/hmcdrv_dev.c
+++ b/drivers/s390/char/hmcdrv_dev.c
@@ -26,6 +26,7 @@
 #include <linux/device.h>
 #include <linux/capability.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "hmcdrv_dev.h"
diff --git a/drivers/s390/char/sclp.c b/drivers/s390/char/sclp.c
index d53ee34d398f..9cfef1501f75 100644
--- a/drivers/s390/char/sclp.c
+++ b/drivers/s390/char/sclp.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/panic_notifier.h>
diff --git a/drivers/s390/char/sclp_cpi_sys.c b/drivers/s390/char/sclp_cpi_sys.c
index f60d7ea8268d..d3d4cc639bd1 100644
--- a/drivers/s390/char/sclp_cpi_sys.c
+++ b/drivers/s390/char/sclp_cpi_sys.c
@@ -12,6 +12,8 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/device.h>
 #include <linux/string.h>
diff --git a/drivers/s390/char/sclp_ftp.c b/drivers/s390/char/sclp_ftp.c
index d27e2cbfbccb..9c71aa84df7b 100644
--- a/drivers/s390/char/sclp_ftp.c
+++ b/drivers/s390/char/sclp_ftp.c
@@ -19,6 +19,7 @@
 #include <linux/jiffies.h>
 #include <asm/sysinfo.h>
 #include <asm/ebcdic.h>
+#include <linux/completion.h>
 
 #include "sclp.h"
 #include "sclp_diag.h"
diff --git a/drivers/s390/char/sclp_ocf.c b/drivers/s390/char/sclp_ocf.c
index d35f10ea5b52..9ea4de7590ac 100644
--- a/drivers/s390/char/sclp_ocf.c
+++ b/drivers/s390/char/sclp_ocf.c
@@ -11,6 +11,7 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/device.h>
 #include <linux/string.h>
diff --git a/drivers/s390/char/tape_3590.c b/drivers/s390/char/tape_3590.c
index 0d484fe43d7e..b8c67d075dc0 100644
--- a/drivers/s390/char/tape_3590.c
+++ b/drivers/s390/char/tape_3590.c
@@ -16,6 +16,7 @@
 #include <linux/init.h>
 #include <linux/bio.h>
 #include <asm/ebcdic.h>
+#include <linux/sprintf.h>
 
 #define TAPE_DBF_AREA	tape_3590_dbf
 #define BUFSIZE 512	/* size of buffers for dynamic generated messages */
diff --git a/drivers/s390/char/tape_char.c b/drivers/s390/char/tape_char.c
index cc8237afeffa..28c9566a5712 100644
--- a/drivers/s390/char/tape_char.c
+++ b/drivers/s390/char/tape_char.c
@@ -14,6 +14,7 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/proc_fs.h>
 #include <linux/mtio.h>
diff --git a/drivers/s390/char/tape_core.c b/drivers/s390/char/tape_core.c
index a6d2a4792185..e25510be64dc 100644
--- a/drivers/s390/char/tape_core.c
+++ b/drivers/s390/char/tape_core.c
@@ -18,6 +18,7 @@
 #include <linux/init.h>	     // for kernel parameters
 #include <linux/kmod.h>	     // for requesting modules
 #include <linux/spinlock.h>  // for locks
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/list.h>
 #include <linux/slab.h>
diff --git a/drivers/s390/char/vmlogrdr.c b/drivers/s390/char/vmlogrdr.c
index 6946ba9a9de2..7fecc1a31acb 100644
--- a/drivers/s390/char/vmlogrdr.c
+++ b/drivers/s390/char/vmlogrdr.c
@@ -18,6 +18,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
diff --git a/drivers/s390/char/vmur.c b/drivers/s390/char/vmur.c
index 1d17a83569ce..2af29fd06fa6 100644
--- a/drivers/s390/char/vmur.c
+++ b/drivers/s390/char/vmur.c
@@ -13,9 +13,11 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 #include <asm/cio.h>
diff --git a/drivers/s390/char/zcore.c b/drivers/s390/char/zcore.c
index bc3be0330f1d..590f564c6fa3 100644
--- a/drivers/s390/char/zcore.c
+++ b/drivers/s390/char/zcore.c
@@ -17,6 +17,7 @@
 #include <linux/debugfs.h>
 #include <linux/panic_notifier.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 #include <linux/uio.h>
 
 #include <asm/asm-offsets.h>
diff --git a/drivers/s390/cio/airq.c b/drivers/s390/cio/airq.c
index a108f2bf5b33..5374c2607c66 100644
--- a/drivers/s390/cio/airq.c
+++ b/drivers/s390/cio/airq.c
@@ -17,6 +17,7 @@
 #include <linux/rculist.h>
 #include <linux/slab.h>
 #include <linux/dmapool.h>
+#include <linux/sprintf.h>
 
 #include <asm/airq.h>
 #include <asm/isc.h>
diff --git a/drivers/s390/cio/blacklist.c b/drivers/s390/cio/blacklist.c
index 93695d535380..f9f694d814ab 100644
--- a/drivers/s390/cio/blacklist.c
+++ b/drivers/s390/cio/blacklist.c
@@ -12,6 +12,7 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/vmalloc.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
diff --git a/drivers/s390/cio/ccwgroup.c b/drivers/s390/cio/ccwgroup.c
index 6eb8bcd948dc..ef2922868e1c 100644
--- a/drivers/s390/cio/ccwgroup.c
+++ b/drivers/s390/cio/ccwgroup.c
@@ -9,12 +9,14 @@
  */
 #include <linux/module.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/list.h>
 #include <linux/device.h>
 #include <linux/init.h>
 #include <linux/ctype.h>
 #include <linux/dcache.h>
+#include <linux/sprintf.h>
 
 #include <asm/cio.h>
 #include <asm/ccwdev.h>
diff --git a/drivers/s390/cio/chp.c b/drivers/s390/cio/chp.c
index 675d7ed82356..6d92628b0916 100644
--- a/drivers/s390/cio/chp.c
+++ b/drivers/s390/cio/chp.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/bug.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/spinlock.h>
 #include <linux/export.h>
diff --git a/drivers/s390/cio/chsc.c b/drivers/s390/cio/chsc.c
index 3d88899dff7c..f0b4ee21f2b6 100644
--- a/drivers/s390/cio/chsc.c
+++ b/drivers/s390/cio/chsc.c
@@ -17,6 +17,7 @@
 #include <linux/device.h>
 #include <linux/mutex.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <asm/cio.h>
 #include <asm/chpid.h>
diff --git a/drivers/s390/cio/chsc_sch.c b/drivers/s390/cio/chsc_sch.c
index e6c800653f98..0b6256e33b2a 100644
--- a/drivers/s390/cio/chsc_sch.c
+++ b/drivers/s390/cio/chsc_sch.c
@@ -10,9 +10,11 @@
 
 #include <linux/slab.h>
 #include <linux/compat.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/miscdevice.h>
 #include <linux/kernel_stat.h>
diff --git a/drivers/s390/cio/cio.c b/drivers/s390/cio/cio.c
index a5736b7357b2..b3fc02915427 100644
--- a/drivers/s390/cio/cio.c
+++ b/drivers/s390/cio/cio.c
@@ -42,6 +42,7 @@
 #include "cio_debug.h"
 #include "chp.h"
 #include "trace.h"
+#include <linux/sprintf.h>
 
 debug_info_t *cio_debug_msg_id;
 debug_info_t *cio_debug_trace_id;
diff --git a/drivers/s390/cio/cio_inject.c b/drivers/s390/cio/cio_inject.c
index 8613fa937237..16da5d9a4776 100644
--- a/drivers/s390/cio/cio_inject.c
+++ b/drivers/s390/cio/cio_inject.c
@@ -14,6 +14,8 @@
 #include <linux/mm.h>
 #include <linux/debugfs.h>
 #include <asm/chpid.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "cio_inject.h"
 #include "cio_debug.h"
diff --git a/drivers/s390/cio/cmf.c b/drivers/s390/cio/cmf.c
index f80dc18e2a76..eaf2a906abeb 100644
--- a/drivers/s390/cio/cmf.c
+++ b/drivers/s390/cio/cmf.c
@@ -16,10 +16,12 @@
 #include <linux/memblock.h>
 #include <linux/device.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/export.h>
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timex.h>	/* get_tod_clock() */
 
 #include <asm/ccwdev.h>
diff --git a/drivers/s390/cio/css.c b/drivers/s390/cio/css.c
index 094431a62ad5..1440966ca913 100644
--- a/drivers/s390/cio/css.c
+++ b/drivers/s390/cio/css.c
@@ -14,6 +14,7 @@
 #include <linux/export.h>
 #include <linux/init.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
 #include <linux/list.h>
@@ -23,6 +24,7 @@
 #include <linux/dma-mapping.h>
 #include <asm/isc.h>
 #include <asm/crw.h>
+#include <linux/sprintf.h>
 
 #include "css.h"
 #include "cio.h"
diff --git a/drivers/s390/cio/device.c b/drivers/s390/cio/device.c
index f95d12345d98..3e0b826397b9 100644
--- a/drivers/s390/cio/device.c
+++ b/drivers/s390/cio/device.c
@@ -13,12 +13,14 @@
 
 #include <linux/export.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
 #include <linux/errno.h>
 #include <linux/err.h>
 #include <linux/slab.h>
 #include <linux/list.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/delay.h>
 #include <linux/timer.h>
diff --git a/drivers/s390/cio/device_pgid.c b/drivers/s390/cio/device_pgid.c
index ad90045873e2..17973750137e 100644
--- a/drivers/s390/cio/device_pgid.c
+++ b/drivers/s390/cio/device_pgid.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/string.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
diff --git a/drivers/s390/cio/device_status.c b/drivers/s390/cio/device_status.c
index 6c2e35065fec..53ed5ef47e72 100644
--- a/drivers/s390/cio/device_status.c
+++ b/drivers/s390/cio/device_status.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <asm/ccwdev.h>
 #include <asm/cio.h>
diff --git a/drivers/s390/cio/qdio_debug.c b/drivers/s390/cio/qdio_debug.c
index 1a9714af51e4..c68ef38c50dc 100644
--- a/drivers/s390/cio/qdio_debug.c
+++ b/drivers/s390/cio/qdio_debug.c
@@ -6,6 +6,8 @@
  */
 #include <linux/seq_file.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/export.h>
 #include <linux/slab.h>
diff --git a/drivers/s390/cio/qdio_debug.h b/drivers/s390/cio/qdio_debug.h
index 0dfba085f360..ddf3373657f9 100644
--- a/drivers/s390/cio/qdio_debug.h
+++ b/drivers/s390/cio/qdio_debug.h
@@ -10,6 +10,7 @@
 #include <asm/debug.h>
 #include <asm/qdio.h>
 #include "qdio.h"
+#include <linux/sprintf.h>
 
 /* that gives us 15 characters in the text event views */
 #define QDIO_DBF_LEN	32
diff --git a/drivers/s390/cio/scm.c b/drivers/s390/cio/scm.c
index c7894d61306d..a39b3b50f95d 100644
--- a/drivers/s390/cio/scm.c
+++ b/drivers/s390/cio/scm.c
@@ -14,6 +14,7 @@
 #include <linux/err.h>
 #include <asm/eadm.h>
 #include "chsc.h"
+#include <linux/sprintf.h>
 
 static struct device *scm_root;
 
diff --git a/drivers/s390/cio/vfio_ccw_drv.c b/drivers/s390/cio/vfio_ccw_drv.c
index 8ad49030a7bf..db8614caf5fc 100644
--- a/drivers/s390/cio/vfio_ccw_drv.c
+++ b/drivers/s390/cio/vfio_ccw_drv.c
@@ -14,6 +14,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/mdev.h>
+#include <linux/completion.h>
 
 #include <asm/isc.h>
 
diff --git a/drivers/s390/cio/vfio_ccw_fsm.c b/drivers/s390/cio/vfio_ccw_fsm.c
index 09877b46181d..b6ee596f6a45 100644
--- a/drivers/s390/cio/vfio_ccw_fsm.c
+++ b/drivers/s390/cio/vfio_ccw_fsm.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/vfio.h>
+#include <linux/completion.h>
 
 #include <asm/isc.h>
 
diff --git a/drivers/s390/crypto/ap_bus.c b/drivers/s390/crypto/ap_bus.c
index 2ecf4d36e78b..94ef19f3fd31 100644
--- a/drivers/s390/crypto/ap_bus.c
+++ b/drivers/s390/crypto/ap_bus.c
@@ -15,12 +15,14 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/freezer.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/slab.h>
 #include <linux/notifier.h>
@@ -30,6 +32,7 @@
 #include <asm/tpi.h>
 #include <linux/atomic.h>
 #include <asm/isc.h>
+#include <linux/completion.h>
 #include <linux/hrtimer.h>
 #include <linux/ktime.h>
 #include <asm/facility.h>
diff --git a/drivers/s390/crypto/ap_card.c b/drivers/s390/crypto/ap_card.c
index ce953cbbd564..61b37c18f4a0 100644
--- a/drivers/s390/crypto/ap_card.c
+++ b/drivers/s390/crypto/ap_card.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <asm/facility.h>
 #include <asm/sclp.h>
+#include <linux/sprintf.h>
 
 #include "ap_bus.h"
 
diff --git a/drivers/s390/crypto/ap_queue.c b/drivers/s390/crypto/ap_queue.c
index 682595443145..7d883e0d06ae 100644
--- a/drivers/s390/crypto/ap_queue.c
+++ b/drivers/s390/crypto/ap_queue.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <asm/facility.h>
 
diff --git a/drivers/s390/crypto/vfio_ap_ops.c b/drivers/s390/crypto/vfio_ap_ops.c
index 983b3b16196c..44c84854124f 100644
--- a/drivers/s390/crypto/vfio_ap_ops.c
+++ b/drivers/s390/crypto/vfio_ap_ops.c
@@ -11,11 +11,13 @@
 #include <linux/string.h>
 #include <linux/vfio.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/ctype.h>
 #include <linux/bitops.h>
 #include <linux/kvm_host.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include <asm/kvm.h>
 #include <asm/zcrypt.h>
diff --git a/drivers/s390/crypto/zcrypt_card.c b/drivers/s390/crypto/zcrypt_card.c
index 050462d95222..fe7fa2e6d6f9 100644
--- a/drivers/s390/crypto/zcrypt_card.c
+++ b/drivers/s390/crypto/zcrypt_card.c
@@ -21,6 +21,7 @@
 #include <linux/compat.h>
 #include <linux/slab.h>
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/hw_random.h>
 #include <linux/debugfs.h>
diff --git a/drivers/s390/crypto/zcrypt_cex4.c b/drivers/s390/crypto/zcrypt_cex4.c
index 64df7d2f6266..dc146c41172b 100644
--- a/drivers/s390/crypto/zcrypt_cex4.c
+++ b/drivers/s390/crypto/zcrypt_cex4.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/err.h>
 #include <linux/atomic.h>
+#include <linux/hex.h>
 #include <linux/uaccess.h>
 #include <linux/mod_devicetable.h>
 
diff --git a/drivers/s390/crypto/zcrypt_msgtype50.c b/drivers/s390/crypto/zcrypt_msgtype50.c
index 2e155de8abe5..d7ded958d71e 100644
--- a/drivers/s390/crypto/zcrypt_msgtype50.c
+++ b/drivers/s390/crypto/zcrypt_msgtype50.c
@@ -18,6 +18,7 @@
 #include <linux/init.h>
 #include <linux/err.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/uaccess.h>
 
 #include "ap_bus.h"
diff --git a/drivers/s390/crypto/zcrypt_msgtype6.c b/drivers/s390/crypto/zcrypt_msgtype6.c
index 3c53abbdc342..3827c6cd4ea8 100644
--- a/drivers/s390/crypto/zcrypt_msgtype6.c
+++ b/drivers/s390/crypto/zcrypt_msgtype6.c
@@ -19,6 +19,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/uaccess.h>
 
 #include "ap_bus.h"
diff --git a/drivers/s390/crypto/zcrypt_queue.c b/drivers/s390/crypto/zcrypt_queue.c
index 67d8e0ae0eec..ecedfc84f9c0 100644
--- a/drivers/s390/crypto/zcrypt_queue.c
+++ b/drivers/s390/crypto/zcrypt_queue.c
@@ -21,6 +21,7 @@
 #include <linux/compat.h>
 #include <linux/slab.h>
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/hw_random.h>
 #include <linux/debugfs.h>
diff --git a/drivers/s390/net/ctcm_main.c b/drivers/s390/net/ctcm_main.c
index ac15d7c2b200..6bd0a0bcbe41 100644
--- a/drivers/s390/net/ctcm_main.c
+++ b/drivers/s390/net/ctcm_main.c
@@ -28,6 +28,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/timer.h>
diff --git a/drivers/s390/net/ctcm_main.h b/drivers/s390/net/ctcm_main.h
index 25164e8bf13d..06d02493427c 100644
--- a/drivers/s390/net/ctcm_main.h
+++ b/drivers/s390/net/ctcm_main.h
@@ -10,6 +10,7 @@
 
 #include <asm/ccwdev.h>
 #include <asm/ccwgroup.h>
+#include <linux/kstrtox.h>
 
 #include <linux/skbuff.h>
 #include <linux/netdevice.h>
diff --git a/drivers/s390/net/ctcm_mpc.c b/drivers/s390/net/ctcm_mpc.c
index 7a2f34a5e0e0..4b09497d1793 100644
--- a/drivers/s390/net/ctcm_mpc.c
+++ b/drivers/s390/net/ctcm_mpc.c
@@ -26,6 +26,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/timer.h>
diff --git a/drivers/s390/net/ctcm_sysfs.c b/drivers/s390/net/ctcm_sysfs.c
index 0c5d8a3eaa2e..dfbc69fde5b9 100644
--- a/drivers/s390/net/ctcm_sysfs.c
+++ b/drivers/s390/net/ctcm_sysfs.c
@@ -13,6 +13,8 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/device.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 #include "ctcm_main.h"
diff --git a/drivers/s390/net/lcs.c b/drivers/s390/net/lcs.c
index a1f2acd6fb8f..860e9bab0fef 100644
--- a/drivers/s390/net/lcs.c
+++ b/drivers/s390/net/lcs.c
@@ -15,6 +15,7 @@
 
 #include <linux/module.h>
 #include <linux/if.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/inetdevice.h>
diff --git a/drivers/s390/net/lcs.h b/drivers/s390/net/lcs.h
index a2699b70b050..529067d5e69d 100644
--- a/drivers/s390/net/lcs.h
+++ b/drivers/s390/net/lcs.h
@@ -4,6 +4,7 @@
 #include <linux/interrupt.h>
 #include <linux/netdevice.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/refcount.h>
 #include <asm/ccwdev.h>
diff --git a/drivers/s390/net/netiucv.c b/drivers/s390/net/netiucv.c
index 8852b03f943b..8d57afe02955 100644
--- a/drivers/s390/net/netiucv.c
+++ b/drivers/s390/net/netiucv.c
@@ -29,8 +29,10 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/timer.h>
diff --git a/drivers/s390/net/qeth_core_main.c b/drivers/s390/net/qeth_core_main.c
index cf8506d0f185..8288aaa9bf69 100644
--- a/drivers/s390/net/qeth_core_main.c
+++ b/drivers/s390/net/qeth_core_main.c
@@ -11,8 +11,11 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/compat.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
diff --git a/drivers/s390/net/qeth_core_sys.c b/drivers/s390/net/qeth_core_sys.c
index eea93f8f106f..3c207bdb7e91 100644
--- a/drivers/s390/net/qeth_core_sys.c
+++ b/drivers/s390/net/qeth_core_sys.c
@@ -13,6 +13,7 @@
 #include <linux/list.h>
 #include <linux/rwsem.h>
 #include <asm/ebcdic.h>
+#include <linux/kstrtox.h>
 
 #include "qeth_core.h"
 
diff --git a/drivers/s390/net/qeth_ethtool.c b/drivers/s390/net/qeth_ethtool.c
index c1caf7734c3e..0209cd6119e0 100644
--- a/drivers/s390/net/qeth_ethtool.c
+++ b/drivers/s390/net/qeth_ethtool.c
@@ -8,6 +8,7 @@
 
 #include <linux/ethtool.h>
 #include "qeth_core.h"
+#include <linux/sprintf.h>
 
 
 #define QETH_TXQ_STAT(_name, _stat) { \
diff --git a/drivers/s390/net/qeth_l2_main.c b/drivers/s390/net/qeth_l2_main.c
index 75910c0bcc2b..c4a16004d0fa 100644
--- a/drivers/s390/net/qeth_l2_main.c
+++ b/drivers/s390/net/qeth_l2_main.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
diff --git a/drivers/s390/net/qeth_l2_sys.c b/drivers/s390/net/qeth_l2_sys.c
index 7f592f912517..f7a02f14eafe 100644
--- a/drivers/s390/net/qeth_l2_sys.c
+++ b/drivers/s390/net/qeth_l2_sys.c
@@ -8,6 +8,7 @@
 #include <asm/ebcdic.h>
 #include "qeth_core.h"
 #include "qeth_l2.h"
+#include <linux/kstrtox.h>
 
 static ssize_t qeth_bridge_port_role_state_show(struct device *dev,
 				struct device_attribute *attr, char *buf,
diff --git a/drivers/s390/net/qeth_l3_main.c b/drivers/s390/net/qeth_l3_main.c
index 04c64ce0a1ca..d81d6555001e 100644
--- a/drivers/s390/net/qeth_l3_main.c
+++ b/drivers/s390/net/qeth_l3_main.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
diff --git a/drivers/s390/net/qeth_l3_sys.c b/drivers/s390/net/qeth_l3_sys.c
index a6b64228ead2..a8c03e51d07f 100644
--- a/drivers/s390/net/qeth_l3_sys.c
+++ b/drivers/s390/net/qeth_l3_sys.c
@@ -12,6 +12,8 @@
 #include <linux/hashtable.h>
 #include <linux/inet.h>
 #include "qeth_l3.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define QETH_DEVICE_ATTR(_id, _name, _mode, _show, _store) \
 struct device_attribute dev_attr_##_id = __ATTR(_name, _mode, _show, _store)
diff --git a/drivers/s390/net/smsgiucv_app.c b/drivers/s390/net/smsgiucv_app.c
index 0a263999f7ae..de83fc63107c 100644
--- a/drivers/s390/net/smsgiucv_app.c
+++ b/drivers/s390/net/smsgiucv_app.c
@@ -21,6 +21,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <net/iucv/iucv.h>
 #include "smsgiucv.h"
diff --git a/drivers/s390/scsi/zfcp_aux.c b/drivers/s390/scsi/zfcp_aux.c
index ab2f35bc294d..d9b05193b719 100644
--- a/drivers/s390/scsi/zfcp_aux.c
+++ b/drivers/s390/scsi/zfcp_aux.c
@@ -38,6 +38,8 @@
 #include "zfcp_fc.h"
 #include "zfcp_reqlist.h"
 #include "zfcp_diag.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define ZFCP_BUS_ID_SIZE	20
 
diff --git a/drivers/s390/scsi/zfcp_dbf.c b/drivers/s390/scsi/zfcp_dbf.c
index d904625afd40..b48880a1b224 100644
--- a/drivers/s390/scsi/zfcp_dbf.c
+++ b/drivers/s390/scsi/zfcp_dbf.c
@@ -17,6 +17,7 @@
 #include "zfcp_dbf.h"
 #include "zfcp_ext.h"
 #include "zfcp_fc.h"
+#include <linux/sprintf.h>
 
 static u32 dbfsize = 4;
 
diff --git a/drivers/s390/scsi/zfcp_fc.c b/drivers/s390/scsi/zfcp_fc.c
index d6516ab00437..8beca82fd3cd 100644
--- a/drivers/s390/scsi/zfcp_fc.c
+++ b/drivers/s390/scsi/zfcp_fc.c
@@ -12,9 +12,11 @@
 
 #include <linux/types.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/random.h>
 #include <linux/bsg-lib.h>
+#include <linux/completion.h>
 #include <scsi/fc/fc_els.h>
 #include <scsi/libfc.h>
 #include "zfcp_ext.h"
diff --git a/drivers/s390/scsi/zfcp_fsf.c b/drivers/s390/scsi/zfcp_fsf.c
index ceed1b6f7cb6..cca6fd2f2077 100644
--- a/drivers/s390/scsi/zfcp_fsf.c
+++ b/drivers/s390/scsi/zfcp_fsf.c
@@ -11,7 +11,9 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/blktrace_api.h>
+#include <linux/completion.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <scsi/fc/fc_els.h>
diff --git a/drivers/s390/scsi/zfcp_scsi.c b/drivers/s390/scsi/zfcp_scsi.c
index b2a8cd792266..f63e7ed5191d 100644
--- a/drivers/s390/scsi/zfcp_scsi.c
+++ b/drivers/s390/scsi/zfcp_scsi.c
@@ -11,6 +11,7 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <scsi/fc/fc_fcp.h>
@@ -20,6 +21,7 @@
 #include "zfcp_dbf.h"
 #include "zfcp_fc.h"
 #include "zfcp_reqlist.h"
+#include <linux/completion.h>
 
 static unsigned int default_depth = 32;
 module_param_named(queue_depth, default_depth, uint, 0600);
diff --git a/drivers/s390/scsi/zfcp_sysfs.c b/drivers/s390/scsi/zfcp_sysfs.c
index cb67fa80fb12..5df73ef81866 100644
--- a/drivers/s390/scsi/zfcp_sysfs.c
+++ b/drivers/s390/scsi/zfcp_sysfs.c
@@ -13,6 +13,8 @@
 #include <linux/slab.h>
 #include "zfcp_diag.h"
 #include "zfcp_ext.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #define ZFCP_DEV_ATTR(_feat, _name, _mode, _show, _store) \
 struct device_attribute dev_attr_##_feat##_##_name = __ATTR(_name, _mode,\
diff --git a/drivers/sbus/char/envctrl.c b/drivers/sbus/char/envctrl.c
index 3dd7274cb0a3..66cb5dd13140 100644
--- a/drivers/sbus/char/envctrl.c
+++ b/drivers/sbus/char/envctrl.c
@@ -29,6 +29,7 @@
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 #include <asm/envctrl.h>
diff --git a/drivers/scsi/3w-9xxx.c b/drivers/scsi/3w-9xxx.c
index 6fb61c88ea11..bc9b3bed9983 100644
--- a/drivers/scsi/3w-9xxx.c
+++ b/drivers/scsi/3w-9xxx.c
@@ -84,6 +84,7 @@
 #include <linux/interrupt.h>
 #include <linux/moduleparam.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/pci.h>
diff --git a/drivers/scsi/3w-sas.c b/drivers/scsi/3w-sas.c
index caa6713a62a4..d7836861e7a7 100644
--- a/drivers/scsi/3w-sas.c
+++ b/drivers/scsi/3w-sas.c
@@ -56,6 +56,7 @@
 #include <linux/interrupt.h>
 #include <linux/moduleparam.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/pci.h>
diff --git a/drivers/scsi/3w-xxxx.c b/drivers/scsi/3w-xxxx.c
index 2c0fb6da0e60..540d440d51bf 100644
--- a/drivers/scsi/3w-xxxx.c
+++ b/drivers/scsi/3w-xxxx.c
@@ -202,6 +202,7 @@
 #include <linux/interrupt.h>
 #include <linux/moduleparam.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/gfp.h>
diff --git a/drivers/scsi/BusLogic.c b/drivers/scsi/BusLogic.c
index 72ceaf650b0d..a4d960827187 100644
--- a/drivers/scsi/BusLogic.c
+++ b/drivers/scsi/BusLogic.c
@@ -25,6 +25,8 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for get_options()
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/blkdev.h>
 #include <linux/delay.h>
@@ -33,6 +35,7 @@
 #include <linux/stat.h>
 #include <linux/pci.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/jiffies.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
diff --git a/drivers/scsi/aacraid/aachba.c b/drivers/scsi/aacraid/aachba.c
index b22857c6f3f4..e02a39cb428e 100644
--- a/drivers/scsi/aacraid/aachba.c
+++ b/drivers/scsi/aacraid/aachba.c
@@ -18,6 +18,7 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/spinlock.h>
diff --git a/drivers/scsi/aacraid/commctrl.c b/drivers/scsi/aacraid/commctrl.c
index e7cc927ed952..a6f26d57e500 100644
--- a/drivers/scsi/aacraid/commctrl.c
+++ b/drivers/scsi/aacraid/commctrl.c
@@ -18,6 +18,7 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/spinlock.h>
diff --git a/drivers/scsi/aacraid/linit.c b/drivers/scsi/aacraid/linit.c
index 68f4dbcfff49..d944240d9838 100644
--- a/drivers/scsi/aacraid/linit.c
+++ b/drivers/scsi/aacraid/linit.c
@@ -29,6 +29,7 @@
 #include <linux/slab.h>
 #include <linux/mutex.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls.h>
 #include <linux/delay.h>
 #include <linux/kthread.h>
diff --git a/drivers/scsi/aacraid/src.c b/drivers/scsi/aacraid/src.c
index 11ef58204e96..a87228acadc9 100644
--- a/drivers/scsi/aacraid/src.c
+++ b/drivers/scsi/aacraid/src.c
@@ -23,6 +23,7 @@
 #include <linux/spinlock.h>
 #include <linux/slab.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/completion.h>
 #include <linux/time.h>
diff --git a/drivers/scsi/advansys.c b/drivers/scsi/advansys.c
index ab066bb27a57..191c3a2c47c9 100644
--- a/drivers/scsi/advansys.c
+++ b/drivers/scsi/advansys.c
@@ -16,6 +16,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/types.h>
diff --git a/drivers/scsi/aha152x.c b/drivers/scsi/aha152x.c
index 055adb349b0e..dd9c1f601dce 100644
--- a/drivers/scsi/aha152x.c
+++ b/drivers/scsi/aha152x.c
@@ -226,6 +226,7 @@
 
 #include <linux/module.h>
 #include <asm/irq.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/blkdev.h>
 #include <linux/completion.h>
diff --git a/drivers/scsi/aha1542.c b/drivers/scsi/aha1542.c
index 9503996c6325..9ff5a7a54c32 100644
--- a/drivers/scsi/aha1542.c
+++ b/drivers/scsi/aha1542.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/delay.h>
diff --git a/drivers/scsi/aic7xxx/aic7770_osm.c b/drivers/scsi/aic7xxx/aic7770_osm.c
index a19cdd87c453..3a5262ae7993 100644
--- a/drivers/scsi/aic7xxx/aic7770_osm.c
+++ b/drivers/scsi/aic7xxx/aic7770_osm.c
@@ -40,6 +40,7 @@
  */
 
 #include "aic7xxx_osm.h"
+#include <linux/sprintf.h>
 
 #include <linux/device.h>
 #include <linux/eisa.h>
diff --git a/drivers/scsi/aic7xxx/aic79xx_core.c b/drivers/scsi/aic7xxx/aic79xx_core.c
index 3e3100dbfda3..e0a1d6f3e5e8 100644
--- a/drivers/scsi/aic7xxx/aic79xx_core.c
+++ b/drivers/scsi/aic7xxx/aic79xx_core.c
@@ -43,6 +43,7 @@
 #include "aic79xx_osm.h"
 #include "aic79xx_inline.h"
 #include "aicasm/aicasm_insformat.h"
+#include <linux/sprintf.h>
 
 /***************************** Lookup Tables **********************************/
 static const char *const ahd_chip_names[] =
diff --git a/drivers/scsi/aic7xxx/aic79xx_osm.c b/drivers/scsi/aic7xxx/aic79xx_osm.c
index 4202059815a0..c45197bd1038 100644
--- a/drivers/scsi/aic7xxx/aic79xx_osm.c
+++ b/drivers/scsi/aic7xxx/aic79xx_osm.c
@@ -44,6 +44,9 @@
 
 #include "aic79xx_osm.h"
 #include "aic79xx_inline.h"
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <scsi/scsicam.h>
 
 static struct scsi_transport_template *ahd_linux_transport_template = NULL;
diff --git a/drivers/scsi/aic7xxx/aic79xx_osm_pci.c b/drivers/scsi/aic7xxx/aic79xx_osm_pci.c
index b92e2e3c358a..99a1ce014d6e 100644
--- a/drivers/scsi/aic7xxx/aic79xx_osm_pci.c
+++ b/drivers/scsi/aic7xxx/aic79xx_osm_pci.c
@@ -42,6 +42,7 @@
 #include "aic79xx_osm.h"
 #include "aic79xx_inline.h"
 #include "aic79xx_pci.h"
+#include <linux/sprintf.h>
 
 /* Define the macro locally since it's different for different class of chips.
  */
diff --git a/drivers/scsi/aic7xxx/aic7xxx_core.c b/drivers/scsi/aic7xxx/aic7xxx_core.c
index a396f048a031..d71cf681007c 100644
--- a/drivers/scsi/aic7xxx/aic7xxx_core.c
+++ b/drivers/scsi/aic7xxx/aic7xxx_core.c
@@ -43,6 +43,7 @@
 #include "aic7xxx_osm.h"
 #include "aic7xxx_inline.h"
 #include "aicasm/aicasm_insformat.h"
+#include <linux/sprintf.h>
 
 /***************************** Lookup Tables **********************************/
 static const char *const ahc_chip_names[] = {
diff --git a/drivers/scsi/aic7xxx/aic7xxx_osm.c b/drivers/scsi/aic7xxx/aic7xxx_osm.c
index b0c4f2345321..7f5d9e2fd43c 100644
--- a/drivers/scsi/aic7xxx/aic7xxx_osm.c
+++ b/drivers/scsi/aic7xxx/aic7xxx_osm.c
@@ -122,6 +122,9 @@
 
 #include "aic7xxx_osm.h"
 #include "aic7xxx_inline.h"
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <scsi/scsicam.h>
 
 static struct scsi_transport_template *ahc_linux_transport_template = NULL;
diff --git a/drivers/scsi/aic7xxx/aic7xxx_osm_pci.c b/drivers/scsi/aic7xxx/aic7xxx_osm_pci.c
index 198440dc0918..85f7a84da625 100644
--- a/drivers/scsi/aic7xxx/aic7xxx_osm_pci.c
+++ b/drivers/scsi/aic7xxx/aic7xxx_osm_pci.c
@@ -41,6 +41,7 @@
 
 #include "aic7xxx_osm.h"
 #include "aic7xxx_pci.h"
+#include <linux/sprintf.h>
 
 /* Define the macro locally since it's different for different class of chips.
 */
diff --git a/drivers/scsi/aic7xxx/aicasm/aicasm.c b/drivers/scsi/aic7xxx/aicasm/aicasm.c
index cd692a4c5f85..33d11f3d80c3 100644
--- a/drivers/scsi/aic7xxx/aicasm/aicasm.c
+++ b/drivers/scsi/aic7xxx/aicasm/aicasm.c
@@ -43,6 +43,7 @@
  */
 #include <sys/types.h>
 #include <sys/mman.h>
+#include <linux/sprintf.h>
 
 #include <ctype.h>
 #include <inttypes.h>
diff --git a/drivers/scsi/aic7xxx/aicasm/aicasm_gram.y b/drivers/scsi/aic7xxx/aicasm/aicasm_gram.y
index 65182ad9cdf8..edcaa79f0b32 100644
--- a/drivers/scsi/aic7xxx/aicasm/aicasm_gram.y
+++ b/drivers/scsi/aic7xxx/aicasm/aicasm_gram.y
@@ -44,6 +44,7 @@
  */
 
 #include <sys/types.h>
+#include <linux/sprintf.h>
 
 #include <inttypes.h>
 #include <regex.h>
diff --git a/drivers/scsi/aic7xxx/aicasm/aicasm_macro_scan.l b/drivers/scsi/aic7xxx/aicasm/aicasm_macro_scan.l
index 98e9959c6907..4768a753e4f2 100644
--- a/drivers/scsi/aic7xxx/aicasm/aicasm_macro_scan.l
+++ b/drivers/scsi/aic7xxx/aicasm/aicasm_macro_scan.l
@@ -44,6 +44,7 @@
  */
 
 #include <sys/types.h>
+#include <linux/sprintf.h>
 
 #include <inttypes.h>
 #include <limits.h>
diff --git a/drivers/scsi/aic7xxx/aicasm/aicasm_scan.l b/drivers/scsi/aic7xxx/aicasm/aicasm_scan.l
index c78d4f68eea5..8ed3074e19da 100644
--- a/drivers/scsi/aic7xxx/aicasm/aicasm_scan.l
+++ b/drivers/scsi/aic7xxx/aicasm/aicasm_scan.l
@@ -44,6 +44,7 @@
  */
 
 #include <sys/types.h>
+#include <linux/sprintf.h>
 
 #include <inttypes.h>
 #include <limits.h>
diff --git a/drivers/scsi/aic94xx/aic94xx_init.c b/drivers/scsi/aic94xx/aic94xx_init.c
index 8a3340d8d7ad..8801c6abc72c 100644
--- a/drivers/scsi/aic94xx/aic94xx_init.c
+++ b/drivers/scsi/aic94xx/aic94xx_init.c
@@ -13,6 +13,7 @@
 #include <linux/delay.h>
 #include <linux/firmware.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi_host.h>
 
diff --git a/drivers/scsi/aic94xx/aic94xx_task.c b/drivers/scsi/aic94xx/aic94xx_task.c
index 4bfd03724ad6..022d8a8c234e 100644
--- a/drivers/scsi/aic94xx/aic94xx_task.c
+++ b/drivers/scsi/aic94xx/aic94xx_task.c
@@ -10,6 +10,7 @@
 #include "aic94xx.h"
 #include "aic94xx_sas.h"
 #include "aic94xx_hwi.h"
+#include <linux/completion.h>
 
 static void asd_unbuild_ata_ascb(struct asd_ascb *a);
 static void asd_unbuild_smp_ascb(struct asd_ascb *a);
diff --git a/drivers/scsi/aic94xx/aic94xx_tmf.c b/drivers/scsi/aic94xx/aic94xx_tmf.c
index 27d32b8c2987..8d9e52f55bc5 100644
--- a/drivers/scsi/aic94xx/aic94xx_tmf.c
+++ b/drivers/scsi/aic94xx/aic94xx_tmf.c
@@ -11,6 +11,7 @@
 #include "aic94xx.h"
 #include "aic94xx_sas.h"
 #include "aic94xx_hwi.h"
+#include <linux/completion.h>
 
 /* ---------- Internal enqueue ---------- */
 
diff --git a/drivers/scsi/arcmsr/arcmsr_attr.c b/drivers/scsi/arcmsr/arcmsr_attr.c
index baeb5e795690..7052bd226754 100644
--- a/drivers/scsi/arcmsr/arcmsr_attr.c
+++ b/drivers/scsi/arcmsr/arcmsr_attr.c
@@ -51,6 +51,7 @@
 #include <linux/delay.h>
 #include <linux/pci.h>
 #include <linux/circ_buf.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/arcmsr/arcmsr_hba.c b/drivers/scsi/arcmsr/arcmsr_hba.c
index ad227e6cb10e..b172bd037495 100644
--- a/drivers/scsi/arcmsr/arcmsr_hba.c
+++ b/drivers/scsi/arcmsr/arcmsr_hba.c
@@ -49,8 +49,10 @@
 #include <linux/spinlock.h>
 #include <linux/pci_ids.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/moduleparam.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/scsi/arm/acornscsi.c b/drivers/scsi/arm/acornscsi.c
index 0b046e4b395c..84d2cf685261 100644
--- a/drivers/scsi/arm/acornscsi.c
+++ b/drivers/scsi/arm/acornscsi.c
@@ -111,6 +111,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/signal.h>
 #include <linux/errno.h>
diff --git a/drivers/scsi/arm/arxescsi.c b/drivers/scsi/arm/arxescsi.c
index 925d0bd68aa5..b4f8602cca3b 100644
--- a/drivers/scsi/arm/arxescsi.c
+++ b/drivers/scsi/arm/arxescsi.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ioport.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/scsi/arm/cumana_2.c b/drivers/scsi/arm/cumana_2.c
index c5d8f4313b31..d43d36ccf649 100644
--- a/drivers/scsi/arm/cumana_2.c
+++ b/drivers/scsi/arm/cumana_2.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ioport.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/scsi/arm/eesox.c b/drivers/scsi/arm/eesox.c
index b3ec7635bc72..3fee943bce54 100644
--- a/drivers/scsi/arm/eesox.c
+++ b/drivers/scsi/arm/eesox.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ioport.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/scsi/arm/fas216.c b/drivers/scsi/arm/fas216.c
index 4ce0b2d73614..8224ed913d30 100644
--- a/drivers/scsi/arm/fas216.c
+++ b/drivers/scsi/arm/fas216.c
@@ -34,6 +34,7 @@
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ioport.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/scsi/arm/powertec.c b/drivers/scsi/arm/powertec.c
index 3b5991427886..21230108dd2d 100644
--- a/drivers/scsi/arm/powertec.c
+++ b/drivers/scsi/arm/powertec.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ioport.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/scsi/be2iscsi/be_cmds.c b/drivers/scsi/be2iscsi/be_cmds.c
index 0b59b63bce79..216e9bfce996 100644
--- a/drivers/scsi/be2iscsi/be_cmds.c
+++ b/drivers/scsi/be2iscsi/be_cmds.c
@@ -8,6 +8,8 @@
  */
 
 #include <scsi/iscsi_proto.h>
+#include <linux/sprintf.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "be_main.h"
 #include "be.h"
diff --git a/drivers/scsi/be2iscsi/be_iscsi.c b/drivers/scsi/be2iscsi/be_iscsi.c
index 8d374ae863ba..58ba4190049a 100644
--- a/drivers/scsi/be2iscsi/be_iscsi.c
+++ b/drivers/scsi/be2iscsi/be_iscsi.c
@@ -20,6 +20,7 @@
 #include <scsi/scsi_netlink.h>
 #include <net/netlink.h>
 #include <scsi/scsi.h>
+#include <linux/sprintf.h>
 
 #include "be_iscsi.h"
 
diff --git a/drivers/scsi/be2iscsi/be_main.c b/drivers/scsi/be2iscsi/be_main.c
index 06acb5ff609e..02ca392289b3 100644
--- a/drivers/scsi/be2iscsi/be_main.c
+++ b/drivers/scsi/be2iscsi/be_main.c
@@ -25,10 +25,12 @@
 
 #include <linux/reboot.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/blkdev.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/semaphore.h>
diff --git a/drivers/scsi/be2iscsi/be_mgmt.c b/drivers/scsi/be2iscsi/be_mgmt.c
index 4e899ec1477d..6b11f18ed8da 100644
--- a/drivers/scsi/be2iscsi/be_mgmt.c
+++ b/drivers/scsi/be2iscsi/be_mgmt.c
@@ -24,6 +24,8 @@
  */
 
 #include <linux/bsg-lib.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 #include <scsi/scsi_transport_iscsi.h>
 #include <scsi/scsi_bsg_iscsi.h>
 #include "be_mgmt.h"
diff --git a/drivers/scsi/bfa/bfa_core.c b/drivers/scsi/bfa/bfa_core.c
index 6846ca8f7313..572f32252bfe 100644
--- a/drivers/scsi/bfa/bfa_core.c
+++ b/drivers/scsi/bfa/bfa_core.c
@@ -11,6 +11,7 @@
 #include "bfad_drv.h"
 #include "bfa_modules.h"
 #include "bfi_reg.h"
+#include <linux/completion.h>
 
 BFA_TRC_FILE(HAL, CORE);
 
diff --git a/drivers/scsi/bfa/bfa_cs.h b/drivers/scsi/bfa/bfa_cs.h
index 6b606bf589b4..e8c4129e99f8 100644
--- a/drivers/scsi/bfa/bfa_cs.h
+++ b/drivers/scsi/bfa/bfa_cs.h
@@ -16,6 +16,7 @@
 #define __BFA_CS_H__
 
 #include "bfad_drv.h"
+#include <linux/sprintf.h>
 
 /*
  * BFA TRC
diff --git a/drivers/scsi/bfa/bfa_fcs.c b/drivers/scsi/bfa/bfa_fcs.c
index 5023c0ab4277..c0e460615217 100644
--- a/drivers/scsi/bfa/bfa_fcs.c
+++ b/drivers/scsi/bfa/bfa_fcs.c
@@ -16,6 +16,7 @@
 #include "bfad_im.h"
 #include "bfa_fcs.h"
 #include "bfa_fcbuild.h"
+#include <linux/completion.h>
 
 BFA_TRC_FILE(FCS, FCS);
 
diff --git a/drivers/scsi/bfa/bfa_fcs_lport.c b/drivers/scsi/bfa/bfa_fcs_lport.c
index 008afd817087..042e0bb37386 100644
--- a/drivers/scsi/bfa/bfa_fcs_lport.c
+++ b/drivers/scsi/bfa/bfa_fcs_lport.c
@@ -13,6 +13,7 @@
 #include "bfa_fcs.h"
 #include "bfa_fcbuild.h"
 #include "bfa_fc.h"
+#include <linux/completion.h>
 
 BFA_TRC_FILE(FCS, PORT);
 
diff --git a/drivers/scsi/bfa/bfa_ioc.c b/drivers/scsi/bfa/bfa_ioc.c
index e1ed1424fddb..ec079b153e8b 100644
--- a/drivers/scsi/bfa/bfa_ioc.c
+++ b/drivers/scsi/bfa/bfa_ioc.c
@@ -15,6 +15,7 @@
 #include "bfa_defs.h"
 #include "bfa_defs_svc.h"
 #include "bfi.h"
+#include <linux/sprintf.h>
 
 BFA_TRC_FILE(CNA, IOC);
 
diff --git a/drivers/scsi/bfa/bfad.c b/drivers/scsi/bfa/bfad.c
index 62cb7a864fd5..b5394e128243 100644
--- a/drivers/scsi/bfa/bfad.c
+++ b/drivers/scsi/bfa/bfad.c
@@ -19,8 +19,10 @@
 #include <linux/fs.h>
 #include <linux/pci.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/fcntl.h>
+#include <linux/completion.h>
 
 #include "bfad_drv.h"
 #include "bfad_im.h"
diff --git a/drivers/scsi/bfa/bfad_attr.c b/drivers/scsi/bfa/bfad_attr.c
index e96e4b6df265..3cfa6a23e29b 100644
--- a/drivers/scsi/bfa/bfad_attr.c
+++ b/drivers/scsi/bfa/bfad_attr.c
@@ -14,6 +14,8 @@
 
 #include "bfad_drv.h"
 #include "bfad_im.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /*
  * FC transport template entry, get SCSI target port ID.
diff --git a/drivers/scsi/bfa/bfad_bsg.c b/drivers/scsi/bfa/bfad_bsg.c
index d4ceca2d435e..b6127668f021 100644
--- a/drivers/scsi/bfa/bfad_bsg.c
+++ b/drivers/scsi/bfa/bfad_bsg.c
@@ -12,6 +12,7 @@
 #include "bfad_drv.h"
 #include "bfad_im.h"
 #include "bfad_bsg.h"
+#include <linux/completion.h>
 
 BFA_TRC_FILE(LDRV, BSG);
 
diff --git a/drivers/scsi/bfa/bfad_debugfs.c b/drivers/scsi/bfa/bfad_debugfs.c
index 52db147d9979..d90688315bc4 100644
--- a/drivers/scsi/bfa/bfad_debugfs.c
+++ b/drivers/scsi/bfa/bfad_debugfs.c
@@ -10,6 +10,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include "bfad_drv.h"
 #include "bfad_im.h"
diff --git a/drivers/scsi/bfa/bfad_im.c b/drivers/scsi/bfa/bfad_im.c
index a9d3d8562d3c..d3a628951c21 100644
--- a/drivers/scsi/bfa/bfad_im.c
+++ b/drivers/scsi/bfa/bfad_im.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include "bfad_drv.h"
 #include "bfad_im.h"
diff --git a/drivers/scsi/bnx2fc/bnx2fc_fcoe.c b/drivers/scsi/bnx2fc/bnx2fc_fcoe.c
index 1078c20c5ef6..9727c4d67f08 100644
--- a/drivers/scsi/bnx2fc/bnx2fc_fcoe.c
+++ b/drivers/scsi/bnx2fc/bnx2fc_fcoe.c
@@ -15,6 +15,9 @@
  */
 
 #include "bnx2fc.h"
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/ethtool.h>
 
diff --git a/drivers/scsi/bnx2fc/bnx2fc_hwi.c b/drivers/scsi/bnx2fc/bnx2fc_hwi.c
index 090d436bcef8..6fcbe30d8239 100644
--- a/drivers/scsi/bnx2fc/bnx2fc_hwi.c
+++ b/drivers/scsi/bnx2fc/bnx2fc_hwi.c
@@ -14,6 +14,7 @@
  */
 
 #include "bnx2fc.h"
+#include <linux/completion.h>
 
 DECLARE_PER_CPU(struct bnx2fc_percpu_s, bnx2fc_percpu);
 
diff --git a/drivers/scsi/bnx2fc/bnx2fc_io.c b/drivers/scsi/bnx2fc/bnx2fc_io.c
index 33057908f147..8d9b7ebecd32 100644
--- a/drivers/scsi/bnx2fc/bnx2fc_io.c
+++ b/drivers/scsi/bnx2fc/bnx2fc_io.c
@@ -13,6 +13,7 @@
  */
 
 #include "bnx2fc.h"
+#include <linux/completion.h>
 
 #define RESERVE_FREE_LIST_INDEX num_possible_cpus()
 
diff --git a/drivers/scsi/bnx2fc/bnx2fc_tgt.c b/drivers/scsi/bnx2fc/bnx2fc_tgt.c
index 2c246e80c1c4..df1e76420cce 100644
--- a/drivers/scsi/bnx2fc/bnx2fc_tgt.c
+++ b/drivers/scsi/bnx2fc/bnx2fc_tgt.c
@@ -14,6 +14,7 @@
  */
 
 #include "bnx2fc.h"
+#include <linux/completion.h>
 static void bnx2fc_upld_timer(struct timer_list *t);
 static void bnx2fc_ofld_timer(struct timer_list *t);
 static int bnx2fc_init_tgt(struct bnx2fc_rport *tgt,
diff --git a/drivers/scsi/bnx2i/bnx2i_hwi.c b/drivers/scsi/bnx2i/bnx2i_hwi.c
index 6c864b093ac9..ac737aafe2c2 100644
--- a/drivers/scsi/bnx2i/bnx2i_hwi.c
+++ b/drivers/scsi/bnx2i/bnx2i_hwi.c
@@ -18,6 +18,7 @@
 #include <scsi/scsi_tcq.h>
 #include <scsi/libiscsi.h>
 #include "bnx2i.h"
+#include <linux/completion.h>
 
 DECLARE_PER_CPU(struct bnx2i_percpu_s, bnx2i_percpu);
 
diff --git a/drivers/scsi/bnx2i/bnx2i_iscsi.c b/drivers/scsi/bnx2i/bnx2i_iscsi.c
index 9971f32a663c..74bb4203e802 100644
--- a/drivers/scsi/bnx2i/bnx2i_iscsi.c
+++ b/drivers/scsi/bnx2i/bnx2i_iscsi.c
@@ -16,9 +16,11 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_tcq.h>
 #include <scsi/libiscsi.h>
 #include "bnx2i.h"
+#include <linux/completion.h>
 
 struct scsi_transport_template *bnx2i_scsi_xport_template;
 struct iscsi_transport bnx2i_iscsi_transport;
diff --git a/drivers/scsi/bnx2i/bnx2i_sysfs.c b/drivers/scsi/bnx2i/bnx2i_sysfs.c
index d6b0bbb5176b..85f7c462cf5d 100644
--- a/drivers/scsi/bnx2i/bnx2i_sysfs.c
+++ b/drivers/scsi/bnx2i/bnx2i_sysfs.c
@@ -13,6 +13,7 @@
  */
 
 #include "bnx2i.h"
+#include <linux/sprintf.h>
 
 /**
  * bnx2i_dev_to_hba - maps dev pointer to adapter struct
diff --git a/drivers/scsi/ch.c b/drivers/scsi/ch.c
index 1befcd5b2a0f..4480bffb826f 100644
--- a/drivers/scsi/ch.c
+++ b/drivers/scsi/ch.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/mm.h>
 #include <linux/major.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/interrupt.h>
diff --git a/drivers/scsi/csiostor/csio_hw.c b/drivers/scsi/csiostor/csio_hw.c
index e43c5413ce29..0ae7add7671c 100644
--- a/drivers/scsi/csiostor/csio_hw.c
+++ b/drivers/scsi/csiostor/csio_hw.c
@@ -35,6 +35,7 @@
 #include <linux/pci.h>
 #include <linux/pci_regs.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/delay.h>
 #include <linux/string.h>
diff --git a/drivers/scsi/csiostor/csio_init.c b/drivers/scsi/csiostor/csio_init.c
index d649b7a2a879..6cd385bf8cc8 100644
--- a/drivers/scsi/csiostor/csio_init.c
+++ b/drivers/scsi/csiostor/csio_init.c
@@ -43,6 +43,7 @@
 #include <linux/kdebug.h>
 #include <linux/seq_file.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/export.h>
 
diff --git a/drivers/scsi/csiostor/csio_isr.c b/drivers/scsi/csiostor/csio_isr.c
index b2540402fafc..c3bb606a5bf9 100644
--- a/drivers/scsi/csiostor/csio_isr.c
+++ b/drivers/scsi/csiostor/csio_isr.c
@@ -36,6 +36,7 @@
 #include <linux/pci.h>
 #include <linux/interrupt.h>
 #include <linux/cpumask.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include "csio_init.h"
diff --git a/drivers/scsi/csiostor/csio_lnode.c b/drivers/scsi/csiostor/csio_lnode.c
index d5ac93897023..c1362182048f 100644
--- a/drivers/scsi/csiostor/csio_lnode.c
+++ b/drivers/scsi/csiostor/csio_lnode.c
@@ -35,6 +35,7 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <scsi/scsi_device.h>
 #include <scsi/scsi_transport_fc.h>
diff --git a/drivers/scsi/csiostor/csio_scsi.c b/drivers/scsi/csiostor/csio_scsi.c
index 05e1a63e00c3..6e68be32330a 100644
--- a/drivers/scsi/csiostor/csio_scsi.c
+++ b/drivers/scsi/csiostor/csio_scsi.c
@@ -37,8 +37,10 @@
 #include <linux/ctype.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/export.h>
 #include <linux/module.h>
 #include <asm/unaligned.h>
diff --git a/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c b/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
index c07d2e3b4bcf..9cb64be40a1c 100644
--- a/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
+++ b/drivers/scsi/cxgbi/cxgb4i/cxgb4i.c
@@ -21,6 +21,7 @@
 #include <net/dst.h>
 #include <linux/netdevice.h>
 #include <net/addrconf.h>
+#include <linux/completion.h>
 
 #include "t4_regs.h"
 #include "t4_msg.h"
diff --git a/drivers/scsi/cxgbi/libcxgbi.c b/drivers/scsi/cxgbi/libcxgbi.c
index bf75940f2be1..ab1fc05e1fc0 100644
--- a/drivers/scsi/cxgbi/libcxgbi.c
+++ b/drivers/scsi/cxgbi/libcxgbi.c
@@ -17,6 +17,7 @@
 #include <linux/crypto.h>
 #include <linux/scatterlist.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_host.h>
@@ -27,6 +28,7 @@
 #include <net/ipv6.h>
 #include <net/ip6_route.h>
 #include <net/addrconf.h>
+#include <linux/completion.h>
 
 #include <linux/inetdevice.h>	/* ip_dev_find */
 #include <linux/module.h>
diff --git a/drivers/scsi/cxlflash/main.c b/drivers/scsi/cxlflash/main.c
index debd36974119..5b09e611d34f 100644
--- a/drivers/scsi/cxlflash/main.c
+++ b/drivers/scsi/cxlflash/main.c
@@ -9,9 +9,12 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <asm/unaligned.h>
 
diff --git a/drivers/scsi/cxlflash/ocxl_hw.c b/drivers/scsi/cxlflash/ocxl_hw.c
index 6542818e595a..58eb2ef0b332 100644
--- a/drivers/scsi/cxlflash/ocxl_hw.c
+++ b/drivers/scsi/cxlflash/ocxl_hw.c
@@ -18,6 +18,7 @@
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
 #include <asm/xive.h>
+#include <linux/sprintf.h>
 #include <misc/ocxl.h>
 
 #include <uapi/misc/cxl.h>
diff --git a/drivers/scsi/cxlflash/superpipe.c b/drivers/scsi/cxlflash/superpipe.c
index e1b55b03e812..1887aec44c0e 100644
--- a/drivers/scsi/cxlflash/superpipe.c
+++ b/drivers/scsi/cxlflash/superpipe.c
@@ -11,6 +11,7 @@
 #include <linux/delay.h>
 #include <linux/file.h>
 #include <linux/interrupt.h>
+#include <linux/kref.h>
 #include <linux/pci.h>
 #include <linux/syscalls.h>
 #include <asm/unaligned.h>
diff --git a/drivers/scsi/device_handler/scsi_dh_alua.c b/drivers/scsi/device_handler/scsi_dh_alua.c
index a226dc1b65d7..b277d67b9473 100644
--- a/drivers/scsi/device_handler/scsi_dh_alua.c
+++ b/drivers/scsi/device_handler/scsi_dh_alua.c
@@ -9,6 +9,7 @@
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_proto.h>
 #include <scsi/scsi_dbg.h>
diff --git a/drivers/scsi/device_handler/scsi_dh_emc.c b/drivers/scsi/device_handler/scsi_dh_emc.c
index 3cf88db2d5b2..e0f1fe37549b 100644
--- a/drivers/scsi/device_handler/scsi_dh_emc.c
+++ b/drivers/scsi/device_handler/scsi_dh_emc.c
@@ -9,6 +9,7 @@
  */
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_eh.h>
 #include <scsi/scsi_dh.h>
diff --git a/drivers/scsi/elx/efct/efct_driver.c b/drivers/scsi/elx/efct/efct_driver.c
index 49fd2cfed70c..90f20fc3285d 100644
--- a/drivers/scsi/elx/efct/efct_driver.c
+++ b/drivers/scsi/elx/efct/efct_driver.c
@@ -5,6 +5,8 @@
  */
 
 #include "efct_driver.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "efct_hw.h"
 #include "efct_unsol.h"
diff --git a/drivers/scsi/elx/efct/efct_hw.c b/drivers/scsi/elx/efct/efct_hw.c
index 5a5525054d71..c49768b8375d 100644
--- a/drivers/scsi/elx/efct/efct_hw.c
+++ b/drivers/scsi/elx/efct/efct_hw.c
@@ -7,6 +7,8 @@
 #include "efct_driver.h"
 #include "efct_hw.h"
 #include "efct_unsol.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 
 struct efct_hw_link_stat_cb_arg {
 	void (*cb)(int status, u32 num_counters,
diff --git a/drivers/scsi/elx/efct/efct_hw_queues.c b/drivers/scsi/elx/efct/efct_hw_queues.c
index 3a1d1a5864a3..0c32f77b28d5 100644
--- a/drivers/scsi/elx/efct/efct_hw_queues.c
+++ b/drivers/scsi/elx/efct/efct_hw_queues.c
@@ -7,6 +7,7 @@
 #include "efct_driver.h"
 #include "efct_hw.h"
 #include "efct_unsol.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 int
 efct_hw_init_queues(struct efct_hw *hw)
diff --git a/drivers/scsi/elx/efct/efct_lio.c b/drivers/scsi/elx/efct/efct_lio.c
index 6a6ec32c46bd..5c57821cf031 100644
--- a/drivers/scsi/elx/efct/efct_lio.c
+++ b/drivers/scsi/elx/efct/efct_lio.c
@@ -8,6 +8,8 @@
 #include <target/target_core_fabric.h>
 #include "efct_driver.h"
 #include "efct_lio.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /*
  * lio_wq is used to call the LIO backed during creation or deletion of
diff --git a/drivers/scsi/elx/efct/efct_scsi.c b/drivers/scsi/elx/efct/efct_scsi.c
index afb154992053..f0f0b696fd77 100644
--- a/drivers/scsi/elx/efct/efct_scsi.c
+++ b/drivers/scsi/elx/efct/efct_scsi.c
@@ -6,6 +6,7 @@
 
 #include "efct_driver.h"
 #include "efct_hw.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define enable_tsend_auto_resp(efct)	1
 #define enable_treceive_auto_resp(efct)	0
diff --git a/drivers/scsi/elx/efct/efct_xport.c b/drivers/scsi/elx/efct/efct_xport.c
index cf4dced20b8b..b3c7960e5871 100644
--- a/drivers/scsi/elx/efct/efct_xport.c
+++ b/drivers/scsi/elx/efct/efct_xport.c
@@ -6,6 +6,8 @@
 
 #include "efct_driver.h"
 #include "efct_unsol.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static struct dentry *efct_debugfs_root;
 static atomic_t efct_debugfs_count;
diff --git a/drivers/scsi/elx/libefc/efc_domain.c b/drivers/scsi/elx/libefc/efc_domain.c
index ca9d7ff2c0d2..29363c07130f 100644
--- a/drivers/scsi/elx/libefc/efc_domain.c
+++ b/drivers/scsi/elx/libefc/efc_domain.c
@@ -9,6 +9,7 @@
  */
 
 #include "efc.h"
+#include <linux/sprintf.h>
 
 int
 efc_domain_cb(void *arg, int event, void *data)
diff --git a/drivers/scsi/elx/libefc/efc_node.c b/drivers/scsi/elx/libefc/efc_node.c
index a1b4ce6a27b4..c8a971b3b666 100644
--- a/drivers/scsi/elx/libefc/efc_node.c
+++ b/drivers/scsi/elx/libefc/efc_node.c
@@ -5,6 +5,7 @@
  */
 
 #include "efc.h"
+#include <linux/sprintf.h>
 
 int
 efc_remote_node_cb(void *arg, int event, void *data)
diff --git a/drivers/scsi/elx/libefc/efc_nport.c b/drivers/scsi/elx/libefc/efc_nport.c
index 2e83a667901f..01de5c0e6106 100644
--- a/drivers/scsi/elx/libefc/efc_nport.c
+++ b/drivers/scsi/elx/libefc/efc_nport.c
@@ -26,6 +26,7 @@
  */
 
 #include "efc.h"
+#include <linux/sprintf.h>
 
 void
 efc_nport_cb(void *arg, int event, void *data)
diff --git a/drivers/scsi/elx/libefc_sli/sli4.c b/drivers/scsi/elx/libefc_sli/sli4.c
index 5e7fb110bc3f..5eed99614392 100644
--- a/drivers/scsi/elx/libefc_sli/sli4.c
+++ b/drivers/scsi/elx/libefc_sli/sli4.c
@@ -9,6 +9,7 @@
  * in this file.
  */
 #include "sli4.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static struct sli4_asic_entry_t sli4_asic_table[] = {
 	{ SLI4_ASIC_REV_B0, SLI4_ASIC_GEN_5},
diff --git a/drivers/scsi/elx/libefc_sli/sli4.h b/drivers/scsi/elx/libefc_sli/sli4.h
index 38af166cc786..b20fb6881a47 100644
--- a/drivers/scsi/elx/libefc_sli/sli4.h
+++ b/drivers/scsi/elx/libefc_sli/sli4.h
@@ -17,6 +17,7 @@
 #include "scsi/fc/fc_els.h"
 #include "scsi/fc/fc_fs.h"
 #include "../include/efc_common.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*************************************************************************
  * Common SLI-4 register offsets and field definitions
diff --git a/drivers/scsi/esas2r/esas2r_flash.c b/drivers/scsi/esas2r/esas2r_flash.c
index f910e2553fbb..b9de48f445fe 100644
--- a/drivers/scsi/esas2r/esas2r_flash.c
+++ b/drivers/scsi/esas2r/esas2r_flash.c
@@ -43,6 +43,7 @@
  */
 
 #include "esas2r.h"
+#include <linux/sprintf.h>
 
 /* local macro defs */
 #define esas2r_nvramcalc_cksum(n)     \
diff --git a/drivers/scsi/esas2r/esas2r_init.c b/drivers/scsi/esas2r/esas2r_init.c
index c1a5ab662dc8..5905625acc68 100644
--- a/drivers/scsi/esas2r/esas2r_init.c
+++ b/drivers/scsi/esas2r/esas2r_init.c
@@ -42,6 +42,8 @@
  */
 
 #include "esas2r.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 static bool esas2r_initmem_alloc(struct esas2r_adapter *a,
 				 struct esas2r_mem_desc *mem_desc,
diff --git a/drivers/scsi/esas2r/esas2r_log.c b/drivers/scsi/esas2r/esas2r_log.c
index d6c87a0bae09..08af58f167f8 100644
--- a/drivers/scsi/esas2r/esas2r_log.c
+++ b/drivers/scsi/esas2r/esas2r_log.c
@@ -42,6 +42,7 @@
  */
 
 #include "esas2r.h"
+#include <linux/sprintf.h>
 
 /*
  * this module within the driver is tasked with providing logging functionality.
diff --git a/drivers/scsi/esas2r/esas2r_main.c b/drivers/scsi/esas2r/esas2r_main.c
index f700a16cd885..6573a9b28b7e 100644
--- a/drivers/scsi/esas2r/esas2r_main.c
+++ b/drivers/scsi/esas2r/esas2r_main.c
@@ -42,6 +42,8 @@
  */
 
 #include "esas2r.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION(ESAS2R_DRVR_NAME ": " ESAS2R_LONGNAME " driver");
 MODULE_AUTHOR("ATTO Technology, Inc.");
diff --git a/drivers/scsi/esas2r/esas2r_vda.c b/drivers/scsi/esas2r/esas2r_vda.c
index 30028e56df63..b22d565ca26c 100644
--- a/drivers/scsi/esas2r/esas2r_vda.c
+++ b/drivers/scsi/esas2r/esas2r_vda.c
@@ -43,6 +43,7 @@
 /*=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=*/
 
 #include "esas2r.h"
+#include <linux/sprintf.h>
 
 static u8 esas2r_vdaioctl_versions[] = {
 	ATTO_VDA_VER_UNSUPPORTED,
diff --git a/drivers/scsi/fcoe/fcoe.c b/drivers/scsi/fcoe/fcoe.c
index f1429f270170..31cfbea763d3 100644
--- a/drivers/scsi/fcoe/fcoe.c
+++ b/drivers/scsi/fcoe/fcoe.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/cpu.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/ctype.h>
 #include <linux/workqueue.h>
diff --git a/drivers/scsi/fcoe/fcoe_sysfs.c b/drivers/scsi/fcoe/fcoe_sysfs.c
index 453665ac6020..d5ebbaf0b061 100644
--- a/drivers/scsi/fcoe/fcoe_sysfs.c
+++ b/drivers/scsi/fcoe/fcoe_sysfs.c
@@ -6,10 +6,12 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/etherdevice.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 
 #include <scsi/fcoe_sysfs.h>
diff --git a/drivers/scsi/fcoe/fcoe_transport.c b/drivers/scsi/fcoe/fcoe_transport.c
index a48d24af9ac3..2c07d420b9af 100644
--- a/drivers/scsi/fcoe/fcoe_transport.c
+++ b/drivers/scsi/fcoe/fcoe_transport.c
@@ -13,6 +13,7 @@
 #include <linux/ethtool.h>
 #include <linux/errno.h>
 #include <linux/crc32.h>
+#include <linux/sprintf.h>
 #include <scsi/libfcoe.h>
 
 #include "libfcoe.h"
diff --git a/drivers/scsi/fnic/fnic_debugfs.c b/drivers/scsi/fnic/fnic_debugfs.c
index 2619a2d4f5f1..b522e27c59ea 100644
--- a/drivers/scsi/fnic/fnic_debugfs.c
+++ b/drivers/scsi/fnic/fnic_debugfs.c
@@ -4,6 +4,8 @@
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "fnic.h"
 
diff --git a/drivers/scsi/fnic/fnic_isr.c b/drivers/scsi/fnic/fnic_isr.c
index ff85441c6cea..8897c94a182d 100644
--- a/drivers/scsi/fnic/fnic_isr.c
+++ b/drivers/scsi/fnic/fnic_isr.c
@@ -7,6 +7,7 @@
 #include <linux/errno.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <scsi/libfc.h>
 #include <scsi/fc_frame.h>
 #include "vnic_dev.h"
diff --git a/drivers/scsi/fnic/fnic_main.c b/drivers/scsi/fnic/fnic_main.c
index 5ed1d897311a..29e88f2ed4bb 100644
--- a/drivers/scsi/fnic/fnic_main.c
+++ b/drivers/scsi/fnic/fnic_main.c
@@ -5,6 +5,7 @@
  */
 #include <linux/module.h>
 #include <linux/mempool.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
diff --git a/drivers/scsi/fnic/fnic_scsi.c b/drivers/scsi/fnic/fnic_scsi.c
index 5b4768e669f0..c9adc3675e45 100644
--- a/drivers/scsi/fnic/fnic_scsi.c
+++ b/drivers/scsi/fnic/fnic_scsi.c
@@ -27,6 +27,7 @@
 #include <scsi/fc_frame.h>
 #include "fnic_io.h"
 #include "fnic.h"
+#include <linux/completion.h>
 
 const char *fnic_state_str[] = {
 	[FNIC_IN_FC_MODE] =           "FNIC_IN_FC_MODE",
diff --git a/drivers/scsi/fnic/fnic_trace.c b/drivers/scsi/fnic/fnic_trace.c
index aaa4ea02fb7c..d54d36e0eee9 100644
--- a/drivers/scsi/fnic/fnic_trace.c
+++ b/drivers/scsi/fnic/fnic_trace.c
@@ -6,6 +6,7 @@
 #include <linux/errno.h>
 #include <linux/spinlock.h>
 #include <linux/kallsyms.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/vmalloc.h>
 #include "fnic_io.h"
diff --git a/drivers/scsi/hisi_sas/hisi_sas_main.c b/drivers/scsi/hisi_sas/hisi_sas_main.c
index 097dfe4b620d..665cad61c983 100644
--- a/drivers/scsi/hisi_sas/hisi_sas_main.c
+++ b/drivers/scsi/hisi_sas/hisi_sas_main.c
@@ -5,6 +5,7 @@
  */
 
 #include "hisi_sas.h"
+#include <linux/completion.h>
 #define DRV_NAME "hisi_sas"
 
 #define DEV_IS_GONE(dev) \
diff --git a/drivers/scsi/hisi_sas/hisi_sas_v1_hw.c b/drivers/scsi/hisi_sas/hisi_sas_v1_hw.c
index 3c555579f9a1..8872326bee7d 100644
--- a/drivers/scsi/hisi_sas/hisi_sas_v1_hw.c
+++ b/drivers/scsi/hisi_sas/hisi_sas_v1_hw.c
@@ -5,6 +5,8 @@
  */
 
 #include "hisi_sas.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #define DRV_NAME "hisi_sas_v1_hw"
 
 /* global registers need init*/
diff --git a/drivers/scsi/hisi_sas/hisi_sas_v2_hw.c b/drivers/scsi/hisi_sas/hisi_sas_v2_hw.c
index 73b378837da7..621950b2261a 100644
--- a/drivers/scsi/hisi_sas/hisi_sas_v2_hw.c
+++ b/drivers/scsi/hisi_sas/hisi_sas_v2_hw.c
@@ -5,6 +5,8 @@
  */
 
 #include "hisi_sas.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #define DRV_NAME "hisi_sas_v2_hw"
 
 /* global registers need init*/
diff --git a/drivers/scsi/hisi_sas/hisi_sas_v3_hw.c b/drivers/scsi/hisi_sas/hisi_sas_v3_hw.c
index 7d2a33514538..3d0ab961a378 100644
--- a/drivers/scsi/hisi_sas/hisi_sas_v3_hw.c
+++ b/drivers/scsi/hisi_sas/hisi_sas_v3_hw.c
@@ -5,6 +5,10 @@
 
 #include <linux/sched/clock.h>
 #include "hisi_sas.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #define DRV_NAME "hisi_sas_v3_hw"
 
 /* global registers need init */
diff --git a/drivers/scsi/hosts.c b/drivers/scsi/hosts.c
index d7f51b84f3c7..983369844840 100644
--- a/drivers/scsi/hosts.c
+++ b/drivers/scsi/hosts.c
@@ -24,9 +24,11 @@
 
 #include <linux/module.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/init.h>
diff --git a/drivers/scsi/hpsa.c b/drivers/scsi/hpsa.c
index af18d20f3079..4c9f0338e0de 100644
--- a/drivers/scsi/hpsa.c
+++ b/drivers/scsi/hpsa.c
@@ -20,6 +20,7 @@
 
 #include <linux/module.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/kernel.h>
@@ -31,6 +32,7 @@
 #include <linux/spinlock.h>
 #include <linux/compat.h>
 #include <linux/blktrace_api.h>
+#include <linux/completion.h>
 #include <linux/uaccess.h>
 #include <linux/io.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/scsi/hptiop.c b/drivers/scsi/hptiop.c
index f5334ccbf2ca..eac492dfc176 100644
--- a/drivers/scsi/hptiop.c
+++ b/drivers/scsi/hptiop.c
@@ -8,6 +8,7 @@
  * For more information, visit http://www.highpoint-tech.com
  */
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
diff --git a/drivers/scsi/ibmvscsi/ibmvfc.c b/drivers/scsi/ibmvscsi/ibmvfc.c
index 05b126bfd18b..0f5e1cb0147c 100644
--- a/drivers/scsi/ibmvscsi/ibmvfc.c
+++ b/drivers/scsi/ibmvscsi/ibmvfc.c
@@ -14,15 +14,19 @@
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/irqdomain.h>
+#include <linux/kref.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/pm.h>
+#include <linux/sprintf.h>
 #include <linux/stringify.h>
 #include <linux/bsg-lib.h>
 #include <asm/firmware.h>
 #include <asm/irq.h>
 #include <asm/vio.h>
+#include <linux/completion.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_host.h>
diff --git a/drivers/scsi/ibmvscsi/ibmvscsi.c b/drivers/scsi/ibmvscsi/ibmvscsi.c
index 71f3e9563520..6451e89f7f9d 100644
--- a/drivers/scsi/ibmvscsi/ibmvscsi.c
+++ b/drivers/scsi/ibmvscsi/ibmvscsi.c
@@ -56,6 +56,8 @@
 #include <linux/kthread.h>
 #include <asm/firmware.h>
 #include <asm/vio.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_host.h>
diff --git a/drivers/scsi/ibmvscsi_tgt/ibmvscsi_tgt.c b/drivers/scsi/ibmvscsi_tgt/ibmvscsi_tgt.c
index 68b99924ee4f..aaa3b8fae3cd 100644
--- a/drivers/scsi/ibmvscsi_tgt/ibmvscsi_tgt.c
+++ b/drivers/scsi/ibmvscsi_tgt/ibmvscsi_tgt.c
@@ -15,14 +15,18 @@
 
 #define pr_fmt(fmt)	KBUILD_MODNAME ": " fmt
 
+#include <linux/hrtimer.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/of.h>
+#include <linux/completion.h>
 
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
diff --git a/drivers/scsi/imm.c b/drivers/scsi/imm.c
index 180a5ddedb2c..c93ed4c3b54e 100644
--- a/drivers/scsi/imm.c
+++ b/drivers/scsi/imm.c
@@ -11,6 +11,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/blkdev.h>
 #include <linux/parport.h>
diff --git a/drivers/scsi/ipr.c b/drivers/scsi/ipr.c
index 3819f7c42788..3d86e63abfbf 100644
--- a/drivers/scsi/ipr.c
+++ b/drivers/scsi/ipr.c
@@ -42,6 +42,8 @@
 
 #include <linux/fs.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
@@ -55,6 +57,7 @@
 #include <linux/sched.h>
 #include <linux/interrupt.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/scsi/ips.c b/drivers/scsi/ips.c
index 10cf5775a939..af4341aae9ec 100644
--- a/drivers/scsi/ips.c
+++ b/drivers/scsi/ips.c
@@ -164,6 +164,9 @@
 #include <asm/io.h>
 #include <asm/byteorder.h>
 #include <asm/page.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/string.h>
 #include <linux/errno.h>
diff --git a/drivers/scsi/isci/host.c b/drivers/scsi/isci/host.c
index 35589b6af90d..3c14db618fc1 100644
--- a/drivers/scsi/isci/host.c
+++ b/drivers/scsi/isci/host.c
@@ -54,6 +54,7 @@
  */
 #include <linux/circ_buf.h>
 #include <linux/device.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <scsi/sas.h>
 #include "host.h"
 #include "isci.h"
diff --git a/drivers/scsi/isci/isci.h b/drivers/scsi/isci/isci.h
index 4e6b1decbca7..4b9d92bff598 100644
--- a/drivers/scsi/isci/isci.h
+++ b/drivers/scsi/isci/isci.h
@@ -57,6 +57,7 @@
 #define __ISCI_H__
 
 #include <linux/interrupt.h>
+#include <linux/timer.h>
 #include <linux/types.h>
 
 #define DRV_NAME "isci"
diff --git a/drivers/scsi/isci/remote_node_context.c b/drivers/scsi/isci/remote_node_context.c
index 77ba0291134e..0dc9d4098bce 100644
--- a/drivers/scsi/isci/remote_node_context.c
+++ b/drivers/scsi/isci/remote_node_context.c
@@ -59,6 +59,7 @@
 #include "remote_node_context.h"
 #include "scu_event_codes.h"
 #include "scu_task_context.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #undef C
 #define C(a) (#a)
diff --git a/drivers/scsi/isci/request.c b/drivers/scsi/isci/request.c
index 355a0bc0828e..ba2b5ddee335 100644
--- a/drivers/scsi/isci/request.c
+++ b/drivers/scsi/isci/request.c
@@ -60,6 +60,7 @@
 #include "scu_completion_codes.h"
 #include "scu_event_codes.h"
 #include "sas.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #undef C
 #define C(a) (#a)
diff --git a/drivers/scsi/isci/unsolicited_frame_control.c b/drivers/scsi/isci/unsolicited_frame_control.c
index 04a6d0d59a22..8fad51aa291a 100644
--- a/drivers/scsi/isci/unsolicited_frame_control.c
+++ b/drivers/scsi/isci/unsolicited_frame_control.c
@@ -56,6 +56,7 @@
 #include "host.h"
 #include "unsolicited_frame_control.h"
 #include "registers.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 void sci_unsolicited_frame_control_construct(struct isci_host *ihost)
 {
diff --git a/drivers/scsi/iscsi_boot_sysfs.c b/drivers/scsi/iscsi_boot_sysfs.c
index a64abe38db2d..78d26a564d3d 100644
--- a/drivers/scsi/iscsi_boot_sysfs.c
+++ b/drivers/scsi/iscsi_boot_sysfs.c
@@ -7,8 +7,10 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/capability.h>
 #include <linux/iscsi_boot_sysfs.h>
diff --git a/drivers/scsi/libfc/fc_encode.h b/drivers/scsi/libfc/fc_encode.h
index 7dcac3b6baa7..62ad7e4b7581 100644
--- a/drivers/scsi/libfc/fc_encode.h
+++ b/drivers/scsi/libfc/fc_encode.h
@@ -8,6 +8,7 @@
 #ifndef _FC_ENCODE_H_
 #define _FC_ENCODE_H_
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <scsi/fc/fc_ms.h>
 
diff --git a/drivers/scsi/libfc/fc_fcp.c b/drivers/scsi/libfc/fc_fcp.c
index 80be3a936d92..ae4affb6a3d6 100644
--- a/drivers/scsi/libfc/fc_fcp.c
+++ b/drivers/scsi/libfc/fc_fcp.c
@@ -16,6 +16,7 @@
 #include <linux/err.h>
 #include <linux/crc32.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include <scsi/scsi_tcq.h>
 #include <scsi/scsi.h>
diff --git a/drivers/scsi/libfc/fc_lport.c b/drivers/scsi/libfc/fc_lport.c
index ab06e9aeb613..d6b6b0083d89 100644
--- a/drivers/scsi/libfc/fc_lport.c
+++ b/drivers/scsi/libfc/fc_lport.c
@@ -80,6 +80,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include <scsi/fc/fc_gs.h>
 
diff --git a/drivers/scsi/libiscsi.c b/drivers/scsi/libiscsi.c
index 0fda8905eabd..9a97c5608b07 100644
--- a/drivers/scsi/libiscsi.c
+++ b/drivers/scsi/libiscsi.c
@@ -16,6 +16,7 @@
 #include <linux/sched/signal.h>
 #include <linux/module.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <net/tcp.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/libiscsi_tcp.c b/drivers/scsi/libiscsi_tcp.c
index c182aa83f2c9..5fed4ea7b2b4 100644
--- a/drivers/scsi/libiscsi_tcp.c
+++ b/drivers/scsi/libiscsi_tcp.c
@@ -16,6 +16,7 @@
  */
 
 #include <crypto/hash.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/inet.h>
diff --git a/drivers/scsi/libsas/sas_ata.c b/drivers/scsi/libsas/sas_ata.c
index 12e2653846e3..a255b0972550 100644
--- a/drivers/scsi/libsas/sas_ata.c
+++ b/drivers/scsi/libsas/sas_ata.c
@@ -10,6 +10,7 @@
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
 #include <linux/async.h>
+#include <linux/completion.h>
 #include <linux/export.h>
 
 #include <scsi/sas_ata.h>
diff --git a/drivers/scsi/libsas/sas_expander.c b/drivers/scsi/libsas/sas_expander.c
index a2204674b680..84b192e44d34 100644
--- a/drivers/scsi/libsas/sas_expander.c
+++ b/drivers/scsi/libsas/sas_expander.c
@@ -10,8 +10,10 @@
 
 #include <linux/scatterlist.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include "sas_internal.h"
 
diff --git a/drivers/scsi/libsas/sas_init.c b/drivers/scsi/libsas/sas_init.c
index 9c8cc723170d..15d704391677 100644
--- a/drivers/scsi/libsas/sas_init.c
+++ b/drivers/scsi/libsas/sas_init.c
@@ -10,12 +10,15 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <scsi/sas_ata.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_device.h>
 #include <scsi/scsi_transport.h>
 #include <scsi/scsi_transport_sas.h>
+#include <linux/completion.h>
 
 #include "sas_internal.h"
 
diff --git a/drivers/scsi/libsas/sas_scsi_host.c b/drivers/scsi/libsas/sas_scsi_host.c
index 9047cfcd1072..68da0cdbbfa4 100644
--- a/drivers/scsi/libsas/sas_scsi_host.c
+++ b/drivers/scsi/libsas/sas_scsi_host.c
@@ -10,7 +10,9 @@
 #include <linux/firmware.h>
 #include <linux/export.h>
 #include <linux/ctype.h>
+#include <linux/hex.h>
 #include <linux/kernel.h>
+#include <linux/completion.h>
 
 #include "sas_internal.h"
 
diff --git a/drivers/scsi/lpfc/lpfc_attr.c b/drivers/scsi/lpfc/lpfc_attr.c
index 365c7e96070b..ea2a39f2f1d0 100644
--- a/drivers/scsi/lpfc/lpfc_attr.c
+++ b/drivers/scsi/lpfc/lpfc_attr.c
@@ -23,12 +23,15 @@
 
 #include <linux/ctype.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/aer.h>
+#include <linux/completion.h>
 #include <linux/gfp.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/lpfc/lpfc_ct.c b/drivers/scsi/lpfc/lpfc_ct.c
index b30765b9689a..9d2ee69380ca 100644
--- a/drivers/scsi/lpfc/lpfc_ct.c
+++ b/drivers/scsi/lpfc/lpfc_ct.c
@@ -28,6 +28,7 @@
 #include <linux/pci.h>
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 
 #include <scsi/scsi.h>
diff --git a/drivers/scsi/lpfc/lpfc_debugfs.c b/drivers/scsi/lpfc/lpfc_debugfs.c
index ab5af10c8a16..ed342fe37d8a 100644
--- a/drivers/scsi/lpfc/lpfc_debugfs.c
+++ b/drivers/scsi/lpfc/lpfc_debugfs.c
@@ -22,6 +22,7 @@
 
 #include <linux/blkdev.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
 #include <linux/idr.h>
@@ -31,6 +32,7 @@
 #include <linux/pci.h>
 #include <linux/spinlock.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include <scsi/scsi.h>
diff --git a/drivers/scsi/lpfc/lpfc_els.c b/drivers/scsi/lpfc/lpfc_els.c
index 28e56542e072..2407836d50f6 100644
--- a/drivers/scsi/lpfc/lpfc_els.c
+++ b/drivers/scsi/lpfc/lpfc_els.c
@@ -26,6 +26,7 @@
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/lpfc/lpfc_hbadisc.c b/drivers/scsi/lpfc/lpfc_hbadisc.c
index a7a2309a629f..ec92d296dc44 100644
--- a/drivers/scsi/lpfc/lpfc_hbadisc.c
+++ b/drivers/scsi/lpfc/lpfc_hbadisc.c
@@ -22,12 +22,14 @@
  *******************************************************************/
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
 #include <linux/kthread.h>
 #include <linux/interrupt.h>
 #include <linux/lockdep.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 
 #include <scsi/scsi.h>
diff --git a/drivers/scsi/lpfc/lpfc_init.c b/drivers/scsi/lpfc/lpfc_init.c
index 88b2e57d90c2..e25d5dad210d 100644
--- a/drivers/scsi/lpfc/lpfc_init.c
+++ b/drivers/scsi/lpfc/lpfc_init.c
@@ -41,6 +41,8 @@
 #include <linux/crash_dump.h>
 #include <linux/cpu.h>
 #include <linux/cpuhotplug.h>
+#include <linux/hrtimer.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/lpfc/lpfc_nvme.c b/drivers/scsi/lpfc/lpfc_nvme.c
index 09c53b85bcb8..15e18a8588c7 100644
--- a/drivers/scsi/lpfc/lpfc_nvme.c
+++ b/drivers/scsi/lpfc/lpfc_nvme.c
@@ -25,6 +25,7 @@
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <linux/crc-t10dif.h>
 #include <net/checksum.h>
 
diff --git a/drivers/scsi/lpfc/lpfc_nvmet.c b/drivers/scsi/lpfc/lpfc_nvmet.c
index 8258b771bd00..9653552bc37d 100644
--- a/drivers/scsi/lpfc/lpfc_nvmet.c
+++ b/drivers/scsi/lpfc/lpfc_nvmet.c
@@ -25,6 +25,7 @@
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <linux/crc-t10dif.h>
 #include <net/checksum.h>
 
diff --git a/drivers/scsi/lpfc/lpfc_scsi.c b/drivers/scsi/lpfc/lpfc_scsi.c
index c0038eaae7b0..3599ac098854 100644
--- a/drivers/scsi/lpfc/lpfc_scsi.c
+++ b/drivers/scsi/lpfc/lpfc_scsi.c
@@ -26,6 +26,7 @@
 #include <linux/export.h>
 #include <linux/delay.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 #include <linux/t10-pi.h>
 #include <linux/crc-t10dif.h>
 #include <linux/blk-cgroup.h>
diff --git a/drivers/scsi/lpfc/lpfc_sli.c b/drivers/scsi/lpfc/lpfc_sli.c
index 1f8a9b5945cb..a80b3ca0b53f 100644
--- a/drivers/scsi/lpfc/lpfc_sli.c
+++ b/drivers/scsi/lpfc/lpfc_sli.c
@@ -22,11 +22,13 @@
  *******************************************************************/
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/lockdep.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/scsi/megaraid.c b/drivers/scsi/megaraid.c
index 38976f94453e..2d72f0ace971 100644
--- a/drivers/scsi/megaraid.c
+++ b/drivers/scsi/megaraid.c
@@ -29,6 +29,8 @@
 #include <linux/mm.h>
 #include <linux/fs.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/io.h>
 #include <linux/completion.h>
diff --git a/drivers/scsi/megaraid/megaraid_sas_base.c b/drivers/scsi/megaraid/megaraid_sas_base.c
index 3d4f13da1ae8..cd781247a285 100644
--- a/drivers/scsi/megaraid/megaraid_sas_base.c
+++ b/drivers/scsi/megaraid/megaraid_sas_base.c
@@ -18,6 +18,8 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/list.h>
diff --git a/drivers/scsi/megaraid/megaraid_sas_debugfs.c b/drivers/scsi/megaraid/megaraid_sas_debugfs.c
index c69760775efa..975ebbea37f1 100644
--- a/drivers/scsi/megaraid/megaraid_sas_debugfs.c
+++ b/drivers/scsi/megaraid/megaraid_sas_debugfs.c
@@ -26,6 +26,7 @@
  *  Send feedback to: megaraidlinux.pdl@broadcom.com
  */
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
diff --git a/drivers/scsi/megaraid/megaraid_sas_fusion.c b/drivers/scsi/megaraid/megaraid_sas_fusion.c
index c60014e07b44..e17f49a27f2b 100644
--- a/drivers/scsi/megaraid/megaraid_sas_fusion.c
+++ b/drivers/scsi/megaraid/megaraid_sas_fusion.c
@@ -18,6 +18,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/list.h>
@@ -31,6 +32,7 @@
 #include <linux/fs.h>
 #include <linux/compat.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/mutex.h>
 #include <linux/poll.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/scsi/mpi3mr/mpi3mr_app.c b/drivers/scsi/mpi3mr/mpi3mr_app.c
index 0380996b5ad2..e871ea860c8d 100644
--- a/drivers/scsi/mpi3mr/mpi3mr_app.c
+++ b/drivers/scsi/mpi3mr/mpi3mr_app.c
@@ -9,6 +9,8 @@
 
 #include "mpi3mr.h"
 #include <linux/bsg-lib.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <uapi/scsi/scsi_bsg_mpi3mr.h>
 
 /**
diff --git a/drivers/scsi/mpi3mr/mpi3mr_fw.c b/drivers/scsi/mpi3mr/mpi3mr_fw.c
index 528f19f782f2..189900abdb7b 100644
--- a/drivers/scsi/mpi3mr/mpi3mr_fw.c
+++ b/drivers/scsi/mpi3mr/mpi3mr_fw.c
@@ -8,7 +8,9 @@
  */
 
 #include "mpi3mr.h"
+#include <linux/completion.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
+#include <linux/sprintf.h>
 
 static int
 mpi3mr_issue_reset(struct mpi3mr_ioc *mrioc, u16 reset_type, u32 reset_reason);
diff --git a/drivers/scsi/mpi3mr/mpi3mr_os.c b/drivers/scsi/mpi3mr/mpi3mr_os.c
index 5ee6646245e4..a787df6f3d36 100644
--- a/drivers/scsi/mpi3mr/mpi3mr_os.c
+++ b/drivers/scsi/mpi3mr/mpi3mr_os.c
@@ -8,7 +8,9 @@
  */
 
 #include "mpi3mr.h"
+#include <linux/completion.h>
 #include <linux/idr.h>
+#include <linux/sprintf.h>
 
 /* global driver scop variables */
 LIST_HEAD(mrioc_list);
diff --git a/drivers/scsi/mpi3mr/mpi3mr_transport.c b/drivers/scsi/mpi3mr/mpi3mr_transport.c
index c0c8ab586957..3908634533ed 100644
--- a/drivers/scsi/mpi3mr/mpi3mr_transport.c
+++ b/drivers/scsi/mpi3mr/mpi3mr_transport.c
@@ -8,6 +8,7 @@
  */
 
 #include "mpi3mr.h"
+#include <linux/completion.h>
 
 /**
  * mpi3mr_post_transport_req - Issue transport requests and wait
diff --git a/drivers/scsi/mpt3sas/mpt3sas_base.c b/drivers/scsi/mpt3sas/mpt3sas_base.c
index fc8c45e15235..a1591f302307 100644
--- a/drivers/scsi/mpt3sas/mpt3sas_base.c
+++ b/drivers/scsi/mpt3sas/mpt3sas_base.c
@@ -48,10 +48,12 @@
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/kdev_t.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/scsi/mpt3sas/mpt3sas_config.c b/drivers/scsi/mpt3sas/mpt3sas_config.c
index 2e88f456fc34..44b7ef940d75 100644
--- a/drivers/scsi/mpt3sas/mpt3sas_config.c
+++ b/drivers/scsi/mpt3sas/mpt3sas_config.c
@@ -47,6 +47,7 @@
 #include <linux/init.h>
 #include <linux/errno.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/sched.h>
 #include <linux/workqueue.h>
 #include <linux/delay.h>
diff --git a/drivers/scsi/mpt3sas/mpt3sas_ctl.c b/drivers/scsi/mpt3sas/mpt3sas_ctl.c
index 1c9fd26195b8..85e3e185ed80 100644
--- a/drivers/scsi/mpt3sas/mpt3sas_ctl.c
+++ b/drivers/scsi/mpt3sas/mpt3sas_ctl.c
@@ -44,14 +44,17 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
 #include <linux/compat.h>
+#include <linux/completion.h>
 #include <linux/poll.h>
 
 #include <linux/io.h>
diff --git a/drivers/scsi/mpt3sas/mpt3sas_debugfs.c b/drivers/scsi/mpt3sas/mpt3sas_debugfs.c
index a6ab1db81167..e457acb4cc18 100644
--- a/drivers/scsi/mpt3sas/mpt3sas_debugfs.c
+++ b/drivers/scsi/mpt3sas/mpt3sas_debugfs.c
@@ -14,6 +14,7 @@
  **/
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
diff --git a/drivers/scsi/mpt3sas/mpt3sas_scsih.c b/drivers/scsi/mpt3sas/mpt3sas_scsih.c
index ef8ee93005ea..8374487b1b1f 100644
--- a/drivers/scsi/mpt3sas/mpt3sas_scsih.c
+++ b/drivers/scsi/mpt3sas/mpt3sas_scsih.c
@@ -47,7 +47,9 @@
 #include <linux/init.h>
 #include <linux/errno.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/delay.h>
 #include <linux/pci.h>
diff --git a/drivers/scsi/mpt3sas/mpt3sas_transport.c b/drivers/scsi/mpt3sas/mpt3sas_transport.c
index 421ea511b664..002baacd1dc5 100644
--- a/drivers/scsi/mpt3sas/mpt3sas_transport.c
+++ b/drivers/scsi/mpt3sas/mpt3sas_transport.c
@@ -50,6 +50,7 @@
 #include <linux/workqueue.h>
 #include <linux/delay.h>
 #include <linux/pci.h>
+#include <linux/completion.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/scsi/mvsas/mv_init.c b/drivers/scsi/mvsas/mv_init.c
index 43ebb331e216..ea05221d5252 100644
--- a/drivers/scsi/mvsas/mv_init.c
+++ b/drivers/scsi/mvsas/mv_init.c
@@ -9,6 +9,7 @@
 
 
 #include "mv_sas.h"
+#include <linux/sprintf.h>
 
 int interrupt_coalescing = 0x80;
 
diff --git a/drivers/scsi/myrb.c b/drivers/scsi/myrb.c
index ca2e932dd9b7..508e50b080bc 100644
--- a/drivers/scsi/myrb.c
+++ b/drivers/scsi/myrb.c
@@ -11,12 +11,15 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/raid_class.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/myrs.c b/drivers/scsi/myrs.c
index a1eec65a9713..4d4a1c122d14 100644
--- a/drivers/scsi/myrs.c
+++ b/drivers/scsi/myrs.c
@@ -12,12 +12,15 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/raid_class.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/ncr53c8xx.c b/drivers/scsi/ncr53c8xx.c
index 35869b4f9329..7bd81f8caaa6 100644
--- a/drivers/scsi/ncr53c8xx.c
+++ b/drivers/scsi/ncr53c8xx.c
@@ -90,11 +90,13 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/ioport.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/sched.h>
 #include <linux/signal.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/string.h>
 #include <linux/time.h>
diff --git a/drivers/scsi/nsp32.c b/drivers/scsi/nsp32.c
index b7987019686e..0f8ba79ae094 100644
--- a/drivers/scsi/nsp32.c
+++ b/drivers/scsi/nsp32.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/ioport.h>
diff --git a/drivers/scsi/pcmcia/nsp_cs.c b/drivers/scsi/pcmcia/nsp_cs.c
index a5a1406a2bde..9142808cd17f 100644
--- a/drivers/scsi/pcmcia/nsp_cs.c
+++ b/drivers/scsi/pcmcia/nsp_cs.c
@@ -29,6 +29,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/ioport.h>
diff --git a/drivers/scsi/pcmcia/qlogic_stub.c b/drivers/scsi/pcmcia/qlogic_stub.c
index 310d0b6586a6..ca3b813d4be1 100644
--- a/drivers/scsi/pcmcia/qlogic_stub.c
+++ b/drivers/scsi/pcmcia/qlogic_stub.c
@@ -35,6 +35,7 @@
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ioport.h>
 #include <asm/io.h>
diff --git a/drivers/scsi/pcmcia/sym53c500_cs.c b/drivers/scsi/pcmcia/sym53c500_cs.c
index 278c78d066c4..cbd0d02562b8 100644
--- a/drivers/scsi/pcmcia/sym53c500_cs.c
+++ b/drivers/scsi/pcmcia/sym53c500_cs.c
@@ -45,7 +45,9 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ioport.h>
 #include <linux/blkdev.h>
diff --git a/drivers/scsi/pm8001/pm8001_ctl.c b/drivers/scsi/pm8001/pm8001_ctl.c
index 7b27618fd7b2..7fee4e4a7b3f 100644
--- a/drivers/scsi/pm8001/pm8001_ctl.c
+++ b/drivers/scsi/pm8001/pm8001_ctl.c
@@ -38,10 +38,13 @@
  *
  */
 #include <linux/firmware.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include "pm8001_sas.h"
 #include "pm8001_ctl.h"
 #include "pm8001_chips.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 /* scsi host attributes */
 
diff --git a/drivers/scsi/pm8001/pm8001_hwi.c b/drivers/scsi/pm8001/pm8001_hwi.c
index dec1e2d380f1..e3a1fe5bd038 100644
--- a/drivers/scsi/pm8001/pm8001_hwi.c
+++ b/drivers/scsi/pm8001/pm8001_hwi.c
@@ -43,6 +43,9 @@
  #include "pm8001_chips.h"
  #include "pm8001_ctl.h"
  #include "pm80xx_tracepoints.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 /**
  * read_main_config_table - read the configure table and save it.
diff --git a/drivers/scsi/pm8001/pm8001_init.c b/drivers/scsi/pm8001/pm8001_init.c
index ed6b7d954dda..016b4bc3231e 100644
--- a/drivers/scsi/pm8001/pm8001_init.c
+++ b/drivers/scsi/pm8001/pm8001_init.c
@@ -42,6 +42,8 @@
 #include "pm8001_sas.h"
 #include "pm8001_chips.h"
 #include "pm80xx_hwi.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static ulong logging_level = PM8001_FAIL_LOGGING | PM8001_IOERR_LOGGING |
 				PM8001_EVENT_LOGGING | PM8001_INIT_LOGGING;
diff --git a/drivers/scsi/pm8001/pm8001_sas.c b/drivers/scsi/pm8001/pm8001_sas.c
index a5a31dfa4512..0ed8708e03c2 100644
--- a/drivers/scsi/pm8001/pm8001_sas.c
+++ b/drivers/scsi/pm8001/pm8001_sas.c
@@ -41,6 +41,8 @@
 #include <linux/slab.h>
 #include "pm8001_sas.h"
 #include "pm80xx_tracepoints.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /**
  * pm8001_find_tag - from sas task to find out  tag that belongs to this task
diff --git a/drivers/scsi/pm8001/pm80xx_hwi.c b/drivers/scsi/pm8001/pm80xx_hwi.c
index a52ae6841939..94c9f53bb656 100644
--- a/drivers/scsi/pm8001/pm80xx_hwi.c
+++ b/drivers/scsi/pm8001/pm80xx_hwi.c
@@ -43,6 +43,9 @@
  #include "pm8001_chips.h"
  #include "pm8001_ctl.h"
 #include "pm80xx_tracepoints.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #define SMP_DIRECT 1
 #define SMP_INDIRECT 2
diff --git a/drivers/scsi/pmcraid.c b/drivers/scsi/pmcraid.c
index e8bcc3a88732..0388f3f29fc2 100644
--- a/drivers/scsi/pmcraid.c
+++ b/drivers/scsi/pmcraid.c
@@ -9,6 +9,8 @@
  */
 #include <linux/fs.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
@@ -20,6 +22,7 @@
 #include <linux/sched.h>
 #include <linux/interrupt.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/scsi/ppa.c b/drivers/scsi/ppa.c
index d592ee9170c1..0d90548c576b 100644
--- a/drivers/scsi/ppa.c
+++ b/drivers/scsi/ppa.c
@@ -10,6 +10,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/blkdev.h>
diff --git a/drivers/scsi/qedf/qedf_attr.c b/drivers/scsi/qedf/qedf_attr.c
index 8d8c760eee43..a0b99ec9f927 100644
--- a/drivers/scsi/qedf/qedf_attr.c
+++ b/drivers/scsi/qedf/qedf_attr.c
@@ -4,6 +4,8 @@
  *  Copyright (c) 2016-2018 Cavium Inc.
  */
 #include "qedf.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 inline bool qedf_is_vport(struct qedf_ctx *qedf)
 {
diff --git a/drivers/scsi/qedf/qedf_dbg.c b/drivers/scsi/qedf/qedf_dbg.c
index 0d2aed82882a..5eb1a433f966 100644
--- a/drivers/scsi/qedf/qedf_dbg.c
+++ b/drivers/scsi/qedf/qedf_dbg.c
@@ -4,6 +4,7 @@
  *  Copyright (c) 2016-2018 Cavium Inc.
  */
 #include "qedf_dbg.h"
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 void
diff --git a/drivers/scsi/qedf/qedf_debugfs.c b/drivers/scsi/qedf/qedf_debugfs.c
index 451fd236bfd0..038025e2ec76 100644
--- a/drivers/scsi/qedf/qedf_debugfs.c
+++ b/drivers/scsi/qedf/qedf_debugfs.c
@@ -7,7 +7,9 @@
 
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "qedf.h"
diff --git a/drivers/scsi/qedf/qedf_fip.c b/drivers/scsi/qedf/qedf_fip.c
index ad6a56ce72a8..9d645b40c4b8 100644
--- a/drivers/scsi/qedf/qedf_fip.c
+++ b/drivers/scsi/qedf/qedf_fip.c
@@ -6,6 +6,7 @@
 #include <linux/if_ether.h>
 #include <linux/if_vlan.h>
 #include "qedf.h"
+#include <linux/completion.h>
 
 extern const struct qed_fcoe_ops *qed_ops;
 /*
diff --git a/drivers/scsi/qedf/qedf_io.c b/drivers/scsi/qedf/qedf_io.c
index bf921caaf6ae..d26fd13e17dc 100644
--- a/drivers/scsi/qedf/qedf_io.c
+++ b/drivers/scsi/qedf/qedf_io.c
@@ -6,6 +6,7 @@
 #include <linux/spinlock.h>
 #include <linux/vmalloc.h>
 #include "qedf.h"
+#include <linux/completion.h>
 #include <scsi/scsi_tcq.h>
 
 void qedf_cmd_timer_set(struct qedf_ctx *qedf, struct qedf_ioreq *io_req,
diff --git a/drivers/scsi/qedf/qedf_main.c b/drivers/scsi/qedf/qedf_main.c
index a58353b7b4e8..e8105d73673a 100644
--- a/drivers/scsi/qedf/qedf_main.c
+++ b/drivers/scsi/qedf/qedf_main.c
@@ -14,6 +14,7 @@
 #include <linux/list.h>
 #include <linux/kthread.h>
 #include <linux/phylink.h>
+#include <linux/sprintf.h>
 #include <scsi/libfc.h>
 #include <scsi/scsi_host.h>
 #include <scsi/fc_frame.h>
@@ -22,6 +23,7 @@
 #include <linux/cpu.h>
 #include "qedf.h"
 #include "qedf_dbg.h"
+#include <linux/completion.h>
 #include <uapi/linux/pci_regs.h>
 
 const struct qed_fcoe_ops *qed_ops;
diff --git a/drivers/scsi/qedi/qedi_debugfs.c b/drivers/scsi/qedi/qedi_debugfs.c
index 8deb2001dc2f..6575d4fcdf60 100644
--- a/drivers/scsi/qedi/qedi_debugfs.c
+++ b/drivers/scsi/qedi/qedi_debugfs.c
@@ -6,6 +6,7 @@
 
 #include "qedi.h"
 #include "qedi_dbg.h"
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 #include <linux/debugfs.h>
diff --git a/drivers/scsi/qedi/qedi_iscsi.c b/drivers/scsi/qedi/qedi_iscsi.c
index 6ed8ef97642c..3eb528eff9c6 100644
--- a/drivers/scsi/qedi/qedi_iscsi.c
+++ b/drivers/scsi/qedi/qedi_iscsi.c
@@ -8,6 +8,7 @@
 #include <linux/etherdevice.h>
 #include <linux/if_ether.h>
 #include <linux/if_vlan.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_tcq.h>
 
 #include "qedi.h"
diff --git a/drivers/scsi/qedi/qedi_main.c b/drivers/scsi/qedi/qedi_main.c
index 2f940c6898ef..1dce8fd87eab 100644
--- a/drivers/scsi/qedi/qedi_main.c
+++ b/drivers/scsi/qedi/qedi_main.c
@@ -8,6 +8,7 @@
 #include <linux/pci.h>
 #include <linux/kernel.h>
 #include <linux/if_arp.h>
+#include <linux/sprintf.h>
 #include <scsi/iscsi_if.h>
 #include <linux/inet.h>
 #include <net/arp.h>
diff --git a/drivers/scsi/qedi/qedi_sysfs.c b/drivers/scsi/qedi/qedi_sysfs.c
index b00a7e08ef53..853cef9abe92 100644
--- a/drivers/scsi/qedi/qedi_sysfs.c
+++ b/drivers/scsi/qedi/qedi_sysfs.c
@@ -8,6 +8,7 @@
 #include "qedi_gbl.h"
 #include "qedi_iscsi.h"
 #include "qedi_dbg.h"
+#include <linux/sprintf.h>
 
 static inline struct qedi_ctx *qedi_dev_to_hba(struct device *dev)
 {
diff --git a/drivers/scsi/qla1280.c b/drivers/scsi/qla1280.c
index 27bce80262c2..d35b3e2404c8 100644
--- a/drivers/scsi/qla1280.c
+++ b/drivers/scsi/qla1280.c
@@ -328,6 +328,9 @@
 
 
 #include <linux/module.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 
 #include <linux/types.h>
 #include <linux/string.h>
diff --git a/drivers/scsi/qla2xxx/qla_attr.c b/drivers/scsi/qla2xxx/qla_attr.c
index 44449c70a375..63b4e715408d 100644
--- a/drivers/scsi/qla2xxx/qla_attr.c
+++ b/drivers/scsi/qla2xxx/qla_attr.c
@@ -5,6 +5,8 @@
  */
 #include "qla_def.h"
 #include "qla_target.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/kthread.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/scsi/qla2xxx/qla_bsg.c b/drivers/scsi/qla2xxx/qla_bsg.c
index 19bb64bdd88b..e9e7ef797314 100644
--- a/drivers/scsi/qla2xxx/qla_bsg.c
+++ b/drivers/scsi/qla2xxx/qla_bsg.c
@@ -5,6 +5,7 @@
  */
 #include "qla_def.h"
 #include "qla_gbl.h"
+#include <linux/completion.h>
 
 #include <linux/kthread.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/scsi/qla2xxx/qla_dbg.c b/drivers/scsi/qla2xxx/qla_dbg.c
index 691ef827a5ab..16588a02233b 100644
--- a/drivers/scsi/qla2xxx/qla_dbg.c
+++ b/drivers/scsi/qla2xxx/qla_dbg.c
@@ -62,6 +62,7 @@
  */
 
 #include "qla_def.h"
+#include <linux/sprintf.h>
 
 #include <linux/delay.h>
 #define CREATE_TRACE_POINTS
diff --git a/drivers/scsi/qla2xxx/qla_dfs.c b/drivers/scsi/qla2xxx/qla_dfs.c
index 55ff3d7482b3..07a50e120b27 100644
--- a/drivers/scsi/qla2xxx/qla_dfs.c
+++ b/drivers/scsi/qla2xxx/qla_dfs.c
@@ -4,6 +4,8 @@
  * Copyright (c)  2003-2014 QLogic Corporation
  */
 #include "qla_def.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
diff --git a/drivers/scsi/qla2xxx/qla_edif.c b/drivers/scsi/qla2xxx/qla_edif.c
index 26e6b3e3af43..165f7b8e3eab 100644
--- a/drivers/scsi/qla2xxx/qla_edif.c
+++ b/drivers/scsi/qla2xxx/qla_edif.c
@@ -5,6 +5,7 @@
  */
 #include "qla_def.h"
 #include "qla_edif.h"
+#include <linux/sprintf.h>
 
 #include <linux/kthread.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/scsi/qla2xxx/qla_gs.c b/drivers/scsi/qla2xxx/qla_gs.c
index 1cf9d200d563..76b5837327a5 100644
--- a/drivers/scsi/qla2xxx/qla_gs.c
+++ b/drivers/scsi/qla2xxx/qla_gs.c
@@ -5,6 +5,8 @@
  */
 #include "qla_def.h"
 #include "qla_target.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 
 static int qla2x00_sns_ga_nxt(scsi_qla_host_t *, fc_port_t *);
diff --git a/drivers/scsi/qla2xxx/qla_init.c b/drivers/scsi/qla2xxx/qla_init.c
index a314cfc5b263..e1629078dc81 100644
--- a/drivers/scsi/qla2xxx/qla_init.c
+++ b/drivers/scsi/qla2xxx/qla_init.c
@@ -5,6 +5,8 @@
  */
 #include "qla_def.h"
 #include "qla_gbl.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/delay.h>
 #include <linux/slab.h>
diff --git a/drivers/scsi/qla2xxx/qla_inline.h b/drivers/scsi/qla2xxx/qla_inline.h
index a4a56ab0ba74..565c216a6a5b 100644
--- a/drivers/scsi/qla2xxx/qla_inline.h
+++ b/drivers/scsi/qla2xxx/qla_inline.h
@@ -5,6 +5,7 @@
  */
 
 #include "qla_target.h"
+#include <linux/completion.h>
 /**
  * qla24xx_calc_iocbs() - Determine number of Command Type 3 and
  * Continuation Type 1 IOCBs to allocate.
diff --git a/drivers/scsi/qla2xxx/qla_iocb.c b/drivers/scsi/qla2xxx/qla_iocb.c
index df90169f8244..0b0ee6dfa323 100644
--- a/drivers/scsi/qla2xxx/qla_iocb.c
+++ b/drivers/scsi/qla2xxx/qla_iocb.c
@@ -5,6 +5,7 @@
  */
 #include "qla_def.h"
 #include "qla_target.h"
+#include <linux/completion.h>
 
 #include <linux/blkdev.h>
 #include <linux/delay.h>
diff --git a/drivers/scsi/qla2xxx/qla_isr.c b/drivers/scsi/qla2xxx/qla_isr.c
index d48007e18288..e6044201033f 100644
--- a/drivers/scsi/qla2xxx/qla_isr.c
+++ b/drivers/scsi/qla2xxx/qla_isr.c
@@ -6,6 +6,8 @@
 #include "qla_def.h"
 #include "qla_target.h"
 #include "qla_gbl.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/delay.h>
 #include <linux/slab.h>
diff --git a/drivers/scsi/qla2xxx/qla_mbx.c b/drivers/scsi/qla2xxx/qla_mbx.c
index 21ec32b4fb28..8bdbd7c9bf44 100644
--- a/drivers/scsi/qla2xxx/qla_mbx.c
+++ b/drivers/scsi/qla2xxx/qla_mbx.c
@@ -5,6 +5,7 @@
  */
 #include "qla_def.h"
 #include "qla_target.h"
+#include <linux/completion.h>
 
 #include <linux/delay.h>
 #include <linux/gfp.h>
diff --git a/drivers/scsi/qla2xxx/qla_mid.c b/drivers/scsi/qla2xxx/qla_mid.c
index b67416951a5f..ac3882b524fa 100644
--- a/drivers/scsi/qla2xxx/qla_mid.c
+++ b/drivers/scsi/qla2xxx/qla_mid.c
@@ -6,6 +6,7 @@
 #include "qla_def.h"
 #include "qla_gbl.h"
 #include "qla_target.h"
+#include <linux/completion.h>
 
 #include <linux/moduleparam.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/scsi/qla2xxx/qla_mr.c b/drivers/scsi/qla2xxx/qla_mr.c
index 083f94e43fba..fe2f5435a8b9 100644
--- a/drivers/scsi/qla2xxx/qla_mr.c
+++ b/drivers/scsi/qla2xxx/qla_mr.c
@@ -4,10 +4,12 @@
  * Copyright (c)  2003-2014 QLogic Corporation
  */
 #include "qla_def.h"
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/ktime.h>
 #include <linux/pci.h>
 #include <linux/ratelimit.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <scsi/scsi_tcq.h>
 #include <linux/utsname.h>
diff --git a/drivers/scsi/qla2xxx/qla_nvme.c b/drivers/scsi/qla2xxx/qla_nvme.c
index a8ddf356e662..5ee3250fd0f1 100644
--- a/drivers/scsi/qla2xxx/qla_nvme.c
+++ b/drivers/scsi/qla2xxx/qla_nvme.c
@@ -4,6 +4,7 @@
  * Copyright (c)  2003-2017 QLogic Corporation
  */
 #include "qla_nvme.h"
+#include <linux/completion.h>
 #include <linux/scatterlist.h>
 #include <linux/delay.h>
 #include <linux/nvme.h>
diff --git a/drivers/scsi/qla2xxx/qla_nx.c b/drivers/scsi/qla2xxx/qla_nx.c
index 6dfb70edb9a6..c33474ee7bf3 100644
--- a/drivers/scsi/qla2xxx/qla_nx.c
+++ b/drivers/scsi/qla2xxx/qla_nx.c
@@ -4,6 +4,7 @@
  * Copyright (c)  2003-2014 QLogic Corporation
  */
 #include "qla_def.h"
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
 #include <linux/pci.h>
diff --git a/drivers/scsi/qla2xxx/qla_os.c b/drivers/scsi/qla2xxx/qla_os.c
index dd674378f2f3..f7022cd2c3ea 100644
--- a/drivers/scsi/qla2xxx/qla_os.c
+++ b/drivers/scsi/qla2xxx/qla_os.c
@@ -4,6 +4,8 @@
  * Copyright (c)  2003-2014 QLogic Corporation
  */
 #include "qla_def.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/bitfield.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/scsi/qla2xxx/qla_sup.c b/drivers/scsi/qla2xxx/qla_sup.c
index c092a6b1ced4..aa5feab2da69 100644
--- a/drivers/scsi/qla2xxx/qla_sup.c
+++ b/drivers/scsi/qla2xxx/qla_sup.c
@@ -4,6 +4,7 @@
  * Copyright (c)  2003-2014 QLogic Corporation
  */
 #include "qla_def.h"
+#include <linux/sprintf.h>
 
 #include <linux/delay.h>
 #include <linux/slab.h>
diff --git a/drivers/scsi/qla2xxx/qla_tmpl.c b/drivers/scsi/qla2xxx/qla_tmpl.c
index b0a74b036cf4..5a91330cfa36 100644
--- a/drivers/scsi/qla2xxx/qla_tmpl.c
+++ b/drivers/scsi/qla2xxx/qla_tmpl.c
@@ -5,6 +5,7 @@
  */
 #include "qla_def.h"
 #include "qla_tmpl.h"
+#include <linux/sprintf.h>
 
 #define ISPREG(vha)	(&(vha)->hw->iobase->isp24)
 #define IOBAR(reg)	offsetof(typeof(*(reg)), iobase_addr)
diff --git a/drivers/scsi/qla2xxx/tcm_qla2xxx.c b/drivers/scsi/qla2xxx/tcm_qla2xxx.c
index 7e7460a747a4..27fdb611dc5a 100644
--- a/drivers/scsi/qla2xxx/tcm_qla2xxx.c
+++ b/drivers/scsi/qla2xxx/tcm_qla2xxx.c
@@ -16,6 +16,7 @@
 
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/vmalloc.h>
 #include <linux/list.h>
@@ -25,6 +26,7 @@
 #include <linux/configfs.h>
 #include <linux/ctype.h>
 #include <asm/unaligned.h>
+#include <linux/kstrtox.h>
 #include <scsi/scsi_host.h>
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
diff --git a/drivers/scsi/qla4xxx/ql4_attr.c b/drivers/scsi/qla4xxx/ql4_attr.c
index abfa6ef60480..8db6a626f82d 100644
--- a/drivers/scsi/qla4xxx/ql4_attr.c
+++ b/drivers/scsi/qla4xxx/ql4_attr.c
@@ -7,6 +7,8 @@
 #include "ql4_def.h"
 #include "ql4_glbl.h"
 #include "ql4_dbg.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static ssize_t
 qla4_8xxx_sysfs_read_fw_dump(struct file *filep, struct kobject *kobj,
diff --git a/drivers/scsi/qla4xxx/ql4_bsg.c b/drivers/scsi/qla4xxx/ql4_bsg.c
index c447a9d598a1..b44f5279af0a 100644
--- a/drivers/scsi/qla4xxx/ql4_bsg.c
+++ b/drivers/scsi/qla4xxx/ql4_bsg.c
@@ -7,6 +7,7 @@
 #include "ql4_def.h"
 #include "ql4_glbl.h"
 #include "ql4_bsg.h"
+#include <linux/completion.h>
 
 static int
 qla4xxx_read_flash(struct bsg_job *bsg_job)
diff --git a/drivers/scsi/qla4xxx/ql4_isr.c b/drivers/scsi/qla4xxx/ql4_isr.c
index cf52258ecdde..8604d35c01f6 100644
--- a/drivers/scsi/qla4xxx/ql4_isr.c
+++ b/drivers/scsi/qla4xxx/ql4_isr.c
@@ -8,6 +8,7 @@
 #include "ql4_glbl.h"
 #include "ql4_dbg.h"
 #include "ql4_inline.h"
+#include <linux/completion.h>
 
 /**
  * qla4xxx_copy_sense - copy sense data	into cmd sense buffer
diff --git a/drivers/scsi/qla4xxx/ql4_mbx.c b/drivers/scsi/qla4xxx/ql4_mbx.c
index 249f1d7021d4..93f12cb5b1c4 100644
--- a/drivers/scsi/qla4xxx/ql4_mbx.c
+++ b/drivers/scsi/qla4xxx/ql4_mbx.c
@@ -10,6 +10,7 @@
 #include "ql4_dbg.h"
 #include "ql4_inline.h"
 #include "ql4_version.h"
+#include <linux/completion.h>
 
 void qla4xxx_queue_mbox_cmd(struct scsi_qla_host *ha, uint32_t *mbx_cmd,
 			    int in_count)
diff --git a/drivers/scsi/qla4xxx/ql4_nx.c b/drivers/scsi/qla4xxx/ql4_nx.c
index 47adff9f0506..b8dcdbff10c6 100644
--- a/drivers/scsi/qla4xxx/ql4_nx.c
+++ b/drivers/scsi/qla4xxx/ql4_nx.c
@@ -10,6 +10,7 @@
 #include "ql4_def.h"
 #include "ql4_glbl.h"
 #include "ql4_inline.h"
+#include <linux/sprintf.h>
 
 #include <linux/io-64-nonatomic-lo-hi.h>
 
diff --git a/drivers/scsi/qla4xxx/ql4_os.c b/drivers/scsi/qla4xxx/ql4_os.c
index 675332e49a7b..1e30e5654297 100644
--- a/drivers/scsi/qla4xxx/ql4_os.c
+++ b/drivers/scsi/qla4xxx/ql4_os.c
@@ -6,8 +6,10 @@
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/iscsi_boot_sysfs.h>
 #include <linux/inet.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi_tcq.h>
 #include <scsi/scsicam.h>
diff --git a/drivers/scsi/qlogicfas.c b/drivers/scsi/qlogicfas.c
index 8f05e3707d69..ac75b258a6d4 100644
--- a/drivers/scsi/qlogicfas.c
+++ b/drivers/scsi/qlogicfas.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/blkdev.h>		/* to get disk capacity */
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/scsi/qlogicpti.c b/drivers/scsi/qlogicpti.c
index 5d560d9b8944..883436ea4ea1 100644
--- a/drivers/scsi/qlogicpti.c
+++ b/drivers/scsi/qlogicpti.c
@@ -15,6 +15,7 @@
 
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/gfp.h>
diff --git a/drivers/scsi/raid_class.c b/drivers/scsi/raid_class.c
index 95a86e0dfd77..58bc2d916336 100644
--- a/drivers/scsi/raid_class.c
+++ b/drivers/scsi/raid_class.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/raid_class.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/scsi_debug.c b/drivers/scsi/scsi_debug.c
index 914d9c12e741..3415c5227853 100644
--- a/drivers/scsi/scsi_debug.c
+++ b/drivers/scsi/scsi_debug.c
@@ -20,7 +20,9 @@
 #include <linux/kernel.h>
 #include <linux/errno.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/fs.h>
diff --git a/drivers/scsi/scsi_devinfo.c b/drivers/scsi/scsi_devinfo.c
index ba7237e83863..a93033acda15 100644
--- a/drivers/scsi/scsi_devinfo.c
+++ b/drivers/scsi/scsi_devinfo.c
@@ -3,6 +3,7 @@
 #include <linux/blkdev.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/scsi/scsi_error.c b/drivers/scsi/scsi_error.c
index 612489afe8d2..f8493849ee4a 100644
--- a/drivers/scsi/scsi_error.c
+++ b/drivers/scsi/scsi_error.c
@@ -25,6 +25,7 @@
 #include <linux/kthread.h>
 #include <linux/interrupt.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/jiffies.h>
 
diff --git a/drivers/scsi/scsi_lib.c b/drivers/scsi/scsi_lib.c
index 7bd8c45ed1ca..3cf51656ed6d 100644
--- a/drivers/scsi/scsi_lib.c
+++ b/drivers/scsi/scsi_lib.c
@@ -24,6 +24,7 @@
 #include <linux/blk-integrity.h>
 #include <linux/ratelimit.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/scsi/scsi_logging.c b/drivers/scsi/scsi_logging.c
index b02af340c2d3..9209f847cd49 100644
--- a/drivers/scsi/scsi_logging.c
+++ b/drivers/scsi/scsi_logging.c
@@ -8,6 +8,7 @@
 
 #include <linux/kernel.h>
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/scsi/scsi_proc.c b/drivers/scsi/scsi_proc.c
index 41f23cd0bfb4..e4760db40aca 100644
--- a/drivers/scsi/scsi_proc.c
+++ b/drivers/scsi/scsi_proc.c
@@ -19,6 +19,8 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/scsi/scsi_scan.c b/drivers/scsi/scsi_scan.c
index 70c0319be34c..254b7478b308 100644
--- a/drivers/scsi/scsi_scan.c
+++ b/drivers/scsi/scsi_scan.c
@@ -30,6 +30,7 @@
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/kthread.h>
 #include <linux/spinlock.h>
diff --git a/drivers/scsi/scsi_sysfs.c b/drivers/scsi/scsi_sysfs.c
index 24f6eefb6803..abb1751708aa 100644
--- a/drivers/scsi/scsi_sysfs.c
+++ b/drivers/scsi/scsi_sysfs.c
@@ -12,8 +12,10 @@
 #include <linux/init.h>
 #include <linux/blkdev.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/pm_runtime.h>
 #include <linux/bsg.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/scsi_transport_fc.c b/drivers/scsi/scsi_transport_fc.c
index b04075f19445..d31a030f531f 100644
--- a/drivers/scsi/scsi_transport_fc.c
+++ b/drivers/scsi/scsi_transport_fc.c
@@ -10,10 +10,12 @@
  */
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
 #include <linux/kernel.h>
 #include <linux/bsg-lib.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_device.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_transport.h>
diff --git a/drivers/scsi/scsi_transport_iscsi.c b/drivers/scsi/scsi_transport_iscsi.c
index af3ac6346796..615956a438f4 100644
--- a/drivers/scsi/scsi_transport_iscsi.c
+++ b/drivers/scsi/scsi_transport_iscsi.c
@@ -12,6 +12,8 @@
 #include <linux/slab.h>
 #include <linux/bsg-lib.h>
 #include <linux/idr.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <net/tcp.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_host.h>
diff --git a/drivers/scsi/scsi_transport_sas.c b/drivers/scsi/scsi_transport_sas.c
index d704c484a251..537b4d747746 100644
--- a/drivers/scsi/scsi_transport_sas.c
+++ b/drivers/scsi/scsi_transport_sas.c
@@ -28,6 +28,7 @@
 #include <linux/jiffies.h>
 #include <linux/err.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/blkdev.h>
 #include <linux/bsg.h>
diff --git a/drivers/scsi/scsi_transport_spi.c b/drivers/scsi/scsi_transport_spi.c
index 64852e6df3e3..4fc4be70c155 100644
--- a/drivers/scsi/scsi_transport_spi.c
+++ b/drivers/scsi/scsi_transport_spi.c
@@ -7,7 +7,9 @@
  */
 #include <linux/ctype.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/blkdev.h>
 #include <linux/mutex.h>
diff --git a/drivers/scsi/scsi_transport_srp.c b/drivers/scsi/scsi_transport_srp.c
index 64f6b22e8cc0..db909e1007ac 100644
--- a/drivers/scsi/scsi_transport_srp.c
+++ b/drivers/scsi/scsi_transport_srp.c
@@ -5,10 +5,12 @@
  * Copyright (C) 2007 FUJITA Tomonori <tomof@acm.org>
  */
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/jiffies.h>
 #include <linux/err.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <scsi/scsi.h>
diff --git a/drivers/scsi/sd.c b/drivers/scsi/sd.c
index a54cd1864a92..6e8e70893d72 100644
--- a/drivers/scsi/sd.c
+++ b/drivers/scsi/sd.c
@@ -36,6 +36,7 @@
 #include <linux/module.h>
 #include <linux/fs.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/bio.h>
 #include <linux/hdreg.h>
@@ -49,6 +50,7 @@
 #include <linux/delay.h>
 #include <linux/major.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/slab.h>
 #include <linux/sed-opal.h>
diff --git a/drivers/scsi/ses.c b/drivers/scsi/ses.c
index 0f2c87cc95e6..4e873eb05d18 100644
--- a/drivers/scsi/ses.c
+++ b/drivers/scsi/ses.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/enclosure.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/scsi/sg.c b/drivers/scsi/sg.c
index 86210e4dd0d3..e38dc64755dd 100644
--- a/drivers/scsi/sg.c
+++ b/drivers/scsi/sg.c
@@ -22,6 +22,8 @@ static int sg_version_num = 30536;	/* 2 digits for each component */
  *
  */
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include <linux/fs.h>
 #include <linux/kernel.h>
diff --git a/drivers/scsi/sim710.c b/drivers/scsi/sim710.c
index e519df68d603..2fca517f1a5b 100644
--- a/drivers/scsi/sim710.c
+++ b/drivers/scsi/sim710.c
@@ -15,6 +15,7 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/kstrtox.h>
 
 #include <linux/blkdev.h>
 #include <linux/device.h>
diff --git a/drivers/scsi/smartpqi/smartpqi_init.c b/drivers/scsi/smartpqi/smartpqi_init.c
index ceff1ec13f9e..4fa3869a2b3c 100644
--- a/drivers/scsi/smartpqi/smartpqi_init.c
+++ b/drivers/scsi/smartpqi/smartpqi_init.c
@@ -11,15 +11,18 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/sched.h>
 #include <linux/rtc.h>
 #include <linux/bcd.h>
+#include <linux/completion.h>
 #include <linux/reboot.h>
 #include <linux/cciss_ioctl.h>
 #include <linux/blk-mq-pci.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_device.h>
diff --git a/drivers/scsi/snic/snic_attrs.c b/drivers/scsi/snic/snic_attrs.c
index 3ddbdbc3ded1..4069414b602e 100644
--- a/drivers/scsi/snic/snic_attrs.c
+++ b/drivers/scsi/snic/snic_attrs.c
@@ -3,6 +3,7 @@
 
 #include <linux/string.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include "snic.h"
 
diff --git a/drivers/scsi/snic/snic_ctl.c b/drivers/scsi/snic/snic_ctl.c
index 5f4fca96b192..a83a226b0570 100644
--- a/drivers/scsi/snic/snic_ctl.c
+++ b/drivers/scsi/snic/snic_ctl.c
@@ -4,6 +4,7 @@
 #include <linux/errno.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include <linux/interrupt.h>
 #include <linux/workqueue.h>
diff --git a/drivers/scsi/snic/snic_debugfs.c b/drivers/scsi/snic/snic_debugfs.c
index 9dd975b36b5b..a0ddbac42b31 100644
--- a/drivers/scsi/snic/snic_debugfs.c
+++ b/drivers/scsi/snic/snic_debugfs.c
@@ -4,6 +4,8 @@
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "snic.h"
 
diff --git a/drivers/scsi/snic/snic_io.c b/drivers/scsi/snic/snic_io.c
index 32a77bee41d5..bcd826af7715 100644
--- a/drivers/scsi/snic/snic_io.c
+++ b/drivers/scsi/snic/snic_io.c
@@ -4,6 +4,7 @@
 #include <linux/errno.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/interrupt.h>
 #include <linux/workqueue.h>
diff --git a/drivers/scsi/snic/snic_isr.c b/drivers/scsi/snic/snic_isr.c
index 471a37422da9..004052e0d508 100644
--- a/drivers/scsi/snic/snic_isr.c
+++ b/drivers/scsi/snic/snic_isr.c
@@ -5,6 +5,7 @@
 #include <linux/errno.h>
 #include <linux/pci.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 
 #include "vnic_dev.h"
 #include "vnic_intr.h"
diff --git a/drivers/scsi/snic/snic_main.c b/drivers/scsi/snic/snic_main.c
index cc824dcfe7da..1670ed961b7f 100644
--- a/drivers/scsi/snic/snic_main.c
+++ b/drivers/scsi/snic/snic_main.c
@@ -3,6 +3,7 @@
 
 #include <linux/module.h>
 #include <linux/mempool.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
diff --git a/drivers/scsi/snic/snic_scsi.c b/drivers/scsi/snic/snic_scsi.c
index 84973f0f771e..a23e271d91d4 100644
--- a/drivers/scsi/snic/snic_scsi.c
+++ b/drivers/scsi/snic/snic_scsi.c
@@ -15,6 +15,7 @@
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_tcq.h>
 #include <scsi/scsi_dbg.h>
+#include <linux/completion.h>
 
 #include "snic_io.h"
 #include "snic.h"
diff --git a/drivers/scsi/snic/snic_trc.c b/drivers/scsi/snic/snic_trc.c
index c2e5ab7e976c..dcbffb9de221 100644
--- a/drivers/scsi/snic/snic_trc.c
+++ b/drivers/scsi/snic/snic_trc.c
@@ -4,6 +4,7 @@
 #include <linux/module.h>
 #include <linux/mempool.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "snic_io.h"
diff --git a/drivers/scsi/snic/vnic_dev.h b/drivers/scsi/snic/vnic_dev.h
index d2f9b6f7b313..f1cf9051fa48 100644
--- a/drivers/scsi/snic/vnic_dev.h
+++ b/drivers/scsi/snic/vnic_dev.h
@@ -6,6 +6,7 @@
 
 #include "vnic_resource.h"
 #include "vnic_devcmd.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #ifndef VNIC_PADDR_TARGET
 #define VNIC_PADDR_TARGET	0x0000000000000000ULL
diff --git a/drivers/scsi/sr.c b/drivers/scsi/sr.c
index 268b3a40891e..e2add19ccb1b 100644
--- a/drivers/scsi/sr.c
+++ b/drivers/scsi/sr.c
@@ -39,6 +39,7 @@
 #include <linux/mm.h>
 #include <linux/bio.h>
 #include <linux/compat.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/cdrom.h>
diff --git a/drivers/scsi/st.c b/drivers/scsi/st.c
index 338aa8c42968..d0bb21442fbb 100644
--- a/drivers/scsi/st.c
+++ b/drivers/scsi/st.c
@@ -21,6 +21,9 @@
 static const char *verstr = "20160209";
 
 #include <linux/module.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/compat.h>
 #include <linux/fs.h>
diff --git a/drivers/scsi/stex.c b/drivers/scsi/stex.c
index 8ffb75be99bc..b4948d58519d 100644
--- a/drivers/scsi/stex.c
+++ b/drivers/scsi/stex.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/pci.h>
 #include <linux/blkdev.h>
diff --git a/drivers/scsi/sym53c8xx_2/sym_glue.c b/drivers/scsi/sym53c8xx_2/sym_glue.c
index a2560cc807d3..65682e68488d 100644
--- a/drivers/scsi/sym53c8xx_2/sym_glue.c
+++ b/drivers/scsi/sym53c8xx_2/sym_glue.c
@@ -26,13 +26,16 @@
  */
 #include <linux/ctype.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi.h>
 #include <scsi/scsi_tcq.h>
 #include <scsi/scsi_device.h>
 #include <scsi/scsi_transport.h>
+#include <linux/completion.h>
 
 #include "sym_glue.h"
 #include "sym_nvram.h"
diff --git a/drivers/scsi/virtio_scsi.c b/drivers/scsi/virtio_scsi.c
index 617eb892f4ad..b51446456d24 100644
--- a/drivers/scsi/virtio_scsi.c
+++ b/drivers/scsi/virtio_scsi.c
@@ -23,6 +23,7 @@
 #include <linux/cpu.h>
 #include <linux/blkdev.h>
 #include <linux/blk-integrity.h>
+#include <linux/completion.h>
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_device.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/scsi/vmw_pvscsi.c b/drivers/scsi/vmw_pvscsi.c
index f88ecdb93a8a..09a53fa238ad 100644
--- a/drivers/scsi/vmw_pvscsi.c
+++ b/drivers/scsi/vmw_pvscsi.c
@@ -23,8 +23,10 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/pci.h>
+#include <linux/completion.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_host.h>
diff --git a/drivers/scsi/wd33c93.c b/drivers/scsi/wd33c93.c
index e4fafc77bd20..36b11efa70e0 100644
--- a/drivers/scsi/wd33c93.c
+++ b/drivers/scsi/wd33c93.c
@@ -68,6 +68,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/kstrtox.h>
 
 #include <linux/string.h>
 #include <linux/delay.h>
diff --git a/drivers/scsi/xen-scsifront.c b/drivers/scsi/xen-scsifront.c
index 9ec55ddc1204..5d3e84326954 100644
--- a/drivers/scsi/xen-scsifront.c
+++ b/drivers/scsi/xen-scsifront.c
@@ -31,6 +31,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/interrupt.h>
 #include <linux/mutex.h>
diff --git a/drivers/sh/intc/core.c b/drivers/sh/intc/core.c
index ca4f4ca413f1..e6a857138342 100644
--- a/drivers/sh/intc/core.c
+++ b/drivers/sh/intc/core.c
@@ -22,6 +22,7 @@
 #include <linux/irq.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/interrupt.h>
 #include <linux/sh_intc.h>
diff --git a/drivers/sh/intc/userimask.c b/drivers/sh/intc/userimask.c
index abe9091827cd..7cdd4aad2a29 100644
--- a/drivers/sh/intc/userimask.c
+++ b/drivers/sh/intc/userimask.c
@@ -13,6 +13,8 @@
 #include <linux/device.h>
 #include <linux/init.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/sizes.h>
 #include "internals.h"
diff --git a/drivers/siox/siox-core.c b/drivers/siox/siox-core.c
index 561408583b2b..5e7885e0e694 100644
--- a/drivers/siox/siox-core.c
+++ b/drivers/siox/siox-core.c
@@ -4,8 +4,10 @@
  */
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include "siox.h"
diff --git a/drivers/slimbus/core.c b/drivers/slimbus/core.c
index d43873bb5fe6..f8c9e7b582bc 100644
--- a/drivers/slimbus/core.c
+++ b/drivers/slimbus/core.c
@@ -13,6 +13,8 @@
 #include <linux/pm_runtime.h>
 #include <linux/slimbus.h>
 #include "slimbus.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static DEFINE_IDA(ctrl_ida);
 
diff --git a/drivers/slimbus/messaging.c b/drivers/slimbus/messaging.c
index 4ce0cb61e481..d63f840243c7 100644
--- a/drivers/slimbus/messaging.c
+++ b/drivers/slimbus/messaging.c
@@ -6,6 +6,7 @@
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
 #include "slimbus.h"
+#include <linux/completion.h>
 
 /**
  * slim_msg_response() - Deliver Message response received from a device to the
diff --git a/drivers/slimbus/qcom-ctrl.c b/drivers/slimbus/qcom-ctrl.c
index 400b7b385a44..75f7c5823cd2 100644
--- a/drivers/slimbus/qcom-ctrl.c
+++ b/drivers/slimbus/qcom-ctrl.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/delay.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
 #include "slimbus.h"
diff --git a/drivers/slimbus/qcom-ngd-ctrl.c b/drivers/slimbus/qcom-ngd-ctrl.c
index efeba8275a66..4a3b7d6845c6 100644
--- a/drivers/slimbus/qcom-ngd-ctrl.c
+++ b/drivers/slimbus/qcom-ngd-ctrl.c
@@ -22,6 +22,7 @@
 #include <linux/soc/qcom/pdr.h>
 #include <net/sock.h>
 #include "slimbus.h"
+#include <linux/completion.h>
 
 /* NGD (Non-ported Generic Device) registers */
 #define	NGD_CFG			0x0
diff --git a/drivers/slimbus/sched.c b/drivers/slimbus/sched.c
index af84997d2742..2c5cbf20b146 100644
--- a/drivers/slimbus/sched.c
+++ b/drivers/slimbus/sched.c
@@ -5,6 +5,7 @@
 
 #include <linux/errno.h>
 #include "slimbus.h"
+#include <linux/completion.h>
 
 /**
  * slim_ctrl_clk_pause() - Called by slimbus controller to enter/exit
diff --git a/drivers/slimbus/slimbus.h b/drivers/slimbus/slimbus.h
index 00a7f112574b..29e9229a683c 100644
--- a/drivers/slimbus/slimbus.h
+++ b/drivers/slimbus/slimbus.h
@@ -7,6 +7,7 @@
 #define _DRIVERS_SLIMBUS_H
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/idr.h>
 #include <linux/mutex.h>
 #include <linux/completion.h>
 #include <linux/slimbus.h>
diff --git a/drivers/slimbus/stream.c b/drivers/slimbus/stream.c
index 1d6b38657917..8b99aba36a4c 100644
--- a/drivers/slimbus/stream.c
+++ b/drivers/slimbus/stream.c
@@ -6,6 +6,7 @@
 #include <linux/slab.h>
 #include <linux/list.h>
 #include <linux/slimbus.h>
+#include <linux/sprintf.h>
 #include <uapi/sound/asound.h>
 #include "slimbus.h"
 
diff --git a/drivers/soc/amlogic/meson-gx-socinfo.c b/drivers/soc/amlogic/meson-gx-socinfo.c
index 6abb730344ab..56d55924ea24 100644
--- a/drivers/soc/amlogic/meson-gx-socinfo.c
+++ b/drivers/soc/amlogic/meson-gx-socinfo.c
@@ -11,6 +11,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/bitfield.h>
 #include <linux/regmap.h>
diff --git a/drivers/soc/amlogic/meson-mx-socinfo.c b/drivers/soc/amlogic/meson-mx-socinfo.c
index 92125dd65f33..18760cd52ae9 100644
--- a/drivers/soc/amlogic/meson-mx-socinfo.c
+++ b/drivers/soc/amlogic/meson-mx-socinfo.c
@@ -10,6 +10,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/bitfield.h>
 #include <linux/regmap.h>
diff --git a/drivers/soc/apple/mailbox.c b/drivers/soc/apple/mailbox.c
index 49a0955e82d6..51280589554c 100644
--- a/drivers/soc/apple/mailbox.c
+++ b/drivers/soc/apple/mailbox.c
@@ -18,6 +18,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/bits.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
diff --git a/drivers/soc/apple/rtkit.c b/drivers/soc/apple/rtkit.c
index e6d940292c9f..d6b5ab3f9ae2 100644
--- a/drivers/soc/apple/rtkit.c
+++ b/drivers/soc/apple/rtkit.c
@@ -5,6 +5,7 @@
  */
 
 #include "rtkit-internal.h"
+#include <linux/completion.h>
 
 enum {
 	APPLE_RTKIT_PWR_STATE_OFF = 0x00, /* power off, cannot be restarted */
diff --git a/drivers/soc/aspeed/aspeed-socinfo.c b/drivers/soc/aspeed/aspeed-socinfo.c
index 3f759121dc00..19b1b1f81be6 100644
--- a/drivers/soc/aspeed/aspeed-socinfo.c
+++ b/drivers/soc/aspeed/aspeed-socinfo.c
@@ -7,6 +7,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 static struct {
diff --git a/drivers/soc/atmel/soc.c b/drivers/soc/atmel/soc.c
index cc9a3e107479..501f8189177f 100644
--- a/drivers/soc/atmel/soc.c
+++ b/drivers/soc/atmel/soc.c
@@ -13,6 +13,7 @@
 #include <linux/of_address.h>
 #include <linux/of_platform.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #include "soc.h"
diff --git a/drivers/soc/bcm/brcmstb/biuctrl.c b/drivers/soc/bcm/brcmstb/biuctrl.c
index 364ddbe365c2..dbbb2a5f3c46 100644
--- a/drivers/soc/bcm/brcmstb/biuctrl.c
+++ b/drivers/soc/bcm/brcmstb/biuctrl.c
@@ -7,6 +7,7 @@
 
 #define pr_fmt(fmt)	"brcmstb: " KBUILD_MODNAME ": " fmt
 
+#include <linux/cpumask.h>
 #include <linux/kernel.h>
 #include <linux/io.h>
 #include <linux/of_address.h>
diff --git a/drivers/soc/bcm/brcmstb/common.c b/drivers/soc/bcm/brcmstb/common.c
index 2a010881f4b6..dc9929c94a8a 100644
--- a/drivers/soc/bcm/brcmstb/common.c
+++ b/drivers/soc/bcm/brcmstb/common.c
@@ -9,6 +9,7 @@
 #include <linux/of_address.h>
 #include <linux/slab.h>
 #include <linux/soc/brcmstb/brcmstb.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 static u32 family_id;
diff --git a/drivers/soc/dove/pmu.c b/drivers/soc/dove/pmu.c
index 6202dbcd20a8..1ffbd31096ad 100644
--- a/drivers/soc/dove/pmu.c
+++ b/drivers/soc/dove/pmu.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/soc/dove/pmu.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #define NR_PMU_IRQS		7
 
diff --git a/drivers/soc/fsl/guts.c b/drivers/soc/fsl/guts.c
index 6bf3e6a980ff..37618743a042 100644
--- a/drivers/soc/fsl/guts.c
+++ b/drivers/soc/fsl/guts.c
@@ -9,6 +9,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/of_fdt.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/of_address.h>
 #include <linux/platform_device.h>
diff --git a/drivers/soc/fsl/qbman/bman.c b/drivers/soc/fsl/qbman/bman.c
index 6cc1847e534a..8b78c36558a7 100644
--- a/drivers/soc/fsl/qbman/bman.c
+++ b/drivers/soc/fsl/qbman/bman.c
@@ -29,6 +29,7 @@
  */
 
 #include "bman_priv.h"
+#include <linux/sprintf.h>
 
 #define IRQNAME		"BMan portal %d"
 #define MAX_IRQNAME	16	/* big enough for "BMan portal %d" */
diff --git a/drivers/soc/fsl/qbman/bman_ccsr.c b/drivers/soc/fsl/qbman/bman_ccsr.c
index cb24a08be084..a209179ce2d0 100644
--- a/drivers/soc/fsl/qbman/bman_ccsr.c
+++ b/drivers/soc/fsl/qbman/bman_ccsr.c
@@ -29,6 +29,7 @@
  */
 
 #include "bman_priv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 u16 bman_ip_rev;
 EXPORT_SYMBOL(bman_ip_rev);
diff --git a/drivers/soc/fsl/qbman/dpaa_sys.c b/drivers/soc/fsl/qbman/dpaa_sys.c
index 33751450047e..c560db0fd4d3 100644
--- a/drivers/soc/fsl/qbman/dpaa_sys.c
+++ b/drivers/soc/fsl/qbman/dpaa_sys.c
@@ -29,6 +29,7 @@
  */
 
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits()
 #include "dpaa_sys.h"
 
 /*
diff --git a/drivers/soc/fsl/qbman/qman.c b/drivers/soc/fsl/qbman/qman.c
index 739e4eee6b75..343e2e9ed185 100644
--- a/drivers/soc/fsl/qbman/qman.c
+++ b/drivers/soc/fsl/qbman/qman.c
@@ -29,6 +29,7 @@
  */
 
 #include "qman_priv.h"
+#include <linux/sprintf.h>
 
 #define DQRR_MAXFILL	15
 #define EQCR_ITHRESH	4	/* if EQCR congests, interrupt threshold */
diff --git a/drivers/soc/fsl/qbman/qman_ccsr.c b/drivers/soc/fsl/qbman/qman_ccsr.c
index 157659fd033a..1ac4b4eba69d 100644
--- a/drivers/soc/fsl/qbman/qman_ccsr.c
+++ b/drivers/soc/fsl/qbman/qman_ccsr.c
@@ -29,6 +29,7 @@
  */
 
 #include "qman_priv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 u16 qman_ip_rev;
 EXPORT_SYMBOL(qman_ip_rev);
diff --git a/drivers/soc/fsl/qe/qe.c b/drivers/soc/fsl/qe/qe.c
index 70b6eddb867b..4518123000e2 100644
--- a/drivers/soc/fsl/qe/qe.c
+++ b/drivers/soc/fsl/qe/qe.c
@@ -12,6 +12,7 @@
  */
 #include <linux/bitmap.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/kernel.h>
 #include <linux/param.h>
diff --git a/drivers/soc/fsl/qe/qmc.c b/drivers/soc/fsl/qe/qmc.c
index f498db9abe35..e7e9d7fe5511 100644
--- a/drivers/soc/fsl/qe/qmc.c
+++ b/drivers/soc/fsl/qe/qmc.c
@@ -20,6 +20,7 @@
 #include <soc/fsl/cpm.h>
 #include <sysdev/fsl_soc.h>
 #include "tsa.h"
+#include <linux/completion.h>
 
 /* SCC general mode register high (32 bits) */
 #define SCC_GSMRL	0x00
diff --git a/drivers/soc/hisilicon/kunpeng_hccs.c b/drivers/soc/hisilicon/kunpeng_hccs.c
index 9ff70b38e5e9..f3679e7c5462 100644
--- a/drivers/soc/hisilicon/kunpeng_hccs.c
+++ b/drivers/soc/hisilicon/kunpeng_hccs.c
@@ -23,6 +23,8 @@
  *    - CRC error count sum
  */
 #include <linux/acpi.h>
+#include <linux/completion.h>
+#include <linux/kobject.h>
 #include <linux/iopoll.h>
 #include <linux/platform_device.h>
 #include <linux/sysfs.h>
diff --git a/drivers/soc/imx/soc-imx.c b/drivers/soc/imx/soc-imx.c
index fab668c83f98..ec8fa50016c5 100644
--- a/drivers/soc/imx/soc-imx.c
+++ b/drivers/soc/imx/soc-imx.c
@@ -8,6 +8,7 @@
 #include <linux/of_address.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #include <soc/imx/cpu.h>
diff --git a/drivers/soc/imx/soc-imx8m.c b/drivers/soc/imx/soc-imx8m.c
index ec87d9d878f3..d8fcb7fc49d2 100644
--- a/drivers/soc/imx/soc-imx8m.c
+++ b/drivers/soc/imx/soc-imx8m.c
@@ -7,6 +7,7 @@
 #include <linux/io.h>
 #include <linux/of_address.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/platform_device.h>
 #include <linux/arm-smccc.h>
diff --git a/drivers/soc/ixp4xx/ixp4xx-qmgr.c b/drivers/soc/ixp4xx/ixp4xx-qmgr.c
index 244ad8d7e80b..1eed3b806712 100644
--- a/drivers/soc/ixp4xx/ixp4xx-qmgr.c
+++ b/drivers/soc/ixp4xx/ixp4xx-qmgr.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/soc/ixp4xx/qmgr.h>
 #include <linux/soc/ixp4xx/cpu.h>
+#include <linux/sprintf.h>
 
 static struct qmgr_regs __iomem *qmgr_regs;
 static int qmgr_irq_1;
diff --git a/drivers/soc/mediatek/mtk-svs.c b/drivers/soc/mediatek/mtk-svs.c
index c832f5c670bc..c8a676491525 100644
--- a/drivers/soc/mediatek/mtk-svs.c
+++ b/drivers/soc/mediatek/mtk-svs.c
@@ -16,6 +16,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/drivers/soc/microchip/mpfs-sys-controller.c b/drivers/soc/microchip/mpfs-sys-controller.c
index 7a4936019329..cbdd8d51fa49 100644
--- a/drivers/soc/microchip/mpfs-sys-controller.c
+++ b/drivers/soc/microchip/mpfs-sys-controller.c
@@ -19,6 +19,7 @@
 #include <linux/mailbox_client.h>
 #include <linux/platform_device.h>
 #include <soc/microchip/mpfs.h>
+#include <linux/completion.h>
 
 /*
  * This timeout must be long, as some services (example: image authentication)
diff --git a/drivers/soc/nuvoton/wpcm450-soc.c b/drivers/soc/nuvoton/wpcm450-soc.c
index c5e0d11c383b..d4a0cd4b406d 100644
--- a/drivers/soc/nuvoton/wpcm450-soc.c
+++ b/drivers/soc/nuvoton/wpcm450-soc.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/mfd/syscon.h>
+#include <linux/module.h>
 #include <linux/of.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
diff --git a/drivers/soc/qcom/apr.c b/drivers/soc/qcom/apr.c
index 1f8b315576a4..1b2da4e0e0bf 100644
--- a/drivers/soc/qcom/apr.c
+++ b/drivers/soc/qcom/apr.c
@@ -8,6 +8,7 @@
 #include <linux/spinlock.h>
 #include <linux/idr.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/of_device.h>
 #include <linux/soc/qcom/apr.h>
diff --git a/drivers/soc/qcom/llcc-qcom.c b/drivers/soc/qcom/llcc-qcom.c
index 4ca88eaebf06..3eed3f542df8 100644
--- a/drivers/soc/qcom/llcc-qcom.c
+++ b/drivers/soc/qcom/llcc-qcom.c
@@ -18,6 +18,7 @@
 #include <linux/sizes.h>
 #include <linux/slab.h>
 #include <linux/soc/qcom/llcc-qcom.h>
+#include <linux/sprintf.h>
 
 #define ACTIVATE                      BIT(0)
 #define DEACTIVATE                    BIT(1)
diff --git a/drivers/soc/qcom/mdt_loader.c b/drivers/soc/qcom/mdt_loader.c
index 6f177e46fa0f..8d4d3e1e6c3a 100644
--- a/drivers/soc/qcom/mdt_loader.c
+++ b/drivers/soc/qcom/mdt_loader.c
@@ -16,6 +16,7 @@
 #include <linux/sizes.h>
 #include <linux/slab.h>
 #include <linux/soc/qcom/mdt_loader.h>
+#include <linux/sprintf.h>
 
 static bool mdt_phdr_valid(const struct elf32_phdr *phdr)
 {
diff --git a/drivers/soc/qcom/pmic_glink_altmode.c b/drivers/soc/qcom/pmic_glink_altmode.c
index 5fcd0fdd2faa..502ee1a22c0c 100644
--- a/drivers/soc/qcom/pmic_glink_altmode.c
+++ b/drivers/soc/qcom/pmic_glink_altmode.c
@@ -5,6 +5,7 @@
  */
 #include <linux/auxiliary_bus.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
diff --git a/drivers/soc/qcom/qcom-geni-se.c b/drivers/soc/qcom/qcom-geni-se.c
index bdcf44b85b2f..caf1552369af 100644
--- a/drivers/soc/qcom/qcom-geni-se.c
+++ b/drivers/soc/qcom/qcom-geni-se.c
@@ -6,6 +6,7 @@
 
 #include <linux/acpi.h>
 #include <linux/clk.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
 #include <linux/dma-mapping.h>
 #include <linux/io.h>
diff --git a/drivers/soc/qcom/qcom_aoss.c b/drivers/soc/qcom/qcom_aoss.c
index e8ae8aa6391f..31ab7a31df18 100644
--- a/drivers/soc/qcom/qcom_aoss.c
+++ b/drivers/soc/qcom/qcom_aoss.c
@@ -6,10 +6,12 @@
 #include <linux/debugfs.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/mailbox_client.h>
 #include <linux/module.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <linux/slab.h>
 #include <linux/soc/qcom/qcom_aoss.h>
diff --git a/drivers/soc/qcom/rmtfs_mem.c b/drivers/soc/qcom/rmtfs_mem.c
index df850d073102..061e2672dfaf 100644
--- a/drivers/soc/qcom/rmtfs_mem.c
+++ b/drivers/soc/qcom/rmtfs_mem.c
@@ -12,6 +12,7 @@
 #include <linux/of_reserved_mem.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/io.h>
 #include <linux/firmware/qcom/qcom_scm.h>
diff --git a/drivers/soc/qcom/rpmh-rsc.c b/drivers/soc/qcom/rpmh-rsc.c
index a021dc71807b..f1b5590cf19e 100644
--- a/drivers/soc/qcom/rpmh-rsc.c
+++ b/drivers/soc/qcom/rpmh-rsc.c
@@ -24,6 +24,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 
 #include <clocksource/arm_arch_timer.h>
diff --git a/drivers/soc/qcom/rpmh.c b/drivers/soc/qcom/rpmh.c
index 9f26d7f9b9dc..d76809d9800e 100644
--- a/drivers/soc/qcom/rpmh.c
+++ b/drivers/soc/qcom/rpmh.c
@@ -5,6 +5,7 @@
 
 #include <linux/atomic.h>
 #include <linux/bug.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
diff --git a/drivers/soc/qcom/smd-rpm.c b/drivers/soc/qcom/smd-rpm.c
index b7056aed4c7d..3b1a333c503a 100644
--- a/drivers/soc/qcom/smd-rpm.c
+++ b/drivers/soc/qcom/smd-rpm.c
@@ -10,6 +10,7 @@
 #include <linux/io.h>
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include <linux/rpmsg.h>
 #include <linux/soc/qcom/smd-rpm.h>
diff --git a/drivers/soc/qcom/smsm.c b/drivers/soc/qcom/smsm.c
index e7c7e9a640a6..5215f86dd582 100644
--- a/drivers/soc/qcom/smsm.c
+++ b/drivers/soc/qcom/smsm.c
@@ -13,6 +13,7 @@
 #include <linux/regmap.h>
 #include <linux/soc/qcom/smem.h>
 #include <linux/soc/qcom/smem_state.h>
+#include <linux/sprintf.h>
 
 /*
  * This driver implements the Qualcomm Shared Memory State Machine, a mechanism
diff --git a/drivers/soc/qcom/wcnss_ctrl.c b/drivers/soc/qcom/wcnss_ctrl.c
index 148bcbac332d..53e42343f127 100644
--- a/drivers/soc/qcom/wcnss_ctrl.c
+++ b/drivers/soc/qcom/wcnss_ctrl.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/rpmsg.h>
 #include <linux/soc/qcom/wcnss_ctrl.h>
+#include <linux/completion.h>
 
 #define WCNSS_REQUEST_TIMEOUT	(5 * HZ)
 #define WCNSS_CBC_TIMEOUT	(10 * HZ)
diff --git a/drivers/soc/renesas/r9a06g032-smp.c b/drivers/soc/renesas/r9a06g032-smp.c
index a1926e8d73f2..1326675a5383 100644
--- a/drivers/soc/renesas/r9a06g032-smp.c
+++ b/drivers/soc/renesas/r9a06g032-smp.c
@@ -12,6 +12,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/smp.h>
+#include <linux/spinlock.h>
 
 /*
  * The second CPU is parked in ROM at boot time. It requires waking it after
diff --git a/drivers/soc/renesas/renesas-soc.c b/drivers/soc/renesas/renesas-soc.c
index 8f9b8d3736dc..e71ab20d24b3 100644
--- a/drivers/soc/renesas/renesas-soc.c
+++ b/drivers/soc/renesas/renesas-soc.c
@@ -9,6 +9,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sys_soc.h>
 
diff --git a/drivers/soc/tegra/cbb/tegra234-cbb.c b/drivers/soc/tegra/cbb/tegra234-cbb.c
index 5cf0e8c34164..28cae1b5a31f 100644
--- a/drivers/soc/tegra/cbb/tegra234-cbb.c
+++ b/drivers/soc/tegra/cbb/tegra234-cbb.c
@@ -21,6 +21,7 @@
 #include <linux/io.h>
 #include <linux/interrupt.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 #include <soc/tegra/fuse.h>
 #include <soc/tegra/tegra-cbb.h>
 
diff --git a/drivers/soc/tegra/fuse/fuse-tegra.c b/drivers/soc/tegra/fuse/fuse-tegra.c
index b6bfd6729df3..b5c892f96c88 100644
--- a/drivers/soc/tegra/fuse/fuse-tegra.c
+++ b/drivers/soc/tegra/fuse/fuse-tegra.c
@@ -18,6 +18,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 
 #include <soc/tegra/common.h>
diff --git a/drivers/soc/tegra/pmc.c b/drivers/soc/tegra/pmc.c
index 6dfcc7f50ece..ffa3e4f0d68b 100644
--- a/drivers/soc/tegra/pmc.c
+++ b/drivers/soc/tegra/pmc.c
@@ -47,6 +47,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/syscore_ops.h>
 
 #include <soc/tegra/common.h>
diff --git a/drivers/soc/ti/k3-ringacc.c b/drivers/soc/ti/k3-ringacc.c
index fd4251d75935..a822f50b14b4 100644
--- a/drivers/soc/ti/k3-ringacc.c
+++ b/drivers/soc/ti/k3-ringacc.c
@@ -7,6 +7,7 @@
 
 #include <linux/dma-mapping.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
diff --git a/drivers/soc/ti/k3-socinfo.c b/drivers/soc/ti/k3-socinfo.c
index 59101bf7cf23..2befb7272f9a 100644
--- a/drivers/soc/ti/k3-socinfo.c
+++ b/drivers/soc/ti/k3-socinfo.c
@@ -11,6 +11,7 @@
 #include <linux/regmap.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sys_soc.h>
 
diff --git a/drivers/soc/ti/knav_qmss_acc.c b/drivers/soc/ti/knav_qmss_acc.c
index 3d388646ed43..6c67bf37e599 100644
--- a/drivers/soc/ti/knav_qmss_acc.c
+++ b/drivers/soc/ti/knav_qmss_acc.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/of_address.h>
 #include <linux/soc/ti/knav_qmss.h>
+#include <linux/sprintf.h>
 
 #include "knav_qmss.h"
 
diff --git a/drivers/soc/ti/knav_qmss_queue.c b/drivers/soc/ti/knav_qmss_queue.c
index 06fb5505c22c..a408eec8d002 100644
--- a/drivers/soc/ti/knav_qmss_queue.c
+++ b/drivers/soc/ti/knav_qmss_queue.c
@@ -22,6 +22,7 @@
 #include <linux/property.h>
 #include <linux/slab.h>
 #include <linux/soc/ti/knav_qmss.h>
+#include <linux/sprintf.h>
 
 #include "knav_qmss.h"
 
diff --git a/drivers/soc/ti/pruss.c b/drivers/soc/ti/pruss.c
index 24a42e0b645c..f17bb1a228c0 100644
--- a/drivers/soc/ti/pruss.c
+++ b/drivers/soc/ti/pruss.c
@@ -24,6 +24,7 @@
 #include <linux/remoteproc.h>
 #include <linux/slab.h>
 #include "pruss.h"
+#include <linux/sprintf.h>
 
 /**
  * struct pruss_private_data - PRUSS driver private data
diff --git a/drivers/soc/ti/smartreflex.c b/drivers/soc/ti/smartreflex.c
index d6219060b616..409bbc530e31 100644
--- a/drivers/soc/ti/smartreflex.c
+++ b/drivers/soc/ti/smartreflex.c
@@ -24,6 +24,7 @@
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
 #include <linux/power/smartreflex.h>
+#include <linux/sprintf.h>
 
 #define DRIVER_NAME	"smartreflex"
 #define SMARTREFLEX_NAME_LEN	32
diff --git a/drivers/soc/ti/wkup_m3_ipc.c b/drivers/soc/ti/wkup_m3_ipc.c
index 6a1c6b34c414..2e1536afb868 100644
--- a/drivers/soc/ti/wkup_m3_ipc.c
+++ b/drivers/soc/ti/wkup_m3_ipc.c
@@ -21,6 +21,7 @@
 #include <linux/remoteproc.h>
 #include <linux/suspend.h>
 #include <linux/wkup_m3_ipc.h>
+#include <linux/completion.h>
 
 #define AM33XX_CTRL_IPC_REG_COUNT	0x8
 #define AM33XX_CTRL_IPC_REG_OFFSET(m)	(0x4 + 4 * (m))
diff --git a/drivers/soc/ux500/ux500-soc-id.c b/drivers/soc/ux500/ux500-soc-id.c
index 27d6e25a0115..0e24518a7cdf 100644
--- a/drivers/soc/ux500/ux500-soc-id.c
+++ b/drivers/soc/ux500/ux500-soc-id.c
@@ -5,6 +5,7 @@
  * Author: Rabin Vincent <rabin.vincent@stericsson.com> for ST-Ericsson
  */
 
+#include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/io.h>
@@ -13,6 +14,8 @@
 #include <linux/slab.h>
 #include <linux/of.h>
 #include <linux/of_address.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <linux/sys_soc.h>
 
 #include <asm/cputype.h>
diff --git a/drivers/soc/versatile/soc-integrator.c b/drivers/soc/versatile/soc-integrator.c
index bab4ad87aa75..fbce95a22c22 100644
--- a/drivers/soc/versatile/soc-integrator.c
+++ b/drivers/soc/versatile/soc-integrator.c
@@ -7,6 +7,7 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/platform_device.h>
 #include <linux/mfd/syscon.h>
diff --git a/drivers/soc/versatile/soc-realview.c b/drivers/soc/versatile/soc-realview.c
index c6876d232d8f..e0d715becfad 100644
--- a/drivers/soc/versatile/soc-realview.c
+++ b/drivers/soc/versatile/soc-realview.c
@@ -7,6 +7,7 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sys_soc.h>
 #include <linux/platform_device.h>
 #include <linux/mfd/syscon.h>
diff --git a/drivers/soc/xilinx/zynqmp_power.c b/drivers/soc/xilinx/zynqmp_power.c
index 965b1143936a..78a8d211392f 100644
--- a/drivers/soc/xilinx/zynqmp_power.c
+++ b/drivers/soc/xilinx/zynqmp_power.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 
 #include <linux/firmware/xlnx-zynqmp.h>
diff --git a/drivers/soundwire/amd_manager.c b/drivers/soundwire/amd_manager.c
index 7cd24bd8e224..6d2eb6a14777 100644
--- a/drivers/soundwire/amd_manager.c
+++ b/drivers/soundwire/amd_manager.c
@@ -15,6 +15,7 @@
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_registers.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/drivers/soundwire/bus.c b/drivers/soundwire/bus.c
index f3fec15c3112..50be6901d290 100644
--- a/drivers/soundwire/bus.c
+++ b/drivers/soundwire/bus.c
@@ -2,7 +2,9 @@
 // Copyright(c) 2015-17 Intel Corporation.
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
+#include <linux/idr.h>
 #include <linux/mod_devicetable.h>
 #include <linux/pm_runtime.h>
 #include <linux/soundwire/sdw_registers.h>
diff --git a/drivers/soundwire/bus_type.c b/drivers/soundwire/bus_type.c
index 9fa93bb923d7..c0836765047b 100644
--- a/drivers/soundwire/bus_type.c
+++ b/drivers/soundwire/bus_type.c
@@ -9,6 +9,7 @@
 #include "bus.h"
 #include "irq.h"
 #include "sysfs_local.h"
+#include <linux/sprintf.h>
 
 /**
  * sdw_get_device_id - find the matching SoundWire device id
diff --git a/drivers/soundwire/cadence_master.c b/drivers/soundwire/cadence_master.c
index 0efc1c3bee5f..0394c7c57f02 100644
--- a/drivers/soundwire/cadence_master.c
+++ b/drivers/soundwire/cadence_master.c
@@ -16,11 +16,13 @@
 #include <linux/pm_runtime.h>
 #include <linux/soundwire/sdw_registers.h>
 #include <linux/soundwire/sdw.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
 #include <linux/workqueue.h>
 #include "bus.h"
 #include "cadence_master.h"
+#include <linux/completion.h>
 
 static int interrupt_mask;
 module_param_named(cnds_mcp_int_mask, interrupt_mask, int, 0444);
diff --git a/drivers/soundwire/debugfs.c b/drivers/soundwire/debugfs.c
index 67abd7e52f09..1877d4e7df98 100644
--- a/drivers/soundwire/debugfs.c
+++ b/drivers/soundwire/debugfs.c
@@ -9,6 +9,7 @@
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_registers.h>
 #include "bus.h"
+#include <linux/sprintf.h>
 
 static struct dentry *sdw_debugfs_root;
 
diff --git a/drivers/soundwire/intel.c b/drivers/soundwire/intel.c
index 1287a325c435..3378cd755a50 100644
--- a/drivers/soundwire/intel.c
+++ b/drivers/soundwire/intel.c
@@ -9,6 +9,7 @@
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include <linux/pm_runtime.h>
 #include <sound/soc.h>
diff --git a/drivers/soundwire/intel_ace2x_debugfs.c b/drivers/soundwire/intel_ace2x_debugfs.c
index 3d24661ffd37..9f878da1bd1c 100644
--- a/drivers/soundwire/intel_ace2x_debugfs.c
+++ b/drivers/soundwire/intel_ace2x_debugfs.c
@@ -13,6 +13,7 @@
 #include "bus.h"
 #include "cadence_master.h"
 #include "intel.h"
+#include <linux/sprintf.h>
 
 /*
  * debugfs
diff --git a/drivers/soundwire/intel_auxdevice.c b/drivers/soundwire/intel_auxdevice.c
index 95125cc2fc59..2ec58894a863 100644
--- a/drivers/soundwire/intel_auxdevice.c
+++ b/drivers/soundwire/intel_auxdevice.c
@@ -9,9 +9,11 @@
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/module.h>
+#include <linux/idr.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/auxiliary_bus.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include <linux/pm_runtime.h>
 #include <sound/soc.h>
diff --git a/drivers/soundwire/master.c b/drivers/soundwire/master.c
index 51abedbbaa66..d9a0dbe09e8e 100644
--- a/drivers/soundwire/master.c
+++ b/drivers/soundwire/master.c
@@ -7,6 +7,7 @@
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_type.h>
 #include "bus.h"
+#include <linux/sprintf.h>
 
 /*
  * The 3s value for autosuspend will only be used if there are no
diff --git a/drivers/soundwire/mipi_disco.c b/drivers/soundwire/mipi_disco.c
index 55a9c51c84c1..f5ff6f365398 100644
--- a/drivers/soundwire/mipi_disco.c
+++ b/drivers/soundwire/mipi_disco.c
@@ -22,6 +22,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/soundwire/sdw.h>
 #include "bus.h"
+#include <linux/sprintf.h>
 
 /**
  * sdw_master_read_prop() - Read Master properties
diff --git a/drivers/soundwire/slave.c b/drivers/soundwire/slave.c
index 060c2982e26b..7b776b221bee 100644
--- a/drivers/soundwire/slave.c
+++ b/drivers/soundwire/slave.c
@@ -2,11 +2,13 @@
 // Copyright(c) 2015-17 Intel Corporation.
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/of.h>
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_type.h>
 #include "bus.h"
 #include "sysfs_local.h"
+#include <linux/sprintf.h>
 
 static void sdw_slave_release(struct device *dev)
 {
diff --git a/drivers/soundwire/stream.c b/drivers/soundwire/stream.c
index f9c0adc0738d..d6ed7cff5ca7 100644
--- a/drivers/soundwire/stream.c
+++ b/drivers/soundwire/stream.c
@@ -14,8 +14,10 @@
 #include <linux/soundwire/sdw_registers.h>
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_type.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include "bus.h"
+#include <linux/completion.h>
 
 /*
  * Array of supported rows and columns as per MIPI SoundWire Specification 1.1
diff --git a/drivers/soundwire/sysfs_slave.c b/drivers/soundwire/sysfs_slave.c
index 3210359cd944..1f7a9e4bd0f1 100644
--- a/drivers/soundwire/sysfs_slave.c
+++ b/drivers/soundwire/sysfs_slave.c
@@ -4,6 +4,7 @@
 #include <linux/device.h>
 #include <linux/mod_devicetable.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_type.h>
diff --git a/drivers/soundwire/sysfs_slave_dpn.c b/drivers/soundwire/sysfs_slave_dpn.c
index c4b6543c09fd..33c5b36c2c2a 100644
--- a/drivers/soundwire/sysfs_slave_dpn.c
+++ b/drivers/soundwire/sysfs_slave_dpn.c
@@ -4,6 +4,7 @@
 #include <linux/device.h>
 #include <linux/mod_devicetable.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/soundwire/sdw.h>
 #include <linux/soundwire/sdw_type.h>
diff --git a/drivers/spi/atmel-quadspi.c b/drivers/spi/atmel-quadspi.c
index 370c4d1572ed..9ac41a1279c8 100644
--- a/drivers/spi/atmel-quadspi.c
+++ b/drivers/spi/atmel-quadspi.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/interrupt.h>
@@ -23,6 +24,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/spi/spi-mem.h>
+#include <linux/sprintf.h>
 
 /* QSPI register offsets */
 #define QSPI_CR      0x0000  /* Control Register */
diff --git a/drivers/spi/spi-at91-usart.c b/drivers/spi/spi-at91-usart.c
index 1cea8e159344..163077858f85 100644
--- a/drivers/spi/spi-at91-usart.c
+++ b/drivers/spi/spi-at91-usart.c
@@ -7,6 +7,7 @@
 // Author: Radu Pirea <radu.pirea@microchip.com>
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-direction.h>
diff --git a/drivers/spi/spi-atmel.c b/drivers/spi/spi-atmel.c
index bad34998454a..75d45bd37747 100644
--- a/drivers/spi/spi-atmel.c
+++ b/drivers/spi/spi-atmel.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/delay.h>
diff --git a/drivers/spi/spi-bcm-qspi.c b/drivers/spi/spi-bcm-qspi.c
index cfdaa5eaec76..4fe4e1811dc6 100644
--- a/drivers/spi/spi-bcm-qspi.c
+++ b/drivers/spi/spi-bcm-qspi.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/init.h>
diff --git a/drivers/spi/spi-bcm2835.c b/drivers/spi/spi-bcm2835.c
index e1b9b1235787..c6f6b24acecb 100644
--- a/drivers/spi/spi-bcm2835.c
+++ b/drivers/spi/spi-bcm2835.c
@@ -32,6 +32,7 @@
 #include <linux/overflow.h>
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 /* SPI register offsets */
 #define BCM2835_SPI_CS			0x00
diff --git a/drivers/spi/spi-bcm2835aux.c b/drivers/spi/spi-bcm2835aux.c
index 06fe155a70c9..0f8028e8701f 100644
--- a/drivers/spi/spi-bcm2835aux.c
+++ b/drivers/spi/spi-bcm2835aux.c
@@ -24,6 +24,7 @@
 #include <linux/regmap.h>
 #include <linux/spi/spi.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 /* define polling limits */
 static unsigned int polling_limit_us = 30;
diff --git a/drivers/spi/spi-bcm63xx-hsspi.c b/drivers/spi/spi-bcm63xx-hsspi.c
index 1ca857c2a4aa..9830892d7641 100644
--- a/drivers/spi/spi-bcm63xx-hsspi.c
+++ b/drivers/spi/spi-bcm63xx-hsspi.c
@@ -11,6 +11,8 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/delay.h>
@@ -24,6 +26,7 @@
 #include <linux/mtd/spi-nor.h>
 #include <linux/reset.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #define HSSPI_GLOBAL_CTRL_REG			0x0
 #define GLOBAL_CTRL_CS_POLARITY_SHIFT		0
diff --git a/drivers/spi/spi-bcm63xx.c b/drivers/spi/spi-bcm63xx.c
index aac41bd05f98..19a3b9bd20f5 100644
--- a/drivers/spi/spi-bcm63xx.c
+++ b/drivers/spi/spi-bcm63xx.c
@@ -8,6 +8,7 @@
 
 #include <linux/kernel.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
diff --git a/drivers/spi/spi-bcmbca-hsspi.c b/drivers/spi/spi-bcmbca-hsspi.c
index 9f64afd8164e..9c8953131360 100644
--- a/drivers/spi/spi-bcmbca-hsspi.c
+++ b/drivers/spi/spi-bcmbca-hsspi.c
@@ -11,6 +11,8 @@
 #include <linux/init.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/delay.h>
@@ -22,6 +24,7 @@
 #include <linux/of.h>
 #include <linux/spi/spi-mem.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #define HSSPI_GLOBAL_CTRL_REG			0x0
 #define GLOBAL_CTRL_CS_POLARITY_SHIFT		0
diff --git a/drivers/spi/spi-davinci.c b/drivers/spi/spi-davinci.c
index be3998104bfb..71ccf95267cb 100644
--- a/drivers/spi/spi-davinci.c
+++ b/drivers/spi/spi-davinci.c
@@ -12,6 +12,7 @@
 #include <linux/platform_device.h>
 #include <linux/err.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/of.h>
diff --git a/drivers/spi/spi-dw-core.c b/drivers/spi/spi-dw-core.c
index 0274c9295514..cd8f7b2427c0 100644
--- a/drivers/spi/spi-dw-core.c
+++ b/drivers/spi/spi-dw-core.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
 #include <linux/spi/spi-mem.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/of.h>
 
diff --git a/drivers/spi/spi-fsl-cpm.c b/drivers/spi/spi-fsl-cpm.c
index 47c7a5c6257f..7b1f9770ce3f 100644
--- a/drivers/spi/spi-fsl-cpm.c
+++ b/drivers/spi/spi-fsl-cpm.c
@@ -12,6 +12,7 @@
  * Author: Anton Vorontsov <avorontsov@ru.mvista.com>
  */
 #include <asm/cpm.h>
+#include <linux/completion.h>
 #include <soc/fsl/qe/qe.h>
 #include <linux/dma-mapping.h>
 #include <linux/fsl_devices.h>
diff --git a/drivers/spi/spi-fsl-dspi.c b/drivers/spi/spi-fsl-dspi.c
index 38defdcf9370..2d2ee04854ac 100644
--- a/drivers/spi/spi-fsl-dspi.c
+++ b/drivers/spi/spi-fsl-dspi.c
@@ -7,6 +7,7 @@
 // This file contains a driver for the Freescale DSPI
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/spi/spi-fsl-espi.c b/drivers/spi/spi-fsl-espi.c
index ea647ee94da8..baa1308a5967 100644
--- a/drivers/spi/spi-fsl-espi.c
+++ b/drivers/spi/spi-fsl-espi.c
@@ -18,6 +18,7 @@
 #include <linux/spi/spi.h>
 #include <linux/pm_runtime.h>
 #include <sysdev/fsl_soc.h>
+#include <linux/completion.h>
 
 /* eSPI Controller registers */
 #define ESPI_SPMODE	0x00	/* eSPI mode register */
diff --git a/drivers/spi/spi-fsl-lib.c b/drivers/spi/spi-fsl-lib.c
index 4fc2c56555b5..ea473b9f6565 100644
--- a/drivers/spi/spi-fsl-lib.c
+++ b/drivers/spi/spi-fsl-lib.c
@@ -21,6 +21,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/spi/spi.h>
+#include <linux/completion.h>
 #ifdef CONFIG_FSL_SOC
 #include <sysdev/fsl_soc.h>
 #endif
diff --git a/drivers/spi/spi-fsl-spi.c b/drivers/spi/spi-fsl-spi.c
index 97faf984801f..4535b4d3515b 100644
--- a/drivers/spi/spi-fsl-spi.c
+++ b/drivers/spi/spi-fsl-spi.c
@@ -33,6 +33,7 @@
 #include <linux/spi/spi.h>
 #include <linux/spi/spi_bitbang.h>
 #include <linux/types.h>
+#include <linux/completion.h>
 
 #ifdef CONFIG_FSL_SOC
 #include <sysdev/fsl_soc.h>
diff --git a/drivers/spi/spi-geni-qcom.c b/drivers/spi/spi-geni-qcom.c
index 37ef8c40b276..442d5823ec6a 100644
--- a/drivers/spi/spi-geni-qcom.c
+++ b/drivers/spi/spi-geni-qcom.c
@@ -2,6 +2,7 @@
 // Copyright (c) 2017-2018, The Linux foundation. All rights reserved.
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/dma/qcom-gpi-dma.h>
diff --git a/drivers/spi/spi-hisi-kunpeng.c b/drivers/spi/spi-hisi-kunpeng.c
index 35ef5e8e2ffd..688b9bb223d8 100644
--- a/drivers/spi/spi-hisi-kunpeng.c
+++ b/drivers/spi/spi-hisi-kunpeng.c
@@ -18,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 
 /* Register offsets */
 #define HISI_SPI_CSCR		0x00	/* cs control register */
diff --git a/drivers/spi/spi-intel.c b/drivers/spi/spi-intel.c
index 3e5dcf2b3c8a..11fdbd9dd458 100644
--- a/drivers/spi/spi-intel.c
+++ b/drivers/spi/spi-intel.c
@@ -8,6 +8,7 @@
 
 #include <linux/iopoll.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/mtd/partitions.h>
 #include <linux/mtd/spi-nor.h>
diff --git a/drivers/spi/spi-meson-spicc.c b/drivers/spi/spi-meson-spicc.c
index fc75492e50ff..42d4217a7593 100644
--- a/drivers/spi/spi-meson-spicc.c
+++ b/drivers/spi/spi-meson-spicc.c
@@ -10,6 +10,7 @@
 #include <linux/bitfield.h>
 #include <linux/clk.h>
 #include <linux/clk-provider.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
@@ -17,6 +18,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/interrupt.h>
 #include <linux/reset.h>
diff --git a/drivers/spi/spi-microchip-core-qspi.c b/drivers/spi/spi-microchip-core-qspi.c
index 03d125a71fd9..e01745dfaf0d 100644
--- a/drivers/spi/spi-microchip-core-qspi.c
+++ b/drivers/spi/spi-microchip-core-qspi.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
diff --git a/drivers/spi/spi-mpc52xx.c b/drivers/spi/spi-mpc52xx.c
index d5ac60c135c2..7016b7fa2a18 100644
--- a/drivers/spi/spi-mpc52xx.c
+++ b/drivers/spi/spi-mpc52xx.c
@@ -23,6 +23,7 @@
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
+#include <linux/completion.h>
 
 #include <asm/time.h>
 #include <asm/mpc52xx.h>
diff --git a/drivers/spi/spi-mt65xx.c b/drivers/spi/spi-mt65xx.c
index 8d4633b353ee..63ef085d81b8 100644
--- a/drivers/spi/spi-mt65xx.c
+++ b/drivers/spi/spi-mt65xx.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/interrupt.h>
diff --git a/drivers/spi/spi-mtk-snfi.c b/drivers/spi/spi-mtk-snfi.c
index ddd98ddb7913..32f896879c91 100644
--- a/drivers/spi/spi-mtk-snfi.c
+++ b/drivers/spi/spi-mtk-snfi.c
@@ -73,6 +73,7 @@
 #include <linux/device.h>
 #include <linux/mutex.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/dma-mapping.h>
 #include <linux/iopoll.h>
diff --git a/drivers/spi/spi-mxs.c b/drivers/spi/spi-mxs.c
index 1bf080339b5a..6d5d206f9405 100644
--- a/drivers/spi/spi-mxs.c
+++ b/drivers/spi/spi-mxs.c
@@ -29,6 +29,7 @@
 #include <linux/dmaengine.h>
 #include <linux/highmem.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/completion.h>
 #include <linux/pinctrl/consumer.h>
diff --git a/drivers/spi/spi-npcm-pspi.c b/drivers/spi/spi-npcm-pspi.c
index a7feb20b06ee..cf3e1b82efbc 100644
--- a/drivers/spi/spi-npcm-pspi.c
+++ b/drivers/spi/spi-npcm-pspi.c
@@ -5,6 +5,7 @@
 #include <linux/bitfield.h>
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/module.h>
diff --git a/drivers/spi/spi-oc-tiny.c b/drivers/spi/spi-oc-tiny.c
index 6ea38f5e7d64..6f38495823d7 100644
--- a/drivers/spi/spi-oc-tiny.c
+++ b/drivers/spi/spi-oc-tiny.c
@@ -21,6 +21,7 @@
 #include <linux/spi/spi_oc_tiny.h>
 #include <linux/io.h>
 #include <linux/of.h>
+#include <linux/completion.h>
 
 #define DRV_NAME "spi_oc_tiny"
 
diff --git a/drivers/spi/spi-omap2-mcspi.c b/drivers/spi/spi-omap2-mcspi.c
index a0c9fea908f5..8fe26e0ed00f 100644
--- a/drivers/spi/spi-omap2-mcspi.c
+++ b/drivers/spi/spi-omap2-mcspi.c
@@ -18,12 +18,14 @@
 #include <linux/platform_device.h>
 #include <linux/err.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/gcd.h>
+#include <linux/sprintf.h>
 
 #include <linux/spi/spi.h>
 
diff --git a/drivers/spi/spi-pci1xxxx.c b/drivers/spi/spi-pci1xxxx.c
index a99db6163aec..ab99aac85eb9 100644
--- a/drivers/spi/spi-pci1xxxx.c
+++ b/drivers/spi/spi-pci1xxxx.c
@@ -16,6 +16,7 @@
 #include <linux/spinlock.h>
 #include <linux/spi/spi.h>
 #include <linux/delay.h>
+#include <linux/completion.h>
 
 #define DRV_NAME "spi-pci1xxxx"
 
diff --git a/drivers/spi/spi-pic32-sqi.c b/drivers/spi/spi-pic32-sqi.c
index 3f1e5b27776b..74d8d7d752dd 100644
--- a/drivers/spi/spi-pic32-sqi.c
+++ b/drivers/spi/spi-pic32-sqi.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/spi/spi-pic32.c b/drivers/spi/spi-pic32.c
index f55b38c577e4..f360cdd66976 100644
--- a/drivers/spi/spi-pic32.c
+++ b/drivers/spi/spi-pic32.c
@@ -8,6 +8,7 @@
 
 #include <linux/clk.h>
 #include <linux/clkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/spi/spi-ppc4xx.c b/drivers/spi/spi-ppc4xx.c
index 942c3117ab3a..d405ab6aa132 100644
--- a/drivers/spi/spi-ppc4xx.c
+++ b/drivers/spi/spi-ppc4xx.c
@@ -23,6 +23,7 @@
 #include <linux/module.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 #include <linux/errno.h>
 #include <linux/wait.h>
 #include <linux/platform_device.h>
diff --git a/drivers/spi/spi-pxa2xx-pci.c b/drivers/spi/spi-pxa2xx-pci.c
index 861b21c63504..1b243c88101f 100644
--- a/drivers/spi/spi-pxa2xx-pci.c
+++ b/drivers/spi/spi-pxa2xx-pci.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <linux/spi/pxa2xx_spi.h>
 
diff --git a/drivers/spi/spi-qup.c b/drivers/spi/spi-qup.c
index 2af63040ac6e..f109ef3cb5a7 100644
--- a/drivers/spi/spi-qup.c
+++ b/drivers/spi/spi-qup.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/err.h>
 #include <linux/interconnect.h>
diff --git a/drivers/spi/spi-s3c64xx.c b/drivers/spi/spi-s3c64xx.c
index 6f29dca68491..526e6dd37eb1 100644
--- a/drivers/spi/spi-s3c64xx.c
+++ b/drivers/spi/spi-s3c64xx.c
@@ -5,6 +5,7 @@
 
 #include <linux/bits.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
@@ -17,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 
 #define MAX_SPI_PORTS		16
diff --git a/drivers/spi/spi-sh.c b/drivers/spi/spi-sh.c
index 4b873d9a7602..47c6b82ce1a8 100644
--- a/drivers/spi/spi-sh.c
+++ b/drivers/spi/spi-sh.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/io.h>
 #include <linux/spi/spi.h>
+#include <linux/completion.h>
 
 #define SPI_SH_TBR		0x00
 #define SPI_SH_RBR		0x00
diff --git a/drivers/spi/spi-sifive.c b/drivers/spi/spi-sifive.c
index cfd17bbb2202..f2df0a64884d 100644
--- a/drivers/spi/spi-sifive.c
+++ b/drivers/spi/spi-sifive.c
@@ -8,6 +8,7 @@
 // sifive@sifive.com
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/of.h>
diff --git a/drivers/spi/spi-slave-mt27xx.c b/drivers/spi/spi-slave-mt27xx.c
index f1ddf4c099a3..53c0ff260e82 100644
--- a/drivers/spi/spi-slave-mt27xx.c
+++ b/drivers/spi/spi-slave-mt27xx.c
@@ -2,6 +2,7 @@
 // Copyright (c) 2018 MediaTek Inc.
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
 #include <linux/err.h>
diff --git a/drivers/spi/spi-sprd.c b/drivers/spi/spi-sprd.c
index 831ebae10fe0..b527f276baf4 100644
--- a/drivers/spi/spi-sprd.c
+++ b/drivers/spi/spi-sprd.c
@@ -2,6 +2,7 @@
 // Copyright (C) 2018 Spreadtrum Communications Inc.
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/dma/sprd-dma.h>
diff --git a/drivers/spi/spi-st-ssc4.c b/drivers/spi/spi-st-ssc4.c
index e064025e2fd6..0d9874a72157 100644
--- a/drivers/spi/spi-st-ssc4.c
+++ b/drivers/spi/spi-st-ssc4.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/spi/spi-stm32-qspi.c b/drivers/spi/spi-stm32-qspi.c
index 385832030459..5d9db55b1f03 100644
--- a/drivers/spi/spi-stm32-qspi.c
+++ b/drivers/spi/spi-stm32-qspi.c
@@ -5,6 +5,7 @@
  */
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
 #include <linux/errno.h>
diff --git a/drivers/spi/spi-stm32.c b/drivers/spi/spi-stm32.c
index c32e57bb38bd..eca3935f0da8 100644
--- a/drivers/spi/spi-stm32.c
+++ b/drivers/spi/spi-stm32.c
@@ -17,6 +17,7 @@
 #include <linux/platform_device.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/pm_runtime.h>
+#include <linux/ratelimit.h>
 #include <linux/reset.h>
 #include <linux/spi/spi.h>
 
diff --git a/drivers/spi/spi-sun4i.c b/drivers/spi/spi-sun4i.c
index 11d8bd27b3e9..574d3306d28a 100644
--- a/drivers/spi/spi-sun4i.c
+++ b/drivers/spi/spi-sun4i.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
diff --git a/drivers/spi/spi-sun6i.c b/drivers/spi/spi-sun6i.c
index cd018ea1abf1..f9fbbeb3ba4b 100644
--- a/drivers/spi/spi-sun6i.c
+++ b/drivers/spi/spi-sun6i.c
@@ -9,6 +9,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/interrupt.h>
diff --git a/drivers/spi/spi-sunplus-sp7021.c b/drivers/spi/spi-sunplus-sp7021.c
index 4e481380c259..4633c5b7224d 100644
--- a/drivers/spi/spi-sunplus-sp7021.c
+++ b/drivers/spi/spi-sunplus-sp7021.c
@@ -4,6 +4,7 @@
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
diff --git a/drivers/spi/spi-synquacer.c b/drivers/spi/spi-synquacer.c
index 7cb4301a6fb2..2a71752cd261 100644
--- a/drivers/spi/spi-synquacer.c
+++ b/drivers/spi/spi-synquacer.c
@@ -7,6 +7,7 @@
 //
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
@@ -19,6 +20,7 @@
 #include <linux/spi/spi.h>
 #include <linux/spinlock.h>
 #include <linux/clk.h>
+#include <linux/sprintf.h>
 
 /* HSSPI register address definitions */
 #define SYNQUACER_HSSPI_REG_MCTRL	0x00
diff --git a/drivers/spi/spi-ti-qspi.c b/drivers/spi/spi-ti-qspi.c
index 0fe6899e78dd..9dab313f76a1 100644
--- a/drivers/spi/spi-ti-qspi.c
+++ b/drivers/spi/spi-ti-qspi.c
@@ -18,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/err.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/spi/spi-tle62x0.c b/drivers/spi/spi-tle62x0.c
index a565352f6381..975a2d9b3a06 100644
--- a/drivers/spi/spi-tle62x0.c
+++ b/drivers/spi/spi-tle62x0.c
@@ -8,8 +8,10 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/spi/spi.h>
 #include <linux/spi/tle62x0.h>
diff --git a/drivers/spi/spi-topcliff-pch.c b/drivers/spi/spi-topcliff-pch.c
index 271f3e7f834b..5c8cfbc93087 100644
--- a/drivers/spi/spi-topcliff-pch.c
+++ b/drivers/spi/spi-topcliff-pch.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/platform_device.h>
+#include <linux/completion.h>
 
 #include <linux/dmaengine.h>
 #include <linux/pch_dma.h>
diff --git a/drivers/spi/spi-uniphier.c b/drivers/spi/spi-uniphier.c
index 4a18cf896194..b82a29b6a4d6 100644
--- a/drivers/spi/spi-uniphier.c
+++ b/drivers/spi/spi-uniphier.c
@@ -7,6 +7,7 @@
 #include <linux/bitfield.h>
 #include <linux/bitops.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dmaengine.h>
 #include <linux/interrupt.h>
diff --git a/drivers/spi/spi-xilinx.c b/drivers/spi/spi-xilinx.c
index 7795328427a6..7bc03490a45d 100644
--- a/drivers/spi/spi-xilinx.c
+++ b/drivers/spi/spi-xilinx.c
@@ -19,6 +19,7 @@
 #include <linux/spi/spi_bitbang.h>
 #include <linux/spi/xilinx_spi.h>
 #include <linux/io.h>
+#include <linux/completion.h>
 
 #define XILINX_SPI_MAX_CS	32
 
diff --git a/drivers/spi/spi-xlp.c b/drivers/spi/spi-xlp.c
index 49302364b7bd..2994638c7b83 100644
--- a/drivers/spi/spi-xlp.c
+++ b/drivers/spi/spi-xlp.c
@@ -5,6 +5,7 @@
  */
 #include <linux/acpi.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
diff --git a/drivers/spi/spi-zynq-qspi.c b/drivers/spi/spi-zynq-qspi.c
index d6325c6be3d4..c28f5d52f2fe 100644
--- a/drivers/spi/spi-zynq-qspi.c
+++ b/drivers/spi/spi-zynq-qspi.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
diff --git a/drivers/spi/spi-zynqmp-gqspi.c b/drivers/spi/spi-zynqmp-gqspi.c
index 99524a3c9f38..7b9a0c7e4b95 100644
--- a/drivers/spi/spi-zynqmp-gqspi.c
+++ b/drivers/spi/spi-zynqmp-gqspi.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
diff --git a/drivers/spi/spi.c b/drivers/spi/spi.c
index c2b10e2c75f0..220b147ee0b6 100644
--- a/drivers/spi/spi.c
+++ b/drivers/spi/spi.c
@@ -7,6 +7,7 @@
 #include <linux/acpi.h>
 #include <linux/cache.h>
 #include <linux/clk/clk-conf.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/dmaengine.h>
@@ -33,6 +34,7 @@
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
 #include <linux/spi/spi-mem.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/sched/types.h>
 
 #define CREATE_TRACE_POINTS
diff --git a/drivers/ssb/driver_chipcommon_pmu.c b/drivers/ssb/driver_chipcommon_pmu.c
index 888069e10659..1eb7937a9243 100644
--- a/drivers/ssb/driver_chipcommon_pmu.c
+++ b/drivers/ssb/driver_chipcommon_pmu.c
@@ -9,6 +9,7 @@
  */
 
 #include "ssb_private.h"
+#include <linux/kstrtox.h>
 
 #include <linux/ssb/ssb.h>
 #include <linux/ssb/ssb_regs.h>
diff --git a/drivers/ssb/host_soc.c b/drivers/ssb/host_soc.c
index 3b438480515c..474d92acfe7c 100644
--- a/drivers/ssb/host_soc.c
+++ b/drivers/ssb/host_soc.c
@@ -9,6 +9,7 @@
  */
 
 #include "ssb_private.h"
+#include <linux/kstrtox.h>
 
 #include <linux/bcm47xx_nvram.h>
 #include <linux/ssb/ssb.h>
diff --git a/drivers/ssb/main.c b/drivers/ssb/main.c
index 9f30e0edadfe..4a9a9388f56b 100644
--- a/drivers/ssb/main.c
+++ b/drivers/ssb/main.c
@@ -9,6 +9,7 @@
  */
 
 #include "ssb_private.h"
+#include <linux/sprintf.h>
 
 #include <linux/delay.h>
 #include <linux/io.h>
diff --git a/drivers/ssb/sprom.c b/drivers/ssb/sprom.c
index 7cd553127861..9d07beeaefa5 100644
--- a/drivers/ssb/sprom.c
+++ b/drivers/ssb/sprom.c
@@ -12,6 +12,8 @@
  */
 
 #include "ssb_private.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/ctype.h>
 #include <linux/slab.h>
diff --git a/drivers/staging/axis-fifo/axis-fifo.c b/drivers/staging/axis-fifo/axis-fifo.c
index 727b956aa231..e306681b3777 100644
--- a/drivers/staging/axis-fifo/axis-fifo.c
+++ b/drivers/staging/axis-fifo/axis-fifo.c
@@ -15,8 +15,10 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/mutex.h>
 #include <linux/device.h>
diff --git a/drivers/staging/fbtft/fb_ssd1351.c b/drivers/staging/fbtft/fb_ssd1351.c
index b8d55aa8c5c7..ca4145ee1f67 100644
--- a/drivers/staging/fbtft/fb_ssd1351.c
+++ b/drivers/staging/fbtft/fb_ssd1351.c
@@ -1,4 +1,5 @@
 // SPDX-License-Identifier: GPL-2.0
+#include <linux/backlight.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/drivers/staging/fbtft/fb_st7789v.c b/drivers/staging/fbtft/fb_st7789v.c
index 861a154144e6..f7f10b2cee50 100644
--- a/drivers/staging/fbtft/fb_st7789v.c
+++ b/drivers/staging/fbtft/fb_st7789v.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/gpio/consumer.h>
 #include <linux/init.h>
diff --git a/drivers/staging/fbtft/fbtft-core.c b/drivers/staging/fbtft/fbtft-core.c
index 68add4d598ae..579c1fde7f62 100644
--- a/drivers/staging/fbtft/fbtft-core.c
+++ b/drivers/staging/fbtft/fbtft-core.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/staging/fbtft/fbtft-sysfs.c b/drivers/staging/fbtft/fbtft-sysfs.c
index 39e8d28066cb..571538ba558f 100644
--- a/drivers/staging/fbtft/fbtft-sysfs.c
+++ b/drivers/staging/fbtft/fbtft-sysfs.c
@@ -1,6 +1,8 @@
 // SPDX-License-Identifier: GPL-2.0
 #include "fbtft.h"
 #include "internal.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 static int get_next_ulong(char **str_p, unsigned long *val, char *sep, int base)
 {
diff --git a/drivers/staging/fieldbus/anybuss/arcx-anybus.c b/drivers/staging/fieldbus/anybuss/arcx-anybus.c
index fcd3e3722ae0..452fd8e221f1 100644
--- a/drivers/staging/fieldbus/anybuss/arcx-anybus.c
+++ b/drivers/staging/fieldbus/anybuss/arcx-anybus.c
@@ -19,6 +19,7 @@
 #include <linux/regulator/driver.h>
 #include <linux/regulator/machine.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 /* move to <linux/anybuss-controller.h> when taking this out of staging */
 #include "anybuss-controller.h"
diff --git a/drivers/staging/fieldbus/anybuss/hms-profinet.c b/drivers/staging/fieldbus/anybuss/hms-profinet.c
index e691736a53f1..112982db58ce 100644
--- a/drivers/staging/fieldbus/anybuss/hms-profinet.c
+++ b/drivers/staging/fieldbus/anybuss/hms-profinet.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* move to <linux/fieldbus_dev.h> when taking this out of staging */
 #include "../fieldbus_dev.h"
diff --git a/drivers/staging/fieldbus/anybuss/host.c b/drivers/staging/fieldbus/anybuss/host.c
index cd86b9c9e345..af94939f5b6d 100644
--- a/drivers/staging/fieldbus/anybuss/host.c
+++ b/drivers/staging/fieldbus/anybuss/host.c
@@ -145,6 +145,7 @@
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/kthread.h>
 #include <linux/kfifo.h>
 #include <linux/spinlock.h>
diff --git a/drivers/staging/fieldbus/dev_core.c b/drivers/staging/fieldbus/dev_core.c
index 370a229443a1..b872aedc8bc6 100644
--- a/drivers/staging/fieldbus/dev_core.c
+++ b/drivers/staging/fieldbus/dev_core.c
@@ -9,6 +9,7 @@
 #include <linux/device.h>
 #include <linux/idr.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/poll.h>
 
diff --git a/drivers/staging/gdm724x/gdm_lte.c b/drivers/staging/gdm724x/gdm_lte.c
index 5703a9ddb6d0..332e69d3c7bb 100644
--- a/drivers/staging/gdm724x/gdm_lte.c
+++ b/drivers/staging/gdm724x/gdm_lte.c
@@ -6,6 +6,7 @@
 #include <linux/etherdevice.h>
 #include <linux/ip.h>
 #include <linux/ipv6.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <linux/in.h>
 #include <linux/if_arp.h>
diff --git a/drivers/staging/greybus/arche-apb-ctrl.c b/drivers/staging/greybus/arche-apb-ctrl.c
index 8541995008da..08682cd11d1e 100644
--- a/drivers/staging/greybus/arche-apb-ctrl.c
+++ b/drivers/staging/greybus/arche-apb-ctrl.c
@@ -18,6 +18,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/spinlock.h>
 #include "arche_platform.h"
+#include <linux/sprintf.h>
 
 static void apb_bootret_deassert(struct device *dev);
 
diff --git a/drivers/staging/greybus/arche-platform.c b/drivers/staging/greybus/arche-platform.c
index 891b75327d7f..77a943233b6d 100644
--- a/drivers/staging/greybus/arche-platform.c
+++ b/drivers/staging/greybus/arche-platform.c
@@ -17,6 +17,7 @@
 #include <linux/pm.h>
 #include <linux/interrupt.h>
 #include <linux/irq.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/time.h>
 #include <linux/greybus.h>
diff --git a/drivers/staging/greybus/audio_codec.c b/drivers/staging/greybus/audio_codec.c
index 2f05e761fb9a..9627fa2c9521 100644
--- a/drivers/staging/greybus/audio_codec.c
+++ b/drivers/staging/greybus/audio_codec.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <sound/pcm_params.h>
 #include <uapi/linux/input.h>
diff --git a/drivers/staging/greybus/audio_helper.c b/drivers/staging/greybus/audio_helper.c
index 97ce5b9ad7fd..5e0e012f01c8 100644
--- a/drivers/staging/greybus/audio_helper.c
+++ b/drivers/staging/greybus/audio_helper.c
@@ -7,6 +7,7 @@
 #include <sound/soc.h>
 #include <sound/soc-dapm.h>
 #include "audio_helper.h"
+#include <linux/sprintf.h>
 
 #define gbaudio_dapm_for_each_direction(dir) \
 	for ((dir) = SND_SOC_DAPM_DIR_IN; (dir) <= SND_SOC_DAPM_DIR_OUT; \
diff --git a/drivers/staging/greybus/audio_manager_module.c b/drivers/staging/greybus/audio_manager_module.c
index 5f9dcbdbc191..38f446861768 100644
--- a/drivers/staging/greybus/audio_manager_module.c
+++ b/drivers/staging/greybus/audio_manager_module.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 #include "audio_manager.h"
 #include "audio_manager_private.h"
diff --git a/drivers/staging/greybus/audio_manager_sysfs.c b/drivers/staging/greybus/audio_manager_sysfs.c
index fcd518f9540c..e10fbd5c786c 100644
--- a/drivers/staging/greybus/audio_manager_sysfs.c
+++ b/drivers/staging/greybus/audio_manager_sysfs.c
@@ -7,6 +7,8 @@
 
 #include <linux/string.h>
 #include <linux/sysfs.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "audio_manager.h"
 #include "audio_manager_private.h"
diff --git a/drivers/staging/greybus/audio_module.c b/drivers/staging/greybus/audio_module.c
index 12c376c477b3..e63fcec519ac 100644
--- a/drivers/staging/greybus/audio_module.c
+++ b/drivers/staging/greybus/audio_module.c
@@ -6,6 +6,7 @@
  */
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <sound/pcm_params.h>
 
diff --git a/drivers/staging/greybus/audio_topology.c b/drivers/staging/greybus/audio_topology.c
index 08e6a807c132..8b54b82dd1fc 100644
--- a/drivers/staging/greybus/audio_topology.c
+++ b/drivers/staging/greybus/audio_topology.c
@@ -7,6 +7,7 @@
 
 #include <linux/greybus.h>
 #include "audio_codec.h"
+#include <linux/sprintf.h>
 
 #define GBAUDIO_INVALID_ID	0xFF
 
diff --git a/drivers/staging/greybus/bootrom.c b/drivers/staging/greybus/bootrom.c
index 79581457c4af..7f667ddcfee2 100644
--- a/drivers/staging/greybus/bootrom.c
+++ b/drivers/staging/greybus/bootrom.c
@@ -9,6 +9,7 @@
 #include <linux/firmware.h>
 #include <linux/jiffies.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/greybus.h>
 
diff --git a/drivers/staging/greybus/camera.c b/drivers/staging/greybus/camera.c
index a8173aa3a995..e260db766272 100644
--- a/drivers/staging/greybus/camera.c
+++ b/drivers/staging/greybus/camera.c
@@ -9,8 +9,10 @@
 #include <linux/debugfs.h>
 #include <linux/fs.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/uaccess.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/staging/greybus/fw-download.c b/drivers/staging/greybus/fw-download.c
index 2a5c6d1b049c..3240b22ba1e3 100644
--- a/drivers/staging/greybus/fw-download.c
+++ b/drivers/staging/greybus/fw-download.c
@@ -9,6 +9,7 @@
 #include <linux/firmware.h>
 #include <linux/jiffies.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/greybus.h>
 #include "firmware.h"
diff --git a/drivers/staging/greybus/gbphy.c b/drivers/staging/greybus/gbphy.c
index d827f03f5253..832e1b35015a 100644
--- a/drivers/staging/greybus/gbphy.c
+++ b/drivers/staging/greybus/gbphy.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/device.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 
 #include "gbphy.h"
 
diff --git a/drivers/staging/greybus/hid.c b/drivers/staging/greybus/hid.c
index 15335c38cb26..5a1dc50ace96 100644
--- a/drivers/staging/greybus/hid.c
+++ b/drivers/staging/greybus/hid.c
@@ -13,6 +13,7 @@
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 
 /* Greybus HID device's structure */
 struct gb_hid {
diff --git a/drivers/staging/greybus/i2c.c b/drivers/staging/greybus/i2c.c
index 22325ab9d652..917d1724de2c 100644
--- a/drivers/staging/greybus/i2c.c
+++ b/drivers/staging/greybus/i2c.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/i2c.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 
 #include "gbphy.h"
 
diff --git a/drivers/staging/greybus/light.c b/drivers/staging/greybus/light.c
index d62f97249aca..6eebc42a55e9 100644
--- a/drivers/staging/greybus/light.c
+++ b/drivers/staging/greybus/light.c
@@ -7,11 +7,13 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/led-class-flash.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-flash-led-class.h>
 
 #define NAMES_MAX	32
diff --git a/drivers/staging/greybus/loopback.c b/drivers/staging/greybus/loopback.c
index bb33379b5297..562a97525ad0 100644
--- a/drivers/staging/greybus/loopback.c
+++ b/drivers/staging/greybus/loopback.c
@@ -22,6 +22,7 @@
 #include <linux/debugfs.h>
 #include <linux/list_sort.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/atomic.h>
 #include <linux/pm_runtime.h>
diff --git a/drivers/staging/greybus/power_supply.c b/drivers/staging/greybus/power_supply.c
index 75cb170e05fb..6e7b308973ad 100644
--- a/drivers/staging/greybus/power_supply.c
+++ b/drivers/staging/greybus/power_supply.c
@@ -11,6 +11,7 @@
 #include <linux/power_supply.h>
 #include <linux/slab.h>
 #include <linux/greybus.h>
+#include <linux/sprintf.h>
 
 #define PROP_MAX 32
 
diff --git a/drivers/staging/greybus/vibrator.c b/drivers/staging/greybus/vibrator.c
index 89bef8045549..cf1d97a15c18 100644
--- a/drivers/staging/greybus/vibrator.c
+++ b/drivers/staging/greybus/vibrator.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/device.h>
diff --git a/drivers/staging/iio/accel/adis16240.c b/drivers/staging/iio/accel/adis16240.c
index 337492785f04..0f1d7f31d097 100644
--- a/drivers/staging/iio/accel/adis16240.c
+++ b/drivers/staging/iio/accel/adis16240.c
@@ -8,6 +8,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/module.h>
 
diff --git a/drivers/staging/iio/adc/ad7816.c b/drivers/staging/iio/adc/ad7816.c
index 6c14d7bcdd67..6b919bf450dd 100644
--- a/drivers/staging/iio/adc/ad7816.c
+++ b/drivers/staging/iio/adc/ad7816.c
@@ -9,7 +9,9 @@
 #include <linux/gpio/consumer.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/list.h>
 #include <linux/spi/spi.h>
diff --git a/drivers/staging/iio/addac/adt7316.c b/drivers/staging/iio/addac/adt7316.c
index 79467f056a05..7f85177a3b41 100644
--- a/drivers/staging/iio/addac/adt7316.c
+++ b/drivers/staging/iio/addac/adt7316.c
@@ -8,6 +8,8 @@
 #include <linux/interrupt.h>
 #include <linux/gpio/consumer.h>
 #include <linux/irq.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
diff --git a/drivers/staging/iio/frequency/ad9832.c b/drivers/staging/iio/frequency/ad9832.c
index 6c390c4eb26d..dccdd92400f5 100644
--- a/drivers/staging/iio/frequency/ad9832.c
+++ b/drivers/staging/iio/frequency/ad9832.c
@@ -6,6 +6,7 @@
  */
 
 #include <asm/div64.h>
+#include <linux/kstrtox.h>
 
 #include <linux/clk.h>
 #include <linux/device.h>
diff --git a/drivers/staging/iio/frequency/ad9834.c b/drivers/staging/iio/frequency/ad9834.c
index a7a5cdcc6590..68054719f25e 100644
--- a/drivers/staging/iio/frequency/ad9834.c
+++ b/drivers/staging/iio/frequency/ad9834.c
@@ -7,6 +7,8 @@
 
 #include <linux/clk.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/device.h>
 #include <linux/kernel.h>
diff --git a/drivers/staging/iio/impedance-analyzer/ad5933.c b/drivers/staging/iio/impedance-analyzer/ad5933.c
index 9149d41fe65b..fa2ef1331ab1 100644
--- a/drivers/staging/iio/impedance-analyzer/ad5933.c
+++ b/drivers/staging/iio/impedance-analyzer/ad5933.c
@@ -12,8 +12,10 @@
 #include <linux/i2c.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
 
diff --git a/drivers/staging/ks7010/ks7010_sdio.c b/drivers/staging/ks7010/ks7010_sdio.c
index f1d44e4955fc..95e671e5f5e7 100644
--- a/drivers/staging/ks7010/ks7010_sdio.c
+++ b/drivers/staging/ks7010/ks7010_sdio.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
 #include <linux/jiffies.h>
 #include <linux/mmc/card.h>
diff --git a/drivers/staging/ks7010/ks_hostif.c b/drivers/staging/ks7010/ks_hostif.c
index af3825578d85..a7c2a561feda 100644
--- a/drivers/staging/ks7010/ks_hostif.c
+++ b/drivers/staging/ks7010/ks_hostif.c
@@ -8,7 +8,9 @@
 
 #include <crypto/hash.h>
 #include <linux/circ_buf.h>
+#include <linux/completion.h>
 #include <linux/if_arp.h>
+#include <linux/sprintf.h>
 #include <net/iw_handler.h>
 #include <uapi/linux/llc.h>
 #include "eap_packet.h"
diff --git a/drivers/staging/ks7010/ks_wlan_net.c b/drivers/staging/ks7010/ks_wlan_net.c
index 0fb97a79ad0b..2b4db405ad45 100644
--- a/drivers/staging/ks7010/ks_wlan_net.c
+++ b/drivers/staging/ks7010/ks_wlan_net.c
@@ -10,6 +10,7 @@
 #include <linux/completion.h>
 #include <linux/if_arp.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/staging/media/atomisp/pci/atomisp_csi2.c b/drivers/staging/media/atomisp/pci/atomisp_csi2.c
index 89118438a3b6..2473622c4ec3 100644
--- a/drivers/staging/media/atomisp/pci/atomisp_csi2.c
+++ b/drivers/staging/media/atomisp/pci/atomisp_csi2.c
@@ -21,6 +21,7 @@
 #include "atomisp_cmd.h"
 #include "atomisp_internal.h"
 #include "atomisp-regs.h"
+#include <linux/sprintf.h>
 
 static struct
 v4l2_mbus_framefmt *__csi2_get_format(struct atomisp_mipi_csi2_device *csi2,
diff --git a/drivers/staging/media/atomisp/pci/atomisp_csi2_bridge.c b/drivers/staging/media/atomisp/pci/atomisp_csi2_bridge.c
index 2483eaeeac73..55b5a74ecb76 100644
--- a/drivers/staging/media/atomisp/pci/atomisp_csi2_bridge.c
+++ b/drivers/staging/media/atomisp/pci/atomisp_csi2_bridge.c
@@ -11,9 +11,12 @@
 
 #include <linux/acpi.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/dmi.h>
+#include <linux/kstrtox.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 
 #include <media/ipu-bridge.h>
 #include <media/v4l2-fwnode.h>
diff --git a/drivers/staging/media/atomisp/pci/atomisp_drvfs.c b/drivers/staging/media/atomisp/pci/atomisp_drvfs.c
index ba7dd569a55a..01f79c5a8160 100644
--- a/drivers/staging/media/atomisp/pci/atomisp_drvfs.c
+++ b/drivers/staging/media/atomisp/pci/atomisp_drvfs.c
@@ -19,6 +19,7 @@
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 
 #include "atomisp_compat.h"
 #include "atomisp_internal.h"
diff --git a/drivers/staging/media/atomisp/pci/atomisp_gmin_platform.c b/drivers/staging/media/atomisp/pci/atomisp_gmin_platform.c
index 139ad7ad1dcf..0848ffb628cb 100644
--- a/drivers/staging/media/atomisp/pci/atomisp_gmin_platform.c
+++ b/drivers/staging/media/atomisp/pci/atomisp_gmin_platform.c
@@ -3,10 +3,12 @@
 #include <linux/i2c.h>
 #include <linux/dmi.h>
 #include <linux/efi.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/acpi.h>
 #include <linux/clk.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-subdev.h>
 #include <linux/mfd/intel_soc_pmic.h>
 #include <linux/regulator/consumer.h>
diff --git a/drivers/staging/media/atomisp/pci/atomisp_ioctl.c b/drivers/staging/media/atomisp/pci/atomisp_ioctl.c
index bb8e5e883b50..12d84bbf4da1 100644
--- a/drivers/staging/media/atomisp/pci/atomisp_ioctl.c
+++ b/drivers/staging/media/atomisp/pci/atomisp_ioctl.c
@@ -20,6 +20,7 @@
 
 #include <linux/delay.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-event.h>
diff --git a/drivers/staging/media/atomisp/pci/atomisp_subdev.c b/drivers/staging/media/atomisp/pci/atomisp_subdev.c
index a87fc74159e2..2639610a8e29 100644
--- a/drivers/staging/media/atomisp/pci/atomisp_subdev.c
+++ b/drivers/staging/media/atomisp/pci/atomisp_subdev.c
@@ -16,6 +16,7 @@
  *
  */
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/delay.h>
 #include <linux/device.h>
diff --git a/drivers/staging/media/atomisp/pci/hmm/hmm.c b/drivers/staging/media/atomisp/pci/hmm/hmm.c
index bb12644fd033..dabdb2be80cf 100644
--- a/drivers/staging/media/atomisp/pci/hmm/hmm.c
+++ b/drivers/staging/media/atomisp/pci/hmm/hmm.c
@@ -21,6 +21,7 @@
  * This file contains entry functions for memory management of ISP driver
  */
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mm.h>
 #include <linux/highmem.h>	/* for kmap */
diff --git a/drivers/staging/media/atomisp/pci/runtime/bufq/src/bufq.c b/drivers/staging/media/atomisp/pci/runtime/bufq/src/bufq.c
index 6a75cba4886f..8086e6b33635 100644
--- a/drivers/staging/media/atomisp/pci/runtime/bufq/src/bufq.c
+++ b/drivers/staging/media/atomisp/pci/runtime/bufq/src/bufq.c
@@ -24,6 +24,7 @@
 #include "sh_css_internal.h"		/* sh_css_queue_type */
 #include "sp_local.h"			/* sp_address_of */
 #include "sh_css_firmware.h"		/* sh_css_sp_fw*/
+#include <linux/sprintf.h>
 
 #define BUFQ_DUMP_FILE_NAME_PREFIX_SIZE 256
 
diff --git a/drivers/staging/media/atomisp/pci/runtime/debug/src/ia_css_debug.c b/drivers/staging/media/atomisp/pci/runtime/debug/src/ia_css_debug.c
index 3e92794555ec..aed3662acb21 100644
--- a/drivers/staging/media/atomisp/pci/runtime/debug/src/ia_css_debug.c
+++ b/drivers/staging/media/atomisp/pci/runtime/debug/src/ia_css_debug.c
@@ -14,6 +14,7 @@
  */
 
 #include "debug.h"
+#include <linux/sprintf.h>
 
 #ifndef __INLINE_INPUT_SYSTEM__
 #define __INLINE_INPUT_SYSTEM__
diff --git a/drivers/staging/media/av7110/av7110_ir.c b/drivers/staging/media/av7110/av7110_ir.c
index a851ba328e4a..0e662b53b6c1 100644
--- a/drivers/staging/media/av7110/av7110_ir.c
+++ b/drivers/staging/media/av7110/av7110_ir.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <media/rc-core.h>
 
 #include "av7110.h"
diff --git a/drivers/staging/media/deprecated/atmel/atmel-isc-base.c b/drivers/staging/media/deprecated/atmel/atmel-isc-base.c
index 305b103153d7..663794afc57c 100644
--- a/drivers/staging/media/deprecated/atmel/atmel-isc-base.c
+++ b/drivers/staging/media/deprecated/atmel/atmel-isc-base.c
@@ -19,6 +19,7 @@
 #include <linux/regmap.h>
 #include <linux/videodev2.h>
 #include <linux/atmel-isc-media.h>
+#include <linux/completion.h>
 
 #include <media/v4l2-ctrls.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/staging/media/imx/imx-ic-prpencvf.c b/drivers/staging/media/imx/imx-ic-prpencvf.c
index 17fd980c9d3c..9c0d13bb4892 100644
--- a/drivers/staging/media/imx/imx-ic-prpencvf.c
+++ b/drivers/staging/media/imx/imx-ic-prpencvf.c
@@ -23,6 +23,7 @@
 #include <media/imx.h>
 #include "imx-media.h"
 #include "imx-ic.h"
+#include <linux/completion.h>
 
 /*
  * Min/Max supported width and heights.
diff --git a/drivers/staging/media/imx/imx-media-capture.c b/drivers/staging/media/imx/imx-media-capture.c
index efa7623b5cee..e71cc8782261 100644
--- a/drivers/staging/media/imx/imx-media-capture.c
+++ b/drivers/staging/media/imx/imx-media-capture.c
@@ -12,6 +12,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <media/v4l2-ctrls.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/staging/media/imx/imx-media-csc-scaler.c b/drivers/staging/media/imx/imx-media-csc-scaler.c
index 1fd39a2fca98..89b9bfa461a6 100644
--- a/drivers/staging/media/imx/imx-media-csc-scaler.c
+++ b/drivers/staging/media/imx/imx-media-csc-scaler.c
@@ -10,6 +10,7 @@
 #include <linux/fs.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <video/imx-ipu-v3.h>
 #include <video/imx-ipu-image-convert.h>
 
diff --git a/drivers/staging/media/imx/imx-media-csi.c b/drivers/staging/media/imx/imx-media-csi.c
index 785aac881922..3c54726d164f 100644
--- a/drivers/staging/media/imx/imx-media-csi.c
+++ b/drivers/staging/media/imx/imx-media-csi.c
@@ -22,6 +22,7 @@
 #include <video/imx-ipu-v3.h>
 #include <media/imx.h>
 #include "imx-media.h"
+#include <linux/completion.h>
 
 /*
  * Min/Max supported width and heights.
diff --git a/drivers/staging/media/imx/imx-media-dev-common.c b/drivers/staging/media/imx/imx-media-dev-common.c
index 0d0ee8627a2d..0f9c3ae60ea6 100644
--- a/drivers/staging/media/imx/imx-media-dev-common.c
+++ b/drivers/staging/media/imx/imx-media-dev-common.c
@@ -11,6 +11,7 @@
 #include <media/v4l2-ioctl.h>
 #include <media/v4l2-mc.h>
 #include "imx-media.h"
+#include <linux/sprintf.h>
 
 static inline struct imx_media_dev *notifier2dev(struct v4l2_async_notifier *n)
 {
diff --git a/drivers/staging/media/imx/imx-media-fim.c b/drivers/staging/media/imx/imx-media-fim.c
index e28a33d9dec7..b3bba7c40117 100644
--- a/drivers/staging/media/imx/imx-media-fim.c
+++ b/drivers/staging/media/imx/imx-media-fim.c
@@ -14,6 +14,7 @@
 #include <media/v4l2-subdev.h>
 #include <media/imx.h>
 #include "imx-media.h"
+#include <linux/completion.h>
 
 enum {
 	FIM_CL_ENABLE = 0,
diff --git a/drivers/staging/media/imx/imx-media-utils.c b/drivers/staging/media/imx/imx-media-utils.c
index 1b5af8945e6b..eebc71b2b55e 100644
--- a/drivers/staging/media/imx/imx-media-utils.c
+++ b/drivers/staging/media/imx/imx-media-utils.c
@@ -6,6 +6,7 @@
  */
 #include <linux/module.h>
 #include "imx-media.h"
+#include <linux/sprintf.h>
 
 #define IMX_BUS_FMTS(fmt...) ((const u32[]) {fmt, 0})
 
diff --git a/drivers/staging/media/ipu3/ipu3-v4l2.c b/drivers/staging/media/ipu3/ipu3-v4l2.c
index 3df58eb3e882..0411ff58101e 100644
--- a/drivers/staging/media/ipu3/ipu3-v4l2.c
+++ b/drivers/staging/media/ipu3/ipu3-v4l2.c
@@ -3,6 +3,7 @@
 
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-event.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/staging/media/omap4iss/iss_csi2.c b/drivers/staging/media/omap4iss/iss_csi2.c
index 0e6c5bd81930..2c34618746d4 100644
--- a/drivers/staging/media/omap4iss/iss_csi2.c
+++ b/drivers/staging/media/omap4iss/iss_csi2.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <media/v4l2-common.h>
 #include <linux/v4l2-mediabus.h>
 #include <linux/mm.h>
diff --git a/drivers/staging/media/omap4iss/iss_video.c b/drivers/staging/media/omap4iss/iss_video.c
index 22fa4d6cae10..2e4060b8caf5 100644
--- a/drivers/staging/media/omap4iss/iss_video.c
+++ b/drivers/staging/media/omap4iss/iss_video.c
@@ -12,6 +12,7 @@
 #include <linux/pagemap.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
 
diff --git a/drivers/staging/media/rkvdec/rkvdec.c b/drivers/staging/media/rkvdec/rkvdec.c
index ac398b5a9736..ea0b7f4f2fae 100644
--- a/drivers/staging/media/rkvdec/rkvdec.c
+++ b/drivers/staging/media/rkvdec/rkvdec.c
@@ -17,6 +17,7 @@
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/workqueue.h>
 #include <media/v4l2-event.h>
diff --git a/drivers/staging/media/starfive/camss/stf-isp.c b/drivers/staging/media/starfive/camss/stf-isp.c
index d50616ef351e..365bfc173135 100644
--- a/drivers/staging/media/starfive/camss/stf-isp.c
+++ b/drivers/staging/media/starfive/camss/stf-isp.c
@@ -7,6 +7,7 @@
  * Copyright (C) 2021-2023 StarFive Technology Co., Ltd.
  */
 #include <media/v4l2-rect.h>
+#include <linux/sprintf.h>
 
 #include "stf-camss.h"
 
diff --git a/drivers/staging/media/sunxi/cedrus/cedrus.c b/drivers/staging/media/sunxi/cedrus/cedrus.c
index f52df6836045..35aafa1c99a0 100644
--- a/drivers/staging/media/sunxi/cedrus/cedrus.c
+++ b/drivers/staging/media/sunxi/cedrus/cedrus.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/pm.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-device.h>
 #include <media/v4l2-ioctl.h>
diff --git a/drivers/staging/media/sunxi/cedrus/cedrus_video.c b/drivers/staging/media/sunxi/cedrus/cedrus_video.c
index b00feaf4072c..e9238867aa5d 100644
--- a/drivers/staging/media/sunxi/cedrus/cedrus_video.c
+++ b/drivers/staging/media/sunxi/cedrus/cedrus_video.c
@@ -14,6 +14,7 @@
  */
 
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <media/videobuf2-dma-contig.h>
 #include <media/v4l2-device.h>
diff --git a/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_capture.c b/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_capture.c
index 0eea4c2c3627..de2035d9a0fc 100644
--- a/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_capture.c
+++ b/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_capture.c
@@ -10,6 +10,7 @@
 #include <media/v4l2-mc.h>
 #include <media/videobuf2-dma-contig.h>
 #include <media/videobuf2-v4l2.h>
+#include <linux/sprintf.h>
 
 #include "sun6i_isp.h"
 #include "sun6i_isp_capture.h"
diff --git a/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_params.c b/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_params.c
index 53d05e8a364b..a994cccea4bd 100644
--- a/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_params.c
+++ b/drivers/staging/media/sunxi/sun6i-isp/sun6i_isp_params.c
@@ -10,6 +10,7 @@
 #include <media/v4l2-mc.h>
 #include <media/videobuf2-vmalloc.h>
 #include <media/videobuf2-v4l2.h>
+#include <linux/sprintf.h>
 
 #include "sun6i_isp.h"
 #include "sun6i_isp_params.h"
diff --git a/drivers/staging/media/tegra-video/csi.c b/drivers/staging/media/tegra-video/csi.c
index 255cccd0c5fd..afcb7d43f7dc 100644
--- a/drivers/staging/media/tegra-video/csi.c
+++ b/drivers/staging/media/tegra-video/csi.c
@@ -12,6 +12,7 @@
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-fwnode.h>
 
diff --git a/drivers/staging/media/tegra-video/vi.c b/drivers/staging/media/tegra-video/vi.c
index af6e3a0d8df4..d14ddb297791 100644
--- a/drivers/staging/media/tegra-video/vi.c
+++ b/drivers/staging/media/tegra-video/vi.c
@@ -17,6 +17,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-dv-timings.h>
 #include <media/v4l2-event.h>
diff --git a/drivers/staging/media/tegra-video/vip.c b/drivers/staging/media/tegra-video/vip.c
index 8504b9ea9cea..22d8063061e4 100644
--- a/drivers/staging/media/tegra-video/vip.c
+++ b/drivers/staging/media/tegra-video/vip.c
@@ -15,6 +15,7 @@
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <media/v4l2-fwnode.h>
 
diff --git a/drivers/staging/most/dim2/dim2.c b/drivers/staging/most/dim2/dim2.c
index ed6a9cc88541..b08d5f7eb49f 100644
--- a/drivers/staging/most/dim2/dim2.c
+++ b/drivers/staging/most/dim2/dim2.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/sched.h>
 #include <linux/kthread.h>
@@ -24,6 +25,7 @@
 #include "hal.h"
 #include "errors.h"
 #include "sysfs.h"
+#include <linux/sprintf.h>
 
 #define DMA_CHANNELS (32 - 1)  /* channel 0 is a system channel */
 
diff --git a/drivers/staging/most/i2c/i2c.c b/drivers/staging/most/i2c/i2c.c
index ce869280a056..deee7542fa7b 100644
--- a/drivers/staging/most/i2c/i2c.c
+++ b/drivers/staging/most/i2c/i2c.c
@@ -14,6 +14,8 @@
 #include <linux/interrupt.h>
 #include <linux/err.h>
 #include <linux/most.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 enum { CH_RX, CH_TX, NUM_CHANNELS };
 
diff --git a/drivers/staging/most/video/video.c b/drivers/staging/most/video/video.c
index 6254a5df2502..1612740ea8b7 100644
--- a/drivers/staging/most/video/video.c
+++ b/drivers/staging/most/video/video.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/videodev2.h>
 #include <linux/mutex.h>
diff --git a/drivers/staging/olpc_dcon/olpc_dcon.c b/drivers/staging/olpc_dcon/olpc_dcon.c
index 08ec3aae90ea..64560095e5a0 100644
--- a/drivers/staging/olpc_dcon/olpc_dcon.c
+++ b/drivers/staging/olpc_dcon/olpc_dcon.c
@@ -14,12 +14,14 @@
 #include <linux/fb.h>
 #include <linux/console.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/interrupt.h>
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/backlight.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/ctype.h>
 #include <linux/panic_notifier.h>
diff --git a/drivers/staging/pi433/pi433_if.c b/drivers/staging/pi433/pi433_if.c
index 0ec3130225db..c2a406a0b133 100644
--- a/drivers/staging/pi433/pi433_if.c
+++ b/drivers/staging/pi433/pi433_if.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/idr.h>
 #include <linux/ioctl.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/fs.h>
 #include <linux/device.h>
diff --git a/drivers/staging/rtl8192e/rtllib.h b/drivers/staging/rtl8192e/rtllib.h
index 0fdc767d43e0..31de6322fbbc 100644
--- a/drivers/staging/rtl8192e/rtllib.h
+++ b/drivers/staging/rtl8192e/rtllib.h
@@ -24,6 +24,7 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/sched.h>
 #include <linux/mutex.h>
diff --git a/drivers/staging/rtl8192e/rtllib_rx.c b/drivers/staging/rtl8192e/rtllib_rx.c
index f777febcfe3b..3dc732ec62e1 100644
--- a/drivers/staging/rtl8192e/rtllib_rx.c
+++ b/drivers/staging/rtl8192e/rtllib_rx.c
@@ -26,6 +26,7 @@
 #include <linux/proc_fs.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/types.h>
 #include <linux/wireless.h>
diff --git a/drivers/staging/rtl8192e/rtllib_softmac_wx.c b/drivers/staging/rtl8192e/rtllib_softmac_wx.c
index 2afa701e5445..73a9a6064f04 100644
--- a/drivers/staging/rtl8192e/rtllib_softmac_wx.c
+++ b/drivers/staging/rtl8192e/rtllib_softmac_wx.c
@@ -12,6 +12,7 @@
  * own it's copyright ;-)
  */
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 
 #include "rtllib.h"
 
diff --git a/drivers/staging/rtl8192e/rtllib_wx.c b/drivers/staging/rtl8192e/rtllib_wx.c
index 55a3e4222cd6..605767cb4730 100644
--- a/drivers/staging/rtl8192e/rtllib_wx.c
+++ b/drivers/staging/rtl8192e/rtllib_wx.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/etherdevice.h>
 #include "rtllib.h"
+#include <linux/sprintf.h>
 
 static const char * const rtllib_modes[] = {
 	"a", "b", "g", "?", "N-24G"
diff --git a/drivers/staging/rtl8712/hal_init.c b/drivers/staging/rtl8712/hal_init.c
index 1148075f0cd6..06b3b53a4fa5 100644
--- a/drivers/staging/rtl8712/hal_init.c
+++ b/drivers/staging/rtl8712/hal_init.c
@@ -20,6 +20,7 @@
 #include <linux/usb/ch9.h>
 #include <linux/firmware.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include "osdep_service.h"
 #include "drv_types.h"
diff --git a/drivers/staging/rtl8712/mlme_linux.c b/drivers/staging/rtl8712/mlme_linux.c
index b9f5104f3bf7..e2f7706c0f40 100644
--- a/drivers/staging/rtl8712/mlme_linux.c
+++ b/drivers/staging/rtl8712/mlme_linux.c
@@ -19,6 +19,7 @@
 #include "osdep_service.h"
 #include "drv_types.h"
 #include "mlme_osdep.h"
+#include <linux/sprintf.h>
 
 static void sitesurvey_ctrl_handler(struct timer_list *t)
 {
diff --git a/drivers/staging/rtl8712/os_intfs.c b/drivers/staging/rtl8712/os_intfs.c
index 7554613fe7e1..3cca0ab944bf 100644
--- a/drivers/staging/rtl8712/os_intfs.c
+++ b/drivers/staging/rtl8712/os_intfs.c
@@ -25,6 +25,7 @@
 #include "recv_osdep.h"
 #include "rtl871x_ioctl.h"
 #include "usb_osintf.h"
+#include <linux/completion.h>
 
 MODULE_LICENSE("GPL");
 MODULE_DESCRIPTION("rtl871x wireless lan driver");
diff --git a/drivers/staging/rtl8712/rtl8712_cmd.c b/drivers/staging/rtl8712/rtl8712_cmd.c
index bb7db96ed821..235a71c1f7cb 100644
--- a/drivers/staging/rtl8712/rtl8712_cmd.c
+++ b/drivers/staging/rtl8712/rtl8712_cmd.c
@@ -17,6 +17,7 @@
 #define _RTL8712_CMD_C_
 
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
diff --git a/drivers/staging/rtl8712/rtl871x_cmd.c b/drivers/staging/rtl8712/rtl871x_cmd.c
index bbd4a13c7bb9..1d2cd86abc47 100644
--- a/drivers/staging/rtl8712/rtl871x_cmd.c
+++ b/drivers/staging/rtl8712/rtl871x_cmd.c
@@ -17,6 +17,7 @@
 #define _RTL871X_CMD_C_
 
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
diff --git a/drivers/staging/rtl8712/rtl871x_ioctl_linux.c b/drivers/staging/rtl8712/rtl871x_ioctl_linux.c
index 0653aa27b1fa..edfa37680b27 100644
--- a/drivers/staging/rtl8712/rtl871x_ioctl_linux.c
+++ b/drivers/staging/rtl8712/rtl871x_ioctl_linux.c
@@ -27,6 +27,7 @@
 #include "rtl871x_ioctl_set.h"
 #include "rtl871x_mp_ioctl.h"
 #include "mlme_osdep.h"
+#include <linux/sprintf.h>
 #include <linux/wireless.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/drivers/staging/rtl8712/rtl871x_pwrctrl.c b/drivers/staging/rtl8712/rtl871x_pwrctrl.c
index cd6d9ff0bebc..ff3109ba9d92 100644
--- a/drivers/staging/rtl8712/rtl871x_pwrctrl.c
+++ b/drivers/staging/rtl8712/rtl871x_pwrctrl.c
@@ -19,6 +19,7 @@
 #include "osdep_service.h"
 #include "drv_types.h"
 #include "osdep_intf.h"
+#include <linux/completion.h>
 
 #define RTL8712_SDIO_LOCAL_BASE 0X10100000
 #define SDIO_HCPWM (RTL8712_SDIO_LOCAL_BASE + 0x0081)
diff --git a/drivers/staging/rtl8712/usb_intf.c b/drivers/staging/rtl8712/usb_intf.c
index df05213f922f..0e161c7aa85c 100644
--- a/drivers/staging/rtl8712/usb_intf.c
+++ b/drivers/staging/rtl8712/usb_intf.c
@@ -18,7 +18,9 @@
 
 #include <linux/usb.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 #include <linux/firmware.h>
+#include <linux/hex.h>
 
 #include "osdep_service.h"
 #include "drv_types.h"
diff --git a/drivers/staging/rtl8712/usb_ops_linux.c b/drivers/staging/rtl8712/usb_ops_linux.c
index b2181e1e2d38..63debdbef3e1 100644
--- a/drivers/staging/rtl8712/usb_ops_linux.c
+++ b/drivers/staging/rtl8712/usb_ops_linux.c
@@ -17,6 +17,7 @@
 #define _HCI_OPS_OS_C_
 
 #include <linux/usb.h>
+#include <linux/completion.h>
 
 #include "osdep_service.h"
 #include "drv_types.h"
diff --git a/drivers/staging/rtl8712/xmit_linux.c b/drivers/staging/rtl8712/xmit_linux.c
index ceb6b590b310..47309daca519 100644
--- a/drivers/staging/rtl8712/xmit_linux.c
+++ b/drivers/staging/rtl8712/xmit_linux.c
@@ -20,6 +20,7 @@
 #include <linux/ip.h>
 #include <linux/if_ether.h>
 #include <linux/kmemleak.h>
+#include <linux/completion.h>
 
 #include "osdep_service.h"
 #include "drv_types.h"
diff --git a/drivers/staging/rtl8723bs/core/rtw_cmd.c b/drivers/staging/rtl8723bs/core/rtw_cmd.c
index d3f10a3cf972..c93867f7d588 100644
--- a/drivers/staging/rtl8723bs/core/rtw_cmd.c
+++ b/drivers/staging/rtl8723bs/core/rtw_cmd.c
@@ -5,6 +5,7 @@
  *
  ******************************************************************************/
 #include <drv_types.h>
+#include <linux/completion.h>
 #include <rtw_debug.h>
 #include <hal_btcoex.h>
 #include <linux/jiffies.h>
diff --git a/drivers/staging/rtl8723bs/core/rtw_mlme_ext.c b/drivers/staging/rtl8723bs/core/rtw_mlme_ext.c
index 985683767a40..ccb46427bab1 100644
--- a/drivers/staging/rtl8723bs/core/rtw_mlme_ext.c
+++ b/drivers/staging/rtl8723bs/core/rtw_mlme_ext.c
@@ -5,6 +5,7 @@
  *
  ******************************************************************************/
 #include <drv_types.h>
+#include <linux/sprintf.h>
 #include <rtw_debug.h>
 #include <rtw_wifi_regd.h>
 #include <hal_btcoex.h>
diff --git a/drivers/staging/rtl8723bs/core/rtw_pwrctrl.c b/drivers/staging/rtl8723bs/core/rtw_pwrctrl.c
index a392d5b4caf2..4144658618c1 100644
--- a/drivers/staging/rtl8723bs/core/rtw_pwrctrl.c
+++ b/drivers/staging/rtl8723bs/core/rtw_pwrctrl.c
@@ -5,6 +5,8 @@
  *
  ******************************************************************************/
 #include <drv_types.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <rtw_debug.h>
 #include <hal_data.h>
 #include <linux/jiffies.h>
diff --git a/drivers/staging/rtl8723bs/core/rtw_wlan_util.c b/drivers/staging/rtl8723bs/core/rtw_wlan_util.c
index 7fac9ca3e9a0..2d275f2cd7bd 100644
--- a/drivers/staging/rtl8723bs/core/rtw_wlan_util.c
+++ b/drivers/staging/rtl8723bs/core/rtw_wlan_util.c
@@ -6,6 +6,7 @@
  ******************************************************************************/
 
 #include <drv_types.h>
+#include <linux/sprintf.h>
 #include <rtw_debug.h>
 #include <hal_com_h2c.h>
 
diff --git a/drivers/staging/rtl8723bs/core/rtw_xmit.c b/drivers/staging/rtl8723bs/core/rtw_xmit.c
index b1965ec0181f..5116057433bd 100644
--- a/drivers/staging/rtl8723bs/core/rtw_xmit.c
+++ b/drivers/staging/rtl8723bs/core/rtw_xmit.c
@@ -5,6 +5,7 @@
  *
  ******************************************************************************/
 #include <drv_types.h>
+#include <linux/completion.h>
 #include <rtw_debug.h>
 
 static u8 P802_1H_OUI[P80211_OUI_LEN] = { 0x00, 0x00, 0xf8 };
diff --git a/drivers/staging/rtl8723bs/hal/hal_com.c b/drivers/staging/rtl8723bs/hal/hal_com.c
index 852232102433..9c37fd2f02a9 100644
--- a/drivers/staging/rtl8723bs/hal/hal_com.c
+++ b/drivers/staging/rtl8723bs/hal/hal_com.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <drv_types.h>
+#include <linux/sprintf.h>
 #include <rtw_debug.h>
 #include "hal_com_h2c.h"
 
diff --git a/drivers/staging/rtl8723bs/hal/rtl8723b_hal_init.c b/drivers/staging/rtl8723bs/hal/rtl8723b_hal_init.c
index c5219a4a4919..edb1dd36068a 100644
--- a/drivers/staging/rtl8723bs/hal/rtl8723b_hal_init.c
+++ b/drivers/staging/rtl8723bs/hal/rtl8723b_hal_init.c
@@ -8,6 +8,7 @@
 #include <linux/firmware.h>
 #include <linux/slab.h>
 #include <drv_types.h>
+#include <linux/completion.h>
 #include <rtw_debug.h>
 #include <rtl8723b_hal.h>
 #include "hal_com_h2c.h"
diff --git a/drivers/staging/rtl8723bs/hal/rtl8723bs_xmit.c b/drivers/staging/rtl8723bs/hal/rtl8723bs_xmit.c
index 15810438a472..ca1ec23dd0d1 100644
--- a/drivers/staging/rtl8723bs/hal/rtl8723bs_xmit.c
+++ b/drivers/staging/rtl8723bs/hal/rtl8723bs_xmit.c
@@ -6,6 +6,7 @@
  ******************************************************************************/
 
 #include <drv_types.h>
+#include <linux/completion.h>
 #include <rtw_debug.h>
 #include <rtl8723b_hal.h>
 
diff --git a/drivers/staging/rtl8723bs/hal/sdio_ops.c b/drivers/staging/rtl8723bs/hal/sdio_ops.c
index 107f427ee4aa..dc014672678d 100644
--- a/drivers/staging/rtl8723bs/hal/sdio_ops.c
+++ b/drivers/staging/rtl8723bs/hal/sdio_ops.c
@@ -5,6 +5,7 @@
  *
  *******************************************************************************/
 #include <drv_types.h>
+#include <linux/completion.h>
 #include <rtw_debug.h>
 #include <rtl8723b_hal.h>
 
diff --git a/drivers/staging/rtl8723bs/include/osdep_service.h b/drivers/staging/rtl8723bs/include/osdep_service.h
index cf96b5f7a776..f37dcbe76bcd 100644
--- a/drivers/staging/rtl8723bs/include/osdep_service.h
+++ b/drivers/staging/rtl8723bs/include/osdep_service.h
@@ -13,6 +13,7 @@
 #define RTW_RX_HANDLED 2
 
 #include <osdep_service_linux.h>
+#include <linux/sprintf.h>
 
 #define BIT0	0x00000001
 #define BIT1	0x00000002
diff --git a/drivers/staging/rtl8723bs/os_dep/mlme_linux.c b/drivers/staging/rtl8723bs/os_dep/mlme_linux.c
index 1341801e5c21..b83f2fd1a388 100644
--- a/drivers/staging/rtl8723bs/os_dep/mlme_linux.c
+++ b/drivers/staging/rtl8723bs/os_dep/mlme_linux.c
@@ -5,6 +5,7 @@
  *
  ******************************************************************************/
 #include <drv_types.h>
+#include <linux/sprintf.h>
 #include <rtw_debug.h>
 
 static void _dynamic_check_timer_handler(struct timer_list *t)
diff --git a/drivers/staging/rtl8723bs/os_dep/os_intfs.c b/drivers/staging/rtl8723bs/os_dep/os_intfs.c
index 68bba3c0e757..5b4f9ca385c7 100644
--- a/drivers/staging/rtl8723bs/os_dep/os_intfs.c
+++ b/drivers/staging/rtl8723bs/os_dep/os_intfs.c
@@ -5,6 +5,8 @@
  *
  ******************************************************************************/
 #include <drv_types.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <rtw_debug.h>
 #include <hal_data.h>
 
diff --git a/drivers/staging/rtl8723bs/os_dep/xmit_linux.c b/drivers/staging/rtl8723bs/os_dep/xmit_linux.c
index 1eeabfffd6d2..bc6ce20d456a 100644
--- a/drivers/staging/rtl8723bs/os_dep/xmit_linux.c
+++ b/drivers/staging/rtl8723bs/os_dep/xmit_linux.c
@@ -5,6 +5,7 @@
  *
  ******************************************************************************/
 #include <drv_types.h>
+#include <linux/completion.h>
 #include <rtw_debug.h>
 
 
diff --git a/drivers/staging/rts5208/rtsx.c b/drivers/staging/rts5208/rtsx.c
index 86d32e3b3282..15e85bd970f4 100644
--- a/drivers/staging/rts5208/rtsx.c
+++ b/drivers/staging/rts5208/rtsx.c
@@ -10,8 +10,10 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/kthread.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include "rtsx.h"
diff --git a/drivers/staging/rts5208/rtsx_transport.c b/drivers/staging/rts5208/rtsx_transport.c
index d5ad49de4c56..421f2fb9ff34 100644
--- a/drivers/staging/rts5208/rtsx_transport.c
+++ b/drivers/staging/rts5208/rtsx_transport.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/kthread.h>
 #include <linux/sched.h>
 
diff --git a/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c b/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c
index e6e89784d84b..c3be3f60bab0 100644
--- a/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c
+++ b/drivers/staging/vc04_services/bcm2835-camera/bcm2835-camera.c
@@ -16,6 +16,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <media/videobuf2-vmalloc.h>
 #include <media/videobuf2-dma-contig.h>
 #include <media/v4l2-device.h>
@@ -25,6 +26,7 @@
 #include <media/v4l2-event.h>
 #include <media/v4l2-common.h>
 #include <linux/delay.h>
+#include <linux/completion.h>
 
 #include "../interface/vchiq_arm/vchiq_bus.h"
 #include "../vchiq-mmal/mmal-common.h"
diff --git a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_arm.c b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_arm.c
index 1579bd4e5263..e3bff4cb6bf6 100644
--- a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_arm.c
+++ b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_arm.c
@@ -7,9 +7,11 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/fs.h>
 #include <linux/device.h>
 #include <linux/device/bus.h>
diff --git a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_core.c b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_core.c
index 76c27778154a..56e007725b0b 100644
--- a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_core.c
+++ b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_core.c
@@ -3,9 +3,11 @@
 
 #include <linux/types.h>
 #include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mutex.h>
 #include <linux/bitops.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
diff --git a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_debugfs.c b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_debugfs.c
index d833e4e2973a..03515d24f2a4 100644
--- a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_debugfs.c
+++ b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_debugfs.c
@@ -8,6 +8,7 @@
 #include "vchiq_core.h"
 #include "vchiq_arm.h"
 #include "vchiq_debugfs.h"
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_DEBUG_FS
 
diff --git a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_dev.c b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_dev.c
index 4d9deeeb637a..e7d2a8253a08 100644
--- a/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_dev.c
+++ b/drivers/staging/vc04_services/interface/vchiq_arm/vchiq_dev.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/fs.h>
 #include <linux/device.h>
 #include <linux/slab.h>
diff --git a/drivers/staging/vme_user/vme_tsi148.c b/drivers/staging/vme_user/vme_tsi148.c
index 2ec9c2904404..67739c3c7cf0 100644
--- a/drivers/staging/vme_user/vme_tsi148.c
+++ b/drivers/staging/vme_user/vme_tsi148.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/staging/wlan-ng/hfa384x_usb.c b/drivers/staging/wlan-ng/hfa384x_usb.c
index 35650f911ebc..4fa0ec915420 100644
--- a/drivers/staging/wlan-ng/hfa384x_usb.c
+++ b/drivers/staging/wlan-ng/hfa384x_usb.c
@@ -102,6 +102,7 @@
 #include <linux/delay.h>
 #include <asm/byteorder.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/list.h>
 #include <linux/usb.h>
 #include <linux/byteorder/generic.h>
diff --git a/drivers/staging/wlan-ng/prism2usb.c b/drivers/staging/wlan-ng/prism2usb.c
index 0e0ccef4871e..5a4295f9a6ff 100644
--- a/drivers/staging/wlan-ng/prism2usb.c
+++ b/drivers/staging/wlan-ng/prism2usb.c
@@ -4,6 +4,7 @@
 #include "prism2mib.c"
 #include "prism2sta.c"
 #include "prism2fw.c"
+#include <linux/completion.h>
 
 #define PRISM_DEV(vid, pid, name)		\
 	{ USB_DEVICE(vid, pid),			\
diff --git a/drivers/target/iscsi/cxgbit/cxgbit_cm.c b/drivers/target/iscsi/cxgbit/cxgbit_cm.c
index d9204c590d9a..48d1dcad5634 100644
--- a/drivers/target/iscsi/cxgbit/cxgbit_cm.c
+++ b/drivers/target/iscsi/cxgbit/cxgbit_cm.c
@@ -13,6 +13,7 @@
 #include <linux/ip.h>
 #include <linux/tcp.h>
 #include <linux/if_vlan.h>
+#include <linux/completion.h>
 
 #include <net/neighbour.h>
 #include <net/netevent.h>
diff --git a/drivers/target/iscsi/cxgbit/cxgbit_target.c b/drivers/target/iscsi/cxgbit/cxgbit_target.c
index acfc39683c87..f1094b0ab803 100644
--- a/drivers/target/iscsi/cxgbit/cxgbit_target.c
+++ b/drivers/target/iscsi/cxgbit/cxgbit_target.c
@@ -6,6 +6,8 @@
 #include <linux/workqueue.h>
 #include <linux/kthread.h>
 #include <linux/sched/signal.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 
 #include <asm/unaligned.h>
 #include <net/tcp.h>
diff --git a/drivers/target/iscsi/iscsi_target.c b/drivers/target/iscsi/iscsi_target.c
index 1d25e64b068a..003c6a7c81a7 100644
--- a/drivers/target/iscsi/iscsi_target.c
+++ b/drivers/target/iscsi/iscsi_target.c
@@ -9,6 +9,8 @@
  ******************************************************************************/
 
 #include <crypto/hash.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kthread.h>
 #include <linux/completion.h>
diff --git a/drivers/target/iscsi/iscsi_target_auth.c b/drivers/target/iscsi/iscsi_target_auth.c
index c8a248bd11be..fbb99bf1edde 100644
--- a/drivers/target/iscsi/iscsi_target_auth.c
+++ b/drivers/target/iscsi/iscsi_target_auth.c
@@ -9,7 +9,10 @@
  ******************************************************************************/
 
 #include <crypto/hash.h>
+#include <linux/hex.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/err.h>
 #include <linux/random.h>
diff --git a/drivers/target/iscsi/iscsi_target_configfs.c b/drivers/target/iscsi/iscsi_target_configfs.c
index 88db94f382bb..4e976195def2 100644
--- a/drivers/target/iscsi/iscsi_target_configfs.c
+++ b/drivers/target/iscsi/iscsi_target_configfs.c
@@ -13,7 +13,9 @@
 #include <linux/ctype.h>
 #include <linux/export.h>
 #include <linux/inet.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/ipv6.h>
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
diff --git a/drivers/target/iscsi/iscsi_target_erl0.c b/drivers/target/iscsi/iscsi_target_erl0.c
index 07e9cf431edd..2f76d1bd00c1 100644
--- a/drivers/target/iscsi/iscsi_target_erl0.c
+++ b/drivers/target/iscsi/iscsi_target_erl0.c
@@ -10,6 +10,8 @@
  ******************************************************************************/
 
 #include <linux/sched/signal.h>
+#include <linux/completion.h>
+#include <linux/timer.h>
 
 #include <scsi/iscsi_proto.h>
 #include <target/target_core_base.h>
diff --git a/drivers/target/iscsi/iscsi_target_erl1.c b/drivers/target/iscsi/iscsi_target_erl1.c
index 679720021183..5fe5c54814ad 100644
--- a/drivers/target/iscsi/iscsi_target_erl1.c
+++ b/drivers/target/iscsi/iscsi_target_erl1.c
@@ -10,6 +10,7 @@
 
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/timer.h>
 #include <scsi/iscsi_proto.h>
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
diff --git a/drivers/target/iscsi/iscsi_target_login.c b/drivers/target/iscsi/iscsi_target_login.c
index 90b870f234f0..01771d58c618 100644
--- a/drivers/target/iscsi/iscsi_target_login.c
+++ b/drivers/target/iscsi/iscsi_target_login.c
@@ -9,7 +9,10 @@
  ******************************************************************************/
 
 #include <crypto/hash.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kthread.h>
 #include <linux/sched/signal.h>
diff --git a/drivers/target/iscsi/iscsi_target_nego.c b/drivers/target/iscsi/iscsi_target_nego.c
index fa3fb5f4e6bc..1ed854637556 100644
--- a/drivers/target/iscsi/iscsi_target_nego.c
+++ b/drivers/target/iscsi/iscsi_target_nego.c
@@ -18,6 +18,7 @@
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
 #include <target/iscsi/iscsi_transport.h>
+#include <linux/completion.h>
 
 #include <target/iscsi/iscsi_target_core.h>
 #include "iscsi_target_parameters.h"
diff --git a/drivers/target/iscsi/iscsi_target_parameters.c b/drivers/target/iscsi/iscsi_target_parameters.c
index 5b90c22ee3dc..ccce4bc2138e 100644
--- a/drivers/target/iscsi/iscsi_target_parameters.c
+++ b/drivers/target/iscsi/iscsi_target_parameters.c
@@ -9,6 +9,8 @@
  ******************************************************************************/
 
 #include <linux/slab.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uio.h> /* struct kvec */
 #include <target/iscsi/iscsi_target_core.h>
 #include "iscsi_target_util.h"
diff --git a/drivers/target/iscsi/iscsi_target_stat.c b/drivers/target/iscsi/iscsi_target_stat.c
index 367c6468b8e1..8013bce0c456 100644
--- a/drivers/target/iscsi/iscsi_target_stat.c
+++ b/drivers/target/iscsi/iscsi_target_stat.c
@@ -11,6 +11,7 @@
 
 #include <linux/configfs.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <scsi/iscsi_proto.h>
 #include <target/target_core_base.h>
 
diff --git a/drivers/target/iscsi/iscsi_target_tpg.c b/drivers/target/iscsi/iscsi_target_tpg.c
index f7bac98fd4fe..e8007be8f88a 100644
--- a/drivers/target/iscsi/iscsi_target_tpg.c
+++ b/drivers/target/iscsi/iscsi_target_tpg.c
@@ -9,6 +9,8 @@
  ******************************************************************************/
 
 #include <linux/slab.h>
+#include <linux/kref.h>
+#include <linux/sprintf.h>
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
 #include <target/iscsi/iscsi_target_core.h>
@@ -19,6 +21,7 @@
 #include "iscsi_target_util.h"
 #include "iscsi_target.h"
 #include "iscsi_target_parameters.h"
+#include <linux/completion.h>
 
 #include <target/iscsi/iscsi_transport.h>
 
diff --git a/drivers/target/iscsi/iscsi_target_util.c b/drivers/target/iscsi/iscsi_target_util.c
index 91a75a4a7cc1..ec2272170bcc 100644
--- a/drivers/target/iscsi/iscsi_target_util.c
+++ b/drivers/target/iscsi/iscsi_target_util.c
@@ -16,6 +16,7 @@
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
 #include <target/iscsi/iscsi_transport.h>
+#include <linux/completion.h>
 
 #include <target/iscsi/iscsi_target_core.h>
 #include "iscsi_target_parameters.h"
diff --git a/drivers/target/loopback/tcm_loop.c b/drivers/target/loopback/tcm_loop.c
index 761c511aea07..e5180ae085f2 100644
--- a/drivers/target/loopback/tcm_loop.c
+++ b/drivers/target/loopback/tcm_loop.c
@@ -23,7 +23,9 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/configfs.h>
 #include <scsi/scsi.h>
@@ -31,6 +33,7 @@
 #include <scsi/scsi_host.h>
 #include <scsi/scsi_device.h>
 #include <scsi/scsi_cmnd.h>
+#include <linux/completion.h>
 
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
diff --git a/drivers/target/sbp/sbp_target.c b/drivers/target/sbp/sbp_target.c
index b604fcae21e1..d33613c0e6e6 100644
--- a/drivers/target/sbp/sbp_target.c
+++ b/drivers/target/sbp/sbp_target.c
@@ -9,8 +9,10 @@
 #define pr_fmt(fmt) KMSG_COMPONENT ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/configfs.h>
diff --git a/drivers/target/target_core_alua.c b/drivers/target/target_core_alua.c
index 01751faad386..16a404b8baf8 100644
--- a/drivers/target/target_core_alua.c
+++ b/drivers/target/target_core_alua.c
@@ -12,12 +12,15 @@
 
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/configfs.h>
 #include <linux/delay.h>
 #include <linux/export.h>
 #include <linux/fcntl.h>
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
+#include <linux/percpu-refcount.h>
 #include <scsi/scsi_proto.h>
 #include <asm/unaligned.h>
 
diff --git a/drivers/target/target_core_configfs.c b/drivers/target/target_core_configfs.c
index a5f58988130a..3f50a15a92d2 100644
--- a/drivers/target/target_core_configfs.c
+++ b/drivers/target/target_core_configfs.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <generated/utsrelease.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/init.h>
 #include <linux/fs.h>
diff --git a/drivers/target/target_core_device.c b/drivers/target/target_core_device.c
index 7a85e6477e46..3862f6889167 100644
--- a/drivers/target/target_core_device.c
+++ b/drivers/target/target_core_device.c
@@ -22,6 +22,7 @@
 #include <linux/export.h>
 #include <linux/t10-pi.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 #include <net/sock.h>
 #include <net/tcp.h>
 #include <scsi/scsi_common.h>
diff --git a/drivers/target/target_core_fabric_configfs.c b/drivers/target/target_core_fabric_configfs.c
index 7156a4dc1ca7..4b6850cf9fc3 100644
--- a/drivers/target/target_core_fabric_configfs.c
+++ b/drivers/target/target_core_fabric_configfs.c
@@ -14,6 +14,7 @@
 #include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/init.h>
 #include <linux/fs.h>
@@ -24,6 +25,7 @@
 #include <linux/unistd.h>
 #include <linux/string.h>
 #include <linux/syscalls.h>
+#include <linux/sysfs.h>
 #include <linux/configfs.h>
 
 #include <target/target_core_base.h>
diff --git a/drivers/target/target_core_fabric_lib.c b/drivers/target/target_core_fabric_lib.c
index 6600ae44f29d..3be8bebd614b 100644
--- a/drivers/target/target_core_fabric_lib.c
+++ b/drivers/target/target_core_fabric_lib.c
@@ -17,8 +17,10 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
+#include <linux/hex.h>
 #include <linux/spinlock.h>
 #include <linux/export.h>
 #include <asm/unaligned.h>
diff --git a/drivers/target/target_core_file.c b/drivers/target/target_core_file.c
index 4d447520bab8..fdb8a91cb69f 100644
--- a/drivers/target/target_core_file.c
+++ b/drivers/target/target_core_file.c
@@ -11,9 +11,12 @@
  ******************************************************************************/
 
 #include <linux/string.h>
+#include <linux/kstrtox.h>
 #include <linux/parser.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/blkdev.h>
+#include <linux/bvec.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/module.h>
diff --git a/drivers/target/target_core_iblock.c b/drivers/target/target_core_iblock.c
index 7f6ca8177845..798733fb2ef3 100644
--- a/drivers/target/target_core_iblock.c
+++ b/drivers/target/target_core_iblock.c
@@ -13,10 +13,12 @@
 
 #include <linux/string.h>
 #include <linux/parser.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/fs.h>
 #include <linux/blkdev.h>
 #include <linux/blk-integrity.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/bio.h>
diff --git a/drivers/target/target_core_pr.c b/drivers/target/target_core_pr.c
index 80b7d85030d0..008575f020ba 100644
--- a/drivers/target/target_core_pr.c
+++ b/drivers/target/target_core_pr.c
@@ -13,6 +13,7 @@
 
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/list.h>
 #include <linux/vmalloc.h>
 #include <linux/file.h>
diff --git a/drivers/target/target_core_pscsi.c b/drivers/target/target_core_pscsi.c
index 9aedd682d10c..a3d4e5d4c728 100644
--- a/drivers/target/target_core_pscsi.c
+++ b/drivers/target/target_core_pscsi.c
@@ -12,9 +12,11 @@
 
 #include <linux/string.h>
 #include <linux/parser.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/blkdev.h>
 #include <linux/blk_types.h>
+#include <linux/file.h> // for fput()
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/cdrom.h>
diff --git a/drivers/target/target_core_rd.c b/drivers/target/target_core_rd.c
index 6f67cc09c2b5..b7251513bb37 100644
--- a/drivers/target/target_core_rd.c
+++ b/drivers/target/target_core_rd.c
@@ -14,10 +14,12 @@
 #include <linux/string.h>
 #include <linux/parser.h>
 #include <linux/highmem.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_proto.h>
 
 #include <target/target_core_base.h>
diff --git a/drivers/target/target_core_spc.c b/drivers/target/target_core_spc.c
index 50290abc07bc..8e090a62fe2a 100644
--- a/drivers/target/target_core_spc.c
+++ b/drivers/target/target_core_spc.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <asm/unaligned.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi_proto.h>
 #include <scsi/scsi_common.h>
diff --git a/drivers/target/target_core_stat.c b/drivers/target/target_core_stat.c
index c42cbde8a31b..594af853b97d 100644
--- a/drivers/target/target_core_stat.c
+++ b/drivers/target/target_core_stat.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/string.h>
 #include <linux/utsname.h>
diff --git a/drivers/target/target_core_tpg.c b/drivers/target/target_core_tpg.c
index c0e429e5ef31..65fbe25c6779 100644
--- a/drivers/target/target_core_tpg.c
+++ b/drivers/target/target_core_tpg.c
@@ -11,6 +11,7 @@
  ******************************************************************************/
 
 #include <linux/net.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/slab.h>
@@ -20,6 +21,7 @@
 #include <net/sock.h>
 #include <net/tcp.h>
 #include <scsi/scsi_proto.h>
+#include <linux/completion.h>
 
 #include <target/target_core_base.h>
 #include <target/target_core_backend.h>
diff --git a/drivers/target/target_core_transport.c b/drivers/target/target_core_transport.c
index 73d0d6133ac8..bfc1ed048182 100644
--- a/drivers/target/target_core_transport.c
+++ b/drivers/target/target_core_transport.c
@@ -12,6 +12,7 @@
 
 #include <linux/net.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/slab.h>
@@ -19,6 +20,7 @@
 #include <linux/kthread.h>
 #include <linux/in.h>
 #include <linux/cdrom.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/ratelimit.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/target/target_core_user.c b/drivers/target/target_core_user.c
index 7eb94894bd68..ad6983204909 100644
--- a/drivers/target/target_core_user.c
+++ b/drivers/target/target_core_user.c
@@ -9,6 +9,8 @@
 #include <linux/spinlock.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/parser.h>
 #include <linux/vmalloc.h>
@@ -16,6 +18,7 @@
 #include <linux/xarray.h>
 #include <linux/stringify.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/highmem.h>
 #include <linux/configfs.h>
 #include <linux/mutex.h>
diff --git a/drivers/target/target_core_xcopy.c b/drivers/target/target_core_xcopy.c
index 4128631c9dfd..fafa738f0f7e 100644
--- a/drivers/target/target_core_xcopy.c
+++ b/drivers/target/target_core_xcopy.c
@@ -18,8 +18,10 @@
 #include <linux/rculist.h>
 #include <linux/configfs.h>
 #include <linux/ratelimit.h>
+#include <linux/workqueue.h>
 #include <scsi/scsi_proto.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include <target/target_core_base.h>
 #include <target/target_core_backend.h>
diff --git a/drivers/target/tcm_fc/tfc_conf.c b/drivers/target/tcm_fc/tfc_conf.c
index 5ee03d1cba2b..517c0d872cd1 100644
--- a/drivers/target/tcm_fc/tfc_conf.c
+++ b/drivers/target/tcm_fc/tfc_conf.c
@@ -16,6 +16,8 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <generated/utsrelease.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/init.h>
 #include <linux/slab.h>
diff --git a/drivers/target/tcm_remote/tcm_remote.c b/drivers/target/tcm_remote/tcm_remote.c
index cb8db2558056..00af7336bbf2 100644
--- a/drivers/target/tcm_remote/tcm_remote.c
+++ b/drivers/target/tcm_remote/tcm_remote.c
@@ -3,7 +3,9 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/configfs.h>
 #include <scsi/scsi.h>
diff --git a/drivers/tee/amdtee/call.c b/drivers/tee/amdtee/call.c
index e9b63dcb3194..0ad33c704f80 100644
--- a/drivers/tee/amdtee/call.c
+++ b/drivers/tee/amdtee/call.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/tee.h>
 #include <linux/tee_drv.h>
 #include <linux/psp-tee.h>
diff --git a/drivers/tee/amdtee/core.c b/drivers/tee/amdtee/core.c
index 3c15f6a9e91c..8356a20f7249 100644
--- a/drivers/tee/amdtee/core.c
+++ b/drivers/tee/amdtee/core.c
@@ -7,6 +7,7 @@
 #include <linux/io.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/device.h>
 #include <linux/tee_drv.h>
diff --git a/drivers/tee/optee/call.c b/drivers/tee/optee/call.c
index a91e50be11be..f258e7da9733 100644
--- a/drivers/tee/optee/call.c
+++ b/drivers/tee/optee/call.c
@@ -10,6 +10,7 @@
 #include <linux/tee_drv.h>
 #include <linux/types.h>
 #include "optee_private.h"
+#include <linux/completion.h>
 
 #define MAX_ARG_PARAM_COUNT	6
 
diff --git a/drivers/tee/optee/notif.c b/drivers/tee/optee/notif.c
index 05212842b0a5..b2293bb89928 100644
--- a/drivers/tee/optee/notif.c
+++ b/drivers/tee/optee/notif.c
@@ -6,6 +6,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/arm-smccc.h>
+#include <linux/completion.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
diff --git a/drivers/tee/optee/supp.c b/drivers/tee/optee/supp.c
index 322a543b8c27..90559e0722c4 100644
--- a/drivers/tee/optee/supp.c
+++ b/drivers/tee/optee/supp.c
@@ -2,6 +2,7 @@
 /*
  * Copyright (c) 2015, Linaro Limited
  */
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/slab.h>
 #include <linux/uaccess.h>
diff --git a/drivers/tee/tee_core.c b/drivers/tee/tee_core.c
index 792d6fae4354..6f1691d708f5 100644
--- a/drivers/tee/tee_core.c
+++ b/drivers/tee/tee_core.c
@@ -6,11 +6,14 @@
 #define pr_fmt(fmt) "%s: " fmt, __func__
 
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/cred.h>
 #include <linux/fs.h>
 #include <linux/idr.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tee_drv.h>
 #include <linux/uaccess.h>
 #include <crypto/hash.h>
diff --git a/drivers/thermal/cpufreq_cooling.c b/drivers/thermal/cpufreq_cooling.c
index 9d1b1459700d..4035673c98f5 100644
--- a/drivers/thermal/cpufreq_cooling.c
+++ b/drivers/thermal/cpufreq_cooling.c
@@ -20,6 +20,7 @@
 #include <linux/pm_opp.h>
 #include <linux/pm_qos.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <linux/units.h>
 
diff --git a/drivers/thermal/cpuidle_cooling.c b/drivers/thermal/cpuidle_cooling.c
index f678c1281862..796ff4c5ceb8 100644
--- a/drivers/thermal/cpuidle_cooling.c
+++ b/drivers/thermal/cpuidle_cooling.c
@@ -15,6 +15,7 @@
 #include <linux/idle_inject.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 
 /**
diff --git a/drivers/thermal/devfreq_cooling.c b/drivers/thermal/devfreq_cooling.c
index 50dec24e967a..0434f67d0f45 100644
--- a/drivers/thermal/devfreq_cooling.c
+++ b/drivers/thermal/devfreq_cooling.c
@@ -10,6 +10,7 @@
  *      registered, the devfreq cooling won't react to it.
  */
 
+#include <linux/device.h>
 #include <linux/devfreq.h>
 #include <linux/devfreq_cooling.h>
 #include <linux/energy_model.h>
@@ -17,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/pm_opp.h>
 #include <linux/pm_qos.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <linux/units.h>
 
diff --git a/drivers/thermal/gov_user_space.c b/drivers/thermal/gov_user_space.c
index 7a1790b7e8f5..7c7ecd427425 100644
--- a/drivers/thermal/gov_user_space.c
+++ b/drivers/thermal/gov_user_space.c
@@ -10,7 +10,9 @@
  * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  */
 
+#include <linux/kobject.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 
 #include "thermal_core.h"
diff --git a/drivers/thermal/intel/int340x_thermal/int3400_thermal.c b/drivers/thermal/intel/int340x_thermal/int3400_thermal.c
index 427d370648d5..f60b9c157468 100644
--- a/drivers/thermal/intel/int340x_thermal/int3400_thermal.c
+++ b/drivers/thermal/intel/int340x_thermal/int3400_thermal.c
@@ -9,6 +9,9 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/acpi.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include "acpi_thermal_rel.h"
 
diff --git a/drivers/thermal/intel/int340x_thermal/processor_thermal_device.c b/drivers/thermal/intel/int340x_thermal/processor_thermal_device.c
index 649f67fdf345..a124e5eeb465 100644
--- a/drivers/thermal/intel/int340x_thermal/processor_thermal_device.c
+++ b/drivers/thermal/intel/int340x_thermal/processor_thermal_device.c
@@ -6,8 +6,10 @@
 #include <linux/acpi.h>
 #include <linux/intel_tcc.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include "int340x_thermal_zone.h"
 #include "processor_thermal_device.h"
diff --git a/drivers/thermal/intel/int340x_thermal/processor_thermal_rfim.c b/drivers/thermal/intel/int340x_thermal/processor_thermal_rfim.c
index 546b70434004..1bf0f14f5778 100644
--- a/drivers/thermal/intel/int340x_thermal/processor_thermal_rfim.c
+++ b/drivers/thermal/intel/int340x_thermal/processor_thermal_rfim.c
@@ -5,9 +5,11 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include "processor_thermal_device.h"
+#include <linux/sprintf.h>
 
 MODULE_IMPORT_NS(INT340X_THERMAL);
 
diff --git a/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_hint.c b/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_hint.c
index 9d5e4c169d1b..42b0f34197f9 100644
--- a/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_hint.c
+++ b/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_hint.c
@@ -29,6 +29,7 @@
  */
 
 #include <linux/bitfield.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include "processor_thermal_device.h"
 
diff --git a/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_req.c b/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_req.c
index 711c4f761c9a..a27f5df7ebf5 100644
--- a/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_req.c
+++ b/drivers/thermal/intel/int340x_thermal/processor_thermal_wt_req.c
@@ -8,6 +8,7 @@
 
 #include <linux/pci.h>
 #include "processor_thermal_device.h"
+#include <linux/sprintf.h>
 
 /* List of workload types */
 static const char * const workload_types[] = {
diff --git a/drivers/thermal/intel/intel_bxt_pmic_thermal.c b/drivers/thermal/intel/intel_bxt_pmic_thermal.c
index 6312c6ba081f..192bb171f370 100644
--- a/drivers/thermal/intel/intel_bxt_pmic_thermal.c
+++ b/drivers/thermal/intel/intel_bxt_pmic_thermal.c
@@ -11,6 +11,7 @@
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/device.h>
+#include <linux/mod_devicetable.h> // for struct platform_device_id
 #include <linux/thermal.h>
 #include <linux/platform_device.h>
 #include <linux/sched.h>
diff --git a/drivers/thermal/intel/intel_powerclamp.c b/drivers/thermal/intel/intel_powerclamp.c
index bc6eb0dd66a4..03b51edd7303 100644
--- a/drivers/thermal/intel/intel_powerclamp.c
+++ b/drivers/thermal/intel/intel_powerclamp.c
@@ -28,9 +28,11 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>
 #include <linux/cpu.h>
+#include <linux/kstrtox.h>
 #include <linux/thermal.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
+#include <linux/sysfs.h>
 #include <linux/idle_inject.h>
 
 #include <asm/msr.h>
diff --git a/drivers/thermal/intel/intel_soc_dts_iosf.c b/drivers/thermal/intel/intel_soc_dts_iosf.c
index d00def3c4703..6b87b092d6c5 100644
--- a/drivers/thermal/intel/intel_soc_dts_iosf.c
+++ b/drivers/thermal/intel/intel_soc_dts_iosf.c
@@ -13,6 +13,7 @@
 #include <linux/interrupt.h>
 #include <asm/iosf_mbi.h>
 #include "intel_soc_dts_iosf.h"
+#include <linux/sprintf.h>
 
 #define SOC_DTS_OFFSET_ENABLE		0xB0
 #define SOC_DTS_OFFSET_TEMP		0xB1
diff --git a/drivers/thermal/intel/therm_throt.c b/drivers/thermal/intel/therm_throt.c
index e69868e868eb..d45e55e5708f 100644
--- a/drivers/thermal/intel/therm_throt.c
+++ b/drivers/thermal/intel/therm_throt.c
@@ -14,12 +14,14 @@
  * Credits: Adapted from Zwane Mwaikambo's original code in mce_intel.c.
  *          Inspired by Ross Biro's and Al Borchers' counter code.
  */
+#include <linux/device.h>
 #include <linux/interrupt.h>
 #include <linux/notifier.h>
 #include <linux/jiffies.h>
 #include <linux/kernel.h>
 #include <linux/percpu.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/smp.h>
diff --git a/drivers/thermal/mediatek/lvts_thermal.c b/drivers/thermal/mediatek/lvts_thermal.c
index 98d9c80bd4c6..23f080151219 100644
--- a/drivers/thermal/mediatek/lvts_thermal.c
+++ b/drivers/thermal/mediatek/lvts_thermal.c
@@ -16,6 +16,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <dt-bindings/thermal/mediatek,lvts-thermal.h>
 
diff --git a/drivers/thermal/qcom/tsens.c b/drivers/thermal/qcom/tsens.c
index 6d7c16ccb44d..9be897b69cf8 100644
--- a/drivers/thermal/qcom/tsens.c
+++ b/drivers/thermal/qcom/tsens.c
@@ -17,6 +17,7 @@
 #include <linux/pm.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include "../thermal_hwmon.h"
 #include "tsens.h"
diff --git a/drivers/thermal/tegra/tegra-bpmp-thermal.c b/drivers/thermal/tegra/tegra-bpmp-thermal.c
index 72ce14c980cd..eecd294c772a 100644
--- a/drivers/thermal/tegra/tegra-bpmp-thermal.c
+++ b/drivers/thermal/tegra/tegra-bpmp-thermal.c
@@ -9,6 +9,7 @@
 
 #include <linux/err.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/thermal.h>
 #include <linux/workqueue.h>
diff --git a/drivers/thermal/thermal-generic-adc.c b/drivers/thermal/thermal-generic-adc.c
index 1717e4a19dcb..f2922c4488a1 100644
--- a/drivers/thermal/thermal-generic-adc.c
+++ b/drivers/thermal/thermal-generic-adc.c
@@ -9,6 +9,7 @@
 #include <linux/iio/consumer.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/thermal.h>
diff --git a/drivers/thermal/thermal_core.c b/drivers/thermal/thermal_core.c
index dfaa6341694a..9e54d1905d4a 100644
--- a/drivers/thermal/thermal_core.c
+++ b/drivers/thermal/thermal_core.c
@@ -15,11 +15,13 @@
 #include <linux/slab.h>
 #include <linux/kdev_t.h>
 #include <linux/idr.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 #include <linux/reboot.h>
 #include <linux/string.h>
 #include <linux/of.h>
 #include <linux/suspend.h>
+#include <linux/completion.h>
 
 #define CREATE_TRACE_POINTS
 #include "thermal_trace.h"
diff --git a/drivers/thermal/thermal_debugfs.c b/drivers/thermal/thermal_debugfs.c
index c617e8b9f0dd..a168271c4d2c 100644
--- a/drivers/thermal/thermal_debugfs.c
+++ b/drivers/thermal/thermal_debugfs.c
@@ -11,6 +11,7 @@
 #include <linux/list.h>
 #include <linux/minmax.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 
 #include "thermal_core.h"
diff --git a/drivers/thermal/thermal_hwmon.c b/drivers/thermal/thermal_hwmon.c
index 252116f1e535..c16f985a1ec6 100644
--- a/drivers/thermal/thermal_hwmon.c
+++ b/drivers/thermal/thermal_hwmon.c
@@ -14,6 +14,7 @@
 #include <linux/export.h>
 #include <linux/hwmon.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/thermal.h>
 
 #include "thermal_hwmon.h"
diff --git a/drivers/thermal/thermal_sysfs.c b/drivers/thermal/thermal_sysfs.c
index f4033865b093..bf2f97ff5f92 100644
--- a/drivers/thermal/thermal_sysfs.c
+++ b/drivers/thermal/thermal_sysfs.c
@@ -15,7 +15,9 @@
 #include <linux/sysfs.h>
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/jiffies.h>
 
diff --git a/drivers/thunderbolt/ctl.c b/drivers/thunderbolt/ctl.c
index d997a4c545f7..07e85394d4ab 100644
--- a/drivers/thunderbolt/ctl.c
+++ b/drivers/thunderbolt/ctl.c
@@ -12,6 +12,7 @@
 #include <linux/pci.h>
 #include <linux/dmapool.h>
 #include <linux/workqueue.h>
+#include <linux/completion.h>
 
 #include "ctl.h"
 
diff --git a/drivers/thunderbolt/debugfs.c b/drivers/thunderbolt/debugfs.c
index e324cd899719..32233bfff074 100644
--- a/drivers/thunderbolt/debugfs.c
+++ b/drivers/thunderbolt/debugfs.c
@@ -8,7 +8,9 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "tb.h"
diff --git a/drivers/thunderbolt/domain.c b/drivers/thunderbolt/domain.c
index ee8a894bd70d..f061c3e19009 100644
--- a/drivers/thunderbolt/domain.c
+++ b/drivers/thunderbolt/domain.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/random.h>
 #include <crypto/hash.h>
+#include <linux/completion.h>
 
 #include "tb.h"
 
diff --git a/drivers/thunderbolt/icm.c b/drivers/thunderbolt/icm.c
index baf10d099c77..cd47b78b8d2a 100644
--- a/drivers/thunderbolt/icm.c
+++ b/drivers/thunderbolt/icm.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mutex.h>
 #include <linux/moduleparam.h>
 #include <linux/pci.h>
@@ -18,6 +19,7 @@
 #include <linux/sizes.h>
 #include <linux/slab.h>
 #include <linux/workqueue.h>
+#include <linux/completion.h>
 
 #include "ctl.h"
 #include "nhi_regs.h"
diff --git a/drivers/thunderbolt/retimer.c b/drivers/thunderbolt/retimer.c
index d49d6628dbf2..bfe3b3fdfd4e 100644
--- a/drivers/thunderbolt/retimer.c
+++ b/drivers/thunderbolt/retimer.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pm_runtime.h>
 #include <linux/sched/signal.h>
 
diff --git a/drivers/thunderbolt/switch.c b/drivers/thunderbolt/switch.c
index bca6f28c553b..28779217f93e 100644
--- a/drivers/thunderbolt/switch.c
+++ b/drivers/thunderbolt/switch.c
@@ -7,13 +7,19 @@
  */
 
 #include <linux/delay.h>
+#include <linux/hex.h>
 #include <linux/idr.h>
+#include <linux/hex.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/nvmem-provider.h>
 #include <linux/pm_runtime.h>
 #include <linux/sched/signal.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include "tb.h"
diff --git a/drivers/thunderbolt/test.c b/drivers/thunderbolt/test.c
index 9475c6698c7d..36c5546f7df3 100644
--- a/drivers/thunderbolt/test.c
+++ b/drivers/thunderbolt/test.c
@@ -8,6 +8,7 @@
 
 #include <kunit/test.h>
 #include <linux/idr.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "tb.h"
 #include "tunnel.h"
diff --git a/drivers/thunderbolt/usb4_port.c b/drivers/thunderbolt/usb4_port.c
index e355bfd6343f..533f0e1c7ece 100644
--- a/drivers/thunderbolt/usb4_port.c
+++ b/drivers/thunderbolt/usb4_port.c
@@ -8,6 +8,7 @@
 
 #include <linux/pm_runtime.h>
 #include <linux/component.h>
+#include <linux/kstrtox.h>
 #include <linux/property.h>
 
 #include "tb.h"
diff --git a/drivers/thunderbolt/xdomain.c b/drivers/thunderbolt/xdomain.c
index b48df88981bd..9af93101f89e 100644
--- a/drivers/thunderbolt/xdomain.c
+++ b/drivers/thunderbolt/xdomain.c
@@ -9,10 +9,12 @@
 
 #include <linux/device.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kmod.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/prandom.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/utsname.h>
 #include <linux/uuid.h>
diff --git a/drivers/tty/hvc/hvc_iucv.c b/drivers/tty/hvc/hvc_iucv.c
index fdecc0d63731..e7bfe31c4b2e 100644
--- a/drivers/tty/hvc/hvc_iucv.c
+++ b/drivers/tty/hvc/hvc_iucv.c
@@ -19,8 +19,10 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/mempool.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/wait.h>
 #include <net/iucv/iucv.h>
diff --git a/drivers/tty/hvc/hvc_xen.c b/drivers/tty/hvc/hvc_xen.c
index 0e497501f8e3..fec1cc838b47 100644
--- a/drivers/tty/hvc/hvc_xen.c
+++ b/drivers/tty/hvc/hvc_xen.c
@@ -10,9 +10,11 @@
 #include <linux/err.h>
 #include <linux/irq.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/serial_core.h>
+#include <linux/sprintf.h>
 
 #include <asm/io.h>
 #include <asm/xen/hypervisor.h>
diff --git a/drivers/tty/hvc/hvcs.c b/drivers/tty/hvc/hvcs.c
index f57fd9095f75..8316f2ee428d 100644
--- a/drivers/tty/hvc/hvcs.c
+++ b/drivers/tty/hvc/hvcs.c
@@ -56,6 +56,7 @@
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
 #include <linux/kref.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/list.h>
 #include <linux/major.h>
@@ -64,6 +65,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/tty/ipwireless/hardware.c b/drivers/tty/ipwireless/hardware.c
index 001ec318a918..2a0cbbc5cbae 100644
--- a/drivers/tty/ipwireless/hardware.c
+++ b/drivers/tty/ipwireless/hardware.c
@@ -22,6 +22,7 @@
 #include <linux/kernel.h>
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "hardware.h"
 #include "setup_protocol.h"
diff --git a/drivers/tty/mips_ejtag_fdc.c b/drivers/tty/mips_ejtag_fdc.c
index aac80b69a069..34fa64a8b49a 100644
--- a/drivers/tty/mips_ejtag_fdc.c
+++ b/drivers/tty/mips_ejtag_fdc.c
@@ -21,6 +21,7 @@
 #include <linux/serial_core.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/tty.h>
diff --git a/drivers/tty/moxa.c b/drivers/tty/moxa.c
index ebaada8db929..5520a0e31964 100644
--- a/drivers/tty/moxa.c
+++ b/drivers/tty/moxa.c
@@ -18,6 +18,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mm.h>
 #include <linux/ioport.h>
diff --git a/drivers/tty/n_gsm.c b/drivers/tty/n_gsm.c
index 4036566febcb..9fc9c1850525 100644
--- a/drivers/tty/n_gsm.c
+++ b/drivers/tty/n_gsm.c
@@ -38,6 +38,7 @@
 #include <linux/fcntl.h>
 #include <linux/sched/signal.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/bitfield.h>
 #include <linux/ctype.h>
diff --git a/drivers/tty/nozomi.c b/drivers/tty/nozomi.c
index 1d2a4893b1fe..5b323c7517a9 100644
--- a/drivers/tty/nozomi.c
+++ b/drivers/tty/nozomi.c
@@ -32,6 +32,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/tty/rpmsg_tty.c b/drivers/tty/rpmsg_tty.c
index 60a2915f5cfe..8a936c72ecd6 100644
--- a/drivers/tty/rpmsg_tty.c
+++ b/drivers/tty/rpmsg_tty.c
@@ -12,6 +12,7 @@
 
 #define pr_fmt(fmt)		KBUILD_MODNAME ": " fmt
 
+#include <linux/idr.h>
 #include <linux/module.h>
 #include <linux/rpmsg.h>
 #include <linux/slab.h>
diff --git a/drivers/tty/serdev/core.c b/drivers/tty/serdev/core.c
index 613cb356b918..42e2d00b1f27 100644
--- a/drivers/tty/serdev/core.c
+++ b/drivers/tty/serdev/core.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/errno.h>
 #include <linux/idr.h>
 #include <linux/kernel.h>
diff --git a/drivers/tty/serial/8250/8250_aspeed_vuart.c b/drivers/tty/serial/8250/8250_aspeed_vuart.c
index 8c2aaf7af7b7..160c02185c69 100644
--- a/drivers/tty/serial/8250/8250_aspeed_vuart.c
+++ b/drivers/tty/serial/8250/8250_aspeed_vuart.c
@@ -6,6 +6,7 @@
  *    Copyright (C) 2006 Arnd Bergmann <arnd@arndb.de>, IBM Corp.
  */
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
diff --git a/drivers/tty/serial/8250/8250_bcm7271.c b/drivers/tty/serial/8250/8250_bcm7271.c
index 504c4c020857..0e5f9b7a725b 100644
--- a/drivers/tty/serial/8250/8250_bcm7271.c
+++ b/drivers/tty/serial/8250/8250_bcm7271.c
@@ -16,12 +16,14 @@
 #include <linux/errno.h>
 #include <linux/device.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/of.h>
 #include <linux/dma-mapping.h>
 #include <linux/tty_flip.h>
 #include <linux/delay.h>
 #include <linux/clk.h>
 #include <linux/debugfs.h>
+#include <linux/hrtimer.h>
 
 #include "8250.h"
 
diff --git a/drivers/tty/serial/8250/8250_port.c b/drivers/tty/serial/8250/8250_port.c
index c37905ea3cae..29b4d7f063f6 100644
--- a/drivers/tty/serial/8250/8250_port.c
+++ b/drivers/tty/serial/8250/8250_port.c
@@ -18,6 +18,7 @@
 #include <linux/irq.h>
 #include <linux/console.h>
 #include <linux/gpio/consumer.h>
+#include <linux/kstrtox.h>
 #include <linux/sysrq.h>
 #include <linux/delay.h>
 #include <linux/platform_device.h>
@@ -32,6 +33,7 @@
 #include <linux/uaccess.h>
 #include <linux/pm_runtime.h>
 #include <linux/ktime.h>
+#include <linux/hrtimer.h>
 
 #include <asm/io.h>
 #include <asm/irq.h>
diff --git a/drivers/tty/serial/amba-pl011.c b/drivers/tty/serial/amba-pl011.c
index fccec1698a54..09d4678fda96 100644
--- a/drivers/tty/serial/amba-pl011.c
+++ b/drivers/tty/serial/amba-pl011.c
@@ -21,6 +21,7 @@
 #include <linux/init.h>
 #include <linux/console.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/sysrq.h>
 #include <linux/device.h>
 #include <linux/tty.h>
diff --git a/drivers/tty/serial/earlycon.c b/drivers/tty/serial/earlycon.c
index a5fbb6ed38ae..1d0a22230568 100644
--- a/drivers/tty/serial/earlycon.c
+++ b/drivers/tty/serial/earlycon.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/serial_core.h>
 #include <linux/sizes.h>
 #include <linux/of.h>
diff --git a/drivers/tty/serial/imx.c b/drivers/tty/serial/imx.c
index 4aa72d5aeafb..87100d28fc92 100644
--- a/drivers/tty/serial/imx.c
+++ b/drivers/tty/serial/imx.c
@@ -27,6 +27,7 @@
 #include <linux/of.h>
 #include <linux/io.h>
 #include <linux/dma-mapping.h>
+#include <linux/hrtimer.h>
 
 #include <asm/irq.h>
 #include <linux/dma/imx-dma.h>
diff --git a/drivers/tty/serial/max3100.c b/drivers/tty/serial/max3100.c
index 5efb2b593be3..bd4412665fd6 100644
--- a/drivers/tty/serial/max3100.c
+++ b/drivers/tty/serial/max3100.c
@@ -43,6 +43,7 @@
 #include <linux/serial.h>
 #include <linux/spi/spi.h>
 #include <linux/freezer.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 
diff --git a/drivers/tty/serial/msm_serial.c b/drivers/tty/serial/msm_serial.c
index e24204ad35de..86a4f88c33ba 100644
--- a/drivers/tty/serial/msm_serial.c
+++ b/drivers/tty/serial/msm_serial.c
@@ -18,6 +18,7 @@
 #include <linux/interrupt.h>
 #include <linux/init.h>
 #include <linux/console.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/serial_core.h>
diff --git a/drivers/tty/serial/omap-serial.c b/drivers/tty/serial/omap-serial.c
index f5a0b401af63..fcc90d24fc75 100644
--- a/drivers/tty/serial/omap-serial.c
+++ b/drivers/tty/serial/omap-serial.c
@@ -23,6 +23,7 @@
 #include <linux/serial_reg.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/platform_device.h>
diff --git a/drivers/tty/serial/pch_uart.c b/drivers/tty/serial/pch_uart.c
index 436cc6d52a11..7616ed9c2ea2 100644
--- a/drivers/tty/serial/pch_uart.c
+++ b/drivers/tty/serial/pch_uart.c
@@ -10,6 +10,7 @@
 #include <linux/pci.h>
 #include <linux/console.h>
 #include <linux/serial_core.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/interrupt.h>
diff --git a/drivers/tty/serial/pic32_uart.c b/drivers/tty/serial/pic32_uart.c
index bbb46e6e98a2..b23171095e94 100644
--- a/drivers/tty/serial/pic32_uart.c
+++ b/drivers/tty/serial/pic32_uart.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/console.h>
 #include <linux/clk.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/serial_core.h>
diff --git a/drivers/tty/serial/pmac_zilog.c b/drivers/tty/serial/pmac_zilog.c
index c8bf08c19c64..34b6f4e3f4a3 100644
--- a/drivers/tty/serial/pmac_zilog.c
+++ b/drivers/tty/serial/pmac_zilog.c
@@ -27,6 +27,7 @@
 #undef USE_CTRL_O_SYSRQ
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 
 #include <linux/tty_flip.h>
diff --git a/drivers/tty/serial/pxa.c b/drivers/tty/serial/pxa.c
index 46e70e155aab..8d80a5517566 100644
--- a/drivers/tty/serial/pxa.c
+++ b/drivers/tty/serial/pxa.c
@@ -22,6 +22,7 @@
 #include <linux/ioport.h>
 #include <linux/init.h>
 #include <linux/console.h>
+#include <linux/sprintf.h>
 #include <linux/sysrq.h>
 #include <linux/serial.h>
 #include <linux/serial_reg.h>
diff --git a/drivers/tty/serial/samsung_tty.c b/drivers/tty/serial/samsung_tty.c
index 23cabdab44ff..b6c12944b136 100644
--- a/drivers/tty/serial/samsung_tty.c
+++ b/drivers/tty/serial/samsung_tty.c
@@ -38,6 +38,7 @@
 #include <linux/serial_core.h>
 #include <linux/serial_s3c.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysrq.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/tty/serial/serial_base.h b/drivers/tty/serial/serial_base.h
index c74c548f0db6..27c260e08205 100644
--- a/drivers/tty/serial/serial_base.h
+++ b/drivers/tty/serial/serial_base.h
@@ -6,6 +6,8 @@
  * Author: Tony Lindgren <tony@atomide.com>
  */
 
+#include <linux/idr.h>
+
 #define to_serial_base_ctrl_device(d) container_of((d), struct serial_ctrl_device, dev)
 #define to_serial_base_port_device(d) container_of((d), struct serial_port_device, dev)
 
diff --git a/drivers/tty/serial/serial_core.c b/drivers/tty/serial/serial_core.c
index d6a58a9e072a..bec9ceafa89f 100644
--- a/drivers/tty/serial/serial_core.c
+++ b/drivers/tty/serial/serial_core.c
@@ -8,6 +8,7 @@
  *  Copyright (C) 2000-2001 Deep Blue Solutions Ltd.
  */
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/slab.h>
@@ -16,6 +17,7 @@
 #include <linux/console.h>
 #include <linux/gpio/consumer.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/tty/serial/serial_mctrl_gpio.c b/drivers/tty/serial/serial_mctrl_gpio.c
index e51ca593ab86..c0dacf826c78 100644
--- a/drivers/tty/serial/serial_mctrl_gpio.c
+++ b/drivers/tty/serial/serial_mctrl_gpio.c
@@ -9,6 +9,7 @@
 #include <linux/device.h>
 #include <linux/irq.h>
 #include <linux/gpio/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/termios.h>
 #include <linux/serial_core.h>
 #include <linux/module.h>
diff --git a/drivers/tty/serial/sh-sci.c b/drivers/tty/serial/sh-sci.c
index a85e7b9a2e49..5f1c3f8136fa 100644
--- a/drivers/tty/serial/sh-sci.c
+++ b/drivers/tty/serial/sh-sci.c
@@ -29,6 +29,7 @@
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/ioport.h>
+#include <linux/kstrtox.h>
 #include <linux/ktime.h>
 #include <linux/major.h>
 #include <linux/minmax.h>
@@ -43,11 +44,13 @@
 #include <linux/serial_sci.h>
 #include <linux/sh_dma.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sysrq.h>
 #include <linux/timer.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
+#include <linux/hrtimer.h>
 
 #ifdef CONFIG_SUPERH
 #include <asm/sh_bios.h>
diff --git a/drivers/tty/serial/sprd_serial.c b/drivers/tty/serial/sprd_serial.c
index 15f14fa593da..31615c16fc02 100644
--- a/drivers/tty/serial/sprd_serial.c
+++ b/drivers/tty/serial/sprd_serial.c
@@ -18,6 +18,7 @@
 #include <linux/serial_core.h>
 #include <linux/serial.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 
diff --git a/drivers/tty/serial/suncore.c b/drivers/tty/serial/suncore.c
index 2491551c293e..673dfa437e19 100644
--- a/drivers/tty/serial/suncore.c
+++ b/drivers/tty/serial/suncore.c
@@ -13,6 +13,7 @@
 
 #include <linux/kernel.h>
 #include <linux/console.h>
+#include <linux/kstrtox.h>
 #include <linux/tty.h>
 #include <linux/errno.h>
 #include <linux/string.h>
diff --git a/drivers/tty/serial/sunsab.c b/drivers/tty/serial/sunsab.c
index 1ea2f33a07a7..ee644ea00f4c 100644
--- a/drivers/tty/serial/sunsab.c
+++ b/drivers/tty/serial/sunsab.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/major.h>
diff --git a/drivers/tty/serial/ucc_uart.c b/drivers/tty/serial/ucc_uart.c
index 397b95dff7ed..197a62d57722 100644
--- a/drivers/tty/serial/ucc_uart.c
+++ b/drivers/tty/serial/ucc_uart.c
@@ -21,6 +21,7 @@
 #include <linux/serial.h>
 #include <linux/serial_core.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/io.h>
diff --git a/drivers/tty/serial/vt8500_serial.c b/drivers/tty/serial/vt8500_serial.c
index 78a1c1eea11b..2a41d1e27075 100644
--- a/drivers/tty/serial/vt8500_serial.c
+++ b/drivers/tty/serial/vt8500_serial.c
@@ -15,6 +15,7 @@
 #include <linux/init.h>
 #include <linux/console.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/serial_core.h>
diff --git a/drivers/tty/serial/xilinx_uartps.c b/drivers/tty/serial/xilinx_uartps.c
index 5f48ec37cb25..1f07145e5a68 100644
--- a/drivers/tty/serial/xilinx_uartps.c
+++ b/drivers/tty/serial/xilinx_uartps.c
@@ -25,6 +25,7 @@
 #include <linux/gpio.h>
 #include <linux/gpio/consumer.h>
 #include <linux/delay.h>
+#include <linux/hrtimer.h>
 
 #define CDNS_UART_TTY_NAME	"ttyPS"
 #define CDNS_UART_NAME		"xuartps"
diff --git a/drivers/tty/synclink_gt.c b/drivers/tty/synclink_gt.c
index 8112d9d5a0d8..fdf2fe9fab24 100644
--- a/drivers/tty/synclink_gt.c
+++ b/drivers/tty/synclink_gt.c
@@ -47,6 +47,7 @@
 #include <linux/errno.h>
 #include <linux/signal.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/interrupt.h>
 #include <linux/pci.h>
diff --git a/drivers/tty/sysrq.c b/drivers/tty/sysrq.c
index 02217e3c916b..2943d15b1b82 100644
--- a/drivers/tty/sysrq.c
+++ b/drivers/tty/sysrq.c
@@ -21,6 +21,7 @@
 #include <linux/sched/task.h>
 #include <linux/ctype.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/fs.h>
 #include <linux/mount.h>
diff --git a/drivers/tty/tty_io.c b/drivers/tty/tty_io.c
index 407b0d87b7c1..9c7b021ce32c 100644
--- a/drivers/tty/tty_io.c
+++ b/drivers/tty/tty_io.c
@@ -68,11 +68,13 @@
 #include <linux/types.h>
 #include <linux/major.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/signal.h>
 #include <linux/fcntl.h>
 #include <linux/sched/signal.h>
 #include <linux/sched/task.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/tty/vcc.c b/drivers/tty/vcc.c
index 5b625f20233b..80def56f91d0 100644
--- a/drivers/tty/vcc.c
+++ b/drivers/tty/vcc.c
@@ -8,6 +8,7 @@
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/tty/vt/vt.c b/drivers/tty/vt/vt.c
index 463be4e48dc8..37785c4222eb 100644
--- a/drivers/tty/vt/vt.c
+++ b/drivers/tty/vt/vt.c
@@ -72,11 +72,13 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sched/signal.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/kd.h>
diff --git a/drivers/ufs/core/ufs-debugfs.c b/drivers/ufs/core/ufs-debugfs.c
index e3baed6c70bd..1d0c402b4160 100644
--- a/drivers/ufs/core/ufs-debugfs.c
+++ b/drivers/ufs/core/ufs-debugfs.c
@@ -2,6 +2,7 @@
 // Copyright (C) 2020 Intel Corporation
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 
 #include "ufs-debugfs.h"
 #include <ufs/ufshcd.h>
diff --git a/drivers/ufs/core/ufs-mcq.c b/drivers/ufs/core/ufs-mcq.c
index 8db81f1a12d5..dea6ebbce122 100644
--- a/drivers/ufs/core/ufs-mcq.c
+++ b/drivers/ufs/core/ufs-mcq.c
@@ -9,6 +9,7 @@
 
 #include <asm/unaligned.h>
 #include <linux/dma-mapping.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include "ufshcd-priv.h"
diff --git a/drivers/ufs/core/ufs-sysfs.c b/drivers/ufs/core/ufs-sysfs.c
index 3d049967f6bc..4eda0f9d466d 100644
--- a/drivers/ufs/core/ufs-sysfs.c
+++ b/drivers/ufs/core/ufs-sysfs.c
@@ -2,6 +2,7 @@
 // Copyright (C) 2018 Western Digital Corporation
 
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/bitfield.h>
 #include <asm/unaligned.h>
diff --git a/drivers/ufs/core/ufshcd-crypto.h b/drivers/ufs/core/ufshcd-crypto.h
index be8596f20ba2..7b3e9f9d8e0d 100644
--- a/drivers/ufs/core/ufshcd-crypto.h
+++ b/drivers/ufs/core/ufshcd-crypto.h
@@ -9,10 +9,13 @@
 #include <scsi/scsi_cmnd.h>
 #include <ufs/ufshcd.h>
 #include "ufshcd-priv.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <ufs/ufshci.h>
 
 #ifdef CONFIG_SCSI_UFS_CRYPTO
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+
 static inline void ufshcd_prepare_lrbp_crypto(struct request *rq,
 					      struct ufshcd_lrb *lrbp)
 {
diff --git a/drivers/ufs/core/ufshcd.c b/drivers/ufs/core/ufshcd.c
index d10a77d05d2f..7029fef28182 100644
--- a/drivers/ufs/core/ufshcd.c
+++ b/drivers/ufs/core/ufshcd.c
@@ -10,7 +10,10 @@
  */
 
 #include <linux/async.h>
+#include <linux/completion.h>
 #include <linux/devfreq.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/nls.h>
 #include <linux/of.h>
 #include <linux/bitfield.h>
@@ -24,6 +27,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/sched/clock.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 #include <scsi/scsi_cmnd.h>
 #include <scsi/scsi_dbg.h>
 #include <scsi/scsi_driver.h>
diff --git a/drivers/ufs/host/ufs-exynos.c b/drivers/ufs/host/ufs-exynos.c
index 734d40f99e31..f234cb61862b 100644
--- a/drivers/ufs/host/ufs-exynos.c
+++ b/drivers/ufs/host/ufs-exynos.c
@@ -17,6 +17,7 @@
 #include <linux/phy/phy.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 
 #include <ufs/ufshcd.h>
 #include "ufshcd-pltfrm.h"
diff --git a/drivers/ufs/host/ufs-mediatek.c b/drivers/ufs/host/ufs-mediatek.c
index b8a8801322e2..a7205c12417d 100644
--- a/drivers/ufs/host/ufs-mediatek.c
+++ b/drivers/ufs/host/ufs-mediatek.c
@@ -20,6 +20,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
 #include <linux/soc/mediatek/mtk_sip_svc.h>
+#include <linux/sprintf.h>
 
 #include <ufs/ufshcd.h>
 #include "ufshcd-pltfrm.h"
diff --git a/drivers/ufs/host/ufshcd-pltfrm.c b/drivers/ufs/host/ufshcd-pltfrm.c
index a3e69ecafd27..3e32e62f7289 100644
--- a/drivers/ufs/host/ufshcd-pltfrm.c
+++ b/drivers/ufs/host/ufshcd-pltfrm.c
@@ -14,6 +14,7 @@
 #include <linux/pm_opp.h>
 #include <linux/pm_runtime.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <ufs/ufshcd.h>
 #include "ufshcd-pltfrm.h"
diff --git a/drivers/uio/uio.c b/drivers/uio/uio.c
index 2d572f6c8ec8..ec1bfd4f1413 100644
--- a/drivers/uio/uio.c
+++ b/drivers/uio/uio.c
@@ -20,6 +20,7 @@
 #include <linux/mm.h>
 #include <linux/idr.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kobject.h>
 #include <linux/cdev.h>
diff --git a/drivers/uio/uio_fsl_elbc_gpcm.c b/drivers/uio/uio_fsl_elbc_gpcm.c
index 82dda799f327..df06848b2ecc 100644
--- a/drivers/uio/uio_fsl_elbc_gpcm.c
+++ b/drivers/uio/uio_fsl_elbc_gpcm.c
@@ -41,6 +41,8 @@
 
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/platform_device.h>
diff --git a/drivers/uio/uio_hv_generic.c b/drivers/uio/uio_hv_generic.c
index 20d9762331bd..8572f62567f8 100644
--- a/drivers/uio/uio_hv_generic.c
+++ b/drivers/uio/uio_hv_generic.c
@@ -22,6 +22,7 @@
 #include <linux/device.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uio_driver.h>
 #include <linux/netdevice.h>
 #include <linux/if_ether.h>
diff --git a/drivers/usb/atm/cxacru.c b/drivers/usb/atm/cxacru.c
index 4ce7cba2b48a..d0f062a966f3 100644
--- a/drivers/usb/atm/cxacru.c
+++ b/drivers/usb/atm/cxacru.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/errno.h>
 #include <linux/slab.h>
@@ -25,6 +26,7 @@
 #include <linux/firmware.h>
 #include <linux/mutex.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "usbatm.h"
 
diff --git a/drivers/usb/atm/speedtch.c b/drivers/usb/atm/speedtch.c
index 973548b5c15c..741a6e218ece 100644
--- a/drivers/usb/atm/speedtch.c
+++ b/drivers/usb/atm/speedtch.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/timer.h>
 #include <linux/types.h>
diff --git a/drivers/usb/atm/usbatm.c b/drivers/usb/atm/usbatm.c
index 2da6615fbb6f..7ef2b2fbeff9 100644
--- a/drivers/usb/atm/usbatm.c
+++ b/drivers/usb/atm/usbatm.c
@@ -49,6 +49,8 @@
  */
 
 #include "usbatm.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 #include <linux/crc32.h>
diff --git a/drivers/usb/c67x00/c67x00-hcd.c b/drivers/usb/c67x00/c67x00-hcd.c
index 39f237666331..e36a2b04004e 100644
--- a/drivers/usb/c67x00/c67x00-hcd.c
+++ b/drivers/usb/c67x00/c67x00-hcd.c
@@ -10,6 +10,7 @@
 #include <linux/device.h>
 #include <linux/platform_device.h>
 #include <linux/usb.h>
+#include <linux/completion.h>
 
 #include "c67x00.h"
 #include "c67x00-hcd.h"
diff --git a/drivers/usb/c67x00/c67x00-ll-hpi.c b/drivers/usb/c67x00/c67x00-ll-hpi.c
index 7a214a3a6cc7..c99d4745a0b3 100644
--- a/drivers/usb/c67x00/c67x00-ll-hpi.c
+++ b/drivers/usb/c67x00/c67x00-ll-hpi.c
@@ -8,6 +8,7 @@
  */
 
 #include <asm/byteorder.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/jiffies.h>
diff --git a/drivers/usb/c67x00/c67x00-sched.c b/drivers/usb/c67x00/c67x00-sched.c
index a09fa68a6ce7..8a2d06ba6294 100644
--- a/drivers/usb/c67x00/c67x00-sched.c
+++ b/drivers/usb/c67x00/c67x00-sched.c
@@ -9,6 +9,7 @@
 
 #include <linux/kthread.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 #include "c67x00.h"
 #include "c67x00-hcd.h"
diff --git a/drivers/usb/cdns3/cdns3-debug.h b/drivers/usb/cdns3/cdns3-debug.h
index 4618cfe85a4f..d4a9e11462b7 100644
--- a/drivers/usb/cdns3/cdns3-debug.h
+++ b/drivers/usb/cdns3/cdns3-debug.h
@@ -11,6 +11,7 @@
 #define __LINUX_CDNS3_DEBUG
 
 #include "core.h"
+#include <linux/sprintf.h>
 
 static inline char *cdns3_decode_usb_irq(char *str,
 					 enum usb_device_speed speed,
diff --git a/drivers/usb/cdns3/cdns3-ep0.c b/drivers/usb/cdns3/cdns3-ep0.c
index e29989d57bef..2f73f3a927bc 100644
--- a/drivers/usb/cdns3/cdns3-ep0.c
+++ b/drivers/usb/cdns3/cdns3-ep0.c
@@ -12,6 +12,8 @@
 
 #include <linux/usb/composite.h>
 #include <linux/iopoll.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "cdns3-gadget.h"
 #include "cdns3-trace.h"
diff --git a/drivers/usb/cdns3/cdns3-gadget.c b/drivers/usb/cdns3/cdns3-gadget.c
index aeca902ab6cc..f72eeb21aa64 100644
--- a/drivers/usb/cdns3/cdns3-gadget.c
+++ b/drivers/usb/cdns3/cdns3-gadget.c
@@ -57,11 +57,14 @@
  */
 
 #include <linux/dma-mapping.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/usb/gadget.h>
 #include <linux/module.h>
 #include <linux/dmapool.h>
 #include <linux/iopoll.h>
 #include <linux/property.h>
+#include <linux/completion.h>
 
 #include "core.h"
 #include "gadget-export.h"
diff --git a/drivers/usb/cdns3/cdnsp-debug.h b/drivers/usb/cdns3/cdnsp-debug.h
index cd138acdcce1..6aa517a373f2 100644
--- a/drivers/usb/cdns3/cdnsp-debug.h
+++ b/drivers/usb/cdns3/cdnsp-debug.h
@@ -10,6 +10,8 @@
 #ifndef __LINUX_CDNSP_DEBUG
 #define __LINUX_CDNSP_DEBUG
 
+#include <linux/sprintf.h>
+
 static inline const char *cdnsp_trb_comp_code_string(u8 status)
 {
 	switch (status) {
diff --git a/drivers/usb/cdns3/cdnsp-gadget.c b/drivers/usb/cdns3/cdnsp-gadget.c
index 4a3f0f958256..058126da1db6 100644
--- a/drivers/usb/cdns3/cdnsp-gadget.c
+++ b/drivers/usb/cdns3/cdnsp-gadget.c
@@ -18,6 +18,7 @@
 #include <linux/pci.h>
 #include <linux/irq.h>
 #include <linux/dmi.h>
+#include <linux/sprintf.h>
 
 #include "core.h"
 #include "gadget-export.h"
diff --git a/drivers/usb/cdns3/cdnsp-ring.c b/drivers/usb/cdns3/cdnsp-ring.c
index 02f297f5637d..885c68ba86aa 100644
--- a/drivers/usb/cdns3/cdnsp-ring.c
+++ b/drivers/usb/cdns3/cdnsp-ring.c
@@ -58,6 +58,7 @@
 #include <linux/scatterlist.h>
 #include <linux/dma-mapping.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/slab.h>
 #include <linux/irq.h>
 
diff --git a/drivers/usb/chipidea/core.c b/drivers/usb/chipidea/core.c
index 835bf2428dc6..7fa865ebd9d2 100644
--- a/drivers/usb/chipidea/core.c
+++ b/drivers/usb/chipidea/core.c
@@ -28,6 +28,7 @@
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
 #include <linux/pinctrl/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
 #include <linux/usb/otg.h>
diff --git a/drivers/usb/chipidea/debug.c b/drivers/usb/chipidea/debug.c
index e72c43615d77..e0521f551c94 100644
--- a/drivers/usb/chipidea/debug.c
+++ b/drivers/usb/chipidea/debug.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/spinlock.h>
 #include <linux/debugfs.h>
diff --git a/drivers/usb/chipidea/otg_fsm.c b/drivers/usb/chipidea/otg_fsm.c
index c17516c29b63..d29bc0094a0b 100644
--- a/drivers/usb/chipidea/otg_fsm.c
+++ b/drivers/usb/chipidea/otg_fsm.c
@@ -21,6 +21,8 @@
 #include <linux/usb/hcd.h>
 #include <linux/usb/chipidea.h>
 #include <linux/regulator/consumer.h>
+#include <linux/hrtimer.h>
+#include <linux/sprintf.h>
 
 #include "ci.h"
 #include "bits.h"
diff --git a/drivers/usb/chipidea/udc.c b/drivers/usb/chipidea/udc.c
index 2d7f616270c1..3d862e347714 100644
--- a/drivers/usb/chipidea/udc.c
+++ b/drivers/usb/chipidea/udc.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/pm_runtime.h>
 #include <linux/pinctrl/consumer.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
 #include <linux/usb/otg-fsm.h>
diff --git a/drivers/usb/class/cdc-acm.c b/drivers/usb/class/cdc-acm.c
index c123bee56e23..2e6d76ffc5cc 100644
--- a/drivers/usb/class/cdc-acm.c
+++ b/drivers/usb/class/cdc-acm.c
@@ -24,6 +24,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/log2.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/serial.h>
 #include <linux/tty_driver.h>
diff --git a/drivers/usb/class/usblp.c b/drivers/usb/class/usblp.c
index 5a2e43331064..2a6409908594 100644
--- a/drivers/usb/class/usblp.c
+++ b/drivers/usb/class/usblp.c
@@ -40,6 +40,7 @@
 #include <linux/slab.h>
 #include <linux/lp.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #undef DEBUG
 #include <linux/usb.h>
 #include <linux/usb/ch9.h>
diff --git a/drivers/usb/class/usbtmc.c b/drivers/usb/class/usbtmc.c
index 311007b1d904..9d1d8cd7add8 100644
--- a/drivers/usb/class/usbtmc.c
+++ b/drivers/usb/class/usbtmc.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/kref.h>
 #include <linux/slab.h>
diff --git a/drivers/usb/common/debug.c b/drivers/usb/common/debug.c
index f204cec8d380..8562d70ed6ec 100644
--- a/drivers/usb/common/debug.c
+++ b/drivers/usb/common/debug.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 
 static void usb_decode_get_status(__u8 bRequestType, __u16 wIndex,
diff --git a/drivers/usb/common/ulpi.c b/drivers/usb/common/ulpi.c
index 0886b19d2e1c..d945b3a18f36 100644
--- a/drivers/usb/common/ulpi.c
+++ b/drivers/usb/common/ulpi.c
@@ -17,6 +17,7 @@
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/clk/clk-conf.h>
+#include <linux/sprintf.h>
 
 /* -------------------------------------------------------------------------- */
 
diff --git a/drivers/usb/core/buffer.c b/drivers/usb/core/buffer.c
index 87230869e1fa..4043fbee2a7f 100644
--- a/drivers/usb/core/buffer.c
+++ b/drivers/usb/core/buffer.c
@@ -17,6 +17,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/dmapool.h>
 #include <linux/genalloc.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/hcd.h>
 
diff --git a/drivers/usb/core/devices.c b/drivers/usb/core/devices.c
index a247da73f34d..63a42ab75622 100644
--- a/drivers/usb/core/devices.c
+++ b/drivers/usb/core/devices.c
@@ -39,6 +39,7 @@
 #include <linux/fs.h>
 #include <linux/mm.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usbdevice_fs.h>
 #include <linux/usb/hcd.h>
diff --git a/drivers/usb/core/devio.c b/drivers/usb/core/devio.c
index 3beb6a862e80..256c6d094336 100644
--- a/drivers/usb/core/devio.c
+++ b/drivers/usb/core/devio.c
@@ -34,6 +34,7 @@
 #include <linux/usb/hcd.h>	/* for usbcore internals */
 #include <linux/usb/quirks.h>
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/notifier.h>
 #include <linux/security.h>
 #include <linux/user_namespace.h>
diff --git a/drivers/usb/core/driver.c b/drivers/usb/core/driver.c
index e02ba15f6e34..2d1e90c51ac1 100644
--- a/drivers/usb/core/driver.c
+++ b/drivers/usb/core/driver.c
@@ -28,6 +28,7 @@
 #include <linux/device.h>
 #include <linux/slab.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/quirks.h>
 #include <linux/usb/hcd.h>
diff --git a/drivers/usb/core/endpoint.c b/drivers/usb/core/endpoint.c
index a2530811cf7d..b50c343d6a4e 100644
--- a/drivers/usb/core/endpoint.c
+++ b/drivers/usb/core/endpoint.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include "usb.h"
 
diff --git a/drivers/usb/core/file.c b/drivers/usb/core/file.c
index a88ced93b5e7..85d844ca3e03 100644
--- a/drivers/usb/core/file.c
+++ b/drivers/usb/core/file.c
@@ -21,6 +21,7 @@
 #include <linux/errno.h>
 #include <linux/rwsem.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/usb.h>
 
diff --git a/drivers/usb/core/hcd.c b/drivers/usb/core/hcd.c
index 14fc28c4cf48..617b96048706 100644
--- a/drivers/usb/core/hcd.c
+++ b/drivers/usb/core/hcd.c
@@ -10,9 +10,12 @@
  */
 
 #include <linux/bcd.h>
+#include <linux/completion.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/version.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
 #include <linux/sched/task_stack.h>
 #include <linux/slab.h>
 #include <linux/completion.h>
diff --git a/drivers/usb/core/hub.c b/drivers/usb/core/hub.c
index 3ee8455585b6..9cde9042991e 100644
--- a/drivers/usb/core/hub.c
+++ b/drivers/usb/core/hub.c
@@ -20,6 +20,7 @@
 #include <linux/slab.h>
 #include <linux/kcov.h>
 #include <linux/ioctl.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usbdevice_fs.h>
 #include <linux/usb/hcd.h>
diff --git a/drivers/usb/core/ledtrig-usbport.c b/drivers/usb/core/ledtrig-usbport.c
index 85c999f71ad7..753ebf59261c 100644
--- a/drivers/usb/core/ledtrig-usbport.c
+++ b/drivers/usb/core/ledtrig-usbport.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/of.h>
 
diff --git a/drivers/usb/core/message.c b/drivers/usb/core/message.c
index 077dfe48d01c..f8dfa2ef6117 100644
--- a/drivers/usb/core/message.c
+++ b/drivers/usb/core/message.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/pci.h>	/* for scatterlist macros */
 #include <linux/usb.h>
 #include <linux/module.h>
diff --git a/drivers/usb/core/port.c b/drivers/usb/core/port.c
index c628c1abc907..003393950e22 100644
--- a/drivers/usb/core/port.c
+++ b/drivers/usb/core/port.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/pm_qos.h>
 #include <linux/component.h>
+#include <linux/sprintf.h>
 
 #include "hub.h"
 
diff --git a/drivers/usb/core/quirks.c b/drivers/usb/core/quirks.c
index b4783574b8e6..57b2cf861a5b 100644
--- a/drivers/usb/core/quirks.c
+++ b/drivers/usb/core/quirks.c
@@ -11,6 +11,7 @@
 #include <linux/usb/quirks.h>
 #include <linux/usb/hcd.h>
 #include "usb.h"
+#include <linux/kstrtox.h>
 
 struct quirk_entry {
 	u16 vid;
diff --git a/drivers/usb/core/sysfs.c b/drivers/usb/core/sysfs.c
index 5d21718afb05..39b5db4131e0 100644
--- a/drivers/usb/core/sysfs.c
+++ b/drivers/usb/core/sysfs.c
@@ -14,6 +14,7 @@
 
 #include <linux/kernel.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/usb.h>
 #include <linux/usb/hcd.h>
diff --git a/drivers/usb/core/urb.c b/drivers/usb/core/urb.c
index 7576920e2d5a..cd03a388c9c6 100644
--- a/drivers/usb/core/urb.c
+++ b/drivers/usb/core/urb.c
@@ -6,6 +6,7 @@
 #include <linux/module.h>
 #include <linux/string.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/slab.h>
 #include <linux/log2.h>
 #include <linux/kmsan.h>
diff --git a/drivers/usb/core/usb.c b/drivers/usb/core/usb.c
index dc8d9228a5e7..30d5ee0aebb9 100644
--- a/drivers/usb/core/usb.c
+++ b/drivers/usb/core/usb.c
@@ -26,6 +26,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/bitops.h>
 #include <linux/slab.h>
diff --git a/drivers/usb/dwc2/debugfs.c b/drivers/usb/dwc2/debugfs.c
index 1d72ece9cfe4..5a0771207f35 100644
--- a/drivers/usb/dwc2/debugfs.c
+++ b/drivers/usb/dwc2/debugfs.c
@@ -9,6 +9,7 @@
 #include <linux/spinlock.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "core.h"
diff --git a/drivers/usb/dwc2/gadget.c b/drivers/usb/dwc2/gadget.c
index b517a7216de2..8284986b8c76 100644
--- a/drivers/usb/dwc2/gadget.c
+++ b/drivers/usb/dwc2/gadget.c
@@ -22,6 +22,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
diff --git a/drivers/usb/dwc2/hcd_queue.c b/drivers/usb/dwc2/hcd_queue.c
index 0d4495c6b9f7..2bd95e43981f 100644
--- a/drivers/usb/dwc2/hcd_queue.c
+++ b/drivers/usb/dwc2/hcd_queue.c
@@ -17,7 +17,9 @@
 #include <linux/dma-mapping.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
+#include <linux/hrtimer.h>
 
 #include <linux/usb/hcd.h>
 #include <linux/usb/ch11.h>
diff --git a/drivers/usb/dwc3/core.c b/drivers/usb/dwc3/core.c
index 3b68e8e45b8b..3bab40884f04 100644
--- a/drivers/usb/dwc3/core.c
+++ b/drivers/usb/dwc3/core.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/version.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/drivers/usb/dwc3/debug.h b/drivers/usb/dwc3/debug.h
index 09d703852a92..0bf2eeb235b9 100644
--- a/drivers/usb/dwc3/debug.h
+++ b/drivers/usb/dwc3/debug.h
@@ -12,6 +12,7 @@
 #define __DWC3_DEBUG_H
 
 #include "core.h"
+#include <linux/sprintf.h>
 
 /**
  * dwc3_gadget_ep_cmd_string - returns endpoint command string
diff --git a/drivers/usb/dwc3/debugfs.c b/drivers/usb/dwc3/debugfs.c
index ebf03468fac4..09808836cb33 100644
--- a/drivers/usb/dwc3/debugfs.c
+++ b/drivers/usb/dwc3/debugfs.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/ptrace.h>
 #include <linux/types.h>
diff --git a/drivers/usb/dwc3/dwc3-qcom.c b/drivers/usb/dwc3/dwc3-qcom.c
index dbd6a5b2b289..ef882b2af078 100644
--- a/drivers/usb/dwc3/dwc3-qcom.c
+++ b/drivers/usb/dwc3/dwc3-qcom.c
@@ -17,6 +17,7 @@
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
 #include <linux/phy/phy.h>
+#include <linux/sprintf.h>
 #include <linux/usb/of.h>
 #include <linux/reset.h>
 #include <linux/iopoll.h>
diff --git a/drivers/usb/dwc3/ep0.c b/drivers/usb/dwc3/ep0.c
index 6ae8a36f21cf..6d09e8e94257 100644
--- a/drivers/usb/dwc3/ep0.c
+++ b/drivers/usb/dwc3/ep0.c
@@ -17,6 +17,7 @@
 #include <linux/io.h>
 #include <linux/list.h>
 #include <linux/dma-mapping.h>
+#include <linux/completion.h>
 
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
diff --git a/drivers/usb/dwc3/gadget.c b/drivers/usb/dwc3/gadget.c
index 4c8dd6724678..047d7ca9ec53 100644
--- a/drivers/usb/dwc3/gadget.c
+++ b/drivers/usb/dwc3/gadget.c
@@ -18,6 +18,8 @@
 #include <linux/io.h>
 #include <linux/list.h>
 #include <linux/dma-mapping.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
diff --git a/drivers/usb/early/ehci-dbgp.c b/drivers/usb/early/ehci-dbgp.c
index 45b42d8f6453..b96b6be45771 100644
--- a/drivers/usb/early/ehci-dbgp.c
+++ b/drivers/usb/early/ehci-dbgp.c
@@ -16,6 +16,7 @@
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/iopoll.h>
+#include <linux/kstrtox.h>
 #include <linux/pci_regs.h>
 #include <linux/pci_ids.h>
 #include <linux/usb/ch9.h>
diff --git a/drivers/usb/early/xhci-dbc.c b/drivers/usb/early/xhci-dbc.c
index 341408410ed9..5d432bd80c09 100644
--- a/drivers/usb/early/xhci-dbc.c
+++ b/drivers/usb/early/xhci-dbc.c
@@ -10,6 +10,8 @@
 #define pr_fmt(fmt)	KBUILD_MODNAME ":%s: " fmt, __func__
 
 #include <linux/console.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/kstrtox.h>
 #include <linux/pci_regs.h>
 #include <linux/pci_ids.h>
 #include <linux/memblock.h>
diff --git a/drivers/usb/fotg210/fotg210-hcd.c b/drivers/usb/fotg210/fotg210-hcd.c
index 8c5aaf860635..b3a0237da1dd 100644
--- a/drivers/usb/fotg210/fotg210-hcd.c
+++ b/drivers/usb/fotg210/fotg210-hcd.c
@@ -16,7 +16,9 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>
 #include <linux/ioport.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/errno.h>
 #include <linux/init.h>
@@ -33,6 +35,7 @@
 #include <linux/platform_device.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/completion.h>
 
 #include <asm/byteorder.h>
 #include <asm/irq.h>
diff --git a/drivers/usb/gadget/composite.c b/drivers/usb/gadget/composite.c
index 0ace45b66a31..ec57b8e7bbb2 100644
--- a/drivers/usb/gadget/composite.c
+++ b/drivers/usb/gadget/composite.c
@@ -12,8 +12,10 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/uuid.h>
 
 #include <linux/usb/composite.h>
diff --git a/drivers/usb/gadget/configfs.c b/drivers/usb/gadget/configfs.c
index ce3cfa1f36f5..e925a70ba4dc 100644
--- a/drivers/usb/gadget/configfs.c
+++ b/drivers/usb/gadget/configfs.c
@@ -1,10 +1,12 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/configfs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/device.h>
 #include <linux/kstrtox.h>
 #include <linux/nls.h>
+#include <linux/sprintf.h>
 #include <linux/usb/composite.h>
 #include <linux/usb/gadget_configfs.h>
 #include <linux/usb/webusb.h>
diff --git a/drivers/usb/gadget/epautoconf.c b/drivers/usb/gadget/epautoconf.c
index ed5a92c474e5..7800cf2ec5f8 100644
--- a/drivers/usb/gadget/epautoconf.c
+++ b/drivers/usb/gadget/epautoconf.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/types.h>
 #include <linux/device.h>
diff --git a/drivers/usb/gadget/function/f_acm.c b/drivers/usb/gadget/function/f_acm.c
index f616059c5e1e..a0fdded58939 100644
--- a/drivers/usb/gadget/function/f_acm.c
+++ b/drivers/usb/gadget/function/f_acm.c
@@ -16,6 +16,8 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "u_serial.h"
 
diff --git a/drivers/usb/gadget/function/f_fs.c b/drivers/usb/gadget/function/f_fs.c
index be3851cffb73..fdfb00d4c6b5 100644
--- a/drivers/usb/gadget/function/f_fs.c
+++ b/drivers/usb/gadget/function/f_fs.c
@@ -15,6 +15,7 @@
 /* #define VERBOSE_DEBUG */
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/pagemap.h>
 #include <linux/export.h>
 #include <linux/fs_parser.h>
@@ -23,6 +24,7 @@
 #include <linux/module.h>
 #include <linux/scatterlist.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/uio.h>
 #include <linux/vmalloc.h>
 #include <asm/unaligned.h>
diff --git a/drivers/usb/gadget/function/f_hid.c b/drivers/usb/gadget/function/f_hid.c
index 3c8a9dd585c0..d1490ee91402 100644
--- a/drivers/usb/gadget/function/f_hid.c
+++ b/drivers/usb/gadget/function/f_hid.c
@@ -12,6 +12,7 @@
 #include <linux/cdev.h>
 #include <linux/mutex.h>
 #include <linux/poll.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/wait.h>
 #include <linux/sched.h>
diff --git a/drivers/usb/gadget/function/f_loopback.c b/drivers/usb/gadget/function/f_loopback.c
index 17ac6ace0cff..328fa6e58622 100644
--- a/drivers/usb/gadget/function/f_loopback.c
+++ b/drivers/usb/gadget/function/f_loopback.c
@@ -11,8 +11,10 @@
 #include <linux/slab.h>
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/usb/composite.h>
 
 #include "g_zero.h"
diff --git a/drivers/usb/gadget/function/f_mass_storage.c b/drivers/usb/gadget/function/f_mass_storage.c
index c265a1f62fc1..ba018aa796f6 100644
--- a/drivers/usb/gadget/function/f_mass_storage.c
+++ b/drivers/usb/gadget/function/f_mass_storage.c
@@ -184,6 +184,7 @@
 #include <linux/rwsem.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/freezer.h>
 #include <linux/module.h>
diff --git a/drivers/usb/gadget/function/f_midi.c b/drivers/usb/gadget/function/f_midi.c
index 20c6fbd94f32..b44c5b8892e8 100644
--- a/drivers/usb/gadget/function/f_midi.c
+++ b/drivers/usb/gadget/function/f_midi.c
@@ -19,11 +19,13 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/device.h>
 #include <linux/kfifo.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/drivers/usb/gadget/function/f_midi2.c b/drivers/usb/gadget/function/f_midi2.c
index ec8cd7c7bbfc..94a812c6c006 100644
--- a/drivers/usb/gadget/function/f_midi2.c
+++ b/drivers/usb/gadget/function/f_midi2.c
@@ -5,8 +5,10 @@
 
 #include <linux/device.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/drivers/usb/gadget/function/f_ncm.c b/drivers/usb/gadget/function/f_ncm.c
index ca5d5f564998..ad82e98a642a 100644
--- a/drivers/usb/gadget/function/f_ncm.c
+++ b/drivers/usb/gadget/function/f_ncm.c
@@ -13,10 +13,12 @@
 
 #include <linux/kernel.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/etherdevice.h>
 #include <linux/crc32.h>
+#include <linux/hrtimer.h>
 
 #include <linux/usb/cdc.h>
 
diff --git a/drivers/usb/gadget/function/f_obex.c b/drivers/usb/gadget/function/f_obex.c
index dcb093210305..1f74ee25f91d 100644
--- a/drivers/usb/gadget/function/f_obex.c
+++ b/drivers/usb/gadget/function/f_obex.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/device.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "u_serial.h"
 
diff --git a/drivers/usb/gadget/function/f_printer.c b/drivers/usb/gadget/function/f_printer.c
index 076dd4c1be96..9708db0ccb94 100644
--- a/drivers/usb/gadget/function/f_printer.c
+++ b/drivers/usb/gadget/function/f_printer.c
@@ -15,12 +15,14 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>
 #include <linux/ioport.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/mutex.h>
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/idr.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
diff --git a/drivers/usb/gadget/function/f_serial.c b/drivers/usb/gadget/function/f_serial.c
index 65c50092aea2..e5d1cd6eb3bc 100644
--- a/drivers/usb/gadget/function/f_serial.c
+++ b/drivers/usb/gadget/function/f_serial.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 
 #include "u_serial.h"
 
diff --git a/drivers/usb/gadget/function/f_sourcesink.c b/drivers/usb/gadget/function/f_sourcesink.c
index 2edbd9b510d6..c8ad3dd5a89a 100644
--- a/drivers/usb/gadget/function/f_sourcesink.c
+++ b/drivers/usb/gadget/function/f_sourcesink.c
@@ -11,7 +11,9 @@
 #include <linux/slab.h>
 #include <linux/kernel.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb/composite.h>
 #include <linux/err.h>
 
diff --git a/drivers/usb/gadget/function/f_tcm.c b/drivers/usb/gadget/function/f_tcm.c
index 37befd6db001..9527df17476a 100644
--- a/drivers/usb/gadget/function/f_tcm.c
+++ b/drivers/usb/gadget/function/f_tcm.c
@@ -7,7 +7,9 @@
  * Author: Sebastian Andrzej Siewior <bigeasy at linutronix dot de>
  */
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/configfs.h>
@@ -20,6 +22,7 @@
 #include <target/target_core_base.h>
 #include <target/target_core_fabric.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "tcm.h"
 #include "u_tcm.h"
diff --git a/drivers/usb/gadget/function/f_uac1.c b/drivers/usb/gadget/function/f_uac1.c
index 7de74a3dd392..e80c89a0e6c5 100644
--- a/drivers/usb/gadget/function/f_uac1.c
+++ b/drivers/usb/gadget/function/f_uac1.c
@@ -16,6 +16,8 @@
 
 #include <linux/usb/audio.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "u_audio.h"
 #include "u_uac1.h"
diff --git a/drivers/usb/gadget/function/f_uac1_legacy.c b/drivers/usb/gadget/function/f_uac1_legacy.c
index e2d7f69128a0..bd0c4dcfa7df 100644
--- a/drivers/usb/gadget/function/f_uac1_legacy.c
+++ b/drivers/usb/gadget/function/f_uac1_legacy.c
@@ -8,9 +8,11 @@
 
 #include <linux/slab.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 
 #include "u_uac1_legacy.h"
 
diff --git a/drivers/usb/gadget/function/f_uac2.c b/drivers/usb/gadget/function/f_uac2.c
index 383f6854cfec..1fc1b7c1d79f 100644
--- a/drivers/usb/gadget/function/f_uac2.c
+++ b/drivers/usb/gadget/function/f_uac2.c
@@ -13,6 +13,8 @@
 #include <linux/usb/audio.h>
 #include <linux/usb/audio-v2.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "u_audio.h"
 
diff --git a/drivers/usb/gadget/function/f_uvc.c b/drivers/usb/gadget/function/f_uvc.c
index 929666805bd2..cc7c4b953e05 100644
--- a/drivers/usb/gadget/function/f_uvc.c
+++ b/drivers/usb/gadget/function/f_uvc.c
@@ -13,6 +13,7 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
diff --git a/drivers/usb/gadget/function/rndis.c b/drivers/usb/gadget/function/rndis.c
index 29bf8664bf58..e0dc5bcf18f0 100644
--- a/drivers/usb/gadget/function/rndis.c
+++ b/drivers/usb/gadget/function/rndis.c
@@ -28,6 +28,7 @@
 #include <linux/slab.h>
 #include <linux/seq_file.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 
 #include <asm/io.h>
 #include <asm/byteorder.h>
diff --git a/drivers/usb/gadget/function/storage_common.c b/drivers/usb/gadget/function/storage_common.c
index 2a4163b0f6fe..4a7437c0d95c 100644
--- a/drivers/usb/gadget/function/storage_common.c
+++ b/drivers/usb/gadget/function/storage_common.c
@@ -24,6 +24,7 @@
 #include <linux/file.h>
 #include <linux/fs.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/usb/composite.h>
 
 #include "storage_common.h"
diff --git a/drivers/usb/gadget/function/u_audio.c b/drivers/usb/gadget/function/u_audio.c
index 4a42574b4a7f..2d584a9b970f 100644
--- a/drivers/usb/gadget/function/u_audio.c
+++ b/drivers/usb/gadget/function/u_audio.c
@@ -14,6 +14,7 @@
 
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/drivers/usb/gadget/function/u_ether.c b/drivers/usb/gadget/function/u_ether.c
index 3c5a6f6ac341..4005334aca2d 100644
--- a/drivers/usb/gadget/function/u_ether.c
+++ b/drivers/usb/gadget/function/u_ether.c
@@ -17,6 +17,7 @@
 #include <linux/etherdevice.h>
 #include <linux/ethtool.h>
 #include <linux/if_vlan.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/usb/composite.h>
 
diff --git a/drivers/usb/gadget/function/u_serial.c b/drivers/usb/gadget/function/u_serial.c
index a92eb6d90976..d86cdf3f2518 100644
--- a/drivers/usb/gadget/function/u_serial.c
+++ b/drivers/usb/gadget/function/u_serial.c
@@ -15,9 +15,11 @@
 /* #define VERBOSE_DEBUG */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/device.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_flip.h>
 #include <linux/slab.h>
diff --git a/drivers/usb/gadget/function/uvc_configfs.c b/drivers/usb/gadget/function/uvc_configfs.c
index 7e704b2bcfd1..b070c49a4c60 100644
--- a/drivers/usb/gadget/function/uvc_configfs.c
+++ b/drivers/usb/gadget/function/uvc_configfs.c
@@ -11,6 +11,9 @@
  */
 
 #include "uvc_configfs.h"
+#include <linux/hex.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/sort.h>
 #include <linux/usb/video.h>
diff --git a/drivers/usb/gadget/legacy/inode.c b/drivers/usb/gadget/legacy/inode.c
index 03179b1880fd..55c58f711a87 100644
--- a/drivers/usb/gadget/legacy/inode.c
+++ b/drivers/usb/gadget/legacy/inode.c
@@ -17,6 +17,7 @@
 #include <linux/uts.h>
 #include <linux/wait.h>
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/uaccess.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
diff --git a/drivers/usb/gadget/legacy/raw_gadget.c b/drivers/usb/gadget/legacy/raw_gadget.c
index 399fca32a8ac..9ffe7b27a3e0 100644
--- a/drivers/usb/gadget/legacy/raw_gadget.c
+++ b/drivers/usb/gadget/legacy/raw_gadget.c
@@ -8,16 +8,19 @@
  */
 
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/ctype.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/idr.h>
 #include <linux/kref.h>
+#include <linux/kstrtox.h>
 #include <linux/miscdevice.h>
 #include <linux/module.h>
 #include <linux/semaphore.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/wait.h>
 
diff --git a/drivers/usb/gadget/udc/aspeed-vhub/epn.c b/drivers/usb/gadget/udc/aspeed-vhub/epn.c
index 148d7ec3ebf4..58d773934c4b 100644
--- a/drivers/usb/gadget/udc/aspeed-vhub/epn.c
+++ b/drivers/usb/gadget/udc/aspeed-vhub/epn.c
@@ -19,6 +19,7 @@
 #include <linux/proc_fs.h>
 #include <linux/prefetch.h>
 #include <linux/clk.h>
+#include <linux/sprintf.h>
 #include <linux/usb/gadget.h>
 #include <linux/of.h>
 #include <linux/regmap.h>
diff --git a/drivers/usb/gadget/udc/atmel_usba_udc.c b/drivers/usb/gadget/udc/atmel_usba_udc.c
index b76885d78e8a..f8000d416e9f 100644
--- a/drivers/usb/gadget/udc/atmel_usba_udc.c
+++ b/drivers/usb/gadget/udc/atmel_usba_udc.c
@@ -18,6 +18,7 @@
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
diff --git a/drivers/usb/gadget/udc/bcm63xx_udc.c b/drivers/usb/gadget/udc/bcm63xx_udc.c
index da7011d906e0..831266e0c815 100644
--- a/drivers/usb/gadget/udc/bcm63xx_udc.c
+++ b/drivers/usb/gadget/udc/bcm63xx_udc.c
@@ -10,6 +10,7 @@
 #include <linux/bug.h>
 #include <linux/clk.h>
 #include <linux/compiler.h>
+#include <linux/completion.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 #include <linux/device.h>
diff --git a/drivers/usb/gadget/udc/bdc/bdc_cmd.c b/drivers/usb/gadget/udc/bdc/bdc_cmd.c
index 1848ced073f8..80ba57cfef14 100644
--- a/drivers/usb/gadget/udc/bdc/bdc_cmd.c
+++ b/drivers/usb/gadget/udc/bdc/bdc_cmd.c
@@ -8,6 +8,7 @@
  */
 #include <linux/scatterlist.h>
 #include <linux/slab.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "bdc.h"
 #include "bdc_cmd.h"
diff --git a/drivers/usb/gadget/udc/bdc/bdc_ep.c b/drivers/usb/gadget/udc/bdc/bdc_ep.c
index fa88f210ecd5..368f66d63094 100644
--- a/drivers/usb/gadget/udc/bdc/bdc_ep.c
+++ b/drivers/usb/gadget/udc/bdc/bdc_ep.c
@@ -19,6 +19,7 @@
 #include <linux/slab.h>
 #include <linux/errno.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
diff --git a/drivers/usb/gadget/udc/cdns2/cdns2-debug.h b/drivers/usb/gadget/udc/cdns2/cdns2-debug.h
index f5f330004190..29568e5c3c4e 100644
--- a/drivers/usb/gadget/udc/cdns2/cdns2-debug.h
+++ b/drivers/usb/gadget/udc/cdns2/cdns2-debug.h
@@ -11,6 +11,8 @@
 #ifndef __LINUX_CDNS2_DEBUG
 #define __LINUX_CDNS2_DEBUG
 
+#include <linux/sprintf.h>
+
 static inline const char *cdns2_decode_usb_irq(char *str, size_t size,
 					       u8 usb_irq, u8 ext_irq)
 {
diff --git a/drivers/usb/gadget/udc/cdns2/cdns2-ep0.c b/drivers/usb/gadget/udc/cdns2/cdns2-ep0.c
index fa12a5d46f2e..583722420a46 100644
--- a/drivers/usb/gadget/udc/cdns2/cdns2-ep0.c
+++ b/drivers/usb/gadget/udc/cdns2/cdns2-ep0.c
@@ -9,6 +9,7 @@
 
 #include <linux/usb/composite.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "cdns2-gadget.h"
 #include "cdns2-trace.h"
diff --git a/drivers/usb/gadget/udc/cdns2/cdns2-gadget.c b/drivers/usb/gadget/udc/cdns2/cdns2-gadget.c
index 0eed0e03842c..a3ad192a262d 100644
--- a/drivers/usb/gadget/udc/cdns2/cdns2-gadget.c
+++ b/drivers/usb/gadget/udc/cdns2/cdns2-gadget.c
@@ -26,11 +26,13 @@
  */
 
 #include <linux/dma-mapping.h>
+#include <linux/kstrtox.h>
 #include <linux/pm_runtime.h>
 #include <linux/interrupt.h>
 #include <linux/property.h>
 #include <linux/dmapool.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #include "cdns2-gadget.h"
 #include "cdns2-trace.h"
diff --git a/drivers/usb/gadget/udc/core.c b/drivers/usb/gadget/udc/core.c
index d59f94464b87..b7c391891c44 100644
--- a/drivers/usb/gadget/udc/core.c
+++ b/drivers/usb/gadget/udc/core.c
@@ -16,7 +16,9 @@
 #include <linux/err.h>
 #include <linux/dma-mapping.h>
 #include <linux/sched/task_stack.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
+#include <linux/completion.h>
 
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
diff --git a/drivers/usb/gadget/udc/dummy_hcd.c b/drivers/usb/gadget/udc/dummy_hcd.c
index 0953e1b5c030..29d232434353 100644
--- a/drivers/usb/gadget/udc/dummy_hcd.c
+++ b/drivers/usb/gadget/udc/dummy_hcd.c
@@ -30,6 +30,7 @@
 #include <linux/slab.h>
 #include <linux/errno.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
diff --git a/drivers/usb/gadget/udc/fsl_qe_udc.c b/drivers/usb/gadget/udc/fsl_qe_udc.c
index 4e88681a79b6..ec673c919fe0 100644
--- a/drivers/usb/gadget/udc/fsl_qe_udc.c
+++ b/drivers/usb/gadget/udc/fsl_qe_udc.c
@@ -40,6 +40,7 @@
 #include <asm/dma.h>
 #include <asm/reg.h>
 #include "fsl_qe_udc.h"
+#include <linux/completion.h>
 
 #define DRIVER_DESC     "Freescale QE/CPM USB Device Controller driver"
 #define DRIVER_AUTHOR   "Xie XiaoBo"
diff --git a/drivers/usb/gadget/udc/fsl_udc_core.c b/drivers/usb/gadget/udc/fsl_udc_core.c
index e8042c158f6d..aab539951b09 100644
--- a/drivers/usb/gadget/udc/fsl_udc_core.c
+++ b/drivers/usb/gadget/udc/fsl_udc_core.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/err.h>
@@ -36,6 +37,7 @@
 #include <linux/platform_device.h>
 #include <linux/fsl_devices.h>
 #include <linux/dmapool.h>
+#include <linux/completion.h>
 
 #include <asm/byteorder.h>
 #include <asm/io.h>
diff --git a/drivers/usb/gadget/udc/fsl_usb2_udc.h b/drivers/usb/gadget/udc/fsl_usb2_udc.h
index 2efc5a930b48..475e87931682 100644
--- a/drivers/usb/gadget/udc/fsl_usb2_udc.h
+++ b/drivers/usb/gadget/udc/fsl_usb2_udc.h
@@ -10,6 +10,7 @@
 
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
+#include <linux/sprintf.h>
 
 /* ### define USB registers here
  */
diff --git a/drivers/usb/gadget/udc/m66592-udc.c b/drivers/usb/gadget/udc/m66592-udc.c
index bfaa5291e6c8..5e79a3320871 100644
--- a/drivers/usb/gadget/udc/m66592-udc.c
+++ b/drivers/usb/gadget/udc/m66592-udc.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
 
diff --git a/drivers/usb/gadget/udc/max3420_udc.c b/drivers/usb/gadget/udc/max3420_udc.c
index 7349ea774adf..9f7097e7acbd 100644
--- a/drivers/usb/gadget/udc/max3420_udc.c
+++ b/drivers/usb/gadget/udc/max3420_udc.c
@@ -19,13 +19,16 @@
 #include <linux/io.h>
 #include <linux/module.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 #include <linux/of.h>
 #include <linux/of_irq.h>
 #include <linux/prefetch.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
 #include <linux/spi/spi.h>
 #include <linux/gpio/consumer.h>
+#include <linux/hrtimer.h>
 
 #define MAX3420_MAX_EPS		4
 #define MAX3420_EP_MAX_PACKET		64  /* Same for all Endpoints */
diff --git a/drivers/usb/gadget/udc/mv_u3d_core.c b/drivers/usb/gadget/udc/mv_u3d_core.c
index 2a421f0ff931..120a30a52462 100644
--- a/drivers/usb/gadget/udc/mv_u3d_core.c
+++ b/drivers/usb/gadget/udc/mv_u3d_core.c
@@ -12,6 +12,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/notifier.h>
diff --git a/drivers/usb/gadget/udc/mv_udc_core.c b/drivers/usb/gadget/udc/mv_udc_core.c
index 78308b64955d..f78ffb9e128b 100644
--- a/drivers/usb/gadget/udc/mv_udc_core.c
+++ b/drivers/usb/gadget/udc/mv_udc_core.c
@@ -16,6 +16,7 @@
 #include <linux/slab.h>
 #include <linux/errno.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
@@ -29,6 +30,7 @@
 #include <linux/irq.h>
 #include <linux/platform_device.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/platform_data/mv_usb.h>
 #include <asm/unaligned.h>
 
diff --git a/drivers/usb/gadget/udc/net2272.c b/drivers/usb/gadget/udc/net2272.c
index 12e76bb62c20..f8e2c104082a 100644
--- a/drivers/usb/gadget/udc/net2272.c
+++ b/drivers/usb/gadget/udc/net2272.c
@@ -22,6 +22,7 @@
 #include <linux/prefetch.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/usb.h>
 #include <linux/usb/ch9.h>
diff --git a/drivers/usb/gadget/udc/net2280.c b/drivers/usb/gadget/udc/net2280.c
index 1b929c519cd7..2a03a6749574 100644
--- a/drivers/usb/gadget/udc/net2280.c
+++ b/drivers/usb/gadget/udc/net2280.c
@@ -43,6 +43,7 @@
 #include <linux/slab.h>
 #include <linux/errno.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
diff --git a/drivers/usb/gadget/udc/omap_udc.c b/drivers/usb/gadget/udc/omap_udc.c
index 10c5d7f726a1..007700160271 100644
--- a/drivers/usb/gadget/udc/omap_udc.c
+++ b/drivers/usb/gadget/udc/omap_udc.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/ioport.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/delay.h>
@@ -30,6 +31,7 @@
 #include <linux/usb/otg.h>
 #include <linux/dma-mapping.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/prefetch.h>
 #include <linux/io.h>
diff --git a/drivers/usb/gadget/udc/pxa27x_udc.h b/drivers/usb/gadget/udc/pxa27x_udc.h
index 31bf79ce931c..4396b3a4cf91 100644
--- a/drivers/usb/gadget/udc/pxa27x_udc.h
+++ b/drivers/usb/gadget/udc/pxa27x_udc.h
@@ -14,6 +14,7 @@
 #include <linux/spinlock.h>
 #include <linux/io.h>
 #include <linux/usb/otg.h>
+#include <linux/completion.h>
 
 /*
  * Register definitions
diff --git a/drivers/usb/gadget/udc/r8a66597-udc.c b/drivers/usb/gadget/udc/r8a66597-udc.c
index db4a10a979f9..a320276be0f5 100644
--- a/drivers/usb/gadget/udc/r8a66597-udc.c
+++ b/drivers/usb/gadget/udc/r8a66597-udc.c
@@ -16,6 +16,7 @@
 #include <linux/err.h>
 #include <linux/slab.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
diff --git a/drivers/usb/gadget/udc/renesas_usb3.c b/drivers/usb/gadget/udc/renesas_usb3.c
index 3b01734ce1b7..227a87b36353 100644
--- a/drivers/usb/gadget/udc/renesas_usb3.c
+++ b/drivers/usb/gadget/udc/renesas_usb3.c
@@ -21,6 +21,7 @@
 #include <linux/reset.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/uaccess.h>
 #include <linux/usb/ch9.h>
diff --git a/drivers/usb/gadget/udc/snps_udc_core.c b/drivers/usb/gadget/udc/snps_udc_core.c
index 2fc5d4d277bc..5c83109861e9 100644
--- a/drivers/usb/gadget/udc/snps_udc_core.c
+++ b/drivers/usb/gadget/udc/snps_udc_core.c
@@ -24,6 +24,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
@@ -35,6 +36,7 @@
 #include <asm/byteorder.h>
 #include <asm/unaligned.h>
 #include "amd5536udc.h"
+#include <linux/completion.h>
 
 static void udc_setup_endpoints(struct udc *dev);
 static void udc_soft_reset(struct udc *dev);
diff --git a/drivers/usb/gadget/udc/tegra-xudc.c b/drivers/usb/gadget/udc/tegra-xudc.c
index cb85168fd00c..0294a0288812 100644
--- a/drivers/usb/gadget/udc/tegra-xudc.c
+++ b/drivers/usb/gadget/udc/tegra-xudc.c
@@ -23,6 +23,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/regulator/consumer.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
 #include <linux/usb/otg.h>
diff --git a/drivers/usb/gadget/udc/udc-xilinx.c b/drivers/usb/gadget/udc/udc-xilinx.c
index 74590f93ea61..6e2c95bfdaf5 100644
--- a/drivers/usb/gadget/udc/udc-xilinx.c
+++ b/drivers/usb/gadget/udc/udc-xilinx.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
@@ -21,6 +22,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/prefetch.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
 
diff --git a/drivers/usb/host/fhci-sched.c b/drivers/usb/host/fhci-sched.c
index a45ede80edfc..f4d5979e3781 100644
--- a/drivers/usb/host/fhci-sched.c
+++ b/drivers/usb/host/fhci-sched.c
@@ -24,6 +24,7 @@
 #include <soc/fsl/qe/qe.h>
 #include <asm/fsl_gtm.h>
 #include "fhci.h"
+#include <linux/completion.h>
 
 static void recycle_frame(struct fhci_usb *usb, struct packet *pkt)
 {
diff --git a/drivers/usb/host/isp1362-hcd.c b/drivers/usb/host/isp1362-hcd.c
index a52c3d858f3e..04dbad08eabe 100644
--- a/drivers/usb/host/isp1362-hcd.c
+++ b/drivers/usb/host/isp1362-hcd.c
@@ -70,6 +70,7 @@
 #include <linux/errno.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/isp1362.h>
 #include <linux/usb/hcd.h>
diff --git a/drivers/usb/host/max3421-hcd.c b/drivers/usb/host/max3421-hcd.c
index 9fe4f48b1898..352a6919aee9 100644
--- a/drivers/usb/host/max3421-hcd.c
+++ b/drivers/usb/host/max3421-hcd.c
@@ -59,6 +59,7 @@
 #include <linux/jiffies.h>
 #include <linux/module.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/hcd.h>
 #include <linux/of.h>
diff --git a/drivers/usb/host/ohci-pxa27x.c b/drivers/usb/host/ohci-pxa27x.c
index 357d9aee38a3..a61f5827ee45 100644
--- a/drivers/usb/host/ohci-pxa27x.c
+++ b/drivers/usb/host/ohci-pxa27x.c
@@ -33,6 +33,7 @@
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
 #include <linux/signal.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/hcd.h>
 #include <linux/usb/otg.h>
diff --git a/drivers/usb/host/ohci-q.c b/drivers/usb/host/ohci-q.c
index 3b445312beea..21f7a90f0157 100644
--- a/drivers/usb/host/ohci-q.c
+++ b/drivers/usb/host/ohci-q.c
@@ -10,6 +10,7 @@
 
 #include <linux/irq.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 static void urb_free_priv (struct ohci_hcd *hc, urb_priv_t *urb_priv)
 {
diff --git a/drivers/usb/host/oxu210hp-hcd.c b/drivers/usb/host/oxu210hp-hcd.c
index d467472f9d3c..9a38ed733e59 100644
--- a/drivers/usb/host/oxu210hp-hcd.c
+++ b/drivers/usb/host/oxu210hp-hcd.c
@@ -16,6 +16,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
@@ -25,6 +26,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/completion.h>
 
 #include <asm/irq.h>
 #include <asm/unaligned.h>
diff --git a/drivers/usb/host/r8a66597-hcd.c b/drivers/usb/host/r8a66597-hcd.c
index 9f4bf8c5f8a5..9555c0c07604 100644
--- a/drivers/usb/host/r8a66597-hcd.c
+++ b/drivers/usb/host/r8a66597-hcd.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/sched.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/delay.h>
 #include <linux/list.h>
diff --git a/drivers/usb/host/uhci-debug.c b/drivers/usb/host/uhci-debug.c
index c4e67c4b51f6..3deb536b0f16 100644
--- a/drivers/usb/host/uhci-debug.c
+++ b/drivers/usb/host/uhci-debug.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/debugfs.h>
 #include <asm/io.h>
+#include <linux/sprintf.h>
 
 #include "uhci-hcd.h"
 
diff --git a/drivers/usb/host/xen-hcd.c b/drivers/usb/host/xen-hcd.c
index 46fdab940092..1f82ed85c6ae 100644
--- a/drivers/usb/host/xen-hcd.c
+++ b/drivers/usb/host/xen-hcd.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/list.h>
 #include <linux/usb/hcd.h>
diff --git a/drivers/usb/host/xhci-dbgcap.c b/drivers/usb/host/xhci-dbgcap.c
index d82935d31126..9042e53e75f8 100644
--- a/drivers/usb/host/xhci-dbgcap.c
+++ b/drivers/usb/host/xhci-dbgcap.c
@@ -7,9 +7,11 @@
  * Author: Lu Baolu <baolu.lu@linux.intel.com>
  */
 #include <linux/bug.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
 #include <linux/errno.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/nls.h>
diff --git a/drivers/usb/host/xhci-debugfs.c b/drivers/usb/host/xhci-debugfs.c
index f8ba15e7c225..45c42f4b13f3 100644
--- a/drivers/usb/host/xhci-debugfs.c
+++ b/drivers/usb/host/xhci-debugfs.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "xhci.h"
diff --git a/drivers/usb/host/xhci-hub.c b/drivers/usb/host/xhci-hub.c
index 0980ade2a234..b849d07e0ee9 100644
--- a/drivers/usb/host/xhci-hub.c
+++ b/drivers/usb/host/xhci-hub.c
@@ -12,6 +12,7 @@
 #include <linux/slab.h>
 #include <asm/unaligned.h>
 #include <linux/bitfield.h>
+#include <linux/completion.h>
 
 #include "xhci.h"
 #include "xhci-trace.h"
diff --git a/drivers/usb/host/xhci-mem.c b/drivers/usb/host/xhci-mem.c
index a7716202a8dd..7a418e2bf1cd 100644
--- a/drivers/usb/host/xhci-mem.c
+++ b/drivers/usb/host/xhci-mem.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/dmapool.h>
 #include <linux/dma-mapping.h>
+#include <linux/completion.h>
 
 #include "xhci.h"
 #include "xhci-trace.h"
diff --git a/drivers/usb/host/xhci-mtk-sch.c b/drivers/usb/host/xhci-mtk-sch.c
index 61f3f8bbdcea..33adf900aa4a 100644
--- a/drivers/usb/host/xhci-mtk-sch.c
+++ b/drivers/usb/host/xhci-mtk-sch.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "xhci.h"
 #include "xhci-mtk.h"
diff --git a/drivers/usb/host/xhci-pci.c b/drivers/usb/host/xhci-pci.c
index b534ca9752be..73f95db1e4ed 100644
--- a/drivers/usb/host/xhci-pci.c
+++ b/drivers/usb/host/xhci-pci.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/acpi.h>
 #include <linux/reset.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 
 #include "xhci.h"
diff --git a/drivers/usb/host/xhci-ring.c b/drivers/usb/host/xhci-ring.c
index f0d8a607ff21..e3d964a8057e 100644
--- a/drivers/usb/host/xhci-ring.c
+++ b/drivers/usb/host/xhci-ring.c
@@ -57,6 +57,8 @@
 #include <linux/dma-mapping.h>
 #include "xhci.h"
 #include "xhci-trace.h"
+#include <linux/completion.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 static int queue_command(struct xhci_hcd *xhci, struct xhci_command *cmd,
 			 u32 field1, u32 field2,
diff --git a/drivers/usb/host/xhci-tegra.c b/drivers/usb/host/xhci-tegra.c
index 6246d5ad1468..8d5c07ffb4cc 100644
--- a/drivers/usb/host/xhci-tegra.c
+++ b/drivers/usb/host/xhci-tegra.c
@@ -19,6 +19,7 @@
 #include <linux/phy/phy.h>
 #include <linux/phy/tegra/xusb.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/pm.h>
 #include <linux/pm_domain.h>
diff --git a/drivers/usb/host/xhci.c b/drivers/usb/host/xhci.c
index c057c42c36f4..7664a568cc4f 100644
--- a/drivers/usb/host/xhci.c
+++ b/drivers/usb/host/xhci.c
@@ -9,9 +9,11 @@
  */
 
 #include <linux/pci.h>
+#include <linux/completion.h>
 #include <linux/iommu.h>
 #include <linux/iopoll.h>
 #include <linux/irq.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/log2.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/usb/host/xhci.h b/drivers/usb/host/xhci.h
index 32d27134cc48..2b9f3dec4d5e 100644
--- a/drivers/usb/host/xhci.h
+++ b/drivers/usb/host/xhci.h
@@ -15,6 +15,7 @@
 #include <linux/usb.h>
 #include <linux/timer.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/usb/hcd.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
 
diff --git a/drivers/usb/isp1760/isp1760-hcd.c b/drivers/usb/isp1760/isp1760-hcd.c
index 76862ba40f35..6d0935073d48 100644
--- a/drivers/usb/isp1760/isp1760-hcd.c
+++ b/drivers/usb/isp1760/isp1760-hcd.c
@@ -29,6 +29,7 @@
 #include <linux/timer.h>
 #include <asm/unaligned.h>
 #include <asm/cacheflush.h>
+#include <linux/completion.h>
 
 #include "isp1760-core.h"
 #include "isp1760-hcd.h"
diff --git a/drivers/usb/isp1760/isp1760-udc.c b/drivers/usb/isp1760/isp1760-udc.c
index 5cafd23345ca..f208d115d631 100644
--- a/drivers/usb/isp1760/isp1760-udc.c
+++ b/drivers/usb/isp1760/isp1760-udc.c
@@ -16,8 +16,10 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/usb.h>
+#include <linux/completion.h>
 
 #include "isp1760-core.h"
 #include "isp1760-regs.h"
diff --git a/drivers/usb/misc/appledisplay.c b/drivers/usb/misc/appledisplay.c
index c8098e9b432e..175768a7c066 100644
--- a/drivers/usb/misc/appledisplay.c
+++ b/drivers/usb/misc/appledisplay.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/backlight.h>
 #include <linux/timer.h>
diff --git a/drivers/usb/misc/chaoskey.c b/drivers/usb/misc/chaoskey.c
index 6fb5140e29b9..d4285afe8897 100644
--- a/drivers/usb/misc/chaoskey.c
+++ b/drivers/usb/misc/chaoskey.c
@@ -16,6 +16,7 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/wait.h>
 #include <linux/hw_random.h>
diff --git a/drivers/usb/misc/cypress_cy7c63.c b/drivers/usb/misc/cypress_cy7c63.c
index cecd7693b741..ddf57181a8af 100644
--- a/drivers/usb/misc/cypress_cy7c63.c
+++ b/drivers/usb/misc/cypress_cy7c63.c
@@ -29,6 +29,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #define DRIVER_AUTHOR		"Oliver Bock (bock@tfh-berlin.de)"
diff --git a/drivers/usb/misc/cytherm.c b/drivers/usb/misc/cytherm.c
index 875016dd073c..b928bf91d3bc 100644
--- a/drivers/usb/misc/cytherm.c
+++ b/drivers/usb/misc/cytherm.c
@@ -12,8 +12,10 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #define DRIVER_AUTHOR "Erik Rigtorp"
diff --git a/drivers/usb/misc/iowarrior.c b/drivers/usb/misc/iowarrior.c
index 6d28467ce352..82bc985e7d52 100644
--- a/drivers/usb/misc/iowarrior.c
+++ b/drivers/usb/misc/iowarrior.c
@@ -16,6 +16,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/slab.h>
 #include <linux/sched.h>
diff --git a/drivers/usb/misc/legousbtower.c b/drivers/usb/misc/legousbtower.c
index 379cf01a6e96..60d650fced9f 100644
--- a/drivers/usb/misc/legousbtower.c
+++ b/drivers/usb/misc/legousbtower.c
@@ -79,6 +79,7 @@
 #include <linux/module.h>
 #include <linux/completion.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/usb.h>
 #include <linux/poll.h>
diff --git a/drivers/usb/misc/lvstest.c b/drivers/usb/misc/lvstest.c
index 25ec5666a75e..489e3082b7c4 100644
--- a/drivers/usb/misc/lvstest.c
+++ b/drivers/usb/misc/lvstest.c
@@ -10,6 +10,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
diff --git a/drivers/usb/misc/onboard_usb_hub.c b/drivers/usb/misc/onboard_usb_hub.c
index 0dd2b032c90b..485ad4fdc848 100644
--- a/drivers/usb/misc/onboard_usb_hub.c
+++ b/drivers/usb/misc/onboard_usb_hub.c
@@ -12,6 +12,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
@@ -20,6 +21,7 @@
 #include <linux/platform_device.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/sysfs.h>
 #include <linux/usb.h>
diff --git a/drivers/usb/misc/qcom_eud.c b/drivers/usb/misc/qcom_eud.c
index 26e9b8749d8a..ec1820195fd3 100644
--- a/drivers/usb/misc/qcom_eud.c
+++ b/drivers/usb/misc/qcom_eud.c
@@ -9,6 +9,7 @@
 #include <linux/io.h>
 #include <linux/iopoll.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
diff --git a/drivers/usb/misc/trancevibrator.c b/drivers/usb/misc/trancevibrator.c
index 26baba3ab7d7..58eaba0c1969 100644
--- a/drivers/usb/misc/trancevibrator.c
+++ b/drivers/usb/misc/trancevibrator.c
@@ -8,8 +8,10 @@
 /* Standard include files */
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #define DRIVER_AUTHOR "Sam Hocevar, sam@zoy.org"
diff --git a/drivers/usb/misc/usb-ljca.c b/drivers/usb/misc/usb-ljca.c
index 35770e608c64..1f8ad78b8f07 100644
--- a/drivers/usb/misc/usb-ljca.c
+++ b/drivers/usb/misc/usb-ljca.c
@@ -7,6 +7,7 @@
 
 #include <linux/acpi.h>
 #include <linux/auxiliary_bus.h>
+#include <linux/completion.h>
 #include <linux/dev_printk.h>
 #include <linux/kernel.h>
 #include <linux/mod_devicetable.h>
@@ -14,6 +15,7 @@
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/usb.h>
 #include <linux/usb/ljca.h>
diff --git a/drivers/usb/misc/usblcd.c b/drivers/usb/misc/usblcd.c
index bb546f624a45..8a208018535f 100644
--- a/drivers/usb/misc/usblcd.c
+++ b/drivers/usb/misc/usblcd.c
@@ -19,6 +19,7 @@
 #include <linux/errno.h>
 #include <linux/mutex.h>
 #include <linux/rwsem.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/usb.h>
 
diff --git a/drivers/usb/misc/usbsevseg.c b/drivers/usb/misc/usbsevseg.c
index 546deff754ba..ea50edb5456f 100644
--- a/drivers/usb/misc/usbsevseg.c
+++ b/drivers/usb/misc/usbsevseg.c
@@ -8,8 +8,10 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/usb.h>
 
diff --git a/drivers/usb/misc/usbtest.c b/drivers/usb/misc/usbtest.c
index caf65f8294db..7f3d592ec0b1 100644
--- a/drivers/usb/misc/usbtest.c
+++ b/drivers/usb/misc/usbtest.c
@@ -10,6 +10,7 @@
 #include <linux/mutex.h>
 #include <linux/timer.h>
 #include <linux/usb.h>
+#include <linux/completion.h>
 
 #define SIMPLE_IO_TIMEOUT	10000	/* in milliseconds */
 
diff --git a/drivers/usb/misc/yurex.c b/drivers/usb/misc/yurex.c
index 9a0649d23693..d76f659b05cf 100644
--- a/drivers/usb/misc/yurex.c
+++ b/drivers/usb/misc/yurex.c
@@ -7,10 +7,12 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/kref.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/usb.h>
 #include <linux/hid.h>
diff --git a/drivers/usb/mon/mon_stat.c b/drivers/usb/mon/mon_stat.c
index 3c23805ab1a4..cfe7ba1e90cb 100644
--- a/drivers/usb/mon/mon_stat.c
+++ b/drivers/usb/mon/mon_stat.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/fs.h>
 #include <linux/uaccess.h>
diff --git a/drivers/usb/mon/mon_text.c b/drivers/usb/mon/mon_text.c
index 2fe9b95bac1d..ece5a13d76f2 100644
--- a/drivers/usb/mon/mon_text.c
+++ b/drivers/usb/mon/mon_text.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
diff --git a/drivers/usb/mtu3/mtu3_debugfs.c b/drivers/usb/mtu3/mtu3_debugfs.c
index f0de99858353..103dd8578481 100644
--- a/drivers/usb/mtu3/mtu3_debugfs.c
+++ b/drivers/usb/mtu3/mtu3_debugfs.c
@@ -8,6 +8,8 @@
  */
 
 #include <linux/uaccess.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include "mtu3.h"
 #include "mtu3_dr.h"
diff --git a/drivers/usb/mtu3/mtu3_gadget.c b/drivers/usb/mtu3/mtu3_gadget.c
index ad0eeac4332d..1c386c479ca1 100644
--- a/drivers/usb/mtu3/mtu3_gadget.c
+++ b/drivers/usb/mtu3/mtu3_gadget.c
@@ -9,6 +9,7 @@
 
 #include "mtu3.h"
 #include "mtu3_trace.h"
+#include <linux/sprintf.h>
 
 void mtu3_req_complete(struct mtu3_ep *mep,
 		     struct usb_request *req, int status)
diff --git a/drivers/usb/mtu3/mtu3_qmu.c b/drivers/usb/mtu3/mtu3_qmu.c
index 3d77408e3133..1c4d0b4558dc 100644
--- a/drivers/usb/mtu3/mtu3_qmu.c
+++ b/drivers/usb/mtu3/mtu3_qmu.c
@@ -20,6 +20,7 @@
 
 #include <linux/dmapool.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #include "mtu3.h"
 #include "mtu3_trace.h"
diff --git a/drivers/usb/musb/musb_core.c b/drivers/usb/musb/musb_core.c
index b24adb5b399f..d5c925604024 100644
--- a/drivers/usb/musb/musb_core.c
+++ b/drivers/usb/musb/musb_core.c
@@ -75,6 +75,7 @@
 #include <linux/io.h>
 #include <linux/iopoll.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/of.h>
 
diff --git a/drivers/usb/musb/musb_cppi41.c b/drivers/usb/musb/musb_cppi41.c
index 9589243e8951..a9e3c4d01006 100644
--- a/drivers/usb/musb/musb_cppi41.c
+++ b/drivers/usb/musb/musb_cppi41.c
@@ -2,6 +2,8 @@
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
 #include <linux/dmaengine.h>
+#include <linux/hrtimer.h>
+#include <linux/kstrtox.h>
 #include <linux/sizes.h>
 #include <linux/platform_device.h>
 #include <linux/of.h>
diff --git a/drivers/usb/musb/musb_dsps.c b/drivers/usb/musb/musb_dsps.c
index 9c7a8bbc0542..94c810ec6982 100644
--- a/drivers/usb/musb/musb_dsps.c
+++ b/drivers/usb/musb/musb_dsps.c
@@ -21,6 +21,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/pm_runtime.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb/usb_phy_generic.h>
 #include <linux/platform_data/usb-omap.h>
 #include <linux/sizes.h>
diff --git a/drivers/usb/musb/musb_gadget.c b/drivers/usb/musb/musb_gadget.c
index 051c6da7cf6d..321278d81323 100644
--- a/drivers/usb/musb/musb_gadget.c
+++ b/drivers/usb/musb/musb_gadget.c
@@ -10,6 +10,7 @@
 
 #include <linux/kernel.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/module.h>
 #include <linux/smp.h>
diff --git a/drivers/usb/musb/tusb6010_omap.c b/drivers/usb/musb/tusb6010_omap.c
index 60a93b8bbe3c..a495468ecaee 100644
--- a/drivers/usb/musb/tusb6010_omap.c
+++ b/drivers/usb/musb/tusb6010_omap.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/platform_device.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/usb/phy/phy-mv-usb.c b/drivers/usb/phy/phy-mv-usb.c
index df7c27474a75..74028a2ff97b 100644
--- a/drivers/usb/phy/phy-mv-usb.c
+++ b/drivers/usb/phy/phy-mv-usb.c
@@ -9,6 +9,7 @@
 #include <linux/kernel.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/device.h>
 #include <linux/proc_fs.h>
diff --git a/drivers/usb/phy/phy-tahvo.c b/drivers/usb/phy/phy-tahvo.c
index 5cac31c6029b..4c197496ec7a 100644
--- a/drivers/usb/phy/phy-tahvo.c
+++ b/drivers/usb/phy/phy-tahvo.c
@@ -14,6 +14,7 @@
 
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/extcon-provider.h>
 #include <linux/kernel.h>
diff --git a/drivers/usb/phy/phy.c b/drivers/usb/phy/phy.c
index 4b468bde19cf..3c463a269c4f 100644
--- a/drivers/usb/phy/phy.c
+++ b/drivers/usb/phy/phy.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <linux/usb/phy.h>
 
diff --git a/drivers/usb/renesas_usbhs/fifo.c b/drivers/usb/renesas_usbhs/fifo.c
index 10607e273879..1aaeccbb0579 100644
--- a/drivers/usb/renesas_usbhs/fifo.c
+++ b/drivers/usb/renesas_usbhs/fifo.c
@@ -11,6 +11,7 @@
 #include <linux/scatterlist.h>
 #include "common.h"
 #include "pipe.h"
+#include <linux/sprintf.h>
 
 #define usbhsf_get_cfifo(p)	(&((p)->fifo_info.cfifo))
 
diff --git a/drivers/usb/renesas_usbhs/mod_gadget.c b/drivers/usb/renesas_usbhs/mod_gadget.c
index 105132ae87ac..c2dd2e39da0a 100644
--- a/drivers/usb/renesas_usbhs/mod_gadget.c
+++ b/drivers/usb/renesas_usbhs/mod_gadget.c
@@ -11,6 +11,7 @@
 #include <linux/io.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/usb/ch9.h>
 #include <linux/usb/gadget.h>
 #include <linux/usb/otg.h>
diff --git a/drivers/usb/renesas_usbhs/mod_host.c b/drivers/usb/renesas_usbhs/mod_host.c
index ae54221011c3..17e403693c7a 100644
--- a/drivers/usb/renesas_usbhs/mod_host.c
+++ b/drivers/usb/renesas_usbhs/mod_host.c
@@ -13,6 +13,7 @@
 #include <linux/usb.h>
 #include <linux/usb/hcd.h>
 #include "common.h"
+#include <linux/completion.h>
 
 /*
  *** HARDWARE LIMITATION ***
diff --git a/drivers/usb/roles/class.c b/drivers/usb/roles/class.c
index ae41578bd014..cc46570e8c90 100644
--- a/drivers/usb/roles/class.c
+++ b/drivers/usb/roles/class.c
@@ -10,9 +10,11 @@
 #include <linux/usb/role.h>
 #include <linux/property.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 static const struct class role_class = {
 	.name = "usb_role",
diff --git a/drivers/usb/serial/console.c b/drivers/usb/serial/console.c
index c3ea3a46ed76..71848ea1da3b 100644
--- a/drivers/usb/serial/console.c
+++ b/drivers/usb/serial/console.c
@@ -11,6 +11,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/tty.h>
diff --git a/drivers/usb/serial/ftdi_sio.c b/drivers/usb/serial/ftdi_sio.c
index 13a56783830d..810f9359c5ec 100644
--- a/drivers/usb/serial/ftdi_sio.c
+++ b/drivers/usb/serial/ftdi_sio.c
@@ -29,7 +29,9 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/usb/serial/io_ti.c b/drivers/usb/serial/io_ti.c
index 7a3a6e539456..d9d882ae511d 100644
--- a/drivers/usb/serial/io_ti.c
+++ b/drivers/usb/serial/io_ti.c
@@ -16,7 +16,9 @@
 #include <linux/kernel.h>
 #include <linux/jiffies.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/usb/serial/iuu_phoenix.c b/drivers/usb/serial/iuu_phoenix.c
index 77cba71bcccb..8877e0edbe5f 100644
--- a/drivers/usb/serial/iuu_phoenix.c
+++ b/drivers/usb/serial/iuu_phoenix.c
@@ -12,7 +12,9 @@
  */
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/usb/serial/mos7720.c b/drivers/usb/serial/mos7720.c
index 23544074eb1c..c6987cf76e59 100644
--- a/drivers/usb/serial/mos7720.c
+++ b/drivers/usb/serial/mos7720.c
@@ -31,6 +31,7 @@
 #include <linux/usb/serial.h>
 #include <linux/uaccess.h>
 #include <linux/parport.h>
+#include <linux/completion.h>
 
 #define DRIVER_AUTHOR "Aspire Communications pvt Ltd."
 #define DRIVER_DESC "Moschip USB Serial Driver"
diff --git a/drivers/usb/serial/mxuport.c b/drivers/usb/serial/mxuport.c
index 1f7bb3e4fcf2..919cc5c40368 100644
--- a/drivers/usb/serial/mxuport.c
+++ b/drivers/usb/serial/mxuport.c
@@ -19,6 +19,7 @@
 #include <linux/serial.h>
 #include <linux/serial_reg.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/usb/serial/ti_usb_3410_5052.c b/drivers/usb/serial/ti_usb_3410_5052.c
index 0fba25abf671..71b02aa4582e 100644
--- a/drivers/usb/serial/ti_usb_3410_5052.c
+++ b/drivers/usb/serial/ti_usb_3410_5052.c
@@ -17,6 +17,7 @@
 #include <linux/errno.h>
 #include <linux/firmware.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/usb/serial/usb-serial.c b/drivers/usb/serial/usb-serial.c
index f1e91eb7f8a4..3da85458fdc4 100644
--- a/drivers/usb/serial/usb-serial.c
+++ b/drivers/usb/serial/usb-serial.c
@@ -20,6 +20,7 @@
 #include <linux/errno.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/tty_flip.h>
diff --git a/drivers/usb/storage/onetouch.c b/drivers/usb/storage/onetouch.c
index 01f3c2779ccf..d288b1a7f4cc 100644
--- a/drivers/usb/storage/onetouch.c
+++ b/drivers/usb/storage/onetouch.c
@@ -15,6 +15,7 @@
 #include <linux/input.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/usb/input.h>
 #include "usb.h"
 #include "debug.h"
diff --git a/drivers/usb/storage/scsiglue.c b/drivers/usb/storage/scsiglue.c
index c54e9805da53..9f291f9fdb65 100644
--- a/drivers/usb/storage/scsiglue.c
+++ b/drivers/usb/storage/scsiglue.c
@@ -29,9 +29,11 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/usb/storage/sddr09.c b/drivers/usb/storage/sddr09.c
index 51bcd4a43690..c18cb09ee848 100644
--- a/drivers/usb/storage/sddr09.c
+++ b/drivers/usb/storage/sddr09.c
@@ -31,6 +31,7 @@
 #include <linux/errno.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/usb/storage/transport.c b/drivers/usb/storage/transport.c
index 7449e379077a..3de83c469f0e 100644
--- a/drivers/usb/storage/transport.c
+++ b/drivers/usb/storage/transport.c
@@ -32,6 +32,7 @@
 #include <linux/gfp.h>
 #include <linux/errno.h>
 #include <linux/export.h>
+#include <linux/completion.h>
 
 #include <linux/usb/quirks.h>
 
diff --git a/drivers/usb/storage/uas.c b/drivers/usb/storage/uas.c
index 9707f53cfda9..eeeeca92beff 100644
--- a/drivers/usb/storage/uas.c
+++ b/drivers/usb/storage/uas.c
@@ -11,6 +11,7 @@
 #include <linux/blkdev.h>
 #include <linux/slab.h>
 #include <linux/types.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/module.h>
 #include <linux/usb.h>
 #include <linux/usb_usual.h>
diff --git a/drivers/usb/storage/usb.c b/drivers/usb/storage/usb.c
index d1ad6a2509ab..0313124c49fe 100644
--- a/drivers/usb/storage/usb.c
+++ b/drivers/usb/storage/usb.c
@@ -36,11 +36,14 @@
 
 #include <linux/sched.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/kthread.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
+#include <linux/completion.h>
 
 #include <scsi/scsi.h>
 #include <scsi/scsi_cmnd.h>
diff --git a/drivers/usb/typec/altmodes/displayport.c b/drivers/usb/typec/altmodes/displayport.c
index 5a80776c7255..2f2121349eea 100644
--- a/drivers/usb/typec/altmodes/displayport.c
+++ b/drivers/usb/typec/altmodes/displayport.c
@@ -12,6 +12,7 @@
 #include <linux/mutex.h>
 #include <linux/module.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/usb/pd_vdo.h>
 #include <linux/usb/typec_dp.h>
 #include <drm/drm_connector.h>
diff --git a/drivers/usb/typec/bus.c b/drivers/usb/typec/bus.c
index 6ea103e1abae..6e0b1d3428a3 100644
--- a/drivers/usb/typec/bus.c
+++ b/drivers/usb/typec/bus.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/usb/pd_vdo.h>
+#include <linux/sprintf.h>
 
 #include "bus.h"
 #include "class.h"
diff --git a/drivers/usb/typec/class.c b/drivers/usb/typec/class.c
index caea2b829980..eff36bd3ac91 100644
--- a/drivers/usb/typec/class.c
+++ b/drivers/usb/typec/class.c
@@ -10,10 +10,12 @@
 #include <linux/mutex.h>
 #include <linux/property.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb/pd_vdo.h>
 #include <linux/usb/typec_mux.h>
 #include <linux/usb/typec_retimer.h>
 #include <linux/usb.h>
+#include <linux/kstrtox.h>
 
 #include "bus.h"
 #include "class.h"
diff --git a/drivers/usb/typec/class.h b/drivers/usb/typec/class.h
index 759b98355eeb..f57abf701dc5 100644
--- a/drivers/usb/typec/class.h
+++ b/drivers/usb/typec/class.h
@@ -4,6 +4,7 @@
 #define __USB_TYPEC_CLASS__
 
 #include <linux/device.h>
+#include <linux/idr.h>
 #include <linux/usb/typec.h>
 
 struct typec_mux;
diff --git a/drivers/usb/typec/mux/intel_pmc_mux.c b/drivers/usb/typec/mux/intel_pmc_mux.c
index 56989a0d0f43..35997fca303a 100644
--- a/drivers/usb/typec/mux/intel_pmc_mux.c
+++ b/drivers/usb/typec/mux/intel_pmc_mux.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/property.h>
+#include <linux/sprintf.h>
 #include <linux/usb/pd.h>
 #include <linux/usb/role.h>
 #include <linux/usb/typec_mux.h>
diff --git a/drivers/usb/typec/pd.c b/drivers/usb/typec/pd.c
index b9cca2be76fc..aa73642e104c 100644
--- a/drivers/usb/typec/pd.c
+++ b/drivers/usb/typec/pd.c
@@ -6,6 +6,7 @@
  * Author: Heikki Krogerus <heikki.krogerus@linux.intel.com>
  */
 
+#include <linux/idr.h>
 #include <linux/slab.h>
 #include <linux/usb/pd.h>
 
diff --git a/drivers/usb/typec/tcpm/fusb302.c b/drivers/usb/typec/tcpm/fusb302.c
index ef18a448b740..9af11d37bf17 100644
--- a/drivers/usb/typec/tcpm/fusb302.c
+++ b/drivers/usb/typec/tcpm/fusb302.c
@@ -23,6 +23,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/usb.h>
diff --git a/drivers/usb/typec/tcpm/tcpm.c b/drivers/usb/typec/tcpm/tcpm.c
index d975fc525eac..db1aa6bd29a9 100644
--- a/drivers/usb/typec/tcpm/tcpm.c
+++ b/drivers/usb/typec/tcpm/tcpm.c
@@ -21,6 +21,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/pd.h>
 #include <linux/usb/pd_ado.h>
diff --git a/drivers/usb/typec/ucsi/ucsi.c b/drivers/usb/typec/ucsi/ucsi.c
index 14f5a7bfae2e..7c45127ad3f4 100644
--- a/drivers/usb/typec/ucsi/ucsi.c
+++ b/drivers/usb/typec/ucsi/ucsi.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb/typec_dp.h>
 
 #include "ucsi.h"
diff --git a/drivers/usb/typec/ucsi/ucsi_acpi.c b/drivers/usb/typec/ucsi/ucsi_acpi.c
index 928eacbeb21a..951c0eb06efe 100644
--- a/drivers/usb/typec/ucsi/ucsi_acpi.c
+++ b/drivers/usb/typec/ucsi/ucsi_acpi.c
@@ -9,6 +9,7 @@
 #include <linux/platform_device.h>
 #include <linux/module.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/dmi.h>
 
 #include "ucsi.h"
diff --git a/drivers/usb/typec/ucsi/ucsi_ccg.c b/drivers/usb/typec/ucsi/ucsi_ccg.c
index dda7c7c94e08..3c8228a3c0e6 100644
--- a/drivers/usb/typec/ucsi/ucsi_ccg.c
+++ b/drivers/usb/typec/ucsi/ucsi_ccg.c
@@ -8,9 +8,12 @@
  * Some code borrowed from drivers/usb/typec/ucsi/ucsi_acpi.c
  */
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/firmware.h>
+#include <linux/hex.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
diff --git a/drivers/usb/typec/ucsi/ucsi_glink.c b/drivers/usb/typec/ucsi/ucsi_glink.c
index 0bd3f6dee678..907f77b6ccb2 100644
--- a/drivers/usb/typec/ucsi/ucsi_glink.c
+++ b/drivers/usb/typec/ucsi/ucsi_glink.c
@@ -4,6 +4,7 @@
  * Copyright (c) 2023, Linaro Ltd
  */
 #include <linux/auxiliary_bus.h>
+#include <linux/completion.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/of_device.h>
diff --git a/drivers/usb/typec/ucsi/ucsi_stm32g0.c b/drivers/usb/typec/ucsi/ucsi_stm32g0.c
index 93d7806681cf..e51b3c0bbc20 100644
--- a/drivers/usb/typec/ucsi/ucsi_stm32g0.c
+++ b/drivers/usb/typec/ucsi/ucsi_stm32g0.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <asm/unaligned.h>
+#include <linux/completion.h>
 
 #include "ucsi.h"
 
diff --git a/drivers/usb/usbip/stub_dev.c b/drivers/usb/usbip/stub_dev.c
index ce625b1ce9a5..84efde91db02 100644
--- a/drivers/usb/usbip/stub_dev.c
+++ b/drivers/usb/usbip/stub_dev.c
@@ -7,6 +7,7 @@
 #include <linux/file.h>
 #include <linux/kthread.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "usbip_common.h"
 #include "stub.h"
diff --git a/drivers/usb/usbip/stub_main.c b/drivers/usb/usbip/stub_main.c
index 79110a69d697..7b85d82ebf09 100644
--- a/drivers/usb/usbip/stub_main.c
+++ b/drivers/usb/usbip/stub_main.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 
 #include "usbip_common.h"
 #include "stub.h"
diff --git a/drivers/usb/usbip/usbip_common.c b/drivers/usb/usbip/usbip_common.c
index a2b2da1255dd..566550914363 100644
--- a/drivers/usb/usbip/usbip_common.c
+++ b/drivers/usb/usbip/usbip_common.c
@@ -10,6 +10,7 @@
 #include <linux/fs.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
diff --git a/drivers/usb/usbip/vhci_hcd.c b/drivers/usb/usbip/vhci_hcd.c
index 82650c11e451..be636cf1d673 100644
--- a/drivers/usb/usbip/vhci_hcd.c
+++ b/drivers/usb/usbip/vhci_hcd.c
@@ -7,6 +7,7 @@
 #include <linux/init.h>
 #include <linux/file.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
diff --git a/drivers/usb/usbip/vhci_sysfs.c b/drivers/usb/usbip/vhci_sysfs.c
index e2847cd3e6e3..3891ff301444 100644
--- a/drivers/usb/usbip/vhci_sysfs.c
+++ b/drivers/usb/usbip/vhci_sysfs.c
@@ -6,9 +6,11 @@
 
 #include <linux/kthread.h>
 #include <linux/file.h>
+#include <linux/kstrtox.h>
 #include <linux/net.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Hardening for Spectre-v1 */
 #include <linux/nospec.h>
diff --git a/drivers/usb/usbip/vudc_dev.c b/drivers/usb/usbip/vudc_dev.c
index f11535020e35..b95402e530bd 100644
--- a/drivers/usb/usbip/vudc_dev.c
+++ b/drivers/usb/usbip/vudc_dev.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/list.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/gadget.h>
 #include <linux/usb/hcd.h>
diff --git a/drivers/usb/usbip/vudc_sysfs.c b/drivers/usb/usbip/vudc_sysfs.c
index 907a43a00896..61c1a8e9966d 100644
--- a/drivers/usb/usbip/vudc_sysfs.c
+++ b/drivers/usb/usbip/vudc_sysfs.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/usb/gadget.h>
 #include <linux/usb/ch9.h>
diff --git a/drivers/vdpa/alibaba/eni_vdpa.c b/drivers/vdpa/alibaba/eni_vdpa.c
index cce3d1837104..be5c6ce07c5a 100644
--- a/drivers/vdpa/alibaba/eni_vdpa.c
+++ b/drivers/vdpa/alibaba/eni_vdpa.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/vdpa.h>
 #include <linux/virtio.h>
 #include <linux/virtio_config.h>
diff --git a/drivers/vdpa/ifcvf/ifcvf_main.c b/drivers/vdpa/ifcvf/ifcvf_main.c
index e98fa8100f3c..9ad4e71f1fd8 100644
--- a/drivers/vdpa/ifcvf/ifcvf_main.c
+++ b/drivers/vdpa/ifcvf/ifcvf_main.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include "ifcvf_base.h"
 
diff --git a/drivers/vdpa/mlx5/net/debug.c b/drivers/vdpa/mlx5/net/debug.c
index 9c85162c19fc..92c8c2fe7b79 100644
--- a/drivers/vdpa/mlx5/net/debug.c
+++ b/drivers/vdpa/mlx5/net/debug.c
@@ -4,6 +4,7 @@
 #include <linux/debugfs.h>
 #include <linux/mlx5/fs.h>
 #include "mlx5_vnet.h"
+#include <linux/sprintf.h>
 
 static int tirn_show(struct seq_file *file, void *priv)
 {
diff --git a/drivers/vdpa/mlx5/net/mlx5_vnet.c b/drivers/vdpa/mlx5/net/mlx5_vnet.c
index 778821bab7d9..e1a79556a670 100644
--- a/drivers/vdpa/mlx5/net/mlx5_vnet.c
+++ b/drivers/vdpa/mlx5/net/mlx5_vnet.c
@@ -2,6 +2,7 @@
 /* Copyright (c) 2020 Mellanox Technologies Ltd. */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vdpa.h>
 #include <linux/vringh.h>
 #include <uapi/linux/virtio_net.h>
diff --git a/drivers/vdpa/pds/debugfs.c b/drivers/vdpa/pds/debugfs.c
index c328e694f6e7..017811bea77f 100644
--- a/drivers/vdpa/pds/debugfs.c
+++ b/drivers/vdpa/pds/debugfs.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2023 Advanced Micro Devices, Inc */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/vdpa.h>
 
 #include <linux/pds/pds_common.h>
diff --git a/drivers/vdpa/pds/vdpa_dev.c b/drivers/vdpa/pds/vdpa_dev.c
index 25c0fe5ec3d5..013b5d2142bf 100644
--- a/drivers/vdpa/pds/vdpa_dev.c
+++ b/drivers/vdpa/pds/vdpa_dev.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2023 Advanced Micro Devices, Inc */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/vdpa.h>
 #include <uapi/linux/vdpa.h>
 #include <linux/virtio_pci_modern.h>
diff --git a/drivers/vdpa/solidrun/snet_hwmon.c b/drivers/vdpa/solidrun/snet_hwmon.c
index af531a339082..6f1dbadcfe66 100644
--- a/drivers/vdpa/solidrun/snet_hwmon.c
+++ b/drivers/vdpa/solidrun/snet_hwmon.c
@@ -8,6 +8,7 @@
  *
  */
 #include <linux/hwmon.h>
+#include <linux/sprintf.h>
 
 #include "snet_vdpa.h"
 
diff --git a/drivers/vdpa/solidrun/snet_main.c b/drivers/vdpa/solidrun/snet_main.c
index 99428a04068d..3343a227b283 100644
--- a/drivers/vdpa/solidrun/snet_main.c
+++ b/drivers/vdpa/solidrun/snet_main.c
@@ -8,6 +8,7 @@
  *
  */
 #include <linux/iopoll.h>
+#include <linux/sprintf.h>
 
 #include "snet_vdpa.h"
 
diff --git a/drivers/vdpa/vdpa.c b/drivers/vdpa/vdpa.c
index d0695680b282..2cea29af112b 100644
--- a/drivers/vdpa/vdpa.c
+++ b/drivers/vdpa/vdpa.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/idr.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vdpa.h>
 #include <uapi/linux/vdpa.h>
 #include <net/genetlink.h>
diff --git a/drivers/vdpa/vdpa_user/vduse_dev.c b/drivers/vdpa/vdpa_user/vduse_dev.c
index 1d24da79c399..d56f27ec2412 100644
--- a/drivers/vdpa/vdpa_user/vduse_dev.c
+++ b/drivers/vdpa/vdpa_user/vduse_dev.c
@@ -9,11 +9,13 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/cdev.h>
 #include <linux/device.h>
 #include <linux/eventfd.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/dma-map-ops.h>
 #include <linux/poll.h>
diff --git a/drivers/vdpa/virtio_pci/vp_vdpa.c b/drivers/vdpa/virtio_pci/vp_vdpa.c
index 281287fae89f..2de92e34e92f 100644
--- a/drivers/vdpa/virtio_pci/vp_vdpa.c
+++ b/drivers/vdpa/virtio_pci/vp_vdpa.c
@@ -11,6 +11,7 @@
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/vdpa.h>
 #include <linux/virtio.h>
 #include <linux/virtio_config.h>
diff --git a/drivers/vfio/device_cdev.c b/drivers/vfio/device_cdev.c
index e75da0a70d1f..67b6569fbfd5 100644
--- a/drivers/vfio/device_cdev.c
+++ b/drivers/vfio/device_cdev.c
@@ -4,6 +4,7 @@
  */
 #include <linux/vfio.h>
 #include <linux/iommufd.h>
+#include <linux/sprintf.h>
 
 #include "vfio.h"
 
diff --git a/drivers/vfio/fsl-mc/vfio_fsl_mc.c b/drivers/vfio/fsl-mc/vfio_fsl_mc.c
index f65d91c01f2e..32ab0b9b7b3f 100644
--- a/drivers/vfio/fsl-mc/vfio_fsl_mc.c
+++ b/drivers/vfio/fsl-mc/vfio_fsl_mc.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/vfio.h>
 #include <linux/fsl/mc.h>
diff --git a/drivers/vfio/fsl-mc/vfio_fsl_mc_intr.c b/drivers/vfio/fsl-mc/vfio_fsl_mc_intr.c
index d62fbfff20b8..b61cdec98015 100644
--- a/drivers/vfio/fsl-mc/vfio_fsl_mc_intr.c
+++ b/drivers/vfio/fsl-mc/vfio_fsl_mc_intr.c
@@ -6,6 +6,7 @@
 
 #include <linux/vfio.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/eventfd.h>
 
diff --git a/drivers/vfio/group.c b/drivers/vfio/group.c
index 610a429c6191..7fa8224ea6b9 100644
--- a/drivers/vfio/group.c
+++ b/drivers/vfio/group.c
@@ -11,9 +11,11 @@
  */
 
 #include <linux/vfio.h>
+#include <linux/idr.h>
 #include <linux/iommufd.h>
 #include <linux/anon_inodes.h>
 #include "vfio.h"
+#include <linux/sprintf.h>
 
 static struct vfio {
 	struct class			*class;
diff --git a/drivers/vfio/mdev/mdev_sysfs.c b/drivers/vfio/mdev/mdev_sysfs.c
index 9d2738e10c0b..3dfbaea658d2 100644
--- a/drivers/vfio/mdev/mdev_sysfs.c
+++ b/drivers/vfio/mdev/mdev_sysfs.c
@@ -9,7 +9,10 @@
 
 #include <linux/sysfs.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/mdev.h>
 
 #include "mdev_private.h"
diff --git a/drivers/vfio/pci/mlx5/cmd.c b/drivers/vfio/pci/mlx5/cmd.c
index efd1d252cdc9..b857b603039e 100644
--- a/drivers/vfio/pci/mlx5/cmd.c
+++ b/drivers/vfio/pci/mlx5/cmd.c
@@ -4,6 +4,8 @@
  */
 
 #include "cmd.h"
+#include <linux/completion.h>
+#include <linux/highmem.h> // for kmap_local_page()
 
 enum { CQ_OK = 0, CQ_EMPTY = -1, CQ_POLL_ERR = -2 };
 
diff --git a/drivers/vfio/pci/mlx5/main.c b/drivers/vfio/pci/mlx5/main.c
index fe09a8c8af95..f385e366439d 100644
--- a/drivers/vfio/pci/mlx5/main.c
+++ b/drivers/vfio/pci/mlx5/main.c
@@ -6,6 +6,7 @@
 #include <linux/device.h>
 #include <linux/eventfd.h>
 #include <linux/file.h>
+#include <linux/highmem.h> // for kmap_local_page()
 #include <linux/interrupt.h>
 #include <linux/iommu.h>
 #include <linux/module.h>
@@ -18,6 +19,7 @@
 #include <linux/vfio.h>
 #include <linux/sched/mm.h>
 #include <linux/anon_inodes.h>
+#include <linux/completion.h>
 
 #include "cmd.h"
 
diff --git a/drivers/vfio/pci/pds/cmds.c b/drivers/vfio/pci/pds/cmds.c
index 36463ccc3df9..a9872dd84242 100644
--- a/drivers/vfio/pci/pds/cmds.c
+++ b/drivers/vfio/pci/pds/cmds.c
@@ -2,6 +2,7 @@
 /* Copyright(c) 2023 Advanced Micro Devices, Inc. */
 
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 
diff --git a/drivers/vfio/pci/vfio_pci.c b/drivers/vfio/pci/vfio_pci.c
index cb5b7f865d58..1d4ba8bd463a 100644
--- a/drivers/vfio/pci/vfio_pci.c
+++ b/drivers/vfio/pci/vfio_pci.c
@@ -22,6 +22,7 @@
 #include <linux/notifier.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/vfio/pci/vfio_pci_core.c b/drivers/vfio/pci/vfio_pci_core.c
index 1cbc990d42e0..6f80abbe2281 100644
--- a/drivers/vfio/pci/vfio_pci_core.c
+++ b/drivers/vfio/pci/vfio_pci_core.c
@@ -22,6 +22,7 @@
 #include <linux/pci.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 #include <linux/vgaarb.h>
diff --git a/drivers/vfio/pci/vfio_pci_intrs.c b/drivers/vfio/pci/vfio_pci_intrs.c
index 237beac83809..a8bc634e488f 100644
--- a/drivers/vfio/pci/vfio_pci_intrs.c
+++ b/drivers/vfio/pci/vfio_pci_intrs.c
@@ -16,6 +16,7 @@
 #include <linux/msi.h>
 #include <linux/pci.h>
 #include <linux/file.h>
+#include <linux/sprintf.h>
 #include <linux/vfio.h>
 #include <linux/wait.h>
 #include <linux/slab.h>
diff --git a/drivers/vfio/platform/vfio_amba.c b/drivers/vfio/platform/vfio_amba.c
index 6464b3939ebc..c34f35b99359 100644
--- a/drivers/vfio/platform/vfio_amba.c
+++ b/drivers/vfio/platform/vfio_amba.c
@@ -6,6 +6,7 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vfio.h>
 #include <linux/pm_runtime.h>
 #include <linux/amba/bus.h>
diff --git a/drivers/vfio/platform/vfio_platform_irq.c b/drivers/vfio/platform/vfio_platform_irq.c
index 61a1bfb68ac7..da28abd25e52 100644
--- a/drivers/vfio/platform/vfio_platform_irq.c
+++ b/drivers/vfio/platform/vfio_platform_irq.c
@@ -9,6 +9,7 @@
 #include <linux/eventfd.h>
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/vfio.h>
 #include <linux/irq.h>
diff --git a/drivers/vfio/vfio_main.c b/drivers/vfio/vfio_main.c
index 1cc93aac99a2..71c1c227fafd 100644
--- a/drivers/vfio/vfio_main.c
+++ b/drivers/vfio/vfio_main.c
@@ -12,10 +12,12 @@
 
 #include <linux/cdev.h>
 #include <linux/compat.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/fs.h>
 #include <linux/idr.h>
 #include <linux/iommu.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #ifdef CONFIG_HAVE_KVM
 #include <linux/kvm_host.h>
 #endif
diff --git a/drivers/vhost/scsi.c b/drivers/vhost/scsi.c
index 282aac45c690..f7a10719c44a 100644
--- a/drivers/vhost/scsi.c
+++ b/drivers/vhost/scsi.c
@@ -12,6 +12,9 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <generated/utsrelease.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/init.h>
 #include <linux/slab.h>
diff --git a/drivers/vhost/vdpa.c b/drivers/vhost/vdpa.c
index bc4a51e4638b..be4ac0b48161 100644
--- a/drivers/vhost/vdpa.c
+++ b/drivers/vhost/vdpa.c
@@ -14,6 +14,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/cdev.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/vhost/vhost.c b/drivers/vhost/vhost.c
index 045f666b4f12..3a9c6e73c2a3 100644
--- a/drivers/vhost/vhost.c
+++ b/drivers/vhost/vhost.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/eventfd.h>
+#include <linux/sprintf.h>
 #include <linux/vhost.h>
 #include <linux/uio.h>
 #include <linux/mm.h>
@@ -30,6 +31,7 @@
 #include <linux/interval_tree_generic.h>
 #include <linux/nospec.h>
 #include <linux/kcov.h>
+#include <linux/completion.h>
 
 #include "vhost.h"
 
diff --git a/drivers/video/backlight/88pm860x_bl.c b/drivers/video/backlight/88pm860x_bl.c
index 25e409bbb1a2..4bbef1996c0d 100644
--- a/drivers/video/backlight/88pm860x_bl.c
+++ b/drivers/video/backlight/88pm860x_bl.c
@@ -16,6 +16,7 @@
 #include <linux/backlight.h>
 #include <linux/mfd/88pm860x.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #define MAX_BRIGHTNESS		(0xFF)
 #define MIN_BRIGHTNESS		(0)
diff --git a/drivers/video/backlight/adp5520_bl.c b/drivers/video/backlight/adp5520_bl.c
index 8e0e9cfe5fe9..6e6eef436227 100644
--- a/drivers/video/backlight/adp5520_bl.c
+++ b/drivers/video/backlight/adp5520_bl.c
@@ -7,12 +7,14 @@
 
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/fb.h>
 #include <linux/backlight.h>
 #include <linux/mfd/adp5520.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 struct adp5520_bl {
 	struct device *master;
diff --git a/drivers/video/backlight/adp8860_bl.c b/drivers/video/backlight/adp8860_bl.c
index f51ada4795e8..59fffdceb347 100644
--- a/drivers/video/backlight/adp8860_bl.c
+++ b/drivers/video/backlight/adp8860_bl.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/pm.h>
 #include <linux/platform_device.h>
 #include <linux/i2c.h>
@@ -15,6 +16,7 @@
 #include <linux/backlight.h>
 #include <linux/leds.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include <linux/platform_data/adp8860.h>
diff --git a/drivers/video/backlight/adp8870_bl.c b/drivers/video/backlight/adp8870_bl.c
index 6bb18dc970e9..34ee0cdcfb3f 100644
--- a/drivers/video/backlight/adp8870_bl.c
+++ b/drivers/video/backlight/adp8870_bl.c
@@ -8,12 +8,14 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/pm.h>
 #include <linux/platform_device.h>
 #include <linux/i2c.h>
 #include <linux/fb.h>
 #include <linux/backlight.h>
 #include <linux/leds.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/slab.h>
 
diff --git a/drivers/video/backlight/backlight.c b/drivers/video/backlight/backlight.c
index 86e1cdc8e369..88db893c3ef7 100644
--- a/drivers/video/backlight/backlight.c
+++ b/drivers/video/backlight/backlight.c
@@ -12,11 +12,13 @@
 #include <linux/init.h>
 #include <linux/device.h>
 #include <linux/backlight.h>
+#include <linux/kstrtox.h>
 #include <linux/notifier.h>
 #include <linux/ctype.h>
 #include <linux/err.h>
 #include <linux/fb.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_PMAC_BACKLIGHT
 #include <asm/backlight.h>
diff --git a/drivers/video/backlight/lcd.c b/drivers/video/backlight/lcd.c
index 77c5cb2a44e2..d0148a453040 100644
--- a/drivers/video/backlight/lcd.c
+++ b/drivers/video/backlight/lcd.c
@@ -11,12 +11,14 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/lcd.h>
 #include <linux/notifier.h>
 #include <linux/ctype.h>
 #include <linux/err.h>
 #include <linux/fb.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #if defined(CONFIG_FB) || (defined(CONFIG_FB_MODULE) && \
 			   defined(CONFIG_LCD_CLASS_DEVICE_MODULE))
diff --git a/drivers/video/backlight/lm3533_bl.c b/drivers/video/backlight/lm3533_bl.c
index 3e10d480cb7f..521b443698c7 100644
--- a/drivers/video/backlight/lm3533_bl.c
+++ b/drivers/video/backlight/lm3533_bl.c
@@ -9,10 +9,12 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/backlight.h>
 #include <linux/fb.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/mfd/lm3533.h>
 
diff --git a/drivers/video/backlight/lm3639_bl.c b/drivers/video/backlight/lm3639_bl.c
index 5246c171497d..1fa7d8e5769d 100644
--- a/drivers/video/backlight/lm3639_bl.c
+++ b/drivers/video/backlight/lm3639_bl.c
@@ -6,6 +6,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/i2c.h>
+#include <linux/kstrtox.h>
 #include <linux/leds.h>
 #include <linux/backlight.h>
 #include <linux/err.h>
diff --git a/drivers/video/backlight/lp855x_bl.c b/drivers/video/backlight/lp855x_bl.c
index 7075bfab59c4..ecca33f15789 100644
--- a/drivers/video/backlight/lp855x_bl.c
+++ b/drivers/video/backlight/lp855x_bl.c
@@ -16,6 +16,7 @@
 #include <linux/platform_data/lp855x.h>
 #include <linux/pwm.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 /* LP8550/1/2/3/6 Registers */
 #define LP855X_BRIGHTNESS_CTRL		0x00
diff --git a/drivers/video/backlight/lp8788_bl.c b/drivers/video/backlight/lp8788_bl.c
index d1a14b0db265..82ea81d8e960 100644
--- a/drivers/video/backlight/lp8788_bl.c
+++ b/drivers/video/backlight/lp8788_bl.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/pwm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* Register address */
 #define LP8788_BL_CONFIG		0x96
diff --git a/drivers/video/backlight/sky81452-backlight.c b/drivers/video/backlight/sky81452-backlight.c
index eb18c6eb0ff0..18fa6bc07ffe 100644
--- a/drivers/video/backlight/sky81452-backlight.c
+++ b/drivers/video/backlight/sky81452-backlight.c
@@ -11,11 +11,13 @@
 #include <linux/gpio/consumer.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /* registers */
 #define SKY81452_REG0	0x00
diff --git a/drivers/video/fbdev/acornfb.c b/drivers/video/fbdev/acornfb.c
index f0600f6ca254..07213be6cf95 100644
--- a/drivers/video/fbdev/acornfb.c
+++ b/drivers/video/fbdev/acornfb.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/mm.h>
diff --git a/drivers/video/fbdev/amifb.c b/drivers/video/fbdev/amifb.c
index 305f396c764c..7dade92712a0 100644
--- a/drivers/video/fbdev/amifb.c
+++ b/drivers/video/fbdev/amifb.c
@@ -43,6 +43,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/delay.h>
diff --git a/drivers/video/fbdev/atafb.c b/drivers/video/fbdev/atafb.c
index b8ed1c537293..a034a751f7e8 100644
--- a/drivers/video/fbdev/atafb.c
+++ b/drivers/video/fbdev/atafb.c
@@ -49,6 +49,8 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/delay.h>
diff --git a/drivers/video/fbdev/aty/aty128fb.c b/drivers/video/fbdev/aty/aty128fb.c
index f4de11f19235..f76c5a9055dd 100644
--- a/drivers/video/fbdev/aty/aty128fb.c
+++ b/drivers/video/fbdev/aty/aty128fb.c
@@ -48,10 +48,12 @@
 
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/video/fbdev/aty/atyfb_base.c b/drivers/video/fbdev/aty/atyfb_base.c
index a6dd1cd27125..810dbe2e461e 100644
--- a/drivers/video/fbdev/aty/atyfb_base.c
+++ b/drivers/video/fbdev/aty/atyfb_base.c
@@ -50,10 +50,12 @@
 
 #include <linux/aperture.h>
 #include <linux/compat.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/aty/radeon_backlight.c b/drivers/video/fbdev/aty/radeon_backlight.c
index 23a38c3f3977..efe235361144 100644
--- a/drivers/video/fbdev/aty/radeon_backlight.c
+++ b/drivers/video/fbdev/aty/radeon_backlight.c
@@ -10,6 +10,7 @@
 #include "radeonfb.h"
 #include <linux/backlight.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_PMAC_BACKLIGHT
 #include <asm/backlight.h>
diff --git a/drivers/video/fbdev/aty/radeon_base.c b/drivers/video/fbdev/aty/radeon_base.c
index 36bfb6deb8ab..b21d88778999 100644
--- a/drivers/video/fbdev/aty/radeon_base.c
+++ b/drivers/video/fbdev/aty/radeon_base.c
@@ -53,6 +53,8 @@
 #define RADEON_VERSION	"0.2.0"
 
 #include "radeonfb.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/aperture.h>
 #include <linux/module.h>
diff --git a/drivers/video/fbdev/aty/radeon_i2c.c b/drivers/video/fbdev/aty/radeon_i2c.c
index 269b12ebb673..1221c07e6ef9 100644
--- a/drivers/video/fbdev/aty/radeon_i2c.c
+++ b/drivers/video/fbdev/aty/radeon_i2c.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include "radeonfb.h"
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/drivers/video/fbdev/aty/radeon_monitor.c b/drivers/video/fbdev/aty/radeon_monitor.c
index df55e23b7a5a..0a864fc56495 100644
--- a/drivers/video/fbdev/aty/radeon_monitor.c
+++ b/drivers/video/fbdev/aty/radeon_monitor.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include "radeonfb.h"
+#include <linux/sprintf.h>
 
 #include <linux/slab.h>
 
diff --git a/drivers/video/fbdev/au1200fb.c b/drivers/video/fbdev/au1200fb.c
index 6f20efc663d7..5cbcff319621 100644
--- a/drivers/video/fbdev/au1200fb.c
+++ b/drivers/video/fbdev/au1200fb.c
@@ -31,6 +31,7 @@
  */
 
 #include <linux/clk.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/kernel.h>
diff --git a/drivers/video/fbdev/cg14.c b/drivers/video/fbdev/cg14.c
index c161b2af8933..0c73013e651c 100644
--- a/drivers/video/fbdev/cg14.c
+++ b/drivers/video/fbdev/cg14.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/init.h>
diff --git a/drivers/video/fbdev/cg3.c b/drivers/video/fbdev/cg3.c
index 5e1f1b9a81b6..1aff7f008e09 100644
--- a/drivers/video/fbdev/cg3.c
+++ b/drivers/video/fbdev/cg3.c
@@ -12,6 +12,8 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/init.h>
diff --git a/drivers/video/fbdev/cg6.c b/drivers/video/fbdev/cg6.c
index 69d3ce50948d..14e61200a0f7 100644
--- a/drivers/video/fbdev/cg6.c
+++ b/drivers/video/fbdev/cg6.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/init.h>
diff --git a/drivers/video/fbdev/controlfb.c b/drivers/video/fbdev/controlfb.c
index 5c5284e8ae0e..97dbe391efb4 100644
--- a/drivers/video/fbdev/controlfb.c
+++ b/drivers/video/fbdev/controlfb.c
@@ -33,6 +33,7 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/core/fbcon.c b/drivers/video/fbdev/core/fbcon.c
index 17a9fc80b4e4..dd58f889ccbe 100644
--- a/drivers/video/fbdev/core/fbcon.c
+++ b/drivers/video/fbdev/core/fbcon.c
@@ -62,6 +62,7 @@
 #include <linux/kernel.h>
 #include <linux/delay.h>	/* MSch: for IRQ probe */
 #include <linux/console.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/kd.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/core/fbcvt.c b/drivers/video/fbdev/core/fbcvt.c
index 64843464c661..84fa441c3a33 100644
--- a/drivers/video/fbdev/core/fbcvt.c
+++ b/drivers/video/fbdev/core/fbcvt.c
@@ -14,6 +14,7 @@
  */
 #include <linux/fb.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define FB_CVT_CELLSIZE               8
 #define FB_CVT_GTF_C                 40
diff --git a/drivers/video/fbdev/core/fbsysfs.c b/drivers/video/fbdev/core/fbsysfs.c
index 1b3c9958ef5c..ba247017e6e9 100644
--- a/drivers/video/fbdev/core/fbsysfs.c
+++ b/drivers/video/fbdev/core/fbsysfs.c
@@ -8,7 +8,9 @@
 #include <linux/console.h>
 #include <linux/fb.h>
 #include <linux/fbcon.h>
+#include <linux/kstrtox.h>
 #include <linux/major.h>
+#include <linux/sprintf.h>
 
 #include "fb_internal.h"
 
diff --git a/drivers/video/fbdev/core/modedb.c b/drivers/video/fbdev/core/modedb.c
index 7196b055f2bd..88f0dbba28f1 100644
--- a/drivers/video/fbdev/core/modedb.c
+++ b/drivers/video/fbdev/core/modedb.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/fb.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 
 #undef DEBUG
 
diff --git a/drivers/video/fbdev/cyber2000fb.c b/drivers/video/fbdev/cyber2000fb.c
index 986760b90465..5f85c6c351c8 100644
--- a/drivers/video/fbdev/cyber2000fb.c
+++ b/drivers/video/fbdev/cyber2000fb.c
@@ -37,6 +37,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/efifb.c b/drivers/video/fbdev/efifb.c
index 10fc14ad5d12..fd06857ed543 100644
--- a/drivers/video/fbdev/efifb.c
+++ b/drivers/video/fbdev/efifb.c
@@ -13,11 +13,13 @@
 #include <linux/efi-bgrt.h>
 #include <linux/errno.h>
 #include <linux/fb.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
 #include <linux/printk.h>
 #include <linux/screen_info.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <video/vga.h>
 #include <asm/efi.h>
 #include <drm/drm_utils.h> /* For drm_get_panel_orientation_quirk */
diff --git a/drivers/video/fbdev/fsl-diu-fb.c b/drivers/video/fbdev/fsl-diu-fb.c
index 0191141657fd..b3402732879b 100644
--- a/drivers/video/fbdev/fsl-diu-fb.c
+++ b/drivers/video/fbdev/fsl-diu-fb.c
@@ -15,6 +15,8 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/fb.h>
diff --git a/drivers/video/fbdev/geode/gx1fb_core.c b/drivers/video/fbdev/geode/gx1fb_core.c
index a1919c1934ac..0d3aef7407f9 100644
--- a/drivers/video/fbdev/geode/gx1fb_core.c
+++ b/drivers/video/fbdev/geode/gx1fb_core.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/drivers/video/fbdev/grvga.c b/drivers/video/fbdev/grvga.c
index 6d917e06e5f3..36f689f0227f 100644
--- a/drivers/video/fbdev/grvga.c
+++ b/drivers/video/fbdev/grvga.c
@@ -12,6 +12,7 @@
 
 #include <linux/platform_device.h>
 #include <linux/dma-mapping.h>
+#include <linux/kstrtox.h>
 #include <linux/of.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/drivers/video/fbdev/hyperv_fb.c b/drivers/video/fbdev/hyperv_fb.c
index c26ee6fd73c9..80ac4c5694d5 100644
--- a/drivers/video/fbdev/hyperv_fb.c
+++ b/drivers/video/fbdev/hyperv_fb.c
@@ -46,6 +46,8 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/aperture.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/video/fbdev/i740fb.c b/drivers/video/fbdev/i740fb.c
index 9b74dae71472..b852b0703387 100644
--- a/drivers/video/fbdev/i740fb.c
+++ b/drivers/video/fbdev/i740fb.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/drivers/video/fbdev/i810/i810_main.c b/drivers/video/fbdev/i810/i810_main.c
index d73a795fe1be..c1dfda8f0136 100644
--- a/drivers/video/fbdev/i810/i810_main.c
+++ b/drivers/video/fbdev/i810/i810_main.c
@@ -29,6 +29,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/drivers/video/fbdev/imsttfb.c b/drivers/video/fbdev/imsttfb.c
index 660499260f46..a262322cb7af 100644
--- a/drivers/video/fbdev/imsttfb.c
+++ b/drivers/video/fbdev/imsttfb.c
@@ -17,9 +17,11 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/video/fbdev/leo.c b/drivers/video/fbdev/leo.c
index 7cf525c76079..93a85ba6f77d 100644
--- a/drivers/video/fbdev/leo.c
+++ b/drivers/video/fbdev/leo.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/init.h>
diff --git a/drivers/video/fbdev/matrox/i2c-matroxfb.c b/drivers/video/fbdev/matrox/i2c-matroxfb.c
index bb048e14b2cf..c539e96800c4 100644
--- a/drivers/video/fbdev/matrox/i2c-matroxfb.c
+++ b/drivers/video/fbdev/matrox/i2c-matroxfb.c
@@ -16,6 +16,7 @@
 #include <linux/i2c.h>
 #include <linux/slab.h>
 #include <linux/i2c-algo-bit.h>
+#include <linux/sprintf.h>
 
 /* MGA-TVO I2C for G200, G400 */
 #define MAT_CLK		0x20
diff --git a/drivers/video/fbdev/matrox/matroxfb_base.c b/drivers/video/fbdev/matrox/matroxfb_base.c
index 81603ce05a22..41b440b9278a 100644
--- a/drivers/video/fbdev/matrox/matroxfb_base.c
+++ b/drivers/video/fbdev/matrox/matroxfb_base.c
@@ -101,6 +101,8 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/version.h>
 
 #include "matroxfb_base.h"
diff --git a/drivers/video/fbdev/matrox/matroxfb_g450.c b/drivers/video/fbdev/matrox/matroxfb_g450.c
index df3309fd14f3..ad0f26a6b55f 100644
--- a/drivers/video/fbdev/matrox/matroxfb_g450.c
+++ b/drivers/video/fbdev/matrox/matroxfb_g450.c
@@ -19,6 +19,7 @@
 #include "g450_pll.h"
 #include <linux/matroxfb.h>
 #include <asm/div64.h>
+#include <linux/sprintf.h>
 
 #include "matroxfb_g450.h"
 
diff --git a/drivers/video/fbdev/matrox/matroxfb_maven.c b/drivers/video/fbdev/matrox/matroxfb_maven.c
index b15a8ad92ba7..52d611a94a8e 100644
--- a/drivers/video/fbdev/matrox/matroxfb_maven.c
+++ b/drivers/video/fbdev/matrox/matroxfb_maven.c
@@ -20,6 +20,7 @@
 #include <linux/matroxfb.h>
 #include <linux/slab.h>
 #include <asm/div64.h>
+#include <linux/sprintf.h>
 
 #define MGATVO_B	1
 #define MGATVO_C	2
diff --git a/drivers/video/fbdev/mb862xx/mb862xxfbdrv.c b/drivers/video/fbdev/mb862xx/mb862xxfbdrv.c
index 7c402e9fd7a9..e76a5a84a731 100644
--- a/drivers/video/fbdev/mb862xx/mb862xxfbdrv.c
+++ b/drivers/video/fbdev/mb862xx/mb862xxfbdrv.c
@@ -13,6 +13,7 @@
 #include <linux/aperture.h>
 #include <linux/fb.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
 #include <linux/init.h>
diff --git a/drivers/video/fbdev/mmp/hw/mmp_spi.c b/drivers/video/fbdev/mmp/hw/mmp_spi.c
index cf23650d7f0b..9f55d6915992 100644
--- a/drivers/video/fbdev/mmp/hw/mmp_spi.c
+++ b/drivers/video/fbdev/mmp/hw/mmp_spi.c
@@ -14,6 +14,7 @@
 #include <linux/io.h>
 #include <linux/spi/spi.h>
 #include "mmp_ctrl.h"
+#include <linux/completion.h>
 
 /**
  * spi_write - write command to the SPI port
diff --git a/drivers/video/fbdev/nvidia/nv_backlight.c b/drivers/video/fbdev/nvidia/nv_backlight.c
index 160da9c50a52..8ad175a423ef 100644
--- a/drivers/video/fbdev/nvidia/nv_backlight.c
+++ b/drivers/video/fbdev/nvidia/nv_backlight.c
@@ -9,6 +9,7 @@
 #include <linux/backlight.h>
 #include <linux/fb.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #ifdef CONFIG_PMAC_BACKLIGHT
 #include <asm/backlight.h>
diff --git a/drivers/video/fbdev/nvidia/nvidia.c b/drivers/video/fbdev/nvidia/nvidia.c
index 8900f181f195..565a2b4a57b1 100644
--- a/drivers/video/fbdev/nvidia/nvidia.c
+++ b/drivers/video/fbdev/nvidia/nvidia.c
@@ -10,9 +10,11 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/offb.c b/drivers/video/fbdev/offb.c
index b421b46d88ef..59dc3d23778d 100644
--- a/drivers/video/fbdev/offb.c
+++ b/drivers/video/fbdev/offb.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/video/fbdev/omap/hwa742.c b/drivers/video/fbdev/omap/hwa742.c
index 161fc65d6b57..78b8948b07b0 100644
--- a/drivers/video/fbdev/omap/hwa742.c
+++ b/drivers/video/fbdev/omap/hwa742.c
@@ -12,6 +12,7 @@
 #include <linux/fb.h>
 #include <linux/delay.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/interrupt.h>
 
 #include "omapfb.h"
diff --git a/drivers/video/fbdev/omap/lcdc.c b/drivers/video/fbdev/omap/lcdc.c
index abb8b11464e8..183a7f691e44 100644
--- a/drivers/video/fbdev/omap/lcdc.c
+++ b/drivers/video/fbdev/omap/lcdc.c
@@ -15,6 +15,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/vmalloc.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/gfp.h>
 
 #include <linux/soc/ti/omap1-io.h>
diff --git a/drivers/video/fbdev/omap/omapfb_main.c b/drivers/video/fbdev/omap/omapfb_main.c
index aa31c0d26e92..7e3cd69d0c1e 100644
--- a/drivers/video/fbdev/omap/omapfb_main.c
+++ b/drivers/video/fbdev/omap/omapfb_main.c
@@ -14,9 +14,11 @@
 #include <linux/platform_device.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
 #include <linux/sysfs.h>
+#include <linux/kstrtox.h>
 
 #include <linux/omap-dma.h>
 
diff --git a/drivers/video/fbdev/omap2/omapfb/displays/panel-dsi-cm.c b/drivers/video/fbdev/omap2/omapfb/displays/panel-dsi-cm.c
index adb8881bac28..ead18089a117 100644
--- a/drivers/video/fbdev/omap2/omapfb/displays/panel-dsi-cm.c
+++ b/drivers/video/fbdev/omap2/omapfb/displays/panel-dsi-cm.c
@@ -15,6 +15,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/interrupt.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
diff --git a/drivers/video/fbdev/omap2/omapfb/displays/panel-sony-acx565akm.c b/drivers/video/fbdev/omap2/omapfb/displays/panel-sony-acx565akm.c
index 685c63aa4e03..c4f3a87f6265 100644
--- a/drivers/video/fbdev/omap2/omapfb/displays/panel-sony-acx565akm.c
+++ b/drivers/video/fbdev/omap2/omapfb/displays/panel-sony-acx565akm.c
@@ -20,6 +20,7 @@
 #include <linux/fb.h>
 #include <linux/gpio/consumer.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <video/omapfb_dss.h>
 
diff --git a/drivers/video/fbdev/omap2/omapfb/displays/panel-tpo-td043mtea1.c b/drivers/video/fbdev/omap2/omapfb/displays/panel-tpo-td043mtea1.c
index 477789cff8e0..74ce6cd28322 100644
--- a/drivers/video/fbdev/omap2/omapfb/displays/panel-tpo-td043mtea1.c
+++ b/drivers/video/fbdev/omap2/omapfb/displays/panel-tpo-td043mtea1.c
@@ -8,11 +8,13 @@
 
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/spi/spi.h>
 #include <linux/regulator/consumer.h>
 #include <linux/gpio/consumer.h>
 #include <linux/err.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <video/omapfb_dss.h>
 
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/apply.c b/drivers/video/fbdev/omap2/omapfb/dss/apply.c
index acca991c7540..d44e723bc2e5 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/apply.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/apply.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/jiffies.h>
+#include <linux/completion.h>
 
 #include <video/omapfb_dss.h>
 
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/dispc-compat.c b/drivers/video/fbdev/omap2/omapfb/dss/dispc-compat.c
index cc2ad787d493..15697e1dde43 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/dispc-compat.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/dispc-compat.c
@@ -14,6 +14,7 @@
 #include <linux/delay.h>
 #include <linux/interrupt.h>
 #include <linux/seq_file.h>
+#include <linux/completion.h>
 
 #include <video/omapfb_dss.h>
 
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/display-sysfs.c b/drivers/video/fbdev/omap2/omapfb/dss/display-sysfs.c
index ae937854403b..8d05c9adae9d 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/display-sysfs.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/display-sysfs.c
@@ -13,6 +13,7 @@
 #include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include <video/omapfb_dss.h>
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/display.c b/drivers/video/fbdev/omap2/omapfb/dss/display.c
index f91db94c9905..28bb9b2071bd 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/display.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/display.c
@@ -16,6 +16,7 @@
 #include <linux/jiffies.h>
 #include <linux/platform_device.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 
 #include <video/omapfb_dss.h>
 #include "dss.h"
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/dsi.c b/drivers/video/fbdev/omap2/omapfb/dss/dsi.c
index b7eb17a16ec4..6131a988c33d 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/dsi.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/dsi.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/io.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/interrupt.h>
@@ -30,6 +31,7 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/component.h>
+#include <linux/hrtimer.h>
 
 #include <video/omapfb_dss.h>
 #include <video/mipi_display.h>
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/manager-sysfs.c b/drivers/video/fbdev/omap2/omapfb/dss/manager-sysfs.c
index 1b644be5fe2e..16a8c3fb7a51 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/manager-sysfs.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/manager-sysfs.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/jiffies.h>
+#include <linux/sprintf.h>
 
 #include <video/omapfb_dss.h>
 
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/overlay-sysfs.c b/drivers/video/fbdev/omap2/omapfb/dss/overlay-sysfs.c
index 1da4fb1c77b4..bf164a104974 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/overlay-sysfs.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/overlay-sysfs.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/sysfs.h>
 #include <linux/kobject.h>
 #include <linux/kstrtox.h>
diff --git a/drivers/video/fbdev/omap2/omapfb/dss/pll.c b/drivers/video/fbdev/omap2/omapfb/dss/pll.c
index 725194d52445..1fc0ebe2622f 100644
--- a/drivers/video/fbdev/omap2/omapfb/dss/pll.c
+++ b/drivers/video/fbdev/omap2/omapfb/dss/pll.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/regulator/consumer.h>
 #include <linux/sched.h>
+#include <linux/hrtimer.h>
 
 #include <video/omapfb_dss.h>
 
diff --git a/drivers/video/fbdev/omap2/omapfb/omapfb-main.c b/drivers/video/fbdev/omap2/omapfb/omapfb-main.c
index 0db9c55fce5a..4197efea40e3 100644
--- a/drivers/video/fbdev/omap2/omapfb/omapfb-main.c
+++ b/drivers/video/fbdev/omap2/omapfb/omapfb-main.c
@@ -11,6 +11,8 @@
 
 #include <linux/module.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for memparse()
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/fb.h>
 #include <linux/dma-mapping.h>
diff --git a/drivers/video/fbdev/omap2/omapfb/omapfb-sysfs.c b/drivers/video/fbdev/omap2/omapfb/omapfb-sysfs.c
index 831b2c2fbdf9..0561eec17f40 100644
--- a/drivers/video/fbdev/omap2/omapfb/omapfb-sysfs.c
+++ b/drivers/video/fbdev/omap2/omapfb/omapfb-sysfs.c
@@ -10,6 +10,8 @@
  */
 
 #include <linux/fb.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/device.h>
 #include <linux/uaccess.h>
diff --git a/drivers/video/fbdev/p9100.c b/drivers/video/fbdev/p9100.c
index e1356f8a866e..317ce1d89fff 100644
--- a/drivers/video/fbdev/p9100.c
+++ b/drivers/video/fbdev/p9100.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/delay.h>
 #include <linux/init.h>
diff --git a/drivers/video/fbdev/platinumfb.c b/drivers/video/fbdev/platinumfb.c
index cb6fcc64c8e2..753446deb29d 100644
--- a/drivers/video/fbdev/platinumfb.c
+++ b/drivers/video/fbdev/platinumfb.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/video/fbdev/pm2fb.c b/drivers/video/fbdev/pm2fb.c
index f34429829b7d..6b5e8dbc3ec5 100644
--- a/drivers/video/fbdev/pm2fb.c
+++ b/drivers/video/fbdev/pm2fb.c
@@ -28,6 +28,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
diff --git a/drivers/video/fbdev/pm3fb.c b/drivers/video/fbdev/pm3fb.c
index 6e55e42514d6..127426bc6fc9 100644
--- a/drivers/video/fbdev/pm3fb.c
+++ b/drivers/video/fbdev/pm3fb.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/drivers/video/fbdev/pmagb-b-fb.c b/drivers/video/fbdev/pmagb-b-fb.c
index 6432492467d1..745fe27d0cba 100644
--- a/drivers/video/fbdev/pmagb-b-fb.c
+++ b/drivers/video/fbdev/pmagb-b-fb.c
@@ -25,6 +25,7 @@
 #include <linux/init.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/tc.h>
 #include <linux/types.h>
 
diff --git a/drivers/video/fbdev/ps3fb.c b/drivers/video/fbdev/ps3fb.c
index dbcda307f6a6..9d33dd166bd1 100644
--- a/drivers/video/fbdev/ps3fb.c
+++ b/drivers/video/fbdev/ps3fb.c
@@ -20,6 +20,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/interrupt.h>
diff --git a/drivers/video/fbdev/pxafb.c b/drivers/video/fbdev/pxafb.c
index fa943612c4e2..363ad099f4c8 100644
--- a/drivers/video/fbdev/pxafb.c
+++ b/drivers/video/fbdev/pxafb.c
@@ -35,8 +35,10 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/interrupt.h>
 #include <linux/slab.h>
@@ -49,6 +51,7 @@
 #include <linux/platform_device.h>
 #include <linux/dma-mapping.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/err.h>
 #include <linux/completion.h>
 #include <linux/mutex.h>
diff --git a/drivers/video/fbdev/riva/fbdev.c b/drivers/video/fbdev/riva/fbdev.c
index 237db738af13..6a116e7c5fcb 100644
--- a/drivers/video/fbdev/riva/fbdev.c
+++ b/drivers/video/fbdev/riva/fbdev.c
@@ -30,9 +30,11 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/s3fb.c b/drivers/video/fbdev/s3fb.c
index 07722a5ea8ef..c096f52aa632 100644
--- a/drivers/video/fbdev/s3fb.c
+++ b/drivers/video/fbdev/s3fb.c
@@ -12,6 +12,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/drivers/video/fbdev/savage/savagefb_driver.c b/drivers/video/fbdev/savage/savagefb_driver.c
index ebc9aeffdde7..aa9611410090 100644
--- a/drivers/video/fbdev/savage/savagefb_driver.c
+++ b/drivers/video/fbdev/savage/savagefb_driver.c
@@ -45,6 +45,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/sh_mobile_lcdcfb.c b/drivers/video/fbdev/sh_mobile_lcdcfb.c
index eb2297b37504..5ca11d8fe448 100644
--- a/drivers/video/fbdev/sh_mobile_lcdcfb.c
+++ b/drivers/video/fbdev/sh_mobile_lcdcfb.c
@@ -11,6 +11,7 @@
 #include <linux/atomic.h>
 #include <linux/backlight.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/console.h>
 #include <linux/ctype.h>
 #include <linux/dma-mapping.h>
@@ -20,11 +21,13 @@
 #include <linux/interrupt.h>
 #include <linux/ioctl.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/videodev2.h>
 #include <linux/vmalloc.h>
 
diff --git a/drivers/video/fbdev/sis/sis_main.c b/drivers/video/fbdev/sis/sis_main.c
index 009bf1d92644..935b98777e6b 100644
--- a/drivers/video/fbdev/sis/sis_main.c
+++ b/drivers/video/fbdev/sis/sis_main.c
@@ -20,11 +20,13 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
 #include <linux/spinlock.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/sm501fb.c b/drivers/video/fbdev/sm501fb.c
index d6fdc1737cd2..1be75c95e846 100644
--- a/drivers/video/fbdev/sm501fb.c
+++ b/drivers/video/fbdev/sm501fb.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/tty.h>
diff --git a/drivers/video/fbdev/sm712fb.c b/drivers/video/fbdev/sm712fb.c
index 104f122e0f27..dba09f9f8569 100644
--- a/drivers/video/fbdev/sm712fb.c
+++ b/drivers/video/fbdev/sm712fb.c
@@ -24,6 +24,7 @@
 #include <linux/pci.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
 #include <linux/console.h>
diff --git a/drivers/video/fbdev/ssd1307fb.c b/drivers/video/fbdev/ssd1307fb.c
index 1a4f90ea7d5a..c8a4d358dc78 100644
--- a/drivers/video/fbdev/ssd1307fb.c
+++ b/drivers/video/fbdev/ssd1307fb.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/property.h>
 #include <linux/pwm.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/regulator/consumer.h>
 
diff --git a/drivers/video/fbdev/sstfb.c b/drivers/video/fbdev/sstfb.c
index f8ae54ca0cc3..e15667787aec 100644
--- a/drivers/video/fbdev/sstfb.c
+++ b/drivers/video/fbdev/sstfb.c
@@ -81,6 +81,8 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
diff --git a/drivers/video/fbdev/stifb.c b/drivers/video/fbdev/stifb.c
index 8e5bac27542d..93eec0571656 100644
--- a/drivers/video/fbdev/stifb.c
+++ b/drivers/video/fbdev/stifb.c
@@ -57,6 +57,8 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/tdfxfb.c b/drivers/video/fbdev/tdfxfb.c
index 51ebe78359ec..1c31360e1ce1 100644
--- a/drivers/video/fbdev/tdfxfb.c
+++ b/drivers/video/fbdev/tdfxfb.c
@@ -65,6 +65,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/drivers/video/fbdev/tridentfb.c b/drivers/video/fbdev/tridentfb.c
index 516cf2a18757..b441823ae063 100644
--- a/drivers/video/fbdev/tridentfb.c
+++ b/drivers/video/fbdev/tridentfb.c
@@ -17,6 +17,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/fb.h>
 #include <linux/init.h>
diff --git a/drivers/video/fbdev/uvesafb.c b/drivers/video/fbdev/uvesafb.c
index e1f421e91b4f..cd402fe957ad 100644
--- a/drivers/video/fbdev/uvesafb.c
+++ b/drivers/video/fbdev/uvesafb.c
@@ -10,9 +10,11 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/completion.h>
 #include <linux/connector.h>
diff --git a/drivers/video/fbdev/valkyriefb.c b/drivers/video/fbdev/valkyriefb.c
index 91d070ef6989..1e6ac3443c17 100644
--- a/drivers/video/fbdev/valkyriefb.c
+++ b/drivers/video/fbdev/valkyriefb.c
@@ -42,6 +42,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/vesafb.c b/drivers/video/fbdev/vesafb.c
index 8ab64ae4cad3..630f3000de83 100644
--- a/drivers/video/fbdev/vesafb.c
+++ b/drivers/video/fbdev/vesafb.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/aperture.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/errno.h>
diff --git a/drivers/video/fbdev/via/via-core.c b/drivers/video/fbdev/via/via-core.c
index 908524a74a38..62aade194d9b 100644
--- a/drivers/video/fbdev/via/via-core.c
+++ b/drivers/video/fbdev/via/via-core.c
@@ -9,6 +9,7 @@
  * Core code for the Via multifunction framebuffer device.
  */
 #include <linux/aperture.h>
+#include <linux/completion.h>
 #include <linux/via-core.h>
 #include <linux/via_i2c.h>
 #include "via-gpio.h"
diff --git a/drivers/video/fbdev/via/via_i2c.c b/drivers/video/fbdev/via/via_i2c.c
index 582502810575..8321845875b7 100644
--- a/drivers/video/fbdev/via/via_i2c.c
+++ b/drivers/video/fbdev/via/via_i2c.c
@@ -9,6 +9,7 @@
 #include <linux/delay.h>
 #include <linux/spinlock.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/via-core.h>
 #include <linux/via_i2c.h>
 
diff --git a/drivers/video/fbdev/via/viafbdev.c b/drivers/video/fbdev/via/viafbdev.c
index a52b1ba43a48..1b9ba802cb38 100644
--- a/drivers/video/fbdev/via/viafbdev.c
+++ b/drivers/video/fbdev/via/viafbdev.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/compiler.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
diff --git a/drivers/video/fbdev/wm8505fb.c b/drivers/video/fbdev/wm8505fb.c
index 00952e9c8802..66997ab8f123 100644
--- a/drivers/video/fbdev/wm8505fb.c
+++ b/drivers/video/fbdev/wm8505fb.c
@@ -15,6 +15,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/memblock.h>
 #include <linux/mm.h>
 #include <linux/module.h>
@@ -22,6 +23,7 @@
 #include <linux/of_fdt.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/wait.h>
 #include <video/of_display_timing.h>
diff --git a/drivers/video/of_videomode.c b/drivers/video/of_videomode.c
index e7d10ffd3b66..5ca1d3532652 100644
--- a/drivers/video/of_videomode.c
+++ b/drivers/video/of_videomode.c
@@ -7,6 +7,7 @@
 #include <linux/errno.h>
 #include <linux/export.h>
 #include <linux/of.h>
+#include <linux/printk.h>
 #include <video/display_timing.h>
 #include <video/of_display_timing.h>
 #include <video/of_videomode.h>
diff --git a/drivers/video/sticore.c b/drivers/video/sticore.c
index 7115b325817f..9e17b389dc58 100644
--- a/drivers/video/sticore.c
+++ b/drivers/video/sticore.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/pci.h>
diff --git a/drivers/virt/acrn/hsm.c b/drivers/virt/acrn/hsm.c
index c24036c4e51e..65fd979adc12 100644
--- a/drivers/virt/acrn/hsm.c
+++ b/drivers/virt/acrn/hsm.c
@@ -11,6 +11,7 @@
 
 #include <linux/cpu.h>
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/slab.h>
diff --git a/drivers/virt/acrn/ioeventfd.c b/drivers/virt/acrn/ioeventfd.c
index 4e845c6ca0b5..5bf6878891f5 100644
--- a/drivers/virt/acrn/ioeventfd.c
+++ b/drivers/virt/acrn/ioeventfd.c
@@ -11,6 +11,7 @@
 
 #include <linux/eventfd.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "acrn_drv.h"
 
diff --git a/drivers/virt/coco/tsm.c b/drivers/virt/coco/tsm.c
index d1c2db83a8ca..5c2cbb21a8b4 100644
--- a/drivers/virt/coco/tsm.c
+++ b/drivers/virt/coco/tsm.c
@@ -5,9 +5,11 @@
 
 #include <linux/tsm.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/rwsem.h>
 #include <linux/string.h>
+#include <linux/sysfs.h>
 #include <linux/module.h>
 #include <linux/cleanup.h>
 #include <linux/configfs.h>
diff --git a/drivers/virt/vboxguest/vboxguest_core.c b/drivers/virt/vboxguest/vboxguest_core.c
index c6e9855998ab..40f9fa657e80 100644
--- a/drivers/virt/vboxguest/vboxguest_core.c
+++ b/drivers/virt/vboxguest/vboxguest_core.c
@@ -11,6 +11,7 @@
 #include <linux/sched.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vbox_err.h>
 #include <linux/vbox_utils.h>
 #include <linux/vmalloc.h>
diff --git a/drivers/virt/vboxguest/vboxguest_linux.c b/drivers/virt/vboxguest/vboxguest_linux.c
index 8c92ea5b7305..a7e3985af9bf 100644
--- a/drivers/virt/vboxguest/vboxguest_linux.c
+++ b/drivers/virt/vboxguest/vboxguest_linux.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/poll.h>
+#include <linux/sprintf.h>
 #include <linux/vbox_utils.h>
 #include "vboxguest_core.h"
 
diff --git a/drivers/virtio/virtio.c b/drivers/virtio/virtio.c
index f4080692b351..175672277309 100644
--- a/drivers/virtio/virtio.c
+++ b/drivers/virtio/virtio.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/virtio.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/virtio_config.h>
 #include <linux/virtio_anchor.h>
 #include <linux/module.h>
diff --git a/drivers/virtio/virtio_balloon.c b/drivers/virtio/virtio_balloon.c
index 1f5b3dd31fcf..e538c6683f5d 100644
--- a/drivers/virtio/virtio_balloon.c
+++ b/drivers/virtio/virtio_balloon.c
@@ -11,6 +11,7 @@
 #include <linux/swap.h>
 #include <linux/workqueue.h>
 #include <linux/delay.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/balloon_compaction.h>
diff --git a/drivers/virtio/virtio_input.c b/drivers/virtio/virtio_input.c
index 3aa46703872d..9b122d6daaba 100644
--- a/drivers/virtio/virtio_input.c
+++ b/drivers/virtio/virtio_input.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_config.h>
 #include <linux/input.h>
diff --git a/drivers/virtio/virtio_mmio.c b/drivers/virtio/virtio_mmio.c
index 59892a31cf76..6f2ebf63d619 100644
--- a/drivers/virtio/virtio_mmio.c
+++ b/drivers/virtio/virtio_mmio.c
@@ -59,6 +59,7 @@
 #include <linux/highmem.h>
 #include <linux/interrupt.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for memparse()
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/of.h>
@@ -66,6 +67,7 @@
 #include <linux/pm.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_config.h>
 #include <uapi/linux/virtio_mmio.h>
diff --git a/drivers/virtio/virtio_pci_common.c b/drivers/virtio/virtio_pci_common.c
index b655fccaf773..d7d868aa59cc 100644
--- a/drivers/virtio/virtio_pci_common.c
+++ b/drivers/virtio/virtio_pci_common.c
@@ -15,6 +15,7 @@
  */
 
 #include "virtio_pci_common.h"
+#include <linux/sprintf.h>
 
 static bool force_legacy = false;
 
diff --git a/drivers/virtio/virtio_pci_modern.c b/drivers/virtio/virtio_pci_modern.c
index f62b530aa3b5..bbca3bb983fd 100644
--- a/drivers/virtio/virtio_pci_modern.c
+++ b/drivers/virtio/virtio_pci_modern.c
@@ -15,6 +15,7 @@
  */
 
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #define VIRTIO_PCI_NO_LEGACY
 #define VIRTIO_RING_NO_LEGACY
 #include "virtio_pci_common.h"
diff --git a/drivers/w1/slaves/w1_ds2405.c b/drivers/w1/slaves/w1_ds2405.c
index 1d9a1183e83f..9c194c1c4a56 100644
--- a/drivers/w1/slaves/w1_ds2405.c
+++ b/drivers/w1/slaves/w1_ds2405.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 
diff --git a/drivers/w1/slaves/w1_ds2423.c b/drivers/w1/slaves/w1_ds2423.c
index b6bd18d5b3f6..afa1f66b79ad 100644
--- a/drivers/w1/slaves/w1_ds2423.c
+++ b/drivers/w1/slaves/w1_ds2423.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/crc16.h>
diff --git a/drivers/w1/slaves/w1_ds2438.c b/drivers/w1/slaves/w1_ds2438.c
index e008c27b3db9..96cb9a8b728e 100644
--- a/drivers/w1/slaves/w1_ds2438.c
+++ b/drivers/w1/slaves/w1_ds2438.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 
diff --git a/drivers/w1/slaves/w1_ds250x.c b/drivers/w1/slaves/w1_ds250x.c
index cb426f7dd23d..4de56bcdb654 100644
--- a/drivers/w1/slaves/w1_ds250x.c
+++ b/drivers/w1/slaves/w1_ds250x.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
diff --git a/drivers/w1/slaves/w1_ds28e04.c b/drivers/w1/slaves/w1_ds28e04.c
index 2854b8b9e93f..0958caa1d81d 100644
--- a/drivers/w1/slaves/w1_ds28e04.c
+++ b/drivers/w1/slaves/w1_ds28e04.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/device.h>
diff --git a/drivers/w1/slaves/w1_ds28e17.c b/drivers/w1/slaves/w1_ds28e17.c
index 52261b54d842..384e9f2203ab 100644
--- a/drivers/w1/slaves/w1_ds28e17.c
+++ b/drivers/w1/slaves/w1_ds28e17.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uaccess.h>
 
diff --git a/drivers/w1/slaves/w1_therm.c b/drivers/w1/slaves/w1_therm.c
index c85e80c7e130..9ca71359169b 100644
--- a/drivers/w1/slaves/w1_therm.c
+++ b/drivers/w1/slaves/w1_therm.c
@@ -6,6 +6,8 @@
  */
 
 #include <asm/types.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/kernel.h>
 #include <linux/module.h>
diff --git a/drivers/w1/w1.c b/drivers/w1/w1.c
index afb1cc4606c5..34e67a3e7c71 100644
--- a/drivers/w1/w1.c
+++ b/drivers/w1/w1.c
@@ -5,11 +5,13 @@
 
 #include <linux/delay.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/list.h>
 #include <linux/interrupt.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/timer.h>
 #include <linux/device.h>
 #include <linux/slab.h>
diff --git a/drivers/w1/w1_int.c b/drivers/w1/w1_int.c
index 3a71c5eb2f83..8b8ba8074735 100644
--- a/drivers/w1/w1_int.c
+++ b/drivers/w1/w1_int.c
@@ -11,6 +11,7 @@
 #include <linux/sched/signal.h>
 #include <linux/export.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 
 #include "w1_internal.h"
 #include "w1_netlink.h"
diff --git a/drivers/watchdog/cpwd.c b/drivers/watchdog/cpwd.c
index 901b94d456db..9efad04b48b4 100644
--- a/drivers/watchdog/cpwd.c
+++ b/drivers/watchdog/cpwd.c
@@ -18,6 +18,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/fs.h>
 #include <linux/errno.h>
diff --git a/drivers/watchdog/exar_wdt.c b/drivers/watchdog/exar_wdt.c
index 7c61ff343271..fed93a338cb2 100644
--- a/drivers/watchdog/exar_wdt.c
+++ b/drivers/watchdog/exar_wdt.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/watchdog.h>
 
 #define DRV_NAME	"exar_wdt"
diff --git a/drivers/watchdog/f71808e_wdt.c b/drivers/watchdog/f71808e_wdt.c
index 6a16d3d0bb1e..bb004c3cdf45 100644
--- a/drivers/watchdog/f71808e_wdt.c
+++ b/drivers/watchdog/f71808e_wdt.c
@@ -14,6 +14,7 @@
 #include <linux/ioport.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/watchdog.h>
 
 #define DRVNAME "f71808e_wdt"
diff --git a/drivers/watchdog/mei_wdt.c b/drivers/watchdog/mei_wdt.c
index c7a7235e6224..838ce9098ffa 100644
--- a/drivers/watchdog/mei_wdt.c
+++ b/drivers/watchdog/mei_wdt.c
@@ -9,6 +9,7 @@
 #include <linux/interrupt.h>
 #include <linux/debugfs.h>
 #include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/watchdog.h>
 
 #include <linux/uuid.h>
diff --git a/drivers/watchdog/pcwd.c b/drivers/watchdog/pcwd.c
index a793b03a785d..b6fb19432723 100644
--- a/drivers/watchdog/pcwd.c
+++ b/drivers/watchdog/pcwd.c
@@ -56,6 +56,7 @@
 
 #include <linux/module.h>	/* For module specific items */
 #include <linux/moduleparam.h>	/* For new moduleparam's */
+#include <linux/sprintf.h>
 #include <linux/types.h>	/* For standard types (like size_t) */
 #include <linux/errno.h>	/* For the -ENODEV/... values */
 #include <linux/kernel.h>	/* For printk/panic/... */
diff --git a/drivers/watchdog/pcwd_pci.c b/drivers/watchdog/pcwd_pci.c
index 54d86fcb1837..85300f55ff08 100644
--- a/drivers/watchdog/pcwd_pci.c
+++ b/drivers/watchdog/pcwd_pci.c
@@ -32,6 +32,7 @@
 
 #include <linux/module.h>	/* For module specific items */
 #include <linux/moduleparam.h>	/* For new moduleparam's */
+#include <linux/sprintf.h>
 #include <linux/types.h>	/* For standard types (like size_t) */
 #include <linux/errno.h>	/* For the -ENODEV/... values */
 #include <linux/kernel.h>	/* For printk/panic/... */
diff --git a/drivers/watchdog/pcwd_usb.c b/drivers/watchdog/pcwd_usb.c
index 8202f0a6b093..6e6a6cbebff0 100644
--- a/drivers/watchdog/pcwd_usb.c
+++ b/drivers/watchdog/pcwd_usb.c
@@ -24,6 +24,7 @@
 
 #include <linux/module.h>	/* For module specific items */
 #include <linux/moduleparam.h>	/* For new moduleparam's */
+#include <linux/sprintf.h>
 #include <linux/types.h>	/* For standard types (like size_t) */
 #include <linux/errno.h>	/* For the -ENODEV/... values */
 #include <linux/kernel.h>	/* For printk/panic/... */
diff --git a/drivers/xen/cpu_hotplug.c b/drivers/xen/cpu_hotplug.c
index b96b11e2b571..979ae3c63e90 100644
--- a/drivers/xen/cpu_hotplug.c
+++ b/drivers/xen/cpu_hotplug.c
@@ -2,6 +2,7 @@
 #define pr_fmt(fmt) "xen:" KBUILD_MODNAME ": " fmt
 
 #include <linux/notifier.h>
+#include <linux/sprintf.h>
 
 #include <xen/xen.h>
 #include <xen/xenbus.h>
diff --git a/drivers/xen/evtchn.c b/drivers/xen/evtchn.c
index 59717628ca42..8bf5ab3e2b21 100644
--- a/drivers/xen/evtchn.c
+++ b/drivers/xen/evtchn.c
@@ -37,6 +37,7 @@
 #include <linux/kernel.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/errno.h>
 #include <linux/fs.h>
diff --git a/drivers/xen/gntdev-dmabuf.c b/drivers/xen/gntdev-dmabuf.c
index 42adc2c1e06b..ee0996f1d4c8 100644
--- a/drivers/xen/gntdev-dmabuf.c
+++ b/drivers/xen/gntdev-dmabuf.c
@@ -16,6 +16,7 @@
 #include <linux/types.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <xen/xen.h>
 #include <xen/grant_table.h>
diff --git a/drivers/xen/grant-table.c b/drivers/xen/grant-table.c
index 04a6b470b15d..41bc68edf68f 100644
--- a/drivers/xen/grant-table.c
+++ b/drivers/xen/grant-table.c
@@ -34,6 +34,7 @@
 #define pr_fmt(fmt) "xen:" KBUILD_MODNAME ": " fmt
 
 #include <linux/bitmap.h>
+#include <linux/completion.h>
 #include <linux/memblock.h>
 #include <linux/sched.h>
 #include <linux/mm.h>
diff --git a/drivers/xen/manage.c b/drivers/xen/manage.c
index c16df629907e..25b371839ba5 100644
--- a/drivers/xen/manage.c
+++ b/drivers/xen/manage.c
@@ -9,6 +9,7 @@
 #include <linux/err.h>
 #include <linux/slab.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 #include <linux/sysrq.h>
 #include <linux/stop_machine.h>
 #include <linux/freezer.h>
diff --git a/drivers/xen/pcpu.c b/drivers/xen/pcpu.c
index 508655273145..3f2f418fbf9d 100644
--- a/drivers/xen/pcpu.c
+++ b/drivers/xen/pcpu.c
@@ -34,8 +34,10 @@
 #define pr_fmt(fmt) "xen_cpu: " fmt
 
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
 #include <linux/cpu.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/capability.h>
 
diff --git a/drivers/xen/sys-hypervisor.c b/drivers/xen/sys-hypervisor.c
index 2f880374b463..1a2b5950375e 100644
--- a/drivers/xen/sys-hypervisor.c
+++ b/drivers/xen/sys-hypervisor.c
@@ -9,6 +9,8 @@
 #include <linux/init.h>
 #include <linux/kobject.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <asm/xen/hypervisor.h>
 #include <asm/xen/hypercall.h>
diff --git a/drivers/xen/xen-balloon.c b/drivers/xen/xen-balloon.c
index 8cd583db20b1..fcfd04d4a47a 100644
--- a/drivers/xen/xen-balloon.c
+++ b/drivers/xen/xen-balloon.c
@@ -34,10 +34,12 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/mm_types.h>
 #include <linux/init.h>
 #include <linux/capability.h>
 #include <linux/memory_hotplug.h>
+#include <linux/sprintf.h>
 
 #include <xen/xen.h>
 #include <xen/interface/xen.h>
diff --git a/drivers/xen/xen-pciback/pci_stub.c b/drivers/xen/xen-pciback/pci_stub.c
index e34b623e4b41..23d46b463715 100644
--- a/drivers/xen/xen-pciback/pci_stub.c
+++ b/drivers/xen/xen-pciback/pci_stub.c
@@ -15,6 +15,7 @@
 #include <linux/spinlock.h>
 #include <linux/kref.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/sched.h>
 #include <linux/atomic.h>
diff --git a/drivers/xen/xen-pciback/xenbus.c b/drivers/xen/xen-pciback/xenbus.c
index b11e401f1b1e..d746560ea881 100644
--- a/drivers/xen/xen-pciback/xenbus.c
+++ b/drivers/xen/xen-pciback/xenbus.c
@@ -10,6 +10,7 @@
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/workqueue.h>
 #include <xen/xenbus.h>
diff --git a/drivers/xen/xen-scsiback.c b/drivers/xen/xen-scsiback.c
index 0c51edfd13dc..f3c57d46a3c2 100644
--- a/drivers/xen/xen-scsiback.c
+++ b/drivers/xen/xen-scsiback.c
@@ -34,8 +34,10 @@
 #define pr_fmt(fmt) "xen-pvscsi: " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/wait.h>
 #include <linux/sched.h>
@@ -44,6 +46,7 @@
 #include <linux/delay.h>
 #include <linux/spinlock.h>
 #include <linux/configfs.h>
+#include <linux/completion.h>
 
 #include <generated/utsrelease.h>
 
diff --git a/drivers/xen/xenbus/xenbus_client.c b/drivers/xen/xenbus/xenbus_client.c
index 32835b4b9bc5..12ef170040ec 100644
--- a/drivers/xen/xenbus/xenbus_client.c
+++ b/drivers/xen/xenbus/xenbus_client.c
@@ -32,11 +32,13 @@
 
 #include <linux/mm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/spinlock.h>
 #include <linux/vmalloc.h>
 #include <linux/export.h>
 #include <asm/xen/hypervisor.h>
+#include <linux/completion.h>
 #include <xen/page.h>
 #include <xen/interface/xen.h>
 #include <xen/interface/event_channel.h>
diff --git a/drivers/xen/xenbus/xenbus_dev_frontend.c b/drivers/xen/xenbus/xenbus_dev_frontend.c
index 6f56640092a9..d95a484dc006 100644
--- a/drivers/xen/xenbus/xenbus_dev_frontend.c
+++ b/drivers/xen/xenbus/xenbus_dev_frontend.c
@@ -39,6 +39,7 @@
 
 #include <linux/kernel.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/uio.h>
 #include <linux/notifier.h>
 #include <linux/wait.h>
diff --git a/drivers/xen/xenbus/xenbus_probe.c b/drivers/xen/xenbus/xenbus_probe.c
index 3205e5d724c8..d29f86b85fb9 100644
--- a/drivers/xen/xenbus/xenbus_probe.c
+++ b/drivers/xen/xenbus/xenbus_probe.c
@@ -39,6 +39,8 @@
 
 #include <linux/kernel.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/fcntl.h>
@@ -50,6 +52,7 @@
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <asm/page.h>
 #include <asm/xen/hypervisor.h>
diff --git a/drivers/xen/xenbus/xenbus_probe_backend.c b/drivers/xen/xenbus/xenbus_probe_backend.c
index 5ebb7233076f..f996ba5d3368 100644
--- a/drivers/xen/xenbus/xenbus_probe_backend.c
+++ b/drivers/xen/xenbus/xenbus_probe_backend.c
@@ -39,6 +39,7 @@
 
 #include <linux/kernel.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/fcntl.h>
@@ -46,6 +47,7 @@
 #include <linux/notifier.h>
 #include <linux/export.h>
 #include <linux/semaphore.h>
+#include <linux/shrinker.h>
 
 #include <asm/page.h>
 #include <asm/xen/hypervisor.h>
diff --git a/drivers/xen/xenbus/xenbus_probe_frontend.c b/drivers/xen/xenbus/xenbus_probe_frontend.c
index fcb335bb7b18..120d01449bb0 100644
--- a/drivers/xen/xenbus/xenbus_probe_frontend.c
+++ b/drivers/xen/xenbus/xenbus_probe_frontend.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/fcntl.h>
@@ -17,6 +18,7 @@
 #include <linux/mutex.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <asm/page.h>
 #include <asm/xen/hypervisor.h>
diff --git a/drivers/xen/xenbus/xenbus_xs.c b/drivers/xen/xenbus/xenbus_xs.c
index 028a182bcc9e..8e97ba232390 100644
--- a/drivers/xen/xenbus/xenbus_xs.c
+++ b/drivers/xen/xenbus/xenbus_xs.c
@@ -35,6 +35,8 @@
 
 #include <linux/unistd.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uio.h>
 #include <linux/kernel.h>
diff --git a/drivers/xen/xenfs/xenstored.c b/drivers/xen/xenfs/xenstored.c
index f59235f9f8a2..23891073ba7e 100644
--- a/drivers/xen/xenfs/xenstored.c
+++ b/drivers/xen/xenfs/xenstored.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/mm.h>
 #include <linux/fs.h>
diff --git a/drivers/zorro/names.c b/drivers/zorro/names.c
index 077114ccc840..02afd815a6cc 100644
--- a/drivers/zorro/names.c
+++ b/drivers/zorro/names.c
@@ -12,6 +12,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/zorro.h>
 
diff --git a/drivers/zorro/proc.c b/drivers/zorro/proc.c
index f916bf60b312..de7c252613ec 100644
--- a/drivers/zorro/proc.c
+++ b/drivers/zorro/proc.c
@@ -15,6 +15,7 @@
 #include <linux/seq_file.h>
 #include <linux/init.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 
 #include <asm/byteorder.h>
 #include <linux/uaccess.h>
diff --git a/drivers/zorro/zorro-sysfs.c b/drivers/zorro/zorro-sysfs.c
index 3d34dba9bb2d..a957f45ffac3 100644
--- a/drivers/zorro/zorro-sysfs.c
+++ b/drivers/zorro/zorro-sysfs.c
@@ -12,6 +12,7 @@
 
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/zorro.h>
 #include <linux/stat.h>
 #include <linux/string.h>
diff --git a/drivers/zorro/zorro.c b/drivers/zorro/zorro.c
index 1b9928648583..5296dbc23bea 100644
--- a/drivers/zorro/zorro.c
+++ b/drivers/zorro/zorro.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
diff --git a/fs/9p/cache.c b/fs/9p/cache.c
index 12c0ae29f185..cd5c2c7e1810 100644
--- a/fs/9p/cache.c
+++ b/fs/9p/cache.c
@@ -8,6 +8,7 @@
 #include <linux/jiffies.h>
 #include <linux/file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/sched.h>
 #include <linux/fs.h>
diff --git a/fs/9p/v9fs.c b/fs/9p/v9fs.c
index 61dbe52bb3a3..3ea562c1bca7 100644
--- a/fs/9p/v9fs.c
+++ b/fs/9p/v9fs.c
@@ -11,11 +11,13 @@
 #include <linux/module.h>
 #include <linux/errno.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/cred.h>
 #include <linux/parser.h>
 #include <linux/slab.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <net/9p/9p.h>
 #include <net/9p/client.h>
 #include <net/9p/transport.h>
diff --git a/fs/9p/vfs_inode.c b/fs/9p/vfs_inode.c
index 360a5304ec03..c3017f739739 100644
--- a/fs/9p/vfs_inode.c
+++ b/fs/9p/vfs_inode.c
@@ -13,6 +13,7 @@
 #include <linux/fs.h>
 #include <linux/file.h>
 #include <linux/pagemap.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/string.h>
 #include <linux/namei.h>
diff --git a/fs/adfs/dir.c b/fs/adfs/dir.c
index 77fbd196008f..4f9dc276da6f 100644
--- a/fs/adfs/dir.c
+++ b/fs/adfs/dir.c
@@ -6,6 +6,7 @@
  *
  *  Common directory handling for ADFS
  */
+#include <linux/hex.h>
 #include <linux/slab.h>
 #include "adfs.h"
 
diff --git a/fs/afs/addr_prefs.c b/fs/afs/addr_prefs.c
index a189ff8a5034..a6ff15ed7d10 100644
--- a/fs/afs/addr_prefs.c
+++ b/fs/afs/addr_prefs.c
@@ -9,6 +9,7 @@
 #include <linux/slab.h>
 #include <linux/ctype.h>
 #include <linux/inet.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <keys/rxrpc-type.h>
 #include "internal.h"
diff --git a/fs/afs/dir_silly.c b/fs/afs/dir_silly.c
index a1e581946b93..13d86428e9da 100644
--- a/fs/afs/dir_silly.c
+++ b/fs/afs/dir_silly.c
@@ -11,6 +11,7 @@
 #include <linux/namei.h>
 #include <linux/fsnotify.h>
 #include "internal.h"
+#include <linux/sprintf.h>
 
 static void afs_silly_rename_success(struct afs_operation *op)
 {
diff --git a/fs/afs/proc.c b/fs/afs/proc.c
index 15eab053af6d..0132bff37915 100644
--- a/fs/afs/proc.c
+++ b/fs/afs/proc.c
@@ -10,6 +10,7 @@
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include "internal.h"
 
diff --git a/fs/afs/super.c b/fs/afs/super.c
index f3ba1c3e72f5..dd67b81d7f38 100644
--- a/fs/afs/super.c
+++ b/fs/afs/super.c
@@ -22,6 +22,7 @@
 #include <linux/fs.h>
 #include <linux/pagemap.h>
 #include <linux/fs_parser.h>
+#include <linux/sprintf.h>
 #include <linux/statfs.h>
 #include <linux/sched.h>
 #include <linux/nsproxy.h>
diff --git a/fs/afs/volume.c b/fs/afs/volume.c
index 020ecd45e476..290a00416e2d 100644
--- a/fs/afs/volume.c
+++ b/fs/afs/volume.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/slab.h>
 #include "internal.h"
+#include <linux/sprintf.h>
 
 static unsigned __read_mostly afs_volume_record_life = 60 * 60;
 
diff --git a/fs/afs/xattr.c b/fs/afs/xattr.c
index e19f396aa370..8fa5c7505e71 100644
--- a/fs/afs/xattr.c
+++ b/fs/afs/xattr.c
@@ -8,6 +8,7 @@
 
 #include <linux/slab.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include "internal.h"
 
diff --git a/fs/aio.c b/fs/aio.c
index bb2ff48991f3..6efc0d369711 100644
--- a/fs/aio.c
+++ b/fs/aio.c
@@ -16,6 +16,7 @@
 #include <linux/errno.h>
 #include <linux/time.h>
 #include <linux/aio_abi.h>
+#include <linux/completion.h>
 #include <linux/export.h>
 #include <linux/syscalls.h>
 #include <linux/backing-dev.h>
@@ -45,6 +46,7 @@
 
 #include <linux/uaccess.h>
 #include <linux/nospec.h>
+#include <linux/hrtimer.h>
 
 #include "internal.h"
 
diff --git a/fs/autofs/expire.c b/fs/autofs/expire.c
index 39d8c84c16f4..404babf22abe 100644
--- a/fs/autofs/expire.c
+++ b/fs/autofs/expire.c
@@ -6,6 +6,7 @@
  */
 
 #include "autofs_i.h"
+#include <linux/completion.h>
 
 /* Check if a dentry can be expired */
 static inline int autofs_can_expire(struct dentry *dentry,
diff --git a/fs/autofs/waitq.c b/fs/autofs/waitq.c
index 33dd4660d82f..88e6db8ed9e3 100644
--- a/fs/autofs/waitq.c
+++ b/fs/autofs/waitq.c
@@ -6,6 +6,7 @@
 
 #include <linux/sched/signal.h>
 #include "autofs_i.h"
+#include <linux/sprintf.h>
 
 /* We make this a static variable rather than a part of the superblock; it
  * is better if we don't reassign numbers easily even across filesystems
diff --git a/fs/backing-file.c b/fs/backing-file.c
index 740185198db3..de823b6de1d7 100644
--- a/fs/backing-file.c
+++ b/fs/backing-file.c
@@ -12,6 +12,7 @@
 #include <linux/backing-file.h>
 #include <linux/splice.h>
 #include <linux/mm.h>
+#include <linux/workqueue.h>
 
 #include "internal.h"
 
diff --git a/fs/bcachefs/chardev.c b/fs/bcachefs/chardev.c
index 11711f54057e..c4cd15537db5 100644
--- a/fs/bcachefs/chardev.c
+++ b/fs/bcachefs/chardev.c
@@ -16,6 +16,7 @@
 #include <linux/cdev.h>
 #include <linux/device.h>
 #include <linux/fs.h>
+#include <linux/idr.h>
 #include <linux/ioctl.h>
 #include <linux/major.h>
 #include <linux/sched/task.h>
diff --git a/fs/bcachefs/compress.c b/fs/bcachefs/compress.c
index 1410365a8891..5aac2deae4b0 100644
--- a/fs/bcachefs/compress.c
+++ b/fs/bcachefs/compress.c
@@ -4,6 +4,7 @@
 #include "compress.h"
 #include "extents.h"
 #include "super-io.h"
+#include <linux/kstrtox.h>
 
 #include <linux/lz4.h>
 #include <linux/zlib.h>
diff --git a/fs/bcachefs/debug.c b/fs/bcachefs/debug.c
index b1f147e6be4d..3d5228c129a0 100644
--- a/fs/bcachefs/debug.c
+++ b/fs/bcachefs/debug.c
@@ -20,6 +20,7 @@
 #include "fsck.h"
 #include "inode.h"
 #include "super.h"
+#include <linux/sprintf.h>
 
 #include <linux/console.h>
 #include <linux/debugfs.h>
diff --git a/fs/bcachefs/fs-io-buffered.c b/fs/bcachefs/fs-io-buffered.c
index 73c12e565af5..f8e8ca902ff5 100644
--- a/fs/bcachefs/fs-io-buffered.c
+++ b/fs/bcachefs/fs-io-buffered.c
@@ -10,6 +10,7 @@
 #include "fs-io-pagecache.h"
 #include "io_read.h"
 #include "io_write.h"
+#include <linux/completion.h>
 
 #include <linux/backing-dev.h>
 #include <linux/pagemap.h>
diff --git a/fs/bcachefs/fs.c b/fs/bcachefs/fs.c
index 77ea61090e91..c662ef904b4e 100644
--- a/fs/bcachefs/fs.c
+++ b/fs/bcachefs/fs.c
@@ -34,6 +34,7 @@
 #include <linux/module.h>
 #include <linux/pagemap.h>
 #include <linux/posix_acl.h>
+#include <linux/quota.h>
 #include <linux/random.h>
 #include <linux/seq_file.h>
 #include <linux/statfs.h>
diff --git a/fs/bcachefs/fsck.c b/fs/bcachefs/fsck.c
index 65616af69db7..0647c6240270 100644
--- a/fs/bcachefs/fsck.c
+++ b/fs/bcachefs/fsck.c
@@ -16,6 +16,7 @@
 #include "snapshot.h"
 #include "super.h"
 #include "xattr.h"
+#include <linux/sprintf.h>
 
 #include <linux/bsearch.h>
 #include <linux/dcache.h> /* struct qstr */
diff --git a/fs/bcachefs/move.c b/fs/bcachefs/move.c
index bf68ea49447b..ab283e8d3e2f 100644
--- a/fs/bcachefs/move.c
+++ b/fs/bcachefs/move.c
@@ -25,6 +25,7 @@
 #include "snapshot.h"
 #include "super-io.h"
 #include "trace.h"
+#include <linux/sprintf.h>
 
 #include <linux/ioprio.h>
 #include <linux/kthread.h>
diff --git a/fs/bcachefs/printbuf.c b/fs/bcachefs/printbuf.c
index accf246c3233..0cd84afa0cb6 100644
--- a/fs/bcachefs/printbuf.c
+++ b/fs/bcachefs/printbuf.c
@@ -6,6 +6,7 @@
 #include <linux/export.h>
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include "printbuf.h"
diff --git a/fs/bcachefs/super-io.c b/fs/bcachefs/super-io.c
index ce8cf2d91f84..9458ece80b2a 100644
--- a/fs/bcachefs/super-io.c
+++ b/fs/bcachefs/super-io.c
@@ -22,6 +22,7 @@
 #include "vstructs.h"
 
 #include <linux/backing-dev.h>
+#include <linux/file.h> // for fput()
 #include <linux/sort.h>
 
 static const struct blk_holder_ops bch2_sb_handle_bdev_ops = {
diff --git a/fs/bcachefs/super.c b/fs/bcachefs/super.c
index 77d59772f278..b719366fe8d7 100644
--- a/fs/bcachefs/super.c
+++ b/fs/bcachefs/super.c
@@ -58,6 +58,8 @@
 #include "sysfs.h"
 #include "thread_with_file.h"
 #include "trace.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/backing-dev.h>
 #include <linux/blkdev.h>
diff --git a/fs/bcachefs/sysfs.c b/fs/bcachefs/sysfs.c
index cee80c47feea..40809ffce2cd 100644
--- a/fs/bcachefs/sysfs.c
+++ b/fs/bcachefs/sysfs.c
@@ -35,6 +35,7 @@
 #include "replicas.h"
 #include "super-io.h"
 #include "tests.h"
+#include <linux/kstrtox.h>
 
 #include <linux/blkdev.h>
 #include <linux/sort.h>
diff --git a/fs/bcachefs/tests.c b/fs/bcachefs/tests.c
index b3fe9fc57747..9874e669029c 100644
--- a/fs/bcachefs/tests.c
+++ b/fs/bcachefs/tests.c
@@ -6,6 +6,8 @@
 #include "journal_reclaim.h"
 #include "snapshot.h"
 #include "tests.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "linux/kthread.h"
 #include "linux/random.h"
diff --git a/fs/bcachefs/thread_with_file.c b/fs/bcachefs/thread_with_file.c
index dde9679b68b4..88db133d401e 100644
--- a/fs/bcachefs/thread_with_file.c
+++ b/fs/bcachefs/thread_with_file.c
@@ -3,6 +3,7 @@
 
 #include "bcachefs.h"
 #include "thread_with_file.h"
+#include <linux/sprintf.h>
 
 #include <linux/anon_inodes.h>
 #include <linux/file.h>
diff --git a/fs/bcachefs/trace.h b/fs/bcachefs/trace.h
index 293b90d704fb..51d9cdf4b7fa 100644
--- a/fs/bcachefs/trace.h
+++ b/fs/bcachefs/trace.h
@@ -6,6 +6,7 @@
 #define _TRACE_BCACHEFS_H
 
 #include <linux/tracepoint.h>
+#include <linux/sprintf.h>
 
 #define TRACE_BPOS_entries(name)				\
 	__field(u64,			name##_inode	)	\
diff --git a/fs/bcachefs/util.c b/fs/bcachefs/util.c
index 83088fad053d..1570d48e7611 100644
--- a/fs/bcachefs/util.c
+++ b/fs/bcachefs/util.c
@@ -20,6 +20,7 @@
 #include <linux/preempt.h>
 #include <linux/random.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/sched/clock.h>
diff --git a/fs/bcachefs/util.h b/fs/bcachefs/util.h
index c4cd32a2aeb2..676524930eaa 100644
--- a/fs/bcachefs/util.h
+++ b/fs/bcachefs/util.h
@@ -8,6 +8,7 @@
 #include <linux/errno.h>
 #include <linux/freezer.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/clock.h>
 #include <linux/llist.h>
 #include <linux/log2.h>
@@ -15,6 +16,7 @@
 #include <linux/preempt.h>
 #include <linux/ratelimit.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time_stats.h>
 #include <linux/vmalloc.h>
 #include <linux/workqueue.h>
diff --git a/fs/binfmt_misc.c b/fs/binfmt_misc.c
index 68fa225f89e5..0ca146be3e36 100644
--- a/fs/binfmt_misc.c
+++ b/fs/binfmt_misc.c
@@ -11,13 +11,16 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/sched/mm.h>
 #include <linux/magic.h>
 #include <linux/binfmts.h>
+#include <linux/hex.h>
 #include <linux/slab.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/file.h>
 #include <linux/pagemap.h>
diff --git a/fs/btrfs/compression.c b/fs/btrfs/compression.c
index 781654b74307..1b83b1e71320 100644
--- a/fs/btrfs/compression.c
+++ b/fs/btrfs/compression.c
@@ -7,6 +7,7 @@
 #include <linux/bio.h>
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/pagevec.h>
 #include <linux/highmem.h>
diff --git a/fs/btrfs/dev-replace.c b/fs/btrfs/dev-replace.c
index 7057221a46c3..70f5cc9f9edb 100644
--- a/fs/btrfs/dev-replace.c
+++ b/fs/btrfs/dev-replace.c
@@ -5,6 +5,7 @@
 
 #include <linux/sched.h>
 #include <linux/bio.h>
+#include <linux/file.h> // for fput()
 #include <linux/slab.h>
 #include <linux/blkdev.h>
 #include <linux/kthread.h>
diff --git a/fs/btrfs/disk-io.c b/fs/btrfs/disk-io.c
index ca70b1301341..18aa34c997fd 100644
--- a/fs/btrfs/disk-io.c
+++ b/fs/btrfs/disk-io.c
@@ -5,6 +5,7 @@
 
 #include <linux/fs.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/radix-tree.h>
 #include <linux/writeback.h>
 #include <linux/workqueue.h>
diff --git a/fs/btrfs/inode.c b/fs/btrfs/inode.c
index 1cb359334a2e..815945555c1e 100644
--- a/fs/btrfs/inode.c
+++ b/fs/btrfs/inode.c
@@ -4,6 +4,7 @@
  */
 
 #include <crypto/hash.h>
+#include <linux/completion.h>
 #include <linux/kernel.h>
 #include <linux/bio.h>
 #include <linux/blk-cgroup.h>
diff --git a/fs/btrfs/ioctl.c b/fs/btrfs/ioctl.c
index 737c1268ced0..51d522cedb6f 100644
--- a/fs/btrfs/ioctl.c
+++ b/fs/btrfs/ioctl.c
@@ -8,6 +8,7 @@
 #include <linux/file.h>
 #include <linux/fs.h>
 #include <linux/fsnotify.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/highmem.h>
 #include <linux/time.h>
diff --git a/fs/btrfs/ordered-data.c b/fs/btrfs/ordered-data.c
index de12c282e69b..0455873a3367 100644
--- a/fs/btrfs/ordered-data.c
+++ b/fs/btrfs/ordered-data.c
@@ -5,6 +5,7 @@
 
 #include <linux/slab.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/writeback.h>
 #include <linux/sched/mm.h>
 #include "messages.h"
diff --git a/fs/btrfs/print-tree.c b/fs/btrfs/print-tree.c
index 7e46aa8a0444..fb5414c1ad97 100644
--- a/fs/btrfs/print-tree.c
+++ b/fs/btrfs/print-tree.c
@@ -11,6 +11,7 @@
 #include "tree-checker.h"
 #include "volumes.h"
 #include "raid-stripe-tree.h"
+#include <linux/sprintf.h>
 
 struct root_name_map {
 	u64 id;
diff --git a/fs/btrfs/qgroup.c b/fs/btrfs/qgroup.c
index 5470e1cdf10c..23152c977767 100644
--- a/fs/btrfs/qgroup.c
+++ b/fs/btrfs/qgroup.c
@@ -7,10 +7,12 @@
 #include <linux/pagemap.h>
 #include <linux/writeback.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/rbtree.h>
 #include <linux/slab.h>
 #include <linux/workqueue.h>
 #include <linux/btrfs.h>
+#include <linux/ratelimit.h>
 #include <linux/sched/mm.h>
 
 #include "ctree.h"
diff --git a/fs/btrfs/scrub.c b/fs/btrfs/scrub.c
index 0123d2728923..584132bfaca0 100644
--- a/fs/btrfs/scrub.c
+++ b/fs/btrfs/scrub.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/ratelimit.h>
 #include <linux/sched/mm.h>
 #include <crypto/hash.h>
diff --git a/fs/btrfs/send.c b/fs/btrfs/send.c
index f61ff0187fa3..187761f3a75f 100644
--- a/fs/btrfs/send.c
+++ b/fs/btrfs/send.c
@@ -8,10 +8,12 @@
 #include <linux/file.h>
 #include <linux/sort.h>
 #include <linux/mount.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include <linux/posix_acl_xattr.h>
 #include <linux/radix-tree.h>
 #include <linux/vmalloc.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/compat.h>
 #include <linux/crc32c.h>
diff --git a/fs/btrfs/super.c b/fs/btrfs/super.c
index 40ae264fd3ed..230366e3be55 100644
--- a/fs/btrfs/super.c
+++ b/fs/btrfs/super.c
@@ -8,9 +8,12 @@
 #include <linux/fs.h>
 #include <linux/pagemap.h>
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for memparse()
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/init.h>
 #include <linux/seq_file.h>
+#include <linux/shrinker.h>
 #include <linux/string.h>
 #include <linux/backing-dev.h>
 #include <linux/mount.h>
diff --git a/fs/btrfs/sysfs.c b/fs/btrfs/sysfs.c
index 7248b966bf24..7559b0032eb2 100644
--- a/fs/btrfs/sysfs.c
+++ b/fs/btrfs/sysfs.c
@@ -7,8 +7,12 @@
 #include <linux/sched/mm.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <linux/completion.h>
 #include <linux/bug.h>
+#include <linux/kernel.h> // for memparse()
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <crypto/hash.h>
 #include "messages.h"
diff --git a/fs/btrfs/tests/extent-io-tests.c b/fs/btrfs/tests/extent-io-tests.c
index 865d4af4b303..8b9e8a6103d3 100644
--- a/fs/btrfs/tests/extent-io-tests.c
+++ b/fs/btrfs/tests/extent-io-tests.c
@@ -5,9 +5,11 @@
 
 #include <linux/pagemap.h>
 #include <linux/pagevec.h>
+#include <linux/random.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include "btrfs-tests.h"
 #include "../ctree.h"
 #include "../extent_io.h"
diff --git a/fs/btrfs/transaction.c b/fs/btrfs/transaction.c
index 70d7abd1f772..010c1022b0fe 100644
--- a/fs/btrfs/transaction.c
+++ b/fs/btrfs/transaction.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/fs.h>
+#include <linux/radix-tree.h>
 #include <linux/slab.h>
 #include <linux/sched.h>
 #include <linux/sched/mm.h>
diff --git a/fs/btrfs/volumes.c b/fs/btrfs/volumes.c
index 57c49883e45e..e8755b379894 100644
--- a/fs/btrfs/volumes.c
+++ b/fs/btrfs/volumes.c
@@ -9,9 +9,11 @@
 #include <linux/ratelimit.h>
 #include <linux/kthread.h>
 #include <linux/semaphore.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include <linux/list_sort.h>
 #include <linux/namei.h>
+#include <linux/file.h> // for fput()
 #include "misc.h"
 #include "ctree.h"
 #include "disk-io.h"
diff --git a/fs/buffer.c b/fs/buffer.c
index b55dea034a5d..f32a7da32c7b 100644
--- a/fs/buffer.c
+++ b/fs/buffer.c
@@ -50,6 +50,7 @@
 #include <linux/fscrypt.h>
 #include <linux/fsverity.h>
 #include <linux/sched/isolation.h>
+#include <linux/ratelimit.h>
 
 #include "internal.h"
 
diff --git a/fs/cachefiles/daemon.c b/fs/cachefiles/daemon.c
index 3f24905f4066..e109db5b6236 100644
--- a/fs/cachefiles/daemon.c
+++ b/fs/cachefiles/daemon.c
@@ -7,6 +7,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/completion.h>
 #include <linux/slab.h>
@@ -15,6 +16,7 @@
 #include <linux/namei.h>
 #include <linux/poll.h>
 #include <linux/mount.h>
+#include <linux/sprintf.h>
 #include <linux/statfs.h>
 #include <linux/ctype.h>
 #include <linux/string.h>
diff --git a/fs/cachefiles/key.c b/fs/cachefiles/key.c
index bf935e25bdbe..e15a50eb7133 100644
--- a/fs/cachefiles/key.c
+++ b/fs/cachefiles/key.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include "internal.h"
 
 static const char cachefiles_charmap[64] =
diff --git a/fs/cachefiles/namei.c b/fs/cachefiles/namei.c
index 7ade836beb58..56702e45bf27 100644
--- a/fs/cachefiles/namei.c
+++ b/fs/cachefiles/namei.c
@@ -7,6 +7,7 @@
 
 #include <linux/fs.h>
 #include <linux/namei.h>
+#include <linux/sprintf.h>
 #include "internal.h"
 
 /*
diff --git a/fs/cachefiles/ondemand.c b/fs/cachefiles/ondemand.c
index 4ba42f1fa3b4..09a7f511af05 100644
--- a/fs/cachefiles/ondemand.c
+++ b/fs/cachefiles/ondemand.c
@@ -1,6 +1,8 @@
 // SPDX-License-Identifier: GPL-2.0-or-later
 #include <linux/fdtable.h>
 #include <linux/anon_inodes.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/uio.h>
 #include "internal.h"
 
diff --git a/fs/cachefiles/volume.c b/fs/cachefiles/volume.c
index 89df0ba8ba5e..910e4750b9e7 100644
--- a/fs/cachefiles/volume.c
+++ b/fs/cachefiles/volume.c
@@ -7,6 +7,7 @@
 
 #include <linux/fs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include "internal.h"
 #include <trace/events/fscache.h>
 
diff --git a/fs/ceph/addr.c b/fs/ceph/addr.c
index 1340d77124ae..b6bf4c4b49a5 100644
--- a/fs/ceph/addr.c
+++ b/fs/ceph/addr.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/backing-dev.h>
 #include <linux/fs.h>
@@ -10,6 +11,7 @@
 #include <linux/pagevec.h>
 #include <linux/task_io_accounting_ops.h>
 #include <linux/signal.h>
+#include <linux/sprintf.h>
 #include <linux/iversion.h>
 #include <linux/ktime.h>
 #include <linux/netfs.h>
diff --git a/fs/ceph/cache.c b/fs/ceph/cache.c
index 930fbd54d2c8..8df576a12ea1 100644
--- a/fs/ceph/cache.c
+++ b/fs/ceph/cache.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/ceph/ceph_debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/fs_context.h>
 #include "super.h"
diff --git a/fs/ceph/caps.c b/fs/ceph/caps.c
index ad1f46c66fbf..690536a92e53 100644
--- a/fs/ceph/caps.c
+++ b/fs/ceph/caps.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/completion.h>
 
 #include <linux/fs.h>
 #include <linux/kernel.h>
diff --git a/fs/ceph/crypto.c b/fs/ceph/crypto.c
index 3b3c4d8d401e..867e09353a78 100644
--- a/fs/ceph/crypto.c
+++ b/fs/ceph/crypto.c
@@ -7,6 +7,8 @@
  * Modified by Jaegeuk Kim, 2015.
  */
 #include <linux/ceph/ceph_debug.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include <linux/fscrypt.h>
 #include <linux/ceph/striper.h>
diff --git a/fs/ceph/debugfs.c b/fs/ceph/debugfs.c
index 24c08078f5aa..f4da432fc299 100644
--- a/fs/ceph/debugfs.c
+++ b/fs/ceph/debugfs.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/device.h>
 #include <linux/slab.h>
diff --git a/fs/ceph/dir.c b/fs/ceph/dir.c
index 0e9f56eaba1e..f9f78727c840 100644
--- a/fs/ceph/dir.c
+++ b/fs/ceph/dir.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/spinlock.h>
 #include <linux/namei.h>
diff --git a/fs/ceph/ioctl.c b/fs/ceph/ioctl.c
index e861de3c79b9..02eb61a9408f 100644
--- a/fs/ceph/ioctl.c
+++ b/fs/ceph/ioctl.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
 #include <linux/in.h>
+#include <linux/sprintf.h>
 
 #include "super.h"
 #include "mds_client.h"
diff --git a/fs/ceph/mds_client.c b/fs/ceph/mds_client.c
index f71bb9c9569f..060bf02282d6 100644
--- a/fs/ceph/mds_client.c
+++ b/fs/ceph/mds_client.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/completion.h>
 
 #include <linux/fs.h>
 #include <linux/wait.h>
diff --git a/fs/ceph/metric.h b/fs/ceph/metric.h
index 0d0c44bd3332..37cc17f667bc 100644
--- a/fs/ceph/metric.h
+++ b/fs/ceph/metric.h
@@ -5,6 +5,8 @@
 #include <linux/ceph/types.h>
 #include <linux/percpu_counter.h>
 #include <linux/ktime.h>
+#include <linux/timer.h> // for round_jiffies_relative()
+#include <linux/workqueue.h> // for struct delayed_work
 
 extern bool disable_send_metrics;
 
diff --git a/fs/ceph/super.c b/fs/ceph/super.c
index 5ec102f6b1ac..00e72b3cade9 100644
--- a/fs/ceph/super.c
+++ b/fs/ceph/super.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 
 #include <linux/ceph/ceph_debug.h>
+#include <linux/completion.h>
 
 #include <linux/backing-dev.h>
 #include <linux/ctype.h>
diff --git a/fs/ceph/super.h b/fs/ceph/super.h
index b63b4cd9b5b6..d9a7ed1b421d 100644
--- a/fs/ceph/super.h
+++ b/fs/ceph/super.h
@@ -21,6 +21,7 @@
 #include <linux/netfs.h>
 #include <linux/fscache.h>
 #include <linux/hashtable.h>
+#include <linux/ratelimit.h>
 
 #include <linux/ceph/libceph.h>
 #include "crypto.h"
diff --git a/fs/ceph/xattr.c b/fs/ceph/xattr.c
index e066a556eccb..0d79e74ee8cf 100644
--- a/fs/ceph/xattr.c
+++ b/fs/ceph/xattr.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
 #include <linux/ceph/pagelist.h>
+#include <linux/sprintf.h>
 
 #include "super.h"
 #include "mds_client.h"
diff --git a/fs/coda/coda_linux.c b/fs/coda/coda_linux.c
index 1d2dac95f86a..0759b9eaa634 100644
--- a/fs/coda/coda_linux.c
+++ b/fs/coda/coda_linux.c
@@ -10,6 +10,7 @@
 
 #include <linux/types.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/fs.h>
 #include <linux/stat.h>
diff --git a/fs/configfs/dir.c b/fs/configfs/dir.c
index 7d6cd4b366d5..219694c0a1ec 100644
--- a/fs/configfs/dir.c
+++ b/fs/configfs/dir.c
@@ -15,6 +15,7 @@
 #include <linux/mount.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/err.h>
 
 #include <linux/configfs.h>
diff --git a/fs/configfs/file.c b/fs/configfs/file.c
index 0ad32150611e..9f7b54eb4e01 100644
--- a/fs/configfs/file.c
+++ b/fs/configfs/file.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/uaccess.h>
 #include <linux/uio.h>
diff --git a/fs/configfs/item.c b/fs/configfs/item.c
index 254170a82aa3..9270e4876fb6 100644
--- a/fs/configfs/item.c
+++ b/fs/configfs/item.c
@@ -13,8 +13,11 @@
 
 #include <linux/string.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/kref.h>
 
 #include <linux/configfs.h>
 
diff --git a/fs/configfs/mount.c b/fs/configfs/mount.c
index c2d820063ec4..57a6ab996950 100644
--- a/fs/configfs/mount.c
+++ b/fs/configfs/mount.c
@@ -15,6 +15,7 @@
 #include <linux/pagemap.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sysfs.h>
 
 #include <linux/configfs.h>
 #include "configfs_internal.h"
diff --git a/fs/coredump.c b/fs/coredump.c
index f258c17c1841..f36be28991bb 100644
--- a/fs/coredump.c
+++ b/fs/coredump.c
@@ -4,6 +4,7 @@
 #include <linux/fdtable.h>
 #include <linux/freezer.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/fcntl.h>
 #include <linux/swap.h>
@@ -17,6 +18,8 @@
 #include <linux/key.h>
 #include <linux/personality.h>
 #include <linux/binfmts.h>
+#include <linux/bvec.h>
+#include <linux/completion.h>
 #include <linux/coredump.h>
 #include <linux/sched/coredump.h>
 #include <linux/sched/signal.h>
diff --git a/fs/crypto/bio.c b/fs/crypto/bio.c
index 0ad8c30b8fa5..27216aa18ad4 100644
--- a/fs/crypto/bio.c
+++ b/fs/crypto/bio.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/bio.h>
 #include <linux/namei.h>
+#include <linux/blkdev.h> // errno_to_blk_status()
 #include "fscrypt_private.h"
 
 /**
diff --git a/fs/crypto/keyring.c b/fs/crypto/keyring.c
index 6681a71625f0..b273740cb7c1 100644
--- a/fs/crypto/keyring.c
+++ b/fs/crypto/keyring.c
@@ -23,6 +23,7 @@
 #include <linux/key-type.h>
 #include <linux/random.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 
 #include "fscrypt_private.h"
 
diff --git a/fs/crypto/keysetup_v1.c b/fs/crypto/keysetup_v1.c
index cf3b58ec32cc..ebb459ec168e 100644
--- a/fs/crypto/keysetup_v1.c
+++ b/fs/crypto/keysetup_v1.c
@@ -25,6 +25,7 @@
 #include <keys/user-type.h>
 #include <linux/hashtable.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 
 #include "fscrypt_private.h"
 
diff --git a/fs/d_path.c b/fs/d_path.c
index 5f4da5c8d5db..0614c5d457ce 100644
--- a/fs/d_path.c
+++ b/fs/d_path.c
@@ -1,6 +1,7 @@
 /* SPDX-License-Identifier: GPL-2.0 */
 #include <linux/syscalls.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/fs_struct.h>
 #include <linux/fs.h>
diff --git a/fs/dcache.c b/fs/dcache.c
index 6ebccba33336..e74b37f6b710 100644
--- a/fs/dcache.c
+++ b/fs/dcache.c
@@ -16,18 +16,22 @@
  */
 
 #include <linux/ratelimit.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/fs.h>
 #include <linux/fscrypt.h>
 #include <linux/fsnotify.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/hash.h>
+#include <linux/kstrtox.h>
 #include <linux/cache.h>
 #include <linux/export.h>
 #include <linux/security.h>
 #include <linux/seqlock.h>
+#include <linux/sprintf.h>
 #include <linux/memblock.h>
 #include <linux/bit_spinlock.h>
 #include <linux/rculist_bl.h>
diff --git a/fs/debugfs/file.c b/fs/debugfs/file.c
index c6f4a9a98b85..7d23bfa63b79 100644
--- a/fs/debugfs/file.c
+++ b/fs/debugfs/file.c
@@ -11,16 +11,19 @@
 
 #include <linux/module.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/pagemap.h>
 #include <linux/debugfs.h>
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/pm_runtime.h>
 #include <linux/poll.h>
 #include <linux/security.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/fs/debugfs/inode.c b/fs/debugfs/inode.c
index 034a617cb1a5..614b2aa553c3 100644
--- a/fs/debugfs/inode.c
+++ b/fs/debugfs/inode.c
@@ -27,6 +27,8 @@
 #include <linux/magic.h>
 #include <linux/slab.h>
 #include <linux/security.h>
+#include <linux/sysfs.h>
+#include <linux/completion.h>
 
 #include "internal.h"
 
diff --git a/fs/devpts/inode.c b/fs/devpts/inode.c
index b20e565b9c5e..d55c9e2d5f0a 100644
--- a/fs/devpts/inode.c
+++ b/fs/devpts/inode.c
@@ -16,6 +16,7 @@
 #include <linux/namei.h>
 #include <linux/slab.h>
 #include <linux/mount.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/mutex.h>
 #include <linux/magic.h>
@@ -24,6 +25,7 @@
 #include <linux/parser.h>
 #include <linux/fsnotify.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 
 #define DEVPTS_DEFAULT_MODE 0600
 /*
diff --git a/fs/direct-io.c b/fs/direct-io.c
index 60456263a338..46e4cc1491c4 100644
--- a/fs/direct-io.c
+++ b/fs/direct-io.c
@@ -30,6 +30,7 @@
 #include <linux/pagemap.h>
 #include <linux/task_io_accounting_ops.h>
 #include <linux/bio.h>
+#include <linux/completion.h>
 #include <linux/wait.h>
 #include <linux/err.h>
 #include <linux/blkdev.h>
diff --git a/fs/dlm/config.c b/fs/dlm/config.c
index e55e0a2cd2e8..3bcd401470f8 100644
--- a/fs/dlm/config.c
+++ b/fs/dlm/config.c
@@ -12,10 +12,12 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/configfs.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/in.h>
 #include <linux/in6.h>
 #include <linux/dlmconstants.h>
+#include <linux/sprintf.h>
 #include <net/ipv6.h>
 #include <net/sock.h>
 
diff --git a/fs/dlm/debug_fs.c b/fs/dlm/debug_fs.c
index 4fa11d9ddbb6..dd190997d5b7 100644
--- a/fs/dlm/debug_fs.c
+++ b/fs/dlm/debug_fs.c
@@ -14,6 +14,7 @@
 #include <linux/ctype.h>
 #include <linux/debugfs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "dlm_internal.h"
 #include "midcomms.h"
diff --git a/fs/dlm/lockspace.c b/fs/dlm/lockspace.c
index 0455dddb0797..b9e1e4b7ae06 100644
--- a/fs/dlm/lockspace.c
+++ b/fs/dlm/lockspace.c
@@ -9,7 +9,10 @@
 *******************************************************************************
 ******************************************************************************/
 
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include "dlm_internal.h"
 #include "lockspace.h"
diff --git a/fs/dlm/lowcomms.c b/fs/dlm/lowcomms.c
index 6296c62c10fa..1bede096f420 100644
--- a/fs/dlm/lowcomms.c
+++ b/fs/dlm/lowcomms.c
@@ -46,6 +46,7 @@
 #include <net/sock.h>
 #include <net/tcp.h>
 #include <linux/pagemap.h>
+#include <linux/bvec.h>
 #include <linux/file.h>
 #include <linux/mutex.h>
 #include <linux/sctp.h>
diff --git a/fs/dlm/member.c b/fs/dlm/member.c
index be7909ead71b..d60ebef63c9d 100644
--- a/fs/dlm/member.c
+++ b/fs/dlm/member.c
@@ -17,6 +17,7 @@
 #include "config.h"
 #include "midcomms.h"
 #include "lowcomms.h"
+#include <linux/sprintf.h>
 
 int dlm_slots_version(const struct dlm_header *h)
 {
diff --git a/fs/dlm/recoverd.c b/fs/dlm/recoverd.c
index 4d17491dea2f..b81ca82ad21a 100644
--- a/fs/dlm/recoverd.c
+++ b/fs/dlm/recoverd.c
@@ -19,7 +19,9 @@
 #include "lock.h"
 #include "requestqueue.h"
 #include "recoverd.h"
+#include <linux/completion.h>
 
+#include <linux/completion.h>
 
 /* If the start for which we're re-enabling locking (seq) has been superseded
    by a newer stop (ls_recover_seq), we need to leave locking disabled.
diff --git a/fs/dlm/user.c b/fs/dlm/user.c
index 695e691b38b3..aa9c7ed6c029 100644
--- a/fs/dlm/user.c
+++ b/fs/dlm/user.c
@@ -5,6 +5,7 @@
 
 #include <linux/miscdevice.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/file.h>
 #include <linux/fs.h>
diff --git a/fs/ecryptfs/crypto.c b/fs/ecryptfs/crypto.c
index acb3edd96b09..0c75b9b1c55e 100644
--- a/fs/ecryptfs/crypto.c
+++ b/fs/ecryptfs/crypto.c
@@ -12,6 +12,7 @@
 #include <crypto/hash.h>
 #include <crypto/skcipher.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/mount.h>
 #include <linux/pagemap.h>
 #include <linux/random.h>
@@ -23,6 +24,7 @@
 #include <linux/slab.h>
 #include <asm/unaligned.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include "ecryptfs_kernel.h"
 
diff --git a/fs/ecryptfs/ecryptfs_kernel.h b/fs/ecryptfs/ecryptfs_kernel.h
index c586c5db18b5..25fa602a24ab 100644
--- a/fs/ecryptfs/ecryptfs_kernel.h
+++ b/fs/ecryptfs/ecryptfs_kernel.h
@@ -17,6 +17,7 @@
 #include <crypto/skcipher.h>
 #include <keys/user-type.h>
 #include <keys/encrypted-type.h>
+#include <linux/hex.h>
 #include <linux/kernel.h>
 #include <linux/fs.h>
 #include <linux/fs_stack.h>
diff --git a/fs/ecryptfs/kthread.c b/fs/ecryptfs/kthread.c
index ae4cb4e2e134..3429b1b41a6b 100644
--- a/fs/ecryptfs/kthread.c
+++ b/fs/ecryptfs/kthread.c
@@ -12,6 +12,7 @@
 #include <linux/wait.h>
 #include <linux/mount.h>
 #include "ecryptfs_kernel.h"
+#include <linux/completion.h>
 
 struct ecryptfs_open_req {
 	struct file **lower_file;
diff --git a/fs/ecryptfs/main.c b/fs/ecryptfs/main.c
index 2dc927ba067f..ba8f5ae7e04d 100644
--- a/fs/ecryptfs/main.c
+++ b/fs/ecryptfs/main.c
@@ -12,6 +12,7 @@
 
 #include <linux/dcache.h>
 #include <linux/file.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/namei.h>
 #include <linux/skbuff.h>
@@ -23,6 +24,7 @@
 #include <linux/slab.h>
 #include <linux/magic.h>
 #include "ecryptfs_kernel.h"
+#include <linux/sprintf.h>
 
 /*
  * Module parameter that defines the ecryptfs_verbosity level.
diff --git a/fs/efivarfs/vars.c b/fs/efivarfs/vars.c
index 114ff0fd4e55..b7587d6cce66 100644
--- a/fs/efivarfs/vars.c
+++ b/fs/efivarfs/vars.c
@@ -10,6 +10,7 @@
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/init.h>
+#include <linux/hex.h>
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/string.h>
diff --git a/fs/erofs/data.c b/fs/erofs/data.c
index 433fc39ba423..e335a41db087 100644
--- a/fs/erofs/data.c
+++ b/fs/erofs/data.c
@@ -5,6 +5,7 @@
  * Copyright (C) 2021, Alibaba Cloud
  */
 #include "internal.h"
+#include <linux/blkdev.h>
 #include <linux/sched/mm.h>
 #include <trace/events/erofs.h>
 
diff --git a/fs/erofs/fscache.c b/fs/erofs/fscache.c
index 5ff90026fd43..dd1c53fb7c2d 100644
--- a/fs/erofs/fscache.c
+++ b/fs/erofs/fscache.c
@@ -5,6 +5,7 @@
  */
 #include <linux/fscache.h>
 #include "internal.h"
+#include <linux/sprintf.h>
 
 static DEFINE_MUTEX(erofs_domain_list_lock);
 static DEFINE_MUTEX(erofs_domain_cookies_lock);
diff --git a/fs/erofs/internal.h b/fs/erofs/internal.h
index 0f0706325b7b..3ce08b46c3c8 100644
--- a/fs/erofs/internal.h
+++ b/fs/erofs/internal.h
@@ -10,6 +10,7 @@
 #include <linux/fs.h>
 #include <linux/dax.h>
 #include <linux/dcache.h>
+#include <linux/idr.h>
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/pagemap.h>
diff --git a/fs/erofs/super.c b/fs/erofs/super.c
index 9b4b66dcdd4f..c8a939a4cdbc 100644
--- a/fs/erofs/super.c
+++ b/fs/erofs/super.c
@@ -10,6 +10,7 @@
 #include <linux/fs_context.h>
 #include <linux/fs_parser.h>
 #include <linux/exportfs.h>
+#include <linux/blkdev.h>
 #include "xattr.h"
 
 #define CREATE_TRACE_POINTS
diff --git a/fs/erofs/sysfs.c b/fs/erofs/sysfs.c
index 435e515c0792..7ce3a585e260 100644
--- a/fs/erofs/sysfs.c
+++ b/fs/erofs/sysfs.c
@@ -5,6 +5,9 @@
  */
 #include <linux/sysfs.h>
 #include <linux/kobject.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/fs/erofs/utils.c b/fs/erofs/utils.c
index e146d09151af..86799056a742 100644
--- a/fs/erofs/utils.c
+++ b/fs/erofs/utils.c
@@ -5,6 +5,8 @@
  */
 #include "internal.h"
 
+#include <linux/shrinker.h>
+
 struct page *erofs_allocpage(struct page **pagepool, gfp_t gfp)
 {
 	struct page *page = *pagepool;
diff --git a/fs/erofs/zdata.c b/fs/erofs/zdata.c
index ff0aa72b0db3..47a6a346592a 100644
--- a/fs/erofs/zdata.c
+++ b/fs/erofs/zdata.c
@@ -5,8 +5,10 @@
  * Copyright (C) 2022 Alibaba Cloud
  */
 #include "compress.h"
+#include <linux/completion.h>
 #include <linux/psi.h>
 #include <linux/cpuhotplug.h>
+#include <linux/sprintf.h>
 #include <trace/events/erofs.h>
 
 #define Z_EROFS_PCLUSTER_MAX_PAGES	(Z_EROFS_PCLUSTER_MAX_SIZE / PAGE_SIZE)
diff --git a/fs/eventpoll.c b/fs/eventpoll.c
index 786e023a48b2..7d9706c68d01 100644
--- a/fs/eventpoll.c
+++ b/fs/eventpoll.c
@@ -37,6 +37,7 @@
 #include <linux/seq_file.h>
 #include <linux/compat.h>
 #include <linux/rculist.h>
+#include <linux/hrtimer.h>
 #include <net/busy_poll.h>
 
 /*
diff --git a/fs/exec.c b/fs/exec.c
index ece3ab0998e1..aefdf711950f 100644
--- a/fs/exec.c
+++ b/fs/exec.c
@@ -28,6 +28,7 @@
 #include <linux/file.h>
 #include <linux/fdtable.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/fcntl.h>
 #include <linux/swap.h>
@@ -67,6 +68,7 @@
 #include <linux/time_namespace.h>
 #include <linux/user_events.h>
 #include <linux/rseq.h>
+#include <linux/posix-timers.h> // for posix_cpu_timers_exit()
 
 #include <linux/uaccess.h>
 #include <asm/mmu_context.h>
diff --git a/fs/ext2/super.c b/fs/ext2/super.c
index 6d8587505cea..8bdcf79a6cfd 100644
--- a/fs/ext2/super.c
+++ b/fs/ext2/super.c
@@ -20,6 +20,7 @@
 #include <linux/module.h>
 #include <linux/string.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/blkdev.h>
diff --git a/fs/ext4/extents_status.c b/fs/ext4/extents_status.c
index 4a00e2f019d9..6441cf07b73b 100644
--- a/fs/ext4/extents_status.c
+++ b/fs/ext4/extents_status.c
@@ -13,6 +13,7 @@
 #include <linux/list_sort.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/shrinker.h>
 #include "ext4.h"
 
 #include <trace/events/ext4.h>
diff --git a/fs/ext4/mballoc-test.c b/fs/ext4/mballoc-test.c
index f94901fd3835..f8806141ab71 100644
--- a/fs/ext4/mballoc-test.c
+++ b/fs/ext4/mballoc-test.c
@@ -5,6 +5,7 @@
 
 #include <kunit/test.h>
 #include <kunit/static_stub.h>
+#include <linux/sprintf.h>
 
 #include "ext4.h"
 
diff --git a/fs/ext4/mmp.c b/fs/ext4/mmp.c
index bd946d0c71b7..a1b29ff654dc 100644
--- a/fs/ext4/mmp.c
+++ b/fs/ext4/mmp.c
@@ -2,8 +2,10 @@
 #include <linux/fs.h>
 #include <linux/random.h>
 #include <linux/buffer_head.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 
 #include "ext4.h"
 
diff --git a/fs/ext4/super.c b/fs/ext4/super.c
index 8180d3c2cc2b..8730209b089f 100644
--- a/fs/ext4/super.c
+++ b/fs/ext4/super.c
@@ -18,6 +18,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/fs.h>
 #include <linux/time.h>
@@ -26,6 +27,7 @@
 #include <linux/init.h>
 #include <linux/blkdev.h>
 #include <linux/backing-dev.h>
+#include <linux/completion.h>
 #include <linux/parser.h>
 #include <linux/buffer_head.h>
 #include <linux/exportfs.h>
@@ -43,6 +45,8 @@
 #include <linux/iversion.h>
 #include <linux/unicode.h>
 #include <linux/part_stat.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kobject.h>
 #include <linux/kthread.h>
 #include <linux/freezer.h>
 #include <linux/fsnotify.h>
diff --git a/fs/ext4/sysfs.c b/fs/ext4/sysfs.c
index 6d332dff79dd..490ce27ff668 100644
--- a/fs/ext4/sysfs.c
+++ b/fs/ext4/sysfs.c
@@ -10,10 +10,13 @@
 
 #include <linux/time.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sysfs.h>
 #include <linux/proc_fs.h>
 #include <linux/part_stat.h>
+#include <linux/completion.h>
 
 #include "ext4.h"
 #include "ext4_jbd2.h"
diff --git a/fs/f2fs/checkpoint.c b/fs/f2fs/checkpoint.c
index b85820e70f5e..507044020a41 100644
--- a/fs/f2fs/checkpoint.c
+++ b/fs/f2fs/checkpoint.c
@@ -7,6 +7,7 @@
  */
 #include <linux/fs.h>
 #include <linux/bio.h>
+#include <linux/completion.h>
 #include <linux/mpage.h>
 #include <linux/writeback.h>
 #include <linux/blkdev.h>
diff --git a/fs/f2fs/compress.c b/fs/f2fs/compress.c
index 3dc488ce882b..92c3796ccb01 100644
--- a/fs/f2fs/compress.c
+++ b/fs/f2fs/compress.c
@@ -8,6 +8,7 @@
 #include <linux/fs.h>
 #include <linux/f2fs_fs.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/writeback.h>
 #include <linux/backing-dev.h>
 #include <linux/lzo.h>
diff --git a/fs/f2fs/data.c b/fs/f2fs/data.c
index 05158f89ef32..bbf4947bda84 100644
--- a/fs/f2fs/data.c
+++ b/fs/f2fs/data.c
@@ -8,6 +8,7 @@
 #include <linux/fs.h>
 #include <linux/f2fs_fs.h>
 #include <linux/buffer_head.h>
+#include <linux/completion.h>
 #include <linux/sched/mm.h>
 #include <linux/mpage.h>
 #include <linux/writeback.h>
diff --git a/fs/f2fs/f2fs.h b/fs/f2fs/f2fs.h
index cc481d7b9287..3ec5f9ddedd1 100644
--- a/fs/f2fs/f2fs.h
+++ b/fs/f2fs/f2fs.h
@@ -16,6 +16,7 @@
 #include <linux/crc32.h>
 #include <linux/magic.h>
 #include <linux/kobject.h>
+#include <linux/radix-tree.h>
 #include <linux/sched.h>
 #include <linux/cred.h>
 #include <linux/sched/mm.h>
diff --git a/fs/f2fs/segment.c b/fs/f2fs/segment.c
index 7901ede58113..5d39f889f31e 100644
--- a/fs/f2fs/segment.c
+++ b/fs/f2fs/segment.c
@@ -9,6 +9,7 @@
 #include <linux/f2fs_fs.h>
 #include <linux/bio.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/sched/mm.h>
 #include <linux/prefetch.h>
 #include <linux/kthread.h>
diff --git a/fs/f2fs/shrinker.c b/fs/f2fs/shrinker.c
index 83d6fb97dcae..9340900d2310 100644
--- a/fs/f2fs/shrinker.c
+++ b/fs/f2fs/shrinker.c
@@ -8,6 +8,7 @@
  */
 #include <linux/fs.h>
 #include <linux/f2fs_fs.h>
+#include <linux/shrinker.h>
 
 #include "f2fs.h"
 #include "node.h"
diff --git a/fs/f2fs/super.c b/fs/f2fs/super.c
index cd609fea389a..26bb9f1bcfff 100644
--- a/fs/f2fs/super.c
+++ b/fs/f2fs/super.c
@@ -9,7 +9,10 @@
 #include <linux/init.h>
 #include <linux/fs.h>
 #include <linux/fs_context.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
 #include <linux/sched/mm.h>
+#include <linux/shrinker.h>
 #include <linux/statfs.h>
 #include <linux/buffer_head.h>
 #include <linux/kthread.h>
diff --git a/fs/f2fs/sysfs.c b/fs/f2fs/sysfs.c
index a7ec55c7bb20..d2cf78c59cff 100644
--- a/fs/f2fs/sysfs.c
+++ b/fs/f2fs/sysfs.c
@@ -7,9 +7,12 @@
  * Copyright (c) 2017 Chao Yu <chao@kernel.org>
  */
 #include <linux/compiler.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
 #include <linux/proc_fs.h>
 #include <linux/f2fs_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/unicode.h>
 #include <linux/ioprio.h>
 #include <linux/sysfs.h>
diff --git a/fs/f2fs/xattr.c b/fs/f2fs/xattr.c
index f290fe9327c4..1b6461db5874 100644
--- a/fs/f2fs/xattr.c
+++ b/fs/f2fs/xattr.c
@@ -22,6 +22,7 @@
 #include "f2fs.h"
 #include "xattr.h"
 #include "segment.h"
+#include <linux/sprintf.h>
 
 static void *xattr_alloc(struct f2fs_sb_info *sbi, int size, bool *is_inline)
 {
diff --git a/fs/fat/dir.c b/fs/fat/dir.c
index 00235b8a1823..36b0c1889351 100644
--- a/fs/fat/dir.c
+++ b/fs/fat/dir.c
@@ -16,6 +16,7 @@
 
 #include <linux/slab.h>
 #include <linux/compat.h>
+#include <linux/hex.h>
 #include <linux/uaccess.h>
 #include <linux/iversion.h>
 #include "fat.h"
diff --git a/fs/fat/inode.c b/fs/fat/inode.c
index 1fac3dabf130..6970f4e27f37 100644
--- a/fs/fat/inode.c
+++ b/fs/fat/inode.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/pagemap.h>
 #include <linux/mpage.h>
+#include <linux/sprintf.h>
 #include <linux/vfs.h>
 #include <linux/seq_file.h>
 #include <linux/parser.h>
diff --git a/fs/fat/namei_vfat.c b/fs/fat/namei_vfat.c
index c4d00999a433..06bb33123319 100644
--- a/fs/fat/namei_vfat.c
+++ b/fs/fat/namei_vfat.c
@@ -18,11 +18,13 @@
 
 #include <linux/module.h>
 #include <linux/ctype.h>
+#include <linux/hex.h>
 #include <linux/slab.h>
 #include <linux/namei.h>
 #include <linux/kernel.h>
 #include <linux/iversion.h>
 #include "fat.h"
+#include <linux/sprintf.h>
 
 static inline unsigned long vfat_d_version(struct dentry *dentry)
 {
diff --git a/fs/fs_context.c b/fs/fs_context.c
index 98589aae5208..61695fe24b86 100644
--- a/fs/fs_context.c
+++ b/fs/fs_context.c
@@ -18,6 +18,7 @@
 #include <linux/security.h>
 #include <linux/mnt_namespace.h>
 #include <linux/pid_namespace.h>
+#include <linux/sprintf.h>
 #include <linux/user_namespace.h>
 #include <net/net_namespace.h>
 #include <asm/sections.h>
diff --git a/fs/fs_parser.c b/fs/fs_parser.c
index a4d6ca0b8971..0178efc1bbdc 100644
--- a/fs/fs_parser.c
+++ b/fs/fs_parser.c
@@ -8,6 +8,7 @@
 #include <linux/export.h>
 #include <linux/fs_context.h>
 #include <linux/fs_parser.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/security.h>
 #include <linux/namei.h>
diff --git a/fs/fuse/control.c b/fs/fuse/control.c
index 284a35006462..bfff3907907d 100644
--- a/fs/fuse/control.c
+++ b/fs/fuse/control.c
@@ -7,6 +7,8 @@
 */
 
 #include "fuse_i.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/fs/fuse/cuse.c b/fs/fuse/cuse.c
index 91e89e68177e..b956b9dd41fa 100644
--- a/fs/fuse/cuse.c
+++ b/fs/fuse/cuse.c
@@ -46,6 +46,7 @@
 #include <linux/miscdevice.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/module.h>
 #include <linux/uio.h>
diff --git a/fs/fuse/file.c b/fs/fuse/file.c
index c007b0f0c3a7..b43e9d089dad 100644
--- a/fs/fuse/file.c
+++ b/fs/fuse/file.c
@@ -7,6 +7,7 @@
 */
 
 #include "fuse_i.h"
+#include <linux/completion.h>
 
 #include <linux/pagemap.h>
 #include <linux/slab.h>
diff --git a/fs/fuse/ioctl.c b/fs/fuse/ioctl.c
index 726640fa439e..d568a520f61a 100644
--- a/fs/fuse/ioctl.c
+++ b/fs/fuse/ioctl.c
@@ -8,6 +8,7 @@
 #include <linux/uio.h>
 #include <linux/compat.h>
 #include <linux/fileattr.h>
+#include <linux/highmem.h> // for kmap_local_page()
 
 static ssize_t fuse_send_ioctl(struct fuse_mount *fm, struct fuse_args *args,
 			       struct fuse_ioctl_out *outarg)
diff --git a/fs/fuse/virtio_fs.c b/fs/fuse/virtio_fs.c
index a28466c2da71..f3d5896ff922 100644
--- a/fs/fuse/virtio_fs.c
+++ b/fs/fuse/virtio_fs.c
@@ -10,6 +10,7 @@
 #include <linux/pfn_t.h>
 #include <linux/memremap.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/virtio.h>
 #include <linux/virtio_fs.h>
 #include <linux/delay.h>
@@ -19,6 +20,7 @@
 #include <linux/cleanup.h>
 #include <linux/uio.h>
 #include "fuse_i.h"
+#include <linux/completion.h>
 
 /* Used to help calculate the FUSE connection's max_pages limit for a request's
  * size. Parts of the struct fuse_req are sliced into scattergather lists in
diff --git a/fs/gfs2/glock.c b/fs/gfs2/glock.c
index 34540f9d011c..dc5d3c7cfe26 100644
--- a/fs/gfs2/glock.c
+++ b/fs/gfs2/glock.c
@@ -17,6 +17,7 @@
 #include <linux/kallsyms.h>
 #include <linux/gfs2_ondisk.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/module.h>
 #include <linux/uaccess.h>
diff --git a/fs/gfs2/lock_dlm.c b/fs/gfs2/lock_dlm.c
index d1ac5d0679ea..bfe011f669ed 100644
--- a/fs/gfs2/lock_dlm.c
+++ b/fs/gfs2/lock_dlm.c
@@ -7,8 +7,11 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/fs.h>
+#include <linux/completion.h>
 #include <linux/dlm.h>
+#include <linux/hex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/delay.h>
 #include <linux/gfs2_ondisk.h>
diff --git a/fs/gfs2/ops_fstype.c b/fs/gfs2/ops_fstype.c
index 1281e60be639..655c5b9a2865 100644
--- a/fs/gfs2/ops_fstype.c
+++ b/fs/gfs2/ops_fstype.c
@@ -10,6 +10,7 @@
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/completion.h>
+#include <linux/bio.h>
 #include <linux/buffer_head.h>
 #include <linux/blkdev.h>
 #include <linux/kthread.h>
@@ -22,6 +23,7 @@
 #include <linux/module.h>
 #include <linux/backing-dev.h>
 #include <linux/fs_parser.h>
+#include <linux/sprintf.h>
 
 #include "gfs2.h"
 #include "incore.h"
diff --git a/fs/gfs2/recovery.c b/fs/gfs2/recovery.c
index f4fe7039f725..dfe46a44766a 100644
--- a/fs/gfs2/recovery.c
+++ b/fs/gfs2/recovery.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/blkdev.h> // for bdev_read_only()
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/completion.h>
@@ -13,6 +14,7 @@
 #include <linux/crc32.h>
 #include <linux/crc32c.h>
 #include <linux/ktime.h>
+#include <linux/sprintf.h>
 
 #include "gfs2.h"
 #include "incore.h"
diff --git a/fs/gfs2/rgrp.c b/fs/gfs2/rgrp.c
index 26d6c1eea559..c0d7442cb25b 100644
--- a/fs/gfs2/rgrp.c
+++ b/fs/gfs2/rgrp.c
@@ -16,6 +16,7 @@
 #include <linux/blkdev.h>
 #include <linux/rbtree.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 
 #include "gfs2.h"
 #include "incore.h"
diff --git a/fs/gfs2/sys.c b/fs/gfs2/sys.c
index 250f340cb44d..f2597dc6d8c2 100644
--- a/fs/gfs2/sys.c
+++ b/fs/gfs2/sys.c
@@ -8,7 +8,10 @@
 
 #include <linux/sched.h>
 #include <linux/cred.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <linux/completion.h>
 #include <linux/buffer_head.h>
 #include <linux/module.h>
diff --git a/fs/gfs2/util.c b/fs/gfs2/util.c
index f52141ce9485..14e6637933dc 100644
--- a/fs/gfs2/util.c
+++ b/fs/gfs2/util.c
@@ -13,6 +13,7 @@
 #include <linux/crc32.h>
 #include <linux/gfs2_ondisk.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "gfs2.h"
diff --git a/fs/hfs/hfs_fs.h b/fs/hfs/hfs_fs.h
index b5a6ad5df357..71ebbed52f5f 100644
--- a/fs/hfs/hfs_fs.h
+++ b/fs/hfs/hfs_fs.h
@@ -17,6 +17,7 @@
 
 #include <linux/slab.h>
 #include <linux/types.h>
+#include <linux/kernel.h> // for lower_32_bits()
 #include <linux/mutex.h>
 #include <linux/buffer_head.h>
 #include <linux/fs.h>
diff --git a/fs/hfsplus/dir.c b/fs/hfsplus/dir.c
index f5c4b3e31a1c..e195173aabf2 100644
--- a/fs/hfsplus/dir.c
+++ b/fs/hfsplus/dir.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/random.h>
 #include <linux/nls.h>
+#include <linux/sprintf.h>
 
 #include "hfsplus_fs.h"
 #include "hfsplus_raw.h"
diff --git a/fs/hfsplus/hfsplus_fs.h b/fs/hfsplus/hfsplus_fs.h
index 7ededcb720c1..157dad01495f 100644
--- a/fs/hfsplus/hfsplus_fs.h
+++ b/fs/hfsplus/hfsplus_fs.h
@@ -21,6 +21,7 @@
 #include <linux/mutex.h>
 #include <linux/buffer_head.h>
 #include <linux/blkdev.h>
+#include <linux/kernel.h> // for lower_32_bits()
 #include "hfsplus_raw.h"
 
 #define DBG_BNODE_REFS	0x00000001
diff --git a/fs/hfsplus/wrapper.c b/fs/hfsplus/wrapper.c
index b0cb70400996..89f880abf598 100644
--- a/fs/hfsplus/wrapper.c
+++ b/fs/hfsplus/wrapper.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/fs.h>
+#include <linux/bio.h>
 #include <linux/blkdev.h>
 #include <linux/cdrom.h>
 #include <asm/unaligned.h>
diff --git a/fs/hostfs/hostfs_kern.c b/fs/hostfs/hostfs_kern.c
index a73d27c4dd58..9529f4cd2fb0 100644
--- a/fs/hostfs/hostfs_kern.c
+++ b/fs/hostfs/hostfs_kern.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/mm.h>
 #include <linux/pagemap.h>
+#include <linux/sprintf.h>
 #include <linux/statfs.h>
 #include <linux/slab.h>
 #include <linux/seq_file.h>
diff --git a/fs/hpfs/super.c b/fs/hpfs/super.c
index 6b0ba3c1efba..1571e8f8ebdc 100644
--- a/fs/hpfs/super.c
+++ b/fs/hpfs/super.c
@@ -8,6 +8,7 @@
  */
 
 #include "hpfs_fn.h"
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/parser.h>
 #include <linux/init.h>
diff --git a/fs/inode.c b/fs/inode.c
index 6d0d54230363..daa20ab09a20 100644
--- a/fs/inode.c
+++ b/fs/inode.c
@@ -6,6 +6,7 @@
 #include <linux/export.h>
 #include <linux/fs.h>
 #include <linux/filelock.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/backing-dev.h>
 #include <linux/hash.h>
diff --git a/fs/iomap/buffered-io.c b/fs/iomap/buffered-io.c
index 2ad0e287c704..0982456c334f 100644
--- a/fs/iomap/buffered-io.c
+++ b/fs/iomap/buffered-io.c
@@ -17,6 +17,7 @@
 #include <linux/bio.h>
 #include <linux/sched/signal.h>
 #include <linux/migrate.h>
+#include <linux/blkdev.h>
 #include "trace.h"
 
 #include "../internal.h"
diff --git a/fs/iomap/direct-io.c b/fs/iomap/direct-io.c
index bcd3f8cf5ea4..0866af74d74b 100644
--- a/fs/iomap/direct-io.c
+++ b/fs/iomap/direct-io.c
@@ -4,6 +4,7 @@
  * Copyright (c) 2016-2021 Christoph Hellwig.
  */
 #include <linux/module.h>
+#include <linux/bio.h>
 #include <linux/compiler.h>
 #include <linux/fs.h>
 #include <linux/fscrypt.h>
@@ -12,6 +13,7 @@
 #include <linux/backing-dev.h>
 #include <linux/uio.h>
 #include <linux/task_io_accounting_ops.h>
+#include <linux/blkdev.h>
 #include "trace.h"
 
 #include "../internal.h"
diff --git a/fs/isofs/dir.c b/fs/isofs/dir.c
index eb2f8273e6f1..90919fbedf9a 100644
--- a/fs/isofs/dir.c
+++ b/fs/isofs/dir.c
@@ -12,6 +12,7 @@
  *  isofs directory handling functions
  */
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 #include "isofs.h"
 
 int isofs_name_translate(struct iso_directory_record *de, char *new, struct inode *inode)
diff --git a/fs/jbd2/journal.c b/fs/jbd2/journal.c
index b6c114c11b97..97cdbcbce3ae 100644
--- a/fs/jbd2/journal.c
+++ b/fs/jbd2/journal.c
@@ -20,10 +20,12 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/fs.h>
 #include <linux/jbd2.h>
 #include <linux/errno.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/mm.h>
diff --git a/fs/jfs/jfs_logmgr.c b/fs/jfs/jfs_logmgr.c
index 73389c68e251..eb22382a52e6 100644
--- a/fs/jfs/jfs_logmgr.c
+++ b/fs/jfs/jfs_logmgr.c
@@ -46,6 +46,7 @@
  * 32-bit lspn and page eor.
  */
 
+#include <linux/file.h> // for fput()
 #include <linux/fs.h>
 #include <linux/blkdev.h>
 #include <linux/interrupt.h>
diff --git a/fs/jfs/super.c b/fs/jfs/super.c
index ff135a43b5b7..b07906df525d 100644
--- a/fs/jfs/super.c
+++ b/fs/jfs/super.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/parser.h>
 #include <linux/completion.h>
diff --git a/fs/kernfs/dir.c b/fs/kernfs/dir.c
index 458519e416fe..ed958bd7dc31 100644
--- a/fs/kernfs/dir.c
+++ b/fs/kernfs/dir.c
@@ -13,6 +13,7 @@
 #include <linux/idr.h>
 #include <linux/slab.h>
 #include <linux/security.h>
+#include <linux/sprintf.h>
 #include <linux/hash.h>
 
 #include "kernfs-internal.h"
diff --git a/fs/kernfs/kernfs-internal.h b/fs/kernfs/kernfs-internal.h
index b42ee6547cdc..c7afeeb57ab0 100644
--- a/fs/kernfs/kernfs-internal.h
+++ b/fs/kernfs/kernfs-internal.h
@@ -12,6 +12,7 @@
 
 #include <linux/lockdep.h>
 #include <linux/fs.h>
+#include <linux/idr.h>
 #include <linux/mutex.h>
 #include <linux/rwsem.h>
 #include <linux/xattr.h>
diff --git a/fs/kernfs/mount.c b/fs/kernfs/mount.c
index 0c93cad0f0ac..22b2bf6b9831 100644
--- a/fs/kernfs/mount.c
+++ b/fs/kernfs/mount.c
@@ -11,6 +11,7 @@
 #include <linux/mount.h>
 #include <linux/init.h>
 #include <linux/magic.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/pagemap.h>
 #include <linux/namei.h>
diff --git a/fs/libfs.c b/fs/libfs.c
index bb18884ff20e..2d39756ddc9e 100644
--- a/fs/libfs.c
+++ b/fs/libfs.c
@@ -6,12 +6,15 @@
 
 #include <linux/blkdev.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/cred.h>
 #include <linux/mount.h>
 #include <linux/vfs.h>
 #include <linux/quotaops.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/namei.h>
 #include <linux/exportfs.h>
diff --git a/fs/lockd/clntproc.c b/fs/lockd/clntproc.c
index cebcc283b7ce..762eae0845da 100644
--- a/fs/lockd/clntproc.c
+++ b/fs/lockd/clntproc.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/fs.h>
diff --git a/fs/lockd/mon.c b/fs/lockd/mon.c
index 87a0f207df0b..c173b6d45ff3 100644
--- a/fs/lockd/mon.c
+++ b/fs/lockd/mon.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/ktime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/sunrpc/clnt.h>
 #include <linux/sunrpc/addr.h>
diff --git a/fs/lockd/svclock.c b/fs/lockd/svclock.c
index 1f2149db10f2..38c17c3c8fe4 100644
--- a/fs/lockd/svclock.c
+++ b/fs/lockd/svclock.c
@@ -26,6 +26,7 @@
 #include <linux/errno.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/clnt.h>
 #include <linux/sunrpc/svc_xprt.h>
 #include <linux/lockd/nlm.h>
diff --git a/fs/mbcache.c b/fs/mbcache.c
index fe2624e17253..353ffa6b3b9e 100644
--- a/fs/mbcache.c
+++ b/fs/mbcache.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/spinlock.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/list.h>
 #include <linux/list_bl.h>
diff --git a/fs/namespace.c b/fs/namespace.c
index 5a51315c6678..8fc61618b514 100644
--- a/fs/namespace.c
+++ b/fs/namespace.c
@@ -11,6 +11,7 @@
 #include <linux/syscalls.h>
 #include <linux/export.h>
 #include <linux/capability.h>
+#include <linux/kstrtox.h>
 #include <linux/mnt_namespace.h>
 #include <linux/user_namespace.h>
 #include <linux/namei.h>
@@ -31,6 +32,7 @@
 #include <uapi/linux/mount.h>
 #include <linux/fs_context.h>
 #include <linux/shmem_fs.h>
+#include <linux/sysfs.h>
 #include <linux/mnt_idmapping.h>
 #include <linux/nospec.h>
 
diff --git a/fs/netfs/buffered_read.c b/fs/netfs/buffered_read.c
index 3298c29b5548..35e1f5f63e16 100644
--- a/fs/netfs/buffered_read.c
+++ b/fs/netfs/buffered_read.c
@@ -5,6 +5,7 @@
  * Written by David Howells (dhowells@redhat.com)
  */
 
+#include <linux/bvec.h>
 #include <linux/export.h>
 #include <linux/task_io_accounting_ops.h>
 #include "internal.h"
diff --git a/fs/netfs/buffered_write.c b/fs/netfs/buffered_write.c
index 9a0d32e4b422..3b788e7c6790 100644
--- a/fs/netfs/buffered_write.c
+++ b/fs/netfs/buffered_write.c
@@ -5,6 +5,7 @@
  * Written by David Howells (dhowells@redhat.com)
  */
 
+#include <linux/bvec.h>
 #include <linux/export.h>
 #include <linux/fs.h>
 #include <linux/mm.h>
diff --git a/fs/netfs/iterator.c b/fs/netfs/iterator.c
index b781bbbf1d8d..0b638f79babf 100644
--- a/fs/netfs/iterator.c
+++ b/fs/netfs/iterator.c
@@ -5,6 +5,7 @@
  * Written by David Howells (dhowells@redhat.com)
  */
 
+#include <linux/bvec.h>
 #include <linux/export.h>
 #include <linux/slab.h>
 #include <linux/mm.h>
diff --git a/fs/nfs/blocklayout/dev.c b/fs/nfs/blocklayout/dev.c
index 93ef7f864980..15b987bb9ab5 100644
--- a/fs/nfs/blocklayout/dev.c
+++ b/fs/nfs/blocklayout/dev.c
@@ -8,6 +8,7 @@
 #include <linux/nfs_fs.h>
 #include <linux/nfs_xdr.h>
 #include <linux/pr.h>
+#include <linux/sprintf.h>
 
 #include "blocklayout.h"
 
diff --git a/fs/nfs/cache_lib.c b/fs/nfs/cache_lib.c
index ef6729568432..d9ad497db9f9 100644
--- a/fs/nfs/cache_lib.c
+++ b/fs/nfs/cache_lib.c
@@ -15,6 +15,7 @@
 #include <linux/sunrpc/cache.h>
 #include <linux/sunrpc/rpc_pipe_fs.h>
 #include <net/net_namespace.h>
+#include <linux/completion.h>
 
 #include "cache_lib.h"
 
diff --git a/fs/nfs/callback_proc.c b/fs/nfs/callback_proc.c
index 76cea34477ae..a9b47f2a98f6 100644
--- a/fs/nfs/callback_proc.c
+++ b/fs/nfs/callback_proc.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/rcupdate.h>
 #include <linux/types.h>
+#include <linux/completion.h>
 
 #include "nfs4_fs.h"
 #include "callback.h"
diff --git a/fs/nfs/client.c b/fs/nfs/client.c
index 44eca51b2808..417b29ac2d03 100644
--- a/fs/nfs/client.c
+++ b/fs/nfs/client.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
diff --git a/fs/nfs/dir.c b/fs/nfs/dir.c
index c8ecbe999059..d8ff6e4eb0f0 100644
--- a/fs/nfs/dir.c
+++ b/fs/nfs/dir.c
@@ -22,6 +22,7 @@
 #include <linux/module.h>
 #include <linux/time.h>
 #include <linux/errno.h>
+#include <linux/shrinker.h>
 #include <linux/stat.h>
 #include <linux/fcntl.h>
 #include <linux/string.h>
diff --git a/fs/nfs/direct.c b/fs/nfs/direct.c
index c03926a1cc73..2bfdf3821251 100644
--- a/fs/nfs/direct.c
+++ b/fs/nfs/direct.c
@@ -48,6 +48,7 @@
 #include <linux/slab.h>
 #include <linux/task_io_accounting_ops.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <linux/nfs_fs.h>
 #include <linux/nfs_page.h>
diff --git a/fs/nfs/flexfilelayout/flexfilelayout.c b/fs/nfs/flexfilelayout/flexfilelayout.c
index ef817a0475ff..f9e5226f9c30 100644
--- a/fs/nfs/flexfilelayout/flexfilelayout.c
+++ b/fs/nfs/flexfilelayout/flexfilelayout.c
@@ -12,6 +12,7 @@
 #include <linux/nfs_page.h>
 #include <linux/module.h>
 #include <linux/sched/mm.h>
+#include <linux/sprintf.h>
 
 #include <linux/sunrpc/metrics.h>
 
diff --git a/fs/nfs/fscache.c b/fs/nfs/fscache.c
index 2d1bfee225c3..9331e4f17e95 100644
--- a/fs/nfs/fscache.c
+++ b/fs/nfs/fscache.c
@@ -15,6 +15,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/iversion.h>
+#include <linux/sprintf.h>
 #include <linux/xarray.h>
 #include <linux/fscache.h>
 #include <linux/netfs.h>
diff --git a/fs/nfs/namespace.c b/fs/nfs/namespace.c
index e7494cdd957e..44d4c28735ce 100644
--- a/fs/nfs/namespace.c
+++ b/fs/nfs/namespace.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/dcache.h>
 #include <linux/gfp.h>
+#include <linux/kstrtox.h>
 #include <linux/mount.h>
 #include <linux/namei.h>
 #include <linux/nfs_fs.h>
diff --git a/fs/nfs/nfs42proc.c b/fs/nfs/nfs42proc.c
index 28704f924612..251065f2fe8f 100644
--- a/fs/nfs/nfs42proc.c
+++ b/fs/nfs/nfs42proc.c
@@ -3,6 +3,7 @@
  * Copyright (c) 2014 Anna Schumaker <Anna.Schumaker@Netapp.com>
  */
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/addr.h>
 #include <linux/sunrpc/sched.h>
 #include <linux/nfs.h>
@@ -18,6 +19,7 @@
 #include "internal.h"
 #include "delegation.h"
 #include "nfs4trace.h"
+#include <linux/completion.h>
 
 #define NFSDBG_FACILITY NFSDBG_PROC
 static int nfs42_do_offload_cancel_async(struct file *dst, nfs4_stateid *std);
diff --git a/fs/nfs/nfs42xattr.c b/fs/nfs/nfs42xattr.c
index 49aaf28a6950..94fd57d7d930 100644
--- a/fs/nfs/nfs42xattr.c
+++ b/fs/nfs/nfs42xattr.c
@@ -10,6 +10,7 @@
 #include <linux/errno.h>
 #include <linux/nfs_fs.h>
 #include <linux/hashtable.h>
+#include <linux/list_lru.h>
 #include <linux/refcount.h>
 #include <uapi/linux/xattr.h>
 
diff --git a/fs/nfs/nfs4file.c b/fs/nfs/nfs4file.c
index 1cd9652f3c28..4b1446073d0a 100644
--- a/fs/nfs/nfs4file.c
+++ b/fs/nfs/nfs4file.c
@@ -16,6 +16,7 @@
 #include "iostat.h"
 #include "fscache.h"
 #include "pnfs.h"
+#include <linux/sprintf.h>
 
 #include "nfstrace.h"
 
diff --git a/fs/nfs/nfs4idmap.c b/fs/nfs/nfs4idmap.c
index 25a7c771cfd8..3cc6cbf362b5 100644
--- a/fs/nfs/nfs4idmap.c
+++ b/fs/nfs/nfs4idmap.c
@@ -36,6 +36,8 @@
 #include <linux/types.h>
 #include <linux/parser.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <net/net_namespace.h>
 #include <linux/sunrpc/rpc_pipe_fs.h>
 #include <linux/nfs_fs.h>
diff --git a/fs/nfs/nfs4proc.c b/fs/nfs/nfs4proc.c
index 815996cb27fc..66853f619d4b 100644
--- a/fs/nfs/nfs4proc.c
+++ b/fs/nfs/nfs4proc.c
@@ -38,6 +38,7 @@
 #include <linux/mm.h>
 #include <linux/delay.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ratelimit.h>
 #include <linux/printk.h>
diff --git a/fs/nfs/nfs4session.c b/fs/nfs/nfs4session.c
index 5db460476bf2..067b0b062860 100644
--- a/fs/nfs/nfs4session.c
+++ b/fs/nfs/nfs4session.c
@@ -16,6 +16,7 @@
 #include <linux/nfs4.h>
 #include <linux/nfs_fs.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include "nfs4_fs.h"
 #include "internal.h"
diff --git a/fs/nfs/nfs4state.c b/fs/nfs/nfs4state.c
index 8cfabdbda336..f12220ee0565 100644
--- a/fs/nfs/nfs4state.c
+++ b/fs/nfs/nfs4state.c
@@ -46,8 +46,10 @@
 #include <linux/module.h>
 #include <linux/random.h>
 #include <linux/ratelimit.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/jiffies.h>
 #include <linux/sched/mm.h>
 
diff --git a/fs/nfs/nfs4super.c b/fs/nfs/nfs4super.c
index d09bcfd7db89..70fbfe0e5958 100644
--- a/fs/nfs/nfs4super.c
+++ b/fs/nfs/nfs4super.c
@@ -15,6 +15,7 @@
 #include "dns_resolve.h"
 #include "pnfs.h"
 #include "nfs.h"
+#include <linux/sprintf.h>
 
 #define NFSDBG_FACILITY		NFSDBG_VFS
 
diff --git a/fs/nfs/nfs4xdr.c b/fs/nfs/nfs4xdr.c
index 1416099dfcd1..c3acb06f9d83 100644
--- a/fs/nfs/nfs4xdr.c
+++ b/fs/nfs/nfs4xdr.c
@@ -36,6 +36,7 @@
  */
 
 #include <linux/param.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/mm.h>
 #include <linux/errno.h>
diff --git a/fs/nfs/nfsroot.c b/fs/nfs/nfsroot.c
index 7600100ba26f..86c1756315e7 100644
--- a/fs/nfs/nfsroot.c
+++ b/fs/nfs/nfsroot.c
@@ -76,6 +76,7 @@
 #include <linux/init.h>
 #include <linux/nfs.h>
 #include <linux/nfs_fs.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/root_dev.h>
 #include <net/ipconfig.h>
diff --git a/fs/nfs/pnfs_nfs.c b/fs/nfs/pnfs_nfs.c
index afd23910f3bf..9207730689c1 100644
--- a/fs/nfs/pnfs_nfs.c
+++ b/fs/nfs/pnfs_nfs.c
@@ -10,6 +10,7 @@
 
 #include <linux/nfs_fs.h>
 #include <linux/nfs_page.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/addr.h>
 #include <linux/module.h>
 
diff --git a/fs/nfs/super.c b/fs/nfs/super.c
index 075b31c93f87..bc7b37fcba16 100644
--- a/fs/nfs/super.c
+++ b/fs/nfs/super.c
@@ -23,10 +23,13 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/time.h>
 #include <linux/kernel.h>
 #include <linux/mm.h>
+#include <linux/shrinker.h>
 #include <linux/string.h>
 #include <linux/stat.h>
 #include <linux/errno.h>
diff --git a/fs/nfs/sysfs.c b/fs/nfs/sysfs.c
index bf378ecd5d9f..e0119a8b48a0 100644
--- a/fs/nfs/sysfs.c
+++ b/fs/nfs/sysfs.c
@@ -5,6 +5,8 @@
 
 #include <linux/module.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/fs.h>
 #include <linux/slab.h>
diff --git a/fs/nfs/unlink.c b/fs/nfs/unlink.c
index 0110299643a2..728858e2da09 100644
--- a/fs/nfs/unlink.c
+++ b/fs/nfs/unlink.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/dcache.h>
 #include <linux/sunrpc/sched.h>
@@ -16,6 +17,7 @@
 #include <linux/wait.h>
 #include <linux/namei.h>
 #include <linux/fsnotify.h>
+#include <linux/completion.h>
 
 #include "internal.h"
 #include "nfs4_fs.h"
diff --git a/fs/nfs/write.c b/fs/nfs/write.c
index 84bb85264572..47c391523e2e 100644
--- a/fs/nfs/write.c
+++ b/fs/nfs/write.c
@@ -15,6 +15,7 @@
 #include <linux/writeback.h>
 #include <linux/swap.h>
 #include <linux/migrate.h>
+#include <linux/completion.h>
 
 #include <linux/sunrpc/clnt.h>
 #include <linux/nfs_fs.h>
diff --git a/fs/nfsd/export.c b/fs/nfsd/export.c
index 7b641095a665..b1c31caca4a7 100644
--- a/fs/nfsd/export.c
+++ b/fs/nfsd/export.c
@@ -16,6 +16,8 @@
 #include <linux/namei.h>
 #include <linux/module.h>
 #include <linux/exportfs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/svc_xprt.h>
 
 #include "nfsd.h"
diff --git a/fs/nfsd/flexfilelayout.c b/fs/nfsd/flexfilelayout.c
index 3ca5304440ff..050e6d79f985 100644
--- a/fs/nfsd/flexfilelayout.c
+++ b/fs/nfsd/flexfilelayout.c
@@ -8,6 +8,7 @@
  * goes to the same location as the NFSv3 WRITE.
  */
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/nfsd/debug.h>
 
diff --git a/fs/nfsd/flexfilelayoutxdr.c b/fs/nfsd/flexfilelayoutxdr.c
index aeb71c10ff1b..db2b7ba60821 100644
--- a/fs/nfsd/flexfilelayoutxdr.c
+++ b/fs/nfsd/flexfilelayoutxdr.c
@@ -4,6 +4,7 @@
  */
 #include <linux/sunrpc/svc.h>
 #include <linux/nfs4.h>
+#include <linux/sprintf.h>
 
 #include "nfsd.h"
 #include "flexfilelayoutxdr.h"
diff --git a/fs/nfsd/nfs4idmap.c b/fs/nfsd/nfs4idmap.c
index 7a806ac13e31..90ff17daadff 100644
--- a/fs/nfsd/nfs4idmap.c
+++ b/fs/nfsd/nfs4idmap.c
@@ -36,12 +36,14 @@
 #include <linux/seq_file.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/svc_xprt.h>
 #include <net/net_namespace.h>
 #include "idmap.h"
 #include "nfsd.h"
 #include "netns.h"
 #include "vfs.h"
+#include <linux/kstrtox.h>
 
 /*
  * Turn off idmapping when using AUTH_SYS.
diff --git a/fs/nfsd/nfs4proc.c b/fs/nfsd/nfs4proc.c
index 648ff427005e..c3ab032fc930 100644
--- a/fs/nfsd/nfs4proc.c
+++ b/fs/nfsd/nfs4proc.c
@@ -38,6 +38,7 @@
 #include <linux/slab.h>
 #include <linux/kthread.h>
 #include <linux/namei.h>
+#include <linux/sprintf.h>
 
 #include <linux/sunrpc/addr.h>
 #include <linux/nfs_ssc.h>
diff --git a/fs/nfsd/nfs4recover.c b/fs/nfsd/nfs4recover.c
index 2c060e0b1604..d8f90b0bf898 100644
--- a/fs/nfsd/nfs4recover.c
+++ b/fs/nfsd/nfs4recover.c
@@ -33,12 +33,15 @@
 */
 
 #include <crypto/hash.h>
+#include <linux/completion.h>
 #include <linux/file.h>
+#include <linux/hex.h>
 #include <linux/slab.h>
 #include <linux/namei.h>
 #include <linux/sched.h>
 #include <linux/fs.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/net_namespace.h>
 #include <linux/sunrpc/rpc_pipe_fs.h>
 #include <linux/sunrpc/clnt.h>
diff --git a/fs/nfsd/nfs4state.c b/fs/nfsd/nfs4state.c
index ba0541e39367..194e9580157a 100644
--- a/fs/nfsd/nfs4state.c
+++ b/fs/nfsd/nfs4state.c
@@ -34,6 +34,7 @@
 
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/namei.h>
 #include <linux/swap.h>
diff --git a/fs/nfsd/nfscache.c b/fs/nfsd/nfscache.c
index ba9d326b3de6..602621b3884d 100644
--- a/fs/nfsd/nfscache.c
+++ b/fs/nfsd/nfscache.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/sunrpc/svc_xprt.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/vmalloc.h>
 #include <linux/sunrpc/addr.h>
diff --git a/fs/nfsd/nfsctl.c b/fs/nfsd/nfsctl.c
index ecd18bffeebc..678ccc18b624 100644
--- a/fs/nfsd/nfsctl.c
+++ b/fs/nfsd/nfsctl.c
@@ -9,6 +9,8 @@
 #include <linux/namei.h>
 #include <linux/ctype.h>
 #include <linux/fs_context.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/sunrpc/svcsock.h>
 #include <linux/lockd/lockd.h>
diff --git a/fs/nfsd/nfsd.h b/fs/nfsd/nfsd.h
index 8daf22d766c6..735f5a211dff 100644
--- a/fs/nfsd/nfsd.h
+++ b/fs/nfsd/nfsd.h
@@ -11,6 +11,7 @@
 
 #include <linux/types.h>
 #include <linux/mount.h>
+#include <linux/sprintf.h>
 
 #include <linux/nfs.h>
 #include <linux/nfs2.h>
diff --git a/fs/nfsd/nfsfh.c b/fs/nfsd/nfsfh.c
index 40fecf7b224f..18eabc50c758 100644
--- a/fs/nfsd/nfsfh.c
+++ b/fs/nfsd/nfsfh.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/exportfs.h>
+#include <linux/sprintf.h>
 
 #include <linux/sunrpc/svcauth_gss.h>
 #include "nfsd.h"
diff --git a/fs/nilfs2/segbuf.c b/fs/nilfs2/segbuf.c
index dc431b4c34c9..a9055373a7e6 100644
--- a/fs/nilfs2/segbuf.c
+++ b/fs/nilfs2/segbuf.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/buffer_head.h>
+#include <linux/completion.h>
 #include <linux/writeback.h>
 #include <linux/crc32.h>
 #include <linux/backing-dev.h>
diff --git a/fs/nilfs2/super.c b/fs/nilfs2/super.c
index 5e630c179a1e..2c640c9c3d70 100644
--- a/fs/nilfs2/super.c
+++ b/fs/nilfs2/super.c
@@ -29,6 +29,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/blkdev.h>
+#include <linux/kstrtox.h>
 #include <linux/parser.h>
 #include <linux/crc32.h>
 #include <linux/vfs.h>
diff --git a/fs/nilfs2/sysfs.c b/fs/nilfs2/sysfs.c
index 379d22e28ed6..1dd998b09441 100644
--- a/fs/nilfs2/sysfs.c
+++ b/fs/nilfs2/sysfs.c
@@ -9,6 +9,9 @@
  */
 
 #include <linux/kobject.h>
+#include <linux/completion.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "nilfs.h"
 #include "mdt.h"
diff --git a/fs/nsfs.c b/fs/nsfs.c
index 34e1e3e36733..9e5cf97bc7a0 100644
--- a/fs/nsfs.c
+++ b/fs/nsfs.c
@@ -8,6 +8,7 @@
 #include <linux/magic.h>
 #include <linux/ktime.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/user_namespace.h>
 #include <linux/nsfs.h>
 #include <linux/uaccess.h>
diff --git a/fs/ntfs3/fsntfs.c b/fs/ntfs3/fsntfs.c
index ae2ef5c11868..a2cb4532f7e3 100644
--- a/fs/ntfs3/fsntfs.c
+++ b/fs/ntfs3/fsntfs.c
@@ -5,6 +5,7 @@
  *
  */
 
+#include <linux/bio.h>
 #include <linux/blkdev.h>
 #include <linux/buffer_head.h>
 #include <linux/fs.h>
@@ -2698,4 +2699,4 @@ int ntfs_set_label(struct ntfs_sb_info *sbi, u8 *label, int len)
 out:
 	__putname(uni);
 	return err;
-}
\ No newline at end of file
+}
diff --git a/fs/ntfs3/super.c b/fs/ntfs3/super.c
index cef5467fd928..b6e599995eec 100644
--- a/fs/ntfs3/super.c
+++ b/fs/ntfs3/super.c
@@ -59,7 +59,9 @@
 #include <linux/nls.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/statfs.h>
+#include <linux/ratelimit.h>
 
 #include "debug.h"
 #include "ntfs.h"
diff --git a/fs/ocfs2/cluster/heartbeat.c b/fs/ocfs2/cluster/heartbeat.c
index 1bde1281d514..4be921722ec3 100644
--- a/fs/ocfs2/cluster/heartbeat.c
+++ b/fs/ocfs2/cluster/heartbeat.c
@@ -4,18 +4,21 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/jiffies.h>
 #include <linux/module.h>
 #include <linux/fs.h>
 #include <linux/bio.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/file.h>
 #include <linux/kthread.h>
 #include <linux/configfs.h>
 #include <linux/random.h>
 #include <linux/crc32.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/debugfs.h>
 #include <linux/slab.h>
diff --git a/fs/ocfs2/cluster/masklog.c b/fs/ocfs2/cluster/masklog.c
index 563881ddbf00..ac4426ad8c2b 100644
--- a/fs/ocfs2/cluster/masklog.c
+++ b/fs/ocfs2/cluster/masklog.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/uaccess.h>
 
diff --git a/fs/ocfs2/cluster/netdebug.c b/fs/ocfs2/cluster/netdebug.c
index bc27301eab6d..9c04dd47ffb6 100644
--- a/fs/ocfs2/cluster/netdebug.c
+++ b/fs/ocfs2/cluster/netdebug.c
@@ -10,6 +10,7 @@
 #ifdef CONFIG_DEBUG_FS
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/idr.h>
diff --git a/fs/ocfs2/cluster/nodemanager.c b/fs/ocfs2/cluster/nodemanager.c
index 2f61d39e4e50..fd18f51ceb8f 100644
--- a/fs/ocfs2/cluster/nodemanager.c
+++ b/fs/ocfs2/cluster/nodemanager.c
@@ -5,8 +5,10 @@
 
 #include <linux/slab.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/configfs.h>
+#include <linux/sprintf.h>
 
 #include "tcp.h"
 #include "nodemanager.h"
diff --git a/fs/ocfs2/cluster/sys.c b/fs/ocfs2/cluster/sys.c
index 022f716c74ff..a77d7f680f07 100644
--- a/fs/ocfs2/cluster/sys.c
+++ b/fs/ocfs2/cluster/sys.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/fs.h>
 
diff --git a/fs/ocfs2/cluster/tcp.c b/fs/ocfs2/cluster/tcp.c
index 960080753d3b..ea9555fb9f41 100644
--- a/fs/ocfs2/cluster/tcp.c
+++ b/fs/ocfs2/cluster/tcp.c
@@ -37,6 +37,7 @@
  * and only accepts the connection if the higher numbered node is heartbeating.
  */
 
+#include <linux/bvec.h>
 #include <linux/kernel.h>
 #include <linux/sched/mm.h>
 #include <linux/jiffies.h>
diff --git a/fs/ocfs2/dlm/dlmdebug.c b/fs/ocfs2/dlm/dlmdebug.c
index be5e9ed7da8d..2b7fdde2193e 100644
--- a/fs/ocfs2/dlm/dlmdebug.c
+++ b/fs/ocfs2/dlm/dlmdebug.c
@@ -10,6 +10,7 @@
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/highmem.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/spinlock.h>
 #include <linux/debugfs.h>
diff --git a/fs/ocfs2/dlm/dlmdomain.c b/fs/ocfs2/dlm/dlmdomain.c
index 5c04dde99981..f3682cb6db40 100644
--- a/fs/ocfs2/dlm/dlmdomain.c
+++ b/fs/ocfs2/dlm/dlmdomain.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/highmem.h>
diff --git a/fs/ocfs2/dlmglue.c b/fs/ocfs2/dlmglue.c
index cb40cafbc062..8df3cef2fcb3 100644
--- a/fs/ocfs2/dlmglue.c
+++ b/fs/ocfs2/dlmglue.c
@@ -15,10 +15,12 @@
 #include <linux/pagemap.h>
 #include <linux/debugfs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/delay.h>
 #include <linux/quotaops.h>
 #include <linux/sched/signal.h>
+#include <linux/completion.h>
 
 #define MLOG_MASK_PREFIX ML_DLM_GLUE
 #include <cluster/masklog.h>
diff --git a/fs/ocfs2/filecheck.c b/fs/ocfs2/filecheck.c
index 1ad7106741f8..a909a8d09816 100644
--- a/fs/ocfs2/filecheck.c
+++ b/fs/ocfs2/filecheck.c
@@ -14,9 +14,12 @@
 #include <linux/kmod.h>
 #include <linux/fs.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/sysctl.h>
 #include <cluster/masklog.h>
+#include <linux/completion.h>
 
 #include "ocfs2.h"
 #include "ocfs2_fs.h"
diff --git a/fs/ocfs2/namei.c b/fs/ocfs2/namei.c
index 9221a33f917b..1f78bc39cb36 100644
--- a/fs/ocfs2/namei.c
+++ b/fs/ocfs2/namei.c
@@ -21,6 +21,7 @@
  */
 
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/highmem.h>
diff --git a/fs/ocfs2/ocfs2_fs.h b/fs/ocfs2/ocfs2_fs.h
index 7aebdbf5cc0a..32a4f6b46a49 100644
--- a/fs/ocfs2/ocfs2_fs.h
+++ b/fs/ocfs2/ocfs2_fs.h
@@ -11,6 +11,7 @@
 #define _OCFS2_FS_H
 
 #include <linux/magic.h>
+#include <linux/sprintf.h>
 
 /* Version */
 #define OCFS2_MAJOR_REV_LEVEL		0
diff --git a/fs/ocfs2/stack_user.c b/fs/ocfs2/stack_user.c
index c11406cd87a8..6cec98c832b1 100644
--- a/fs/ocfs2/stack_user.c
+++ b/fs/ocfs2/stack_user.c
@@ -10,12 +10,14 @@
 #include <linux/module.h>
 #include <linux/fs.h>
 #include <linux/filelock.h>
+#include <linux/kstrtox.h>
 #include <linux/miscdevice.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/reboot.h>
 #include <linux/sched.h>
 #include <linux/uaccess.h>
+#include <linux/completion.h>
 
 #include "stackglue.h"
 
diff --git a/fs/ocfs2/stackglue.c b/fs/ocfs2/stackglue.c
index 20aa37b67cfb..9c4455b52042 100644
--- a/fs/ocfs2/stackglue.c
+++ b/fs/ocfs2/stackglue.c
@@ -15,6 +15,7 @@
 #include <linux/kmod.h>
 #include <linux/fs.h>
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/sysctl.h>
 
diff --git a/fs/ocfs2/super.c b/fs/ocfs2/super.c
index 1259fe02cd53..70fa1f4ff09b 100644
--- a/fs/ocfs2/super.c
+++ b/fs/ocfs2/super.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/highmem.h>
diff --git a/fs/orangefs/devorangefs-req.c b/fs/orangefs/devorangefs-req.c
index 33ee8cb32f83..a9c7470fbfc7 100644
--- a/fs/orangefs/devorangefs-req.c
+++ b/fs/orangefs/devorangefs-req.c
@@ -13,6 +13,7 @@
 #include "orangefs-dev-proto.h"
 #include "orangefs-bufmap.h"
 #include "orangefs-debugfs.h"
+#include <linux/completion.h>
 
 #include <linux/debugfs.h>
 #include <linux/slab.h>
diff --git a/fs/orangefs/inode.c b/fs/orangefs/inode.c
index 085912268442..58ba9765abf0 100644
--- a/fs/orangefs/inode.c
+++ b/fs/orangefs/inode.c
@@ -11,6 +11,7 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/bvec.h>
 #include <linux/fileattr.h>
 #include "protocol.h"
 #include "orangefs-kernel.h"
diff --git a/fs/orangefs/orangefs-cache.c b/fs/orangefs/orangefs-cache.c
index 3b6982bf6bcf..8491948d94b9 100644
--- a/fs/orangefs/orangefs-cache.c
+++ b/fs/orangefs/orangefs-cache.c
@@ -7,6 +7,7 @@
 
 #include "protocol.h"
 #include "orangefs-kernel.h"
+#include <linux/completion.h>
 
 /* tags assigned to kernel upcall operations */
 static __u64 next_tag_value;
diff --git a/fs/orangefs/orangefs-debugfs.c b/fs/orangefs/orangefs-debugfs.c
index 1b508f543384..d6b3adbec043 100644
--- a/fs/orangefs/orangefs-debugfs.c
+++ b/fs/orangefs/orangefs-debugfs.c
@@ -37,6 +37,7 @@
  */
 #include <linux/debugfs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 
diff --git a/fs/orangefs/orangefs-kernel.h b/fs/orangefs/orangefs-kernel.h
index 926d9c0a428a..0d94b3d37d7e 100644
--- a/fs/orangefs/orangefs-kernel.h
+++ b/fs/orangefs/orangefs-kernel.h
@@ -23,6 +23,7 @@
 #include <linux/moduleparam.h>
 #include <linux/statfs.h>
 #include <linux/backing-dev.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/mpage.h>
 #include <linux/namei.h>
diff --git a/fs/orangefs/orangefs-sysfs.c b/fs/orangefs/orangefs-sysfs.c
index be4ba03a01a0..052097ff4fcd 100644
--- a/fs/orangefs/orangefs-sysfs.c
+++ b/fs/orangefs/orangefs-sysfs.c
@@ -138,6 +138,8 @@
 
 #include <linux/fs.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 #include <linux/module.h>
diff --git a/fs/orangefs/waitqueue.c b/fs/orangefs/waitqueue.c
index beafc33d57be..39b6704ccaa2 100644
--- a/fs/orangefs/waitqueue.c
+++ b/fs/orangefs/waitqueue.c
@@ -16,6 +16,7 @@
 #include "protocol.h"
 #include "orangefs-kernel.h"
 #include "orangefs-bufmap.h"
+#include <linux/completion.h>
 
 static int wait_for_matching_downcall(struct orangefs_kernel_op_s *op,
 		long timeout,
diff --git a/fs/overlayfs/copy_up.c b/fs/overlayfs/copy_up.c
index 8586e2f5d243..6a861535ed38 100644
--- a/fs/overlayfs/copy_up.c
+++ b/fs/overlayfs/copy_up.c
@@ -10,6 +10,7 @@
 #include <linux/file.h>
 #include <linux/fileattr.h>
 #include <linux/splice.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include <linux/security.h>
 #include <linux/uaccess.h>
diff --git a/fs/overlayfs/dir.c b/fs/overlayfs/dir.c
index 0f8b4a719237..53b873a00ebd 100644
--- a/fs/overlayfs/dir.c
+++ b/fs/overlayfs/dir.c
@@ -6,6 +6,7 @@
 
 #include <linux/fs.h>
 #include <linux/namei.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include <linux/security.h>
 #include <linux/cred.h>
diff --git a/fs/overlayfs/inode.c b/fs/overlayfs/inode.c
index c63b31a460be..72b687a0d91b 100644
--- a/fs/overlayfs/inode.c
+++ b/fs/overlayfs/inode.c
@@ -5,8 +5,10 @@
  */
 
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/cred.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include <linux/posix_acl.h>
 #include <linux/ratelimit.h>
diff --git a/fs/overlayfs/namei.c b/fs/overlayfs/namei.c
index 5764f91d283e..781e3be19954 100644
--- a/fs/overlayfs/namei.c
+++ b/fs/overlayfs/namei.c
@@ -7,6 +7,7 @@
 #include <linux/fs.h>
 #include <linux/cred.h>
 #include <linux/ctype.h>
+#include <linux/hex.h>
 #include <linux/namei.h>
 #include <linux/xattr.h>
 #include <linux/ratelimit.h>
diff --git a/fs/pnode.c b/fs/pnode.c
index a799e0315cc9..c2f92e5a28fa 100644
--- a/fs/pnode.c
+++ b/fs/pnode.c
@@ -9,6 +9,7 @@
 #include <linux/mount.h>
 #include <linux/fs.h>
 #include <linux/nsproxy.h>
+#include <linux/seqlock.h>
 #include <uapi/linux/mount.h>
 #include "internal.h"
 #include "pnode.h"
diff --git a/fs/proc/base.c b/fs/proc/base.c
index 98a031ac2648..cd096287d013 100644
--- a/fs/proc/base.c
+++ b/fs/proc/base.c
@@ -49,6 +49,8 @@
  */
 
 #include <linux/uaccess.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include <linux/errno.h>
 #include <linux/time.h>
diff --git a/fs/proc/bootconfig.c b/fs/proc/bootconfig.c
index e5635a6b127b..da308660aef4 100644
--- a/fs/proc/bootconfig.c
+++ b/fs/proc/bootconfig.c
@@ -9,6 +9,7 @@
 #include <linux/seq_file.h>
 #include <linux/bootconfig.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 static char *saved_boot_config;
 
diff --git a/fs/proc/fd.c b/fs/proc/fd.c
index 6e72e5ad42bc..33c264f40263 100644
--- a/fs/proc/fd.c
+++ b/fs/proc/fd.c
@@ -11,6 +11,7 @@
 #include <linux/security.h>
 #include <linux/file.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/fs.h>
 #include <linux/filelock.h>
 
diff --git a/fs/proc/inode.c b/fs/proc/inode.c
index b33e490e3fd9..24a9373ba879 100644
--- a/fs/proc/inode.c
+++ b/fs/proc/inode.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/cache.h>
+#include <linux/completion.h>
 #include <linux/time.h>
 #include <linux/proc_fs.h>
 #include <linux/kernel.h>
diff --git a/fs/proc/proc_sysctl.c b/fs/proc/proc_sysctl.c
index 37cde0efee57..ddba6a238582 100644
--- a/fs/proc/proc_sysctl.c
+++ b/fs/proc/proc_sysctl.c
@@ -3,6 +3,7 @@
  * /proc/sys support
  */
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/poll.h>
 #include <linux/proc_fs.h>
@@ -15,6 +16,7 @@
 #include <linux/uio.h>
 #include <linux/module.h>
 #include <linux/bpf-cgroup.h>
+#include <linux/completion.h>
 #include <linux/mount.h>
 #include <linux/kmemleak.h>
 #include "internal.h"
diff --git a/fs/proc/root.c b/fs/proc/root.c
index b55dbc70287b..888daa5e86ba 100644
--- a/fs/proc/root.c
+++ b/fs/proc/root.c
@@ -7,12 +7,15 @@
  *  proc root directory handling functions
  */
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/time.h>
 #include <linux/proc_fs.h>
 #include <linux/stat.h>
 #include <linux/init.h>
 #include <linux/sched.h>
 #include <linux/sched/stat.h>
+#include <linux/shrinker.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/bitops.h>
 #include <linux/user_namespace.h>
diff --git a/fs/proc/self.c b/fs/proc/self.c
index b46fbfd22681..b0f731bd2e9e 100644
--- a/fs/proc/self.c
+++ b/fs/proc/self.c
@@ -2,6 +2,7 @@
 #include <linux/cache.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/pid_namespace.h>
 #include "internal.h"
 
diff --git a/fs/proc/task_mmu.c b/fs/proc/task_mmu.c
index 05c20e4f3c22..e9140f86b1d7 100644
--- a/fs/proc/task_mmu.c
+++ b/fs/proc/task_mmu.c
@@ -3,8 +3,10 @@
 #include <linux/mm_inline.h>
 #include <linux/hugetlb.h>
 #include <linux/huge_mm.h>
+#include <linux/kstrtox.h>
 #include <linux/mount.h>
 #include <linux/ksm.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/highmem.h>
 #include <linux/ptrace.h>
diff --git a/fs/proc/thread_self.c b/fs/proc/thread_self.c
index 0e5050d6ab64..38d56384b4f2 100644
--- a/fs/proc/thread_self.c
+++ b/fs/proc/thread_self.c
@@ -2,6 +2,7 @@
 #include <linux/cache.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/pid_namespace.h>
 #include "internal.h"
 
diff --git a/fs/proc/uptime.c b/fs/proc/uptime.c
index b5343d209381..59ff141a3d4b 100644
--- a/fs/proc/uptime.c
+++ b/fs/proc/uptime.c
@@ -7,6 +7,7 @@
 #include <linux/time.h>
 #include <linux/time_namespace.h>
 #include <linux/kernel_stat.h>
+#include <linux/timekeeping.h> // for ktime_get_boottime_ts64()
 #include "internal.h"
 
 static int uptime_proc_show(struct seq_file *m, void *v)
diff --git a/fs/pstore/ftrace.c b/fs/pstore/ftrace.c
index 776cae20af4e..8c2da5fa0c0b 100644
--- a/fs/pstore/ftrace.c
+++ b/fs/pstore/ftrace.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/moduleparam.h>
 #include <linux/compiler.h>
 #include <linux/irqflags.h>
 #include <linux/percpu.h>
diff --git a/fs/pstore/inode.c b/fs/pstore/inode.c
index d0d9bfdad30c..e6f3a134d9a5 100644
--- a/fs/pstore/inode.c
+++ b/fs/pstore/inode.c
@@ -10,6 +10,7 @@
 #include <linux/fsnotify.h>
 #include <linux/pagemap.h>
 #include <linux/highmem.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/init.h>
 #include <linux/list.h>
@@ -22,6 +23,8 @@
 #include <linux/magic.h>
 #include <linux/pstore.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <linux/uaccess.h>
 #include <linux/cleanup.h>
 
diff --git a/fs/pstore/platform.c b/fs/pstore/platform.c
index 03425928d2fb..4331d25fe108 100644
--- a/fs/pstore/platform.c
+++ b/fs/pstore/platform.c
@@ -9,6 +9,7 @@
 #define pr_fmt(fmt) "pstore: " fmt
 
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/errno.h>
 #include <linux/init.h>
@@ -17,6 +18,7 @@
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/pstore.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/slab.h>
diff --git a/fs/pstore/ram.c b/fs/pstore/ram.c
index b1a455f42e93..32765c265528 100644
--- a/fs/pstore/ram.c
+++ b/fs/pstore/ram.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/err.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/version.h>
 #include <linux/pstore.h>
 #include <linux/io.h>
diff --git a/fs/pstore/ram_core.c b/fs/pstore/ram_core.c
index f1848cdd6d34..0f28bfe94f42 100644
--- a/fs/pstore/ram_core.c
+++ b/fs/pstore/ram_core.c
@@ -15,6 +15,7 @@
 #include <linux/memblock.h>
 #include <linux/rslib.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/vmalloc.h>
 #include <linux/mm.h>
diff --git a/fs/pstore/zone.c b/fs/pstore/zone.c
index abca117725c8..d770cd243111 100644
--- a/fs/pstore/zone.c
+++ b/fs/pstore/zone.c
@@ -18,6 +18,8 @@
 #include <linux/device.h>
 #include <linux/namei.h>
 #include <linux/fcntl.h>
+#include <linux/sizes.h> // for SZ_128M
+#include <linux/sprintf.h>
 #include <linux/uio.h>
 #include <linux/writeback.h>
 #include "internal.h"
diff --git a/fs/quota/dquot.c b/fs/quota/dquot.c
index f73016c7bc39..9cfb7d404ade 100644
--- a/fs/quota/dquot.c
+++ b/fs/quota/dquot.c
@@ -61,6 +61,7 @@
 #include <linux/mm.h>
 #include <linux/time.h>
 #include <linux/types.h>
+#include <linux/shrinker.h>
 #include <linux/string.h>
 #include <linux/fcntl.h>
 #include <linux/stat.h>
diff --git a/fs/reiserfs/bitmap.c b/fs/reiserfs/bitmap.c
index bf708ac287b4..76a13665d42c 100644
--- a/fs/reiserfs/bitmap.c
+++ b/fs/reiserfs/bitmap.c
@@ -8,6 +8,7 @@
 #include <linux/errno.h>
 #include <linux/buffer_head.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/vmalloc.h>
 #include <linux/quotaops.h>
diff --git a/fs/reiserfs/journal.c b/fs/reiserfs/journal.c
index 6474529c4253..f42ea70f6661 100644
--- a/fs/reiserfs/journal.c
+++ b/fs/reiserfs/journal.c
@@ -42,6 +42,7 @@
 #include <linux/kernel.h>
 #include <linux/errno.h>
 #include <linux/fcntl.h>
+#include <linux/file.h> // for fput()
 #include <linux/stat.h>
 #include <linux/string.h>
 #include <linux/buffer_head.h>
diff --git a/fs/reiserfs/prints.c b/fs/reiserfs/prints.c
index 84a194b77f19..1f62af903aeb 100644
--- a/fs/reiserfs/prints.c
+++ b/fs/reiserfs/prints.c
@@ -5,6 +5,7 @@
 #include <linux/time.h>
 #include <linux/fs.h>
 #include "reiserfs.h"
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/buffer_head.h>
 
diff --git a/fs/reiserfs/reiserfs.h b/fs/reiserfs/reiserfs.h
index f0e1f29f20ee..644879abb621 100644
--- a/fs/reiserfs/reiserfs.h
+++ b/fs/reiserfs/reiserfs.h
@@ -14,6 +14,7 @@
 #include <asm/unaligned.h>
 #include <linux/bitops.h>
 #include <linux/proc_fs.h>
+#include <linux/quota.h>
 #include <linux/buffer_head.h>
 
 /* the 32 bit compat definitions with int argument */
diff --git a/fs/reiserfs/super.c b/fs/reiserfs/super.c
index 7b3d5aeb2a6f..3de9dd6474b0 100644
--- a/fs/reiserfs/super.c
+++ b/fs/reiserfs/super.c
@@ -24,6 +24,7 @@
 #include <linux/backing-dev.h>
 #include <linux/buffer_head.h>
 #include <linux/exportfs.h>
+#include <linux/kstrtox.h>
 #include <linux/quotaops.h>
 #include <linux/vfs.h>
 #include <linux/mount.h>
diff --git a/fs/reiserfs/xattr.c b/fs/reiserfs/xattr.c
index 998035a6388e..a247144676d6 100644
--- a/fs/reiserfs/xattr.c
+++ b/fs/reiserfs/xattr.c
@@ -43,11 +43,13 @@
 #include <linux/fs.h>
 #include <linux/file.h>
 #include <linux/pagemap.h>
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include "xattr.h"
 #include "acl.h"
 #include <linux/uaccess.h>
 #include <net/checksum.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/quotaops.h>
 #include <linux/security.h>
diff --git a/fs/seq_file.c b/fs/seq_file.c
index f5fdaf3b1572..430fd63c4246 100644
--- a/fs/seq_file.c
+++ b/fs/seq_file.c
@@ -12,11 +12,14 @@
 #include <linux/fs.h>
 #include <linux/export.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/slab.h>
 #include <linux/cred.h>
+#include <linux/hex.h>
 #include <linux/mm.h>
 #include <linux/printk.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/uio.h>
 
diff --git a/fs/smb/client/cifs_debug.c b/fs/smb/client/cifs_debug.c
index 3e4209f41c18..898ef0170c1e 100644
--- a/fs/smb/client/cifs_debug.c
+++ b/fs/smb/client/cifs_debug.c
@@ -6,6 +6,7 @@
  *   Modified by Steve French (sfrench@us.ibm.com)
  */
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/kstrtox.h>
diff --git a/fs/smb/client/cifs_spnego.c b/fs/smb/client/cifs_spnego.c
index af7849e5974f..76c3dc45c74e 100644
--- a/fs/smb/client/cifs_spnego.c
+++ b/fs/smb/client/cifs_spnego.c
@@ -9,6 +9,7 @@
 
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <keys/user-type.h>
 #include <linux/key-type.h>
diff --git a/fs/smb/client/cifsacl.c b/fs/smb/client/cifsacl.c
index f5b6df82e857..f3ee82d18a65 100644
--- a/fs/smb/client/cifsacl.c
+++ b/fs/smb/client/cifsacl.c
@@ -10,6 +10,7 @@
 
 #include <linux/fs.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/keyctl.h>
 #include <linux/key-type.h>
diff --git a/fs/smb/client/cifsroot.c b/fs/smb/client/cifsroot.c
index 56ec1b233f52..c1f9911b9c5f 100644
--- a/fs/smb/client/cifsroot.c
+++ b/fs/smb/client/cifsroot.c
@@ -6,6 +6,7 @@
  */
 #include <linux/init.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/ctype.h>
 #include <linux/string.h>
diff --git a/fs/smb/client/cifssmb.c b/fs/smb/client/cifssmb.c
index 5eb83bafc7fd..7baa96a5c917 100644
--- a/fs/smb/client/cifssmb.c
+++ b/fs/smb/client/cifssmb.c
@@ -17,6 +17,7 @@
 #include <linux/fs.h>
 #include <linux/filelock.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/vfs.h>
 #include <linux/slab.h>
 #include <linux/posix_acl_xattr.h>
diff --git a/fs/smb/client/connect.c b/fs/smb/client/connect.c
index d03253f8f145..3b010f982861 100644
--- a/fs/smb/client/connect.c
+++ b/fs/smb/client/connect.c
@@ -7,6 +7,7 @@
  */
 #include <linux/fs.h>
 #include <linux/net.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sched/mm.h>
 #include <linux/sched/signal.h>
diff --git a/fs/smb/client/dfs.c b/fs/smb/client/dfs.c
index 449c59830039..0491c3e0b2bd 100644
--- a/fs/smb/client/dfs.c
+++ b/fs/smb/client/dfs.c
@@ -8,6 +8,7 @@
 #include "dns_resolve.h"
 #include "fs_context.h"
 #include "dfs.h"
+#include <linux/sprintf.h>
 
 /**
  * dfs_parse_target_referral - set fs context for dfs target referral
diff --git a/fs/smb/client/dfs_cache.c b/fs/smb/client/dfs_cache.c
index 508d831fabe3..d48cace1be8a 100644
--- a/fs/smb/client/dfs_cache.c
+++ b/fs/smb/client/dfs_cache.c
@@ -10,6 +10,7 @@
 #include <linux/slab.h>
 #include <linux/proc_fs.h>
 #include <linux/nls.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/uuid.h>
 #include "cifsglob.h"
diff --git a/fs/smb/client/file.c b/fs/smb/client/file.c
index c3b8e7091a4d..97ba94678f59 100644
--- a/fs/smb/client/file.c
+++ b/fs/smb/client/file.c
@@ -11,6 +11,7 @@
 #include <linux/fs.h>
 #include <linux/filelock.h>
 #include <linux/backing-dev.h>
+#include <linux/completion.h>
 #include <linux/stat.h>
 #include <linux/fcntl.h>
 #include <linux/pagemap.h>
diff --git a/fs/smb/client/fscache.c b/fs/smb/client/fscache.c
index c4a3cb736881..5eb99f3d96de 100644
--- a/fs/smb/client/fscache.c
+++ b/fs/smb/client/fscache.c
@@ -11,6 +11,7 @@
 #include "cifs_debug.h"
 #include "cifs_fs_sb.h"
 #include "cifsproto.h"
+#include <linux/sprintf.h>
 
 static void cifs_fscache_fill_volume_coherency(
 	struct cifs_tcon *tcon,
diff --git a/fs/smb/client/link.c b/fs/smb/client/link.c
index d86da949a919..61ae019a70f9 100644
--- a/fs/smb/client/link.c
+++ b/fs/smb/client/link.c
@@ -6,6 +6,7 @@
  *
  */
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/slab.h>
 #include <linux/namei.h>
diff --git a/fs/smb/client/misc.c b/fs/smb/client/misc.c
index 0748d7b757b9..1bb0be5cac3e 100644
--- a/fs/smb/client/misc.c
+++ b/fs/smb/client/misc.c
@@ -9,6 +9,7 @@
 #include <linux/slab.h>
 #include <linux/ctype.h>
 #include <linux/mempool.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "cifspdu.h"
 #include "cifsglob.h"
@@ -19,6 +20,7 @@
 #include "cifs_unicode.h"
 #include "smb2pdu.h"
 #include "cifsfs.h"
+#include <linux/completion.h>
 #ifdef CONFIG_CIFS_DFS_UPCALL
 #include "dns_resolve.h"
 #include "dfs_cache.h"
diff --git a/fs/smb/client/netmisc.c b/fs/smb/client/netmisc.c
index 1b52e6ac431c..a4be516490c9 100644
--- a/fs/smb/client/netmisc.c
+++ b/fs/smb/client/netmisc.c
@@ -23,6 +23,7 @@
 #include "smberr.h"
 #include "cifs_debug.h"
 #include "nterr.h"
+#include <linux/kstrtox.h>
 
 struct smb_to_posix_error {
 	__u16 smb_err;
diff --git a/fs/smb/client/sess.c b/fs/smb/client/sess.c
index 8f37373fd333..b147671a3bb7 100644
--- a/fs/smb/client/sess.c
+++ b/fs/smb/client/sess.c
@@ -15,6 +15,7 @@
 #include "cifs_debug.h"
 #include "ntlmssp.h"
 #include "nterr.h"
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/slab.h>
 #include <linux/version.h>
diff --git a/fs/smb/client/smbdirect.c b/fs/smb/client/smbdirect.c
index d74e829de51c..68ecbd3d8e97 100644
--- a/fs/smb/client/smbdirect.c
+++ b/fs/smb/client/smbdirect.c
@@ -10,6 +10,8 @@
 #include "cifs_debug.h"
 #include "cifsproto.h"
 #include "smb2proto.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 static struct smbd_response *get_empty_queue_buffer(
 		struct smbd_connection *info);
diff --git a/fs/smb/server/ndr.c b/fs/smb/server/ndr.c
index 3507d8f89074..cd89a8c9e09a 100644
--- a/fs/smb/server/ndr.c
+++ b/fs/smb/server/ndr.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 
 #include "glob.h"
 #include "ndr.h"
diff --git a/fs/smb/server/smb2pdu.c b/fs/smb/server/smb2pdu.c
index 089527a8b4ff..cca35dbdf728 100644
--- a/fs/smb/server/smb2pdu.c
+++ b/fs/smb/server/smb2pdu.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/inetdevice.h>
+#include <linux/sprintf.h>
 #include <net/addrconf.h>
 #include <linux/syscalls.h>
 #include <linux/namei.h>
diff --git a/fs/smb/server/transport_ipc.c b/fs/smb/server/transport_ipc.c
index f29bb03f0dc4..19016c0baba9 100644
--- a/fs/smb/server/transport_ipc.c
+++ b/fs/smb/server/transport_ipc.c
@@ -7,6 +7,7 @@
 #include <linux/slab.h>
 #include <linux/rwsem.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/hashtable.h>
 #include <net/net_namespace.h>
diff --git a/fs/smb/server/transport_rdma.c b/fs/smb/server/transport_rdma.c
index 8faa25c6e129..2208838ec22c 100644
--- a/fs/smb/server/transport_rdma.c
+++ b/fs/smb/server/transport_rdma.c
@@ -14,9 +14,11 @@
 #include <linux/mempool.h>
 #include <linux/highmem.h>
 #include <linux/scatterlist.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/rdma_cm.h>
 #include <rdma/rw.h>
+#include <linux/completion.h>
 
 #include "glob.h"
 #include "connection.h"
diff --git a/fs/smb/server/vfs.c b/fs/smb/server/vfs.c
index c487e834331a..626bccaf0e72 100644
--- a/fs/smb/server/vfs.c
+++ b/fs/smb/server/vfs.c
@@ -7,6 +7,7 @@
 #include <linux/kernel.h>
 #include <linux/fs.h>
 #include <linux/filelock.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/backing-dev.h>
 #include <linux/writeback.h>
diff --git a/fs/squashfs/super.c b/fs/squashfs/super.c
index 22e812808e5c..dacccbf60963 100644
--- a/fs/squashfs/super.c
+++ b/fs/squashfs/super.c
@@ -20,6 +20,7 @@
 #include <linux/fs.h>
 #include <linux/fs_context.h>
 #include <linux/fs_parser.h>
+#include <linux/kstrtox.h>
 #include <linux/vfs.h>
 #include <linux/slab.h>
 #include <linux/mutex.h>
diff --git a/fs/super.c b/fs/super.c
index 08dcc3371aa0..2ab97cc49374 100644
--- a/fs/super.c
+++ b/fs/super.c
@@ -26,6 +26,7 @@
 #include <linux/blkdev.h>
 #include <linux/mount.h>
 #include <linux/security.h>
+#include <linux/sprintf.h>
 #include <linux/writeback.h>		/* for the emergency remount stuff */
 #include <linux/idr.h>
 #include <linux/mutex.h>
diff --git a/fs/sysctls.c b/fs/sysctls.c
index 8dbde9a802fa..90894bb067dd 100644
--- a/fs/sysctls.c
+++ b/fs/sysctls.c
@@ -6,6 +6,7 @@
  */
 #include <linux/init.h>
 #include <linux/sysctl.h>
+#include <linux/highuid.h>
 
 static struct ctl_table fs_shared_sysctls[] = {
 	{
diff --git a/fs/sysfs/file.c b/fs/sysfs/file.c
index 6b7652fb8050..35b7b6fb39e6 100644
--- a/fs/sysfs/file.c
+++ b/fs/sysfs/file.c
@@ -15,6 +15,7 @@
 #include <linux/list.h>
 #include <linux/mutex.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/mm.h>
 
 #include "sysfs.h"
diff --git a/fs/sysfs/mount.c b/fs/sysfs/mount.c
index 98467bb76737..2380a3f6f328 100644
--- a/fs/sysfs/mount.c
+++ b/fs/sysfs/mount.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/fs.h>
+#include <linux/kobject_ns.h>
 #include <linux/magic.h>
 #include <linux/mount.h>
 #include <linux/init.h>
diff --git a/fs/tracefs/inode.c b/fs/tracefs/inode.c
index d65ffad4c327..2522d2c1805f 100644
--- a/fs/tracefs/inode.c
+++ b/fs/tracefs/inode.c
@@ -21,6 +21,7 @@
 #include <linux/parser.h>
 #include <linux/magic.h>
 #include <linux/slab.h>
+#include <linux/sysfs.h>
 #include "internal.h"
 
 #define TRACEFS_DEFAULT_MODE	0700
diff --git a/fs/ubifs/auth.c b/fs/ubifs/auth.c
index a4a0158f712d..5b96d650af77 100644
--- a/fs/ubifs/auth.c
+++ b/fs/ubifs/auth.c
@@ -14,6 +14,7 @@
 #include <crypto/utils.h>
 #include <keys/user-type.h>
 #include <keys/asymmetric-type.h>
+#include <linux/sprintf.h>
 
 #include "ubifs.h"
 
diff --git a/fs/ubifs/debug.c b/fs/ubifs/debug.c
index d013c5b3f1ed..a7738f61b0ac 100644
--- a/fs/ubifs/debug.c
+++ b/fs/ubifs/debug.c
@@ -18,8 +18,10 @@
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/math64.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 #include <linux/ctype.h>
 #include "ubifs.h"
 
diff --git a/fs/ubifs/io.c b/fs/ubifs/io.c
index 01d8eb170382..56e95da4f7ef 100644
--- a/fs/ubifs/io.c
+++ b/fs/ubifs/io.c
@@ -60,6 +60,7 @@
 
 #include <linux/crc32.h>
 #include <linux/slab.h>
+#include <linux/hrtimer.h>
 #include "ubifs.h"
 
 /**
diff --git a/fs/ubifs/shrinker.c b/fs/ubifs/shrinker.c
index d00a6f20ac7b..26880cae8513 100644
--- a/fs/ubifs/shrinker.c
+++ b/fs/ubifs/shrinker.c
@@ -29,6 +29,8 @@
 
 #include "ubifs.h"
 
+#include <linux/shrinker.h>
+
 /* List of all UBIFS file-system instances */
 LIST_HEAD(ubifs_infos);
 
diff --git a/fs/ubifs/super.c b/fs/ubifs/super.c
index 09e270d6ed02..df4da01b3b97 100644
--- a/fs/ubifs/super.c
+++ b/fs/ubifs/super.c
@@ -15,6 +15,8 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
@@ -23,7 +25,9 @@
 #include <linux/seq_file.h>
 #include <linux/mount.h>
 #include <linux/math64.h>
+#include <linux/sprintf.h>
 #include <linux/writeback.h>
+#include <linux/hrtimer.h>
 #include "ubifs.h"
 
 static int ubifs_default_version_set(const char *val, const struct kernel_param *kp)
diff --git a/fs/ubifs/sysfs.c b/fs/ubifs/sysfs.c
index 1c958148bb87..1a0a67e343a9 100644
--- a/fs/ubifs/sysfs.c
+++ b/fs/ubifs/sysfs.c
@@ -8,7 +8,11 @@
  */
 
 
+#include <linux/completion.h>
 #include <linux/fs.h>
+#include <linux/kobject.h>
+#include <linux/sprintf.h>
+
 #include "ubifs.h"
 
 enum attr_id_t {
diff --git a/fs/unicode/mkutf8data.c b/fs/unicode/mkutf8data.c
index bc1a7c8b5c8d..47a7653bcf09 100644
--- a/fs/unicode/mkutf8data.c
+++ b/fs/unicode/mkutf8data.c
@@ -23,6 +23,7 @@
 #include <stdlib.h>
 #include <stdio.h>
 #include <assert.h>
+#include <linux/sprintf.h>
 #include <string.h>
 #include <unistd.h>
 #include <errno.h>
diff --git a/fs/verity/enable.c b/fs/verity/enable.c
index c284f46d1b53..9f2a70f9540a 100644
--- a/fs/verity/enable.c
+++ b/fs/verity/enable.c
@@ -8,6 +8,7 @@
 #include "fsverity_private.h"
 
 #include <crypto/hash.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/mount.h>
 #include <linux/sched/signal.h>
 #include <linux/uaccess.h>
diff --git a/fs/verity/read_metadata.c b/fs/verity/read_metadata.c
index f58432772d9e..40063fcdb428 100644
--- a/fs/verity/read_metadata.c
+++ b/fs/verity/read_metadata.c
@@ -9,6 +9,7 @@
 
 #include <linux/backing-dev.h>
 #include <linux/highmem.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/sched/signal.h>
 #include <linux/uaccess.h>
 
diff --git a/fs/xfs/libxfs/xfs_btree.c b/fs/xfs/libxfs/xfs_btree.c
index ea8d3659df20..f50e456c8376 100644
--- a/fs/xfs/libxfs/xfs_btree.c
+++ b/fs/xfs/libxfs/xfs_btree.c
@@ -27,6 +27,7 @@
 #include "xfs_bmap_btree.h"
 #include "xfs_rmap_btree.h"
 #include "xfs_refcount_btree.h"
+#include <linux/completion.h>
 
 /*
  * Btree magic numbers.
diff --git a/fs/xfs/scrub/stats.c b/fs/xfs/scrub/stats.c
index cd91db4a5548..8383bd0091cd 100644
--- a/fs/xfs/scrub/stats.c
+++ b/fs/xfs/scrub/stats.c
@@ -15,6 +15,8 @@
 #include "scrub/scrub.h"
 #include "scrub/stats.h"
 #include "scrub/trace.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 struct xchk_scrub_stats {
 	/* all 32-bit counters here */
diff --git a/fs/xfs/xfs_bio_io.c b/fs/xfs/xfs_bio_io.c
index fe21c76f75b8..8368db1bdad7 100644
--- a/fs/xfs/xfs_bio_io.c
+++ b/fs/xfs/xfs_bio_io.c
@@ -3,6 +3,7 @@
  * Copyright (c) 2019 Christoph Hellwig.
  */
 #include "xfs.h"
+#include <linux/bio.h>
 
 static inline unsigned int bio_max_vecs(unsigned int count)
 {
diff --git a/fs/xfs/xfs_buf.c b/fs/xfs/xfs_buf.c
index 01b41fabbe3c..0751fd32e6c2 100644
--- a/fs/xfs/xfs_buf.c
+++ b/fs/xfs/xfs_buf.c
@@ -5,6 +5,8 @@
  */
 #include "xfs.h"
 #include <linux/backing-dev.h>
+#include <linux/bio.h>
+#include <linux/completion.h>
 #include <linux/dax.h>
 
 #include "xfs_shared.h"
diff --git a/fs/xfs/xfs_discard.c b/fs/xfs/xfs_discard.c
index d5787991bb5b..da803862ea08 100644
--- a/fs/xfs/xfs_discard.c
+++ b/fs/xfs/xfs_discard.c
@@ -18,6 +18,7 @@
 #include "xfs_trace.h"
 #include "xfs_log.h"
 #include "xfs_ag.h"
+#include <linux/bio.h>
 
 /*
  * Notes on an efficient, low latency fstrim algorithm
diff --git a/fs/xfs/xfs_dquot.c b/fs/xfs/xfs_dquot.c
index b4f20d9c8f98..bf06219d28c2 100644
--- a/fs/xfs/xfs_dquot.c
+++ b/fs/xfs/xfs_dquot.c
@@ -24,6 +24,7 @@
 #include "xfs_log.h"
 #include "xfs_bmap_btree.h"
 #include "xfs_error.h"
+#include <linux/completion.h>
 
 /*
  * Lock order:
diff --git a/fs/xfs/xfs_error.c b/fs/xfs/xfs_error.c
index b2cbbba3e15a..8d558f0f1b3b 100644
--- a/fs/xfs/xfs_error.c
+++ b/fs/xfs/xfs_error.c
@@ -14,6 +14,9 @@
 #include "xfs_error.h"
 #include "xfs_sysfs.h"
 #include "xfs_inode.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 #ifdef DEBUG
 
diff --git a/fs/xfs/xfs_log.c b/fs/xfs/xfs_log.c
index a1650fc81382..ede812f82175 100644
--- a/fs/xfs/xfs_log.c
+++ b/fs/xfs/xfs_log.c
@@ -20,6 +20,7 @@
 #include "xfs_sysfs.h"
 #include "xfs_sb.h"
 #include "xfs_health.h"
+#include <linux/bio.h>
 
 struct kmem_cache	*xfs_log_ticket_cache;
 
diff --git a/fs/xfs/xfs_message.c b/fs/xfs/xfs_message.c
index 8f495cc23903..e50dbdef5ed8 100644
--- a/fs/xfs/xfs_message.c
+++ b/fs/xfs/xfs_message.c
@@ -10,6 +10,7 @@
 #include "xfs_format.h"
 #include "xfs_trans_resv.h"
 #include "xfs_mount.h"
+#include <linux/kstrtox.h>
 
 /*
  * XFS logging functions
diff --git a/fs/xfs/xfs_stats.c b/fs/xfs/xfs_stats.c
index 90a77cd3ebad..cf2eafe2108b 100644
--- a/fs/xfs/xfs_stats.c
+++ b/fs/xfs/xfs_stats.c
@@ -4,6 +4,7 @@
  * All Rights Reserved.
  */
 #include "xfs.h"
+#include <linux/sprintf.h>
 
 struct xstats xfsstats;
 
diff --git a/fs/xfs/xfs_super.c b/fs/xfs/xfs_super.c
index 079c781c74c0..5013d71143c2 100644
--- a/fs/xfs/xfs_super.c
+++ b/fs/xfs/xfs_super.c
@@ -44,6 +44,7 @@
 #include "xfs_dahash_test.h"
 #include "xfs_rtbitmap.h"
 #include "scrub/stats.h"
+#include <linux/kstrtox.h>
 
 #include <linux/magic.h>
 #include <linux/fs_context.h>
diff --git a/fs/xfs/xfs_sysfs.c b/fs/xfs/xfs_sysfs.c
index 17485666b672..891828e0e7b0 100644
--- a/fs/xfs/xfs_sysfs.c
+++ b/fs/xfs/xfs_sysfs.c
@@ -13,6 +13,9 @@
 #include "xfs_log.h"
 #include "xfs_log_priv.h"
 #include "xfs_mount.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 
 struct xfs_sysfs_attr {
 	struct attribute attr;
diff --git a/fs/zonefs/super.c b/fs/zonefs/super.c
index 93971742613a..52b77122611a 100644
--- a/fs/zonefs/super.c
+++ b/fs/zonefs/super.c
@@ -10,7 +10,9 @@
 #include <linux/iomap.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/bio.h>
 #include <linux/blkdev.h>
+#include <linux/sprintf.h>
 #include <linux/statfs.h>
 #include <linux/writeback.h>
 #include <linux/quotaops.h>
diff --git a/fs/zonefs/sysfs.c b/fs/zonefs/sysfs.c
index 8ccb65c2b419..bcc25bac7cb9 100644
--- a/fs/zonefs/sysfs.c
+++ b/fs/zonefs/sysfs.c
@@ -6,7 +6,9 @@
  */
 #include <linux/fs.h>
 #include <linux/seq_file.h>
+#include <linux/sysfs.h>
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 
 #include "zonefs.h"
 
diff --git a/include/acpi/pcc.h b/include/acpi/pcc.h
index 9b373d172a77..09d655763bf3 100644
--- a/include/acpi/pcc.h
+++ b/include/acpi/pcc.h
@@ -9,6 +9,10 @@
 #include <linux/mailbox_controller.h>
 #include <linux/mailbox_client.h>
 
+#ifndef CONFIG_PCC
+#include <linux/err.h> // for ERR_PTR()
+#endif
+
 struct pcc_mbox_chan {
 	struct mbox_chan *mchan;
 	u64 shmem_base_addr;
diff --git a/include/acpi/platform/aclinux.h b/include/acpi/platform/aclinux.h
index 565341c826e3..9d88b028f6b0 100644
--- a/include/acpi/platform/aclinux.h
+++ b/include/acpi/platform/aclinux.h
@@ -54,6 +54,7 @@
 #include <linux/ctype.h>
 #include <linux/sched.h>
 #include <linux/atomic.h>
+#include <linux/kstrtox.h>
 #include <linux/math64.h>
 #include <linux/slab.h>
 #include <linux/spinlock_types.h>
diff --git a/include/drm/drm_color_mgmt.h b/include/drm/drm_color_mgmt.h
index ed81741036d7..b5e183358bee 100644
--- a/include/drm/drm_color_mgmt.h
+++ b/include/drm/drm_color_mgmt.h
@@ -23,6 +23,7 @@
 #ifndef __DRM_COLOR_MGMT_H__
 #define __DRM_COLOR_MGMT_H__
 
+#include <linux/bits.h>
 #include <linux/ctype.h>
 #include <linux/math64.h>
 #include <drm/drm_property.h>
diff --git a/include/drm/drm_connector.h b/include/drm/drm_connector.h
index fe88d7fc6b8f..8f2df4f437df 100644
--- a/include/drm/drm_connector.h
+++ b/include/drm/drm_connector.h
@@ -34,6 +34,7 @@
 
 #include <uapi/drm/drm_mode.h>
 
+struct dentry;
 struct drm_connector_helper_funcs;
 struct drm_modeset_acquire_ctx;
 struct drm_device;
diff --git a/include/drm/drm_modeset_lock.h b/include/drm/drm_modeset_lock.h
index ec4f543c3d95..f901d4ad0c54 100644
--- a/include/drm/drm_modeset_lock.h
+++ b/include/drm/drm_modeset_lock.h
@@ -27,6 +27,7 @@
 #include <linux/types.h> /* stackdepot.h is not self-contained */
 #include <linux/stackdepot.h>
 #include <linux/ww_mutex.h>
+#include <linux/lockdep.h>
 
 struct drm_modeset_lock;
 
diff --git a/include/drm/gpu_scheduler.h b/include/drm/gpu_scheduler.h
index 5acc64954a88..4c598cfc2af3 100644
--- a/include/drm/gpu_scheduler.h
+++ b/include/drm/gpu_scheduler.h
@@ -28,6 +28,7 @@
 #include <linux/dma-fence.h>
 #include <linux/completion.h>
 #include <linux/xarray.h>
+#include <linux/wait.h>
 #include <linux/workqueue.h>
 
 #define MAX_WAIT_SCHED_ENTITY_Q_EMPTY msecs_to_jiffies(1000)
diff --git a/include/kunit/test.h b/include/kunit/test.h
index fcb4a4940ace..a512bfd92294 100644
--- a/include/kunit/test.h
+++ b/include/kunit/test.h
@@ -24,6 +24,7 @@
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 
diff --git a/include/linux/backing-dev-defs.h b/include/linux/backing-dev-defs.h
index 2ad261082bba..a5687f7f38dd 100644
--- a/include/linux/backing-dev-defs.h
+++ b/include/linux/backing-dev-defs.h
@@ -10,10 +10,15 @@
 #include <linux/percpu-refcount.h>
 #include <linux/flex_proportions.h>
 #include <linux/timer.h>
+#include <linux/wait.h>
 #include <linux/workqueue.h>
 #include <linux/kref.h>
 #include <linux/refcount.h>
 
+#ifdef CONFIG_CGROUP_WRITEBACK
+#include <linux/rwsem.h>
+#endif
+
 struct page;
 struct device;
 struct dentry;
diff --git a/include/linux/backing-dev.h b/include/linux/backing-dev.h
index 8e7af9a03b41..d8c63b13ce0c 100644
--- a/include/linux/backing-dev.h
+++ b/include/linux/backing-dev.h
@@ -15,6 +15,7 @@
 #include <linux/device.h>
 #include <linux/writeback.h>
 #include <linux/backing-dev-defs.h>
+#include <linux/percpu_counter.h>
 #include <linux/slab.h>
 
 static inline struct backing_dev_info *bdi_get(struct backing_dev_info *bdi)
diff --git a/include/linux/bio.h b/include/linux/bio.h
index 875d792bffff..afae5a73b7cd 100644
--- a/include/linux/bio.h
+++ b/include/linux/bio.h
@@ -8,6 +8,7 @@
 #include <linux/mempool.h>
 /* struct bio, bio_vec and BIO_* flags are defined in blk_types.h */
 #include <linux/blk_types.h>
+#include <linux/bvec.h>
 #include <linux/uio.h>
 
 #define BIO_MAX_VECS		256U
diff --git a/include/linux/blk-integrity.h b/include/linux/blk-integrity.h
index 378b2459efe2..d91d3363d8b3 100644
--- a/include/linux/blk-integrity.h
+++ b/include/linux/blk-integrity.h
@@ -3,6 +3,7 @@
 #define _LINUX_BLK_INTEGRITY_H
 
 #include <linux/blk-mq.h>
+#include <linux/bio.h>
 
 struct request;
 
diff --git a/include/linux/blk-mq.h b/include/linux/blk-mq.h
index 7a8150a5f051..d3e9e69aaa3c 100644
--- a/include/linux/blk-mq.h
+++ b/include/linux/blk-mq.h
@@ -2,6 +2,7 @@
 #ifndef BLK_MQ_H
 #define BLK_MQ_H
 
+#include <linux/bio.h>
 #include <linux/blkdev.h>
 #include <linux/sbitmap.h>
 #include <linux/lockdep.h>
diff --git a/include/linux/blkdev.h b/include/linux/blkdev.h
index 6b808a293a09..7514e2a70601 100644
--- a/include/linux/blkdev.h
+++ b/include/linux/blkdev.h
@@ -6,6 +6,7 @@
 #define _LINUX_BLKDEV_H
 
 #include <linux/types.h>
+#include <linux/fs.h> // for inode_unhashed()
 #include <linux/blk_types.h>
 #include <linux/device.h>
 #include <linux/list.h>
@@ -22,6 +23,7 @@
 #include <linux/blkzoned.h>
 #include <linux/sched.h>
 #include <linux/sbitmap.h>
+#include <linux/uio.h> // for iov_iter_is_aligned()
 #include <linux/uuid.h>
 #include <linux/xarray.h>
 #include <linux/file.h>
diff --git a/include/linux/bootconfig.h b/include/linux/bootconfig.h
index ca73940e26df..81f3738d453c 100644
--- a/include/linux/bootconfig.h
+++ b/include/linux/bootconfig.h
@@ -9,6 +9,7 @@
 
 #ifdef __KERNEL__
 #include <linux/kernel.h>
+#include <linux/init.h> // for __init
 #include <linux/types.h>
 #else /* !__KERNEL__ */
 /*
diff --git a/include/linux/bpf.h b/include/linux/bpf.h
index 1ebbee1d648e..71cf43fbdc24 100644
--- a/include/linux/bpf.h
+++ b/include/linux/bpf.h
@@ -18,7 +18,7 @@
 #include <linux/refcount.h>
 #include <linux/mutex.h>
 #include <linux/module.h>
-#include <linux/kallsyms.h>
+#include <linux/kallsyms.h> // for KSYM_NAME_LEN
 #include <linux/capability.h>
 #include <linux/sched/mm.h>
 #include <linux/slab.h>
diff --git a/include/linux/bpfptr.h b/include/linux/bpfptr.h
index 79b2f78eec1a..5a0fdf53c168 100644
--- a/include/linux/bpfptr.h
+++ b/include/linux/bpfptr.h
@@ -3,6 +3,7 @@
 #ifndef _LINUX_BPFPTR_H
 #define _LINUX_BPFPTR_H
 
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/mm.h>
 #include <linux/sockptr.h>
 
diff --git a/include/linux/can/dev.h b/include/linux/can/dev.h
index 1b92aed49363..332ece824fde 100644
--- a/include/linux/can/dev.h
+++ b/include/linux/can/dev.h
@@ -22,6 +22,7 @@
 #include <linux/can/skb.h>
 #include <linux/ethtool.h>
 #include <linux/netdevice.h>
+#include <linux/workqueue.h> // for struct delayed_work
 
 /*
  * CAN mode
diff --git a/include/linux/cpu.h b/include/linux/cpu.h
index 0b993a140946..18d557399bf2 100644
--- a/include/linux/cpu.h
+++ b/include/linux/cpu.h
@@ -19,6 +19,7 @@
 #include <linux/cpumask.h>
 #include <linux/cpuhotplug.h>
 #include <linux/cpu_smt.h>
+#include <vdso/time64.h> // for NSEC_PER_USEC
 
 struct device;
 struct device_node;
diff --git a/include/linux/dev_printk.h b/include/linux/dev_printk.h
index 6bfe70decc9f..828afbf8b045 100644
--- a/include/linux/dev_printk.h
+++ b/include/linux/dev_printk.h
@@ -12,6 +12,7 @@
 #define _DEVICE_PRINTK_H_
 
 #include <linux/compiler.h>
+#include <linux/stdarg.h>
 #include <linux/types.h>
 #include <linux/ratelimit.h>
 
@@ -20,6 +21,7 @@
 #endif
 
 struct device;
+struct va_format;
 
 #define PRINTK_INFO_SUBSYSTEM_LEN	16
 #define PRINTK_INFO_DEVICE_LEN		48
diff --git a/include/linux/device-mapper.h b/include/linux/device-mapper.h
index 82b2195efaca..43260a6f6b79 100644
--- a/include/linux/device-mapper.h
+++ b/include/linux/device-mapper.h
@@ -14,6 +14,7 @@
 #include <linux/dm-ioctl.h>
 #include <linux/math64.h>
 #include <linux/ratelimit.h>
+#include <linux/sprintf.h> // for scnprintf()
 
 struct dm_dev;
 struct dm_target;
diff --git a/include/linux/device.h b/include/linux/device.h
index 97c4b046c09d..ddba2d30c541 100644
--- a/include/linux/device.h
+++ b/include/linux/device.h
@@ -31,6 +31,7 @@
 #include <linux/device/class.h>
 #include <linux/device/driver.h>
 #include <linux/cleanup.h>
+#include <linux/sysfs.h> // for __ATTR_*
 #include <asm/device.h>
 
 struct device;
diff --git a/include/linux/device/bus.h b/include/linux/device/bus.h
index 5ef4ec1c36c3..76826d165298 100644
--- a/include/linux/device/bus.h
+++ b/include/linux/device/bus.h
@@ -17,6 +17,7 @@
 #include <linux/kobject.h>
 #include <linux/klist.h>
 #include <linux/pm.h>
+#include <linux/sysfs.h> // for struct attribute
 
 struct device_driver;
 struct fwnode_handle;
diff --git a/include/linux/device/class.h b/include/linux/device/class.h
index c576b49c55c2..6b1cebe43f8e 100644
--- a/include/linux/device/class.h
+++ b/include/linux/device/class.h
@@ -17,6 +17,7 @@
 #include <linux/kobject.h>
 #include <linux/klist.h>
 #include <linux/pm.h>
+#include <linux/uidgid_types.h>
 #include <linux/device/bus.h>
 
 struct device;
diff --git a/include/linux/dma-fence.h b/include/linux/dma-fence.h
index e06bad467f55..73358704c8a0 100644
--- a/include/linux/dma-fence.h
+++ b/include/linux/dma-fence.h
@@ -17,6 +17,7 @@
 #include <linux/wait.h>
 #include <linux/list.h>
 #include <linux/bitops.h>
+#include <linux/kernel.h> // for lower_32_bits()
 #include <linux/kref.h>
 #include <linux/sched.h>
 #include <linux/printk.h>
diff --git a/include/linux/dmaengine.h b/include/linux/dmaengine.h
index 752dbde4cec1..1a202761599a 100644
--- a/include/linux/dmaengine.h
+++ b/include/linux/dmaengine.h
@@ -7,6 +7,7 @@
 
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/idr.h> // for struct ida
 #include <linux/uio.h>
 #include <linux/bug.h>
 #include <linux/scatterlist.h>
diff --git a/include/linux/dtpm.h b/include/linux/dtpm.h
index a4a13514b730..eae69f6e4042 100644
--- a/include/linux/dtpm.h
+++ b/include/linux/dtpm.h
@@ -12,6 +12,8 @@
 #define MAX_DTPM_DESCR 8
 #define MAX_DTPM_CONSTRAINTS 1
 
+struct of_device_id;
+
 struct dtpm {
 	struct powercap_zone zone;
 	struct dtpm *parent;
diff --git a/include/linux/efi.h b/include/linux/efi.h
index c74f47711f0b..25893ead0f09 100644
--- a/include/linux/efi.h
+++ b/include/linux/efi.h
@@ -23,6 +23,7 @@
 #include <linux/pstore.h>
 #include <linux/range.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 
 #include <asm/page.h>
diff --git a/include/linux/entry-common.h b/include/linux/entry-common.h
index b0fb775a600d..b6f1952cded2 100644
--- a/include/linux/entry-common.h
+++ b/include/linux/entry-common.h
@@ -11,6 +11,7 @@
 #include <linux/livepatch.h>
 #include <linux/resume_user_mode.h>
 #include <linux/tick.h>
+#include <linux/highmem.h> // for kmap_assert_nomap()
 #include <linux/kmsan.h>
 
 #include <asm/entry-common.h>
diff --git a/include/linux/extcon.h b/include/linux/extcon.h
index e596a0abcb27..0fd2ca917549 100644
--- a/include/linux/extcon.h
+++ b/include/linux/extcon.h
@@ -19,6 +19,9 @@
 #define __LINUX_EXTCON_H__
 
 #include <linux/device.h>
+#include <linux/errno.h>
+#include <linux/notifier.h>
+#include <linux/types.h>
 
 /*
  * Define the type of supported external connectors
diff --git a/include/linux/firmware.h b/include/linux/firmware.h
index 0311858b46ce..d45acd8c1e84 100644
--- a/include/linux/firmware.h
+++ b/include/linux/firmware.h
@@ -2,6 +2,7 @@
 #ifndef _LINUX_FIRMWARE_H
 #define _LINUX_FIRMWARE_H
 
+#include <linux/err.h>
 #include <linux/types.h>
 #include <linux/compiler.h>
 #include <linux/gfp.h>
diff --git a/include/linux/flex_proportions.h b/include/linux/flex_proportions.h
index e9a72fd0bfe7..b5d8c1a1b2a9 100644
--- a/include/linux/flex_proportions.h
+++ b/include/linux/flex_proportions.h
@@ -12,6 +12,7 @@
 #include <linux/spinlock.h>
 #include <linux/seqlock.h>
 #include <linux/gfp.h>
+#include <linux/irqflags.h> // for local_irq_save()
 
 /*
  * When maximum proportion of some event type is specified, this is the
diff --git a/include/linux/framer/framer-provider.h b/include/linux/framer/framer-provider.h
index 782cd5fc83d5..0519dfe6f61c 100644
--- a/include/linux/framer/framer-provider.h
+++ b/include/linux/framer/framer-provider.h
@@ -10,6 +10,7 @@
 #ifndef __DRIVERS_PROVIDER_FRAMER_H
 #define __DRIVERS_PROVIDER_FRAMER_H
 
+#include <linux/device.h>
 #include <linux/export.h>
 #include <linux/framer/framer.h>
 #include <linux/types.h>
diff --git a/include/linux/futex.h b/include/linux/futex.h
index b70df27d7e85..9fe23f0681ca 100644
--- a/include/linux/futex.h
+++ b/include/linux/futex.h
@@ -4,6 +4,7 @@
 
 #include <linux/sched.h>
 #include <linux/ktime.h>
+#include <linux/mutex.h>
 
 #include <uapi/linux/futex.h>
 
diff --git a/include/linux/hisi_acc_qm.h b/include/linux/hisi_acc_qm.h
index 5f4c74facf6a..931decc7dc01 100644
--- a/include/linux/hisi_acc_qm.h
+++ b/include/linux/hisi_acc_qm.h
@@ -5,7 +5,9 @@
 
 #include <linux/bitfield.h>
 #include <linux/debugfs.h>
+#include <linux/idr.h>
 #include <linux/iopoll.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/pci.h>
 
diff --git a/include/linux/hrtimer.h b/include/linux/hrtimer.h
index 641c4567cfa7..87e2b6933d02 100644
--- a/include/linux/hrtimer.h
+++ b/include/linux/hrtimer.h
@@ -20,7 +20,10 @@
 #include <linux/rbtree.h>
 #include <linux/seqlock.h>
 #include <linux/timer.h>
+#include <asm/percpu.h>  // for PER_CPU_BASE_SECTION needed by DECLARE_PER_CPU()
+#include <asm/processor.h>  /* for cpu_relax() */
 
+struct restart_block;
 struct hrtimer_clock_base;
 struct hrtimer_cpu_base;
 
diff --git a/include/linux/iio/iio.h b/include/linux/iio/iio.h
index c5b36d2c1e73..6dafef342e91 100644
--- a/include/linux/iio/iio.h
+++ b/include/linux/iio/iio.h
@@ -9,6 +9,7 @@
 
 #include <linux/device.h>
 #include <linux/cdev.h>
+#include <linux/device.h>
 #include <linux/slab.h>
 #include <linux/iio/types.h>
 /* IIO TODO LIST */
diff --git a/include/linux/iopoll.h b/include/linux/iopoll.h
index 19a7b00baff4..fc7f4185ff56 100644
--- a/include/linux/iopoll.h
+++ b/include/linux/iopoll.h
@@ -6,7 +6,6 @@
 #ifndef _LINUX_IOPOLL_H
 #define _LINUX_IOPOLL_H
 
-#include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/ktime.h>
 #include <linux/delay.h>
diff --git a/include/linux/iov_iter.h b/include/linux/iov_iter.h
index 270454a6703d..c3adba9ff389 100644
--- a/include/linux/iov_iter.h
+++ b/include/linux/iov_iter.h
@@ -10,6 +10,7 @@
 
 #include <linux/uio.h>
 #include <linux/bvec.h>
+#include <linux/highmem.h> // for kmap_local_page()
 
 typedef size_t (*iov_step_f)(void *iter_base, size_t progress, size_t len,
 			     void *priv, void *priv2);
diff --git a/include/linux/ipc.h b/include/linux/ipc.h
index 9b1434247aab..12f6839fad5b 100644
--- a/include/linux/ipc.h
+++ b/include/linux/ipc.h
@@ -7,6 +7,8 @@
 #include <linux/rhashtable-types.h>
 #include <uapi/linux/ipc.h>
 #include <linux/refcount.h>
+#include <linux/cache.h> // for ____cacheline_aligned_in_smp
+#include <linux/compiler_types.h> // for __randomize_layout
 
 /* used by in-kernel data structures */
 struct kern_ipc_perm {
diff --git a/include/linux/kernfs.h b/include/linux/kernfs.h
index 87c79d076d6d..a0d7c67d0056 100644
--- a/include/linux/kernfs.h
+++ b/include/linux/kernfs.h
@@ -60,6 +60,7 @@ struct kernfs_iattrs;
  * completion time of these sysfs operations on each CPU.
  */
 #ifdef CONFIG_SMP
+#include <linux/log2.h>
 #define NR_KERNFS_LOCK_BITS (2 * (ilog2(NR_CPUS < 32 ? NR_CPUS : 32)))
 #else
 #define NR_KERNFS_LOCK_BITS     1
diff --git a/include/linux/kobject.h b/include/linux/kobject.h
index c30affcc43b4..db51be6d4815 100644
--- a/include/linux/kobject.h
+++ b/include/linux/kobject.h
@@ -21,6 +21,7 @@
 #include <linux/compiler.h>
 #include <linux/container_of.h>
 #include <linux/spinlock.h>
+#include <linux/stdarg.h> // for va_list
 #include <linux/kref.h>
 #include <linux/kobject_ns.h>
 #include <linux/wait.h>
diff --git a/include/linux/local_lock_internal.h b/include/linux/local_lock_internal.h
index 975e33b793a7..bb3d7228916b 100644
--- a/include/linux/local_lock_internal.h
+++ b/include/linux/local_lock_internal.h
@@ -16,6 +16,8 @@ typedef struct {
 } local_lock_t;
 
 #ifdef CONFIG_DEBUG_LOCK_ALLOC
+#include <asm/current.h>
+
 # define LOCAL_LOCK_DEBUG_INIT(lockname)		\
 	.dep_map = {					\
 		.name = #lockname,			\
diff --git a/include/linux/memory_hotplug.h b/include/linux/memory_hotplug.h
index 7a9ff464608d..ace4e4e48315 100644
--- a/include/linux/memory_hotplug.h
+++ b/include/linux/memory_hotplug.h
@@ -3,6 +3,7 @@
 #define __LINUX_MEMORY_HOTPLUG_H
 
 #include <linux/mmzone.h>
+#include <linux/seqlock.h>
 #include <linux/spinlock.h>
 #include <linux/notifier.h>
 #include <linux/bug.h>
diff --git a/include/linux/memremap.h b/include/linux/memremap.h
index 3f7143ade32c..eea01060a6b7 100644
--- a/include/linux/memremap.h
+++ b/include/linux/memremap.h
@@ -2,6 +2,7 @@
 #ifndef _LINUX_MEMREMAP_H_
 #define _LINUX_MEMREMAP_H_
 
+#include <linux/completion.h>
 #include <linux/mmzone.h>
 #include <linux/range.h>
 #include <linux/ioport.h>
diff --git a/include/linux/mm.h b/include/linux/mm.h
index 6095c86aa040..a2b9223a5736 100644
--- a/include/linux/mm.h
+++ b/include/linux/mm.h
@@ -23,6 +23,8 @@
 #include <linux/err.h>
 #include <linux/page-flags.h>
 #include <linux/page_ref.h>
+#include <linux/percpu_counter.h>
+#include <linux/rwsem.h>
 #include <linux/overflow.h>
 #include <linux/sizes.h>
 #include <linux/sched.h>
@@ -30,6 +32,7 @@
 #include <linux/kasan.h>
 #include <linux/memremap.h>
 #include <linux/slab.h>
+#include <linux/seqlock.h>
 
 struct mempolicy;
 struct anon_vma;
diff --git a/include/linux/mm_types.h b/include/linux/mm_types.h
index 8b611e13153e..a3e6319aaf25 100644
--- a/include/linux/mm_types.h
+++ b/include/linux/mm_types.h
@@ -5,6 +5,8 @@
 #include <linux/mm_types_task.h>
 
 #include <linux/auxvec.h>
+#include <linux/cache.h> // for ____cacheline_aligned_in_smp
+#include <linux/compiler_types.h> // for __randomize_layout
 #include <linux/kref.h>
 #include <linux/list.h>
 #include <linux/spinlock.h>
diff --git a/include/linux/mnt_idmapping.h b/include/linux/mnt_idmapping.h
index cd4d5c8781f5..320febe7facf 100644
--- a/include/linux/mnt_idmapping.h
+++ b/include/linux/mnt_idmapping.h
@@ -2,6 +2,7 @@
 #ifndef _LINUX_MNT_IDMAPPING_H
 #define _LINUX_MNT_IDMAPPING_H
 
+#include <linux/cred.h> // for current_fsuid()
 #include <linux/types.h>
 #include <linux/uidgid.h>
 
diff --git a/include/linux/module.h b/include/linux/module.h
index 1153b0d99a80..fd3c85e4d95f 100644
--- a/include/linux/module.h
+++ b/include/linux/module.h
@@ -27,6 +27,7 @@
 #include <linux/tracepoint-defs.h>
 #include <linux/srcu.h>
 #include <linux/static_call_types.h>
+#include <linux/sysfs.h> // for struct attribute
 #include <linux/dynamic_debug.h>
 
 #include <linux/percpu.h>
diff --git a/include/linux/moduleparam.h b/include/linux/moduleparam.h
index bfb85fd13e1f..a285e74ec028 100644
--- a/include/linux/moduleparam.h
+++ b/include/linux/moduleparam.h
@@ -4,7 +4,7 @@
 /* (C) Copyright 2001, 2002 Rusty Russell IBM Corporation */
 #include <linux/init.h>
 #include <linux/stringify.h>
-#include <linux/kernel.h>
+#include <linux/kernel.h> // for VERIFY_OCTAL_PERMISSIONS()
 
 /* You can override this manually, but generally this should match the
    module name. */
diff --git a/include/linux/mtd/blktrans.h b/include/linux/mtd/blktrans.h
index 6e471436bba5..92a7c94777b7 100644
--- a/include/linux/mtd/blktrans.h
+++ b/include/linux/mtd/blktrans.h
@@ -8,6 +8,7 @@
 
 #include <linux/mutex.h>
 #include <linux/kref.h>
+#include <linux/list.h>
 #include <linux/sysfs.h>
 
 struct hd_geometry;
diff --git a/include/linux/ndctl.h b/include/linux/ndctl.h
index cd5a293ce3ae..4f21118ae7b1 100644
--- a/include/linux/ndctl.h
+++ b/include/linux/ndctl.h
@@ -13,6 +13,8 @@
 #ifndef _LINUX_NDCTL_H
 #define _LINUX_NDCTL_H
 
+#include <asm/page.h> // for PAGE_SIZE
+
 #include <uapi/linux/ndctl.h>
 
 enum {
diff --git a/include/linux/netlink.h b/include/linux/netlink.h
index 1a4445bf2ab9..3826b78ee8f2 100644
--- a/include/linux/netlink.h
+++ b/include/linux/netlink.h
@@ -5,6 +5,7 @@
 
 #include <linux/capability.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/export.h>
 #include <net/scm.h>
 #include <uapi/linux/netlink.h>
diff --git a/include/linux/node.h b/include/linux/node.h
index 25b66d705ee2..c4c17037c954 100644
--- a/include/linux/node.h
+++ b/include/linux/node.h
@@ -18,6 +18,8 @@
 #include <linux/device.h>
 #include <linux/cpumask.h>
 #include <linux/list.h>
+#include <linux/mmzone.h> // for enum meminit_context
+#include <linux/nodemask.h> // for node_online()
 
 /**
  * struct access_coordinate - generic performance coordinates container
diff --git a/include/linux/notifier.h b/include/linux/notifier.h
index 45702bdcbceb..96fb0b489d8a 100644
--- a/include/linux/notifier.h
+++ b/include/linux/notifier.h
@@ -13,6 +13,7 @@
 #include <linux/errno.h>
 #include <linux/mutex.h>
 #include <linux/rwsem.h>
+#include <linux/spinlock.h>
 #include <linux/srcu.h>
 
 /*
diff --git a/include/linux/ns_common.h b/include/linux/ns_common.h
index 0f1d024bd958..241cef0bfaed 100644
--- a/include/linux/ns_common.h
+++ b/include/linux/ns_common.h
@@ -2,6 +2,7 @@
 #ifndef _LINUX_NS_COMMON_H
 #define _LINUX_NS_COMMON_H
 
+#include <linux/atomic.h>
 #include <linux/refcount.h>
 
 struct proc_ns_operations;
diff --git a/include/linux/of.h b/include/linux/of.h
index 331e05918f11..eb27bd9a86db 100644
--- a/include/linux/of.h
+++ b/include/linux/of.h
@@ -16,6 +16,7 @@
 #include <linux/errno.h>
 #include <linux/kobject.h>
 #include <linux/mod_devicetable.h>
+#include <linux/numa.h> // for NUMA_NO_NODE
 #include <linux/property.h>
 #include <linux/list.h>
 
diff --git a/include/linux/pci-p2pdma.h b/include/linux/pci-p2pdma.h
index 2c07aa6b7665..7da41e4f259f 100644
--- a/include/linux/pci-p2pdma.h
+++ b/include/linux/pci-p2pdma.h
@@ -35,6 +35,10 @@ int pci_p2pdma_enable_store(const char *page, struct pci_dev **p2p_dev,
 ssize_t pci_p2pdma_enable_show(char *page, struct pci_dev *p2p_dev,
 			       bool use_p2pdma);
 #else /* CONFIG_PCI_P2PDMA */
+
+#include <linux/errno.h>
+#include <linux/sprintf.h>
+
 static inline int pci_p2pdma_add_resource(struct pci_dev *pdev, int bar,
 		size_t size, u64 offset)
 {
diff --git a/include/linux/pci.h b/include/linux/pci.h
index a7cd31906547..dbe493427ea5 100644
--- a/include/linux/pci.h
+++ b/include/linux/pci.h
@@ -43,6 +43,14 @@
 
 #include <linux/pci_ids.h>
 
+#ifdef CONFIG_PCI_DOE
+#include <linux/xarray.h>
+#endif
+
+#ifndef CONFIG_PCI_IOV
+#include <linux/err.h> // for ERR_PTR()
+#endif
+
 #define PCI_STATUS_ERROR_BITS (PCI_STATUS_DETECTED_PARITY  | \
 			       PCI_STATUS_SIG_SYSTEM_ERROR | \
 			       PCI_STATUS_REC_MASTER_ABORT | \
diff --git a/include/linux/percpu_counter.h b/include/linux/percpu_counter.h
index 3a44dd1e33d2..810912b1518b 100644
--- a/include/linux/percpu_counter.h
+++ b/include/linux/percpu_counter.h
@@ -132,6 +132,8 @@ static inline bool percpu_counter_initialized(struct percpu_counter *fbc)
 
 #else /* !CONFIG_SMP */
 
+#include <linux/irqflags.h> // for local_irq_save()
+
 struct percpu_counter {
 	s64 count;
 };
diff --git a/include/linux/pm.h b/include/linux/pm.h
index 97b0e23363c8..41a0e0f7afbc 100644
--- a/include/linux/pm.h
+++ b/include/linux/pm.h
@@ -9,6 +9,7 @@
 #define _LINUX_PM_H
 
 #include <linux/export.h>
+#include <linux/kernel.h> // for PTR_IF()
 #include <linux/list.h>
 #include <linux/workqueue.h>
 #include <linux/spinlock.h>
@@ -17,6 +18,10 @@
 #include <linux/hrtimer.h>
 #include <linux/completion.h>
 
+#ifdef CONFIG_PM_CLK
+#include <linux/mutex_types.h>
+#endif
+
 /*
  * Callbacks for platform drivers to implement.
  */
diff --git a/include/linux/pwm.h b/include/linux/pwm.h
index 8ffe9ae7a23a..111db0b6a0a2 100644
--- a/include/linux/pwm.h
+++ b/include/linux/pwm.h
@@ -3,6 +3,7 @@
 #define __LINUX_PWM_H
 
 #include <linux/err.h>
+#include <linux/math.h> // for DIV_ROUND_CLOSEST_ULL()
 #include <linux/mutex.h>
 #include <linux/of.h>
 
diff --git a/include/linux/quotaops.h b/include/linux/quotaops.h
index 06cc8888199e..96ea5444b4a3 100644
--- a/include/linux/quotaops.h
+++ b/include/linux/quotaops.h
@@ -9,6 +9,7 @@
 #define _LINUX_QUOTAOPS_
 
 #include <linux/fs.h>
+#include <linux/quota.h>
 
 #define DQUOT_SPACE_WARN	0x1
 #define DQUOT_SPACE_RESERVE	0x2
diff --git a/include/linux/raid/pq.h b/include/linux/raid/pq.h
index 98030accf641..afbabd3f91ab 100644
--- a/include/linux/raid/pq.h
+++ b/include/linux/raid/pq.h
@@ -11,6 +11,7 @@
 #ifdef __KERNEL__
 
 #include <linux/blkdev.h>
+#include <asm/page.h> /* for PAGE_SIZE */
 
 extern const char raid6_empty_zero_page[PAGE_SIZE];
 
diff --git a/include/linux/raid_class.h b/include/linux/raid_class.h
index e50416ba9cd9..095e1c91edb4 100644
--- a/include/linux/raid_class.h
+++ b/include/linux/raid_class.h
@@ -4,6 +4,8 @@
  *
  * Copyright (c) 2005 - James Bottomley <James.Bottomley@steeleye.com>
  */
+
+#include <linux/device.h>
 #include <linux/transport_class.h>
 
 struct raid_template {
diff --git a/include/linux/regulator/coupler.h b/include/linux/regulator/coupler.h
index 73291f280a23..7f37ce155330 100644
--- a/include/linux/regulator/coupler.h
+++ b/include/linux/regulator/coupler.h
@@ -8,6 +8,7 @@
 #ifndef __LINUX_REGULATOR_COUPLER_H_
 #define __LINUX_REGULATOR_COUPLER_H_
 
+#include <linux/errno.h>
 #include <linux/kernel.h>
 #include <linux/suspend.h>
 
diff --git a/include/linux/sched.h b/include/linux/sched.h
index 4ea69afdd7f6..42555e8e5aa7 100644
--- a/include/linux/sched.h
+++ b/include/linux/sched.h
@@ -31,6 +31,7 @@
 #include <linux/refcount_types.h>
 #include <linux/resource.h>
 #include <linux/latencytop.h>
+#include <linux/log2.h>
 #include <linux/sched/prio.h>
 #include <linux/sched/types.h>
 #include <linux/signal_types.h>
diff --git a/include/linux/sched/signal.h b/include/linux/sched/signal.h
index 0a0e23c45406..5ba7828f3d3e 100644
--- a/include/linux/sched/signal.h
+++ b/include/linux/sched/signal.h
@@ -7,6 +7,7 @@
 #include <linux/sched.h>
 #include <linux/sched/jobctl.h>
 #include <linux/sched/task.h>
+#include <linux/completion.h>
 #include <linux/cred.h>
 #include <linux/refcount.h>
 #include <linux/pid.h>
diff --git a/include/linux/siphash.h b/include/linux/siphash.h
index 9153e77382e1..e516ddfc3daf 100644
--- a/include/linux/siphash.h
+++ b/include/linux/siphash.h
@@ -12,8 +12,10 @@
 #ifndef _LINUX_SIPHASH_H
 #define _LINUX_SIPHASH_H
 
+#include <linux/align.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
+#include <uapi/asm/byteorder.h> // for le32_to_cpup(), le64_to_cpu()
 
 #define SIPHASH_ALIGNMENT __alignof__(u64)
 typedef struct {
diff --git a/include/linux/slab.h b/include/linux/slab.h
index b5f5ee8308d0..49ea49ac627e 100644
--- a/include/linux/slab.h
+++ b/include/linux/slab.h
@@ -14,12 +14,14 @@
 
 #include <linux/cache.h>
 #include <linux/gfp.h>
+#include <linux/log2.h>
 #include <linux/overflow.h>
 #include <linux/types.h>
 #include <linux/workqueue.h>
 #include <linux/percpu-refcount.h>
 #include <linux/cleanup.h>
 #include <linux/hash.h>
+#include <linux/mmzone.h>
 
 
 /*
diff --git a/include/linux/socket.h b/include/linux/socket.h
index cfcb7e2c3813..681bd2626f1e 100644
--- a/include/linux/socket.h
+++ b/include/linux/socket.h
@@ -8,6 +8,7 @@
 #include <linux/uio.h>			/* iovec support		*/
 #include <linux/types.h>		/* pid_t			*/
 #include <linux/compiler.h>		/* __user			*/
+#include <linux/time64.h>		/* timespec64			*/
 #include <uapi/linux/socket.h>
 
 struct file;
@@ -391,7 +392,6 @@ struct ucred {
 extern int move_addr_to_kernel(void __user *uaddr, int ulen, struct sockaddr_storage *kaddr);
 extern int put_cmsg(struct msghdr*, int level, int type, int len, void *data);
 
-struct timespec64;
 struct __kernel_timespec;
 struct old_timespec32;
 
diff --git a/include/linux/soundwire/sdw.h b/include/linux/soundwire/sdw.h
index 66f814b63a43..4546af80247d 100644
--- a/include/linux/soundwire/sdw.h
+++ b/include/linux/soundwire/sdw.h
@@ -5,6 +5,7 @@
 #define __SOUNDWIRE_H
 
 #include <linux/bug.h>
+#include <linux/device.h>
 #include <linux/lockdep_types.h>
 #include <linux/irq.h>
 #include <linux/irqdomain.h>
diff --git a/include/linux/spi/spi_bitbang.h b/include/linux/spi/spi_bitbang.h
index b930eca2ef7b..dbebdf1f2cdd 100644
--- a/include/linux/spi/spi_bitbang.h
+++ b/include/linux/spi/spi_bitbang.h
@@ -2,6 +2,8 @@
 #ifndef	__SPI_BITBANG_H
 #define	__SPI_BITBANG_H
 
+#include <linux/mutex.h>
+#include <linux/types.h>
 #include <linux/workqueue.h>
 
 struct spi_bitbang {
diff --git a/include/linux/sprintf.h b/include/linux/sprintf.h
index 33dcbec71925..26f8456a9e6f 100644
--- a/include/linux/sprintf.h
+++ b/include/linux/sprintf.h
@@ -3,6 +3,7 @@
 #define _LINUX_KERNEL_SPRINTF_H_
 
 #include <linux/compiler_attributes.h>
+#include <linux/stdarg.h>
 #include <linux/types.h>
 
 int num_to_str(char *buf, int size, unsigned long long num, unsigned int width);
diff --git a/include/linux/srcutiny.h b/include/linux/srcutiny.h
index 447133171d95..c391cf2106d0 100644
--- a/include/linux/srcutiny.h
+++ b/include/linux/srcutiny.h
@@ -11,7 +11,15 @@
 #ifndef _LINUX_SRCU_TINY_H
 #define _LINUX_SRCU_TINY_H
 
+#include <linux/printk.h> // for pr_alert()
 #include <linux/swait.h>
+#include <linux/types.h>
+#include <linux/workqueue.h>
+#include <asm/rwonce.h> // for READ_ONCE(), WRITE_ONCE()
+
+#ifdef CONFIG_DEBUG_LOCK_ALLOC
+#include <linux/lockdep_types.h>
+#endif /* #ifdef CONFIG_DEBUG_LOCK_ALLOC */
 
 struct srcu_struct {
 	short srcu_lock_nesting[2];	/* srcu_read_lock() nesting depth. */
diff --git a/include/linux/srcutree.h b/include/linux/srcutree.h
index 8f3f72480e78..74edc15cfcf3 100644
--- a/include/linux/srcutree.h
+++ b/include/linux/srcutree.h
@@ -13,6 +13,8 @@
 
 #include <linux/rcu_node_tree.h>
 #include <linux/completion.h>
+#include <linux/mutex_types.h>
+#include <linux/workqueue.h>
 
 struct srcu_node;
 struct srcu_struct;
diff --git a/include/linux/stackdepot.h b/include/linux/stackdepot.h
index adcbb8f23600..a6aa21393755 100644
--- a/include/linux/stackdepot.h
+++ b/include/linux/stackdepot.h
@@ -21,6 +21,7 @@
 #define _LINUX_STACKDEPOT_H
 
 #include <linux/gfp.h>
+#include <linux/init.h>
 
 typedef u32 depot_stack_handle_t;
 
diff --git a/include/linux/sunrpc/rpc_pipe_fs.h b/include/linux/sunrpc/rpc_pipe_fs.h
index 3b35b6f6533a..5438de45300d 100644
--- a/include/linux/sunrpc/rpc_pipe_fs.h
+++ b/include/linux/sunrpc/rpc_pipe_fs.h
@@ -2,6 +2,9 @@
 #ifndef _LINUX_SUNRPC_RPC_PIPE_FS_H
 #define _LINUX_SUNRPC_RPC_PIPE_FS_H
 
+#include <linux/list.h>
+#include <linux/spinlock_types.h>
+#include <linux/wait.h>
 #include <linux/workqueue.h>
 
 struct rpc_pipe_dir_head {
diff --git a/include/linux/sunrpc/svc_xprt.h b/include/linux/sunrpc/svc_xprt.h
index 8e20cd60e2e7..bedec7c50e02 100644
--- a/include/linux/sunrpc/svc_xprt.h
+++ b/include/linux/sunrpc/svc_xprt.h
@@ -8,6 +8,7 @@
 #ifndef SUNRPC_SVC_XPRT_H
 #define SUNRPC_SVC_XPRT_H
 
+#include <linux/sprintf.h>
 #include <linux/sunrpc/svc.h>
 
 struct module;
diff --git a/include/linux/sysfs.h b/include/linux/sysfs.h
index b717a70219f6..0a4ff6d54943 100644
--- a/include/linux/sysfs.h
+++ b/include/linux/sysfs.h
@@ -14,6 +14,7 @@
 #define _SYSFS_H_
 
 #include <linux/kernfs.h>
+#include <linux/kernel.h> // for VERIFY_OCTAL_PERMISSIONS()
 #include <linux/compiler.h>
 #include <linux/errno.h>
 #include <linux/list.h>
diff --git a/include/linux/trace_events.h b/include/linux/trace_events.h
index d68ff9b1247f..091c9064303a 100644
--- a/include/linux/trace_events.h
+++ b/include/linux/trace_events.h
@@ -4,6 +4,8 @@
 #define _LINUX_TRACE_EVENT_H
 
 #include <linux/ring_buffer.h>
+#include <linux/module.h> // for try_module_get(), module_put()
+#include <linux/sprintf.h>
 #include <linux/trace_seq.h>
 #include <linux/percpu.h>
 #include <linux/hardirq.h>
diff --git a/include/linux/trace_recursion.h b/include/linux/trace_recursion.h
index d48cd92d2364..19bf980b039f 100644
--- a/include/linux/trace_recursion.h
+++ b/include/linux/trace_recursion.h
@@ -136,6 +136,7 @@ extern void ftrace_record_recursion(unsigned long ip, unsigned long parent_ip);
 #endif
 
 #ifdef CONFIG_ARCH_WANTS_NO_INSTR
+#include <linux/rcutree.h> // for rcu_is_watching()
 # define trace_warn_on_no_rcu(ip)					\
 	({								\
 		bool __ret = !rcu_is_watching();			\
diff --git a/include/linux/u64_stats_sync.h b/include/linux/u64_stats_sync.h
index ffe48e69b3f3..cf4b090e799a 100644
--- a/include/linux/u64_stats_sync.h
+++ b/include/linux/u64_stats_sync.h
@@ -59,6 +59,8 @@
  * Example of use in drivers/net/loopback.c, using per_cpu containers,
  * in BH disabled context.
  */
+
+#include <asm/bitsperlong.h>
 #include <linux/seqlock.h>
 
 struct u64_stats_sync {
diff --git a/include/linux/usb.h b/include/linux/usb.h
index 9e52179872a5..50685298187a 100644
--- a/include/linux/usb.h
+++ b/include/linux/usb.h
@@ -21,6 +21,7 @@
 #include <linux/completion.h>	/* for struct completion */
 #include <linux/sched.h>	/* for current && schedule_timeout */
 #include <linux/mutex.h>	/* for struct mutex */
+#include <linux/sprintf.h>
 #include <linux/pm_runtime.h>	/* for runtime PM */
 
 struct usb_device;
diff --git a/include/linux/usb/pd.h b/include/linux/usb/pd.h
index d50098fb16b5..5fe5f786ad96 100644
--- a/include/linux/usb/pd.h
+++ b/include/linux/usb/pd.h
@@ -6,6 +6,7 @@
 #ifndef __LINUX_USB_PD_H
 #define __LINUX_USB_PD_H
 
+#include <uapi/asm/byteorder.h> // for __le16
 #include <linux/kernel.h>
 #include <linux/types.h>
 #include <linux/usb/typec.h>
diff --git a/include/linux/wait_bit.h b/include/linux/wait_bit.h
index 7725b7579b78..96c90fbcf652 100644
--- a/include/linux/wait_bit.h
+++ b/include/linux/wait_bit.h
@@ -5,6 +5,9 @@
 /*
  * Linux wait-bit related types and methods:
  */
+#include <linux/bitops.h>
+#include <linux/init.h> // for __init
+#include <linux/kernel.h> // for might_sleep()
 #include <linux/wait.h>
 
 struct wait_bit_key {
diff --git a/include/linux/writeback.h b/include/linux/writeback.h
index 453736fd1d23..9a7a3d2b543f 100644
--- a/include/linux/writeback.h
+++ b/include/linux/writeback.h
@@ -11,6 +11,7 @@
 #include <linux/flex_proportions.h>
 #include <linux/backing-dev-defs.h>
 #include <linux/blk_types.h>
+#include <linux/wait_bit.h>
 
 struct bio;
 
diff --git a/include/linux/ww_mutex.h b/include/linux/ww_mutex.h
index bb763085479a..ce3aa4f6dcd4 100644
--- a/include/linux/ww_mutex.h
+++ b/include/linux/ww_mutex.h
@@ -19,6 +19,8 @@
 
 #include <linux/mutex.h>
 #include <linux/rtmutex.h>
+#include <linux/lockdep.h>
+#include <linux/instruction_pointer.h> // for _RET_IP_
 
 #if defined(CONFIG_DEBUG_MUTEXES) || \
    (defined(CONFIG_PREEMPT_RT) && defined(CONFIG_DEBUG_RT_MUTEXES))
diff --git a/include/linux/xarray.h b/include/linux/xarray.h
index cb571dfcf4b1..65e3c861c22e 100644
--- a/include/linux/xarray.h
+++ b/include/linux/xarray.h
@@ -15,6 +15,7 @@
 #include <linux/gfp.h>
 #include <linux/kconfig.h>
 #include <linux/kernel.h>
+#include <linux/math.h> // for DIV_ROUND_UP()
 #include <linux/rcupdate.h>
 #include <linux/sched/mm.h>
 #include <linux/spinlock.h>
diff --git a/include/media/media-device.h b/include/media/media-device.h
index 2c146d0b2b1c..397a142c36c5 100644
--- a/include/media/media-device.h
+++ b/include/media/media-device.h
@@ -11,10 +11,12 @@
 #ifndef _MEDIA_DEVICE_H
 #define _MEDIA_DEVICE_H
 
+#include <linux/idr.h> // for struct ida
 #include <linux/list.h>
 #include <linux/mutex.h>
 #include <linux/pci.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <media/media-devnode.h>
 #include <media/media-entity.h>
diff --git a/include/media/v4l2-rect.h b/include/media/v4l2-rect.h
index bd587d0c0dc3..36aa96c9a380 100644
--- a/include/media/v4l2-rect.h
+++ b/include/media/v4l2-rect.h
@@ -8,6 +8,7 @@
 #ifndef _V4L2_RECT_H_
 #define _V4L2_RECT_H_
 
+#include <linux/minmax.h>
 #include <linux/videodev2.h>
 
 /**
diff --git a/include/net/netns/ipv6.h b/include/net/netns/ipv6.h
index 5f2cfd84570a..858ee28e73f9 100644
--- a/include/net/netns/ipv6.h
+++ b/include/net/netns/ipv6.h
@@ -3,6 +3,10 @@
  * ipv6 in net namespaces
  */
 
+#include <linux/list.h>
+#include <linux/spinlock_types.h>
+#include <linux/rwlock_types.h>
+#include <linux/workqueue.h> // for struct delayed_work
 #include <net/inet_frag.h>
 
 #ifndef __NETNS_IPV6_H__
diff --git a/include/net/netns/mctp.h b/include/net/netns/mctp.h
index 1db8f9aaddb4..6c5039374021 100644
--- a/include/net/netns/mctp.h
+++ b/include/net/netns/mctp.h
@@ -6,6 +6,7 @@
 #ifndef __NETNS_MCTP_H__
 #define __NETNS_MCTP_H__
 
+#include <linux/list.h>
 #include <linux/mutex.h>
 #include <linux/types.h>
 
diff --git a/include/net/netns/xdp.h b/include/net/netns/xdp.h
index 21a4f25a187a..06d06cf2b966 100644
--- a/include/net/netns/xdp.h
+++ b/include/net/netns/xdp.h
@@ -2,6 +2,7 @@
 #ifndef __NETNS_XDP_H__
 #define __NETNS_XDP_H__
 
+#include <linux/list.h>
 #include <linux/mutex.h>
 #include <linux/types.h>
 
diff --git a/include/net/tcp.h b/include/net/tcp.h
index 58e65af74ad1..140e012260a8 100644
--- a/include/net/tcp.h
+++ b/include/net/tcp.h
@@ -26,6 +26,7 @@
 #include <linux/kref.h>
 #include <linux/ktime.h>
 #include <linux/indirect_call_wrapper.h>
+#include <linux/hrtimer.h> // for hrtimer_try_to_cancel()
 
 #include <net/inet_connection_sock.h>
 #include <net/inet_timewait_sock.h>
diff --git a/include/rdma/uverbs_ioctl.h b/include/rdma/uverbs_ioctl.h
index 06287de69cd2..049f381b16c0 100644
--- a/include/rdma/uverbs_ioctl.h
+++ b/include/rdma/uverbs_ioctl.h
@@ -7,6 +7,7 @@
 #define _UVERBS_IOCTL_
 
 #include <rdma/uverbs_types.h>
+#include <linux/kernel.h> // for u64_to_user_ptr(), upper_32_bits(), lower_32_bits()
 #include <linux/uaccess.h>
 #include <rdma/rdma_user_ioctl.h>
 #include <rdma/ib_user_ioctl_verbs.h>
diff --git a/include/sound/control.h b/include/sound/control.h
index 9a4f4f7138da..486017d25181 100644
--- a/include/sound/control.h
+++ b/include/sound/control.h
@@ -9,6 +9,7 @@
 
 #include <linux/wait.h>
 #include <linux/nospec.h>
+#include <linux/string.h> // for strscpy()
 #include <sound/asound.h>
 
 #define snd_kcontrol_chip(kcontrol) ((kcontrol)->private_data)
diff --git a/include/sound/core.h b/include/sound/core.h
index dfef0c9d4b9f..eaae6da1e0b0 100644
--- a/include/sound/core.h
+++ b/include/sound/core.h
@@ -14,6 +14,7 @@
 #include <linux/pm.h>			/* pm_message_t */
 #include <linux/stringify.h>
 #include <linux/printk.h>
+#include <linux/wait.h>
 #include <linux/xarray.h>
 
 /* number of supported soundcards */
diff --git a/include/sound/util_mem.h b/include/sound/util_mem.h
index 01310e089143..3403b8f4dc86 100644
--- a/include/sound/util_mem.h
+++ b/include/sound/util_mem.h
@@ -2,6 +2,7 @@
 #ifndef __SOUND_UTIL_MEM_H
 #define __SOUND_UTIL_MEM_H
 
+#include <linux/list.h>
 #include <linux/mutex.h>
 /*
  *  Copyright (C) 2000 Takashi Iwai <tiwai@suse.de>
diff --git a/include/trace/events/iommu.h b/include/trace/events/iommu.h
index 70743db1fb75..4a438395759c 100644
--- a/include/trace/events/iommu.h
+++ b/include/trace/events/iommu.h
@@ -11,10 +11,9 @@
 #if !defined(_TRACE_IOMMU_H) || defined(TRACE_HEADER_MULTI_READ)
 #define _TRACE_IOMMU_H
 
+#include <linux/device.h> // for dev_driver_string()
 #include <linux/tracepoint.h>
 
-struct device;
-
 DECLARE_EVENT_CLASS(iommu_group_event,
 
 	TP_PROTO(int group_id, struct device *dev),
diff --git a/include/trace/events/power.h b/include/trace/events/power.h
index 77f14f7a11d4..db197c8e93d9 100644
--- a/include/trace/events/power.h
+++ b/include/trace/events/power.h
@@ -6,6 +6,7 @@
 #define _TRACE_POWER_H
 
 #include <linux/cpufreq.h>
+#include <linux/device.h>
 #include <linux/ktime.h>
 #include <linux/pm_qos.h>
 #include <linux/tracepoint.h>
diff --git a/include/trace/events/vmscan.h b/include/trace/events/vmscan.h
index 1a488c30afa5..5441ab72be1d 100644
--- a/include/trace/events/vmscan.h
+++ b/include/trace/events/vmscan.h
@@ -5,6 +5,7 @@
 #if !defined(_TRACE_VMSCAN_H) || defined(TRACE_HEADER_MULTI_READ)
 #define _TRACE_VMSCAN_H
 
+#include <linux/shrinker.h>
 #include <linux/types.h>
 #include <linux/tracepoint.h>
 #include <linux/mm.h>
diff --git a/init/calibrate.c b/init/calibrate.c
index f3831272f113..eb6bf52c6a1c 100644
--- a/init/calibrate.c
+++ b/init/calibrate.c
@@ -5,6 +5,7 @@
  *  Copyright (C) 1991, 1992  Linus Torvalds
  */
 
+#include <linux/kstrtox.h>
 #include <linux/jiffies.h>
 #include <linux/delay.h>
 #include <linux/init.h>
diff --git a/init/init_task.c b/init/init_task.c
index 4daee6d761c8..28aa0031f42b 100644
--- a/init/init_task.c
+++ b/init/init_task.c
@@ -13,6 +13,7 @@
 #include <linux/numa.h>
 #include <linux/scs.h>
 #include <linux/plist.h>
+#include <linux/posix-timers.h> // for INIT_CPU_TIMERS()
 
 #include <linux/uaccess.h>
 
diff --git a/init/initramfs.c b/init/initramfs.c
index da79760b8be3..d7c02e701eec 100644
--- a/init/initramfs.c
+++ b/init/initramfs.c
@@ -8,6 +8,7 @@
 #include <linux/delay.h>
 #include <linux/string.h>
 #include <linux/dirent.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls.h>
 #include <linux/utime.h>
 #include <linux/file.h>
diff --git a/init/main.c b/init/main.c
index 119a749e9074..99fe4465fe1b 100644
--- a/init/main.c
+++ b/init/main.c
@@ -21,6 +21,7 @@
 #include <linux/syscalls.h>
 #include <linux/stackprotector.h>
 #include <linux/string.h>
+#include <linux/completion.h>
 #include <linux/ctype.h>
 #include <linux/delay.h>
 #include <linux/ioport.h>
@@ -101,6 +102,7 @@
 #include <linux/stackdepot.h>
 #include <linux/randomize_kstack.h>
 #include <linux/ptdump.h>
+#include <linux/hrtimer.h>
 #include <net/net_namespace.h>
 
 #include <asm/io.h>
diff --git a/io_uring/cancel.c b/io_uring/cancel.c
index acfcdd7f059a..b7fb1da37fef 100644
--- a/io_uring/cancel.c
+++ b/io_uring/cancel.c
@@ -8,6 +8,7 @@
 #include <linux/namei.h>
 #include <linux/nospec.h>
 #include <linux/io_uring.h>
+#include <linux/hrtimer.h>
 
 #include <uapi/linux/io_uring.h>
 
diff --git a/io_uring/io-wq.c b/io_uring/io-wq.c
index 522196dfb0ff..e2d3f5f010ea 100644
--- a/io_uring/io-wq.c
+++ b/io_uring/io-wq.c
@@ -12,6 +12,7 @@
 #include <linux/percpu.h>
 #include <linux/slab.h>
 #include <linux/rculist_nulls.h>
+#include <linux/completion.h>
 #include <linux/cpu.h>
 #include <linux/task_work.h>
 #include <linux/audit.h>
diff --git a/io_uring/io_uring.c b/io_uring/io_uring.c
index 479f610e314f..4cc333203665 100644
--- a/io_uring/io_uring.c
+++ b/io_uring/io_uring.c
@@ -47,6 +47,7 @@
 #include <linux/refcount.h>
 #include <linux/uio.h>
 #include <linux/bits.h>
+#include <linux/completion.h>
 
 #include <linux/sched/signal.h>
 #include <linux/fs.h>
@@ -72,6 +73,7 @@
 #include <linux/io_uring/cmd.h>
 #include <linux/audit.h>
 #include <linux/security.h>
+#include <linux/hrtimer.h>
 #include <asm/shmparam.h>
 
 #define CREATE_TRACE_POINTS
diff --git a/io_uring/net.c b/io_uring/net.c
index 43bc9a5f96f9..c90048cda814 100644
--- a/io_uring/net.c
+++ b/io_uring/net.c
@@ -4,6 +4,7 @@
 #include <linux/file.h>
 #include <linux/slab.h>
 #include <linux/net.h>
+#include <linux/bvec.h>
 #include <linux/compat.h>
 #include <net/compat.h>
 #include <linux/io_uring.h>
diff --git a/io_uring/rsrc.c b/io_uring/rsrc.c
index 4818b79231dd..c87f813bbeca 100644
--- a/io_uring/rsrc.c
+++ b/io_uring/rsrc.c
@@ -7,6 +7,7 @@
 #include <linux/slab.h>
 #include <linux/nospec.h>
 #include <linux/hugetlb.h>
+#include <linux/bvec.h>
 #include <linux/compat.h>
 #include <linux/io_uring.h>
 
diff --git a/io_uring/sqpoll.c b/io_uring/sqpoll.c
index f3979cacda13..720c941d0c21 100644
--- a/io_uring/sqpoll.c
+++ b/io_uring/sqpoll.c
@@ -4,6 +4,7 @@
  * ring, offloading submissions from the application to a kernel thread.
  */
 #include <linux/kernel.h>
+#include <linux/completion.h>
 #include <linux/errno.h>
 #include <linux/file.h>
 #include <linux/mm.h>
diff --git a/io_uring/timeout.h b/io_uring/timeout.h
index a6939f18313e..1421625053da 100644
--- a/io_uring/timeout.h
+++ b/io_uring/timeout.h
@@ -1,5 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
+#include <linux/hrtimer.h>
+
 struct io_timeout_data {
 	struct io_kiocb			*req;
 	struct hrtimer			timer;
diff --git a/ipc/ipc_sysctl.c b/ipc/ipc_sysctl.c
index 01c4a50d22b2..410b4300c023 100644
--- a/ipc/ipc_sysctl.c
+++ b/ipc/ipc_sysctl.c
@@ -14,6 +14,7 @@
 #include <linux/ipc_namespace.h>
 #include <linux/msg.h>
 #include <linux/slab.h>
+#include <linux/uidgid.h> // for make_kuid(), make_kgid()
 #include <linux/cred.h>
 #include "util.h"
 
diff --git a/ipc/mq_sysctl.c b/ipc/mq_sysctl.c
index 21fba3a6edaf..2486dd36af57 100644
--- a/ipc/mq_sysctl.c
+++ b/ipc/mq_sysctl.c
@@ -13,6 +13,7 @@
 #include <linux/capability.h>
 #include <linux/slab.h>
 #include <linux/cred.h>
+#include <linux/uidgid.h>
 
 static int msg_max_limit_min = MIN_MSGMAX;
 static int msg_max_limit_max = HARD_MSGMAX;
diff --git a/ipc/mqueue.c b/ipc/mqueue.c
index 5eea4dc0509e..e27c7512e7b1 100644
--- a/ipc/mqueue.c
+++ b/ipc/mqueue.c
@@ -39,6 +39,7 @@
 #include <linux/sched/wake_q.h>
 #include <linux/sched/signal.h>
 #include <linux/sched/user.h>
+#include <linux/hrtimer.h>
 
 #include <net/sock.h>
 #include "util.h"
diff --git a/ipc/namespace.c b/ipc/namespace.c
index 6ecc30effd3e..8df3cda0b6ee 100644
--- a/ipc/namespace.c
+++ b/ipc/namespace.c
@@ -16,6 +16,7 @@
 #include <linux/user_namespace.h>
 #include <linux/proc_ns.h>
 #include <linux/sched/task.h>
+#include <linux/workqueue.h>
 
 #include "util.h"
 
diff --git a/ipc/sem.c b/ipc/sem.c
index a39cdc7bf88f..a2cdd57ab140 100644
--- a/ipc/sem.c
+++ b/ipc/sem.c
@@ -87,6 +87,7 @@
 #include <linux/sched/wake_q.h>
 #include <linux/nospec.h>
 #include <linux/rhashtable.h>
+#include <linux/hrtimer.h>
 
 #include <linux/uaccess.h>
 #include "util.h"
diff --git a/ipc/shm.c b/ipc/shm.c
index a89f001a8bf0..a797254b88ea 100644
--- a/ipc/shm.c
+++ b/ipc/shm.c
@@ -29,6 +29,7 @@
 #include <linux/mm.h>
 #include <linux/hugetlb.h>
 #include <linux/shm.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/shm.h>
 #include <linux/init.h>
 #include <linux/file.h>
diff --git a/ipc/util.h b/ipc/util.h
index a55d6cebe6d3..e50cdc79fd0b 100644
--- a/ipc/util.h
+++ b/ipc/util.h
@@ -13,6 +13,7 @@
 
 #include <linux/unistd.h>
 #include <linux/err.h>
+#include <linux/ipc.h>
 #include <linux/ipc_namespace.h>
 #include <linux/pid.h>
 
diff --git a/kernel/acct.c b/kernel/acct.c
index 986c8214dabf..ede983634a54 100644
--- a/kernel/acct.c
+++ b/kernel/acct.c
@@ -48,6 +48,7 @@
 #include <linux/slab.h>
 #include <linux/acct.h>
 #include <linux/capability.h>
+#include <linux/completion.h>
 #include <linux/file.h>
 #include <linux/tty.h>
 #include <linux/security.h>
diff --git a/kernel/audit.c b/kernel/audit.c
index e7a62ebbf4d1..f8addcddcd09 100644
--- a/kernel/audit.c
+++ b/kernel/audit.c
@@ -33,6 +33,8 @@
 
 #include <linux/file.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/atomic.h>
 #include <linux/mm.h>
diff --git a/kernel/bpf/bpf_iter.c b/kernel/bpf/bpf_iter.c
index 0fae79164187..dc8921840813 100644
--- a/kernel/bpf/bpf_iter.c
+++ b/kernel/bpf/bpf_iter.c
@@ -5,6 +5,7 @@
 #include <linux/anon_inodes.h>
 #include <linux/filter.h>
 #include <linux/bpf.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/rcupdate_trace.h>
 
 struct bpf_iter_target_info {
diff --git a/kernel/bpf/bpf_struct_ops.c b/kernel/bpf/bpf_struct_ops.c
index f98f580de77a..ac94512aa7ac 100644
--- a/kernel/bpf/bpf_struct_ops.c
+++ b/kernel/bpf/bpf_struct_ops.c
@@ -12,6 +12,7 @@
 #include <linux/mutex.h>
 #include <linux/btf_ids.h>
 #include <linux/rcupdate_wait.h>
+#include <linux/sprintf.h>
 
 struct bpf_struct_ops_value {
 	struct bpf_struct_ops_common_value common;
diff --git a/kernel/bpf/btf.c b/kernel/bpf/btf.c
index 8e06d29961f1..b41f9bc09397 100644
--- a/kernel/bpf/btf.c
+++ b/kernel/bpf/btf.c
@@ -9,9 +9,11 @@
 #include <linux/compiler.h>
 #include <linux/ctype.h>
 #include <linux/errno.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/slab.h>
 #include <linux/anon_inodes.h>
 #include <linux/file.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/kernel.h>
 #include <linux/idr.h>
diff --git a/kernel/bpf/core.c b/kernel/bpf/core.c
index 71c459a51d9e..5a0d07dc5619 100644
--- a/kernel/bpf/core.c
+++ b/kernel/bpf/core.c
@@ -19,6 +19,7 @@
 
 #include <uapi/linux/btf.h>
 #include <linux/filter.h>
+#include <linux/hex.h>
 #include <linux/skbuff.h>
 #include <linux/vmalloc.h>
 #include <linux/random.h>
diff --git a/kernel/bpf/cpumap.c b/kernel/bpf/cpumap.c
index 8a0bb80fe48a..390c663013b9 100644
--- a/kernel/bpf/cpumap.c
+++ b/kernel/bpf/cpumap.c
@@ -21,6 +21,7 @@
  */
 #include <linux/bitops.h>
 #include <linux/bpf.h>
+#include <linux/completion.h>
 #include <linux/filter.h>
 #include <linux/ptr_ring.h>
 #include <net/xdp.h>
diff --git a/kernel/bpf/hashtab.c b/kernel/bpf/hashtab.c
index 03a6a2500b6a..8db6eff7d47b 100644
--- a/kernel/bpf/hashtab.c
+++ b/kernel/bpf/hashtab.c
@@ -6,6 +6,7 @@
 #include <linux/btf.h>
 #include <linux/jhash.h>
 #include <linux/filter.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/rculist_nulls.h>
 #include <linux/rcupdate_wait.h>
 #include <linux/random.h>
diff --git a/kernel/bpf/helpers.c b/kernel/bpf/helpers.c
index 4db1c658254c..60481a10647a 100644
--- a/kernel/bpf/helpers.c
+++ b/kernel/bpf/helpers.c
@@ -23,6 +23,7 @@
 #include <linux/btf_ids.h>
 #include <linux/bpf_mem_alloc.h>
 #include <linux/kasan.h>
+#include <linux/hrtimer.h>
 
 #include "../../lib/kstrtox.h"
 
diff --git a/kernel/bpf/mprog.c b/kernel/bpf/mprog.c
index 1394168062e8..4fcf94324af7 100644
--- a/kernel/bpf/mprog.c
+++ b/kernel/bpf/mprog.c
@@ -3,6 +3,7 @@
 
 #include <linux/bpf.h>
 #include <linux/bpf_mprog.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 static int bpf_mprog_link(struct bpf_tuple *tuple,
 			  u32 id_or_fd, u32 flags,
diff --git a/kernel/bpf/net_namespace.c b/kernel/bpf/net_namespace.c
index 868cc2c43899..3be573f5275c 100644
--- a/kernel/bpf/net_namespace.c
+++ b/kernel/bpf/net_namespace.c
@@ -3,6 +3,7 @@
 #include <linux/bpf.h>
 #include <linux/bpf-netns.h>
 #include <linux/filter.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <net/net_namespace.h>
 
 /*
diff --git a/kernel/bpf/offload.c b/kernel/bpf/offload.c
index 1a4fec330eaa..461cfac335c4 100644
--- a/kernel/bpf/offload.c
+++ b/kernel/bpf/offload.c
@@ -17,6 +17,7 @@
 #include <linux/bpf_verifier.h>
 #include <linux/bug.h>
 #include <linux/kdev_t.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/list.h>
 #include <linux/lockdep.h>
 #include <linux/netdevice.h>
diff --git a/kernel/bpf/syscall.c b/kernel/bpf/syscall.c
index b2750b79ac80..2c7c121a9f32 100644
--- a/kernel/bpf/syscall.c
+++ b/kernel/bpf/syscall.c
@@ -8,6 +8,8 @@
 #include <linux/bpf_verifier.h>
 #include <linux/bsearch.h>
 #include <linux/btf.h>
+#include <linux/hex.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/syscalls.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
diff --git a/kernel/cgroup/cgroup.c b/kernel/cgroup/cgroup.c
index a66c088c851c..b5a5d70887d6 100644
--- a/kernel/cgroup/cgroup.c
+++ b/kernel/cgroup/cgroup.c
@@ -29,6 +29,8 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include "cgroup-internal.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <linux/bpf-cgroup.h>
 #include <linux/cred.h>
diff --git a/kernel/cgroup/debug.c b/kernel/cgroup/debug.c
index 80aa3f027ac3..94967b0a91a9 100644
--- a/kernel/cgroup/debug.c
+++ b/kernel/cgroup/debug.c
@@ -8,6 +8,7 @@
 #include <linux/ctype.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "cgroup-internal.h"
 
diff --git a/kernel/cgroup/misc.c b/kernel/cgroup/misc.c
index 79a3717a5803..2c3550887420 100644
--- a/kernel/cgroup/misc.c
+++ b/kernel/cgroup/misc.c
@@ -6,6 +6,7 @@
  * Author: Vipin Sharma <vipinsh@google.com>
  */
 
+#include <linux/kstrtox.h>
 #include <linux/limits.h>
 #include <linux/cgroup.h>
 #include <linux/errno.h>
diff --git a/kernel/cpu.c b/kernel/cpu.c
index ad7d0b00bce9..58c201eb4e0b 100644
--- a/kernel/cpu.c
+++ b/kernel/cpu.c
@@ -7,12 +7,15 @@
 #include <linux/proc_fs.h>
 #include <linux/smp.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
 #include <linux/notifier.h>
 #include <linux/sched/signal.h>
 #include <linux/sched/hotplug.h>
 #include <linux/sched/isolation.h>
 #include <linux/sched/task.h>
 #include <linux/sched/smt.h>
+#include <linux/sprintf.h>
 #include <linux/unistd.h>
 #include <linux/cpu.h>
 #include <linux/oom.h>
@@ -20,6 +23,7 @@
 #include <linux/delay.h>
 #include <linux/export.h>
 #include <linux/bug.h>
+#include <linux/completion.h>
 #include <linux/kthread.h>
 #include <linux/stop_machine.h>
 #include <linux/mutex.h>
@@ -37,6 +41,7 @@
 #include <linux/cpuset.h>
 #include <linux/random.h>
 #include <linux/cc_platform.h>
+#include <linux/hrtimer.h>
 
 #include <trace/events/power.h>
 #define CREATE_TRACE_POINTS
diff --git a/kernel/crash_reserve.c b/kernel/crash_reserve.c
index bbb6c3cb00e4..5354a2561989 100644
--- a/kernel/crash_reserve.c
+++ b/kernel/crash_reserve.c
@@ -9,6 +9,7 @@
 #include <linux/utsname.h>
 #include <linux/vmalloc.h>
 #include <linux/sizes.h>
+#include <linux/kernel.h> // for memparse()
 #include <linux/kexec.h>
 #include <linux/memory.h>
 #include <linux/cpuhotplug.h>
diff --git a/kernel/debug/debug_core.c b/kernel/debug/debug_core.c
index ce1bb2301c06..ccc1668ce7b7 100644
--- a/kernel/debug/debug_core.c
+++ b/kernel/debug/debug_core.c
@@ -56,6 +56,7 @@
 
 #include <asm/cacheflush.h>
 #include <asm/byteorder.h>
+#include <asm/kprobes.h> // for NOKPROBE_SYMBOL()
 #include <linux/atomic.h>
 
 #include "debug_core.h"
diff --git a/kernel/debug/gdbstub.c b/kernel/debug/gdbstub.c
index 9d34d2364b5a..f0d8a6810704 100644
--- a/kernel/debug/gdbstub.c
+++ b/kernel/debug/gdbstub.c
@@ -31,6 +31,7 @@
 #include <linux/kdb.h>
 #include <linux/serial_core.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <asm/cacheflush.h>
 #include <asm/unaligned.h>
diff --git a/kernel/debug/kdb/kdb_io.c b/kernel/debug/kdb/kdb_io.c
index 9443bc63c5a2..685a651263bf 100644
--- a/kernel/debug/kdb/kdb_io.c
+++ b/kernel/debug/kdb/kdb_io.c
@@ -15,6 +15,7 @@
 #include <linux/init.h>
 #include <linux/kdev_t.h>
 #include <linux/console.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/sched.h>
 #include <linux/smp.h>
diff --git a/kernel/debug/kdb/kdb_main.c b/kernel/debug/kdb/kdb_main.c
index d05066cb40b2..617ed92b0716 100644
--- a/kernel/debug/kdb/kdb_main.c
+++ b/kernel/debug/kdb/kdb_main.c
@@ -12,6 +12,8 @@
  */
 
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
diff --git a/kernel/delayacct.c b/kernel/delayacct.c
index 6f0c358e73d8..6d670972f2cd 100644
--- a/kernel/delayacct.c
+++ b/kernel/delayacct.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/taskstats.h>
 #include <linux/sysctl.h>
+#include <linux/capability.h>
 #include <linux/delayacct.h>
 #include <linux/module.h>
 
diff --git a/kernel/dma/contiguous.c b/kernel/dma/contiguous.c
index 055da410ac71..ba8f64e08988 100644
--- a/kernel/dma/contiguous.c
+++ b/kernel/dma/contiguous.c
@@ -38,10 +38,13 @@
 #define pr_fmt(fmt) "cma: " fmt
 
 #include <asm/page.h>
+#include <linux/sprintf.h>
 
 #include <linux/memblock.h>
 #include <linux/err.h>
+#include <linux/kernel.h> // for memparse()
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include <linux/dma-map-ops.h>
 #include <linux/cma.h>
 #include <linux/nospec.h>
diff --git a/kernel/dma/debug.c b/kernel/dma/debug.c
index a6e3792b15f8..e7e236599307 100644
--- a/kernel/dma/debug.c
+++ b/kernel/dma/debug.c
@@ -10,7 +10,9 @@
 #include <linux/sched/task_stack.h>
 #include <linux/scatterlist.h>
 #include <linux/dma-map-ops.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/sched/task.h>
+#include <linux/sprintf.h>
 #include <linux/stacktrace.h>
 #include <linux/spinlock.h>
 #include <linux/vmalloc.h>
@@ -23,6 +25,7 @@
 #include <linux/ctype.h>
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <asm/sections.h>
 #include "debug.h"
 
diff --git a/kernel/dma/pool.c b/kernel/dma/pool.c
index d10613eb0f63..f7025cfc397f 100644
--- a/kernel/dma/pool.c
+++ b/kernel/dma/pool.c
@@ -8,6 +8,7 @@
 #include <linux/dma-map-ops.h>
 #include <linux/dma-direct.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for memparse()
 #include <linux/genalloc.h>
 #include <linux/set_memory.h>
 #include <linux/slab.h>
diff --git a/kernel/dma/swiotlb.c b/kernel/dma/swiotlb.c
index b079a9a8e087..df1921ac8b4b 100644
--- a/kernel/dma/swiotlb.c
+++ b/kernel/dma/swiotlb.c
@@ -32,6 +32,7 @@
 #include <linux/io.h>
 #include <linux/iommu-helper.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/memblock.h>
 #include <linux/mm.h>
 #include <linux/pfn.h>
diff --git a/kernel/events/core.c b/kernel/events/core.c
index 5ecfa57e3b97..c594c2fa00cd 100644
--- a/kernel/events/core.c
+++ b/kernel/events/core.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/cpu.h>
 #include <linux/smp.h>
@@ -17,6 +18,7 @@
 #include <linux/poll.h>
 #include <linux/slab.h>
 #include <linux/hash.h>
+#include <linux/sprintf.h>
 #include <linux/tick.h>
 #include <linux/sysfs.h>
 #include <linux/dcache.h>
@@ -55,6 +57,7 @@
 #include <linux/pgtable.h>
 #include <linux/buildid.h>
 #include <linux/task_work.h>
+#include <linux/hrtimer.h>
 
 #include "internal.h"
 
diff --git a/kernel/exit.c b/kernel/exit.c
index 41a12630cbbc..cc7b7e7f1794 100644
--- a/kernel/exit.c
+++ b/kernel/exit.c
@@ -5,6 +5,7 @@
  *  Copyright (C) 1991, 1992  Linus Torvalds
  */
 
+#include <linux/kernel.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
 #include <linux/sched/autogroup.h>
@@ -70,6 +71,7 @@
 #include <linux/sysfs.h>
 #include <linux/user_events.h>
 #include <linux/uaccess.h>
+#include <linux/hrtimer.h>
 
 #include <uapi/linux/wait.h>
 
diff --git a/kernel/fork.c b/kernel/fork.c
index f158f7265002..7d83ac15eee8 100644
--- a/kernel/fork.c
+++ b/kernel/fork.c
@@ -13,6 +13,9 @@
  */
 
 #include <linux/anon_inodes.h>
+#include <linux/completion.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/sched/autogroup.h>
 #include <linux/sched/mm.h>
@@ -49,6 +52,7 @@
 #include <linux/cpu.h>
 #include <linux/cgroup.h>
 #include <linux/security.h>
+#include <linux/hrtimer.h>
 #include <linux/hugetlb.h>
 #include <linux/seccomp.h>
 #include <linux/swap.h>
diff --git a/kernel/futex/core.c b/kernel/futex/core.c
index 1e78ef24321e..fce9cabf8c98 100644
--- a/kernel/futex/core.c
+++ b/kernel/futex/core.c
@@ -38,6 +38,7 @@
 #include <linux/memblock.h>
 #include <linux/fault-inject.h>
 #include <linux/slab.h>
+#include <linux/hrtimer.h>
 
 #include "futex.h"
 #include "../locking/rtmutex_common.h"
diff --git a/kernel/futex/pi.c b/kernel/futex/pi.c
index 5722467f2737..3247e11341b3 100644
--- a/kernel/futex/pi.c
+++ b/kernel/futex/pi.c
@@ -3,6 +3,7 @@
 #include <linux/slab.h>
 #include <linux/sched/rt.h>
 #include <linux/sched/task.h>
+#include <linux/hrtimer.h>
 
 #include "futex.h"
 #include "../locking/rtmutex_common.h"
diff --git a/kernel/futex/requeue.c b/kernel/futex/requeue.c
index b47bb764b352..cc8bfc20d6a2 100644
--- a/kernel/futex/requeue.c
+++ b/kernel/futex/requeue.c
@@ -2,6 +2,7 @@
 
 #include <linux/plist.h>
 #include <linux/sched/signal.h>
+#include <linux/hrtimer.h>
 
 #include "futex.h"
 #include "../locking/rtmutex_common.h"
diff --git a/kernel/futex/syscalls.c b/kernel/futex/syscalls.c
index 4b6da9116aa6..8ca5488c2cfa 100644
--- a/kernel/futex/syscalls.c
+++ b/kernel/futex/syscalls.c
@@ -2,6 +2,8 @@
 
 #include <linux/syscalls.h>
 #include <linux/time_namespace.h>
+#include <linux/hrtimer.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 #include "futex.h"
 
diff --git a/kernel/futex/waitwake.c b/kernel/futex/waitwake.c
index 3a10375d9521..593f6ac1dfd5 100644
--- a/kernel/futex/waitwake.c
+++ b/kernel/futex/waitwake.c
@@ -1,9 +1,11 @@
 // SPDX-License-Identifier: GPL-2.0-or-later
 
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/plist.h>
 #include <linux/sched/task.h>
 #include <linux/sched/signal.h>
 #include <linux/freezer.h>
+#include <linux/hrtimer.h>
 
 #include "futex.h"
 
diff --git a/kernel/gcov/base.c b/kernel/gcov/base.c
index 073a3738c5e6..8d55a1a34ce9 100644
--- a/kernel/gcov/base.c
+++ b/kernel/gcov/base.c
@@ -19,6 +19,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/notifier.h>
 #include <linux/sched.h>
 #include "gcov.h"
 
diff --git a/kernel/gcov/fs.c b/kernel/gcov/fs.c
index 01520689b57c..175252e44ff7 100644
--- a/kernel/gcov/fs.c
+++ b/kernel/gcov/fs.c
@@ -18,10 +18,13 @@
 #define pr_fmt(fmt)	"gcov: " fmt
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/debugfs.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/mutex.h>
diff --git a/kernel/irq/debugfs.c b/kernel/irq/debugfs.c
index aae0402507ed..bf6c23d6f58b 100644
--- a/kernel/irq/debugfs.c
+++ b/kernel/irq/debugfs.c
@@ -3,6 +3,7 @@
 
 #include <linux/irqdomain.h>
 #include <linux/irq.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #include "internals.h"
diff --git a/kernel/irq/irqdesc.c b/kernel/irq/irqdesc.c
index 4c6b32318ce3..2c6569f3f81f 100644
--- a/kernel/irq/irqdesc.c
+++ b/kernel/irq/irqdesc.c
@@ -14,6 +14,7 @@
 #include <linux/kernel_stat.h>
 #include <linux/maple_tree.h>
 #include <linux/irqdomain.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 
 #include "internals.h"
diff --git a/kernel/irq/irqdomain.c b/kernel/irq/irqdomain.c
index 0bdef4fe925b..d3431093c40d 100644
--- a/kernel/irq/irqdomain.c
+++ b/kernel/irq/irqdomain.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 #include <linux/topology.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
diff --git a/kernel/irq/msi.c b/kernel/irq/msi.c
index 79b4a58ba9c3..bc5d492e448f 100644
--- a/kernel/irq/msi.c
+++ b/kernel/irq/msi.c
@@ -14,6 +14,7 @@
 #include <linux/irqdomain.h>
 #include <linux/msi.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/pci.h>
 
diff --git a/kernel/irq/proc.c b/kernel/irq/proc.c
index 623b8136e9af..374527239b7f 100644
--- a/kernel/irq/proc.c
+++ b/kernel/irq/proc.c
@@ -9,6 +9,7 @@
 #include <linux/gfp.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/interrupt.h>
 #include <linux/kernel_stat.h>
 #include <linux/mutex.h>
diff --git a/kernel/jump_label.c b/kernel/jump_label.c
index d9c822bbffb8..3524828b5f37 100644
--- a/kernel/jump_label.c
+++ b/kernel/jump_label.c
@@ -6,6 +6,7 @@
  * Copyright (C) 2011 Peter Zijlstra
  *
  */
+#include <linux/kernel.h> // for system_state
 #include <linux/memory.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
diff --git a/kernel/kallsyms.c b/kernel/kallsyms.c
index 18edd57b5fe8..78ab23d10e2a 100644
--- a/kernel/kallsyms.c
+++ b/kernel/kallsyms.c
@@ -31,6 +31,7 @@
 #include <linux/kernel.h>
 #include <linux/bsearch.h>
 #include <linux/btf_ids.h>
+#include <linux/sprintf.h>
 
 #include "kallsyms_internal.h"
 
diff --git a/kernel/kallsyms_selftest.c b/kernel/kallsyms_selftest.c
index 8a689b4ff4f9..c60d86eb4124 100644
--- a/kernel/kallsyms_selftest.c
+++ b/kernel/kallsyms_selftest.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/kallsyms.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/random.h>
 #include <linux/sched/clock.h>
 #include <linux/kthread.h>
diff --git a/kernel/kcsan/debugfs.c b/kernel/kcsan/debugfs.c
index 1d1d1b0e4248..529899d33cf7 100644
--- a/kernel/kcsan/debugfs.c
+++ b/kernel/kcsan/debugfs.c
@@ -13,6 +13,7 @@
 #include <linux/debugfs.h>
 #include <linux/init.h>
 #include <linux/kallsyms.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
diff --git a/kernel/kcsan/kcsan_test.c b/kernel/kcsan/kcsan_test.c
index 015586217875..742727f83d24 100644
--- a/kernel/kcsan/kcsan_test.c
+++ b/kernel/kcsan/kcsan_test.c
@@ -25,6 +25,7 @@
 #include <linux/sched.h>
 #include <linux/seqlock.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/timer.h>
 #include <linux/torture.h>
diff --git a/kernel/kcsan/report.c b/kernel/kcsan/report.c
index e95ce7d7a76e..6f30c06c2322 100644
--- a/kernel/kcsan/report.c
+++ b/kernel/kcsan/report.c
@@ -15,6 +15,7 @@
 #include <linux/printk.h>
 #include <linux/sched.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/stacktrace.h>
 
 #include "kcsan.h"
diff --git a/kernel/kprobes.c b/kernel/kprobes.c
index 0bfbcb832147..52bff9d9759b 100644
--- a/kernel/kprobes.c
+++ b/kernel/kprobes.c
@@ -20,9 +20,11 @@
 
 #define pr_fmt(fmt) "kprobes: " fmt
 
+#include <linux/kernel.h> // for core_kernel_text(), kernel_text_address()
 #include <linux/kprobes.h>
 #include <linux/hash.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/stddef.h>
 #include <linux/export.h>
diff --git a/kernel/ksysfs.c b/kernel/ksysfs.c
index fe7a517fc4ab..306b25192740 100644
--- a/kernel/ksysfs.c
+++ b/kernel/ksysfs.c
@@ -8,11 +8,13 @@
 
 #include <asm/byteorder.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 #include <linux/export.h>
 #include <linux/init.h>
 #include <linux/kexec.h>
+#include <linux/kstrtox.h>
 #include <linux/profile.h>
 #include <linux/stat.h>
 #include <linux/sched.h>
diff --git a/kernel/kthread.c b/kernel/kthread.c
index c5e40830c1f2..ad23d06ff758 100644
--- a/kernel/kthread.c
+++ b/kernel/kthread.c
@@ -8,6 +8,7 @@
  * etc.).
  */
 #include <uapi/linux/sched/types.h>
+#include <linux/kernel.h> // for do_exit()
 #include <linux/mm.h>
 #include <linux/mmu_context.h>
 #include <linux/sched.h>
diff --git a/kernel/livepatch/core.c b/kernel/livepatch/core.c
index ecbc9b6aba3a..64df10e17948 100644
--- a/kernel/livepatch/core.c
+++ b/kernel/livepatch/core.c
@@ -10,8 +10,12 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
+#include <linux/sysfs.h>
 #include <linux/list.h>
 #include <linux/kallsyms.h>
 #include <linux/livepatch.h>
diff --git a/kernel/livepatch/transition.c b/kernel/livepatch/transition.c
index e54c3d60a904..b60b6dc439c1 100644
--- a/kernel/livepatch/transition.c
+++ b/kernel/livepatch/transition.c
@@ -8,6 +8,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/cpu.h>
+#include <linux/sched/idle.h>
 #include <linux/stacktrace.h>
 #include <linux/static_call.h>
 #include "core.h"
diff --git a/kernel/locking/lock_events.c b/kernel/locking/lock_events.c
index e68d82099558..ee5e3960b14f 100644
--- a/kernel/locking/lock_events.c
+++ b/kernel/locking/lock_events.c
@@ -19,6 +19,7 @@
 #include <linux/debugfs.h>
 #include <linux/sched.h>
 #include <linux/sched/clock.h>
+#include <linux/sprintf.h>
 #include <linux/fs.h>
 
 #include "lock_events.h"
diff --git a/kernel/locking/lockdep.c b/kernel/locking/lockdep.c
index 151bd3de5936..48afc50180be 100644
--- a/kernel/locking/lockdep.c
+++ b/kernel/locking/lockdep.c
@@ -38,6 +38,7 @@
 #include <linux/seq_file.h>
 #include <linux/spinlock.h>
 #include <linux/kallsyms.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/interrupt.h>
 #include <linux/stacktrace.h>
 #include <linux/debug_locks.h>
diff --git a/kernel/locking/lockdep_proc.c b/kernel/locking/lockdep_proc.c
index e2bfb1db589d..e7d9dc500767 100644
--- a/kernel/locking/lockdep_proc.c
+++ b/kernel/locking/lockdep_proc.c
@@ -18,6 +18,7 @@
 #include <linux/kallsyms.h>
 #include <linux/debug_locks.h>
 #include <linux/vmalloc.h>
+#include <linux/sprintf.h>
 #include <linux/sort.h>
 #include <linux/uaccess.h>
 #include <asm/div64.h>
diff --git a/kernel/locking/locktorture.c b/kernel/locking/locktorture.c
index 415d81e6ce70..31a6191a6f39 100644
--- a/kernel/locking/locktorture.c
+++ b/kernel/locking/locktorture.c
@@ -21,6 +21,7 @@
 #include <linux/smp.h>
 #include <linux/interrupt.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/sched/types.h>
 #include <linux/rtmutex.h>
 #include <linux/atomic.h>
diff --git a/kernel/locking/rtmutex.c b/kernel/locking/rtmutex.c
index 4a10e8c16fd2..4038acd3cf71 100644
--- a/kernel/locking/rtmutex.c
+++ b/kernel/locking/rtmutex.c
@@ -23,6 +23,7 @@
 #include <linux/sched/rt.h>
 #include <linux/sched/wake_q.h>
 #include <linux/ww_mutex.h>
+#include <linux/hrtimer.h>
 
 #include <trace/events/lock.h>
 
diff --git a/kernel/locking/rtmutex_common.h b/kernel/locking/rtmutex_common.h
index 1162e07cdaea..5ecdef2d8383 100644
--- a/kernel/locking/rtmutex_common.h
+++ b/kernel/locking/rtmutex_common.h
@@ -14,6 +14,7 @@
 #define __KERNEL_RTMUTEX_COMMON_H
 
 #include <linux/debug_locks.h>
+#include <linux/rbtree.h>
 #include <linux/rtmutex.h>
 #include <linux/sched/wake_q.h>
 
diff --git a/kernel/locking/rwsem.c b/kernel/locking/rwsem.c
index 2340b6d90ec6..b298d1e72969 100644
--- a/kernel/locking/rwsem.c
+++ b/kernel/locking/rwsem.c
@@ -16,6 +16,7 @@
  */
 
 #include <linux/types.h>
+#include <linux/jiffies.h>
 #include <linux/kernel.h>
 #include <linux/sched.h>
 #include <linux/sched/rt.h>
diff --git a/kernel/locking/test-ww_mutex.c b/kernel/locking/test-ww_mutex.c
index 78719e1ef1b1..79e9097568c2 100644
--- a/kernel/locking/test-ww_mutex.c
+++ b/kernel/locking/test-ww_mutex.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/completion.h>
 
 #include <linux/completion.h>
 #include <linux/delay.h>
diff --git a/kernel/module/dups.c b/kernel/module/dups.c
index 9a92f2f8c9d3..3d2ba2eebddd 100644
--- a/kernel/module/dups.c
+++ b/kernel/module/dups.c
@@ -11,6 +11,7 @@
 #include <linux/sched.h>
 #include <linux/sched/task.h>
 #include <linux/binfmts.h>
+#include <linux/completion.h>
 #include <linux/syscalls.h>
 #include <linux/unistd.h>
 #include <linux/kmod.h>
diff --git a/kernel/module/kmod.c b/kernel/module/kmod.c
index 0800d9891692..03a0d616827e 100644
--- a/kernel/module/kmod.c
+++ b/kernel/module/kmod.c
@@ -8,6 +8,7 @@
 #include <linux/sched.h>
 #include <linux/sched/task.h>
 #include <linux/binfmts.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls.h>
 #include <linux/unistd.h>
 #include <linux/kmod.h>
diff --git a/kernel/module/main.c b/kernel/module/main.c
index 0c4b60c3ad8e..79962fd528a0 100644
--- a/kernel/module/main.c
+++ b/kernel/module/main.c
@@ -9,12 +9,15 @@
 
 #include <linux/export.h>
 #include <linux/extable.h>
+#include <linux/kstrtox.h>
 #include <linux/moduleloader.h>
 #include <linux/module_signature.h>
+#include <linux/sprintf.h>
 #include <linux/trace_events.h>
 #include <linux/init.h>
 #include <linux/kallsyms.h>
 #include <linux/buildid.h>
+#include <linux/completion.h>
 #include <linux/fs.h>
 #include <linux/kernel.h>
 #include <linux/kernel_read_file.h>
diff --git a/kernel/module/stats.c b/kernel/module/stats.c
index 3ba0e98b3c91..5cba664858b8 100644
--- a/kernel/module/stats.c
+++ b/kernel/module/stats.c
@@ -6,10 +6,12 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/module.h>
 #include <linux/string.h>
 #include <linux/printk.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/list.h>
 #include <linux/debugfs.h>
 #include <linux/rculist.h>
diff --git a/kernel/module/sysfs.c b/kernel/module/sysfs.c
index d964167c6658..4b87b8e9723c 100644
--- a/kernel/module/sysfs.c
+++ b/kernel/module/sysfs.c
@@ -8,11 +8,13 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
 #include <linux/kallsyms.h>
 #include <linux/mutex.h>
 #include "internal.h"
+#include <linux/completion.h>
 
 /*
  * /sys/module/foo/sections stuff
diff --git a/kernel/notifier.c b/kernel/notifier.c
index b3ce28f39eb6..446a6b04eaec 100644
--- a/kernel/notifier.c
+++ b/kernel/notifier.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/kdebug.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/kprobes.h>
 #include <linux/export.h>
 #include <linux/notifier.h>
diff --git a/kernel/nsproxy.c b/kernel/nsproxy.c
index 15781acaac1c..8d451dc4ce89 100644
--- a/kernel/nsproxy.c
+++ b/kernel/nsproxy.c
@@ -27,6 +27,10 @@
 #include <linux/cgroup.h>
 #include <linux/perf_event.h>
 
+#ifdef CONFIG_IPC_NS
+#include <linux/sem.h> // for exit_sem()
+#endif
+
 static struct kmem_cache *nsproxy_cachep;
 
 struct nsproxy init_nsproxy = {
diff --git a/kernel/padata.c b/kernel/padata.c
index e3f639ff1670..a6c1f94279f7 100644
--- a/kernel/padata.c
+++ b/kernel/padata.c
@@ -20,8 +20,10 @@
 #include <linux/mutex.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/rcupdate.h>
+#include <linux/refcount.h>
 
 #define	PADATA_WORK_ONSTACK	1	/* Work's memory is on stack */
 
diff --git a/kernel/panic.c b/kernel/panic.c
index 747c3f3d289a..aaeea6f1d8c3 100644
--- a/kernel/panic.c
+++ b/kernel/panic.c
@@ -10,21 +10,25 @@
  * to indicate a major problem.
  */
 #include <linux/debug_locks.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/debug.h>
 #include <linux/interrupt.h>
 #include <linux/kgdb.h>
 #include <linux/kmsg_dump.h>
 #include <linux/kallsyms.h>
 #include <linux/notifier.h>
+#include <linux/sprintf.h>
 #include <linux/vt_kern.h>
 #include <linux/module.h>
 #include <linux/random.h>
 #include <linux/ftrace.h>
 #include <linux/reboot.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for bust_spinlocks(), tracing_off()
 #include <linux/kexec.h>
 #include <linux/panic_notifier.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/sysrq.h>
 #include <linux/init.h>
@@ -34,6 +38,7 @@
 #include <linux/ratelimit.h>
 #include <linux/debugfs.h>
 #include <linux/sysfs.h>
+#include <linux/hrtimer.h> //for sysrq_timer_list_show()
 #include <linux/context_tracking.h>
 #include <trace/events/error_report.h>
 #include <asm/sections.h>
diff --git a/kernel/params.c b/kernel/params.c
index 2e447f8ae183..09c5d97d4ab0 100644
--- a/kernel/params.c
+++ b/kernel/params.c
@@ -14,7 +14,9 @@
 #include <linux/overflow.h>
 #include <linux/security.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
+#include <linux/completion.h>
 
 #ifdef CONFIG_SYSFS
 /* Protects all built-in parameters, modules use their own param_lock */
diff --git a/kernel/pid_namespace.c b/kernel/pid_namespace.c
index 7ade20e95232..a3eaaeefc7c9 100644
--- a/kernel/pid_namespace.c
+++ b/kernel/pid_namespace.c
@@ -16,6 +16,7 @@
 #include <linux/cred.h>
 #include <linux/err.h>
 #include <linux/acct.h>
+#include <linux/kernel.h> // for do_exit()
 #include <linux/slab.h>
 #include <linux/proc_ns.h>
 #include <linux/reboot.h>
diff --git a/kernel/power/autosleep.c b/kernel/power/autosleep.c
index b29c8aca7486..2829564b4d6d 100644
--- a/kernel/power/autosleep.c
+++ b/kernel/power/autosleep.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/device.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/mutex.h>
 #include <linux/pm_wakeup.h>
 
diff --git a/kernel/power/energy_model.c b/kernel/power/energy_model.c
index 7101fa3fa0c0..3c6a3cc881a6 100644
--- a/kernel/power/energy_model.c
+++ b/kernel/power/energy_model.c
@@ -13,9 +13,12 @@
 #include <linux/cpufreq.h>
 #include <linux/cpumask.h>
 #include <linux/debugfs.h>
+#include <linux/device.h>
 #include <linux/energy_model.h>
+#include <linux/kref.h>
 #include <linux/sched/topology.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /*
  * Mutex serializing the registrations of performance domains and letting
diff --git a/kernel/power/hibernate.c b/kernel/power/hibernate.c
index 219191d6d0e8..84bafe403a40 100644
--- a/kernel/power/hibernate.c
+++ b/kernel/power/hibernate.c
@@ -13,6 +13,9 @@
 
 #include <linux/blkdev.h>
 #include <linux/export.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/reboot.h>
 #include <linux/string.h>
diff --git a/kernel/power/main.c b/kernel/power/main.c
index a9e0693aaf69..81d1c4606c5e 100644
--- a/kernel/power/main.c
+++ b/kernel/power/main.c
@@ -9,6 +9,8 @@
 #include <linux/acpi.h>
 #include <linux/export.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/pm-trace.h>
 #include <linux/workqueue.h>
diff --git a/kernel/power/suspend_test.c b/kernel/power/suspend_test.c
index b663a97f5867..af7f7076adc9 100644
--- a/kernel/power/suspend_test.c
+++ b/kernel/power/suspend_test.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/rtc.h>
 
 #include "power.h"
diff --git a/kernel/power/wakelock.c b/kernel/power/wakelock.c
index 52571dcad768..fdcc8f7e2dc3 100644
--- a/kernel/power/wakelock.c
+++ b/kernel/power/wakelock.c
@@ -15,6 +15,7 @@
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/hrtimer.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/rbtree.h>
 #include <linux/slab.h>
diff --git a/kernel/printk/printk.c b/kernel/printk/printk.c
index a000bef51177..ca6f2b197e89 100644
--- a/kernel/printk/printk.c
+++ b/kernel/printk/printk.c
@@ -20,7 +20,9 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
 #include <linux/console.h>
diff --git a/kernel/profile.c b/kernel/profile.c
index 8a77769bc4b4..2ae5eb04deb5 100644
--- a/kernel/profile.c
+++ b/kernel/profile.c
@@ -17,6 +17,7 @@
 
 #include <linux/export.h>
 #include <linux/profile.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/memblock.h>
 #include <linux/notifier.h>
 #include <linux/mm.h>
diff --git a/kernel/rcu/refscale.c b/kernel/rcu/refscale.c
index 2c2648a3ad30..95458cce438c 100644
--- a/kernel/rcu/refscale.c
+++ b/kernel/rcu/refscale.c
@@ -30,6 +30,7 @@
 #include <linux/sched.h>
 #include <linux/spinlock.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/srcu.h>
 #include <linux/slab.h>
diff --git a/kernel/rcu/srcutiny.c b/kernel/rcu/srcutiny.c
index c38e5933a5d6..ea1459a9a038 100644
--- a/kernel/rcu/srcutiny.c
+++ b/kernel/rcu/srcutiny.c
@@ -8,6 +8,7 @@
  * Author: Paul McKenney <paulmck@linux.ibm.com>
  */
 
+#include <linux/completion.h>
 #include <linux/export.h>
 #include <linux/mutex.h>
 #include <linux/preempt.h>
@@ -15,6 +16,7 @@
 #include <linux/sched.h>
 #include <linux/delay.h>
 #include <linux/srcu.h>
+#include <linux/workqueue.h>
 
 #include <linux/rcu_node_tree.h>
 #include "rcu_segcblist.h"
diff --git a/kernel/rcu/srcutree.c b/kernel/rcu/srcutree.c
index e4d673fc30f4..826274f446df 100644
--- a/kernel/rcu/srcutree.c
+++ b/kernel/rcu/srcutree.c
@@ -22,6 +22,7 @@
 #include <linux/rcupdate_wait.h>
 #include <linux/sched.h>
 #include <linux/smp.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/slab.h>
diff --git a/kernel/rcu/tasks.h b/kernel/rcu/tasks.h
index 866743e0796f..8cf7bd9efae5 100644
--- a/kernel/rcu/tasks.h
+++ b/kernel/rcu/tasks.h
@@ -7,6 +7,8 @@
 
 #ifdef CONFIG_TASKS_RCU_GENERIC
 #include "rcu_segcblist.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 ////////////////////////////////////////////////////////////////////////
 //
diff --git a/kernel/rcu/tree.c b/kernel/rcu/tree.c
index c8980d76f402..45b84584fc7b 100644
--- a/kernel/rcu/tree.c
+++ b/kernel/rcu/tree.c
@@ -20,6 +20,7 @@
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/spinlock.h>
 #include <linux/smp.h>
 #include <linux/rcupdate_wait.h>
@@ -29,6 +30,7 @@
 #include <linux/nmi.h>
 #include <linux/atomic.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/export.h>
 #include <linux/completion.h>
 #include <linux/kmemleak.h>
@@ -39,6 +41,7 @@
 #include <linux/notifier.h>
 #include <linux/cpu.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/kernel_stat.h>
 #include <linux/wait.h>
@@ -48,6 +51,7 @@
 #include <linux/delay.h>
 #include <linux/random.h>
 #include <linux/trace_events.h>
+#include <linux/shrinker.h>
 #include <linux/suspend.h>
 #include <linux/ftrace.h>
 #include <linux/tick.h>
diff --git a/kernel/rcu/tree_stall.h b/kernel/rcu/tree_stall.h
index 5d666428546b..4a5892821760 100644
--- a/kernel/rcu/tree_stall.h
+++ b/kernel/rcu/tree_stall.h
@@ -9,6 +9,7 @@
 
 #include <linux/kvm_para.h>
 #include <linux/rcu_notifier.h>
+#include <linux/sprintf.h>
 
 //////////////////////////////////////////////////////////////////////////////
 //
diff --git a/kernel/rcu/update.c b/kernel/rcu/update.c
index 46aaaa9fe339..d23be2d7724d 100644
--- a/kernel/rcu/update.c
+++ b/kernel/rcu/update.c
@@ -28,6 +28,7 @@
 #include <linux/torture.h>
 #include <linux/atomic.h>
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/percpu.h>
 #include <linux/notifier.h>
 #include <linux/cpu.h>
diff --git a/kernel/reboot.c b/kernel/reboot.c
index 22c16e2564cc..61b0461f0d17 100644
--- a/kernel/reboot.c
+++ b/kernel/reboot.c
@@ -9,11 +9,15 @@
 
 #include <linux/atomic.h>
 #include <linux/ctype.h>
+#include <linux/device.h>
 #include <linux/export.h>
+#include <linux/kernel.h>
 #include <linux/kexec.h>
 #include <linux/kmod.h>
 #include <linux/kmsg_dump.h>
+#include <linux/kstrtox.h>
 #include <linux/reboot.h>
+#include <linux/sprintf.h>
 #include <linux/suspend.h>
 #include <linux/syscalls.h>
 #include <linux/syscore_ops.h>
diff --git a/kernel/relay.c b/kernel/relay.c
index a8e90e98bf2c..a240469fe98f 100644
--- a/kernel/relay.c
+++ b/kernel/relay.c
@@ -22,6 +22,8 @@
 #include <linux/mm.h>
 #include <linux/cpu.h>
 #include <linux/splice.h>
+#include <linux/sprintf.h>
+#include <linux/kref.h>
 
 /* list of open channels, for cpu hotplug */
 static DEFINE_MUTEX(relay_channels_mutex);
diff --git a/kernel/resource.c b/kernel/resource.c
index fcbca39dbc45..bbb252e88707 100644
--- a/kernel/resource.c
+++ b/kernel/resource.c
@@ -14,6 +14,7 @@
 #include <linux/errno.h>
 #include <linux/ioport.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/fs.h>
diff --git a/kernel/sched/autogroup.c b/kernel/sched/autogroup.c
index 991fc9002535..925eddb5cb87 100644
--- a/kernel/sched/autogroup.c
+++ b/kernel/sched/autogroup.c
@@ -1,5 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
+#include <linux/sprintf.h>
+
 /*
  * Auto-group scheduling implementation:
  */
diff --git a/kernel/sched/completion.c b/kernel/sched/completion.c
index 3561ab533dd4..b66f80dbb8b6 100644
--- a/kernel/sched/completion.c
+++ b/kernel/sched/completion.c
@@ -1,5 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
+#include <linux/completion.h>
+
 /*
  * Generic wait-for-completion handler;
  *
diff --git a/kernel/sched/core.c b/kernel/sched/core.c
index 083f2258182d..eb4fc2f58af3 100644
--- a/kernel/sched/core.c
+++ b/kernel/sched/core.c
@@ -8,12 +8,16 @@
  */
 #include <linux/highmem.h>
 #include <linux/hrtimer_api.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
 #include <linux/ktime_api.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls_api.h>
 #include <linux/debug_locks.h>
 #include <linux/prefetch.h>
 #include <linux/capability.h>
+#include <linux/completion.h>
 #include <linux/pgtable_api.h>
 #include <linux/wait_bit.h>
 #include <linux/jiffies.h>
diff --git a/kernel/sched/cpufreq_schedutil.c b/kernel/sched/cpufreq_schedutil.c
index eece6244f9d2..4eb14da40870 100644
--- a/kernel/sched/cpufreq_schedutil.c
+++ b/kernel/sched/cpufreq_schedutil.c
@@ -6,6 +6,9 @@
  * Author: Rafael J. Wysocki <rafael.j.wysocki@intel.com>
  */
 
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
+
 #define IOWAIT_BOOST_MIN	(SCHED_CAPACITY_SCALE / 8)
 
 struct sugov_tunables {
diff --git a/kernel/sched/debug.c b/kernel/sched/debug.c
index 8d5d98a5834d..fa5b84b6caa6 100644
--- a/kernel/sched/debug.c
+++ b/kernel/sched/debug.c
@@ -168,6 +168,8 @@ static const struct file_operations sched_feat_fops = {
 
 #ifdef CONFIG_SMP
 
+#include <linux/kstrtox.h>
+
 static ssize_t sched_scaling_write(struct file *filp, const char __user *ubuf,
 				   size_t cnt, loff_t *ppos)
 {
diff --git a/kernel/sched/fair.c b/kernel/sched/fair.c
index 533547e3c90a..40697096fe9c 100644
--- a/kernel/sched/fair.c
+++ b/kernel/sched/fair.c
@@ -21,9 +21,11 @@
  *  Copyright (C) 2007 Red Hat, Inc., Peter Zijlstra
  */
 #include <linux/energy_model.h>
+#include <linux/kstrtox.h>
 #include <linux/mmap_lock.h>
 #include <linux/hugetlb_inline.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/mm_api.h>
 #include <linux/highmem.h>
 #include <linux/spinlock_api.h>
@@ -45,6 +47,7 @@
 #include <linux/mutex_api.h>
 #include <linux/profile.h>
 #include <linux/psi.h>
+#include <linux/random.h>
 #include <linux/ratelimit.h>
 #include <linux/task_work.h>
 #include <linux/rbtree_augmented.h>
diff --git a/kernel/sched/psi.c b/kernel/sched/psi.c
index 7b4aa5809c0f..1aa02a4f7065 100644
--- a/kernel/sched/psi.c
+++ b/kernel/sched/psi.c
@@ -137,6 +137,9 @@
  * sampling of the aggregate task states would be.
  */
 
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
+
 static int psi_bug __read_mostly;
 
 DEFINE_STATIC_KEY_FALSE(psi_disabled);
diff --git a/kernel/sched/topology.c b/kernel/sched/topology.c
index 10d1391e7416..6644391fb97b 100644
--- a/kernel/sched/topology.c
+++ b/kernel/sched/topology.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/bsearch.h>
+#include <linux/kstrtox.h>
 
 DEFINE_MUTEX(sched_domains_mutex);
 
diff --git a/kernel/seccomp.c b/kernel/seccomp.c
index aca7b437882e..e9c77ccd1e57 100644
--- a/kernel/seccomp.c
+++ b/kernel/seccomp.c
@@ -18,6 +18,7 @@
 #include <linux/refcount.h>
 #include <linux/audit.h>
 #include <linux/compat.h>
+#include <linux/completion.h>
 #include <linux/coredump.h>
 #include <linux/kmemleak.h>
 #include <linux/nospec.h>
diff --git a/kernel/signal.c b/kernel/signal.c
index e3edcd784e45..bbdb1adb3713 100644
--- a/kernel/signal.c
+++ b/kernel/signal.c
@@ -22,6 +22,8 @@
 #include <linux/sched/cputime.h>
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/hrtimer.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/mm.h>
 #include <linux/proc_fs.h>
 #include <linux/tty.h>
diff --git a/kernel/smp.c b/kernel/smp.c
index f085ebcdf9e7..441f6dcf5261 100644
--- a/kernel/smp.c
+++ b/kernel/smp.c
@@ -11,6 +11,7 @@
 #include <linux/rcupdate.h>
 #include <linux/rculist.h>
 #include <linux/kernel.h>
+#include <linux/moduleparam.h>
 #include <linux/export.h>
 #include <linux/percpu.h>
 #include <linux/init.h>
@@ -25,6 +26,7 @@
 #include <linux/nmi.h>
 #include <linux/sched/debug.h>
 #include <linux/jump_label.h>
+#include <linux/completion.h>
 
 #include <trace/events/ipi.h>
 #define CREATE_TRACE_POINTS
diff --git a/kernel/smpboot.c b/kernel/smpboot.c
index 1992b62e980b..19f25456254b 100644
--- a/kernel/smpboot.c
+++ b/kernel/smpboot.c
@@ -15,6 +15,7 @@
 #include <linux/percpu.h>
 #include <linux/kthread.h>
 #include <linux/smpboot.h>
+#include <linux/topology.h> // for cpu_to_node()
 
 #include "smpboot.h"
 
diff --git a/kernel/static_call_inline.c b/kernel/static_call_inline.c
index 639397b5491c..f666e7d19cbb 100644
--- a/kernel/static_call_inline.c
+++ b/kernel/static_call_inline.c
@@ -2,6 +2,7 @@
 #include <linux/init.h>
 #include <linux/static_call.h>
 #include <linux/bug.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/smp.h>
 #include <linux/sort.h>
 #include <linux/slab.h>
diff --git a/kernel/sys.c b/kernel/sys.c
index f8e543f1e38a..78675a5f28df 100644
--- a/kernel/sys.c
+++ b/kernel/sys.c
@@ -8,6 +8,7 @@
 #include <linux/export.h>
 #include <linux/mm.h>
 #include <linux/mm_inline.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/mman.h>
 #include <linux/reboot.h>
diff --git a/kernel/sysctl.c b/kernel/sysctl.c
index 157f7ce2942d..e647952b8e27 100644
--- a/kernel/sysctl.c
+++ b/kernel/sysctl.c
@@ -21,6 +21,7 @@
 
 #include <linux/module.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/swap.h>
 #include <linux/slab.h>
 #include <linux/sysctl.h>
diff --git a/kernel/time/clockevents.c b/kernel/time/clockevents.c
index a7ca458cdd9c..644995ddfd64 100644
--- a/kernel/time/clockevents.c
+++ b/kernel/time/clockevents.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 #include <linux/device.h>
 
 #include "tick-internal.h"
diff --git a/kernel/time/clocksource.c b/kernel/time/clocksource.c
index 4ef06651ad07..7406cdfa9c38 100644
--- a/kernel/time/clocksource.c
+++ b/kernel/time/clocksource.c
@@ -10,11 +10,13 @@
 #include <linux/device.h>
 #include <linux/clocksource.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/module.h>
 #include <linux/sched.h> /* for spin_unlock_irq() using preempt_count() m68k */
 #include <linux/tick.h>
 #include <linux/kthread.h>
 #include <linux/prandom.h>
+#include <linux/sprintf.h>
 #include <linux/cpu.h>
 
 #include "tick-internal.h"
diff --git a/kernel/time/hrtimer.c b/kernel/time/hrtimer.c
index edb0f821dcea..a0105b9682e2 100644
--- a/kernel/time/hrtimer.c
+++ b/kernel/time/hrtimer.c
@@ -24,11 +24,13 @@
 
 #include <linux/cpu.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/percpu.h>
 #include <linux/hrtimer.h>
 #include <linux/notifier.h>
 #include <linux/syscalls.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/tick.h>
 #include <linux/err.h>
 #include <linux/debugobjects.h>
@@ -39,6 +41,7 @@
 #include <linux/sched/nohz.h>
 #include <linux/sched/debug.h>
 #include <linux/timer.h>
+#include <linux/timerqueue.h>
 #include <linux/freezer.h>
 #include <linux/compat.h>
 
diff --git a/kernel/time/namespace.c b/kernel/time/namespace.c
index 0775b9ec952a..b37f8e91323d 100644
--- a/kernel/time/namespace.c
+++ b/kernel/time/namespace.c
@@ -17,6 +17,7 @@
 #include <linux/cred.h>
 #include <linux/err.h>
 #include <linux/mm.h>
+#include <linux/ktime.h> //for timespec64_to_ktime()
 
 #include <vdso/datapage.h>
 
diff --git a/kernel/time/ntp.c b/kernel/time/ntp.c
index 406dccb79c2b..de978f57cc6e 100644
--- a/kernel/time/ntp.c
+++ b/kernel/time/ntp.c
@@ -11,6 +11,7 @@
 #include <linux/workqueue.h>
 #include <linux/hrtimer.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/math64.h>
 #include <linux/timex.h>
 #include <linux/time.h>
diff --git a/kernel/time/posix-stubs.c b/kernel/time/posix-stubs.c
index 9b6fcb8d85e7..5c39520c712e 100644
--- a/kernel/time/posix-stubs.c
+++ b/kernel/time/posix-stubs.c
@@ -10,6 +10,7 @@
 #include <linux/kernel.h>
 #include <linux/sched.h>
 #include <linux/errno.h>
+#include <linux/hrtimer.h>
 #include <linux/syscalls.h>
 #include <linux/ktime.h>
 #include <linux/timekeeping.h>
diff --git a/kernel/time/posix-timers.c b/kernel/time/posix-timers.c
index b924f0f096fa..9b138586cd29 100644
--- a/kernel/time/posix-timers.c
+++ b/kernel/time/posix-timers.c
@@ -31,6 +31,7 @@
 #include <linux/compat.h>
 #include <linux/nospec.h>
 #include <linux/time_namespace.h>
+#include <linux/hrtimer.h>
 
 #include "timekeeping.h"
 #include "posix-timers.h"
diff --git a/kernel/time/test_udelay.c b/kernel/time/test_udelay.c
index 20d5df631570..f53fb787c456 100644
--- a/kernel/time/test_udelay.c
+++ b/kernel/time/test_udelay.c
@@ -14,6 +14,7 @@
 #include <linux/delay.h>
 #include <linux/ktime.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 
 #define DEFAULT_ITERATIONS 100
diff --git a/kernel/time/tick-common.c b/kernel/time/tick-common.c
index e9138cd7a0f5..b3d316ce22c6 100644
--- a/kernel/time/tick-common.c
+++ b/kernel/time/tick-common.c
@@ -11,6 +11,7 @@
 #include <linux/err.h>
 #include <linux/hrtimer.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/nmi.h>
 #include <linux/percpu.h>
 #include <linux/profile.h>
diff --git a/kernel/time/tick-sched.c b/kernel/time/tick-sched.c
index 01fb50c1b17e..8de343c39396 100644
--- a/kernel/time/tick-sched.c
+++ b/kernel/time/tick-sched.c
@@ -12,7 +12,9 @@
 #include <linux/err.h>
 #include <linux/hrtimer.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/percpu.h>
 #include <linux/nmi.h>
 #include <linux/profile.h>
diff --git a/kernel/time/timer_list.c b/kernel/time/timer_list.c
index ed7d6ad694fb..99ae83f3f646 100644
--- a/kernel/time/timer_list.c
+++ b/kernel/time/timer_list.c
@@ -10,6 +10,7 @@
 #include <linux/spinlock.h>
 #include <linux/sched.h>
 #include <linux/seq_file.h>
+#include <linux/timerqueue.h>
 #include <linux/kallsyms.h>
 #include <linux/nmi.h>
 
diff --git a/kernel/trace/blktrace.c b/kernel/trace/blktrace.c
index d5d94510afd3..620ffbd44dbe 100644
--- a/kernel/trace/blktrace.c
+++ b/kernel/trace/blktrace.c
@@ -9,12 +9,14 @@
 #include <linux/kernel.h>
 #include <linux/blkdev.h>
 #include <linux/blktrace_api.h>
+#include <linux/kstrtox.h>
 #include <linux/percpu.h>
 #include <linux/init.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/debugfs.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/uaccess.h>
 #include <linux/list.h>
diff --git a/kernel/trace/ftrace.c b/kernel/trace/ftrace.c
index c060d5b47910..3771f94c0797 100644
--- a/kernel/trace/ftrace.c
+++ b/kernel/trace/ftrace.c
@@ -18,8 +18,11 @@
 #include <linux/clocksource.h>
 #include <linux/sched/task.h>
 #include <linux/kallsyms.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
 #include <linux/security.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/tracefs.h>
 #include <linux/hardirq.h>
 #include <linux/kthread.h>
diff --git a/kernel/trace/ring_buffer.c b/kernel/trace/ring_buffer.c
index 0a9d5984687c..8ca08687c769 100644
--- a/kernel/trace/ring_buffer.c
+++ b/kernel/trace/ring_buffer.c
@@ -15,6 +15,7 @@
 #include <linux/security.h>
 #include <linux/uaccess.h>
 #include <linux/hardirq.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/kthread.h>	/* for self test */
 #include <linux/module.h>
 #include <linux/percpu.h>
@@ -26,6 +27,7 @@
 #include <linux/list.h>
 #include <linux/cpu.h>
 #include <linux/oom.h>
+#include <linux/completion.h>
 
 #include <asm/local64.h>
 #include <asm/local.h>
diff --git a/kernel/trace/ring_buffer_benchmark.c b/kernel/trace/ring_buffer_benchmark.c
index 008187ebd7fe..5b42650beffc 100644
--- a/kernel/trace/ring_buffer_benchmark.c
+++ b/kernel/trace/ring_buffer_benchmark.c
@@ -6,6 +6,7 @@
  */
 #include <linux/ring_buffer.h>
 #include <linux/completion.h>
+#include <linux/kernel.h> // for trace_printk()
 #include <linux/kthread.h>
 #include <uapi/linux/sched/types.h>
 #include <linux/module.h>
diff --git a/kernel/trace/rv/rv.c b/kernel/trace/rv/rv.c
index 2f68e93fff0b..11e609674d00 100644
--- a/kernel/trace/rv/rv.c
+++ b/kernel/trace/rv/rv.c
@@ -139,6 +139,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/slab.h>
diff --git a/kernel/trace/rv/rv_reactors.c b/kernel/trace/rv/rv_reactors.c
index 6aae106695b6..c11ea93fe209 100644
--- a/kernel/trace/rv/rv_reactors.c
+++ b/kernel/trace/rv/rv_reactors.c
@@ -62,6 +62,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/kstrtox.h>
 
 #include "rv.h"
 
diff --git a/kernel/trace/trace.c b/kernel/trace/trace.c
index 9ff8a439d674..895d4bf17804 100644
--- a/kernel/trace/trace.c
+++ b/kernel/trace/trace.c
@@ -17,8 +17,11 @@
 #include <linux/stacktrace.h>
 #include <linux/writeback.h>
 #include <linux/kallsyms.h>
+#include <linux/kernel.h> // for DUMP_*
+#include <linux/kstrtox.h>
 #include <linux/security.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/irqflags.h>
 #include <linux/debugfs.h>
 #include <linux/tracefs.h>
diff --git a/kernel/trace/trace_benchmark.c b/kernel/trace/trace_benchmark.c
index 54d5fa35c90a..e2f64938261c 100644
--- a/kernel/trace/trace_benchmark.c
+++ b/kernel/trace/trace_benchmark.c
@@ -1,7 +1,9 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/delay.h>
 #include <linux/module.h>
+#include <linux/kernel.h> // for tracing_is_on()
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 #include <linux/trace_clock.h>
 
 #define CREATE_TRACE_POINTS
diff --git a/kernel/trace/trace_boot.c b/kernel/trace/trace_boot.c
index dbe29b4c6a7a..a50c7fcfb9cb 100644
--- a/kernel/trace/trace_boot.c
+++ b/kernel/trace/trace_boot.c
@@ -11,7 +11,9 @@
 #include <linux/ftrace.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/trace.h>
diff --git a/kernel/trace/trace_event_perf.c b/kernel/trace/trace_event_perf.c
index 05e791241812..ff4e9eb3b29f 100644
--- a/kernel/trace/trace_event_perf.c
+++ b/kernel/trace/trace_event_perf.c
@@ -11,6 +11,7 @@
 #include <linux/security.h>
 #include "trace.h"
 #include "trace_probe.h"
+#include <linux/kernel.h> // for u64_to_user_ptr()
 
 static char __percpu *perf_trace_buf[PERF_NR_CONTEXTS];
 
diff --git a/kernel/trace/trace_events.c b/kernel/trace/trace_events.c
index 7c364b87352e..56a21d68cdd5 100644
--- a/kernel/trace/trace_events.c
+++ b/kernel/trace/trace_events.c
@@ -15,10 +15,12 @@
 #include <linux/security.h>
 #include <linux/spinlock.h>
 #include <linux/kthread.h>
+#include <linux/sprintf.h>
 #include <linux/tracefs.h>
 #include <linux/uaccess.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/sort.h>
 #include <linux/slab.h>
 #include <linux/delay.h>
diff --git a/kernel/trace/trace_events_filter.c b/kernel/trace/trace_events_filter.c
index 0c611b281a5b..0f7f750d2dd8 100644
--- a/kernel/trace/trace_events_filter.c
+++ b/kernel/trace/trace_events_filter.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/uaccess.h>
+#include <linux/kallsyms.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
 #include <linux/mutex.h>
diff --git a/kernel/trace/trace_events_hist.c b/kernel/trace/trace_events_hist.c
index 6ece1308d36a..6caa2e225d22 100644
--- a/kernel/trace/trace_events_hist.c
+++ b/kernel/trace/trace_events_hist.c
@@ -7,9 +7,11 @@
 
 #include <linux/module.h>
 #include <linux/kallsyms.h>
+#include <linux/kstrtox.h>
 #include <linux/security.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stacktrace.h>
 #include <linux/rculist.h>
 #include <linux/tracefs.h>
diff --git a/kernel/trace/trace_events_inject.c b/kernel/trace/trace_events_inject.c
index 8650562bdaa9..a96134227927 100644
--- a/kernel/trace/trace_events_inject.c
+++ b/kernel/trace/trace_events_inject.c
@@ -7,6 +7,7 @@
 
 #include <linux/module.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/rculist.h>
diff --git a/kernel/trace/trace_events_synth.c b/kernel/trace/trace_events_synth.c
index e7af286af4f1..2c687be381ba 100644
--- a/kernel/trace/trace_events_synth.c
+++ b/kernel/trace/trace_events_synth.c
@@ -7,6 +7,7 @@
 
 #include <linux/module.h>
 #include <linux/kallsyms.h>
+#include <linux/kstrtox.h>
 #include <linux/security.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
diff --git a/kernel/trace/trace_events_trigger.c b/kernel/trace/trace_events_trigger.c
index b33c3861fbbb..43d38ed1dffd 100644
--- a/kernel/trace/trace_events_trigger.c
+++ b/kernel/trace/trace_events_trigger.c
@@ -8,6 +8,8 @@
 #include <linux/security.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <linux/rculist.h>
diff --git a/kernel/trace/trace_events_user.c b/kernel/trace/trace_events_user.c
index e76f5e1efdf2..c179f712e02e 100644
--- a/kernel/trace/trace_events_user.c
+++ b/kernel/trace/trace_events_user.c
@@ -9,6 +9,7 @@
 #include <linux/bitmap.h>
 #include <linux/cdev.h>
 #include <linux/hashtable.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/io.h>
 #include <linux/uio.h>
diff --git a/kernel/trace/trace_fprobe.c b/kernel/trace/trace_fprobe.c
index 7d2ddbcfa377..f81e102a8ca9 100644
--- a/kernel/trace/trace_fprobe.c
+++ b/kernel/trace/trace_fprobe.c
@@ -6,6 +6,7 @@
 #define pr_fmt(fmt)	"trace_fprobe: " fmt
 
 #include <linux/fprobe.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/rculist.h>
 #include <linux/security.h>
diff --git a/kernel/trace/trace_functions.c b/kernel/trace/trace_functions.c
index 9f1bfbe105e8..92e0e82e65b1 100644
--- a/kernel/trace/trace_functions.c
+++ b/kernel/trace/trace_functions.c
@@ -12,6 +12,8 @@
  */
 #include <linux/ring_buffer.h>
 #include <linux/debugfs.h>
+#include <linux/kernel.h> // for tracing_is_on(), ftrace_dump()
+#include <linux/kstrtox.h>
 #include <linux/uaccess.h>
 #include <linux/ftrace.h>
 #include <linux/slab.h>
diff --git a/kernel/trace/trace_functions_graph.c b/kernel/trace/trace_functions_graph.c
index c35fbaab2a47..e497280de9b6 100644
--- a/kernel/trace/trace_functions_graph.c
+++ b/kernel/trace/trace_functions_graph.c
@@ -10,8 +10,10 @@
 #include <linux/uaccess.h>
 #include <linux/ftrace.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 
 #include "trace.h"
 #include "trace_output.h"
diff --git a/kernel/trace/trace_kdb.c b/kernel/trace/trace_kdb.c
index 59857a1ee44c..df467d75abc2 100644
--- a/kernel/trace/trace_kdb.c
+++ b/kernel/trace/trace_kdb.c
@@ -13,6 +13,7 @@
 #include <linux/kgdb.h>
 #include <linux/kdb.h>
 #include <linux/ftrace.h>
+#include <linux/kstrtox.h>
 
 #include "trace.h"
 #include "trace_output.h"
diff --git a/kernel/trace/trace_kprobe.c b/kernel/trace/trace_kprobe.c
index c4c6e0e0068b..356e39a96230 100644
--- a/kernel/trace/trace_kprobe.c
+++ b/kernel/trace/trace_kprobe.c
@@ -8,6 +8,7 @@
 #define pr_fmt(fmt)	"trace_kprobe: " fmt
 
 #include <linux/bpf-cgroup.h>
+#include <linux/kstrtox.h>
 #include <linux/security.h>
 #include <linux/module.h>
 #include <linux/uaccess.h>
diff --git a/kernel/trace/trace_osnoise.c b/kernel/trace/trace_osnoise.c
index a8e28f9b9271..c3cefb09741d 100644
--- a/kernel/trace/trace_osnoise.c
+++ b/kernel/trace/trace_osnoise.c
@@ -21,6 +21,7 @@
 #include <linux/uaccess.h>
 #include <linux/cpumask.h>
 #include <linux/delay.h>
+#include <linux/hrtimer.h>
 #include <linux/sched/clock.h>
 #include <uapi/linux/sched/types.h>
 #include <linux/sched.h>
diff --git a/kernel/trace/trace_probe.c b/kernel/trace/trace_probe.c
index 34289f9c6707..51fce774c602 100644
--- a/kernel/trace/trace_probe.c
+++ b/kernel/trace/trace_probe.c
@@ -13,6 +13,8 @@
 
 #include <linux/bpf.h>
 #include "trace_btf.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include "trace_probe.h"
 
diff --git a/kernel/trace/trace_selftest.c b/kernel/trace/trace_selftest.c
index 529590499b1f..c96a5b54edb7 100644
--- a/kernel/trace/trace_selftest.c
+++ b/kernel/trace/trace_selftest.c
@@ -6,6 +6,7 @@
 #include <linux/kthread.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/completion.h>
 
 static inline int trace_valid_entry(struct trace_entry *entry)
 {
diff --git a/kernel/trace/trace_seq.c b/kernel/trace/trace_seq.c
index c158d65a8a88..4e5ba5bdf7dd 100644
--- a/kernel/trace/trace_seq.c
+++ b/kernel/trace/trace_seq.c
@@ -22,6 +22,7 @@
  */
 #include <linux/uaccess.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/trace_seq.h>
 
 /* How much buffer is left on the trace_seq? */
diff --git a/kernel/trace/trace_stack.c b/kernel/trace/trace_stack.c
index 5a48dba912ea..53403b686de2 100644
--- a/kernel/trace/trace_stack.c
+++ b/kernel/trace/trace_stack.c
@@ -7,6 +7,7 @@
 #include <linux/stacktrace.h>
 #include <linux/security.h>
 #include <linux/kallsyms.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/spinlock.h>
 #include <linux/uaccess.h>
diff --git a/kernel/trace/trace_syscalls.c b/kernel/trace/trace_syscalls.c
index 9c581d6da843..4688fc0b60e8 100644
--- a/kernel/trace/trace_syscalls.c
+++ b/kernel/trace/trace_syscalls.c
@@ -4,6 +4,7 @@
 #include <linux/syscalls.h>
 #include <linux/slab.h>
 #include <linux/kernel.h>
+#include <linux/kallsyms.h>
 #include <linux/module.h>	/* for MODULE_NAME_LEN via KSYM_SYMBOL_LEN */
 #include <linux/ftrace.h>
 #include <linux/perf_event.h>
diff --git a/kernel/trace/trace_uprobe.c b/kernel/trace/trace_uprobe.c
index a84b85d8aac1..2d22bb45b0bc 100644
--- a/kernel/trace/trace_uprobe.c
+++ b/kernel/trace/trace_uprobe.c
@@ -8,6 +8,7 @@
 #define pr_fmt(fmt)	"trace_uprobe: " fmt
 
 #include <linux/bpf-cgroup.h>
+#include <linux/kstrtox.h>
 #include <linux/security.h>
 #include <linux/ctype.h>
 #include <linux/module.h>
diff --git a/kernel/tsacct.c b/kernel/tsacct.c
index 4252f0645b9e..6b80f9db0c23 100644
--- a/kernel/tsacct.c
+++ b/kernel/tsacct.c
@@ -13,6 +13,7 @@
 #include <linux/acct.h>
 #include <linux/jiffies.h>
 #include <linux/mm.h>
+#include <linux/timekeeping.h> // for ktime_get_ns()
 
 /*
  * fill in basic accounting fields
diff --git a/kernel/ucount.c b/kernel/ucount.c
index 4aa6166cb856..74fb8c0c5126 100644
--- a/kernel/ucount.c
+++ b/kernel/ucount.c
@@ -7,6 +7,7 @@
 #include <linux/hash.h>
 #include <linux/kmemleak.h>
 #include <linux/user_namespace.h>
+#include <linux/uidgid.h>
 
 struct ucounts init_ucounts = {
 	.ns    = &init_user_ns,
diff --git a/kernel/umh.c b/kernel/umh.c
index 1b13c5d34624..f999e2cb640b 100644
--- a/kernel/umh.c
+++ b/kernel/umh.c
@@ -6,6 +6,7 @@
 #include <linux/sched.h>
 #include <linux/sched/task.h>
 #include <linux/binfmts.h>
+#include <linux/completion.h>
 #include <linux/syscalls.h>
 #include <linux/unistd.h>
 #include <linux/kmod.h>
diff --git a/kernel/user.c b/kernel/user.c
index 03cedc366dc9..28da71ea1e74 100644
--- a/kernel/user.c
+++ b/kernel/user.c
@@ -20,6 +20,8 @@
 #include <linux/user_namespace.h>
 #include <linux/binfmts.h>
 #include <linux/proc_ns.h>
+#include <linux/ratelimit.h>
+#include <linux/uidgid.h>
 
 #if IS_ENABLED(CONFIG_BINFMT_MISC)
 struct binfmt_misc init_binfmt_misc = {
diff --git a/kernel/user_namespace.c b/kernel/user_namespace.c
index 0b0b95418b16..58b64506a4a0 100644
--- a/kernel/user_namespace.c
+++ b/kernel/user_namespace.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/nsproxy.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
@@ -12,6 +13,7 @@
 #include <linux/security.h>
 #include <linux/keyctl.h>
 #include <linux/key-type.h>
+#include <linux/kstrtox.h>
 #include <keys/user-type.h>
 #include <linux/seq_file.h>
 #include <linux/fs.h>
@@ -21,6 +23,7 @@
 #include <linux/fs_struct.h>
 #include <linux/bsearch.h>
 #include <linux/sort.h>
+#include <linux/workqueue.h>
 
 static struct kmem_cache *user_ns_cachep __ro_after_init;
 static DEFINE_MUTEX(userns_state_mutex);
diff --git a/kernel/vhost_task.c b/kernel/vhost_task.c
index da35e5b7f047..8f50d2eafced 100644
--- a/kernel/vhost_task.c
+++ b/kernel/vhost_task.c
@@ -4,6 +4,7 @@
  */
 #include <linux/slab.h>
 #include <linux/completion.h>
+#include <linux/kernel.h> // for do_exit()
 #include <linux/sched/task.h>
 #include <linux/sched/vhost_task.h>
 #include <linux/sched/signal.h>
diff --git a/kernel/vmcore_info.c b/kernel/vmcore_info.c
index 8f77e238a54f..342e7f2cb656 100644
--- a/kernel/vmcore_info.c
+++ b/kernel/vmcore_info.c
@@ -9,11 +9,13 @@
 #include <linux/utsname.h>
 #include <linux/vmalloc.h>
 #include <linux/sizes.h>
+#include <linux/sprintf.h>
 #include <linux/kexec.h>
 #include <linux/memory.h>
 #include <linux/cpuhotplug.h>
 #include <linux/memblock.h>
 #include <linux/kmemleak.h>
+#include <linux/timekeeping.h> // for ktime_get_real_seconds()
 
 #include <asm/page.h>
 #include <asm/sections.h>
diff --git a/kernel/watchdog.c b/kernel/watchdog.c
index e9e98ce5ff40..7aaa98743b7a 100644
--- a/kernel/watchdog.c
+++ b/kernel/watchdog.c
@@ -12,11 +12,15 @@
 
 #define pr_fmt(fmt) "watchdog: " fmt
 
+#include <linux/completion.h>
 #include <linux/cpu.h>
+#include <linux/hrtimer.h>
 #include <linux/init.h>
 #include <linux/irq.h>
 #include <linux/irqdesc.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/kvm_para.h>
 #include <linux/math64.h>
 #include <linux/mm.h>
diff --git a/kernel/workqueue.c b/kernel/workqueue.c
index 4950bfc2cdcc..a3ac3f08d9de 100644
--- a/kernel/workqueue.c
+++ b/kernel/workqueue.c
@@ -27,11 +27,14 @@
 
 #include <linux/export.h>
 #include <linux/kernel.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/signal.h>
 #include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/slab.h>
 #include <linux/cpu.h>
@@ -41,6 +44,7 @@
 #include <linux/mempolicy.h>
 #include <linux/freezer.h>
 #include <linux/debug_locks.h>
+#include <linux/device.h>
 #include <linux/lockdep.h>
 #include <linux/idr.h>
 #include <linux/jhash.h>
diff --git a/lib/cpu_rmap.c b/lib/cpu_rmap.c
index 4c348670da31..6beb8632304e 100644
--- a/lib/cpu_rmap.c
+++ b/lib/cpu_rmap.c
@@ -7,6 +7,8 @@
 #include <linux/cpu_rmap.h>
 #include <linux/interrupt.h>
 #include <linux/export.h>
+#include <linux/kref.h>
+#include <linux/topology.h>
 
 /*
  * These functions maintain a mapping from CPUs to some ordered set of
diff --git a/lib/crc-t10dif.c b/lib/crc-t10dif.c
index 1ed2ed487097..22af4fc79df8 100644
--- a/lib/crc-t10dif.c
+++ b/lib/crc-t10dif.c
@@ -13,6 +13,7 @@
 #include <linux/init.h>
 #include <crypto/hash.h>
 #include <crypto/algapi.h>
+#include <linux/sprintf.h>
 #include <linux/static_key.h>
 #include <linux/notifier.h>
 
diff --git a/lib/crc64-rocksoft.c b/lib/crc64-rocksoft.c
index fc9ae0da5df7..9a3dd07167fd 100644
--- a/lib/crc64-rocksoft.c
+++ b/lib/crc64-rocksoft.c
@@ -7,6 +7,7 @@
 #include <linux/init.h>
 #include <crypto/hash.h>
 #include <crypto/algapi.h>
+#include <linux/sprintf.h>
 #include <linux/static_key.h>
 #include <linux/notifier.h>
 
diff --git a/lib/digsig.c b/lib/digsig.c
index 04b5e55ed95f..043368ca3523 100644
--- a/lib/digsig.c
+++ b/lib/digsig.c
@@ -17,6 +17,7 @@
 #include <linux/err.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/key.h>
 #include <linux/crypto.h>
 #include <crypto/hash.h>
diff --git a/lib/error-inject.c b/lib/error-inject.c
index 887acd9a6ea6..c09854ae3cec 100644
--- a/lib/error-inject.c
+++ b/lib/error-inject.c
@@ -3,6 +3,7 @@
 #include <linux/error-injection.h>
 #include <linux/debugfs.h>
 #include <linux/kallsyms.h>
+#include <linux/kernel.h> // for kernel_text_address()
 #include <linux/kprobes.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/lib/flex_proportions.c b/lib/flex_proportions.c
index 84ecccddc771..7749a48428e5 100644
--- a/lib/flex_proportions.c
+++ b/lib/flex_proportions.c
@@ -34,6 +34,9 @@
  * which something happened with proportion of type j.
  */
 #include <linux/flex_proportions.h>
+#include <linux/log2.h>
+#include <linux/math64.h>
+#include <linux/seqlock.h>
 
 int fprop_global_init(struct fprop_global *p, gfp_t gfp)
 {
diff --git a/lib/group_cpus.c b/lib/group_cpus.c
index ee272c4cefcc..27e49db5cfa2 100644
--- a/lib/group_cpus.c
+++ b/lib/group_cpus.c
@@ -8,6 +8,7 @@
 #include <linux/cpu.h>
 #include <linux/sort.h>
 #include <linux/group_cpus.h>
+#include <linux/topology.h> // for cpu_to_node()
 
 #ifdef CONFIG_SMP
 
diff --git a/lib/kasprintf.c b/lib/kasprintf.c
index cd2f5974ed98..ca0d59dd49a4 100644
--- a/lib/kasprintf.c
+++ b/lib/kasprintf.c
@@ -5,6 +5,7 @@
  *  Copyright (C) 1991, 1992  Linus Torvalds
  */
 
+#include <linux/sprintf.h>
 #include <linux/stdarg.h>
 #include <linux/export.h>
 #include <linux/slab.h>
diff --git a/lib/kobject.c b/lib/kobject.c
index 72fa20f405f1..52f845e8fbdc 100644
--- a/lib/kobject.c
+++ b/lib/kobject.c
@@ -13,11 +13,14 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/export.h>
 #include <linux/stat.h>
 #include <linux/slab.h>
 #include <linux/random.h>
+#include <linux/uidgid.h>
+#include <linux/workqueue.h>
 
 /**
  * kobject_namespace() - Return @kobj's namespace tag.
diff --git a/lib/kunit/string-stream-test.c b/lib/kunit/string-stream-test.c
index 03fb511826f7..d02911b9ed72 100644
--- a/lib/kunit/string-stream-test.c
+++ b/lib/kunit/string-stream-test.c
@@ -9,6 +9,7 @@
 #include <kunit/static_stub.h>
 #include <kunit/test.h>
 #include <linux/ktime.h>
+#include <linux/random.h>
 #include <linux/slab.h>
 #include <linux/timekeeping.h>
 
diff --git a/lib/kunit/string-stream.c b/lib/kunit/string-stream.c
index 54f4fdcbfac8..bd089d04457e 100644
--- a/lib/kunit/string-stream.c
+++ b/lib/kunit/string-stream.c
@@ -10,6 +10,7 @@
 #include <kunit/test.h>
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "string-stream.h"
 
diff --git a/lib/locking-selftest.c b/lib/locking-selftest.c
index 6f6a5fc85b42..8fe8930c55ac 100644
--- a/lib/locking-selftest.c
+++ b/lib/locking-selftest.c
@@ -12,6 +12,7 @@
  *  Copyright (C) 2006 Red Hat, Inc., Ingo Molnar <mingo@redhat.com>
  */
 #include <linux/rwsem.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/mutex.h>
 #include <linux/ww_mutex.h>
 #include <linux/sched.h>
diff --git a/lib/lockref.c b/lib/lockref.c
index 2afe4c5d8919..cf8795d78540 100644
--- a/lib/lockref.c
+++ b/lib/lockref.c
@@ -1,6 +1,8 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/export.h>
 #include <linux/lockref.h>
+#include <linux/build_bug.h>
+#include <linux/spinlock.h>
 
 #if USE_CMPXCHG_LOCKREF
 
diff --git a/lib/memcpy_kunit.c b/lib/memcpy_kunit.c
index 440aee705ccc..ab03c006d12f 100644
--- a/lib/memcpy_kunit.c
+++ b/lib/memcpy_kunit.c
@@ -11,6 +11,7 @@
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/overflow.h>
+#include <linux/random.h>
 #include <linux/slab.h>
 #include <linux/types.h>
 #include <linux/vmalloc.h>
diff --git a/lib/objpool.c b/lib/objpool.c
index cfdc02420884..bce25547f931 100644
--- a/lib/objpool.c
+++ b/lib/objpool.c
@@ -7,6 +7,8 @@
 #include <linux/irqflags.h>
 #include <linux/cpumask.h>
 #include <linux/log2.h>
+#include <linux/refcount.h>
+#include <linux/topology.h>
 
 /*
  * objpool: ring-array based lockless MPMC/FIFO queues
diff --git a/lib/ref_tracker.c b/lib/ref_tracker.c
index cf5609b1ca79..6f3a8f853f25 100644
--- a/lib/ref_tracker.c
+++ b/lib/ref_tracker.c
@@ -6,6 +6,7 @@
 #include <linux/list_sort.h>
 #include <linux/ref_tracker.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/stacktrace.h>
 #include <linux/stackdepot.h>
 
diff --git a/lib/seq_buf.c b/lib/seq_buf.c
index 010c730ca7fc..6ee4b890bd8e 100644
--- a/lib/seq_buf.c
+++ b/lib/seq_buf.c
@@ -13,6 +13,8 @@
  * seq_buf_init() more than once to reset the seq_buf to start
  * from scratch.
  */
+#include <linux/hex.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/seq_file.h>
 #include <linux/seq_buf.h>
diff --git a/lib/siphash.c b/lib/siphash.c
index 15bc5b6f368c..72806a7fe58e 100644
--- a/lib/siphash.c
+++ b/lib/siphash.c
@@ -10,6 +10,8 @@
  */
 
 #include <linux/siphash.h>
+#include <linux/bitops.h>
+#include <linux/export.h>
 #include <asm/unaligned.h>
 
 #if defined(CONFIG_DCACHE_WORD_ACCESS) && BITS_PER_LONG == 64
diff --git a/lib/smp_processor_id.c b/lib/smp_processor_id.c
index a2bb7738c373..afb97b6ceedf 100644
--- a/lib/smp_processor_id.c
+++ b/lib/smp_processor_id.c
@@ -5,6 +5,7 @@
  * DEBUG_PREEMPT variant of smp_processor_id().
  */
 #include <linux/export.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/kprobes.h>
 #include <linux/sched.h>
 
diff --git a/lib/test_dynamic_debug.c b/lib/test_dynamic_debug.c
index 8dd250ad022b..658bee1a3d97 100644
--- a/lib/test_dynamic_debug.c
+++ b/lib/test_dynamic_debug.c
@@ -9,6 +9,8 @@
 #define pr_fmt(fmt) "test_dd: " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
+#include <asm/page.h> // for PAGE_SIZE
 
 /* run tests by reading or writing sysfs node: do_prints */
 
diff --git a/lib/test_firmware.c b/lib/test_firmware.c
index 9cfdcd6d21db..5d9ed998b910 100644
--- a/lib/test_firmware.c
+++ b/lib/test_firmware.c
@@ -1,7 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 /*
  * This module provides an interface to trigger and test firmware loading.
- *
+s *
  * It is designed to be used for basic evaluation of the firmware loading
  * subsystem (for example when validating firmware verification). It lacks
  * any extra dependencies, and will not normally be loaded by the system
@@ -20,6 +20,7 @@
 #include <linux/miscdevice.h>
 #include <linux/sizes.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/delay.h>
 #include <linux/kstrtox.h>
diff --git a/lib/test_fprobe.c b/lib/test_fprobe.c
index 24de0e5ff859..1f915ffb28f1 100644
--- a/lib/test_fprobe.c
+++ b/lib/test_fprobe.c
@@ -3,6 +3,7 @@
  * test_fprobe.c - simple sanity test for fprobe
  */
 
+#include <linux/kallsyms.h>
 #include <linux/kernel.h>
 #include <linux/fprobe.h>
 #include <linux/random.h>
diff --git a/lib/test_kmod.c b/lib/test_kmod.c
index 1eec3b7ac67c..73f0520112ac 100644
--- a/lib/test_kmod.c
+++ b/lib/test_kmod.c
@@ -20,6 +20,7 @@
 #include <linux/printk.h>
 #include <linux/kthread.h>
 #include <linux/sched.h>
+#include <linux/completion.h>
 #include <linux/fs.h>
 #include <linux/miscdevice.h>
 #include <linux/vmalloc.h>
diff --git a/lib/test_lockup.c b/lib/test_lockup.c
index c3fd87d6c2dd..3e41fc7174be 100644
--- a/lib/test_lockup.c
+++ b/lib/test_lockup.c
@@ -15,6 +15,7 @@
 #include <linux/mm.h>
 #include <linux/uaccess.h>
 #include <linux/file.h>
+#include <linux/hrtimer.h>
 
 static unsigned int time_secs;
 module_param(time_secs, uint, 0600);
diff --git a/lib/test_maple_tree.c b/lib/test_maple_tree.c
index 29185ac5c727..da001659eec3 100644
--- a/lib/test_maple_tree.c
+++ b/lib/test_maple_tree.c
@@ -10,6 +10,7 @@
 #include <linux/maple_tree.h>
 #include <linux/module.h>
 #include <linux/rwsem.h>
+#include <linux/xarray.h>
 
 #define MTREE_ALLOC_MAX 0x2000000000000Ul
 #define CONFIG_MAPLE_SEARCH
diff --git a/lib/test_objpool.c b/lib/test_objpool.c
index bfdb81599832..90712ac48762 100644
--- a/lib/test_objpool.c
+++ b/lib/test_objpool.c
@@ -16,6 +16,7 @@
 #include <linux/delay.h>
 #include <linux/hrtimer.h>
 #include <linux/objpool.h>
+#include <linux/topology.h> // for cpu_to_node()
 
 #define OT_NR_MAX_BULK (16)
 
@@ -687,4 +688,4 @@ static void __exit ot_mod_exit(void)
 module_init(ot_mod_init);
 module_exit(ot_mod_exit);
 
-MODULE_LICENSE("GPL");
\ No newline at end of file
+MODULE_LICENSE("GPL");
diff --git a/lib/zlib_deflate/deftree.c b/lib/zlib_deflate/deftree.c
index a4a34da512fe..1277808b7374 100644
--- a/lib/zlib_deflate/deftree.c
+++ b/lib/zlib_deflate/deftree.c
@@ -36,6 +36,7 @@
 
 #include <linux/zutil.h>
 #include <linux/bitrev.h>
+#include <linux/minmax.h>
 #include "defutil.h"
 
 #ifdef DEBUG_ZLIB
diff --git a/mm/backing-dev.c b/mm/backing-dev.c
index 5f2be8c8df11..2c9eaf9101e1 100644
--- a/mm/backing-dev.c
+++ b/mm/backing-dev.c
@@ -1,8 +1,10 @@
 // SPDX-License-Identifier: GPL-2.0-only
 
 #include <linux/blkdev.h>
+#include <linux/kstrtox.h>
 #include <linux/wait.h>
 #include <linux/rbtree.h>
+#include <linux/kstrtox.h>
 #include <linux/kthread.h>
 #include <linux/backing-dev.h>
 #include <linux/blk-cgroup.h>
diff --git a/mm/damon/core.c b/mm/damon/core.c
index 5b325749fc12..8819e55aba31 100644
--- a/mm/damon/core.c
+++ b/mm/damon/core.c
@@ -13,6 +13,7 @@
 #include <linux/mm.h>
 #include <linux/slab.h>
 #include <linux/string.h>
+#include <linux/completion.h>
 
 #define CREATE_TRACE_POINTS
 #include <trace/events/damon.h>
diff --git a/mm/damon/dbgfs.c b/mm/damon/dbgfs.c
index 2461cfe2e968..4f5345743e9c 100644
--- a/mm/damon/dbgfs.c
+++ b/mm/damon/dbgfs.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/page_idle.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #define DAMON_DBGFS_DEPRECATION_NOTICE					\
 	"DAMON debugfs interface is deprecated, so users should move "	\
diff --git a/mm/damon/sysfs-common.c b/mm/damon/sysfs-common.c
index 70edf45c2174..0efd9f3f285f 100644
--- a/mm/damon/sysfs-common.c
+++ b/mm/damon/sysfs-common.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sysfs.h>
+#include <linux/kstrtox.h>
 
 #include "sysfs-common.h"
 
diff --git a/mm/damon/sysfs-schemes.c b/mm/damon/sysfs-schemes.c
index 98c6e5376486..b82610f510bb 100644
--- a/mm/damon/sysfs-schemes.c
+++ b/mm/damon/sysfs-schemes.c
@@ -6,6 +6,8 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sysfs.h>
+#include <linux/kstrtox.h>
 
 #include "sysfs-common.h"
 
diff --git a/mm/damon/sysfs.c b/mm/damon/sysfs.c
index 678de97fcc88..08e54a8eb2e1 100644
--- a/mm/damon/sysfs.c
+++ b/mm/damon/sysfs.c
@@ -8,6 +8,8 @@
 #include <linux/pid.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sysfs.h>
+#include <linux/kstrtox.h>
 
 #include "sysfs-common.h"
 
diff --git a/mm/debug_page_alloc.c b/mm/debug_page_alloc.c
index 6755f0c9d4a3..9c9a6f09080d 100644
--- a/mm/debug_page_alloc.c
+++ b/mm/debug_page_alloc.c
@@ -1,4 +1,5 @@
 // SPDX-License-Identifier: GPL-2.0
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/page-isolation.h>
 
diff --git a/mm/folio-compat.c b/mm/folio-compat.c
index 50412014f16f..97bcd7ea5423 100644
--- a/mm/folio-compat.c
+++ b/mm/folio-compat.c
@@ -6,6 +6,7 @@
 
 #include <linux/migrate.h>
 #include <linux/pagemap.h>
+#include <linux/ratelimit.h>
 #include <linux/rmap.h>
 #include <linux/swap.h>
 #include "internal.h"
diff --git a/mm/huge_memory.c b/mm/huge_memory.c
index 016e20bd813e..e538e106e659 100644
--- a/mm/huge_memory.c
+++ b/mm/huge_memory.c
@@ -12,6 +12,7 @@
 #include <linux/sched/numa_balancing.h>
 #include <linux/highmem.h>
 #include <linux/hugetlb.h>
+#include <linux/kstrtox.h>
 #include <linux/mmu_notifier.h>
 #include <linux/rmap.h>
 #include <linux/swap.h>
diff --git a/mm/hugetlb.c b/mm/hugetlb.c
index 25069ca6ec24..1734fc708d27 100644
--- a/mm/hugetlb.c
+++ b/mm/hugetlb.c
@@ -5,10 +5,13 @@
  */
 #include <linux/list.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for memparse()
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/seq_file.h>
 #include <linux/sysctl.h>
 #include <linux/highmem.h>
+#include <linux/kref.h>
 #include <linux/mmu_notifier.h>
 #include <linux/nodemask.h>
 #include <linux/pagemap.h>
diff --git a/mm/hugetlb_cgroup.c b/mm/hugetlb_cgroup.c
index aa4486bd3904..0660c19854b6 100644
--- a/mm/hugetlb_cgroup.c
+++ b/mm/hugetlb_cgroup.c
@@ -20,6 +20,7 @@
 #include <linux/cgroup.h>
 #include <linux/page_counter.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/hugetlb.h>
 #include <linux/hugetlb_cgroup.h>
 
diff --git a/mm/internal.h b/mm/internal.h
index 1e29c5821a1d..f927b4a1f69c 100644
--- a/mm/internal.h
+++ b/mm/internal.h
@@ -7,10 +7,12 @@
 #ifndef __MM_INTERNAL_H
 #define __MM_INTERNAL_H
 
+#include <linux/atomic.h>
 #include <linux/fs.h>
 #include <linux/mm.h>
 #include <linux/pagemap.h>
 #include <linux/rmap.h>
+#include <linux/sprintf.h>
 #include <linux/tracepoint-defs.h>
 
 struct folio_batch;
@@ -1231,6 +1233,8 @@ unsigned long shrink_slab(gfp_t gfp_mask, int nid, struct mem_cgroup *memcg,
 			  int priority);
 
 #ifdef CONFIG_SHRINKER_DEBUG
+#include <linux/shrinker.h>
+
 static inline __printf(2, 0) int shrinker_debugfs_name_alloc(
 			struct shrinker *shrinker, const char *fmt, va_list ap)
 {
diff --git a/mm/kasan/hw_tags.c b/mm/kasan/hw_tags.c
index 2b994092a2d4..2bd0874fb05c 100644
--- a/mm/kasan/hw_tags.c
+++ b/mm/kasan/hw_tags.c
@@ -11,6 +11,7 @@
 #include <linux/init.h>
 #include <linux/kasan.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/memory.h>
 #include <linux/mm.h>
 #include <linux/static_key.h>
diff --git a/mm/kasan/report.c b/mm/kasan/report.c
index 7afa4feb03e1..5e0bbaf8a20f 100644
--- a/mm/kasan/report.c
+++ b/mm/kasan/report.c
@@ -13,6 +13,7 @@
 #include <linux/bitops.h>
 #include <linux/ftrace.h>
 #include <linux/init.h>
+#include <linux/kallsyms.h> // is_kernel()
 #include <linux/kernel.h>
 #include <linux/lockdep.h>
 #include <linux/mm.h>
diff --git a/mm/kasan/report_generic.c b/mm/kasan/report_generic.c
index f5b8e37b3805..f2810e45612f 100644
--- a/mm/kasan/report_generic.c
+++ b/mm/kasan/report_generic.c
@@ -13,6 +13,7 @@
 #include <linux/ftrace.h>
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/printk.h>
 #include <linux/sched.h>
diff --git a/mm/kasan/tags.c b/mm/kasan/tags.c
index d65d48b85f90..225dca9a2377 100644
--- a/mm/kasan/tags.c
+++ b/mm/kasan/tags.c
@@ -10,6 +10,7 @@
 #include <linux/init.h>
 #include <linux/kasan.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/memblock.h>
 #include <linux/memory.h>
 #include <linux/mm.h>
diff --git a/mm/kfence/core.c b/mm/kfence/core.c
index 8350f5c06f2e..7b8917dfd2be 100644
--- a/mm/kfence/core.c
+++ b/mm/kfence/core.c
@@ -14,8 +14,10 @@
 #include <linux/irq_work.h>
 #include <linux/jhash.h>
 #include <linux/kcsan-checks.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/kfence.h>
 #include <linux/kmemleak.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/lockdep.h>
 #include <linux/log2.h>
@@ -29,6 +31,7 @@
 #include <linux/seq_file.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #include <asm/kfence.h>
diff --git a/mm/khugepaged.c b/mm/khugepaged.c
index 2771fc043b3b..c8e3200a2b0d 100644
--- a/mm/khugepaged.c
+++ b/mm/khugepaged.c
@@ -2,6 +2,8 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/mm.h>
+#include <linux/device.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/mm.h>
 #include <linux/sched/coredump.h>
diff --git a/mm/kmemleak.c b/mm/kmemleak.c
index 6a540c2b27c5..baab3cb120d8 100644
--- a/mm/kmemleak.c
+++ b/mm/kmemleak.c
@@ -60,6 +60,7 @@
 
 #include <linux/init.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/sched/signal.h>
 #include <linux/sched/task.h>
diff --git a/mm/ksm.c b/mm/ksm.c
index 8c001819cf10..a5d7fb81a189 100644
--- a/mm/ksm.c
+++ b/mm/ksm.c
@@ -14,6 +14,7 @@
  */
 
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/mm_inline.h>
 #include <linux/fs.h>
@@ -35,6 +36,8 @@
 #include <linux/memory.h>
 #include <linux/mmu_notifier.h>
 #include <linux/swap.h>
+#include <linux/sysfs.h>
+#include <linux/kobject.h>
 #include <linux/ksm.h>
 #include <linux/hashtable.h>
 #include <linux/freezer.h>
diff --git a/mm/memcontrol.c b/mm/memcontrol.c
index 93ad8640b741..306b247b8c8f 100644
--- a/mm/memcontrol.c
+++ b/mm/memcontrol.c
@@ -65,7 +65,9 @@
 #include <linux/psi.h>
 #include <linux/seq_buf.h>
 #include <linux/sched/isolation.h>
+#include <linux/kernel.h> // for memparse()
 #include <linux/kmemleak.h>
+#include <linux/kstrtox.h>
 #include "internal.h"
 #include <net/sock.h>
 #include <net/ip.h>
diff --git a/mm/memory-tiers.c b/mm/memory-tiers.c
index 0537664620e5..614b3a260747 100644
--- a/mm/memory-tiers.c
+++ b/mm/memory-tiers.c
@@ -3,9 +3,11 @@
 #include <linux/lockdep.h>
 #include <linux/sysfs.h>
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/memory.h>
 #include <linux/memory-tiers.h>
 #include <linux/notifier.h>
+#include <linux/device.h>
 
 #include "internal.h"
 
diff --git a/mm/memory_hotplug.c b/mm/memory_hotplug.c
index a444e2d7dd2b..68dd0ebf049a 100644
--- a/mm/memory_hotplug.c
+++ b/mm/memory_hotplug.c
@@ -10,6 +10,8 @@
 #include <linux/sched/signal.h>
 #include <linux/swap.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kstrtox.h>
 #include <linux/pagemap.h>
 #include <linux/compiler.h>
 #include <linux/export.h>
@@ -23,6 +25,7 @@
 #include <linux/vmalloc.h>
 #include <linux/ioport.h>
 #include <linux/delay.h>
+#include <linux/device.h>
 #include <linux/migrate.h>
 #include <linux/page-isolation.h>
 #include <linux/pfn.h>
diff --git a/mm/mempolicy.c b/mm/mempolicy.c
index 56f9a6ed939a..5e81c3c92af6 100644
--- a/mm/mempolicy.c
+++ b/mm/mempolicy.c
@@ -82,6 +82,7 @@
 #include <linux/highmem.h>
 #include <linux/hugetlb.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/sched.h>
 #include <linux/sched/mm.h>
 #include <linux/sched/numa_balancing.h>
@@ -97,6 +98,7 @@
 #include <linux/compat.h>
 #include <linux/ptrace.h>
 #include <linux/swap.h>
+#include <linux/sysfs.h>
 #include <linux/seq_file.h>
 #include <linux/proc_fs.h>
 #include <linux/migrate.h>
diff --git a/mm/memremap.c b/mm/memremap.c
index 9e9fb1972fff..9262a4d1c0b8 100644
--- a/mm/memremap.c
+++ b/mm/memremap.c
@@ -14,6 +14,7 @@
 #include <linux/wait_bit.h>
 #include <linux/xarray.h>
 #include "internal.h"
+#include <linux/completion.h>
 
 static DEFINE_XARRAY(pgmap_array);
 
diff --git a/mm/memtest.c b/mm/memtest.c
index 32f3e9dda837..3b736fb47abd 100644
--- a/mm/memtest.c
+++ b/mm/memtest.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/init.h>
 #include <linux/memblock.h>
diff --git a/mm/mm_init.c b/mm/mm_init.c
index 549e76af8f82..86843f6458a8 100644
--- a/mm/mm_init.c
+++ b/mm/mm_init.c
@@ -10,6 +10,7 @@
 #include <linux/init.h>
 #include <linux/kobject.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
 #include <linux/memory.h>
 #include <linux/notifier.h>
 #include <linux/sched.h>
@@ -19,6 +20,7 @@
 #include <linux/padata.h>
 #include <linux/nmi.h>
 #include <linux/buffer_head.h>
+#include <linux/completion.h>
 #include <linux/kmemleak.h>
 #include <linux/kfence.h>
 #include <linux/page_ext.h>
diff --git a/mm/mmap.c b/mm/mmap.c
index 8f176027583c..42d03dda19dc 100644
--- a/mm/mmap.c
+++ b/mm/mmap.c
@@ -10,6 +10,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/backing-dev.h>
 #include <linux/mm.h>
diff --git a/mm/page_owner.c b/mm/page_owner.c
index 5634e5d890f8..df37755a5762 100644
--- a/mm/page_owner.c
+++ b/mm/page_owner.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
 #include <linux/uaccess.h>
diff --git a/mm/page_poison.c b/mm/page_poison.c
index 3e9037363cf9..73a1bc8e191c 100644
--- a/mm/page_poison.c
+++ b/mm/page_poison.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/mmdebug.h>
diff --git a/mm/shmem.c b/mm/shmem.c
index 791a6dc16324..6284f0c6d91d 100644
--- a/mm/shmem.c
+++ b/mm/shmem.c
@@ -29,11 +29,13 @@
 #include <linux/pagemap.h>
 #include <linux/file.h>
 #include <linux/fileattr.h>
+#include <linux/kernel.h> // for memparse()
 #include <linux/mm.h>
 #include <linux/random.h>
 #include <linux/sched/signal.h>
 #include <linux/export.h>
 #include <linux/shmem_fs.h>
+#include <linux/shrinker.h>
 #include <linux/swap.h>
 #include <linux/uio.h>
 #include <linux/hugetlb.h>
diff --git a/mm/shrinker.c b/mm/shrinker.c
index dc5d2a6fcfc4..18762a7d1049 100644
--- a/mm/shrinker.c
+++ b/mm/shrinker.c
@@ -4,6 +4,7 @@
 #include <linux/shrinker.h>
 #include <linux/rculist.h>
 #include <trace/events/vmscan.h>
+#include <linux/completion.h>
 
 #include "internal.h"
 
diff --git a/mm/slub.c b/mm/slub.c
index 919d9c818b23..d84c5eef3c49 100644
--- a/mm/slub.c
+++ b/mm/slub.c
@@ -22,7 +22,9 @@
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
 #include <linux/kasan.h>
+#include <linux/kernel.h> // for get_option()
 #include <linux/kmsan.h>
+#include <linux/kstrtox.h>
 #include <linux/cpu.h>
 #include <linux/cpuset.h>
 #include <linux/mempolicy.h>
@@ -42,6 +44,7 @@
 #include <kunit/test.h>
 #include <kunit/test-bug.h>
 #include <linux/sort.h>
+#include <linux/sysfs.h>
 
 #include <linux/debugfs.h>
 #include <trace/events/kmem.h>
diff --git a/mm/swap_state.c b/mm/swap_state.c
index 7255c01a1e4e..6b7e13e8ab75 100644
--- a/mm/swap_state.c
+++ b/mm/swap_state.c
@@ -10,6 +10,7 @@
 #include <linux/mm.h>
 #include <linux/gfp.h>
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/mempolicy.h>
 #include <linux/swap.h>
 #include <linux/swapops.h>
diff --git a/mm/swapfile.c b/mm/swapfile.c
index 47dbd35cc678..aade3fdadf53 100644
--- a/mm/swapfile.c
+++ b/mm/swapfile.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/blkdev.h>
+#include <linux/completion.h>
 #include <linux/mm.h>
 #include <linux/sched/mm.h>
 #include <linux/sched/task.h>
diff --git a/mm/vmalloc.c b/mm/vmalloc.c
index 25a8df497255..e38d46df79ca 100644
--- a/mm/vmalloc.c
+++ b/mm/vmalloc.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/highmem.h>
 #include <linux/sched/signal.h>
+#include <linux/shrinker.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
 #include <linux/interrupt.h>
diff --git a/mm/vmscan.c b/mm/vmscan.c
index 54cb7685beba..cdf50f001a01 100644
--- a/mm/vmscan.c
+++ b/mm/vmscan.c
@@ -16,7 +16,9 @@
 #include <linux/sched/mm.h>
 #include <linux/module.h>
 #include <linux/gfp.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/kernel_stat.h>
+#include <linux/kstrtox.h>
 #include <linux/swap.h>
 #include <linux/pagemap.h>
 #include <linux/init.h>
diff --git a/mm/vmstat.c b/mm/vmstat.c
index db79935e4a54..864efb42a6f8 100644
--- a/mm/vmstat.c
+++ b/mm/vmstat.c
@@ -17,6 +17,7 @@
 #include <linux/slab.h>
 #include <linux/cpu.h>
 #include <linux/cpumask.h>
+#include <linux/kernel.h> // for system_state
 #include <linux/vmstat.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
diff --git a/mm/workingset.c b/mm/workingset.c
index 226012974328..b1f6a8ad85ec 100644
--- a/mm/workingset.c
+++ b/mm/workingset.c
@@ -11,6 +11,7 @@
 #include <linux/shmem_fs.h>
 #include <linux/pagemap.h>
 #include <linux/atomic.h>
+#include <linux/list_lru.h>
 #include <linux/module.h>
 #include <linux/swap.h>
 #include <linux/dax.h>
diff --git a/mm/zswap.c b/mm/zswap.c
index 62fe307521c9..32c3611b1f78 100644
--- a/mm/zswap.c
+++ b/mm/zswap.c
@@ -36,6 +36,8 @@
 #include <linux/pagemap.h>
 #include <linux/workqueue.h>
 #include <linux/list_lru.h>
+#include <linux/kernel.h> // for system_state
+#include <linux/kref.h>
 
 #include "swap.h"
 #include "internal.h"
diff --git a/net/6lowpan/debugfs.c b/net/6lowpan/debugfs.c
index 600b9563bfc5..a224dad86091 100644
--- a/net/6lowpan/debugfs.c
+++ b/net/6lowpan/debugfs.c
@@ -7,6 +7,7 @@
  */
 
 #include <net/6lowpan.h>
+#include <linux/sprintf.h>
 
 #include "6lowpan_i.h"
 
diff --git a/net/8021q/vlan.c b/net/8021q/vlan.c
index e45187b88220..a2ab1b65a431 100644
--- a/net/8021q/vlan.c
+++ b/net/8021q/vlan.c
@@ -23,6 +23,7 @@
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/rculist.h>
+#include <linux/sprintf.h>
 #include <net/p8022.h>
 #include <net/arp.h>
 #include <linux/rtnetlink.h>
diff --git a/net/9p/protocol.c b/net/9p/protocol.c
index 0e6603b1ec90..01921e1bebd4 100644
--- a/net/9p/protocol.c
+++ b/net/9p/protocol.c
@@ -16,6 +16,7 @@
 #include <linux/sched.h>
 #include <linux/stddef.h>
 #include <linux/types.h>
+#include <linux/uidgid.h> // for make_kuid(), make_kgid()
 #include <linux/uio.h>
 #include <net/9p/9p.h>
 #include <net/9p/client.h>
diff --git a/net/9p/trans_fd.c b/net/9p/trans_fd.c
index 1a3948b8c493..985557afc04c 100644
--- a/net/9p/trans_fd.c
+++ b/net/9p/trans_fd.c
@@ -17,6 +17,7 @@
 #include <linux/kthread.h>
 #include <linux/errno.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/un.h>
 #include <linux/uaccess.h>
 #include <linux/inet.h>
diff --git a/net/9p/trans_rdma.c b/net/9p/trans_rdma.c
index b84748baf9cb..cea210039e8f 100644
--- a/net/9p/trans_rdma.c
+++ b/net/9p/trans_rdma.c
@@ -31,6 +31,7 @@
 #include <net/9p/transport.h>
 #include <rdma/ib_verbs.h>
 #include <rdma/rdma_cm.h>
+#include <linux/completion.h>
 
 #define P9_PORT			5640
 #define P9_RDMA_SQ_DEPTH	32
diff --git a/net/9p/trans_xen.c b/net/9p/trans_xen.c
index dfdbe1ca5338..1c6016ea34fc 100644
--- a/net/9p/trans_xen.c
+++ b/net/9p/trans_xen.c
@@ -12,6 +12,8 @@
 #include <xen/xen.h>
 #include <xen/xenbus.h>
 #include <xen/interface/io/9pfs.h>
+#include <linux/sprintf.h>
+#include <linux/kstrtox.h>
 
 #include <linux/module.h>
 #include <linux/spinlock.h>
diff --git a/net/appletalk/aarp.c b/net/appletalk/aarp.c
index 9fa0b246902b..184c12f4e1d5 100644
--- a/net/appletalk/aarp.c
+++ b/net/appletalk/aarp.c
@@ -25,6 +25,7 @@
 
 #include <linux/if_arp.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <net/datalink.h>
 #include <net/psnap.h>
diff --git a/net/atm/atm_sysfs.c b/net/atm/atm_sysfs.c
index 54e7fb1a4ee5..9c58209bc3be 100644
--- a/net/atm/atm_sysfs.c
+++ b/net/atm/atm_sysfs.c
@@ -8,6 +8,7 @@
 #include <linux/atmdev.h>
 #include "common.h"
 #include "resources.h"
+#include <linux/sprintf.h>
 
 #define to_atm_dev(cldev) container_of(cldev, struct atm_dev, class_dev)
 
diff --git a/net/atm/clip.c b/net/atm/clip.c
index 294cb9efe3d3..21570922c40f 100644
--- a/net/atm/clip.c
+++ b/net/atm/clip.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/netdevice.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/timer.h>
 #include <linux/if_arp.h> /* for some manifest constants */
diff --git a/net/atm/lec.c b/net/atm/lec.c
index ffef658862db..79482bc105ea 100644
--- a/net/atm/lec.c
+++ b/net/atm/lec.c
@@ -11,6 +11,7 @@
 #include <linux/kernel.h>
 #include <linux/bitops.h>
 #include <linux/capability.h>
+#include <linux/sprintf.h>
 
 /* We are ethernet device */
 #include <linux/if_ether.h>
diff --git a/net/atm/mpc.c b/net/atm/mpc.c
index 324e3ab96bb3..15bd0f291ee6 100644
--- a/net/atm/mpc.c
+++ b/net/atm/mpc.c
@@ -2,6 +2,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ":%s: " fmt, __func__
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/slab.h>
 #include <linux/timer.h>
diff --git a/net/atm/mpoa_proc.c b/net/atm/mpoa_proc.c
index aaf64b953915..cc0cec5c0253 100644
--- a/net/atm/mpoa_proc.c
+++ b/net/atm/mpoa_proc.c
@@ -4,6 +4,7 @@
 #ifdef CONFIG_PROC_FS
 #include <linux/errno.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/mm.h>
 #include <linux/module.h>
diff --git a/net/atm/proc.c b/net/atm/proc.c
index 9bf736290e48..6a5912622257 100644
--- a/net/atm/proc.c
+++ b/net/atm/proc.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/module.h> /* for EXPORT_SYMBOL */
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/types.h>
 #include <linux/mm.h>
diff --git a/net/ax25/sysctl_net_ax25.c b/net/ax25/sysctl_net_ax25.c
index db66e11e7fe8..9bc767594725 100644
--- a/net/ax25/sysctl_net_ax25.c
+++ b/net/ax25/sysctl_net_ax25.c
@@ -5,6 +5,7 @@
  */
 #include <linux/mm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/spinlock.h>
 #include <net/ax25.h>
diff --git a/net/batman-adv/bridge_loop_avoidance.c b/net/batman-adv/bridge_loop_avoidance.c
index 5f46ca3d4bb8..7414e15ece1a 100644
--- a/net/batman-adv/bridge_loop_avoidance.c
+++ b/net/batman-adv/bridge_loop_avoidance.c
@@ -6,6 +6,7 @@
 
 #include "bridge_loop_avoidance.h"
 #include "main.h"
+#include <linux/sprintf.h>
 
 #include <linux/atomic.h>
 #include <linux/byteorder/generic.h>
diff --git a/net/batman-adv/gateway_client.c b/net/batman-adv/gateway_client.c
index 0ddd8b4b3f4c..6ba635696964 100644
--- a/net/batman-adv/gateway_client.c
+++ b/net/batman-adv/gateway_client.c
@@ -6,6 +6,7 @@
 
 #include "gateway_client.h"
 #include "main.h"
+#include <linux/sprintf.h>
 
 #include <linux/atomic.h>
 #include <linux/byteorder/generic.h>
diff --git a/net/batman-adv/main.c b/net/batman-adv/main.c
index 75119f1ffccc..268d2b281cb3 100644
--- a/net/batman-adv/main.c
+++ b/net/batman-adv/main.c
@@ -5,6 +5,7 @@
  */
 
 #include "main.h"
+#include <linux/sprintf.h>
 
 #include <linux/array_size.h>
 #include <linux/atomic.h>
diff --git a/net/batman-adv/multicast.c b/net/batman-adv/multicast.c
index 14088c4ff2f6..8ca3aa067c21 100644
--- a/net/batman-adv/multicast.c
+++ b/net/batman-adv/multicast.c
@@ -6,6 +6,7 @@
 
 #include "multicast.h"
 #include "main.h"
+#include <linux/sprintf.h>
 
 #include <linux/atomic.h>
 #include <linux/bitops.h>
diff --git a/net/bluetooth/6lowpan.c b/net/bluetooth/6lowpan.c
index 715cbafbf663..af30ce0748f1 100644
--- a/net/bluetooth/6lowpan.c
+++ b/net/bluetooth/6lowpan.c
@@ -9,6 +9,7 @@
 #include <linux/etherdevice.h>
 #include <linux/module.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include <net/ipv6.h>
 #include <net/ip6_route.h>
diff --git a/net/bluetooth/cmtp/core.c b/net/bluetooth/cmtp/core.c
index b1330acbbff3..2f8f92f5a698 100644
--- a/net/bluetooth/cmtp/core.c
+++ b/net/bluetooth/cmtp/core.c
@@ -21,6 +21,7 @@
 */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/types.h>
 #include <linux/errno.h>
diff --git a/net/bluetooth/coredump.c b/net/bluetooth/coredump.c
index ec97a4bab1c9..6c73f4bc0861 100644
--- a/net/bluetooth/coredump.c
+++ b/net/bluetooth/coredump.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/devcoredump.h>
+#include <linux/sprintf.h>
 
 #include <asm/unaligned.h>
 #include <net/bluetooth/bluetooth.h>
diff --git a/net/bluetooth/hci_debugfs.c b/net/bluetooth/hci_debugfs.c
index 233453807b50..0817a1397024 100644
--- a/net/bluetooth/hci_debugfs.c
+++ b/net/bluetooth/hci_debugfs.c
@@ -23,6 +23,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/net/bluetooth/hci_sock.c b/net/bluetooth/hci_sock.c
index 4ee1b976678b..88d425d7c3a4 100644
--- a/net/bluetooth/hci_sock.c
+++ b/net/bluetooth/hci_sock.c
@@ -25,6 +25,7 @@
 /* Bluetooth HCI sockets. */
 #include <linux/compat.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/sched.h>
 #include <asm/unaligned.h>
diff --git a/net/bluetooth/hidp/core.c b/net/bluetooth/hidp/core.c
index 707f229f896a..22f2e4114417 100644
--- a/net/bluetooth/hidp/core.c
+++ b/net/bluetooth/hidp/core.c
@@ -26,6 +26,7 @@
 #include <linux/file.h>
 #include <linux/kthread.h>
 #include <linux/hidraw.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/net/bluetooth/rfcomm/tty.c b/net/bluetooth/rfcomm/tty.c
index 69c75c041fe1..b5e3445cc51d 100644
--- a/net/bluetooth/rfcomm/tty.c
+++ b/net/bluetooth/rfcomm/tty.c
@@ -26,6 +26,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <linux/tty.h>
 #include <linux/tty_driver.h>
diff --git a/net/bluetooth/selftest.c b/net/bluetooth/selftest.c
index f49604d44b87..5151512b0369 100644
--- a/net/bluetooth/selftest.c
+++ b/net/bluetooth/selftest.c
@@ -22,6 +22,7 @@
 */
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/net/bluetooth/smp.c b/net/bluetooth/smp.c
index 1e7ea3a4b7ef..de53253b9961 100644
--- a/net/bluetooth/smp.c
+++ b/net/bluetooth/smp.c
@@ -26,6 +26,7 @@
 #include <crypto/hash.h>
 #include <crypto/kpp.h>
 #include <crypto/utils.h>
+#include <linux/sprintf.h>
 
 #include <net/bluetooth/bluetooth.h>
 #include <net/bluetooth/hci_core.h>
diff --git a/net/bpf/test_run.c b/net/bpf/test_run.c
index 5535f9adc658..e8a8d7d7b7c7 100644
--- a/net/bpf/test_run.c
+++ b/net/bpf/test_run.c
@@ -4,6 +4,7 @@
 #include <linux/bpf.h>
 #include <linux/btf.h>
 #include <linux/btf_ids.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/slab.h>
 #include <linux/init.h>
 #include <linux/vmalloc.h>
diff --git a/net/bridge/br_stp_if.c b/net/bridge/br_stp_if.c
index 75204d36d7f9..0c9ce84a1a1e 100644
--- a/net/bridge/br_stp_if.c
+++ b/net/bridge/br_stp_if.c
@@ -11,6 +11,7 @@
 #include <linux/kmod.h>
 #include <linux/etherdevice.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <net/switchdev.h>
 
 #include "br_private.h"
diff --git a/net/bridge/br_sysfs_br.c b/net/bridge/br_sysfs_br.c
index ea733542244c..3cbd7120fce2 100644
--- a/net/bridge/br_sysfs_br.c
+++ b/net/bridge/br_sysfs_br.c
@@ -9,11 +9,13 @@
 
 #include <linux/capability.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/if_bridge.h>
 #include <linux/rtnetlink.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/times.h>
 #include <linux/sched/signal.h>
 
diff --git a/net/bridge/br_sysfs_if.c b/net/bridge/br_sysfs_if.c
index 74fdd8105dca..1d75bb56ada3 100644
--- a/net/bridge/br_sysfs_if.c
+++ b/net/bridge/br_sysfs_if.c
@@ -9,11 +9,13 @@
 
 #include <linux/capability.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/if_bridge.h>
 #include <linux/rtnetlink.h>
 #include <linux/spinlock.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include "br_private.h"
 
diff --git a/net/caif/caif_usb.c b/net/caif/caif_usb.c
index 5dc05a1e3178..32a368bee488 100644
--- a/net/caif/caif_usb.c
+++ b/net/caif/caif_usb.c
@@ -11,6 +11,7 @@
 #include <linux/netdevice.h>
 #include <linux/slab.h>
 #include <linux/mii.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/usbnet.h>
 #include <linux/etherdevice.h>
diff --git a/net/caif/cfctrl.c b/net/caif/cfctrl.c
index 8480684f2762..e3dd34ab504d 100644
--- a/net/caif/cfctrl.c
+++ b/net/caif/cfctrl.c
@@ -8,6 +8,7 @@
 
 #include <linux/stddef.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/slab.h>
 #include <linux/pkt_sched.h>
 #include <net/caif/caif_layer.h>
diff --git a/net/caif/cfdbgl.c b/net/caif/cfdbgl.c
index 77f428428b47..2c13faa8587a 100644
--- a/net/caif/cfdbgl.c
+++ b/net/caif/cfdbgl.c
@@ -8,6 +8,7 @@
 
 #include <linux/stddef.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/caif/caif_layer.h>
 #include <net/caif/cfsrvl.h>
 #include <net/caif/cfpkt.h>
diff --git a/net/caif/cfdgml.c b/net/caif/cfdgml.c
index eb6f8ef47a79..0f09bc6af8e9 100644
--- a/net/caif/cfdgml.c
+++ b/net/caif/cfdgml.c
@@ -8,6 +8,7 @@
 
 #include <linux/stddef.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/slab.h>
 #include <net/caif/caif_layer.h>
 #include <net/caif/cfsrvl.h>
diff --git a/net/caif/cffrml.c b/net/caif/cffrml.c
index 6651a8dc62e0..c3075d511455 100644
--- a/net/caif/cffrml.c
+++ b/net/caif/cffrml.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/crc-ccitt.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <net/caif/caif_layer.h>
 #include <net/caif/cfpkt.h>
 #include <net/caif/cffrml.h>
diff --git a/net/caif/cfmuxl.c b/net/caif/cfmuxl.c
index 4172b0d0db63..3976f6769ee4 100644
--- a/net/caif/cfmuxl.c
+++ b/net/caif/cfmuxl.c
@@ -10,6 +10,7 @@
 #include <linux/spinlock.h>
 #include <linux/slab.h>
 #include <linux/rculist.h>
+#include <linux/sprintf.h>
 #include <net/caif/cfpkt.h>
 #include <net/caif/cfmuxl.h>
 #include <net/caif/cfsrvl.h>
diff --git a/net/caif/cfrfml.c b/net/caif/cfrfml.c
index 7b0af33bdb97..ac4ad3e6c06b 100644
--- a/net/caif/cfrfml.c
+++ b/net/caif/cfrfml.c
@@ -9,6 +9,7 @@
 #include <linux/stddef.h>
 #include <linux/spinlock.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <asm/unaligned.h>
 #include <net/caif/caif_layer.h>
 #include <net/caif/cfsrvl.h>
diff --git a/net/caif/cfserl.c b/net/caif/cfserl.c
index aee11c74d3c8..6cc584d79f1f 100644
--- a/net/caif/cfserl.c
+++ b/net/caif/cfserl.c
@@ -8,6 +8,7 @@
 
 #include <linux/stddef.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/slab.h>
 #include <net/caif/caif_layer.h>
 #include <net/caif/cfpkt.h>
diff --git a/net/caif/cfutill.c b/net/caif/cfutill.c
index b2e47ede912f..2868065bbd76 100644
--- a/net/caif/cfutill.c
+++ b/net/caif/cfutill.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ":%s(): " fmt, __func__
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
diff --git a/net/caif/cfveil.c b/net/caif/cfveil.c
index db2274b94a5d..0957aedb761f 100644
--- a/net/caif/cfveil.c
+++ b/net/caif/cfveil.c
@@ -8,6 +8,7 @@
 
 #include <linux/stddef.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/caif/caif_layer.h>
 #include <net/caif/cfsrvl.h>
 #include <net/caif/cfpkt.h>
diff --git a/net/caif/cfvidl.c b/net/caif/cfvidl.c
index 134bad43196c..2a73aac7d9df 100644
--- a/net/caif/cfvidl.c
+++ b/net/caif/cfvidl.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ":%s(): " fmt, __func__
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
diff --git a/net/can/bcm.c b/net/can/bcm.c
index 9168114fc87f..e26f11246ce9 100644
--- a/net/can/bcm.c
+++ b/net/can/bcm.c
@@ -47,6 +47,7 @@
 #include <linux/list.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/uio.h>
 #include <linux/net.h>
 #include <linux/netdevice.h>
diff --git a/net/can/j1939/bus.c b/net/can/j1939/bus.c
index 486687901602..da77a8940325 100644
--- a/net/can/j1939/bus.c
+++ b/net/can/j1939/bus.c
@@ -11,6 +11,8 @@
  */
 
 #include <net/sock.h>
+#include <linux/hrtimer.h>
+#include <linux/kref.h>
 
 #include "j1939-priv.h"
 
diff --git a/net/can/j1939/transport.c b/net/can/j1939/transport.c
index fe3df23a2595..fba7d1a0bd5c 100644
--- a/net/can/j1939/transport.c
+++ b/net/can/j1939/transport.c
@@ -9,6 +9,7 @@
 //                         Oleksij Rempel <kernel@pengutronix.de>
 
 #include <linux/can/skb.h>
+#include <linux/hrtimer.h>
 
 #include "j1939-priv.h"
 
diff --git a/net/ceph/ceph_common.c b/net/ceph/ceph_common.c
index 4c6441536d55..28e0ec9e20c5 100644
--- a/net/ceph/ceph_common.c
+++ b/net/ceph/ceph_common.c
@@ -16,6 +16,7 @@
 #include <linux/sched/mm.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/statfs.h>
 #include <linux/string.h>
 #include <linux/vmalloc.h>
diff --git a/net/ceph/crush/mapper.c b/net/ceph/crush/mapper.c
index 1daf95e17d67..0a94933f935a 100644
--- a/net/ceph/crush/mapper.c
+++ b/net/ceph/crush/mapper.c
@@ -15,6 +15,7 @@
 # include <linux/slab.h>
 # include <linux/bug.h>
 # include <linux/kernel.h>
+# include <linux/math64.h>
 # include <linux/crush/crush.h>
 # include <linux/crush/hash.h>
 # include <linux/crush/mapper.h>
diff --git a/net/ceph/debugfs.c b/net/ceph/debugfs.c
index 2110439f8a24..1966fd72c67e 100644
--- a/net/ceph/debugfs.c
+++ b/net/ceph/debugfs.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/device.h>
 #include <linux/slab.h>
diff --git a/net/ceph/messenger.c b/net/ceph/messenger.c
index 3c8b78d9c4d1..8765331ab85a 100644
--- a/net/ceph/messenger.c
+++ b/net/ceph/messenger.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/crc32c.h>
 #include <linux/ctype.h>
diff --git a/net/ceph/mon_client.c b/net/ceph/mon_client.c
index f263f7e91a21..722f8375a7ed 100644
--- a/net/ceph/mon_client.c
+++ b/net/ceph/mon_client.c
@@ -1,5 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <linux/ceph/ceph_debug.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/types.h>
diff --git a/net/ceph/osd_client.c b/net/ceph/osd_client.c
index 9d078b37fe0b..fd644eb989a9 100644
--- a/net/ceph/osd_client.c
+++ b/net/ceph/osd_client.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <linux/ceph/ceph_debug.h>
+#include <linux/completion.h>
 
 #include <linux/module.h>
 #include <linux/err.h>
diff --git a/net/ceph/osdmap.c b/net/ceph/osdmap.c
index 295098873861..e78192ba9754 100644
--- a/net/ceph/osdmap.c
+++ b/net/ceph/osdmap.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <linux/ceph/ceph_debug.h>
+#include <linux/sprintf.h>
 
 #include <linux/module.h>
 #include <linux/slab.h>
diff --git a/net/ceph/string_table.c b/net/ceph/string_table.c
index 3191d9d160a2..ebdd605bb940 100644
--- a/net/ceph/string_table.c
+++ b/net/ceph/string_table.c
@@ -4,6 +4,7 @@
 #include <linux/string.h>
 #include <linux/spinlock.h>
 #include <linux/ceph/string_table.h>
+#include <linux/rbtree.h>
 
 static DEFINE_SPINLOCK(string_tree_lock);
 static struct rb_root string_tree = RB_ROOT;
diff --git a/net/core/dev.c b/net/core/dev.c
index 31f2c97d1990..56aa7968ddb1 100644
--- a/net/core/dev.c
+++ b/net/core/dev.c
@@ -72,6 +72,7 @@
 #include <linux/bitmap.h>
 #include <linux/capability.h>
 #include <linux/cpu.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/hash.h>
diff --git a/net/core/drop_monitor.c b/net/core/drop_monitor.c
index b0f221d658be..b80b9121def7 100644
--- a/net/core/drop_monitor.c
+++ b/net/core/drop_monitor.c
@@ -9,6 +9,7 @@
 
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/if_arp.h>
 #include <linux/inetdevice.h>
diff --git a/net/core/gso_test.c b/net/core/gso_test.c
index 4c2e77bd12f4..7dd7601de9ae 100644
--- a/net/core/gso_test.c
+++ b/net/core/gso_test.c
@@ -2,6 +2,7 @@
 
 #include <kunit/test.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 
 static const char hdr[] = "abcdefgh";
 #define GSO_TEST_SIZE 1000
diff --git a/net/core/neighbour.c b/net/core/neighbour.c
index 552719c3bbc3..8321ceef8b9e 100644
--- a/net/core/neighbour.c
+++ b/net/core/neighbour.c
@@ -15,6 +15,7 @@
 
 #include <linux/slab.h>
 #include <linux/kmemleak.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
diff --git a/net/core/net-sysfs.c b/net/core/net-sysfs.c
index a09d507c5b03..c5e410420ad2 100644
--- a/net/core/net-sysfs.c
+++ b/net/core/net-sysfs.c
@@ -7,6 +7,7 @@
 
 #include <linux/capability.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/if_arp.h>
 #include <linux/slab.h>
diff --git a/net/core/netpoll.c b/net/core/netpoll.c
index 543007f159f9..fae09ebaaf08 100644
--- a/net/core/netpoll.c
+++ b/net/core/netpoll.c
@@ -14,6 +14,7 @@
 
 #include <linux/moduleparam.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/etherdevice.h>
 #include <linux/string.h>
diff --git a/net/core/netprio_cgroup.c b/net/core/netprio_cgroup.c
index 8456dfbe2eb4..8bc07f465893 100644
--- a/net/core/netprio_cgroup.c
+++ b/net/core/netprio_cgroup.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/errno.h>
diff --git a/net/core/pktgen.c b/net/core/pktgen.c
index ea55a758a475..a2b4e5d4616a 100644
--- a/net/core/pktgen.c
+++ b/net/core/pktgen.c
@@ -120,6 +120,7 @@
 #include <linux/mutex.h>
 #include <linux/sched.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/unistd.h>
 #include <linux/string.h>
@@ -128,6 +129,7 @@
 #include <linux/ioport.h>
 #include <linux/interrupt.h>
 #include <linux/capability.h>
+#include <linux/completion.h>
 #include <linux/hrtimer.h>
 #include <linux/freezer.h>
 #include <linux/delay.h>
diff --git a/net/core/rtnetlink.c b/net/core/rtnetlink.c
index 31f433950c8d..ec47beec067b 100644
--- a/net/core/rtnetlink.c
+++ b/net/core/rtnetlink.c
@@ -15,6 +15,7 @@
 #include <linux/bitops.h>
 #include <linux/errno.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/socket.h>
 #include <linux/kernel.h>
diff --git a/net/core/selftests.c b/net/core/selftests.c
index 8f801e6e3b91..cb20b482790c 100644
--- a/net/core/selftests.c
+++ b/net/core/selftests.c
@@ -13,6 +13,7 @@
 #include <net/selftests.h>
 #include <net/tcp.h>
 #include <net/udp.h>
+#include <linux/completion.h>
 
 struct net_packet_attrs {
 	const unsigned char *src;
diff --git a/net/core/skbuff.c b/net/core/skbuff.c
index edbbef563d4d..d43d020a30ac 100644
--- a/net/core/skbuff.c
+++ b/net/core/skbuff.c
@@ -59,6 +59,7 @@
 #include <linux/errqueue.h>
 #include <linux/prefetch.h>
 #include <linux/bitfield.h>
+#include <linux/bvec.h>
 #include <linux/if_vlan.h>
 #include <linux/mpls.h>
 #include <linux/kcov.h>
diff --git a/net/core/sock.c b/net/core/sock.c
index 88bf810394a5..d277a12a6e9e 100644
--- a/net/core/sock.c
+++ b/net/core/sock.c
@@ -89,6 +89,7 @@
 #include <linux/capability.h>
 #include <linux/errno.h>
 #include <linux/errqueue.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/socket.h>
 #include <linux/in.h>
diff --git a/net/core/sock_map.c b/net/core/sock_map.c
index 27d733c0f65e..bdc49231d029 100644
--- a/net/core/sock_map.c
+++ b/net/core/sock_map.c
@@ -6,6 +6,7 @@
 #include <linux/filter.h>
 #include <linux/errno.h>
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/net.h>
 #include <linux/workqueue.h>
 #include <linux/skmsg.h>
diff --git a/net/core/sysctl_net_core.c b/net/core/sysctl_net_core.c
index 0f0cb1465e08..8f165ec908bb 100644
--- a/net/core/sysctl_net_core.c
+++ b/net/core/sysctl_net_core.c
@@ -8,6 +8,7 @@
 
 #include <linux/filter.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/module.h>
 #include <linux/socket.h>
diff --git a/net/core/utils.c b/net/core/utils.c
index c994e95172ac..81fa727da429 100644
--- a/net/core/utils.c
+++ b/net/core/utils.c
@@ -15,6 +15,7 @@
 #include <linux/kernel.h>
 #include <linux/ctype.h>
 #include <linux/inet.h>
+#include <linux/kstrtox.h>
 #include <linux/mm.h>
 #include <linux/net.h>
 #include <linux/string.h>
diff --git a/net/dccp/ccid.c b/net/dccp/ccid.c
index 6beac5d348e2..48de4dc161c1 100644
--- a/net/dccp/ccid.c
+++ b/net/dccp/ccid.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "ccid.h"
 #include "ccids/lib/tfrc.h"
diff --git a/net/devlink/port.c b/net/devlink/port.c
index 78592912f657..7c873271d22e 100644
--- a/net/devlink/port.c
+++ b/net/devlink/port.c
@@ -5,6 +5,7 @@
  */
 
 #include "devl_internal.h"
+#include <linux/sprintf.h>
 
 #define DEVLINK_PORT_FN_CAPS_VALID_MASK \
 	(_BITUL(__DEVLINK_PORT_FN_ATTR_CAPS_MAX) - 1)
diff --git a/net/dns_resolver/dns_key.c b/net/dns_resolver/dns_key.c
index c42ddd85ff1f..909e3d6114c6 100644
--- a/net/dns_resolver/dns_key.c
+++ b/net/dns_resolver/dns_key.c
@@ -28,6 +28,7 @@
 #include <linux/kernel.h>
 #include <linux/keyctl.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/seq_file.h>
 #include <linux/dns_resolver.h>
 #include <keys/dns_resolver-type.h>
diff --git a/net/dsa/conduit.c b/net/dsa/conduit.c
index 3dfdb3cb47dc..6de1052de17b 100644
--- a/net/dsa/conduit.c
+++ b/net/dsa/conduit.c
@@ -9,6 +9,7 @@
 #include <linux/ethtool.h>
 #include <linux/netdevice.h>
 #include <linux/netlink.h>
+#include <linux/sprintf.h>
 #include <net/dsa.h>
 
 #include "conduit.h"
diff --git a/net/dsa/trace.c b/net/dsa/trace.c
index 1b107165d331..29eea9b14216 100644
--- a/net/dsa/trace.c
+++ b/net/dsa/trace.c
@@ -4,6 +4,7 @@
 
 #define CREATE_TRACE_POINTS
 #include "trace.h"
+#include <linux/sprintf.h>
 
 void dsa_db_print(const struct dsa_db *db, char buf[DSA_DB_BUFSIZ])
 {
diff --git a/net/dsa/user.c b/net/dsa/user.c
index 5d666dfb317d..6c4be8151572 100644
--- a/net/dsa/user.c
+++ b/net/dsa/user.c
@@ -13,6 +13,7 @@
 #include <linux/of_net.h>
 #include <linux/of_mdio.h>
 #include <linux/mdio.h>
+#include <linux/sprintf.h>
 #include <net/rtnetlink.h>
 #include <net/pkt_cls.h>
 #include <net/selftests.h>
diff --git a/net/ethtool/ioctl.c b/net/ethtool/ioctl.c
index 1763e8b697e1..89e1e8fbb474 100644
--- a/net/ethtool/ioctl.c
+++ b/net/ethtool/ioctl.c
@@ -8,8 +8,10 @@
  */
 
 #include <linux/compat.h>
+#include <linux/completion.h>
 #include <linux/etherdevice.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/capability.h>
 #include <linux/errno.h>
diff --git a/net/ethtool/netlink.c b/net/ethtool/netlink.c
index bd04f28d5cf4..e861691e1762 100644
--- a/net/ethtool/netlink.c
+++ b/net/ethtool/netlink.c
@@ -4,6 +4,7 @@
 #include <linux/ethtool_netlink.h>
 #include <linux/pm_runtime.h>
 #include "netlink.h"
+#include <linux/completion.h>
 
 static struct genl_family ethtool_genl_family;
 
diff --git a/net/ieee802154/sysfs.c b/net/ieee802154/sysfs.c
index d2903933805c..bfffde972b9e 100644
--- a/net/ieee802154/sysfs.c
+++ b/net/ieee802154/sysfs.c
@@ -9,6 +9,7 @@
 
 #include <linux/device.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 
 #include <net/cfg802154.h>
 
diff --git a/net/ipv4/arp.c b/net/ipv4/arp.c
index 9456f5bb35e5..04e760adc876 100644
--- a/net/ipv4/arp.c
+++ b/net/ipv4/arp.c
@@ -72,6 +72,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/string.h>
 #include <linux/kernel.h>
diff --git a/net/ipv4/devinet.c b/net/ipv4/devinet.c
index ca0ff15dc8fa..137dd20f6714 100644
--- a/net/ipv4/devinet.c
+++ b/net/ipv4/devinet.c
@@ -26,6 +26,7 @@
 #include <linux/bitops.h>
 #include <linux/capability.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/sched/signal.h>
diff --git a/net/ipv4/esp4.c b/net/ipv4/esp4.c
index 4dd9e5040672..0b097b9317ae 100644
--- a/net/ipv4/esp4.c
+++ b/net/ipv4/esp4.c
@@ -5,6 +5,7 @@
 #include <crypto/authenc.h>
 #include <linux/err.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <net/xfrm.h>
 #include <net/esp.h>
diff --git a/net/ipv4/fib_trie.c b/net/ipv4/fib_trie.c
index 3ff35f811765..231484f57bc6 100644
--- a/net/ipv4/fib_trie.c
+++ b/net/ipv4/fib_trie.c
@@ -36,6 +36,7 @@
  *		Patrick McHardy <kaber@trash.net>
  */
 #include <linux/cache.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/bitops.h>
 #include <linux/types.h>
diff --git a/net/ipv4/inet_fragment.c b/net/ipv4/inet_fragment.c
index 7072fc0783ef..f9350db153bd 100644
--- a/net/ipv4/inet_fragment.c
+++ b/net/ipv4/inet_fragment.c
@@ -17,6 +17,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
 #include <linux/rhashtable.h>
+#include <linux/completion.h>
 
 #include <net/sock.h>
 #include <net/inet_frag.h>
diff --git a/net/ipv4/ipconfig.c b/net/ipv4/ipconfig.c
index c56b6fe6f0d7..b6d04b360c66 100644
--- a/net/ipv4/ipconfig.c
+++ b/net/ipv4/ipconfig.c
@@ -37,8 +37,10 @@
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/random.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/utsname.h>
 #include <linux/in.h>
 #include <linux/if.h>
diff --git a/net/ipv4/ipmr.c b/net/ipv4/ipmr.c
index 362229836510..81989c4f7be5 100644
--- a/net/ipv4/ipmr.c
+++ b/net/ipv4/ipmr.c
@@ -29,6 +29,7 @@
 #include <linux/mm.h>
 #include <linux/kernel.h>
 #include <linux/fcntl.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/socket.h>
 #include <linux/in.h>
diff --git a/net/ipv4/sysctl_net_ipv4.c b/net/ipv4/sysctl_net_ipv4.c
index 7e4f16a7dcc1..886a28080c3c 100644
--- a/net/ipv4/sysctl_net_ipv4.c
+++ b/net/ipv4/sysctl_net_ipv4.c
@@ -10,6 +10,7 @@
 #include <linux/seqlock.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/icmp.h>
 #include <net/ip.h>
 #include <net/ip_fib.h>
diff --git a/net/ipv4/tcp.c b/net/ipv4/tcp.c
index 7e2481b9eae1..a1ba8104d9da 100644
--- a/net/ipv4/tcp.c
+++ b/net/ipv4/tcp.c
@@ -245,6 +245,7 @@
 
 #include <crypto/hash.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/types.h>
 #include <linux/fcntl.h>
diff --git a/net/ipv4/tcp_bpf.c b/net/ipv4/tcp_bpf.c
index 53b0d62fd2c2..bc99e7bcaf6d 100644
--- a/net/ipv4/tcp_bpf.c
+++ b/net/ipv4/tcp_bpf.c
@@ -4,6 +4,7 @@
 #include <linux/skmsg.h>
 #include <linux/filter.h>
 #include <linux/bpf.h>
+#include <linux/bvec.h>
 #include <linux/init.h>
 #include <linux/wait.h>
 #include <linux/util_macros.h>
diff --git a/net/ipv4/tcp_cong.c b/net/ipv4/tcp_cong.c
index 1b34050a7538..f9e5e6130f18 100644
--- a/net/ipv4/tcp_cong.c
+++ b/net/ipv4/tcp_cong.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/gfp.h>
diff --git a/net/ipv4/tcp_metrics.c b/net/ipv4/tcp_metrics.c
index c2a925538542..f120a97957a7 100644
--- a/net/ipv4/tcp_metrics.c
+++ b/net/ipv4/tcp_metrics.c
@@ -2,6 +2,7 @@
 #include <linux/rcupdate.h>
 #include <linux/spinlock.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/cache.h>
 #include <linux/slab.h>
diff --git a/net/ipv4/tcp_ulp.c b/net/ipv4/tcp_ulp.c
index 2aa442128630..abc47bc7fc55 100644
--- a/net/ipv4/tcp_ulp.c
+++ b/net/ipv4/tcp_ulp.c
@@ -9,6 +9,7 @@
 
 #include <linux/module.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/list.h>
 #include <linux/gfp.h>
diff --git a/net/ipv4/udp.c b/net/ipv4/udp.c
index f631b0a21af4..edb15bdd7bd4 100644
--- a/net/ipv4/udp.c
+++ b/net/ipv4/udp.c
@@ -75,6 +75,7 @@
 #define pr_fmt(fmt) "UDP: " fmt
 
 #include <linux/bpf-cgroup.h>
+#include <linux/kstrtox.h>
 #include <linux/uaccess.h>
 #include <asm/ioctls.h>
 #include <linux/memblock.h>
diff --git a/net/ipv6/addrconf.c b/net/ipv6/addrconf.c
index d63f5d063f07..31e5ac482699 100644
--- a/net/ipv6/addrconf.c
+++ b/net/ipv6/addrconf.c
@@ -37,6 +37,7 @@
 #define pr_fmt(fmt) "IPv6: " fmt
 
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/sched/signal.h>
diff --git a/net/ipv6/esp6.c b/net/ipv6/esp6.c
index 6e6efe026cdc..25f6185061d8 100644
--- a/net/ipv6/esp6.c
+++ b/net/ipv6/esp6.c
@@ -17,6 +17,7 @@
 #include <crypto/authenc.h>
 #include <linux/err.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/ip.h>
 #include <net/xfrm.h>
 #include <net/esp.h>
diff --git a/net/ipv6/ip6_tunnel.c b/net/ipv6/ip6_tunnel.c
index bfb0a6c601c1..9f2d975a96d7 100644
--- a/net/ipv6/ip6_tunnel.c
+++ b/net/ipv6/ip6_tunnel.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/capability.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sockios.h>
 #include <linux/icmp.h>
diff --git a/net/ipv6/ip6_vti.c b/net/ipv6/ip6_vti.c
index cfe1b1ad4d85..2826f94c010e 100644
--- a/net/ipv6/ip6_vti.c
+++ b/net/ipv6/ip6_vti.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/capability.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/sockios.h>
 #include <linux/icmp.h>
diff --git a/net/ipv6/ip6mr.c b/net/ipv6/ip6mr.c
index 9782c180fee6..293e9c550413 100644
--- a/net/ipv6/ip6mr.c
+++ b/net/ipv6/ip6mr.c
@@ -18,6 +18,7 @@
 #include <linux/mm.h>
 #include <linux/kernel.h>
 #include <linux/fcntl.h>
+#include <linux/sprintf.h>
 #include <linux/stat.h>
 #include <linux/socket.h>
 #include <linux/inet.h>
diff --git a/net/ipv6/proc.c b/net/ipv6/proc.c
index 6d1d9221649d..2ec16cdddaf6 100644
--- a/net/ipv6/proc.c
+++ b/net/ipv6/proc.c
@@ -16,6 +16,7 @@
 #include <linux/ipv6.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/stddef.h>
 #include <linux/export.h>
 #include <net/net_namespace.h>
diff --git a/net/iucv/af_iucv.c b/net/iucv/af_iucv.c
index 498a0c35b7bb..36d5f6d41536 100644
--- a/net/iucv/af_iucv.c
+++ b/net/iucv/af_iucv.c
@@ -16,6 +16,7 @@
 #include <linux/filter.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/limits.h>
 #include <linux/list.h>
diff --git a/net/l2tp/l2tp_core.c b/net/l2tp/l2tp_core.c
index 8d21ff25f160..6b0c9bbf5f53 100644
--- a/net/l2tp/l2tp_core.c
+++ b/net/l2tp/l2tp_core.c
@@ -17,6 +17,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/list.h>
 #include <linux/rculist.h>
diff --git a/net/mac80211/debugfs.c b/net/mac80211/debugfs.c
index 74be49191e70..9d075cddc916 100644
--- a/net/mac80211/debugfs.c
+++ b/net/mac80211/debugfs.c
@@ -8,7 +8,9 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include "ieee80211_i.h"
 #include "driver-ops.h"
diff --git a/net/mac80211/debugfs_key.c b/net/mac80211/debugfs_key.c
index 7e54da508765..3af725604b8c 100644
--- a/net/mac80211/debugfs_key.c
+++ b/net/mac80211/debugfs_key.c
@@ -13,6 +13,7 @@
 #include "key.h"
 #include "debugfs.h"
 #include "debugfs_key.h"
+#include <linux/sprintf.h>
 
 #define KEY_READ(name, prop, format_string)				\
 static ssize_t key_##name##_read(struct file *file,			\
diff --git a/net/mac80211/debugfs_netdev.c b/net/mac80211/debugfs_netdev.c
index 68596ef78b15..6bb4edd39204 100644
--- a/net/mac80211/debugfs_netdev.c
+++ b/net/mac80211/debugfs_netdev.c
@@ -10,10 +10,12 @@
 #include <linux/if.h>
 #include <linux/if_ether.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/netdevice.h>
 #include <linux/rtnetlink.h>
 #include <linux/slab.h>
 #include <linux/notifier.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include <net/cfg80211.h>
 #include "ieee80211_i.h"
diff --git a/net/mac80211/debugfs_sta.c b/net/mac80211/debugfs_sta.c
index 1e9389c49a57..2b5f91ef7ba5 100644
--- a/net/mac80211/debugfs_sta.c
+++ b/net/mac80211/debugfs_sta.c
@@ -15,6 +15,8 @@
 #include "debugfs_sta.h"
 #include "sta_info.h"
 #include "driver-ops.h"
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 /* sta attributes */
 
diff --git a/net/mac80211/iface.c b/net/mac80211/iface.c
index 227c8dc3fbe5..f7c59813957c 100644
--- a/net/mac80211/iface.c
+++ b/net/mac80211/iface.c
@@ -16,6 +16,7 @@
 #include <linux/netdevice.h>
 #include <linux/rtnetlink.h>
 #include <linux/kcov.h>
+#include <linux/sprintf.h>
 #include <net/mac80211.h>
 #include <net/ieee80211_radiotap.h>
 #include "ieee80211_i.h"
diff --git a/net/mac80211/led.c b/net/mac80211/led.c
index 2dc732147e85..2c76f4e8b578 100644
--- a/net/mac80211/led.c
+++ b/net/mac80211/led.c
@@ -8,6 +8,7 @@
 #include <linux/slab.h>
 #include <linux/export.h>
 #include "led.h"
+#include <linux/sprintf.h>
 
 void ieee80211_led_assoc(struct ieee80211_local *local, bool associated)
 {
diff --git a/net/mac80211/rc80211_minstrel_ht_debugfs.c b/net/mac80211/rc80211_minstrel_ht_debugfs.c
index 25b8a67a63a4..56736dc71189 100644
--- a/net/mac80211/rc80211_minstrel_ht_debugfs.c
+++ b/net/mac80211/rc80211_minstrel_ht_debugfs.c
@@ -3,6 +3,7 @@
  * Copyright (C) 2010 Felix Fietkau <nbd@openwrt.org>
  */
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/skbuff.h>
 #include <linux/debugfs.h>
diff --git a/net/mac802154/main.c b/net/mac802154/main.c
index 9ab7396668d2..1e31781d1a3c 100644
--- a/net/mac802154/main.c
+++ b/net/mac802154/main.c
@@ -9,6 +9,8 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include <net/netlink.h>
 #include <net/nl802154.h>
diff --git a/net/mac802154/scan.c b/net/mac802154/scan.c
index 1c0eeaa76560..8d612ccf7d17 100644
--- a/net/mac802154/scan.c
+++ b/net/mac802154/scan.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/rtnetlink.h>
 #include <net/mac802154.h>
+#include <linux/completion.h>
 
 #include "ieee802154_i.h"
 #include "driver-ops.h"
diff --git a/net/mctp/test/route-test.c b/net/mctp/test/route-test.c
index 92ea4158f7fc..16932b8b209e 100644
--- a/net/mctp/test/route-test.c
+++ b/net/mctp/test/route-test.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include "utils.h"
 
diff --git a/net/mpls/af_mpls.c b/net/mpls/af_mpls.c
index 1af29af65388..2911bd6b1eb7 100644
--- a/net/mpls/af_mpls.c
+++ b/net/mpls/af_mpls.c
@@ -2,6 +2,7 @@
 #include <linux/types.h>
 #include <linux/skbuff.h>
 #include <linux/socket.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/net.h>
 #include <linux/module.h>
diff --git a/net/mptcp/crypto_test.c b/net/mptcp/crypto_test.c
index 220414e5c850..525c74ed9638 100644
--- a/net/mptcp/crypto_test.c
+++ b/net/mptcp/crypto_test.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0
 #include <kunit/test.h>
+#include <linux/sprintf.h>
 
 #include "protocol.h"
 
diff --git a/net/netfilter/ipvs/ip_vs_conn.c b/net/netfilter/ipvs/ip_vs_conn.c
index 98d7dbe3d787..811d691bf35d 100644
--- a/net/netfilter/ipvs/ip_vs_conn.c
+++ b/net/netfilter/ipvs/ip_vs_conn.c
@@ -32,6 +32,7 @@
 #include <linux/jhash.h>
 #include <linux/random.h>
 #include <linux/rcupdate_wait.h>
+#include <linux/sprintf.h>
 
 #include <net/net_namespace.h>
 #include <net/ip_vs.h>
diff --git a/net/netfilter/ipvs/ip_vs_core.c b/net/netfilter/ipvs/ip_vs_core.c
index a2c16b501087..8dfd022a4e9e 100644
--- a/net/netfilter/ipvs/ip_vs_core.c
+++ b/net/netfilter/ipvs/ip_vs_core.c
@@ -25,6 +25,7 @@
 #include <linux/module.h>
 #include <linux/kernel.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/sctp.h>
 #include <linux/icmp.h>
diff --git a/net/netfilter/ipvs/ip_vs_ctl.c b/net/netfilter/ipvs/ip_vs_ctl.c
index 143a341bbc0a..2aaa06ae3c97 100644
--- a/net/netfilter/ipvs/ip_vs_ctl.c
+++ b/net/netfilter/ipvs/ip_vs_ctl.c
@@ -18,6 +18,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/capability.h>
 #include <linux/fs.h>
diff --git a/net/netfilter/ipvs/ip_vs_ftp.c b/net/netfilter/ipvs/ip_vs_ftp.c
index f53899d12416..ac50c5948522 100644
--- a/net/netfilter/ipvs/ip_vs_ftp.c
+++ b/net/netfilter/ipvs/ip_vs_ftp.c
@@ -28,6 +28,7 @@
 #include <linux/in.h>
 #include <linux/ip.h>
 #include <linux/netfilter.h>
+#include <linux/sprintf.h>
 #include <net/netfilter/nf_conntrack.h>
 #include <net/netfilter/nf_conntrack_expect.h>
 #include <net/netfilter/nf_nat.h>
diff --git a/net/netfilter/ipvs/ip_vs_proto.c b/net/netfilter/ipvs/ip_vs_proto.c
index f100da4ba3bc..2bf51bc1a998 100644
--- a/net/netfilter/ipvs/ip_vs_proto.c
+++ b/net/netfilter/ipvs/ip_vs_proto.c
@@ -17,6 +17,7 @@
 #include <linux/gfp.h>
 #include <linux/in.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <net/protocol.h>
 #include <net/tcp.h>
 #include <net/udp.h>
diff --git a/net/netfilter/nf_conntrack_amanda.c b/net/netfilter/nf_conntrack_amanda.c
index d011d2eb0848..55fe13ab8958 100644
--- a/net/netfilter/nf_conntrack_amanda.c
+++ b/net/netfilter/nf_conntrack_amanda.c
@@ -6,6 +6,7 @@
  * (C) 2006 Patrick McHardy <kaber@trash.net>
  */
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/textsearch.h>
diff --git a/net/netfilter/nf_conntrack_core.c b/net/netfilter/nf_conntrack_core.c
index 2e5f3864d353..899ee45737cc 100644
--- a/net/netfilter/nf_conntrack_core.c
+++ b/net/netfilter/nf_conntrack_core.c
@@ -23,6 +23,7 @@
 #include <linux/random.h>
 #include <linux/siphash.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/percpu.h>
 #include <linux/moduleparam.h>
 #include <linux/notifier.h>
diff --git a/net/netfilter/nf_conntrack_helper.c b/net/netfilter/nf_conntrack_helper.c
index 4ed5878cb25b..9df84a5829cf 100644
--- a/net/netfilter/nf_conntrack_helper.c
+++ b/net/netfilter/nf_conntrack_helper.c
@@ -11,6 +11,7 @@
 #include <linux/netfilter.h>
 #include <linux/module.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/stddef.h>
 #include <linux/random.h>
diff --git a/net/netfilter/nf_conntrack_irc.c b/net/netfilter/nf_conntrack_irc.c
index 5703846bea3b..fa85b27b024d 100644
--- a/net/netfilter/nf_conntrack_irc.c
+++ b/net/netfilter/nf_conntrack_irc.c
@@ -12,6 +12,7 @@
 #include <linux/skbuff.h>
 #include <linux/in.h>
 #include <linux/ip.h>
+#include <linux/kstrtox.h>
 #include <linux/tcp.h>
 #include <linux/netfilter.h>
 #include <linux/slab.h>
diff --git a/net/netfilter/nf_conntrack_sip.c b/net/netfilter/nf_conntrack_sip.c
index d0eac27f6ba0..7e93feab839b 100644
--- a/net/netfilter/nf_conntrack_sip.c
+++ b/net/netfilter/nf_conntrack_sip.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/skbuff.h>
 #include <linux/inet.h>
 #include <linux/in.h>
diff --git a/net/netfilter/nf_log.c b/net/netfilter/nf_log.c
index e16f158388bb..4ed935aae068 100644
--- a/net/netfilter/nf_log.c
+++ b/net/netfilter/nf_log.c
@@ -6,6 +6,7 @@
 #include <linux/skbuff.h>
 #include <linux/netfilter.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <net/protocol.h>
 #include <net/netfilter/nf_log.h>
 
diff --git a/net/netfilter/nf_nat_amanda.c b/net/netfilter/nf_nat_amanda.c
index 98deef6cde69..2e4d722b9099 100644
--- a/net/netfilter/nf_nat_amanda.c
+++ b/net/netfilter/nf_nat_amanda.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 
 #include <net/netfilter/nf_conntrack_helper.h>
diff --git a/net/netfilter/nf_nat_ftp.c b/net/netfilter/nf_nat_ftp.c
index c92a436d9c48..91f27cfa9d52 100644
--- a/net/netfilter/nf_nat_ftp.c
+++ b/net/netfilter/nf_nat_ftp.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/moduleparam.h>
 #include <linux/inet.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/netfilter_ipv4.h>
 #include <net/netfilter/nf_nat.h>
diff --git a/net/netfilter/nf_nat_irc.c b/net/netfilter/nf_nat_irc.c
index 19c4fcc60c50..70ab0c5eb2b1 100644
--- a/net/netfilter/nf_nat_irc.c
+++ b/net/netfilter/nf_nat_irc.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/tcp.h>
 #include <linux/kernel.h>
 
diff --git a/net/netfilter/nf_nat_sip.c b/net/netfilter/nf_nat_sip.c
index cf4aeb299bde..511f856027bb 100644
--- a/net/netfilter/nf_nat_sip.c
+++ b/net/netfilter/nf_nat_sip.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/skbuff.h>
 #include <linux/inet.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <linux/tcp.h>
 
diff --git a/net/netfilter/nf_tables_api.c b/net/netfilter/nf_tables_api.c
index cb6f49a3d809..b989284c2193 100644
--- a/net/netfilter/nf_tables_api.c
+++ b/net/netfilter/nf_tables_api.c
@@ -10,6 +10,7 @@
 #include <linux/list.h>
 #include <linux/skbuff.h>
 #include <linux/netlink.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/rhashtable.h>
 #include <linux/audit.h>
diff --git a/net/netfilter/nfnetlink_hook.c b/net/netfilter/nfnetlink_hook.c
index ade8ee1988b1..d3633ad7a114 100644
--- a/net/netfilter/nfnetlink_hook.c
+++ b/net/netfilter/nfnetlink_hook.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/kallsyms.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/skbuff.h>
 #include <linux/errno.h>
diff --git a/net/netfilter/nft_osf.c b/net/netfilter/nft_osf.c
index 7f61506e5b44..11b81c54ae5d 100644
--- a/net/netfilter/nft_osf.c
+++ b/net/netfilter/nft_osf.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <net/ip.h>
 #include <net/tcp.h>
+#include <linux/sprintf.h>
 
 #include <net/netfilter/nf_tables.h>
 #include <linux/netfilter/nfnetlink_osf.h>
diff --git a/net/netfilter/x_tables.c b/net/netfilter/x_tables.c
index 21624d68314f..dbf0763607b8 100644
--- a/net/netfilter/x_tables.c
+++ b/net/netfilter/x_tables.c
@@ -16,6 +16,7 @@
 #include <linux/net.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/vmalloc.h>
 #include <linux/mutex.h>
diff --git a/net/netrom/af_netrom.c b/net/netrom/af_netrom.c
index 0eed00184adf..d4e4688ce7d0 100644
--- a/net/netrom/af_netrom.c
+++ b/net/netrom/af_netrom.c
@@ -9,6 +9,7 @@
 #include <linux/moduleparam.h>
 #include <linux/capability.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/socket.h>
 #include <linux/in.h>
diff --git a/net/nfc/digital_core.c b/net/nfc/digital_core.c
index dae378f1d52b..b326678f5664 100644
--- a/net/nfc/digital_core.c
+++ b/net/nfc/digital_core.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt) "digital: %s: " fmt, __func__
 
 #include <linux/module.h>
+#include <linux/random.h>
 
 #include "digital.h"
 
diff --git a/net/nfc/digital_dep.c b/net/nfc/digital_dep.c
index 3982fa084737..f894c1dbf2ea 100644
--- a/net/nfc/digital_dep.c
+++ b/net/nfc/digital_dep.c
@@ -7,6 +7,7 @@
 #define pr_fmt(fmt) "digital: %s: " fmt, __func__
 
 #include "digital.h"
+#include <linux/random.h>
 
 #define DIGITAL_NFC_DEP_N_RETRY_NACK	2
 #define DIGITAL_NFC_DEP_N_RETRY_ATN	2
diff --git a/net/nfc/digital_technology.c b/net/nfc/digital_technology.c
index 3adf4589852a..61fc418b642c 100644
--- a/net/nfc/digital_technology.c
+++ b/net/nfc/digital_technology.c
@@ -8,6 +8,8 @@
 
 #include "digital.h"
 
+#include <linux/random.h>
+
 #define DIGITAL_CMD_SENS_REQ    0x26
 #define DIGITAL_CMD_ALL_REQ     0x52
 #define DIGITAL_CMD_SEL_REQ_CL1 0x93
diff --git a/net/nfc/nci/core.c b/net/nfc/nci/core.c
index cdad47b140fa..fa6d9a3bc6be 100644
--- a/net/nfc/nci/core.c
+++ b/net/nfc/nci/core.c
@@ -17,6 +17,7 @@
 
 #include <linux/module.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/workqueue.h>
 #include <linux/completion.h>
diff --git a/net/nfc/nci/spi.c b/net/nfc/nci/spi.c
index 6a93533c480e..42d46aad5508 100644
--- a/net/nfc/nci/spi.c
+++ b/net/nfc/nci/spi.c
@@ -6,6 +6,7 @@
 #define pr_fmt(fmt) "nci_spi: %s: " fmt, __func__
 
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <linux/export.h>
 #include <linux/spi/spi.h>
diff --git a/net/packet/af_packet.c b/net/packet/af_packet.c
index c9bbc2686690..ae5d9ebd8ded 100644
--- a/net/packet/af_packet.c
+++ b/net/packet/af_packet.c
@@ -53,6 +53,7 @@
 #include <linux/types.h>
 #include <linux/mm.h>
 #include <linux/capability.h>
+#include <linux/completion.h>
 #include <linux/fcntl.h>
 #include <linux/socket.h>
 #include <linux/in.h>
diff --git a/net/rds/ib_send.c b/net/rds/ib_send.c
index 4190b90ff3b1..f3e8ae1dada1 100644
--- a/net/rds/ib_send.c
+++ b/net/rds/ib_send.c
@@ -35,6 +35,7 @@
 #include <linux/device.h>
 #include <linux/dmapool.h>
 #include <linux/ratelimit.h>
+#include <linux/completion.h>
 
 #include "rds_single_path.h"
 #include "rds.h"
diff --git a/net/rds/tcp_send.c b/net/rds/tcp_send.c
index 7d284ac7e81a..d800692c0bd1 100644
--- a/net/rds/tcp_send.c
+++ b/net/rds/tcp_send.c
@@ -30,6 +30,7 @@
  * SOFTWARE.
  *
  */
+#include <linux/bvec.h>
 #include <linux/kernel.h>
 #include <linux/in.h>
 #include <net/tcp.h>
diff --git a/net/rfkill/core.c b/net/rfkill/core.c
index c3feb4f49d09..d58c74c46d4f 100644
--- a/net/rfkill/core.c
+++ b/net/rfkill/core.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/workqueue.h>
diff --git a/net/rose/af_rose.c b/net/rose/af_rose.c
index ef81d019b20f..99adac6513d7 100644
--- a/net/rose/af_rose.c
+++ b/net/rose/af_rose.c
@@ -12,6 +12,7 @@
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/socket.h>
 #include <linux/in.h>
diff --git a/net/rxrpc/io_thread.c b/net/rxrpc/io_thread.c
index 4a3a08a0e2cd..ed0e3d1beebe 100644
--- a/net/rxrpc/io_thread.c
+++ b/net/rxrpc/io_thread.c
@@ -8,6 +8,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include "ar-internal.h"
+#include <linux/completion.h>
 
 static int rxrpc_input_packet_on_conn(struct rxrpc_connection *conn,
 				      struct sockaddr_rxrpc *peer_srx,
diff --git a/net/rxrpc/local_event.c b/net/rxrpc/local_event.c
index 993c69f97488..ac195bdc2573 100644
--- a/net/rxrpc/local_event.c
+++ b/net/rxrpc/local_event.c
@@ -11,6 +11,7 @@
 #include <linux/net.h>
 #include <linux/skbuff.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <net/af_rxrpc.h>
 #include <generated/utsrelease.h>
diff --git a/net/rxrpc/local_object.c b/net/rxrpc/local_object.c
index 34d307368135..fe119f5db687 100644
--- a/net/rxrpc/local_object.c
+++ b/net/rxrpc/local_object.c
@@ -19,6 +19,7 @@
 #include <net/udp_tunnel.h>
 #include <net/af_rxrpc.h>
 #include "ar-internal.h"
+#include <linux/completion.h>
 
 static void rxrpc_local_rcu(struct rcu_head *);
 
diff --git a/net/rxrpc/proc.c b/net/rxrpc/proc.c
index 26dc2f26d92d..2c27c7bb5ce2 100644
--- a/net/rxrpc/proc.c
+++ b/net/rxrpc/proc.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <net/af_rxrpc.h>
 #include "ar-internal.h"
diff --git a/net/rxrpc/rxperf.c b/net/rxrpc/rxperf.c
index 085e7892d310..9c83a99fa8ec 100644
--- a/net/rxrpc/rxperf.c
+++ b/net/rxrpc/rxperf.c
@@ -6,6 +6,7 @@
  */
 
 #define pr_fmt(fmt) "rxperf: " fmt
+#include <linux/bvec.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <net/sock.h>
diff --git a/net/rxrpc/security.c b/net/rxrpc/security.c
index cb8dd1d3b1d4..4d331ecf603f 100644
--- a/net/rxrpc/security.c
+++ b/net/rxrpc/security.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/net.h>
 #include <linux/skbuff.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <linux/crypto.h>
 #include <net/sock.h>
diff --git a/net/rxrpc/server_key.c b/net/rxrpc/server_key.c
index e51940589ee5..f4bf602d1fbb 100644
--- a/net/rxrpc/server_key.c
+++ b/net/rxrpc/server_key.c
@@ -11,12 +11,14 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <crypto/skcipher.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/net.h>
 #include <linux/skbuff.h>
 #include <linux/key-type.h>
 #include <linux/ctype.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <net/af_rxrpc.h>
 #include <keys/rxrpc-type.h>
diff --git a/net/sched/act_gate.c b/net/sched/act_gate.c
index 1dd74125398a..7d0f677580de 100644
--- a/net/sched/act_gate.c
+++ b/net/sched/act_gate.c
@@ -10,6 +10,7 @@
 #include <linux/rtnetlink.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/hrtimer.h>
 #include <net/act_api.h>
 #include <net/netlink.h>
 #include <net/pkt_cls.h>
diff --git a/net/sctp/socket.c b/net/sctp/socket.c
index 6b9fcdb0952a..1322a4c57ade 100644
--- a/net/sctp/socket.c
+++ b/net/sctp/socket.c
@@ -38,6 +38,7 @@
 #define pr_fmt(fmt) KBUILD_MODNAME ": " fmt
 
 #include <crypto/hash.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kernel.h>
 #include <linux/wait.h>
diff --git a/net/smc/smc_core.c b/net/smc/smc_core.c
index 9b84d5897aa5..f21049252c18 100644
--- a/net/smc/smc_core.c
+++ b/net/smc/smc_core.c
@@ -12,6 +12,7 @@
 #include <linux/socket.h>
 #include <linux/if_vlan.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/wait.h>
 #include <linux/reboot.h>
diff --git a/net/smc/smc_core.h b/net/smc/smc_core.h
index 1f175376037b..d0311c3e0756 100644
--- a/net/smc/smc_core.h
+++ b/net/smc/smc_core.h
@@ -15,6 +15,7 @@
 #include <linux/atomic.h>
 #include <linux/smc.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <rdma/ib_verbs.h>
 #include <net/genetlink.h>
 #include <net/smc.h>
diff --git a/net/smc/smc_ib.c b/net/smc/smc_ib.c
index 97704a9e84c7..5254ca86da50 100644
--- a/net/smc/smc_ib.c
+++ b/net/smc/smc_ib.c
@@ -15,6 +15,7 @@
 #include <linux/etherdevice.h>
 #include <linux/if_vlan.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/scatterlist.h>
 #include <linux/wait.h>
diff --git a/net/smc/smc_ism.c b/net/smc/smc_ism.c
index ac88de2a06a0..869e3b57ff72 100644
--- a/net/smc/smc_ism.c
+++ b/net/smc/smc_ism.c
@@ -11,6 +11,7 @@
 #include <linux/mutex.h>
 #include <linux/slab.h>
 #include <asm/page.h>
+#include <linux/sprintf.h>
 
 #include "smc.h"
 #include "smc_core.h"
diff --git a/net/smc/smc_llc.c b/net/smc/smc_llc.c
index 018ce8133b02..24571cf31300 100644
--- a/net/smc/smc_llc.c
+++ b/net/smc/smc_llc.c
@@ -12,6 +12,7 @@
 
 #include <net/tcp.h>
 #include <rdma/ib_verbs.h>
+#include <linux/completion.h>
 
 #include "smc.h"
 #include "smc_core.h"
diff --git a/net/smc/smc_wr.c b/net/smc/smc_wr.c
index b6f0cfc52788..57372d48ee9a 100644
--- a/net/smc/smc_wr.c
+++ b/net/smc/smc_wr.c
@@ -23,6 +23,7 @@
  */
 
 #include <linux/atomic.h>
+#include <linux/completion.h>
 #include <linux/hashtable.h>
 #include <linux/wait.h>
 #include <rdma/ib_verbs.h>
diff --git a/net/sunrpc/addr.c b/net/sunrpc/addr.c
index d435bffc6199..c95392740f8c 100644
--- a/net/sunrpc/addr.c
+++ b/net/sunrpc/addr.c
@@ -22,6 +22,8 @@
 #include <linux/sunrpc/msg_prot.h>
 #include <linux/slab.h>
 #include <linux/export.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 
 #if IS_ENABLED(CONFIG_IPV6)
 
diff --git a/net/sunrpc/auth.c b/net/sunrpc/auth.c
index 04534ea537c8..b968a87548be 100644
--- a/net/sunrpc/auth.c
+++ b/net/sunrpc/auth.c
@@ -10,12 +10,15 @@
 #include <linux/types.h>
 #include <linux/sched.h>
 #include <linux/cred.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
 #include <linux/hash.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/clnt.h>
 #include <linux/sunrpc/gss_api.h>
+#include <linux/shrinker.h>
 #include <linux/spinlock.h>
 
 #include <trace/events/sunrpc.h>
diff --git a/net/sunrpc/auth_gss/auth_gss.c b/net/sunrpc/auth_gss/auth_gss.c
index c7af0220f82f..453a01ab092c 100644
--- a/net/sunrpc/auth_gss/auth_gss.c
+++ b/net/sunrpc/auth_gss/auth_gss.c
@@ -13,6 +13,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/sched.h>
diff --git a/net/sunrpc/auth_gss/gss_krb5_mech.c b/net/sunrpc/auth_gss/gss_krb5_mech.c
index 3366505bc669..e3b6e4ffa783 100644
--- a/net/sunrpc/auth_gss/gss_krb5_mech.c
+++ b/net/sunrpc/auth_gss/gss_krb5_mech.c
@@ -14,6 +14,7 @@
 #include <linux/err.h>
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/sunrpc/auth.h>
diff --git a/net/sunrpc/auth_gss/svcauth_gss.c b/net/sunrpc/auth_gss/svcauth_gss.c
index 24de94184700..ce6d036e61ab 100644
--- a/net/sunrpc/auth_gss/svcauth_gss.c
+++ b/net/sunrpc/auth_gss/svcauth_gss.c
@@ -39,10 +39,12 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/module.h>
 #include <linux/pagemap.h>
 #include <linux/user_namespace.h>
+#include <linux/kstrtox.h>
 
 #include <linux/sunrpc/auth_gss.h>
 #include <linux/sunrpc/gss_err.h>
diff --git a/net/sunrpc/cache.c b/net/sunrpc/cache.c
index 95ff74706104..6ac2f66c2fa6 100644
--- a/net/sunrpc/cache.c
+++ b/net/sunrpc/cache.c
@@ -11,6 +11,8 @@
 #include <linux/types.h>
 #include <linux/fs.h>
 #include <linux/file.h>
+#include <linux/hex.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/signal.h>
 #include <linux/sched.h>
@@ -18,6 +20,7 @@
 #include <linux/list.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/uaccess.h>
 #include <linux/poll.h>
@@ -28,6 +31,7 @@
 #include <linux/mutex.h>
 #include <linux/pagemap.h>
 #include <asm/ioctls.h>
+#include <linux/completion.h>
 #include <linux/sunrpc/types.h>
 #include <linux/sunrpc/cache.h>
 #include <linux/sunrpc/stats.h>
diff --git a/net/sunrpc/clnt.c b/net/sunrpc/clnt.c
index cda0935a68c9..7b7b806fd30e 100644
--- a/net/sunrpc/clnt.c
+++ b/net/sunrpc/clnt.c
@@ -20,6 +20,7 @@
 
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/kallsyms.h>
 #include <linux/mm.h>
diff --git a/net/sunrpc/debugfs.c b/net/sunrpc/debugfs.c
index a176d5a0b0ee..23d9394870ca 100644
--- a/net/sunrpc/debugfs.c
+++ b/net/sunrpc/debugfs.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/sched.h>
 #include <linux/sunrpc/clnt.h>
 
diff --git a/net/sunrpc/svc_xprt.c b/net/sunrpc/svc_xprt.c
index b4a85a227bd7..98a40651ad7c 100644
--- a/net/sunrpc/svc_xprt.c
+++ b/net/sunrpc/svc_xprt.c
@@ -10,6 +10,7 @@
 #include <linux/errno.h>
 #include <linux/freezer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <linux/sunrpc/addr.h>
 #include <linux/sunrpc/stats.h>
diff --git a/net/sunrpc/svcauth_unix.c b/net/sunrpc/svcauth_unix.c
index 04b45588ae6f..b8f1e64b7e3c 100644
--- a/net/sunrpc/svcauth_unix.c
+++ b/net/sunrpc/svcauth_unix.c
@@ -2,6 +2,7 @@
 #include <linux/types.h>
 #include <linux/sched.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/types.h>
 #include <linux/sunrpc/xdr.h>
 #include <linux/sunrpc/svcsock.h>
diff --git a/net/sunrpc/svcsock.c b/net/sunrpc/svcsock.c
index 545017a3daa4..a08c2758cbc5 100644
--- a/net/sunrpc/svcsock.c
+++ b/net/sunrpc/svcsock.c
@@ -28,6 +28,7 @@
 #include <linux/net.h>
 #include <linux/in.h>
 #include <linux/inet.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <linux/tcp.h>
 #include <linux/unistd.h>
@@ -37,6 +38,7 @@
 #include <linux/file.h>
 #include <linux/freezer.h>
 #include <linux/bvec.h>
+#include <linux/completion.h>
 
 #include <net/sock.h>
 #include <net/checksum.h>
diff --git a/net/sunrpc/sysctl.c b/net/sunrpc/sysctl.c
index 93941ab12549..2c3732059ed7 100644
--- a/net/sunrpc/sysctl.c
+++ b/net/sunrpc/sysctl.c
@@ -12,6 +12,8 @@
 #include <linux/linkage.h>
 #include <linux/ctype.h>
 #include <linux/fs.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/module.h>
 
diff --git a/net/sunrpc/sysfs.c b/net/sunrpc/sysfs.c
index 5c8ecdaaa985..d5eafad0874b 100644
--- a/net/sunrpc/sysfs.c
+++ b/net/sunrpc/sysfs.c
@@ -4,6 +4,7 @@
  */
 #include <linux/sunrpc/clnt.h>
 #include <linux/kobject.h>
+#include <linux/sprintf.h>
 #include <linux/sunrpc/addr.h>
 #include <linux/sunrpc/xprtsock.h>
 
diff --git a/net/sunrpc/xprtrdma/frwr_ops.c b/net/sunrpc/xprtrdma/frwr_ops.c
index ffbf99894970..4d3148654982 100644
--- a/net/sunrpc/xprtrdma/frwr_ops.c
+++ b/net/sunrpc/xprtrdma/frwr_ops.c
@@ -41,6 +41,7 @@
  */
 
 #include <linux/sunrpc/svc_rdma.h>
+#include <linux/completion.h>
 
 #include "xprt_rdma.h"
 #include <trace/events/rpcrdma.h>
diff --git a/net/sunrpc/xprtrdma/svc_rdma.c b/net/sunrpc/xprtrdma/svc_rdma.c
index f86970733eb0..dfd4dfc893e1 100644
--- a/net/sunrpc/xprtrdma/svc_rdma.c
+++ b/net/sunrpc/xprtrdma/svc_rdma.c
@@ -43,6 +43,7 @@
 
 #include <linux/slab.h>
 #include <linux/fs.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/workqueue.h>
 #include <linux/sunrpc/clnt.h>
diff --git a/net/sunrpc/xprtrdma/svc_rdma_transport.c b/net/sunrpc/xprtrdma/svc_rdma_transport.c
index 2b1c16b9547d..7ade2f5af8bc 100644
--- a/net/sunrpc/xprtrdma/svc_rdma_transport.c
+++ b/net/sunrpc/xprtrdma/svc_rdma_transport.c
@@ -46,6 +46,7 @@
 #include <linux/sched.h>
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/export.h>
 
diff --git a/net/sunrpc/xprtrdma/transport.c b/net/sunrpc/xprtrdma/transport.c
index 29b0562d62e7..c4395fe29bc0 100644
--- a/net/sunrpc/xprtrdma/transport.c
+++ b/net/sunrpc/xprtrdma/transport.c
@@ -53,6 +53,7 @@
 #include <linux/slab.h>
 #include <linux/seq_file.h>
 #include <linux/smp.h>
+#include <linux/sprintf.h>
 
 #include <linux/sunrpc/addr.h>
 #include <linux/sunrpc/svc_rdma.h>
diff --git a/net/sunrpc/xprtrdma/verbs.c b/net/sunrpc/xprtrdma/verbs.c
index 4f8d7efa469f..ad827ccbddbd 100644
--- a/net/sunrpc/xprtrdma/verbs.c
+++ b/net/sunrpc/xprtrdma/verbs.c
@@ -54,6 +54,7 @@
 #include <linux/sunrpc/addr.h>
 #include <linux/sunrpc/svc_rdma.h>
 #include <linux/log2.h>
+#include <linux/completion.h>
 
 #include <asm-generic/barrier.h>
 #include <asm/bitops.h>
diff --git a/net/sunrpc/xprtsock.c b/net/sunrpc/xprtsock.c
index d92c13e78a56..2a9d7a30ef7b 100644
--- a/net/sunrpc/xprtsock.c
+++ b/net/sunrpc/xprtsock.c
@@ -24,12 +24,14 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/capability.h>
+#include <linux/completion.h>
 #include <linux/pagemap.h>
 #include <linux/errno.h>
 #include <linux/socket.h>
 #include <linux/in.h>
 #include <linux/net.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <linux/un.h>
 #include <linux/udp.h>
 #include <linux/tcp.h>
diff --git a/net/switchdev/switchdev.c b/net/switchdev/switchdev.c
index 5b045284849e..569f15d2509a 100644
--- a/net/switchdev/switchdev.c
+++ b/net/switchdev/switchdev.c
@@ -18,6 +18,7 @@
 #include <linux/if_vlan.h>
 #include <linux/rtnetlink.h>
 #include <net/switchdev.h>
+#include <linux/completion.h>
 
 static LIST_HEAD(deferred);
 static DEFINE_SPINLOCK(deferred_lock);
diff --git a/net/tipc/addr.c b/net/tipc/addr.c
index fd0796269eed..adf340fb0cea 100644
--- a/net/tipc/addr.c
+++ b/net/tipc/addr.c
@@ -37,6 +37,7 @@
 
 #include "addr.h"
 #include "core.h"
+#include <linux/sprintf.h>
 
 bool tipc_in_scope(bool legacy_format, u32 domain, u32 addr)
 {
diff --git a/net/tipc/bearer.c b/net/tipc/bearer.c
index 878415c43527..48906b5db18e 100644
--- a/net/tipc/bearer.c
+++ b/net/tipc/bearer.c
@@ -45,6 +45,7 @@
 #include "udp_media.h"
 #include "trace.h"
 #include "crypto.h"
+#include <linux/sprintf.h>
 
 #define MAX_ADDR_STR 60
 
diff --git a/net/tipc/crypto.c b/net/tipc/crypto.c
index 43c3f1c971b8..c3fa3830b369 100644
--- a/net/tipc/crypto.c
+++ b/net/tipc/crypto.c
@@ -40,6 +40,8 @@
 #include "crypto.h"
 #include "msg.h"
 #include "bcast.h"
+#include <linux/hex.h>
+#include <linux/sprintf.h>
 
 #define TIPC_TX_GRACE_PERIOD	msecs_to_jiffies(5000) /* 5s */
 #define TIPC_TX_LASTING_TIME	msecs_to_jiffies(10000) /* 10s */
diff --git a/net/tipc/discover.c b/net/tipc/discover.c
index 685389d4b245..6c302c9f7788 100644
--- a/net/tipc/discover.c
+++ b/net/tipc/discover.c
@@ -37,6 +37,7 @@
 #include "core.h"
 #include "node.h"
 #include "discover.h"
+#include <linux/sprintf.h>
 
 /* min delay during bearer start up */
 #define TIPC_DISC_INIT	msecs_to_jiffies(125)
diff --git a/net/tipc/eth_media.c b/net/tipc/eth_media.c
index cb0d185e06af..3b91f7ba1525 100644
--- a/net/tipc/eth_media.c
+++ b/net/tipc/eth_media.c
@@ -36,6 +36,7 @@
 
 #include "core.h"
 #include "bearer.h"
+#include <linux/sprintf.h>
 
 /* Convert Ethernet address (media address format) to string */
 static int tipc_eth_addr2str(struct tipc_media_addr *addr,
diff --git a/net/tipc/ib_media.c b/net/tipc/ib_media.c
index b9ad0434c3cd..f9720ca8442c 100644
--- a/net/tipc/ib_media.c
+++ b/net/tipc/ib_media.c
@@ -41,6 +41,7 @@
 #include <linux/if_infiniband.h>
 #include "core.h"
 #include "bearer.h"
+#include <linux/sprintf.h>
 
 #define TIPC_MAX_IB_LINK_WIN 500
 
diff --git a/net/tipc/link.c b/net/tipc/link.c
index 0716eb5c8a31..0fbaea70385d 100644
--- a/net/tipc/link.c
+++ b/net/tipc/link.c
@@ -45,6 +45,7 @@
 #include "monitor.h"
 #include "trace.h"
 #include "crypto.h"
+#include <linux/sprintf.h>
 
 #include <linux/pkt_sched.h>
 
diff --git a/net/tipc/netlink_compat.c b/net/tipc/netlink_compat.c
index 079aebb16ed8..6a6b2567091e 100644
--- a/net/tipc/netlink_compat.c
+++ b/net/tipc/netlink_compat.c
@@ -38,6 +38,7 @@
 #include "socket.h"
 #include "node.h"
 #include "net.h"
+#include <linux/sprintf.h>
 #include <net/genetlink.h>
 #include <linux/string_helpers.h>
 #include <linux/tipc_config.h>
diff --git a/net/tipc/node.c b/net/tipc/node.c
index c1e890a82434..dac7957e6133 100644
--- a/net/tipc/node.c
+++ b/net/tipc/node.c
@@ -45,6 +45,7 @@
 #include "netlink.h"
 #include "trace.h"
 #include "crypto.h"
+#include <linux/sprintf.h>
 
 #define INVALID_NODE_SIG	0x10000
 #define NODE_CLEANUP_AFTER	300000
diff --git a/net/tipc/socket.c b/net/tipc/socket.c
index 7e4135db5816..4855f9c4c39e 100644
--- a/net/tipc/socket.c
+++ b/net/tipc/socket.c
@@ -37,6 +37,7 @@
 
 #include <linux/rhashtable.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <trace/events/sock.h>
 
 #include "core.h"
diff --git a/net/tipc/trace.c b/net/tipc/trace.c
index 7d2931521e0e..726e3d8da87d 100644
--- a/net/tipc/trace.c
+++ b/net/tipc/trace.c
@@ -35,6 +35,7 @@
 
 #define CREATE_TRACE_POINTS
 #include "trace.h"
+#include <linux/sprintf.h>
 
 /*
  * socket tuples for filtering in socket traces:
diff --git a/net/tipc/udp_media.c b/net/tipc/udp_media.c
index f892b0903dba..5736984dae27 100644
--- a/net/tipc/udp_media.c
+++ b/net/tipc/udp_media.c
@@ -34,6 +34,7 @@
 
 #include <linux/socket.h>
 #include <linux/ip.h>
+#include <linux/sprintf.h>
 #include <linux/udp.h>
 #include <linux/inet.h>
 #include <linux/inetdevice.h>
diff --git a/net/tls/tls_main.c b/net/tls/tls_main.c
index 1c2c6800949d..b44c8a80870f 100644
--- a/net/tls/tls_main.c
+++ b/net/tls/tls_main.c
@@ -35,6 +35,7 @@
 
 #include <net/tcp.h>
 #include <net/inet_common.h>
+#include <linux/bvec.h>
 #include <linux/highmem.h>
 #include <linux/netdevice.h>
 #include <linux/sched/signal.h>
diff --git a/net/tls/tls_sw.c b/net/tls/tls_sw.c
index 9fbc70200cd0..0ec83ac1986c 100644
--- a/net/tls/tls_sw.c
+++ b/net/tls/tls_sw.c
@@ -36,6 +36,7 @@
  */
 
 #include <linux/bug.h>
+#include <linux/completion.h>
 #include <linux/sched/signal.h>
 #include <linux/module.h>
 #include <linux/kernel.h>
diff --git a/net/unix/af_unix.c b/net/unix/af_unix.c
index 4892e9428c9f..9a968c8a668e 100644
--- a/net/unix/af_unix.c
+++ b/net/unix/af_unix.c
@@ -82,6 +82,7 @@
 #include <linux/signal.h>
 #include <linux/sched/signal.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/stat.h>
 #include <linux/dcache.h>
diff --git a/net/wireless/core.c b/net/wireless/core.c
index 3fb1b637352a..724fe7a9609a 100644
--- a/net/wireless/core.c
+++ b/net/wireless/core.c
@@ -22,6 +22,7 @@
 #include <linux/etherdevice.h>
 #include <linux/rtnetlink.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <net/genetlink.h>
 #include <net/cfg80211.h>
 #include "nl80211.h"
diff --git a/net/wireless/debugfs.c b/net/wireless/debugfs.c
index 40e49074e2ee..6334f62f95c8 100644
--- a/net/wireless/debugfs.c
+++ b/net/wireless/debugfs.c
@@ -10,6 +10,8 @@
 #include <linux/slab.h>
 #include "core.h"
 #include "debugfs.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #define DEBUGFS_READONLY_FILE(name, buflen, fmt, value...)		\
 static ssize_t name## _read(struct file *file, char __user *userbuf,	\
diff --git a/net/wireless/mlme.c b/net/wireless/mlme.c
index 4052041a19ea..5f28229f6d93 100644
--- a/net/wireless/mlme.c
+++ b/net/wireless/mlme.c
@@ -13,6 +13,7 @@
 #include <linux/netdevice.h>
 #include <linux/nl80211.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wireless.h>
 #include <net/cfg80211.h>
 #include <net/iw_handler.h>
diff --git a/net/wireless/reg.c b/net/wireless/reg.c
index 2741b626919a..fc7a69046d31 100644
--- a/net/wireless/reg.c
+++ b/net/wireless/reg.c
@@ -54,6 +54,7 @@
 #include <linux/ctype.h>
 #include <linux/nl80211.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/verification.h>
 #include <linux/moduleparam.h>
 #include <linux/firmware.h>
diff --git a/net/wireless/scan.c b/net/wireless/scan.c
index 04039e9dbd05..497c4117daa0 100644
--- a/net/wireless/scan.c
+++ b/net/wireless/scan.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/netdevice.h>
+#include <linux/sprintf.h>
 #include <linux/wireless.h>
 #include <linux/nl80211.h>
 #include <linux/etherdevice.h>
diff --git a/net/wireless/sysfs.c b/net/wireless/sysfs.c
index 565511a3f461..aba790b10e61 100644
--- a/net/wireless/sysfs.c
+++ b/net/wireless/sysfs.c
@@ -13,6 +13,7 @@
 #include <linux/netdevice.h>
 #include <linux/nl80211.h>
 #include <linux/rtnetlink.h>
+#include <linux/sprintf.h>
 #include <net/cfg80211.h>
 #include "sysfs.h"
 #include "core.h"
diff --git a/net/xdp/xsk.c b/net/xdp/xsk.c
index a339e9a1b557..c80e96caf52c 100644
--- a/net/xdp/xsk.c
+++ b/net/xdp/xsk.c
@@ -18,6 +18,7 @@
 #include <linux/sched/task.h>
 #include <linux/socket.h>
 #include <linux/file.h>
+#include <linux/highmem.h> // for kmap_local_page()
 #include <linux/uaccess.h>
 #include <linux/net.h>
 #include <linux/netdevice.h>
diff --git a/net/xfrm/espintcp.c b/net/xfrm/espintcp.c
index d3b3f9e720b3..82111d769328 100644
--- a/net/xfrm/espintcp.c
+++ b/net/xfrm/espintcp.c
@@ -4,6 +4,7 @@
 #include <net/xfrm.h>
 #include <net/esp.h>
 #include <net/espintcp.h>
+#include <linux/bvec.h>
 #include <linux/skmsg.h>
 #include <net/inet_common.h>
 #include <trace/events/sock.h>
diff --git a/net/xfrm/xfrm_state.c b/net/xfrm/xfrm_state.c
index 0c306473a79d..be34e1a744d6 100644
--- a/net/xfrm/xfrm_state.c
+++ b/net/xfrm/xfrm_state.c
@@ -27,6 +27,7 @@
 #include <linux/slab.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/hrtimer.h>
 
 #include <crypto/aead.h>
 
diff --git a/samples/ftrace/ftrace-direct-modify.c b/samples/ftrace/ftrace-direct-modify.c
index 81220390851a..92f6240f9c47 100644
--- a/samples/ftrace/ftrace-direct-modify.c
+++ b/samples/ftrace/ftrace-direct-modify.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/module.h>
+#include <linux/kernel.h> // for trace_printk()
 #include <linux/kthread.h>
 #include <linux/ftrace.h>
 #ifndef CONFIG_ARM64
diff --git a/samples/ftrace/ftrace-direct-multi-modify.c b/samples/ftrace/ftrace-direct-multi-modify.c
index f943e40d57fd..21c54f6dd184 100644
--- a/samples/ftrace/ftrace-direct-multi-modify.c
+++ b/samples/ftrace/ftrace-direct-multi-modify.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/module.h>
+#include <linux/kernel.h> // for trace_printk()
 #include <linux/kthread.h>
 #include <linux/ftrace.h>
 #ifndef CONFIG_ARM64
diff --git a/samples/ftrace/ftrace-direct-multi.c b/samples/ftrace/ftrace-direct-multi.c
index aed6df2927ce..1762f3d9d600 100644
--- a/samples/ftrace/ftrace-direct-multi.c
+++ b/samples/ftrace/ftrace-direct-multi.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/module.h>
 
+#include <linux/kernel.h> // for trace_printk()
 #include <linux/mm.h> /* for handle_mm_fault() */
 #include <linux/ftrace.h>
 #include <linux/sched/stat.h>
diff --git a/samples/ftrace/ftrace-direct-too.c b/samples/ftrace/ftrace-direct-too.c
index 6ff546a5d7eb..ffb401c98151 100644
--- a/samples/ftrace/ftrace-direct-too.c
+++ b/samples/ftrace/ftrace-direct-too.c
@@ -1,4 +1,5 @@
 // SPDX-License-Identifier: GPL-2.0-only
+#include <linux/kernel.h> // for trace_printk()
 #include <linux/module.h>
 
 #include <linux/mm.h> /* for handle_mm_fault() */
diff --git a/samples/ftrace/ftrace-direct.c b/samples/ftrace/ftrace-direct.c
index ef0945670e1e..62fbac04064a 100644
--- a/samples/ftrace/ftrace-direct.c
+++ b/samples/ftrace/ftrace-direct.c
@@ -1,4 +1,5 @@
 // SPDX-License-Identifier: GPL-2.0-only
+#include <linux/kernel.h> // for trace_printk()
 #include <linux/module.h>
 
 #include <linux/sched.h> /* for wake_up_process() */
diff --git a/samples/kobject/kobject-example.c b/samples/kobject/kobject-example.c
index 96678ed73216..f8f9bc4a00de 100644
--- a/samples/kobject/kobject-example.c
+++ b/samples/kobject/kobject-example.c
@@ -6,6 +6,7 @@
  * Copyright (C) 2007 Novell Inc.
  */
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 #include <linux/module.h>
diff --git a/samples/kobject/kset-example.c b/samples/kobject/kset-example.c
index 342452282719..3dd3ac4b986d 100644
--- a/samples/kobject/kset-example.c
+++ b/samples/kobject/kset-example.c
@@ -6,6 +6,7 @@
  * Copyright (C) 2007 Novell Inc.
  */
 #include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <linux/string.h>
 #include <linux/sysfs.h>
 #include <linux/slab.h>
diff --git a/samples/trace_printk/trace-printk.c b/samples/trace_printk/trace-printk.c
index cfc159580263..73448b8839c3 100644
--- a/samples/trace_printk/trace-printk.c
+++ b/samples/trace_printk/trace-printk.c
@@ -1,5 +1,6 @@
 // SPDX-License-Identifier: GPL-2.0-only
 #include <linux/module.h>
+#include <linux/kernel.h> // for trace_printk()
 #include <linux/kthread.h>
 #include <linux/irq_work.h>
 
diff --git a/samples/vfio-mdev/mtty.c b/samples/vfio-mdev/mtty.c
index 2284b3751240..c2c9b09b0cf9 100644
--- a/samples/vfio-mdev/mtty.c
+++ b/samples/vfio-mdev/mtty.c
@@ -20,6 +20,7 @@
 #include <linux/sched.h>
 #include <linux/wait.h>
 #include <linux/vfio.h>
+#include <linux/idr.h>
 #include <linux/iommu.h>
 #include <linux/sysfs.h>
 #include <linux/ctype.h>
diff --git a/security/apparmor/apparmorfs.c b/security/apparmor/apparmorfs.c
index bcfea073e3f2..4d1de0f2e381 100644
--- a/security/apparmor/apparmorfs.c
+++ b/security/apparmor/apparmorfs.c
@@ -10,6 +10,7 @@
 
 #include <linux/ctype.h>
 #include <linux/security.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/init.h>
 #include <linux/seq_file.h>
diff --git a/security/apparmor/lib.c b/security/apparmor/lib.c
index cd569fbbfe36..7a8893473ec1 100644
--- a/security/apparmor/lib.c
+++ b/security/apparmor/lib.c
@@ -11,6 +11,7 @@
 #include <linux/ctype.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/vmalloc.h>
 
diff --git a/security/apparmor/lsm.c b/security/apparmor/lsm.c
index 98e1150bee9d..4a35022965b7 100644
--- a/security/apparmor/lsm.c
+++ b/security/apparmor/lsm.c
@@ -16,6 +16,8 @@
 #include <linux/namei.h>
 #include <linux/ptrace.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/sysctl.h>
 #include <linux/audit.h>
 #include <linux/user_namespace.h>
diff --git a/security/apparmor/policy.c b/security/apparmor/policy.c
index 957654d253dd..37a567cb7f75 100644
--- a/security/apparmor/policy.c
+++ b/security/apparmor/policy.c
@@ -70,6 +70,7 @@
 
 #include <linux/slab.h>
 #include <linux/spinlock.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/cred.h>
 #include <linux/rculist.h>
diff --git a/security/apparmor/procattr.c b/security/apparmor/procattr.c
index e3857e3d7c6c..f85223d1b5ca 100644
--- a/security/apparmor/procattr.c
+++ b/security/apparmor/procattr.c
@@ -14,6 +14,7 @@
 #include "include/policy_ns.h"
 #include "include/domain.h"
 #include "include/procattr.h"
+#include <linux/kstrtox.h>
 
 
 /**
diff --git a/security/device_cgroup.c b/security/device_cgroup.c
index dc4df7475081..526ceb3f2af2 100644
--- a/security/device_cgroup.c
+++ b/security/device_cgroup.c
@@ -9,7 +9,9 @@
 #include <linux/device_cgroup.h>
 #include <linux/cgroup.h>
 #include <linux/ctype.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
diff --git a/security/integrity/digsig_asymmetric.c b/security/integrity/digsig_asymmetric.c
index 895f4b9ce8c6..e0c95035329f 100644
--- a/security/integrity/digsig_asymmetric.c
+++ b/security/integrity/digsig_asymmetric.c
@@ -8,6 +8,7 @@
 
 #include <linux/err.h>
 #include <linux/ratelimit.h>
+#include <linux/sprintf.h>
 #include <linux/key-type.h>
 #include <crypto/public_key.h>
 #include <crypto/hash_info.h>
diff --git a/security/integrity/evm/evm_crypto.c b/security/integrity/evm/evm_crypto.c
index b1ffd4cc0b44..c5ec6fd2f98e 100644
--- a/security/integrity/evm/evm_crypto.c
+++ b/security/integrity/evm/evm_crypto.c
@@ -14,6 +14,7 @@
 
 #include <linux/export.h>
 #include <linux/crypto.h>
+#include <linux/hex.h>
 #include <linux/xattr.h>
 #include <linux/evm.h>
 #include <keys/encrypted-type.h>
diff --git a/security/integrity/evm/evm_secfs.c b/security/integrity/evm/evm_secfs.c
index 9b907c2fee60..eb9fc5ba302a 100644
--- a/security/integrity/evm/evm_secfs.c
+++ b/security/integrity/evm/evm_secfs.c
@@ -11,6 +11,8 @@
  */
 
 #include <linux/audit.h>
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/init.h>
 #include <linux/mutex.h>
diff --git a/security/integrity/ima/ima_api.c b/security/integrity/ima/ima_api.c
index 597ea0c4d72f..b79c81f5dc10 100644
--- a/security/integrity/ima/ima_api.c
+++ b/security/integrity/ima/ima_api.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/file.h>
 #include <linux/fs.h>
+#include <linux/hex.h>
 #include <linux/xattr.h>
 #include <linux/evm.h>
 #include <linux/fsverity.h>
diff --git a/security/integrity/ima/ima_fs.c b/security/integrity/ima/ima_fs.c
index cd1683dad3bf..a2012f16a031 100644
--- a/security/integrity/ima/ima_fs.c
+++ b/security/integrity/ima/ima_fs.c
@@ -20,6 +20,7 @@
 #include <linux/rculist.h>
 #include <linux/rcupdate.h>
 #include <linux/parser.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 
 #include "ima.h"
diff --git a/security/integrity/ima/ima_mok.c b/security/integrity/ima/ima_mok.c
index 95cc31525c57..2d770de15b62 100644
--- a/security/integrity/ima/ima_mok.c
+++ b/security/integrity/ima/ima_mok.c
@@ -13,6 +13,7 @@
 #include <linux/err.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/uidgid.h>
 #include <keys/system_keyring.h>
 
 
diff --git a/security/integrity/ima/ima_policy.c b/security/integrity/ima/ima_policy.c
index f69062617754..bbbcf7e4bd01 100644
--- a/security/integrity/ima/ima_policy.c
+++ b/security/integrity/ima/ima_policy.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/list.h>
 #include <linux/kernel_read_file.h>
 #include <linux/fs.h>
@@ -17,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/rculist.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
 #include <linux/ima.h>
 
 #include "ima.h"
diff --git a/security/integrity/ima/ima_queue.c b/security/integrity/ima/ima_queue.c
index 532da87ce519..5fe96734a445 100644
--- a/security/integrity/ima/ima_queue.c
+++ b/security/integrity/ima/ima_queue.c
@@ -17,6 +17,7 @@
 
 #include <linux/rculist.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include "ima.h"
 
 #define AUDIT_CAUSE_LEN_MAX 32
diff --git a/security/integrity/ima/ima_template_lib.c b/security/integrity/ima/ima_template_lib.c
index 6cd0add524cd..693b84418b69 100644
--- a/security/integrity/ima/ima_template_lib.c
+++ b/security/integrity/ima/ima_template_lib.c
@@ -10,6 +10,7 @@
  */
 
 #include "ima_template_lib.h"
+#include <linux/sprintf.h>
 #include <linux/xattr.h>
 #include <linux/evm.h>
 
diff --git a/security/integrity/integrity_audit.c b/security/integrity/integrity_audit.c
index 0ec5e4c22cb2..ccd634dd0c7a 100644
--- a/security/integrity/integrity_audit.c
+++ b/security/integrity/integrity_audit.c
@@ -10,6 +10,7 @@
 #include <linux/fs.h>
 #include <linux/gfp.h>
 #include <linux/audit.h>
+#include <linux/kstrtox.h>
 #include "integrity.h"
 
 static int integrity_audit_info;
diff --git a/security/keys/encrypted-keys/encrypted.c b/security/keys/encrypted-keys/encrypted.c
index 8af2136069d2..a953201d6391 100644
--- a/security/keys/encrypted-keys/encrypted.c
+++ b/security/keys/encrypted-keys/encrypted.c
@@ -13,9 +13,12 @@
 
 #include <linux/uaccess.h>
 #include <linux/module.h>
+#include <linux/hex.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/parser.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/err.h>
 #include <keys/user-type.h>
diff --git a/security/keys/gc.c b/security/keys/gc.c
index eaddaceda14e..179cd88be63d 100644
--- a/security/keys/gc.c
+++ b/security/keys/gc.c
@@ -7,6 +7,8 @@
 
 #include <linux/slab.h>
 #include <linux/security.h>
+#include <linux/timekeeping.h>
+#include <linux/workqueue.h>
 #include <keys/keyring-type.h>
 #include "internal.h"
 
diff --git a/security/keys/keyctl.c b/security/keys/keyctl.c
index 10ba439968f7..b15b913ae96f 100644
--- a/security/keys/keyctl.c
+++ b/security/keys/keyctl.c
@@ -9,6 +9,7 @@
 #include <linux/sched.h>
 #include <linux/sched/task.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/syscalls.h>
 #include <linux/key.h>
 #include <linux/keyctl.h>
diff --git a/security/keys/permission.c b/security/keys/permission.c
index 4a61f804e80f..16267eb85373 100644
--- a/security/keys/permission.c
+++ b/security/keys/permission.c
@@ -7,6 +7,7 @@
 
 #include <linux/export.h>
 #include <linux/security.h>
+#include <linux/timekeeping.h>
 #include "internal.h"
 
 /**
diff --git a/security/keys/persistent.c b/security/keys/persistent.c
index 97af230aa4b2..79158fafa852 100644
--- a/security/keys/persistent.c
+++ b/security/keys/persistent.c
@@ -7,6 +7,7 @@
 
 #include <linux/user_namespace.h>
 #include <linux/cred.h>
+#include <linux/sprintf.h>
 
 #include "internal.h"
 
diff --git a/security/keys/proc.c b/security/keys/proc.c
index 4f4e2c1824f1..2f0f4eaacd77 100644
--- a/security/keys/proc.c
+++ b/security/keys/proc.c
@@ -10,6 +10,8 @@
 #include <linux/fs.h>
 #include <linux/proc_fs.h>
 #include <linux/seq_file.h>
+#include <linux/sprintf.h>
+#include <linux/timekeeping.h> // for ktime_get_real_seconds()
 #include <asm/errno.h>
 #include "internal.h"
 
diff --git a/security/keys/process_keys.c b/security/keys/process_keys.c
index b5d5333ab330..473bf1c10bad 100644
--- a/security/keys/process_keys.c
+++ b/security/keys/process_keys.c
@@ -13,6 +13,7 @@
 #include <linux/err.h>
 #include <linux/mutex.h>
 #include <linux/security.h>
+#include <linux/sprintf.h>
 #include <linux/user_namespace.h>
 #include <linux/uaccess.h>
 #include <linux/init_task.h>
diff --git a/security/keys/request_key.c b/security/keys/request_key.c
index a7673ad86d18..14e7fd8cd694 100644
--- a/security/keys/request_key.c
+++ b/security/keys/request_key.c
@@ -13,6 +13,7 @@
 #include <linux/err.h>
 #include <linux/keyctl.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <net/net_namespace.h>
 #include "internal.h"
 #include <keys/request_key_auth-type.h>
diff --git a/security/keys/request_key_auth.c b/security/keys/request_key_auth.c
index 8f33cd170e42..76268d64475d 100644
--- a/security/keys/request_key_auth.c
+++ b/security/keys/request_key_auth.c
@@ -11,6 +11,7 @@
 #include <linux/err.h>
 #include <linux/seq_file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include "internal.h"
 #include <keys/request_key_auth-type.h>
diff --git a/security/keys/trusted-keys/trusted_core.c b/security/keys/trusted-keys/trusted_core.c
index fee1ab2c734d..7328894b8065 100644
--- a/security/keys/trusted-keys/trusted_core.c
+++ b/security/keys/trusted-keys/trusted_core.c
@@ -13,8 +13,10 @@
 #include <keys/trusted_tpm.h>
 #include <linux/capability.h>
 #include <linux/err.h>
+#include <linux/hex.h>
 #include <linux/init.h>
 #include <linux/key-type.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/parser.h>
 #include <linux/random.h>
diff --git a/security/keys/trusted-keys/trusted_tpm1.c b/security/keys/trusted-keys/trusted_tpm1.c
index aa108bea6739..141e26290be8 100644
--- a/security/keys/trusted-keys/trusted_tpm1.c
+++ b/security/keys/trusted-keys/trusted_tpm1.c
@@ -7,7 +7,10 @@
  */
 
 #include <crypto/hash_info.h>
+#include <linux/device.h> // for put_device()
+#include <linux/hex.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/parser.h>
 #include <linux/string.h>
diff --git a/security/loadpin/loadpin.c b/security/loadpin/loadpin.c
index 8e93cda130f1..e8f189db71f1 100644
--- a/security/loadpin/loadpin.c
+++ b/security/loadpin/loadpin.c
@@ -11,6 +11,7 @@
 
 #include <linux/module.h>
 #include <linux/fs.h>
+#include <linux/hex.h>
 #include <linux/kernel_read_file.h>
 #include <linux/lsm_hooks.h>
 #include <linux/mount.h>
diff --git a/security/lockdown/lockdown.c b/security/lockdown/lockdown.c
index cd84d8ea1dfb..121e8869a48c 100644
--- a/security/lockdown/lockdown.c
+++ b/security/lockdown/lockdown.c
@@ -13,6 +13,7 @@
 #include <linux/security.h>
 #include <linux/export.h>
 #include <linux/lsm_hooks.h>
+#include <linux/sprintf.h>
 #include <uapi/linux/lsm.h>
 
 static enum lockdown_reason kernel_locked_down;
diff --git a/security/safesetid/securityfs.c b/security/safesetid/securityfs.c
index 25310468bcdd..f95752f06f01 100644
--- a/security/safesetid/securityfs.c
+++ b/security/safesetid/securityfs.c
@@ -16,6 +16,7 @@
 
 #include <linux/security.h>
 #include <linux/cred.h>
+#include <linux/kstrtox.h>
 
 #include "lsm.h"
 
diff --git a/security/security.c b/security/security.c
index c41ad69a7f19..38a3e76ca0ab 100644
--- a/security/security.c
+++ b/security/security.c
@@ -27,6 +27,7 @@
 #include <linux/mount.h>
 #include <linux/personality.h>
 #include <linux/backing-dev.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/msg.h>
 #include <net/flow.h>
diff --git a/security/selinux/avc.c b/security/selinux/avc.c
index 32eb67fb3e42..b7ff0f7b2e11 100644
--- a/security/selinux/avc.c
+++ b/security/selinux/avc.c
@@ -20,6 +20,7 @@
 #include <linux/skbuff.h>
 #include <linux/percpu.h>
 #include <linux/list.h>
+#include <linux/sprintf.h>
 #include <net/sock.h>
 #include <linux/un.h>
 #include <net/af_unix.h>
diff --git a/security/selinux/hooks.c b/security/selinux/hooks.c
index 6c81ca1a696e..b159f0d56ffa 100644
--- a/security/selinux/hooks.c
+++ b/security/selinux/hooks.c
@@ -26,6 +26,7 @@
 #include <linux/kernel.h>
 #include <linux/kernel_read_file.h>
 #include <linux/errno.h>
+#include <linux/kstrtox.h>
 #include <linux/sched/signal.h>
 #include <linux/sched/task.h>
 #include <linux/lsm_hooks.h>
diff --git a/security/selinux/selinuxfs.c b/security/selinux/selinuxfs.c
index 0619a1cbbfbe..2f9c960791d8 100644
--- a/security/selinux/selinuxfs.c
+++ b/security/selinux/selinuxfs.c
@@ -15,6 +15,7 @@
 #include <linux/kernel.h>
 #include <linux/pagemap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/fs.h>
 #include <linux/fs_context.h>
diff --git a/security/selinux/ss/services.c b/security/selinux/ss/services.c
index e88b1b6c4adb..3c515c8a343a 100644
--- a/security/selinux/ss/services.c
+++ b/security/selinux/ss/services.c
@@ -39,6 +39,7 @@
  */
 #include <linux/kernel.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/spinlock.h>
 #include <linux/rcupdate.h>
diff --git a/security/selinux/ss/sidtab.c b/security/selinux/ss/sidtab.c
index 732fd8e22a12..8549d9ecf84c 100644
--- a/security/selinux/ss/sidtab.c
+++ b/security/selinux/ss/sidtab.c
@@ -19,6 +19,7 @@
 #include "security.h"
 #include "sidtab.h"
 #include "services.h"
+#include <linux/sprintf.h>
 
 struct sidtab_str_cache {
 	struct rcu_head rcu_member;
diff --git a/security/smack/smackfs.c b/security/smack/smackfs.c
index e22aad7604e8..f4c49e390cdd 100644
--- a/security/smack/smackfs.c
+++ b/security/smack/smackfs.c
@@ -13,6 +13,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/security.h>
 #include <linux/mutex.h>
diff --git a/security/tomoyo/audit.c b/security/tomoyo/audit.c
index 610c1536cf70..3cb7fee8580e 100644
--- a/security/tomoyo/audit.c
+++ b/security/tomoyo/audit.c
@@ -7,6 +7,7 @@
 
 #include "common.h"
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 /**
  * tomoyo_print_bprm - Print "struct linux_binprm" for auditing.
diff --git a/security/tomoyo/common.c b/security/tomoyo/common.c
index 57ee70ae50f2..4c34c4036f4c 100644
--- a/security/tomoyo/common.c
+++ b/security/tomoyo/common.c
@@ -5,9 +5,12 @@
  * Copyright (C) 2005-2011  NTT DATA CORPORATION
  */
 
+#include <linux/kstrtox.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <linux/slab.h>
 #include <linux/security.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include "common.h"
 
diff --git a/security/tomoyo/domain.c b/security/tomoyo/domain.c
index 90b53500a236..188fba83f4fe 100644
--- a/security/tomoyo/domain.c
+++ b/security/tomoyo/domain.c
@@ -9,6 +9,7 @@
 
 #include <linux/binfmts.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/rculist.h>
 
 /* Variables definitions.*/
diff --git a/security/tomoyo/realpath.c b/security/tomoyo/realpath.c
index 1c483ee7f93d..ebcc6bbfb173 100644
--- a/security/tomoyo/realpath.c
+++ b/security/tomoyo/realpath.c
@@ -6,6 +6,7 @@
  */
 
 #include "common.h"
+#include <linux/kstrtox.h>
 #include <linux/magic.h>
 #include <linux/proc_fs.h>
 
diff --git a/security/tomoyo/util.c b/security/tomoyo/util.c
index 6799b1122c9d..15bdbbd47c39 100644
--- a/security/tomoyo/util.c
+++ b/security/tomoyo/util.c
@@ -6,7 +6,9 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/rculist.h>
+#include <linux/kstrtox.h>
 
 #include "common.h"
 
diff --git a/sound/ac97/bus.c b/sound/ac97/bus.c
index 5e46b972a3da..ef2618bf3753 100644
--- a/sound/ac97/bus.c
+++ b/sound/ac97/bus.c
@@ -14,6 +14,7 @@
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <sound/ac97_codec.h>
 #include <sound/ac97/codec.h>
diff --git a/sound/aoa/fabrics/layout.c b/sound/aoa/fabrics/layout.c
index 0cd19a05db19..fedde8c8c020 100644
--- a/sound/aoa/fabrics/layout.c
+++ b/sound/aoa/fabrics/layout.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include "../aoa.h"
 #include "../soundbus/soundbus.h"
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Johannes Berg <johannes@sipsolutions.net>");
 MODULE_LICENSE("GPL");
diff --git a/sound/aoa/soundbus/i2sbus/core.c b/sound/aoa/soundbus/i2sbus/core.c
index 3f49a9e28bfc..c264edd53dfa 100644
--- a/sound/aoa/soundbus/i2sbus/core.c
+++ b/sound/aoa/soundbus/i2sbus/core.c
@@ -13,6 +13,7 @@
 #include <linux/of.h>
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 
diff --git a/sound/aoa/soundbus/i2sbus/pcm.c b/sound/aoa/soundbus/i2sbus/pcm.c
index 07df5cc0f2d7..dcbcc19d3320 100644
--- a/sound/aoa/soundbus/i2sbus/pcm.c
+++ b/sound/aoa/soundbus/i2sbus/pcm.c
@@ -10,6 +10,7 @@
 #include <linux/slab.h>
 #include <sound/core.h>
 #include <asm/macio.h>
+#include <linux/completion.h>
 #include <linux/pci.h>
 #include <linux/module.h>
 #include "../soundbus.h"
diff --git a/sound/arm/aaci.c b/sound/arm/aaci.c
index 0817ad21af74..42108b8a1743 100644
--- a/sound/arm/aaci.c
+++ b/sound/arm/aaci.c
@@ -16,6 +16,7 @@
 #include <linux/err.h>
 #include <linux/amba/bus.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/sound/arm/pxa2xx-ac97.c b/sound/arm/pxa2xx-ac97.c
index 2d83ad91f968..d1756c5b622c 100644
--- a/sound/arm/pxa2xx-ac97.c
+++ b/sound/arm/pxa2xx-ac97.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/dmaengine.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/atmel/ac97c.c b/sound/atmel/ac97c.c
index 402b5f66dcc3..7e647f8280ce 100644
--- a/sound/atmel/ac97c.c
+++ b/sound/atmel/ac97c.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/io.h>
 
diff --git a/sound/core/compress_offload.c b/sound/core/compress_offload.c
index 619371aa9964..94379e1b9a57 100644
--- a/sound/core/compress_offload.c
+++ b/sound/core/compress_offload.c
@@ -21,6 +21,7 @@
 #include <linux/poll.h>
 #include <linux/slab.h>
 #include <linux/sched.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/uio.h>
 #include <linux/uaccess.h>
diff --git a/sound/core/control_led.c b/sound/core/control_led.c
index a78eb48927c7..eb512f680f6a 100644
--- a/sound/core/control_led.c
+++ b/sound/core/control_led.c
@@ -7,8 +7,10 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/leds.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
+#include <linux/kstrtox.h>
 
 MODULE_AUTHOR("Jaroslav Kysela <perex@perex.cz>");
 MODULE_DESCRIPTION("ALSA control interface to LED trigger code.");
diff --git a/sound/core/ctljack.c b/sound/core/ctljack.c
index 709b1a9c2caa..a36189f6ad22 100644
--- a/sound/core/ctljack.c
+++ b/sound/core/ctljack.c
@@ -7,6 +7,7 @@
 
 #include <linux/kernel.h>
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 
diff --git a/sound/core/info.c b/sound/core/info.c
index e2f302e55bbb..807711da2a6e 100644
--- a/sound/core/info.c
+++ b/sound/core/info.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/mm.h>
 #include <linux/slab.h>
diff --git a/sound/core/init.c b/sound/core/init.c
index 22c0d217b860..2f837b0d3007 100644
--- a/sound/core/init.c
+++ b/sound/core/init.c
@@ -10,6 +10,7 @@
 #include <linux/device.h>
 #include <linux/file.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/ctype.h>
 #include <linux/pm.h>
diff --git a/sound/core/jack.c b/sound/core/jack.c
index e0f034e7275c..6251d0834752 100644
--- a/sound/core/jack.c
+++ b/sound/core/jack.c
@@ -6,11 +6,14 @@
  */
 
 #include <linux/input.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/ctype.h>
 #include <linux/mm.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/sound/core/oss/mixer_oss.c b/sound/core/oss/mixer_oss.c
index dae2da380835..f4cb74cd89bf 100644
--- a/sound/core/oss/mixer_oss.c
+++ b/sound/core/oss/mixer_oss.c
@@ -5,7 +5,9 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/string.h>
 #include <linux/module.h>
diff --git a/sound/core/oss/pcm_oss.c b/sound/core/oss/pcm_oss.c
index 728c211142d1..33618847b323 100644
--- a/sound/core/oss/pcm_oss.c
+++ b/sound/core/oss/pcm_oss.c
@@ -12,8 +12,10 @@
 #endif
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
diff --git a/sound/core/oss/pcm_plugin.c b/sound/core/oss/pcm_plugin.c
index 82e180c776ae..6b8a2b101e69 100644
--- a/sound/core/oss/pcm_plugin.c
+++ b/sound/core/oss/pcm_plugin.c
@@ -31,6 +31,7 @@
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include "pcm_plugin.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define snd_pcm_plug_first(plug) ((plug)->runtime->oss.plugin_first)
 #define snd_pcm_plug_last(plug) ((plug)->runtime->oss.plugin_last)
diff --git a/sound/core/pcm.c b/sound/core/pcm.c
index d9b338088d10..c62fd4f7d715 100644
--- a/sound/core/pcm.c
+++ b/sound/core/pcm.c
@@ -5,8 +5,10 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/mutex.h>
 #include <linux/device.h>
diff --git a/sound/core/pcm_lib.c b/sound/core/pcm_lib.c
index 41103e5c43ce..8c50223ad10a 100644
--- a/sound/core/pcm_lib.c
+++ b/sound/core/pcm_lib.c
@@ -7,6 +7,7 @@
 
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/math64.h>
 #include <linux/export.h>
diff --git a/sound/core/pcm_memory.c b/sound/core/pcm_memory.c
index a0b951471699..b7d6297e1da3 100644
--- a/sound/core/pcm_memory.c
+++ b/sound/core/pcm_memory.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/io.h>
+#include <linux/kstrtox.h>
 #include <linux/time.h>
 #include <linux/init.h>
 #include <linux/slab.h>
diff --git a/sound/core/pcm_timer.c b/sound/core/pcm_timer.c
index c43484b22b34..fda0f36303d7 100644
--- a/sound/core/pcm_timer.c
+++ b/sound/core/pcm_timer.c
@@ -6,6 +6,7 @@
 
 #include <linux/time.h>
 #include <linux/gcd.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/timer.h>
diff --git a/sound/core/rawmidi.c b/sound/core/rawmidi.c
index 1431cb997808..1c8420cf5285 100644
--- a/sound/core/rawmidi.c
+++ b/sound/core/rawmidi.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/sched/signal.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/mutex.h>
diff --git a/sound/core/seq/oss/seq_oss_init.c b/sound/core/seq/oss/seq_oss_init.c
index 42d4e7535a82..8b14aba8c9a1 100644
--- a/sound/core/seq/oss/seq_oss_init.c
+++ b/sound/core/seq/oss/seq_oss_init.c
@@ -18,6 +18,7 @@
 #include <linux/export.h>
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 /*
diff --git a/sound/core/seq/seq_clientmgr.c b/sound/core/seq/seq_clientmgr.c
index 42a705141050..40888f95a10f 100644
--- a/sound/core/seq/seq_clientmgr.c
+++ b/sound/core/seq/seq_clientmgr.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/export.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/minors.h>
 #include <linux/kmod.h>
diff --git a/sound/core/seq/seq_dummy.c b/sound/core/seq/seq_dummy.c
index 9308194b2d9a..e19517ae5bda 100644
--- a/sound/core/seq/seq_dummy.c
+++ b/sound/core/seq/seq_dummy.c
@@ -7,6 +7,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include "seq_clientmgr.h"
 #include <sound/initval.h>
diff --git a/sound/core/seq/seq_midi.c b/sound/core/seq/seq_midi.c
index 18320a248aa7..c8ddae487dcb 100644
--- a/sound/core/seq/seq_midi.c
+++ b/sound/core/seq/seq_midi.c
@@ -15,6 +15,7 @@ Possible options for midisynth module:
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/sound/core/seq/seq_ports.c b/sound/core/seq/seq_ports.c
index f3f14ff0f80f..f01446c4890a 100644
--- a/sound/core/seq/seq_ports.c
+++ b/sound/core/seq/seq_ports.c
@@ -11,6 +11,7 @@
 #include "seq_system.h"
 #include "seq_ports.h"
 #include "seq_clientmgr.h"
+#include <linux/sprintf.h>
 
 /*
 
diff --git a/sound/core/seq/seq_timer.c b/sound/core/seq/seq_timer.c
index 9863be6fd43e..c31919c789d5 100644
--- a/sound/core/seq/seq_timer.c
+++ b/sound/core/seq/seq_timer.c
@@ -10,6 +10,7 @@
 #include "seq_timer.h"
 #include "seq_queue.h"
 #include "seq_info.h"
+#include <linux/sprintf.h>
 
 /* allowed sequencer timer frequencies, in Hz */
 #define MIN_FREQUENCY		10
diff --git a/sound/core/seq/seq_ump_client.c b/sound/core/seq/seq_ump_client.c
index 2db371d79930..487c1c15dbec 100644
--- a/sound/core/seq/seq_ump_client.c
+++ b/sound/core/seq/seq_ump_client.c
@@ -5,6 +5,7 @@
 #include <linux/slab.h>
 #include <linux/errno.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/module.h>
 #include <asm/byteorder.h>
diff --git a/sound/core/seq/seq_virmidi.c b/sound/core/seq/seq_virmidi.c
index 1b9260108e48..78b07835b42f 100644
--- a/sound/core/seq/seq_virmidi.c
+++ b/sound/core/seq/seq_virmidi.c
@@ -22,6 +22,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/module.h>
 #include <linux/slab.h>
diff --git a/sound/core/timer.c b/sound/core/timer.c
index e6e551d4a29e..2c50a0bb8c27 100644
--- a/sound/core/timer.c
+++ b/sound/core/timer.c
@@ -7,6 +7,7 @@
 #include <linux/delay.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/mutex.h>
 #include <linux/device.h>
diff --git a/sound/core/ump.c b/sound/core/ump.c
index 3bef1944e955..909c6810978e 100644
--- a/sound/core/ump.c
+++ b/sound/core/ump.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/export.h>
 #include <linux/mm.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/rawmidi.h>
 #include <sound/ump.h>
diff --git a/sound/drivers/aloop.c b/sound/drivers/aloop.c
index 1c65e0a3b13c..78da4281320f 100644
--- a/sound/drivers/aloop.c
+++ b/sound/drivers/aloop.c
@@ -17,9 +17,12 @@
 
 #include <linux/init.h>
 #include <linux/jiffies.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <sound/core.h>
diff --git a/sound/drivers/dummy.c b/sound/drivers/dummy.c
index 4317677ba24a..773c7a5a549d 100644
--- a/sound/drivers/dummy.c
+++ b/sound/drivers/dummy.c
@@ -6,9 +6,11 @@
 
 #include <linux/init.h>
 #include <linux/err.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/jiffies.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/hrtimer.h>
diff --git a/sound/drivers/mpu401/mpu401.c b/sound/drivers/mpu401/mpu401.c
index 3398aee33baa..9591cfa59532 100644
--- a/sound/drivers/mpu401/mpu401.c
+++ b/sound/drivers/mpu401/mpu401.c
@@ -10,6 +10,7 @@
 #include <linux/err.h>
 #include <linux/platform_device.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/mpu401.h>
 #include <sound/initval.h>
diff --git a/sound/drivers/mpu401/mpu401_uart.c b/sound/drivers/mpu401/mpu401_uart.c
index f435b9b4ae24..4b988ddd8f1d 100644
--- a/sound/drivers/mpu401/mpu401_uart.c
+++ b/sound/drivers/mpu401/mpu401_uart.c
@@ -21,6 +21,7 @@
 #include <linux/module.h>
 #include <linux/interrupt.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/mpu401.h>
 
diff --git a/sound/drivers/mtpav.c b/sound/drivers/mtpav.c
index f212f233ea61..5ca24574611c 100644
--- a/sound/drivers/mtpav.c
+++ b/sound/drivers/mtpav.c
@@ -42,6 +42,7 @@
 #include <linux/ioport.h>
 #include <linux/io.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/rawmidi.h>
diff --git a/sound/drivers/mts64.c b/sound/drivers/mts64.c
index 5cfd0e99a13f..c5b40f3704b1 100644
--- a/sound/drivers/mts64.c
+++ b/sound/drivers/mts64.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/rawmidi.h>
diff --git a/sound/drivers/opl3/opl3_oss.c b/sound/drivers/opl3/opl3_oss.c
index 7645365eec89..b7276246cc3f 100644
--- a/sound/drivers/opl3/opl3_oss.c
+++ b/sound/drivers/opl3/opl3_oss.c
@@ -7,6 +7,7 @@
 
 #include <linux/export.h>
 #include "opl3_voice.h"
+#include <linux/sprintf.h>
 
 static int snd_opl3_open_seq_oss(struct snd_seq_oss_arg *arg, void *closure);
 static int snd_opl3_close_seq_oss(struct snd_seq_oss_arg *arg);
diff --git a/sound/drivers/opl3/opl3_seq.c b/sound/drivers/opl3/opl3_seq.c
index 75de1299c3dc..998f835879eb 100644
--- a/sound/drivers/opl3/opl3_seq.c
+++ b/sound/drivers/opl3/opl3_seq.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/moduleparam.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/initval.h>
 
 MODULE_AUTHOR("Uros Bizjak <uros@kss-loka.si>");
diff --git a/sound/drivers/pcmtest.c b/sound/drivers/pcmtest.c
index b8bff5522bce..e7e69ec3c8b5 100644
--- a/sound/drivers/pcmtest.c
+++ b/sound/drivers/pcmtest.c
@@ -32,12 +32,14 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/core.h>
 #include <linux/dma-mapping.h>
 #include <linux/platform_device.h>
 #include <linux/timer.h>
 #include <linux/random.h>
+#include <linux/sprintf.h>
 #include <linux/debugfs.h>
 #include <linux/delay.h>
 
diff --git a/sound/drivers/pcsp/pcsp.c b/sound/drivers/pcsp/pcsp.c
index c7be1c395bcb..4f03121b05e9 100644
--- a/sound/drivers/pcsp/pcsp.c
+++ b/sound/drivers/pcsp/pcsp.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/pcm.h>
diff --git a/sound/drivers/pcsp/pcsp_mixer.c b/sound/drivers/pcsp/pcsp_mixer.c
index da33e5b620a7..ef8954e6a42c 100644
--- a/sound/drivers/pcsp/pcsp_mixer.c
+++ b/sound/drivers/pcsp/pcsp_mixer.c
@@ -9,6 +9,7 @@
 #include <sound/core.h>
 #include <sound/control.h>
 #include "pcsp.h"
+#include <linux/sprintf.h>
 
 
 static int pcsp_enable_info(struct snd_kcontrol *kcontrol,
diff --git a/sound/drivers/portman2x4.c b/sound/drivers/portman2x4.c
index 619e3f594477..0151dfc8a421 100644
--- a/sound/drivers/portman2x4.c
+++ b/sound/drivers/portman2x4.c
@@ -31,6 +31,7 @@
 #include <linux/delay.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/rawmidi.h>
diff --git a/sound/drivers/serial-generic.c b/sound/drivers/serial-generic.c
index 36409a56c675..5662d5f296d6 100644
--- a/sound/drivers/serial-generic.c
+++ b/sound/drivers/serial-generic.c
@@ -21,6 +21,7 @@
 #include <linux/serial_reg.h>
 #include <linux/slab.h>
 #include <linux/dev_printk.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/rawmidi.h>
diff --git a/sound/drivers/serial-u16550.c b/sound/drivers/serial-u16550.c
index 3cbc7a4adcb4..da55af21d6c5 100644
--- a/sound/drivers/serial-u16550.c
+++ b/sound/drivers/serial-u16550.c
@@ -24,6 +24,7 @@
 #include <linux/slab.h>
 #include <linux/ioport.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/io.h>
 #include <sound/core.h>
 #include <sound/rawmidi.h>
diff --git a/sound/drivers/virmidi.c b/sound/drivers/virmidi.c
index 58012de90c38..6c05361c25b4 100644
--- a/sound/drivers/virmidi.c
+++ b/sound/drivers/virmidi.c
@@ -28,6 +28,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/err.h>
 #include <linux/platform_device.h>
diff --git a/sound/drivers/vx/vx_core.c b/sound/drivers/vx/vx_core.c
index 18901e5bcfcf..6cdeefc6a806 100644
--- a/sound/drivers/vx/vx_core.c
+++ b/sound/drivers/vx/vx_core.c
@@ -15,6 +15,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/asoundef.h>
diff --git a/sound/drivers/vx/vx_hwdep.c b/sound/drivers/vx/vx_hwdep.c
index efbb644edba1..edb9728f0ed4 100644
--- a/sound/drivers/vx/vx_hwdep.c
+++ b/sound/drivers/vx/vx_hwdep.c
@@ -10,6 +10,7 @@
 #include <linux/device.h>
 #include <linux/firmware.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
 #include <sound/core.h>
diff --git a/sound/drivers/vx/vx_mixer.c b/sound/drivers/vx/vx_mixer.c
index 53d78eb13c53..a602f830fc9e 100644
--- a/sound/drivers/vx/vx_mixer.c
+++ b/sound/drivers/vx/vx_mixer.c
@@ -12,6 +12,7 @@
 #include <sound/tlv.h>
 #include <sound/vx_core.h>
 #include "vx_cmd.h"
+#include <linux/sprintf.h>
 
 
 /*
diff --git a/sound/firewire/bebob/bebob.c b/sound/firewire/bebob/bebob.c
index 2ba5962beb30..21e4a611fd61 100644
--- a/sound/firewire/bebob/bebob.c
+++ b/sound/firewire/bebob/bebob.c
@@ -12,6 +12,7 @@
  */
 
 #include "bebob.h"
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("BridgeCo BeBoB driver");
 MODULE_AUTHOR("Takashi Sakamoto <o-takashi@sakamocchi.jp>");
diff --git a/sound/firewire/bebob/bebob_midi.c b/sound/firewire/bebob/bebob_midi.c
index b1425bf98c3b..2ae3851e81e5 100644
--- a/sound/firewire/bebob/bebob_midi.c
+++ b/sound/firewire/bebob/bebob_midi.c
@@ -6,6 +6,7 @@
  */
 
 #include "bebob.h"
+#include <linux/sprintf.h>
 
 static int midi_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/bebob/bebob_pcm.c b/sound/firewire/bebob/bebob_pcm.c
index ce49eef0fcba..789bb8d21277 100644
--- a/sound/firewire/bebob/bebob_pcm.c
+++ b/sound/firewire/bebob/bebob_pcm.c
@@ -6,6 +6,7 @@
  */
 
 #include "./bebob.h"
+#include <linux/sprintf.h>
 
 static int
 hw_rule_rate(struct snd_pcm_hw_params *params, struct snd_pcm_hw_rule *rule)
diff --git a/sound/firewire/dice/dice-midi.c b/sound/firewire/dice/dice-midi.c
index 78988e44b8bc..5b583f2a0132 100644
--- a/sound/firewire/dice/dice-midi.c
+++ b/sound/firewire/dice/dice-midi.c
@@ -5,6 +5,7 @@
  * Copyright (c) 2014 Takashi Sakamoto
  */
 #include "dice.h"
+#include <linux/sprintf.h>
 
 static int midi_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/dice/dice-stream.c b/sound/firewire/dice/dice-stream.c
index 4c677c8546c7..79bd9bde3a92 100644
--- a/sound/firewire/dice/dice-stream.c
+++ b/sound/firewire/dice/dice-stream.c
@@ -7,6 +7,7 @@
  */
 
 #include "dice.h"
+#include <linux/completion.h>
 
 #define	READY_TIMEOUT_MS	200
 #define NOTIFICATION_TIMEOUT_MS	100
diff --git a/sound/firewire/dice/dice-transaction.c b/sound/firewire/dice/dice-transaction.c
index 92941ef83cd5..4808cf3631ee 100644
--- a/sound/firewire/dice/dice-transaction.c
+++ b/sound/firewire/dice/dice-transaction.c
@@ -7,6 +7,7 @@
  */
 
 #include "dice.h"
+#include <linux/completion.h>
 
 static u64 get_subaddr(struct snd_dice *dice, enum snd_dice_addr_type type,
 		       u64 offset)
diff --git a/sound/firewire/dice/dice.c b/sound/firewire/dice/dice.c
index d362e4251c68..1266b704b8cb 100644
--- a/sound/firewire/dice/dice.c
+++ b/sound/firewire/dice/dice.c
@@ -6,6 +6,8 @@
  */
 
 #include "dice.h"
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("DICE driver");
 MODULE_AUTHOR("Clemens Ladisch <clemens@ladisch.de>");
diff --git a/sound/firewire/digi00x/digi00x-midi.c b/sound/firewire/digi00x/digi00x-midi.c
index 8f4bace16050..560b374ed9f4 100644
--- a/sound/firewire/digi00x/digi00x-midi.c
+++ b/sound/firewire/digi00x/digi00x-midi.c
@@ -6,6 +6,7 @@
  */
 
 #include "digi00x.h"
+#include <linux/sprintf.h>
 
 static int midi_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/digi00x/digi00x-pcm.c b/sound/firewire/digi00x/digi00x-pcm.c
index 3bd1575c9d9c..27ef1a521746 100644
--- a/sound/firewire/digi00x/digi00x-pcm.c
+++ b/sound/firewire/digi00x/digi00x-pcm.c
@@ -6,6 +6,7 @@
  */
 
 #include "digi00x.h"
+#include <linux/sprintf.h>
 
 static int hw_rule_rate(struct snd_pcm_hw_params *params,
 			struct snd_pcm_hw_rule *rule)
diff --git a/sound/firewire/digi00x/digi00x.c b/sound/firewire/digi00x/digi00x.c
index 704ae2a5316b..1fc4158aca57 100644
--- a/sound/firewire/digi00x/digi00x.c
+++ b/sound/firewire/digi00x/digi00x.c
@@ -6,6 +6,7 @@
  */
 
 #include "digi00x.h"
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("Digidesign Digi 002/003 family Driver");
 MODULE_AUTHOR("Takashi Sakamoto <o-takashi@sakamocchi.jp>");
diff --git a/sound/firewire/fireface/ff-midi.c b/sound/firewire/fireface/ff-midi.c
index da3054fdcc7d..5881586bdb50 100644
--- a/sound/firewire/fireface/ff-midi.c
+++ b/sound/firewire/fireface/ff-midi.c
@@ -6,6 +6,7 @@
  */
 
 #include "ff.h"
+#include <linux/sprintf.h>
 
 static int midi_capture_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/fireface/ff-pcm.c b/sound/firewire/fireface/ff-pcm.c
index ec915671a79b..1c193f073342 100644
--- a/sound/firewire/fireface/ff-pcm.c
+++ b/sound/firewire/fireface/ff-pcm.c
@@ -6,6 +6,7 @@
  */
 
 #include "ff.h"
+#include <linux/sprintf.h>
 
 static int hw_rule_rate(struct snd_pcm_hw_params *params,
 			struct snd_pcm_hw_rule *rule)
diff --git a/sound/firewire/fireface/ff.c b/sound/firewire/fireface/ff.c
index 6e84e4787259..ddb49ce943f1 100644
--- a/sound/firewire/fireface/ff.c
+++ b/sound/firewire/fireface/ff.c
@@ -6,6 +6,7 @@
  */
 
 #include "ff.h"
+#include <linux/sprintf.h>
 
 #define OUI_RME	0x000a35
 
diff --git a/sound/firewire/fireworks/fireworks.c b/sound/firewire/fireworks/fireworks.c
index e3ed4e094ccd..be1533a7ef5b 100644
--- a/sound/firewire/fireworks/fireworks.c
+++ b/sound/firewire/fireworks/fireworks.c
@@ -15,6 +15,7 @@
  */
 
 #include "fireworks.h"
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("Echo Fireworks driver");
 MODULE_AUTHOR("Takashi Sakamoto <o-takashi@sakamocchi.jp>");
diff --git a/sound/firewire/fireworks/fireworks_midi.c b/sound/firewire/fireworks/fireworks_midi.c
index 350bf4d299c2..5f8d8774ec3c 100644
--- a/sound/firewire/fireworks/fireworks_midi.c
+++ b/sound/firewire/fireworks/fireworks_midi.c
@@ -6,6 +6,7 @@
  * Copyright (c) 2013-2014 Takashi Sakamoto
  */
 #include "fireworks.h"
+#include <linux/sprintf.h>
 
 static int midi_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/fireworks/fireworks_pcm.c b/sound/firewire/fireworks/fireworks_pcm.c
index c3c21860b245..c654198bdc29 100644
--- a/sound/firewire/fireworks/fireworks_pcm.c
+++ b/sound/firewire/fireworks/fireworks_pcm.c
@@ -6,6 +6,7 @@
  * Copyright (c) 2013-2014 Takashi Sakamoto
  */
 #include "./fireworks.h"
+#include <linux/sprintf.h>
 
 /*
  * NOTE:
diff --git a/sound/firewire/isight.c b/sound/firewire/isight.c
index 806f82c9ceee..2ef282e7ff53 100644
--- a/sound/firewire/isight.c
+++ b/sound/firewire/isight.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <sound/control.h>
 #include <sound/core.h>
diff --git a/sound/firewire/motu/motu-midi.c b/sound/firewire/motu/motu-midi.c
index eebc7e790ee2..3a4a21053cf0 100644
--- a/sound/firewire/motu/motu-midi.c
+++ b/sound/firewire/motu/motu-midi.c
@@ -5,6 +5,7 @@
  * Copyright (c) 2015-2017 Takashi Sakamoto <o-takashi@sakamocchi.jp>
  */
 #include "motu.h"
+#include <linux/sprintf.h>
 
 static int midi_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/motu/motu.c b/sound/firewire/motu/motu.c
index d14ab5dd5bea..2a68b880e961 100644
--- a/sound/firewire/motu/motu.c
+++ b/sound/firewire/motu/motu.c
@@ -6,6 +6,7 @@
  */
 
 #include "motu.h"
+#include <linux/sprintf.h>
 
 #define OUI_MOTU	0x0001f2
 
diff --git a/sound/firewire/oxfw/oxfw-midi.c b/sound/firewire/oxfw/oxfw-midi.c
index c215fa6f7a03..c3f4dd217310 100644
--- a/sound/firewire/oxfw/oxfw-midi.c
+++ b/sound/firewire/oxfw/oxfw-midi.c
@@ -6,6 +6,7 @@
  */
 
 #include "oxfw.h"
+#include <linux/sprintf.h>
 
 static int midi_capture_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/oxfw/oxfw-scs1x.c b/sound/firewire/oxfw/oxfw-scs1x.c
index 21412a3ca9f4..beb679d882e4 100644
--- a/sound/firewire/oxfw/oxfw-scs1x.c
+++ b/sound/firewire/oxfw/oxfw-scs1x.c
@@ -7,6 +7,7 @@
  */
 
 #include "oxfw.h"
+#include <linux/sprintf.h>
 
 #define HSS1394_ADDRESS			0xc007dedadadaULL
 #define HSS1394_MAX_PACKET_SIZE		64
diff --git a/sound/firewire/oxfw/oxfw.c b/sound/firewire/oxfw/oxfw.c
index 241a697ce26b..3bd776b5db51 100644
--- a/sound/firewire/oxfw/oxfw.c
+++ b/sound/firewire/oxfw/oxfw.c
@@ -6,6 +6,7 @@
  */
 
 #include "oxfw.h"
+#include <linux/sprintf.h>
 
 #define OXFORD_FIRMWARE_ID_ADDRESS	(CSR_REGISTER_BASE + 0x50000)
 /* 0x970?vvvv or 0x971?vvvv, where vvvv = firmware version */
diff --git a/sound/firewire/tascam/tascam-midi.c b/sound/firewire/tascam/tascam-midi.c
index c57fac4f1968..f87938fe0335 100644
--- a/sound/firewire/tascam/tascam-midi.c
+++ b/sound/firewire/tascam/tascam-midi.c
@@ -6,6 +6,7 @@
  */
 
 #include "tascam.h"
+#include <linux/sprintf.h>
 
 static int midi_capture_open(struct snd_rawmidi_substream *substream)
 {
diff --git a/sound/firewire/tascam/tascam-pcm.c b/sound/firewire/tascam/tascam-pcm.c
index f6da571707ac..3e5dc0ca1dcc 100644
--- a/sound/firewire/tascam/tascam-pcm.c
+++ b/sound/firewire/tascam/tascam-pcm.c
@@ -6,6 +6,7 @@
  */
 
 #include "tascam.h"
+#include <linux/sprintf.h>
 
 static int pcm_init_hw_params(struct snd_tscm *tscm,
 			      struct snd_pcm_substream *substream)
diff --git a/sound/firewire/tascam/tascam.c b/sound/firewire/tascam/tascam.c
index 86880089de28..bfa61b4c0f35 100644
--- a/sound/firewire/tascam/tascam.c
+++ b/sound/firewire/tascam/tascam.c
@@ -6,6 +6,7 @@
  */
 
 #include "tascam.h"
+#include <linux/sprintf.h>
 
 MODULE_DESCRIPTION("TASCAM FireWire series Driver");
 MODULE_AUTHOR("Takashi Sakamoto <o-takashi@sakamocchi.jp>");
diff --git a/sound/hda/ext/hdac_ext_controller.c b/sound/hda/ext/hdac_ext_controller.c
index 6199bb60ccf0..4fbc10d7d364 100644
--- a/sound/hda/ext/hdac_ext_controller.c
+++ b/sound/hda/ext/hdac_ext_controller.c
@@ -11,6 +11,7 @@
 
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/hda_register.h>
 #include <sound/hdaudio_ext.h>
 
diff --git a/sound/hda/hdac_component.c b/sound/hda/hdac_component.c
index bb37e7e0bd79..422c25dbe564 100644
--- a/sound/hda/hdac_component.c
+++ b/sound/hda/hdac_component.c
@@ -1,6 +1,7 @@
 // SPDX-License-Identifier: GPL-2.0
 // hdac_component.c - routines for sync between HD-A core and DRM driver
 
+#include <linux/completion.h>
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/pci.h>
diff --git a/sound/hda/hdac_device.c b/sound/hda/hdac_device.c
index 7f7b67fe1b65..bbfaa6a46c52 100644
--- a/sound/hda/hdac_device.c
+++ b/sound/hda/hdac_device.c
@@ -7,6 +7,7 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/module.h>
 #include <linux/export.h>
 #include <linux/pm_runtime.h>
diff --git a/sound/hda/hdac_sysfs.c b/sound/hda/hdac_sysfs.c
index 60b0a70428d5..71b344762404 100644
--- a/sound/hda/hdac_sysfs.c
+++ b/sound/hda/hdac_sysfs.c
@@ -6,6 +6,8 @@
 #include <linux/slab.h>
 #include <linux/sysfs.h>
 #include <linux/device.h>
+#include <linux/kobject.h>
+#include <linux/kstrtox.h>
 #include <sound/core.h>
 #include <sound/hdaudio.h>
 #include "local.h"
diff --git a/sound/hda/hdmi_chmap.c b/sound/hda/hdmi_chmap.c
index 5d8e1d944b0a..8a38dfd831ff 100644
--- a/sound/hda/hdmi_chmap.c
+++ b/sound/hda/hdmi_chmap.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/control.h>
 #include <sound/tlv.h>
 #include <sound/hda_chmap.h>
diff --git a/sound/hda/intel-sdw-acpi.c b/sound/hda/intel-sdw-acpi.c
index 5f60658c6051..f6079e00e000 100644
--- a/sound/hda/intel-sdw-acpi.c
+++ b/sound/hda/intel-sdw-acpi.c
@@ -14,6 +14,7 @@
 #include <linux/fwnode.h>
 #include <linux/module.h>
 #include <linux/soundwire/sdw_intel.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 
 #define SDW_LINK_TYPE		4 /* from Intel ACPI documentation */
diff --git a/sound/isa/ad1816a/ad1816a.c b/sound/isa/ad1816a/ad1816a.c
index 9ac873773129..0d9412357dea 100644
--- a/sound/isa/ad1816a/ad1816a.c
+++ b/sound/isa/ad1816a/ad1816a.c
@@ -7,6 +7,7 @@
 */
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/pnp.h>
diff --git a/sound/isa/ad1848/ad1848.c b/sound/isa/ad1848/ad1848.c
index 401d8df28d87..49d5b344bbfa 100644
--- a/sound/isa/ad1848/ad1848.c
+++ b/sound/isa/ad1848/ad1848.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/err.h>
 #include <linux/isa.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/module.h>
diff --git a/sound/isa/adlib.c b/sound/isa/adlib.c
index f079ba4ef1a0..f7250ab7924f 100644
--- a/sound/isa/adlib.c
+++ b/sound/isa/adlib.c
@@ -6,6 +6,7 @@
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/isa.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/opl3.h>
diff --git a/sound/isa/als100.c b/sound/isa/als100.c
index d582eff64082..e460d9307ac0 100644
--- a/sound/isa/als100.c
+++ b/sound/isa/als100.c
@@ -13,6 +13,7 @@
 */
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/time.h>
 #include <linux/pnp.h>
diff --git a/sound/isa/azt2320.c b/sound/isa/azt2320.c
index 761cd198df2b..dd07891e1686 100644
--- a/sound/isa/azt2320.c
+++ b/sound/isa/azt2320.c
@@ -20,6 +20,7 @@
 #include <linux/io.h>
 #include <linux/delay.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/pnp.h>
diff --git a/sound/isa/cmi8328.c b/sound/isa/cmi8328.c
index 8902cfb830f7..70ea6a05afde 100644
--- a/sound/isa/cmi8328.c
+++ b/sound/isa/cmi8328.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/gameport.h>
 #include <asm/dma.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/wss.h>
 #include <sound/opl3.h>
diff --git a/sound/isa/cmi8330.c b/sound/isa/cmi8330.c
index f209b16c5229..6dccd18b1a3d 100644
--- a/sound/isa/cmi8330.c
+++ b/sound/isa/cmi8330.c
@@ -34,6 +34,7 @@
 #include <linux/isa.h>
 #include <linux/pnp.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/wss.h>
 #include <sound/opl3.h>
diff --git a/sound/isa/cs423x/cs4231.c b/sound/isa/cs423x/cs4231.c
index c87be4be6df1..bc346e2ed25b 100644
--- a/sound/isa/cs423x/cs4231.c
+++ b/sound/isa/cs423x/cs4231.c
@@ -9,6 +9,7 @@
 #include <linux/init.h>
 #include <linux/err.h>
 #include <linux/isa.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/module.h>
diff --git a/sound/isa/cs423x/cs4236.c b/sound/isa/cs423x/cs4236.c
index 7226cbf2d7de..aa5499a733be 100644
--- a/sound/isa/cs423x/cs4236.c
+++ b/sound/isa/cs423x/cs4236.c
@@ -9,6 +9,7 @@
 #include <linux/isa.h>
 #include <linux/pnp.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/wss.h>
 #include <sound/mpu401.h>
diff --git a/sound/isa/es1688/es1688.c b/sound/isa/es1688/es1688.c
index 97728bf45474..166cc23a7e07 100644
--- a/sound/isa/es1688/es1688.c
+++ b/sound/isa/es1688/es1688.c
@@ -8,6 +8,7 @@
 #include <linux/err.h>
 #include <linux/isa.h>
 #include <linux/isapnp.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/module.h>
diff --git a/sound/isa/es1688/es1688_lib.c b/sound/isa/es1688/es1688_lib.c
index 8554cb2263c1..47da1385bf45 100644
--- a/sound/isa/es1688/es1688_lib.c
+++ b/sound/isa/es1688/es1688_lib.c
@@ -11,6 +11,7 @@
 #include <linux/ioport.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/es1688.h>
 #include <sound/initval.h>
diff --git a/sound/isa/es18xx.c b/sound/isa/es18xx.c
index 0a32845b1017..79d27e9b83e4 100644
--- a/sound/isa/es18xx.c
+++ b/sound/isa/es18xx.c
@@ -70,6 +70,7 @@
 #include <linux/module.h>
 #include <linux/delay.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <asm/dma.h>
 #include <sound/core.h>
diff --git a/sound/isa/galaxy/galaxy.c b/sound/isa/galaxy/galaxy.c
index 3164eb8510fa..5540c1bcf0d3 100644
--- a/sound/isa/galaxy/galaxy.c
+++ b/sound/isa/galaxy/galaxy.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <asm/processor.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/wss.h>
diff --git a/sound/isa/gus/gus_mem_proc.c b/sound/isa/gus/gus_mem_proc.c
index b5e1d1649500..39157aef51a2 100644
--- a/sound/isa/gus/gus_mem_proc.c
+++ b/sound/isa/gus/gus_mem_proc.c
@@ -5,6 +5,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/gus.h>
 #include <sound/info.h>
diff --git a/sound/isa/gus/gus_pcm.c b/sound/isa/gus/gus_pcm.c
index 850544725da7..d959d10cd432 100644
--- a/sound/isa/gus/gus_pcm.c
+++ b/sound/isa/gus/gus_pcm.c
@@ -13,6 +13,7 @@
 #include <asm/dma.h>
 #include <linux/slab.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/sound/isa/gus/gusclassic.c b/sound/isa/gus/gusclassic.c
index 09cc53ceea2a..7532dfe78edb 100644
--- a/sound/isa/gus/gusclassic.c
+++ b/sound/isa/gus/gusclassic.c
@@ -8,6 +8,7 @@
 #include <linux/err.h>
 #include <linux/isa.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <asm/dma.h>
diff --git a/sound/isa/gus/gusextreme.c b/sound/isa/gus/gusextreme.c
index 63d9f2d75df0..73e899f10e69 100644
--- a/sound/isa/gus/gusextreme.c
+++ b/sound/isa/gus/gusextreme.c
@@ -8,6 +8,7 @@
 #include <linux/err.h>
 #include <linux/isa.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <asm/dma.h>
diff --git a/sound/isa/gus/gusmax.c b/sound/isa/gus/gusmax.c
index 6834c0560064..23ec429b05b2 100644
--- a/sound/isa/gus/gusmax.c
+++ b/sound/isa/gus/gusmax.c
@@ -8,6 +8,7 @@
 #include <linux/err.h>
 #include <linux/isa.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <asm/dma.h>
diff --git a/sound/isa/gus/interwave.c b/sound/isa/gus/interwave.c
index a04a9d3253f8..f01802ea35cc 100644
--- a/sound/isa/gus/interwave.c
+++ b/sound/isa/gus/interwave.c
@@ -14,6 +14,7 @@
 #include <linux/pnp.h>
 #include <linux/module.h>
 #include <asm/dma.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/gus.h>
 #include <sound/wss.h>
diff --git a/sound/isa/opl3sa2.c b/sound/isa/opl3sa2.c
index bad1490a66a0..10d32689e606 100644
--- a/sound/isa/opl3sa2.c
+++ b/sound/isa/opl3sa2.c
@@ -12,6 +12,7 @@
 #include <linux/pnp.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/wss.h>
 #include <sound/mpu401.h>
diff --git a/sound/isa/opti9xx/miro.c b/sound/isa/opti9xx/miro.c
index 59792f2fada1..8273592a0b36 100644
--- a/sound/isa/opti9xx/miro.c
+++ b/sound/isa/opti9xx/miro.c
@@ -18,6 +18,7 @@
 #include <linux/module.h>
 #include <linux/io.h>
 #include <asm/dma.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/wss.h>
 #include <sound/mpu401.h>
diff --git a/sound/isa/opti9xx/opti92x-ad1848.c b/sound/isa/opti9xx/opti92x-ad1848.c
index c33f67dd5133..f4adcb0a0a89 100644
--- a/sound/isa/opti9xx/opti92x-ad1848.c
+++ b/sound/isa/opti9xx/opti92x-ad1848.c
@@ -19,6 +19,7 @@
 #include <linux/module.h>
 #include <linux/io.h>
 #include <asm/dma.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/tlv.h>
 #include <sound/wss.h>
diff --git a/sound/isa/sb/jazz16.c b/sound/isa/sb/jazz16.c
index 64936c917170..8030ec4f768d 100644
--- a/sound/isa/sb/jazz16.c
+++ b/sound/isa/sb/jazz16.c
@@ -17,6 +17,7 @@
 #include <linux/delay.h>
 #include <asm/dma.h>
 #include <linux/isa.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/mpu401.h>
 #include <sound/opl3.h>
diff --git a/sound/isa/sb/sb16.c b/sound/isa/sb/sb16.c
index e89b095aa282..406bbd3f542a 100644
--- a/sound/isa/sb/sb16.c
+++ b/sound/isa/sb/sb16.c
@@ -10,6 +10,7 @@
 #include <linux/err.h>
 #include <linux/isa.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/sb.h>
 #include <sound/sb16_csp.h>
diff --git a/sound/isa/sb/sb16_csp.c b/sound/isa/sb/sb16_csp.c
index 8d8357019719..658b7eabad77 100644
--- a/sound/isa/sb/sb16_csp.c
+++ b/sound/isa/sb/sb16_csp.c
@@ -13,6 +13,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 #include <sound/info.h>
diff --git a/sound/isa/sb/sb16_main.c b/sound/isa/sb/sb16_main.c
index a9b87e159b2d..98a150b78cff 100644
--- a/sound/isa/sb/sb16_main.c
+++ b/sound/isa/sb/sb16_main.c
@@ -21,6 +21,7 @@
 #include <linux/io.h>
 #include <asm/dma.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <sound/core.h>
diff --git a/sound/isa/sb/sb8.c b/sound/isa/sb/sb8.c
index e5ef1777161f..820b9303f972 100644
--- a/sound/isa/sb/sb8.c
+++ b/sound/isa/sb/sb8.c
@@ -9,6 +9,7 @@
 #include <linux/isa.h>
 #include <linux/ioport.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/sb.h>
 #include <sound/opl3.h>
diff --git a/sound/isa/sb/sb8_main.c b/sound/isa/sb/sb8_main.c
index 2ed176a5a574..fb99f83256b8 100644
--- a/sound/isa/sb/sb8_main.c
+++ b/sound/isa/sb/sb8_main.c
@@ -19,6 +19,7 @@
 #include <linux/io.h>
 #include <asm/dma.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <sound/core.h>
diff --git a/sound/isa/sb/sb_common.c b/sound/isa/sb/sb_common.c
index c0e319d14210..4bd245c54898 100644
--- a/sound/isa/sb/sb_common.c
+++ b/sound/isa/sb/sb_common.c
@@ -13,6 +13,7 @@
 #include <linux/ioport.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/sb.h>
 #include <sound/initval.h>
diff --git a/sound/isa/sc6000.c b/sound/isa/sc6000.c
index 60398fced046..5e43cc1ebe67 100644
--- a/sound/isa/sc6000.c
+++ b/sound/isa/sc6000.c
@@ -17,6 +17,7 @@
 #include <linux/isa.h>
 #include <linux/io.h>
 #include <asm/dma.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/wss.h>
 #include <sound/opl3.h>
diff --git a/sound/isa/sscape.c b/sound/isa/sscape.c
index cc56fafd27b1..75d978fbaeeb 100644
--- a/sound/isa/sscape.c
+++ b/sound/isa/sscape.c
@@ -17,6 +17,7 @@
 #include <linux/spinlock.h>
 #include <linux/module.h>
 #include <asm/dma.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/wss.h>
 #include <sound/mpu401.h>
diff --git a/sound/isa/wavefront/wavefront.c b/sound/isa/wavefront/wavefront.c
index e6e46a0266b0..f2980573f035 100644
--- a/sound/isa/wavefront/wavefront.c
+++ b/sound/isa/wavefront/wavefront.c
@@ -12,6 +12,7 @@
 #include <linux/isa.h>
 #include <linux/pnp.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/opl3.h>
diff --git a/sound/mips/hal2.c b/sound/mips/hal2.c
index 3c26334227bb..7d16c3285474 100644
--- a/sound/mips/hal2.c
+++ b/sound/mips/hal2.c
@@ -14,6 +14,7 @@
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <asm/sgi/hpc3.h>
 #include <asm/sgi/ip22.h>
diff --git a/sound/mips/sgio2audio.c b/sound/mips/sgio2audio.c
index a8551ccdd1bf..e8d1b9c1ca2b 100644
--- a/sound/mips/sgio2audio.c
+++ b/sound/mips/sgio2audio.c
@@ -17,6 +17,7 @@
 #include <linux/io.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 #include <asm/ip32/ip32_ints.h>
 #include <asm/ip32/mace.h>
diff --git a/sound/oss/dmasound/dmasound_atari.c b/sound/oss/dmasound/dmasound_atari.c
index 81c6a9830727..cce75e94b237 100644
--- a/sound/oss/dmasound/dmasound_atari.c
+++ b/sound/oss/dmasound/dmasound_atari.c
@@ -22,6 +22,7 @@
 #include <linux/mm.h>
 #include <linux/spinlock.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 #include <asm/atariints.h>
diff --git a/sound/oss/dmasound/dmasound_core.c b/sound/oss/dmasound/dmasound_core.c
index 164335d3c200..bf4db18a423e 100644
--- a/sound/oss/dmasound/dmasound_core.c
+++ b/sound/oss/dmasound/dmasound_core.c
@@ -183,6 +183,7 @@
 #include <linux/poll.h>
 #include <linux/mutex.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 
diff --git a/sound/oss/dmasound/dmasound_paula.c b/sound/oss/dmasound/dmasound_paula.c
index 0ba8f0c4cd99..22c1b4f65ec6 100644
--- a/sound/oss/dmasound/dmasound_paula.c
+++ b/sound/oss/dmasound/dmasound_paula.c
@@ -23,6 +23,7 @@
 #include <linux/soundcard.h>
 #include <linux/interrupt.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <linux/uaccess.h>
 #include <asm/setup.h>
diff --git a/sound/parisc/harmony.c b/sound/parisc/harmony.c
index db9c296dd688..dfde6bb3721e 100644
--- a/sound/parisc/harmony.c
+++ b/sound/parisc/harmony.c
@@ -24,6 +24,7 @@
 
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/wait.h>
 #include <linux/delay.h>
diff --git a/sound/pci/ac97/ac97_codec.c b/sound/pci/ac97/ac97_codec.c
index 25f93e56cfc7..1d4af754b0b4 100644
--- a/sound/pci/ac97/ac97_codec.c
+++ b/sound/pci/ac97/ac97_codec.c
@@ -9,10 +9,12 @@
 
 #include <linux/delay.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/tlv.h>
diff --git a/sound/pci/ac97/ac97_proc.c b/sound/pci/ac97/ac97_proc.c
index 5426f7bc9884..e14188515444 100644
--- a/sound/pci/ac97/ac97_proc.c
+++ b/sound/pci/ac97/ac97_proc.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/ac97_codec.h>
diff --git a/sound/pci/ad1889.c b/sound/pci/ad1889.c
index 50e30704bf6f..18d927cb8e2b 100644
--- a/sound/pci/ad1889.c
+++ b/sound/pci/ad1889.c
@@ -24,6 +24,7 @@
 #include <linux/pci.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/interrupt.h>
 #include <linux/compiler.h>
 #include <linux/delay.h>
diff --git a/sound/pci/ali5451/ali5451.c b/sound/pci/ali5451/ali5451.c
index 2378a39abaeb..af8f54f6c997 100644
--- a/sound/pci/ali5451/ali5451.c
+++ b/sound/pci/ali5451/ali5451.c
@@ -19,6 +19,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/info.h>
diff --git a/sound/pci/als300.c b/sound/pci/als300.c
index c70aff060120..360617665ab0 100644
--- a/sound/pci/als300.c
+++ b/sound/pci/als300.c
@@ -25,6 +25,7 @@
 #include <linux/interrupt.h>
 #include <linux/slab.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/sound/pci/als4000.c b/sound/pci/als4000.c
index f33aeb692a11..b0313e5cc611 100644
--- a/sound/pci/als4000.c
+++ b/sound/pci/als4000.c
@@ -57,6 +57,7 @@
 #include <linux/gameport.h>
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/rawmidi.h>
diff --git a/sound/pci/asihpi/asihpi.c b/sound/pci/asihpi/asihpi.c
index 001786e2aba1..8e720937708b 100644
--- a/sound/pci/asihpi/asihpi.c
+++ b/sound/pci/asihpi/asihpi.c
@@ -14,6 +14,7 @@
 #include "hpimsginit.h"
 #include "hpioctl.h"
 #include "hpicmn.h"
+#include <linux/sprintf.h>
 
 #include <linux/pci.h>
 #include <linux/init.h>
diff --git a/sound/pci/asihpi/hpidspcd.c b/sound/pci/asihpi/hpidspcd.c
index 9acc0ac75eca..a1260bd5777b 100644
--- a/sound/pci/asihpi/hpidspcd.c
+++ b/sound/pci/asihpi/hpidspcd.c
@@ -12,6 +12,7 @@
 #include "hpidspcd.h"
 #include "hpidebug.h"
 #include "hpi_version.h"
+#include <linux/sprintf.h>
 
 struct dsp_code_private {
 	/**  Firmware descriptor */
diff --git a/sound/pci/atiixp.c b/sound/pci/atiixp.c
index 43d01f1847ed..93ba73e6d1a4 100644
--- a/sound/pci/atiixp.c
+++ b/sound/pci/atiixp.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/pci/atiixp_modem.c b/sound/pci/atiixp_modem.c
index 8864c4c3c7e1..15c041cc9ce8 100644
--- a/sound/pci/atiixp_modem.c
+++ b/sound/pci/atiixp_modem.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/pci/au88x0/au88x0.c b/sound/pci/au88x0/au88x0.c
index 62b10b0e07b1..97ed887ebc38 100644
--- a/sound/pci/au88x0/au88x0.c
+++ b/sound/pci/au88x0/au88x0.c
@@ -22,6 +22,7 @@
 #include <linux/interrupt.h>
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <sound/initval.h>
 
 // module parameters (see "Module Parameters")
diff --git a/sound/pci/au88x0/au88x0_eq.c b/sound/pci/au88x0/au88x0_eq.c
index 71c13100d7ef..55aa17d2d0e9 100644
--- a/sound/pci/au88x0/au88x0_eq.c
+++ b/sound/pci/au88x0/au88x0_eq.c
@@ -27,6 +27,7 @@
 #include "au88x0.h"
 #include "au88x0_eq.h"
 #include "au88x0_eqdata.c"
+#include <linux/sprintf.h>
 
 #define VORTEX_EQ_BASE	 0x2b000
 #define VORTEX_EQ_DEST   (VORTEX_EQ_BASE + 0x410)
diff --git a/sound/pci/au88x0/au88x0_mpu401.c b/sound/pci/au88x0/au88x0_mpu401.c
index 164f6b7039ab..33da0480936d 100644
--- a/sound/pci/au88x0/au88x0_mpu401.c
+++ b/sound/pci/au88x0/au88x0_mpu401.c
@@ -9,6 +9,7 @@
 
 #include <linux/time.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/mpu401.h>
 #include "au88x0.h"
diff --git a/sound/pci/au88x0/au88x0_pcm.c b/sound/pci/au88x0/au88x0_pcm.c
index 546f71220604..d2c4eedb3d42 100644
--- a/sound/pci/au88x0/au88x0_pcm.c
+++ b/sound/pci/au88x0/au88x0_pcm.c
@@ -14,6 +14,7 @@
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include "au88x0.h"
+#include <linux/sprintf.h>
 
 #define VORTEX_PCM_TYPE(x) (x->name[40])
 
diff --git a/sound/pci/aw2/aw2-alsa.c b/sound/pci/aw2/aw2-alsa.c
index 29a4bcdec237..e4013eca0fd5 100644
--- a/sound/pci/aw2/aw2-alsa.c
+++ b/sound/pci/aw2/aw2-alsa.c
@@ -15,6 +15,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/azt3328.c b/sound/pci/azt3328.c
index 431f0026b507..6cfb089876d9 100644
--- a/sound/pci/azt3328.c
+++ b/sound/pci/azt3328.c
@@ -174,6 +174,7 @@
 #include <linux/gameport.h>
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/bt87x.c b/sound/pci/bt87x.c
index 621985bfee5d..9ecc5c2a80eb 100644
--- a/sound/pci/bt87x.c
+++ b/sound/pci/bt87x.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/bitops.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/pci/ca0106/ca0106_main.c b/sound/pci/ca0106/ca0106_main.c
index cf1bac7a435f..f05d5c042ee1 100644
--- a/sound/pci/ca0106/ca0106_main.c
+++ b/sound/pci/ca0106/ca0106_main.c
@@ -128,6 +128,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/ca0106/ca0106_proc.c b/sound/pci/ca0106/ca0106_proc.c
index c99603e137e5..b8ec1637cdef 100644
--- a/sound/pci/ca0106/ca0106_proc.c
+++ b/sound/pci/ca0106/ca0106_proc.c
@@ -51,6 +51,7 @@
 #include <linux/interrupt.h>
 #include <linux/moduleparam.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/cmipci.c b/sound/pci/cmipci.c
index 08e34b184780..10c964e8e759 100644
--- a/sound/pci/cmipci.c
+++ b/sound/pci/cmipci.c
@@ -16,6 +16,7 @@
 #include <linux/gameport.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/info.h>
 #include <sound/control.h>
diff --git a/sound/pci/cs4281.c b/sound/pci/cs4281.c
index 0c9cadf7b3b8..f541ad8c47a7 100644
--- a/sound/pci/cs4281.c
+++ b/sound/pci/cs4281.c
@@ -12,6 +12,7 @@
 #include <linux/slab.h>
 #include <linux/gameport.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/cs46xx/cs46xx.c b/sound/pci/cs46xx/cs46xx.c
index 8634004a606b..32cf525f9ce1 100644
--- a/sound/pci/cs46xx/cs46xx.c
+++ b/sound/pci/cs46xx/cs46xx.c
@@ -11,6 +11,7 @@
 */
 
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/init.h>
 #include <linux/module.h>
diff --git a/sound/pci/cs46xx/cs46xx_lib.c b/sound/pci/cs46xx/cs46xx_lib.c
index f3a94bb537bd..e13331a1e487 100644
--- a/sound/pci/cs46xx/cs46xx_lib.c
+++ b/sound/pci/cs46xx/cs46xx_lib.c
@@ -42,6 +42,7 @@
 #include <linux/export.h>
 #include <linux/module.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/io.h>
 
diff --git a/sound/pci/cs46xx/dsp_spos_scb_lib.c b/sound/pci/cs46xx/dsp_spos_scb_lib.c
index 1f90ca723f4d..f36fa6ce2375 100644
--- a/sound/pci/cs46xx/dsp_spos_scb_lib.c
+++ b/sound/pci/cs46xx/dsp_spos_scb_lib.c
@@ -12,6 +12,7 @@
 #include <linux/pm.h>
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/mutex.h>
 
 #include <sound/core.h>
diff --git a/sound/pci/cs5530.c b/sound/pci/cs5530.c
index 93ff029e6583..7fb69e34d932 100644
--- a/sound/pci/cs5530.c
+++ b/sound/pci/cs5530.c
@@ -31,6 +31,7 @@
 #include <linux/module.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/sb.h>
 #include <sound/initval.h>
diff --git a/sound/pci/cs5535audio/cs5535audio.c b/sound/pci/cs5535audio/cs5535audio.c
index 440b8f9b40c9..f05790337639 100644
--- a/sound/pci/cs5535audio/cs5535audio.c
+++ b/sound/pci/cs5535audio/cs5535audio.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/ctxfi/cthw20k1.c b/sound/pci/ctxfi/cthw20k1.c
index 9edbf5d8c3c7..34fee61c5ca6 100644
--- a/sound/pci/ctxfi/cthw20k1.c
+++ b/sound/pci/ctxfi/cthw20k1.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/pci.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/string.h>
 #include <linux/spinlock.h>
 #include <linux/kernel.h>
diff --git a/sound/pci/ctxfi/cthw20k2.c b/sound/pci/ctxfi/cthw20k2.c
index 55af8ef29838..d0f6e98cc2cf 100644
--- a/sound/pci/ctxfi/cthw20k2.c
+++ b/sound/pci/ctxfi/cthw20k2.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/pci.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/string.h>
 #include <linux/kernel.h>
 #include <linux/interrupt.h>
diff --git a/sound/pci/ctxfi/xfi.c b/sound/pci/ctxfi/xfi.c
index 713d36ea40cb..61b64bd5d91a 100644
--- a/sound/pci/ctxfi/xfi.c
+++ b/sound/pci/ctxfi/xfi.c
@@ -10,6 +10,7 @@
 #include <linux/moduleparam.h>
 #include <linux/pci_ids.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include "ctatc.h"
diff --git a/sound/pci/echoaudio/echoaudio.c b/sound/pci/echoaudio/echoaudio.c
index c70c3ac4e99a..0b6d55c7e9ad 100644
--- a/sound/pci/echoaudio/echoaudio.c
+++ b/sound/pci/echoaudio/echoaudio.c
@@ -6,6 +6,7 @@
  */
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 MODULE_AUTHOR("Giuliano Pochini <pochini@shiny.it>");
 MODULE_LICENSE("GPL v2");
diff --git a/sound/pci/emu10k1/emu10k1.c b/sound/pci/emu10k1/emu10k1.c
index fe72e7d77241..6bbe64ea9493 100644
--- a/sound/pci/emu10k1/emu10k1.c
+++ b/sound/pci/emu10k1/emu10k1.c
@@ -7,6 +7,7 @@
 
 #include <linux/init.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <sound/core.h>
diff --git a/sound/pci/emu10k1/emu10k1x.c b/sound/pci/emu10k1/emu10k1x.c
index 89043392f3ec..101edbacea46 100644
--- a/sound/pci/emu10k1/emu10k1x.c
+++ b/sound/pci/emu10k1/emu10k1x.c
@@ -21,6 +21,7 @@
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/emu10k1/emufx.c b/sound/pci/emu10k1/emufx.c
index 03efc317e05f..4a208d25fb87 100644
--- a/sound/pci/emu10k1/emufx.c
+++ b/sound/pci/emu10k1/emufx.c
@@ -12,6 +12,7 @@
 #include <linux/capability.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/init.h>
 #include <linux/mutex.h>
diff --git a/sound/pci/emu10k1/emuproc.c b/sound/pci/emu10k1/emuproc.c
index 2f80fd91017c..bb6e463801e6 100644
--- a/sound/pci/emu10k1/emuproc.c
+++ b/sound/pci/emu10k1/emuproc.c
@@ -11,6 +11,7 @@
 
 #include <linux/slab.h>
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/emu10k1.h>
 #include "p16v.h"
diff --git a/sound/pci/ens1370.c b/sound/pci/ens1370.c
index 89210b2c7342..e8d88af6304e 100644
--- a/sound/pci/ens1370.c
+++ b/sound/pci/ens1370.c
@@ -21,6 +21,7 @@
 #include <linux/gameport.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/sound/pci/es1938.c b/sound/pci/es1938.c
index ec598ba1a883..18bf934d0045 100644
--- a/sound/pci/es1938.c
+++ b/sound/pci/es1938.c
@@ -41,6 +41,7 @@
 #include <linux/delay.h>
 #include <linux/dma-mapping.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/es1968.c b/sound/pci/es1968.c
index 4bc0f53c223b..4065176881d0 100644
--- a/sound/pci/es1968.c
+++ b/sound/pci/es1968.c
@@ -91,6 +91,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/input.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/fm801.c b/sound/pci/fm801.c
index 62b3cb126c6d..29750e8a1a75 100644
--- a/sound/pci/fm801.c
+++ b/sound/pci/fm801.c
@@ -11,6 +11,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/tlv.h>
diff --git a/sound/pci/hda/cirrus_scodec_test.c b/sound/pci/hda/cirrus_scodec_test.c
index 8ae373676bd1..ae84b65c4d42 100644
--- a/sound/pci/hda/cirrus_scodec_test.c
+++ b/sound/pci/hda/cirrus_scodec_test.c
@@ -9,6 +9,7 @@
 #include <linux/gpio/driver.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include "cirrus_scodec.h"
 
diff --git a/sound/pci/hda/cs35l41_hda.c b/sound/pci/hda/cs35l41_hda.c
index d3fa6e136744..5f07079c07b3 100644
--- a/sound/pci/hda/cs35l41_hda.c
+++ b/sound/pci/hda/cs35l41_hda.c
@@ -9,6 +9,7 @@
 #include <linux/acpi.h>
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <sound/hda_codec.h>
 #include <sound/soc.h>
 #include <linux/pm_runtime.h>
diff --git a/sound/pci/hda/cs35l56_hda.c b/sound/pci/hda/cs35l56_hda.c
index 75a14ba54fcd..af003827a708 100644
--- a/sound/pci/hda/cs35l56_hda.c
+++ b/sound/pci/hda/cs35l56_hda.c
@@ -13,6 +13,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/hda_codec.h>
 #include <sound/tlv.h>
diff --git a/sound/pci/hda/hda_auto_parser.c b/sound/pci/hda/hda_auto_parser.c
index 7c6b1fe8dfcc..8259f949d6df 100644
--- a/sound/pci/hda/hda_auto_parser.c
+++ b/sound/pci/hda/hda_auto_parser.c
@@ -8,6 +8,7 @@
 #include <linux/slab.h>
 #include <linux/export.h>
 #include <linux/sort.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/hda_codec.h>
 #include "hda_local.h"
diff --git a/sound/pci/hda/hda_beep.c b/sound/pci/hda/hda_beep.c
index e63621bcb214..ce8a32e58096 100644
--- a/sound/pci/hda/hda_beep.c
+++ b/sound/pci/hda/hda_beep.c
@@ -8,6 +8,7 @@
 
 #include <linux/input.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/export.h>
 #include <sound/core.h>
diff --git a/sound/pci/hda/hda_bind.c b/sound/pci/hda/hda_bind.c
index b7ca2a83fbb0..e41fc99fe790 100644
--- a/sound/pci/hda/hda_bind.c
+++ b/sound/pci/hda/hda_bind.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/export.h>
 #include <linux/pm.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/hda_codec.h>
 #include "hda_local.h"
diff --git a/sound/pci/hda/hda_codec.c b/sound/pci/hda/hda_codec.c
index a8ed380dc2db..6da00815c1a8 100644
--- a/sound/pci/hda/hda_codec.c
+++ b/sound/pci/hda/hda_codec.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/pm.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/hda_codec.h>
 #include <sound/asoundef.h>
@@ -21,6 +22,7 @@
 #include "hda_local.h"
 #include "hda_beep.h"
 #include "hda_jack.h"
+#include <linux/completion.h>
 #include <sound/hda_hwdep.h>
 #include <sound/hda_component.h>
 
diff --git a/sound/pci/hda/hda_component.c b/sound/pci/hda/hda_component.c
index cd299d7d84ba..e07b628fdf33 100644
--- a/sound/pci/hda/hda_component.c
+++ b/sound/pci/hda/hda_component.c
@@ -10,6 +10,7 @@
 #include <linux/component.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/hda_codec.h>
 #include "hda_component.h"
 #include "hda_local.h"
diff --git a/sound/pci/hda/hda_cs_dsp_ctl.c b/sound/pci/hda/hda_cs_dsp_ctl.c
index 463ca06036bf..cd20da8a3b2a 100644
--- a/sound/pci/hda/hda_cs_dsp_ctl.c
+++ b/sound/pci/hda/hda_cs_dsp_ctl.c
@@ -7,6 +7,7 @@
 // Author: Stefan Binding <sbinding@opensource.cirrus.com>
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <linux/firmware/cirrus/cs_dsp.h>
 #include <linux/firmware/cirrus/wmfw.h>
diff --git a/sound/pci/hda/hda_eld.c b/sound/pci/hda/hda_eld.c
index 1d108ed5c6f2..cebda7f3fd34 100644
--- a/sound/pci/hda/hda_eld.c
+++ b/sound/pci/hda/hda_eld.c
@@ -11,6 +11,7 @@
 
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <asm/unaligned.h>
 #include <sound/hda_chmap.h>
diff --git a/sound/pci/hda/hda_generic.c b/sound/pci/hda/hda_generic.c
index de2a3d08c73c..1ec415564a4b 100644
--- a/sound/pci/hda/hda_generic.c
+++ b/sound/pci/hda/hda_generic.c
@@ -13,6 +13,7 @@
 #include <linux/sort.h>
 #include <linux/delay.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/bitops.h>
 #include <linux/module.h>
diff --git a/sound/pci/hda/hda_hwdep.c b/sound/pci/hda/hda_hwdep.c
index 727f39acedfc..fa52c744ffbe 100644
--- a/sound/pci/hda/hda_hwdep.c
+++ b/sound/pci/hda/hda_hwdep.c
@@ -9,6 +9,7 @@
 #include <linux/slab.h>
 #include <linux/compat.h>
 #include <linux/nospec.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/hda_codec.h>
 #include "hda_local.h"
diff --git a/sound/pci/hda/hda_intel.c b/sound/pci/hda/hda_intel.c
index 1b550c42db09..b17f3213f011 100644
--- a/sound/pci/hda/hda_intel.c
+++ b/sound/pci/hda/hda_intel.c
@@ -33,6 +33,8 @@
 #include <linux/io.h>
 #include <linux/pm_runtime.h>
 #include <linux/clocksource.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/completion.h>
 #include <linux/acpi.h>
diff --git a/sound/pci/hda/hda_proc.c b/sound/pci/hda/hda_proc.c
index 00c2eeb2c472..eb211ee26027 100644
--- a/sound/pci/hda/hda_proc.c
+++ b/sound/pci/hda/hda_proc.c
@@ -9,6 +9,7 @@
 
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <linux/module.h>
 #include <sound/hda_codec.h>
diff --git a/sound/pci/hda/hda_sysfs.c b/sound/pci/hda/hda_sysfs.c
index 69ebc37a4d6f..eeb4a7d12941 100644
--- a/sound/pci/hda/hda_sysfs.c
+++ b/sound/pci/hda/hda_sysfs.c
@@ -8,10 +8,12 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/compat.h>
 #include <linux/mutex.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/export.h>
 #include <sound/core.h>
diff --git a/sound/pci/hda/hda_tegra.c b/sound/pci/hda/hda_tegra.c
index d967e70a7058..70cd98ace09e 100644
--- a/sound/pci/hda/hda_tegra.c
+++ b/sound/pci/hda/hda_tegra.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/string.h>
 #include <linux/pm_runtime.h>
diff --git a/sound/pci/hda/patch_ca0132.c b/sound/pci/hda/patch_ca0132.c
index aa312441604f..ae62a60b549a 100644
--- a/sound/pci/hda/patch_ca0132.c
+++ b/sound/pci/hda/patch_ca0132.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/firmware.h>
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/io.h>
 #include <linux/pci.h>
diff --git a/sound/pci/hda/patch_hdmi.c b/sound/pci/hda/patch_hdmi.c
index 495d63101186..14e64f52bf41 100644
--- a/sound/pci/hda/patch_hdmi.c
+++ b/sound/pci/hda/patch_hdmi.c
@@ -22,6 +22,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/asoundef.h>
diff --git a/sound/pci/hda/patch_realtek.c b/sound/pci/hda/patch_realtek.c
index 453eed002428..ebe4a7555203 100644
--- a/sound/pci/hda/patch_realtek.c
+++ b/sound/pci/hda/patch_realtek.c
@@ -20,6 +20,7 @@
 #include <linux/input.h>
 #include <linux/leds.h>
 #include <linux/ctype.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/hda_codec.h>
diff --git a/sound/pci/hda/patch_sigmatel.c b/sound/pci/hda/patch_sigmatel.c
index 61258b0aac8d..1a1b3d89c666 100644
--- a/sound/pci/hda/patch_sigmatel.c
+++ b/sound/pci/hda/patch_sigmatel.c
@@ -17,6 +17,7 @@
 #include <linux/pci.h>
 #include <linux/dmi.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/hda_codec.h>
diff --git a/sound/pci/hda/tas2781_hda_i2c.c b/sound/pci/hda/tas2781_hda_i2c.c
index 4c9a788c3501..3a34b0a5ef6e 100644
--- a/sound/pci/hda/tas2781_hda_i2c.c
+++ b/sound/pci/hda/tas2781_hda_i2c.c
@@ -16,6 +16,7 @@
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <sound/hda_codec.h>
 #include <sound/soc.h>
 #include <sound/tas2781.h>
diff --git a/sound/pci/ice1712/ice1712.c b/sound/pci/ice1712/ice1712.c
index 3b0c3e70987b..5d38a624711f 100644
--- a/sound/pci/ice1712/ice1712.c
+++ b/sound/pci/ice1712/ice1712.c
@@ -41,6 +41,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/cs8427.h>
diff --git a/sound/pci/ice1712/ice1724.c b/sound/pci/ice1712/ice1724.c
index 1dc776acd637..ad7485f46bdb 100644
--- a/sound/pci/ice1712/ice1724.c
+++ b/sound/pci/ice1712/ice1724.c
@@ -15,6 +15,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/info.h>
 #include <sound/rawmidi.h>
diff --git a/sound/pci/ice1712/pontis.c b/sound/pci/ice1712/pontis.c
index 683909ca147c..c8c97bb053ff 100644
--- a/sound/pci/ice1712/pontis.c
+++ b/sound/pci/ice1712/pontis.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/info.h>
diff --git a/sound/pci/ice1712/prodigy_hifi.c b/sound/pci/ice1712/prodigy_hifi.c
index 9aa12a67d370..38e4327913c4 100644
--- a/sound/pci/ice1712/prodigy_hifi.c
+++ b/sound/pci/ice1712/prodigy_hifi.c
@@ -16,6 +16,7 @@
 #include <linux/init.h>
 #include <linux/slab.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/info.h>
diff --git a/sound/pci/intel8x0.c b/sound/pci/intel8x0.c
index ae285c0a629c..1bc347260543 100644
--- a/sound/pci/intel8x0.c
+++ b/sound/pci/intel8x0.c
@@ -18,6 +18,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/ac97_codec.h>
diff --git a/sound/pci/intel8x0m.c b/sound/pci/intel8x0m.c
index 653ecca78238..e6654f8b4ada 100644
--- a/sound/pci/intel8x0m.c
+++ b/sound/pci/intel8x0m.c
@@ -15,6 +15,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/ac97_codec.h>
diff --git a/sound/pci/korg1212/korg1212.c b/sound/pci/korg1212/korg1212.c
index 5c2cac201a28..cabf7d4efc02 100644
--- a/sound/pci/korg1212/korg1212.c
+++ b/sound/pci/korg1212/korg1212.c
@@ -10,6 +10,7 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
diff --git a/sound/pci/lola/lola.c b/sound/pci/lola/lola.c
index 1aa30e90b86a..e1886bd7b078 100644
--- a/sound/pci/lola/lola.c
+++ b/sound/pci/lola/lola.c
@@ -13,6 +13,7 @@
 #include <linux/interrupt.h>
 #include <linux/slab.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/lola/lola_proc.c b/sound/pci/lola/lola_proc.c
index a166672e22cb..94c797d2f622 100644
--- a/sound/pci/lola/lola_proc.c
+++ b/sound/pci/lola/lola_proc.c
@@ -8,6 +8,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/info.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/lx6464es/lx6464es.c b/sound/pci/lx6464es/lx6464es.c
index bd9b6148dd6f..a10377791f1a 100644
--- a/sound/pci/lx6464es/lx6464es.c
+++ b/sound/pci/lx6464es/lx6464es.c
@@ -6,11 +6,13 @@
  * Copyright (c) 2008, 2009 Tim Blechmann <tim@klingt.org>
  */
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/pci.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <sound/initval.h>
 #include <sound/control.h>
diff --git a/sound/pci/maestro3.c b/sound/pci/maestro3.c
index 305cbd24a391..0ba944e335fc 100644
--- a/sound/pci/maestro3.c
+++ b/sound/pci/maestro3.c
@@ -23,6 +23,7 @@
 #include <linux/pci.h>
 #include <linux/dma-mapping.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/module.h>
 #include <linux/firmware.h>
diff --git a/sound/pci/mixart/mixart.c b/sound/pci/mixart/mixart.c
index 7ceaf6a7a77e..a57470178e67 100644
--- a/sound/pci/mixart/mixart.c
+++ b/sound/pci/mixart/mixart.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/mutex.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/sound/pci/mixart/mixart_hwdep.c b/sound/pci/mixart/mixart_hwdep.c
index 689c0f995a9c..18899e6acb7b 100644
--- a/sound/pci/mixart/mixart_hwdep.c
+++ b/sound/pci/mixart/mixart_hwdep.c
@@ -10,6 +10,7 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/slab.h>
 #include <linux/module.h>
diff --git a/sound/pci/nm256/nm256.c b/sound/pci/nm256/nm256.c
index 34f90829e656..b8acf24d68bc 100644
--- a/sound/pci/nm256/nm256.c
+++ b/sound/pci/nm256/nm256.c
@@ -18,6 +18,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/info.h>
diff --git a/sound/pci/oxygen/oxygen_lib.c b/sound/pci/oxygen/oxygen_lib.c
index 92ffe9dc20c5..74eb9909c9e3 100644
--- a/sound/pci/oxygen/oxygen_lib.c
+++ b/sound/pci/oxygen/oxygen_lib.c
@@ -11,6 +11,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/ac97_codec.h>
 #include <sound/asoundef.h>
 #include <sound/core.h>
diff --git a/sound/pci/pcxhr/pcxhr.c b/sound/pci/pcxhr/pcxhr.c
index 242bd7e04b3e..3771bb25c1db 100644
--- a/sound/pci/pcxhr/pcxhr.c
+++ b/sound/pci/pcxhr/pcxhr.c
@@ -16,6 +16,7 @@
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/mutex.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/sound/pci/pcxhr/pcxhr_hwdep.c b/sound/pci/pcxhr/pcxhr_hwdep.c
index 249805065f61..c69f8c7d926c 100644
--- a/sound/pci/pcxhr/pcxhr_hwdep.c
+++ b/sound/pci/pcxhr/pcxhr_hwdep.c
@@ -8,6 +8,7 @@
  */
 
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/firmware.h>
 #include <linux/pci.h>
diff --git a/sound/pci/riptide/riptide.c b/sound/pci/riptide/riptide.c
index 9dee0345f22c..1eff197fcc37 100644
--- a/sound/pci/riptide/riptide.c
+++ b/sound/pci/riptide/riptide.c
@@ -79,6 +79,7 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/gameport.h>
 #include <linux/device.h>
diff --git a/sound/pci/rme32.c b/sound/pci/rme32.c
index 02144bbee6d5..df8e703b69dd 100644
--- a/sound/pci/rme32.c
+++ b/sound/pci/rme32.c
@@ -62,6 +62,7 @@
 #include <linux/pci.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/info.h>
diff --git a/sound/pci/rme96.c b/sound/pci/rme96.c
index 6b5ffb18197b..75675d7cd00c 100644
--- a/sound/pci/rme96.c
+++ b/sound/pci/rme96.c
@@ -14,6 +14,7 @@
 #include <linux/interrupt.h>
 #include <linux/pci.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/io.h>
 
diff --git a/sound/pci/rme9652/hdsp.c b/sound/pci/rme9652/hdsp.c
index e7d1b43471a2..7d0b02dcd972 100644
--- a/sound/pci/rme9652/hdsp.c
+++ b/sound/pci/rme9652/hdsp.c
@@ -14,6 +14,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/math64.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/io.h>
 #include <linux/nospec.h>
diff --git a/sound/pci/rme9652/hdspm.c b/sound/pci/rme9652/hdspm.c
index 267c7848974a..d1bfd05df589 100644
--- a/sound/pci/rme9652/hdspm.c
+++ b/sound/pci/rme9652/hdspm.c
@@ -127,6 +127,7 @@
 #include <linux/math64.h>
 #include <linux/io.h>
 #include <linux/nospec.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/sound/pci/rme9652/rme9652.c b/sound/pci/rme9652/rme9652.c
index d066c70ae160..2648788767c3 100644
--- a/sound/pci/rme9652/rme9652.c
+++ b/sound/pci/rme9652/rme9652.c
@@ -13,6 +13,7 @@
 #include <linux/module.h>
 #include <linux/io.h>
 #include <linux/nospec.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/sound/pci/sis7019.c b/sound/pci/sis7019.c
index fabe393607f8..1c811a29b26e 100644
--- a/sound/pci/sis7019.c
+++ b/sound/pci/sis7019.c
@@ -11,6 +11,7 @@
 
 #include <linux/init.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/slab.h>
 #include <linux/module.h>
diff --git a/sound/pci/sonicvibes.c b/sound/pci/sonicvibes.c
index f91cbf6eeca0..1dc9b0525f85 100644
--- a/sound/pci/sonicvibes.c
+++ b/sound/pci/sonicvibes.c
@@ -17,6 +17,7 @@
 #include <linux/module.h>
 #include <linux/dma-mapping.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/pci/trident/trident.c b/sound/pci/trident/trident.c
index 9922ab40798c..e79cf4290365 100644
--- a/sound/pci/trident/trident.c
+++ b/sound/pci/trident/trident.c
@@ -8,6 +8,7 @@
 
 #include <linux/init.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <sound/core.h>
diff --git a/sound/pci/via82xx.c b/sound/pci/via82xx.c
index d8666ff7bdfa..b26085a770e1 100644
--- a/sound/pci/via82xx.c
+++ b/sound/pci/via82xx.c
@@ -40,6 +40,7 @@
 #include <linux/slab.h>
 #include <linux/gameport.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/pci/via82xx_modem.c b/sound/pci/via82xx_modem.c
index ca7f024bf8ec..353c363bf08d 100644
--- a/sound/pci/via82xx_modem.c
+++ b/sound/pci/via82xx_modem.c
@@ -24,6 +24,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/pci/vx222/vx222.c b/sound/pci/vx222/vx222.c
index 468a6a20dc1e..8237407bf82e 100644
--- a/sound/pci/vx222/vx222.c
+++ b/sound/pci/vx222/vx222.c
@@ -10,6 +10,7 @@
 #include <linux/pci.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include <sound/tlv.h>
diff --git a/sound/pci/ymfpci/ymfpci.c b/sound/pci/ymfpci/ymfpci.c
index 48444dda44de..5207130b2c04 100644
--- a/sound/pci/ymfpci/ymfpci.c
+++ b/sound/pci/ymfpci/ymfpci.c
@@ -6,6 +6,7 @@
 
 #include <linux/init.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <linux/module.h>
 #include <sound/core.h>
diff --git a/sound/pci/ymfpci/ymfpci_main.c b/sound/pci/ymfpci/ymfpci_main.c
index 6b8d8690b6b2..dfd976e25860 100644
--- a/sound/pci/ymfpci/ymfpci_main.c
+++ b/sound/pci/ymfpci/ymfpci_main.c
@@ -14,6 +14,7 @@
 #include <linux/mutex.h>
 #include <linux/module.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/control.h>
diff --git a/sound/pcmcia/pdaudiocf/pdaudiocf.c b/sound/pcmcia/pdaudiocf/pdaudiocf.c
index 8363ec08df5d..9f3f944afd5a 100644
--- a/sound/pcmcia/pdaudiocf/pdaudiocf.c
+++ b/sound/pcmcia/pdaudiocf/pdaudiocf.c
@@ -7,6 +7,7 @@
 
 #include <sound/core.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/module.h>
 #include <pcmcia/ciscode.h>
 #include <pcmcia/cisreg.h>
diff --git a/sound/pcmcia/vx/vxpocket.c b/sound/pcmcia/vx/vxpocket.c
index 7a0f0e73ceb2..3d002f6c80f6 100644
--- a/sound/pcmcia/vx/vxpocket.c
+++ b/sound/pcmcia/vx/vxpocket.c
@@ -10,6 +10,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include "vxpocket.h"
 #include <pcmcia/ciscode.h>
diff --git a/sound/ppc/powermac.c b/sound/ppc/powermac.c
index e17af46abddd..36b522e6b8b5 100644
--- a/sound/ppc/powermac.c
+++ b/sound/ppc/powermac.c
@@ -9,6 +9,7 @@
 #include <linux/err.h>
 #include <linux/platform_device.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/initval.h>
 #include "pmac.h"
diff --git a/sound/ppc/tumbler.c b/sound/ppc/tumbler.c
index 12f1e10db1c4..1f3d05f7a56b 100644
--- a/sound/ppc/tumbler.c
+++ b/sound/ppc/tumbler.c
@@ -16,6 +16,7 @@
 #include <linux/kmod.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/of_irq.h>
 #include <linux/io.h>
diff --git a/sound/soc/amd/acp-pcm-dma.c b/sound/soc/amd/acp-pcm-dma.c
index b857e2676fe8..593b3c875120 100644
--- a/sound/soc/amd/acp-pcm-dma.c
+++ b/sound/soc/amd/acp-pcm-dma.c
@@ -9,6 +9,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/iopoll.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/sizes.h>
 #include <linux/pm_runtime.h>
 
diff --git a/sound/soc/amd/acp/acp-platform.c b/sound/soc/amd/acp/acp-platform.c
index aaac8aa744cb..1ef808898af8 100644
--- a/sound/soc/amd/acp/acp-platform.c
+++ b/sound/soc/amd/acp/acp-platform.c
@@ -15,6 +15,7 @@
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
 #include <sound/soc-dai.h>
diff --git a/sound/soc/amd/ps/pci-ps.c b/sound/soc/amd/ps/pci-ps.c
index 5927eef04170..49f36ef71e2e 100644
--- a/sound/soc/amd/ps/pci-ps.c
+++ b/sound/soc/amd/ps/pci-ps.c
@@ -13,6 +13,7 @@
 #include <linux/platform_device.h>
 #include <linux/acpi.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include <linux/pm_runtime.h>
 #include <linux/iopoll.h>
diff --git a/sound/soc/amd/ps/ps-pdm-dma.c b/sound/soc/amd/ps/ps-pdm-dma.c
index d48f7c5af289..7489dc19bd2f 100644
--- a/sound/soc/amd/ps/ps-pdm-dma.c
+++ b/sound/soc/amd/ps/ps-pdm-dma.c
@@ -10,6 +10,7 @@
 #include <linux/bitfield.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
 #include <sound/soc-dai.h>
diff --git a/sound/soc/amd/ps/ps-sdw-dma.c b/sound/soc/amd/ps/ps-sdw-dma.c
index 9b59063798f2..ca3c49ebd4f1 100644
--- a/sound/soc/amd/ps/ps-sdw-dma.c
+++ b/sound/soc/amd/ps/ps-sdw-dma.c
@@ -7,6 +7,7 @@
 
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/amd/raven/acp3x-pcm-dma.c b/sound/soc/amd/raven/acp3x-pcm-dma.c
index 3a50558f6751..820934420f65 100644
--- a/sound/soc/amd/raven/acp3x-pcm-dma.c
+++ b/sound/soc/amd/raven/acp3x-pcm-dma.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pm_runtime.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/amd/renoir/acp3x-pdm-dma.c b/sound/soc/amd/renoir/acp3x-pdm-dma.c
index c3b47e9bd239..35658dbae486 100644
--- a/sound/soc/amd/renoir/acp3x-pdm-dma.c
+++ b/sound/soc/amd/renoir/acp3x-pdm-dma.c
@@ -9,6 +9,7 @@
 #include <linux/bitfield.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pm_runtime.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/amd/vangogh/acp5x-pcm-dma.c b/sound/soc/amd/vangogh/acp5x-pcm-dma.c
index 491b16e52a72..5e970e046e1d 100644
--- a/sound/soc/amd/vangogh/acp5x-pcm-dma.c
+++ b/sound/soc/amd/vangogh/acp5x-pcm-dma.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pm_runtime.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/amd/yc/acp6x-pdm-dma.c b/sound/soc/amd/yc/acp6x-pdm-dma.c
index 72c4591e451b..1bdb77335691 100644
--- a/sound/soc/amd/yc/acp6x-pdm-dma.c
+++ b/sound/soc/amd/yc/acp6x-pdm-dma.c
@@ -10,6 +10,7 @@
 #include <linux/bitfield.h>
 #include <linux/err.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
 #include <sound/soc-dai.h>
diff --git a/sound/soc/atmel/mchp-pdmc.c b/sound/soc/atmel/mchp-pdmc.c
index dcc4e14b3dde..92876d193ecc 100644
--- a/sound/soc/atmel/mchp-pdmc.c
+++ b/sound/soc/atmel/mchp-pdmc.c
@@ -7,6 +7,7 @@
 // Author: Codrin Ciubotariu <codrin.ciubotariu@microchip.com>
 
 #include <dt-bindings/sound/microchip,pdmc.h>
+#include <linux/sprintf.h>
 
 #include <linux/bitfield.h>
 #include <linux/clk.h>
diff --git a/sound/soc/atmel/mchp-spdifrx.c b/sound/soc/atmel/mchp-spdifrx.c
index 33ce5e54482b..c59ccb3e09d3 100644
--- a/sound/soc/atmel/mchp-spdifrx.c
+++ b/sound/soc/atmel/mchp-spdifrx.c
@@ -7,6 +7,7 @@
 // Author: Codrin Ciubotariu <codrin.ciubotariu@microchip.com>
 
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/io.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
diff --git a/sound/soc/bcm/cygnus-ssp.c b/sound/soc/bcm/cygnus-ssp.c
index 90088516fed0..0e43075405d5 100644
--- a/sound/soc/bcm/cygnus-ssp.c
+++ b/sound/soc/bcm/cygnus-ssp.c
@@ -7,6 +7,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/codecs/ak4613.c b/sound/soc/codecs/ak4613.c
index 73fb35560e51..d862f3b40a77 100644
--- a/sound/soc/codecs/ak4613.c
+++ b/sound/soc/codecs/ak4613.c
@@ -103,6 +103,7 @@
 #include <linux/of_graph.h>
 #include <linux/module.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <sound/pcm_params.h>
 #include <sound/tlv.h>
diff --git a/sound/soc/codecs/arizona.c b/sound/soc/codecs/arizona.c
index 7434aeeda292..04d72391cb5b 100644
--- a/sound/soc/codecs/arizona.c
+++ b/sound/soc/codecs/arizona.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/tlv.h>
diff --git a/sound/soc/codecs/audio-iio-aux.c b/sound/soc/codecs/audio-iio-aux.c
index 1e8e1effc2af..820f0ca72ff3 100644
--- a/sound/soc/codecs/audio-iio-aux.c
+++ b/sound/soc/codecs/audio-iio-aux.c
@@ -11,6 +11,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 
 #include <sound/soc.h>
diff --git a/sound/soc/codecs/cs35l45.c b/sound/soc/codecs/cs35l45.c
index 44c221745c3b..bf8d1502f1bc 100644
--- a/sound/soc/codecs/cs35l45.c
+++ b/sound/soc/codecs/cs35l45.c
@@ -12,6 +12,7 @@
 #include <linux/property.h>
 #include <linux/firmware.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/codecs/cs35l56-sdw.c b/sound/soc/codecs/cs35l56-sdw.c
index ab960a1c171e..5631d22aa786 100644
--- a/sound/soc/codecs/cs35l56-sdw.c
+++ b/sound/soc/codecs/cs35l56-sdw.c
@@ -17,6 +17,7 @@
 #include <linux/swab.h>
 #include <linux/types.h>
 #include <linux/workqueue.h>
+#include <linux/completion.h>
 
 #include "cs35l56.h"
 
diff --git a/sound/soc/codecs/cs35l56.c b/sound/soc/codecs/cs35l56.c
index 98d3957c66e7..ae8ee5a48119 100644
--- a/sound/soc/codecs/cs35l56.c
+++ b/sound/soc/codecs/cs35l56.c
@@ -19,6 +19,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
 #include <linux/soundwire/sdw.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/workqueue.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/codecs/cs42l42-sdw.c b/sound/soc/codecs/cs42l42-sdw.c
index 94a66a325303..34418d3f8956 100644
--- a/sound/soc/codecs/cs42l42-sdw.c
+++ b/sound/soc/codecs/cs42l42-sdw.c
@@ -5,6 +5,7 @@
 //                    Cirrus Logic International Semiconductor Ltd.
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/gpio/consumer.h>
 #include <linux/iopoll.h>
diff --git a/sound/soc/codecs/cs42l43.c b/sound/soc/codecs/cs42l43.c
index 860d5cda67bf..5b8af3741b50 100644
--- a/sound/soc/codecs/cs42l43.c
+++ b/sound/soc/codecs/cs42l43.c
@@ -8,6 +8,7 @@
 #include <linux/bitops.h>
 #include <linux/bits.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/err.h>
 #include <linux/errno.h>
diff --git a/sound/soc/codecs/cs42l52.c b/sound/soc/codecs/cs42l52.c
index 4fc8a6ae8d92..13400c867f12 100644
--- a/sound/soc/codecs/cs42l52.c
+++ b/sound/soc/codecs/cs42l52.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/of_gpio.h>
 #include <linux/pm.h>
 #include <linux/i2c.h>
diff --git a/sound/soc/codecs/cs42l56.c b/sound/soc/codecs/cs42l56.c
index 3e3a86dab4fc..f648b1552c8d 100644
--- a/sound/soc/codecs/cs42l56.c
+++ b/sound/soc/codecs/cs42l56.c
@@ -12,6 +12,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pm.h>
 #include <linux/i2c.h>
 #include <linux/input.h>
diff --git a/sound/soc/codecs/cx20442.c b/sound/soc/codecs/cx20442.c
index 9d54141a0cd1..ade3489f7969 100644
--- a/sound/soc/codecs/cx20442.c
+++ b/sound/soc/codecs/cx20442.c
@@ -13,6 +13,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/sound/soc/codecs/framer-codec.c b/sound/soc/codecs/framer-codec.c
index e5fcde9ee308..9fa81081b936 100644
--- a/sound/soc/codecs/framer-codec.c
+++ b/sound/soc/codecs/framer-codec.c
@@ -12,6 +12,7 @@
 #include <linux/notifier.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/codecs/hdac_hdmi.c b/sound/soc/codecs/hdac_hdmi.c
index e1a7f0b0c0f3..234dc4f5e797 100644
--- a/sound/soc/codecs/hdac_hdmi.c
+++ b/sound/soc/codecs/hdac_hdmi.c
@@ -17,6 +17,7 @@
 #include <linux/hdmi.h>
 #include <drm/drm_edid.h>
 #include <drm/drm_eld.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include <sound/jack.h>
 #include <sound/soc.h>
diff --git a/sound/soc/codecs/max98363.c b/sound/soc/codecs/max98363.c
index 950105e5bffd..bf7b06e59e83 100644
--- a/sound/soc/codecs/max98363.c
+++ b/sound/soc/codecs/max98363.c
@@ -11,6 +11,7 @@
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
 #include <sound/tlv.h>
+#include <linux/completion.h>
 
 #include "max98363.h"
 
diff --git a/sound/soc/codecs/max98373-sdw.c b/sound/soc/codecs/max98373-sdw.c
index 383e551f3bc7..a35b24ecca23 100644
--- a/sound/soc/codecs/max98373-sdw.c
+++ b/sound/soc/codecs/max98373-sdw.c
@@ -2,6 +2,7 @@
 // Copyright (c) 2020, Maxim Integrated
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
 #include <linux/module.h>
 #include <linux/mod_devicetable.h>
diff --git a/sound/soc/codecs/max98390.c b/sound/soc/codecs/max98390.c
index 5b8e78e51630..e4d15df40b88 100644
--- a/sound/soc/codecs/max98390.c
+++ b/sound/soc/codecs/max98390.c
@@ -16,6 +16,7 @@
 #include <linux/of_gpio.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/codecs/msm8916-wcd-digital.c b/sound/soc/codecs/msm8916-wcd-digital.c
index 978c4d056e81..dbe7cb036548 100644
--- a/sound/soc/codecs/msm8916-wcd-digital.c
+++ b/sound/soc/codecs/msm8916-wcd-digital.c
@@ -5,6 +5,7 @@
 #include <linux/err.h>
 #include <linux/kernel.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/types.h>
 #include <linux/clk.h>
 #include <linux/of.h>
diff --git a/sound/soc/codecs/rt1017-sdca-sdw.c b/sound/soc/codecs/rt1017-sdca-sdw.c
index 4dbbd8bdaaac..ac753660befc 100644
--- a/sound/soc/codecs/rt1017-sdca-sdw.c
+++ b/sound/soc/codecs/rt1017-sdca-sdw.c
@@ -18,6 +18,7 @@
 #include <sound/soc-dapm.h>
 #include <sound/initval.h>
 #include <sound/tlv.h>
+#include <linux/completion.h>
 
 #include "rt1017-sdca-sdw.h"
 
diff --git a/sound/soc/codecs/rt1308-sdw.c b/sound/soc/codecs/rt1308-sdw.c
index 63d4abf964d4..8c8c586539e3 100644
--- a/sound/soc/codecs/rt1308-sdw.c
+++ b/sound/soc/codecs/rt1308-sdw.c
@@ -21,6 +21,7 @@
 #include <sound/soc.h>
 #include <sound/soc-dapm.h>
 #include <sound/initval.h>
+#include <linux/completion.h>
 
 #include "rt1308.h"
 #include "rt1308-sdw.h"
diff --git a/sound/soc/codecs/rt1316-sdw.c b/sound/soc/codecs/rt1316-sdw.c
index 47511f70119a..ea448615222d 100644
--- a/sound/soc/codecs/rt1316-sdw.c
+++ b/sound/soc/codecs/rt1316-sdw.c
@@ -18,6 +18,7 @@
 #include <sound/soc-dapm.h>
 #include <sound/initval.h>
 #include "rt1316-sdw.h"
+#include <linux/completion.h>
 
 static const struct reg_default rt1316_reg_defaults[] = {
 	{ 0x3004, 0x00 },
diff --git a/sound/soc/codecs/rt1318-sdw.c b/sound/soc/codecs/rt1318-sdw.c
index ff364bde4a08..797af741bc69 100644
--- a/sound/soc/codecs/rt1318-sdw.c
+++ b/sound/soc/codecs/rt1318-sdw.c
@@ -19,6 +19,7 @@
 #include <sound/soc-dapm.h>
 #include <sound/initval.h>
 #include "rt1318-sdw.h"
+#include <linux/completion.h>
 
 static const struct reg_sequence rt1318_blind_write[] = {
 	{ 0xc001, 0x43 },
diff --git a/sound/soc/codecs/rt5645.c b/sound/soc/codecs/rt5645.c
index 0cc2fa131d48..d55105fb2ae4 100644
--- a/sound/soc/codecs/rt5645.c
+++ b/sound/soc/codecs/rt5645.c
@@ -18,6 +18,7 @@
 #include <linux/acpi.h>
 #include <linux/dmi.h>
 #include <linux/regulator/consumer.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/codecs/rt5682-sdw.c b/sound/soc/codecs/rt5682-sdw.c
index e67c2e19cb1a..4ab76da761a5 100644
--- a/sound/soc/codecs/rt5682-sdw.c
+++ b/sound/soc/codecs/rt5682-sdw.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/pm.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/pm_runtime.h>
 #include <linux/regulator/consumer.h>
 #include <linux/mutex.h>
diff --git a/sound/soc/codecs/rt5682.c b/sound/soc/codecs/rt5682.c
index e3aca9c785a0..c2290ef34bc8 100644
--- a/sound/soc/codecs/rt5682.c
+++ b/sound/soc/codecs/rt5682.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/spi/spi.h>
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/gpio/consumer.h>
 #include <linux/mutex.h>
 #include <sound/core.h>
diff --git a/sound/soc/codecs/rt700-sdw.c b/sound/soc/codecs/rt700-sdw.c
index 52c33d56b143..7d9a383d8dd0 100644
--- a/sound/soc/codecs/rt700-sdw.c
+++ b/sound/soc/codecs/rt700-sdw.c
@@ -18,6 +18,7 @@
 #include <sound/soc.h>
 #include "rt700.h"
 #include "rt700-sdw.h"
+#include <linux/completion.h>
 
 static bool rt700_readable_register(struct device *dev, unsigned int reg)
 {
diff --git a/sound/soc/codecs/rt711-sdca-sdw.c b/sound/soc/codecs/rt711-sdca-sdw.c
index 935e597022d3..6a3a775936e1 100644
--- a/sound/soc/codecs/rt711-sdca-sdw.c
+++ b/sound/soc/codecs/rt711-sdca-sdw.c
@@ -12,6 +12,7 @@
 #include <linux/soundwire/sdw_registers.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
+#include <linux/completion.h>
 
 #include "rt711-sdca.h"
 #include "rt711-sdca-sdw.h"
diff --git a/sound/soc/codecs/rt711-sdw.c b/sound/soc/codecs/rt711-sdw.c
index 3f5773310ae8..60dab11d5712 100644
--- a/sound/soc/codecs/rt711-sdw.c
+++ b/sound/soc/codecs/rt711-sdw.c
@@ -18,6 +18,7 @@
 #include <sound/soc.h>
 #include "rt711.h"
 #include "rt711-sdw.h"
+#include <linux/completion.h>
 
 static bool rt711_readable_register(struct device *dev, unsigned int reg)
 {
diff --git a/sound/soc/codecs/rt712-sdca-dmic.c b/sound/soc/codecs/rt712-sdca-dmic.c
index 0926b26619bd..8de30b2e6b7a 100644
--- a/sound/soc/codecs/rt712-sdca-dmic.c
+++ b/sound/soc/codecs/rt712-sdca-dmic.c
@@ -17,6 +17,7 @@
 #include <sound/tlv.h>
 #include "rt712-sdca.h"
 #include "rt712-sdca-dmic.h"
+#include <linux/completion.h>
 
 static bool rt712_sdca_dmic_readable_register(struct device *dev, unsigned int reg)
 {
diff --git a/sound/soc/codecs/rt712-sdca-sdw.c b/sound/soc/codecs/rt712-sdca-sdw.c
index 01ac555cd79b..fc11531e7df6 100644
--- a/sound/soc/codecs/rt712-sdca-sdw.c
+++ b/sound/soc/codecs/rt712-sdca-sdw.c
@@ -14,6 +14,7 @@
 #include <linux/soundwire/sdw_registers.h>
 #include "rt712-sdca.h"
 #include "rt712-sdca-sdw.h"
+#include <linux/completion.h>
 
 static bool rt712_sdca_readable_register(struct device *dev, unsigned int reg)
 {
diff --git a/sound/soc/codecs/rt715-sdca-sdw.c b/sound/soc/codecs/rt715-sdca-sdw.c
index ab54a67a27eb..76594fced4aa 100644
--- a/sound/soc/codecs/rt715-sdca-sdw.c
+++ b/sound/soc/codecs/rt715-sdca-sdw.c
@@ -18,6 +18,7 @@
 #include <sound/soc.h>
 #include "rt715-sdca.h"
 #include "rt715-sdca-sdw.h"
+#include <linux/completion.h>
 
 static bool rt715_sdca_readable_register(struct device *dev, unsigned int reg)
 {
diff --git a/sound/soc/codecs/rt715-sdw.c b/sound/soc/codecs/rt715-sdw.c
index 21f37babd148..0d4d3988c13c 100644
--- a/sound/soc/codecs/rt715-sdw.c
+++ b/sound/soc/codecs/rt715-sdw.c
@@ -20,6 +20,7 @@
 #include <sound/soc.h>
 #include "rt715.h"
 #include "rt715-sdw.h"
+#include <linux/completion.h>
 
 static bool rt715_readable_register(struct device *dev, unsigned int reg)
 {
diff --git a/sound/soc/codecs/rt722-sdca-sdw.c b/sound/soc/codecs/rt722-sdca-sdw.c
index eb76f4c675b6..c2289b23ec8b 100644
--- a/sound/soc/codecs/rt722-sdca-sdw.c
+++ b/sound/soc/codecs/rt722-sdca-sdw.c
@@ -12,6 +12,7 @@
 #include <linux/mod_devicetable.h>
 #include <linux/pm_runtime.h>
 #include <linux/soundwire/sdw_registers.h>
+#include <linux/completion.h>
 
 #include "rt722-sdca.h"
 #include "rt722-sdca-sdw.h"
diff --git a/sound/soc/codecs/sma1303.c b/sound/soc/codecs/sma1303.c
index 61072e7574a0..b44a072d2b65 100644
--- a/sound/soc/codecs/sma1303.c
+++ b/sound/soc/codecs/sma1303.c
@@ -13,6 +13,7 @@
 #include <linux/kernel.h>
 #include <linux/init.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pm.h>
 #include <linux/i2c.h>
 #include <linux/regmap.h>
diff --git a/sound/soc/codecs/tas2781-comlib.c b/sound/soc/codecs/tas2781-comlib.c
index 3aa81514dad7..76389fb603b6 100644
--- a/sound/soc/codecs/tas2781-comlib.c
+++ b/sound/soc/codecs/tas2781-comlib.c
@@ -18,6 +18,7 @@
 #include <linux/of_irq.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
 #include <sound/tas2781.h>
diff --git a/sound/soc/codecs/tas2781-i2c.c b/sound/soc/codecs/tas2781-i2c.c
index b5abff230e43..1b2a9443d557 100644
--- a/sound/soc/codecs/tas2781-i2c.c
+++ b/sound/soc/codecs/tas2781-i2c.c
@@ -25,6 +25,7 @@
 #include <linux/of_irq.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
 #include <sound/tas2781.h>
diff --git a/sound/soc/codecs/tas5086.c b/sound/soc/codecs/tas5086.c
index f52c14b43f28..4d75b8e671c7 100644
--- a/sound/soc/codecs/tas5086.c
+++ b/sound/soc/codecs/tas5086.c
@@ -32,6 +32,7 @@
 #include <linux/of.h>
 #include <linux/of_device.h>
 #include <linux/of_gpio.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/codecs/tas5805m.c b/sound/soc/codecs/tas5805m.c
index 3b53eba38a0b..dd65dc51098a 100644
--- a/sound/soc/codecs/tas5805m.c
+++ b/sound/soc/codecs/tas5805m.c
@@ -24,6 +24,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/regulator/consumer.h>
 #include <linux/atomic.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 
 #include <sound/soc.h>
diff --git a/sound/soc/codecs/wcd9335.c b/sound/soc/codecs/wcd9335.c
index deb15b95992d..7dbe14344b1e 100644
--- a/sound/soc/codecs/wcd9335.c
+++ b/sound/soc/codecs/wcd9335.c
@@ -4,6 +4,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/platform_device.h>
 #include <linux/device.h>
 #include <linux/wait.h>
diff --git a/sound/soc/codecs/wcd934x.c b/sound/soc/codecs/wcd934x.c
index 6813268e6a19..786865e99b09 100644
--- a/sound/soc/codecs/wcd934x.c
+++ b/sound/soc/codecs/wcd934x.c
@@ -5,6 +5,7 @@
 #include <linux/clk-provider.h>
 #include <linux/interrupt.h>
 #include <linux/kernel.h>
+#include <linux/kstrtox.h>
 #include <linux/mfd/wcd934x/registers.h>
 #include <linux/mfd/wcd934x/wcd934x.h>
 #include <linux/module.h>
diff --git a/sound/soc/codecs/wcd938x.c b/sound/soc/codecs/wcd938x.c
index 6021aa5a5689..0c6a5a7701cd 100644
--- a/sound/soc/codecs/wcd938x.c
+++ b/sound/soc/codecs/wcd938x.c
@@ -20,6 +20,7 @@
 #include <sound/soc.h>
 #include <sound/soc-dapm.h>
 #include <linux/regulator/consumer.h>
+#include <linux/completion.h>
 
 #include "wcd-clsh-v2.h"
 #include "wcd-mbhc-v2.h"
diff --git a/sound/soc/codecs/wcd939x.c b/sound/soc/codecs/wcd939x.c
index c49894aad8a5..e2f7a4db5e5a 100644
--- a/sound/soc/codecs/wcd939x.c
+++ b/sound/soc/codecs/wcd939x.c
@@ -27,6 +27,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/usb/typec_mux.h>
 #include <linux/usb/typec_altmode.h>
+#include <linux/completion.h>
 
 #include "wcd-clsh-v2.h"
 #include "wcd-mbhc-v2.h"
diff --git a/sound/soc/codecs/wm0010.c b/sound/soc/codecs/wm0010.c
index 8f862729a2ca..74bac4ddba27 100644
--- a/sound/soc/codecs/wm0010.c
+++ b/sound/soc/codecs/wm0010.c
@@ -22,6 +22,7 @@
 #include <linux/regulator/consumer.h>
 #include <linux/mutex.h>
 #include <linux/workqueue.h>
+#include <linux/completion.h>
 
 #include <sound/soc.h>
 #include <sound/wm0010.h>
diff --git a/sound/soc/codecs/wm2200.c b/sound/soc/codecs/wm2200.c
index 69c9c2bd7e7b..4f38be5d331c 100644
--- a/sound/soc/codecs/wm2200.c
+++ b/sound/soc/codecs/wm2200.c
@@ -28,6 +28,7 @@
 #include <sound/initval.h>
 #include <sound/tlv.h>
 #include <sound/wm2200.h>
+#include <linux/completion.h>
 
 #include "wm2200.h"
 #include "wm_adsp.h"
diff --git a/sound/soc/codecs/wm5100.c b/sound/soc/codecs/wm5100.c
index 7ee4b45c0834..5ef9810f7629 100644
--- a/sound/soc/codecs/wm5100.c
+++ b/sound/soc/codecs/wm5100.c
@@ -29,6 +29,7 @@
 #include <sound/initval.h>
 #include <sound/tlv.h>
 #include <sound/wm5100.h>
+#include <linux/completion.h>
 
 #include "wm5100.h"
 
diff --git a/sound/soc/codecs/wm8962.c b/sound/soc/codecs/wm8962.c
index fb90ae6a8a34..6d6f747fef9d 100644
--- a/sound/soc/codecs/wm8962.c
+++ b/sound/soc/codecs/wm8962.c
@@ -11,7 +11,9 @@
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pm.h>
 #include <linux/gcd.h>
 #include <linux/gpio/driver.h>
diff --git a/sound/soc/codecs/wm8993.c b/sound/soc/codecs/wm8993.c
index 5b788f35e5e4..a4b4a7c131c6 100644
--- a/sound/soc/codecs/wm8993.c
+++ b/sound/soc/codecs/wm8993.c
@@ -24,6 +24,7 @@
 #include <sound/soc.h>
 #include <sound/initval.h>
 #include <sound/wm8993.h>
+#include <linux/completion.h>
 
 #include "wm8993.h"
 #include "wm_hubs.h"
diff --git a/sound/soc/codecs/wm8994.c b/sound/soc/codecs/wm8994.c
index fc9894975a1d..edaaecdb1a75 100644
--- a/sound/soc/codecs/wm8994.c
+++ b/sound/soc/codecs/wm8994.c
@@ -26,6 +26,7 @@
 #include <sound/initval.h>
 #include <sound/tlv.h>
 #include <trace/events/asoc.h>
+#include <linux/completion.h>
 
 #include <linux/mfd/wm8994/core.h>
 #include <linux/mfd/wm8994/registers.h>
diff --git a/sound/soc/codecs/wm_adsp.c b/sound/soc/codecs/wm_adsp.c
index 36ea0dcdc7ab..81a422182faf 100644
--- a/sound/soc/codecs/wm_adsp.c
+++ b/sound/soc/codecs/wm_adsp.c
@@ -18,6 +18,7 @@
 #include <linux/regmap.h>
 #include <linux/regulator/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/vmalloc.h>
 #include <linux/workqueue.h>
 #include <linux/debugfs.h>
diff --git a/sound/soc/codecs/wm_hubs.c b/sound/soc/codecs/wm_hubs.c
index 0c881846f485..32ca63e123b3 100644
--- a/sound/soc/codecs/wm_hubs.c
+++ b/sound/soc/codecs/wm_hubs.c
@@ -20,6 +20,7 @@
 #include <sound/soc.h>
 #include <sound/initval.h>
 #include <sound/tlv.h>
+#include <linux/completion.h>
 
 #include "wm8993.h"
 #include "wm_hubs.h"
diff --git a/sound/soc/codecs/wsa881x.c b/sound/soc/codecs/wsa881x.c
index 3c025dabaf7a..468f7ec049fb 100644
--- a/sound/soc/codecs/wsa881x.c
+++ b/sound/soc/codecs/wsa881x.c
@@ -3,6 +3,7 @@
 // Copyright (c) 2019, Linaro Limited
 
 #include <linux/bitops.h>
+#include <linux/completion.h>
 #include <linux/gpio.h>
 #include <linux/gpio/consumer.h>
 #include <linux/module.h>
diff --git a/sound/soc/fsl/fsl-asoc-card.c b/sound/soc/fsl/fsl-asoc-card.c
index bc07f26ba303..5b37afc5a7e4 100644
--- a/sound/soc/fsl/fsl-asoc-card.c
+++ b/sound/soc/fsl/fsl-asoc-card.c
@@ -10,6 +10,7 @@
 #include <linux/i2c.h>
 #include <linux/module.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 #if IS_ENABLED(CONFIG_SND_AC97_CODEC)
 #include <sound/ac97_codec.h>
 #endif
diff --git a/sound/soc/fsl/fsl_asrc.c b/sound/soc/fsl/fsl_asrc.c
index b793263291dc..80b17da75642 100644
--- a/sound/soc/fsl/fsl_asrc.c
+++ b/sound/soc/fsl/fsl_asrc.c
@@ -13,6 +13,7 @@
 #include <linux/of_platform.h>
 #include <linux/dma/imx-dma.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/dmaengine_pcm.h>
 #include <sound/pcm_params.h>
 
diff --git a/sound/soc/fsl/fsl_dma.c b/sound/soc/fsl/fsl_dma.c
index c4bc9395dff7..3eca1c710c23 100644
--- a/sound/soc/fsl/fsl_dma.c
+++ b/sound/soc/fsl/fsl_dma.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/init.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/platform_device.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
diff --git a/sound/soc/fsl/fsl_easrc.c b/sound/soc/fsl/fsl_easrc.c
index ec53bda46a46..46b93ce53606 100644
--- a/sound/soc/fsl/fsl_easrc.c
+++ b/sound/soc/fsl/fsl_easrc.c
@@ -18,6 +18,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <linux/sysfs.h>
 #include <linux/types.h>
 #include <linux/gcd.h>
diff --git a/sound/soc/fsl/fsl_esai.c b/sound/soc/fsl/fsl_esai.c
index d0d8a01da9bd..0a1a32763889 100644
--- a/sound/soc/fsl/fsl_esai.c
+++ b/sound/soc/fsl/fsl_esai.c
@@ -10,6 +10,7 @@
 #include <linux/of_irq.h>
 #include <linux/of_platform.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/dmaengine_pcm.h>
 #include <sound/pcm_params.h>
 
diff --git a/sound/soc/fsl/fsl_sai.c b/sound/soc/fsl/fsl_sai.c
index 0e2c31439670..77dc12956b39 100644
--- a/sound/soc/fsl/fsl_sai.c
+++ b/sound/soc/fsl/fsl_sai.c
@@ -14,6 +14,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/time.h>
 #include <sound/core.h>
 #include <sound/dmaengine_pcm.h>
diff --git a/sound/soc/fsl/fsl_spdif.c b/sound/soc/fsl/fsl_spdif.c
index a63121c888e0..7c711e5becf2 100644
--- a/sound/soc/fsl/fsl_spdif.c
+++ b/sound/soc/fsl/fsl_spdif.c
@@ -15,6 +15,7 @@
 #include <linux/of.h>
 #include <linux/regmap.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 
 #include <sound/asoundef.h>
 #include <sound/dmaengine_pcm.h>
diff --git a/sound/soc/fsl/fsl_ssi.c b/sound/soc/fsl/fsl_ssi.c
index ab6ec1974807..db41845cccaa 100644
--- a/sound/soc/fsl/fsl_ssi.c
+++ b/sound/soc/fsl/fsl_ssi.c
@@ -41,6 +41,7 @@
 #include <linux/of_irq.h>
 #include <linux/of_platform.h>
 #include <linux/dma/imx-dma.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/fsl/fsl_utils.c b/sound/soc/fsl/fsl_utils.c
index a5ab27c2f711..ab5ce71c0fc8 100644
--- a/sound/soc/fsl/fsl_utils.c
+++ b/sound/soc/fsl/fsl_utils.c
@@ -10,6 +10,7 @@
 #include <linux/clk-provider.h>
 #include <linux/module.h>
 #include <linux/of_address.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 
 #include "fsl_utils.h"
diff --git a/sound/soc/fsl/imx-audio-rpmsg.c b/sound/soc/fsl/imx-audio-rpmsg.c
index 289e47c03d40..ce6847b96364 100644
--- a/sound/soc/fsl/imx-audio-rpmsg.c
+++ b/sound/soc/fsl/imx-audio-rpmsg.c
@@ -4,6 +4,7 @@
 #include <linux/module.h>
 #include <linux/rpmsg.h>
 #include "imx-pcm-rpmsg.h"
+#include <linux/completion.h>
 
 /*
  * struct imx_audio_rpmsg: private data
diff --git a/sound/soc/fsl/imx-audmux.c b/sound/soc/fsl/imx-audmux.c
index 747ab2f1aae3..a41d7f46ab92 100644
--- a/sound/soc/fsl/imx-audmux.c
+++ b/sound/soc/fsl/imx-audmux.c
@@ -15,6 +15,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "imx-audmux.h"
 
diff --git a/sound/soc/fsl/imx-pcm-fiq.c b/sound/soc/fsl/imx-pcm-fiq.c
index 0d124002678e..505e3ecccb5a 100644
--- a/sound/soc/fsl/imx-pcm-fiq.c
+++ b/sound/soc/fsl/imx-pcm-fiq.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/dma-mapping.h>
+#include <linux/hrtimer.h>
 #include <linux/init.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
diff --git a/sound/soc/fsl/imx-pcm-rpmsg.c b/sound/soc/fsl/imx-pcm-rpmsg.c
index fb9244c1e9c5..a4dbc338e2ca 100644
--- a/sound/soc/fsl/imx-pcm-rpmsg.c
+++ b/sound/soc/fsl/imx-pcm-rpmsg.c
@@ -11,6 +11,7 @@
 #include <sound/pcm_params.h>
 #include <sound/dmaengine_pcm.h>
 #include <sound/soc.h>
+#include <linux/completion.h>
 
 #include "imx-pcm.h"
 #include "fsl_rpmsg.h"
diff --git a/sound/soc/fsl/mpc5200_dma.c b/sound/soc/fsl/mpc5200_dma.c
index 345f338251ac..4983219cd1fb 100644
--- a/sound/soc/fsl/mpc5200_dma.c
+++ b/sound/soc/fsl/mpc5200_dma.c
@@ -13,6 +13,7 @@
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <sound/soc.h>
 
diff --git a/sound/soc/generic/audio-graph-card.c b/sound/soc/generic/audio-graph-card.c
index 83e3ba773fbd..ac2584e5d03f 100644
--- a/sound/soc/generic/audio-graph-card.c
+++ b/sound/soc/generic/audio-graph-card.c
@@ -14,6 +14,7 @@
 #include <linux/of.h>
 #include <linux/of_graph.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <sound/graph_card.h>
 
diff --git a/sound/soc/generic/simple-card-utils.c b/sound/soc/generic/simple-card-utils.c
index 81077d16d22f..dbfb07148fbe 100644
--- a/sound/soc/generic/simple-card-utils.c
+++ b/sound/soc/generic/simple-card-utils.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/of_graph.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm_params.h>
 #include <sound/simple_card_utils.h>
diff --git a/sound/soc/generic/simple-card.c b/sound/soc/generic/simple-card.c
index 9c79ff6a568f..e6236e0ee6f4 100644
--- a/sound/soc/generic/simple-card.c
+++ b/sound/soc/generic/simple-card.c
@@ -11,6 +11,7 @@
 #include <linux/of.h>
 #include <linux/of_platform.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <sound/simple_card.h>
 #include <sound/soc-dai.h>
diff --git a/sound/soc/generic/test-component.c b/sound/soc/generic/test-component.c
index e4967540a2e1..422b3c190825 100644
--- a/sound/soc/generic/test-component.c
+++ b/sound/soc/generic/test-component.c
@@ -9,6 +9,7 @@
 #include <linux/of.h>
 #include <linux/of_graph.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <sound/pcm.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/atom/sst-mfld-platform-pcm.c b/sound/soc/intel/atom/sst-mfld-platform-pcm.c
index 8652b4a20020..f333e7ca649a 100644
--- a/sound/soc/intel/atom/sst-mfld-platform-pcm.c
+++ b/sound/soc/intel/atom/sst-mfld-platform-pcm.c
@@ -14,6 +14,7 @@
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/intel/atom/sst/sst.c b/sound/soc/intel/atom/sst/sst.c
index e0357d257c6c..09592a325cc5 100644
--- a/sound/soc/intel/atom/sst/sst.c
+++ b/sound/soc/intel/atom/sst/sst.c
@@ -16,6 +16,7 @@
 #include <linux/interrupt.h>
 #include <linux/io.h>
 #include <linux/firmware.h>
+#include <linux/kstrtox.h>
 #include <linux/pci.h>
 #include <linux/pm_runtime.h>
 #include <linux/pm_qos.h>
diff --git a/sound/soc/intel/atom/sst/sst_acpi.c b/sound/soc/intel/atom/sst/sst_acpi.c
index 29d44c989e5f..ac026f9ec255 100644
--- a/sound/soc/intel/atom/sst/sst_acpi.c
+++ b/sound/soc/intel/atom/sst/sst_acpi.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/fs.h>
 #include <linux/interrupt.h>
+#include <linux/kstrtox.h>
 #include <linux/slab.h>
 #include <linux/io.h>
 #include <linux/platform_device.h>
diff --git a/sound/soc/intel/atom/sst/sst_pci.c b/sound/soc/intel/atom/sst/sst_pci.c
index d1e64c3500be..19c5b7aa4552 100644
--- a/sound/soc/intel/atom/sst/sst_pci.c
+++ b/sound/soc/intel/atom/sst/sst_pci.c
@@ -15,6 +15,7 @@
 #include <linux/pci.h>
 #include <linux/fs.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/soc.h>
 #include <asm/platform_sst_audio.h>
diff --git a/sound/soc/intel/avs/avs.h b/sound/soc/intel/avs/avs.h
index 69c912feb8a7..6a6cf7ec7a4c 100644
--- a/sound/soc/intel/avs/avs.h
+++ b/sound/soc/intel/avs/avs.h
@@ -12,6 +12,7 @@
 #include <linux/debugfs.h>
 #include <linux/device.h>
 #include <linux/firmware.h>
+#include <linux/idr.h>
 #include <linux/kfifo.h>
 #include <sound/hda_codec.h>
 #include <sound/hda_register.h>
diff --git a/sound/soc/intel/avs/boards/hdaudio.c b/sound/soc/intel/avs/boards/hdaudio.c
index 79b4aca41333..19b0057ad563 100644
--- a/sound/soc/intel/avs/boards/hdaudio.c
+++ b/sound/soc/intel/avs/boards/hdaudio.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/hda_codec.h>
 #include <sound/hda_i915.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/avs/cldma.c b/sound/soc/intel/avs/cldma.c
index d7a9390b5e48..d150dc6d8c87 100644
--- a/sound/soc/intel/avs/cldma.c
+++ b/sound/soc/intel/avs/cldma.c
@@ -5,11 +5,13 @@
 // Author: Cezary Rojewski <cezary.rojewski@intel.com>
 //
 
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pci.h>
 #include <sound/hda_register.h>
 #include <sound/hdaudio_ext.h>
 #include "cldma.h"
 #include "registers.h"
+#include <linux/completion.h>
 
 /* Stream Registers */
 #define AZX_CL_SD_BASE			0x80
diff --git a/sound/soc/intel/avs/core.c b/sound/soc/intel/avs/core.c
index 273a90216856..deb4b64b0300 100644
--- a/sound/soc/intel/avs/core.c
+++ b/sound/soc/intel/avs/core.c
@@ -27,6 +27,7 @@
 #include "avs.h"
 #include "cldma.h"
 #include "messages.h"
+#include <linux/completion.h>
 
 static u32 pgctl_mask = AZX_PGCTL_LSRMD_MASK;
 module_param(pgctl_mask, uint, 0444);
diff --git a/sound/soc/intel/avs/debugfs.c b/sound/soc/intel/avs/debugfs.c
index 4dfbff0ce508..3fe0b2da2df3 100644
--- a/sound/soc/intel/avs/debugfs.c
+++ b/sound/soc/intel/avs/debugfs.c
@@ -8,6 +8,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/kfifo.h>
+#include <linux/sprintf.h>
 #include <linux/wait.h>
 #include <linux/sched/signal.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/avs/ipc.c b/sound/soc/intel/avs/ipc.c
index 65bfc83bd1f0..cb17cb58e658 100644
--- a/sound/soc/intel/avs/ipc.c
+++ b/sound/soc/intel/avs/ipc.c
@@ -13,6 +13,7 @@
 #include "messages.h"
 #include "registers.h"
 #include "trace.h"
+#include <linux/completion.h>
 
 #define AVS_IPC_TIMEOUT_MS	300
 #define AVS_D0IX_DELAY_MS	300
diff --git a/sound/soc/intel/avs/loader.c b/sound/soc/intel/avs/loader.c
index e83ce6a35755..aa5b8129b0a3 100644
--- a/sound/soc/intel/avs/loader.c
+++ b/sound/soc/intel/avs/loader.c
@@ -9,6 +9,7 @@
 #include <linux/firmware.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/hdaudio.h>
 #include <sound/hdaudio_ext.h>
 #include "avs.h"
@@ -16,6 +17,7 @@
 #include "messages.h"
 #include "registers.h"
 #include "topology.h"
+#include <linux/completion.h>
 
 #define AVS_ROM_STS_MASK		0xFF
 #define AVS_ROM_INIT_DONE		0x1
diff --git a/sound/soc/intel/avs/pcm.c b/sound/soc/intel/avs/pcm.c
index 4dfc5a1ebb7c..05d2e363a1aa 100644
--- a/sound/soc/intel/avs/pcm.c
+++ b/sound/soc/intel/avs/pcm.c
@@ -8,6 +8,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/device.h>
+#include <linux/sprintf.h>
 #include <sound/hda_register.h>
 #include <sound/hdaudio_ext.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/intel/avs/topology.c b/sound/soc/intel/avs/topology.c
index 13061bd1488b..21b5fabd392a 100644
--- a/sound/soc/intel/avs/topology.c
+++ b/sound/soc/intel/avs/topology.c
@@ -7,6 +7,7 @@
 //
 
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include <sound/soc.h>
 #include <sound/soc-acpi.h>
diff --git a/sound/soc/intel/avs/trace.h b/sound/soc/intel/avs/trace.h
index 855b06bb14b0..935c9dec5c33 100644
--- a/sound/soc/intel/avs/trace.h
+++ b/sound/soc/intel/avs/trace.h
@@ -7,6 +7,7 @@
 
 #include <linux/types.h>
 #include <linux/tracepoint.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 TRACE_EVENT(avs_dsp_core_op,
 
diff --git a/sound/soc/intel/boards/bxt_da7219_max98357a.c b/sound/soc/intel/boards/bxt_da7219_max98357a.c
index 540f7a29310a..8ca1605aec24 100644
--- a/sound/soc/intel/boards/bxt_da7219_max98357a.c
+++ b/sound/soc/intel/boards/bxt_da7219_max98357a.c
@@ -11,6 +11,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/bxt_rt298.c b/sound/soc/intel/boards/bxt_rt298.c
index c0eb65c14aa9..6f838fde4918 100644
--- a/sound/soc/intel/boards/bxt_rt298.c
+++ b/sound/soc/intel/boards/bxt_rt298.c
@@ -10,6 +10,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/bytcht_cx2072x.c b/sound/soc/intel/boards/bytcht_cx2072x.c
index 10a84a2c1036..ed4b455f6361 100644
--- a/sound/soc/intel/boards/bytcht_cx2072x.c
+++ b/sound/soc/intel/boards/bytcht_cx2072x.c
@@ -10,6 +10,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/jack.h>
diff --git a/sound/soc/intel/boards/bytcht_da7213.c b/sound/soc/intel/boards/bytcht_da7213.c
index 7e5eea690023..0b7fa8abb5c0 100644
--- a/sound/soc/intel/boards/bytcht_da7213.c
+++ b/sound/soc/intel/boards/bytcht_da7213.c
@@ -15,6 +15,7 @@
 #include <linux/acpi.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/bytcht_es8316.c b/sound/soc/intel/boards/bytcht_es8316.c
index 1564a88a885e..f8adae7a3a62 100644
--- a/sound/soc/intel/boards/bytcht_es8316.c
+++ b/sound/soc/intel/boards/bytcht_es8316.c
@@ -13,6 +13,7 @@
  */
 #include <linux/acpi.h>
 #include <linux/clk.h>
+#include <linux/completion.h>
 #include <linux/device.h>
 #include <linux/dmi.h>
 #include <linux/gpio/consumer.h>
@@ -22,6 +23,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/intel/boards/bytcr_rt5640.c b/sound/soc/intel/boards/bytcr_rt5640.c
index 42466b4b1ca4..0a112c638942 100644
--- a/sound/soc/intel/boards/bytcr_rt5640.c
+++ b/sound/soc/intel/boards/bytcr_rt5640.c
@@ -22,6 +22,7 @@
 #include <linux/gpio/machine.h>
 #include <linux/input.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/bytcr_rt5651.c b/sound/soc/intel/boards/bytcr_rt5651.c
index f9fe8414f454..a3ac1dcd1bef 100644
--- a/sound/soc/intel/boards/bytcr_rt5651.c
+++ b/sound/soc/intel/boards/bytcr_rt5651.c
@@ -22,6 +22,7 @@
 #include <linux/gpio/consumer.h>
 #include <linux/gpio/machine.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/bytcr_wm5102.c b/sound/soc/intel/boards/bytcr_wm5102.c
index 6978ebde6693..edd40af370e8 100644
--- a/sound/soc/intel/boards/bytcr_wm5102.c
+++ b/sound/soc/intel/boards/bytcr_wm5102.c
@@ -20,6 +20,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/spi/spi.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/intel/boards/cht_bsw_rt5645.c b/sound/soc/intel/boards/cht_bsw_rt5645.c
index c952a96cde7e..a9a71875e76a 100644
--- a/sound/soc/intel/boards/cht_bsw_rt5645.c
+++ b/sound/soc/intel/boards/cht_bsw_rt5645.c
@@ -18,6 +18,7 @@
 #include <linux/clk.h>
 #include <linux/dmi.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/cht_bsw_rt5672.c b/sound/soc/intel/boards/cht_bsw_rt5672.c
index 8cf0b33cc02e..e900de06a19a 100644
--- a/sound/soc/intel/boards/cht_bsw_rt5672.c
+++ b/sound/soc/intel/boards/cht_bsw_rt5672.c
@@ -14,6 +14,7 @@
 #include <linux/platform_device.h>
 #include <linux/slab.h>
 #include <linux/clk.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/cml_rt1011_rt5682.c b/sound/soc/intel/boards/cml_rt1011_rt5682.c
index 679a09b63ea5..9dc1a11e06e5 100644
--- a/sound/soc/intel/boards/cml_rt1011_rt5682.c
+++ b/sound/soc/intel/boards/cml_rt1011_rt5682.c
@@ -12,6 +12,7 @@
 #include <linux/dmi.h>
 #include <linux/slab.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/glk_rt5682_max98357a.c b/sound/soc/intel/boards/glk_rt5682_max98357a.c
index 657e4658234c..99d2d1e67780 100644
--- a/sound/soc/intel/boards/glk_rt5682_max98357a.c
+++ b/sound/soc/intel/boards/glk_rt5682_max98357a.c
@@ -11,6 +11,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/kbl_da7219_max98357a.c b/sound/soc/intel/boards/kbl_da7219_max98357a.c
index a5d8965303a8..1d0c45c4472b 100644
--- a/sound/soc/intel/boards/kbl_da7219_max98357a.c
+++ b/sound/soc/intel/boards/kbl_da7219_max98357a.c
@@ -12,6 +12,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/kbl_da7219_max98927.c b/sound/soc/intel/boards/kbl_da7219_max98927.c
index 98c11ec0adc0..04b1b7f8ab29 100644
--- a/sound/soc/intel/boards/kbl_da7219_max98927.c
+++ b/sound/soc/intel/boards/kbl_da7219_max98927.c
@@ -12,6 +12,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/kbl_rt5660.c b/sound/soc/intel/boards/kbl_rt5660.c
index 30e0aca161cd..16edb0fd8978 100644
--- a/sound/soc/intel/boards/kbl_rt5660.c
+++ b/sound/soc/intel/boards/kbl_rt5660.c
@@ -15,6 +15,7 @@
 #include <linux/platform_device.h>
 #include <linux/gpio/consumer.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/kbl_rt5663_max98927.c b/sound/soc/intel/boards/kbl_rt5663_max98927.c
index 9071b1f1cbd0..4b4dc1990ff4 100644
--- a/sound/soc/intel/boards/kbl_rt5663_max98927.c
+++ b/sound/soc/intel/boards/kbl_rt5663_max98927.c
@@ -12,6 +12,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/kbl_rt5663_rt5514_max98927.c b/sound/soc/intel/boards/kbl_rt5663_rt5514_max98927.c
index 178fe9c37df6..0f5a2028d493 100644
--- a/sound/soc/intel/boards/kbl_rt5663_rt5514_max98927.c
+++ b/sound/soc/intel/boards/kbl_rt5663_rt5514_max98927.c
@@ -13,6 +13,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/skl_hda_dsp_common.c b/sound/soc/intel/boards/skl_hda_dsp_common.c
index e9cefa4ae56d..e6b554a4ea67 100644
--- a/sound/soc/intel/boards/skl_hda_dsp_common.c
+++ b/sound/soc/intel/boards/skl_hda_dsp_common.c
@@ -6,6 +6,7 @@
  */
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/skl_hda_dsp_generic.c b/sound/soc/intel/boards/skl_hda_dsp_generic.c
index 6e172719c979..5e14f0ff7dbd 100644
--- a/sound/soc/intel/boards/skl_hda_dsp_generic.c
+++ b/sound/soc/intel/boards/skl_hda_dsp_generic.c
@@ -7,6 +7,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/skl_nau88l25_max98357a.c b/sound/soc/intel/boards/skl_nau88l25_max98357a.c
index 0e7025834594..a5229830a464 100644
--- a/sound/soc/intel/boards/skl_nau88l25_max98357a.c
+++ b/sound/soc/intel/boards/skl_nau88l25_max98357a.c
@@ -8,6 +8,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/intel/boards/skl_nau88l25_ssm4567.c b/sound/soc/intel/boards/skl_nau88l25_ssm4567.c
index fadc25a536b4..a0e7e693c6e2 100644
--- a/sound/soc/intel/boards/skl_nau88l25_ssm4567.c
+++ b/sound/soc/intel/boards/skl_nau88l25_ssm4567.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/skl_rt286.c b/sound/soc/intel/boards/skl_rt286.c
index c59c60e28091..f8c981c89726 100644
--- a/sound/soc/intel/boards/skl_rt286.c
+++ b/sound/soc/intel/boards/skl_rt286.c
@@ -12,6 +12,7 @@
 
 #include <linux/module.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/boards/sof_es8336.c b/sound/soc/intel/boards/sof_es8336.c
index c1fcc156a575..517f1f3c2c30 100644
--- a/sound/soc/intel/boards/sof_es8336.c
+++ b/sound/soc/intel/boards/sof_es8336.c
@@ -14,6 +14,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/intel/boards/sof_maxim_common.c b/sound/soc/intel/boards/sof_maxim_common.c
index cf2974718271..ec974b66517f 100644
--- a/sound/soc/intel/boards/sof_maxim_common.c
+++ b/sound/soc/intel/boards/sof_maxim_common.c
@@ -2,6 +2,7 @@
 //
 // Copyright(c) 2020 Intel Corporation. All rights reserved.
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/intel/boards/sof_sdw.c b/sound/soc/intel/boards/sof_sdw.c
index 08f330ed5c2e..7dd1dc9a685c 100644
--- a/sound/soc/intel/boards/sof_sdw.c
+++ b/sound/soc/intel/boards/sof_sdw.c
@@ -14,6 +14,7 @@
 #include <sound/soc-acpi.h>
 #include "sof_sdw_common.h"
 #include "../../codecs/rt711.h"
+#include <linux/completion.h>
 
 unsigned long sof_sdw_quirk = RT711_JD1;
 static int quirk_override = -1;
diff --git a/sound/soc/intel/boards/sof_sdw_cs_amp.c b/sound/soc/intel/boards/sof_sdw_cs_amp.c
index 56cf75bc6cc4..0e6012fb3f81 100644
--- a/sound/soc/intel/boards/sof_sdw_cs_amp.c
+++ b/sound/soc/intel/boards/sof_sdw_cs_amp.c
@@ -7,6 +7,7 @@
 
 #include <linux/device.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <sound/soc-acpi.h>
 #include <sound/soc-dai.h>
diff --git a/sound/soc/intel/boards/sof_sdw_maxim.c b/sound/soc/intel/boards/sof_sdw_maxim.c
index 034730432671..45fa96f6a3ea 100644
--- a/sound/soc/intel/boards/sof_sdw_maxim.c
+++ b/sound/soc/intel/boards/sof_sdw_maxim.c
@@ -6,6 +6,7 @@
 
 #include <linux/device.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <sound/control.h>
 #include <sound/soc.h>
 #include <sound/soc-acpi.h>
diff --git a/sound/soc/intel/boards/sof_sdw_rt_amp.c b/sound/soc/intel/boards/sof_sdw_rt_amp.c
index 202edab95000..910703faa5c3 100644
--- a/sound/soc/intel/boards/sof_sdw_rt_amp.c
+++ b/sound/soc/intel/boards/sof_sdw_rt_amp.c
@@ -7,6 +7,7 @@
 
 #include <linux/device.h>
 #include <linux/errno.h>
+#include <linux/sprintf.h>
 #include <sound/control.h>
 #include <sound/soc.h>
 #include <sound/soc-acpi.h>
diff --git a/sound/soc/intel/boards/sof_wm8804.c b/sound/soc/intel/boards/sof_wm8804.c
index 4cb0d463bf40..8c1ebb26d68a 100644
--- a/sound/soc/intel/boards/sof_wm8804.c
+++ b/sound/soc/intel/boards/sof_wm8804.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/platform_device.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/intel/catpt/device.c b/sound/soc/intel/catpt/device.c
index cac3dffbd0d9..a6a02dec5320 100644
--- a/sound/soc/intel/catpt/device.c
+++ b/sound/soc/intel/catpt/device.c
@@ -13,6 +13,7 @@
 //
 
 #include <linux/acpi.h>
+#include <linux/completion.h>
 #include <linux/dma-mapping.h>
 #include <linux/interrupt.h>
 #include <linux/module.h>
diff --git a/sound/soc/intel/catpt/ipc.c b/sound/soc/intel/catpt/ipc.c
index 5b718a846fda..e20268059b9c 100644
--- a/sound/soc/intel/catpt/ipc.c
+++ b/sound/soc/intel/catpt/ipc.c
@@ -10,6 +10,7 @@
 #include "messages.h"
 #include "registers.h"
 #include "trace.h"
+#include <linux/completion.h>
 
 #define CATPT_IPC_TIMEOUT_MS	300
 
diff --git a/sound/soc/intel/catpt/loader.c b/sound/soc/intel/catpt/loader.c
index ff7b8f0d34ac..e22b83a14ac7 100644
--- a/sound/soc/intel/catpt/loader.c
+++ b/sound/soc/intel/catpt/loader.c
@@ -10,6 +10,7 @@
 #include <linux/slab.h>
 #include "core.h"
 #include "registers.h"
+#include <linux/completion.h>
 
 /* FW load (200ms) plus operational delays */
 #define FW_READY_TIMEOUT_MS	250
diff --git a/sound/soc/intel/skylake/skl-debug.c b/sound/soc/intel/skylake/skl-debug.c
index a15aa2ffa681..4ec18a6e5e11 100644
--- a/sound/soc/intel/skylake/skl-debug.c
+++ b/sound/soc/intel/skylake/skl-debug.c
@@ -7,6 +7,7 @@
 
 #include <linux/pci.h>
 #include <linux/debugfs.h>
+#include <linux/sprintf.h>
 #include <uapi/sound/skl-tplg-interface.h>
 #include "skl.h"
 #include "skl-sst-dsp.h"
diff --git a/sound/soc/intel/skylake/skl-nhlt.c b/sound/soc/intel/skylake/skl-nhlt.c
index e617b4c335a4..c5257abfec58 100644
--- a/sound/soc/intel/skylake/skl-nhlt.c
+++ b/sound/soc/intel/skylake/skl-nhlt.c
@@ -9,6 +9,7 @@
  * ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  */
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 #include <sound/intel-nhlt.h>
 #include "skl.h"
 #include "skl-i2s.h"
diff --git a/sound/soc/intel/skylake/skl-sst-cldma.c b/sound/soc/intel/skylake/skl-sst-cldma.c
index b0204ea00f07..b13fc0844f98 100644
--- a/sound/soc/intel/skylake/skl-sst-cldma.c
+++ b/sound/soc/intel/skylake/skl-sst-cldma.c
@@ -9,6 +9,7 @@
 
 #include <linux/device.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mm.h>
 #include <linux/delay.h>
 #include <sound/hda_register.h>
diff --git a/sound/soc/intel/skylake/skl-sst.c b/sound/soc/intel/skylake/skl-sst.c
index 39d027ac16ec..3e38120f256d 100644
--- a/sound/soc/intel/skylake/skl-sst.c
+++ b/sound/soc/intel/skylake/skl-sst.c
@@ -12,6 +12,7 @@
 #include <linux/delay.h>
 #include <linux/device.h>
 #include <linux/err.h>
+#include <linux/sprintf.h>
 #include <linux/uuid.h>
 #include "../common/sst-dsp.h"
 #include "../common/sst-dsp-priv.h"
diff --git a/sound/soc/intel/skylake/skl-topology.c b/sound/soc/intel/skylake/skl-topology.c
index 96cfebded072..4f7bc04765ec 100644
--- a/sound/soc/intel/skylake/skl-topology.c
+++ b/sound/soc/intel/skylake/skl-topology.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/firmware.h>
 #include <linux/uuid.h>
diff --git a/sound/soc/loongson/loongson_card.c b/sound/soc/loongson/loongson_card.c
index e8432d466f60..8068dda44e25 100644
--- a/sound/soc/loongson/loongson_card.c
+++ b/sound/soc/loongson/loongson_card.c
@@ -7,6 +7,7 @@
 //
 
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <sound/soc-acpi.h>
 #include <linux/acpi.h>
diff --git a/sound/soc/loongson/loongson_dma.c b/sound/soc/loongson/loongson_dma.c
index 8090662e8ff2..c6e823bb4a00 100644
--- a/sound/soc/loongson/loongson_dma.c
+++ b/sound/soc/loongson/loongson_dma.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/io-64-nonatomic-lo-hi.h>
 #include <linux/delay.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/pm_runtime.h>
 #include <linux/dma-mapping.h>
 #include <sound/soc.h>
diff --git a/sound/soc/mediatek/common/mtk-afe-fe-dai.c b/sound/soc/mediatek/common/mtk-afe-fe-dai.c
index 3044d9ab3d4d..947ef1331f88 100644
--- a/sound/soc/mediatek/common/mtk-afe-fe-dai.c
+++ b/sound/soc/mediatek/common/mtk-afe-fe-dai.c
@@ -7,6 +7,7 @@
  */
 
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
diff --git a/sound/soc/mediatek/mt2701/mt2701-afe-clock-ctrl.c b/sound/soc/mediatek/mt2701/mt2701-afe-clock-ctrl.c
index ae620890bb3a..a7b929529640 100644
--- a/sound/soc/mediatek/mt2701/mt2701-afe-clock-ctrl.c
+++ b/sound/soc/mediatek/mt2701/mt2701-afe-clock-ctrl.c
@@ -9,6 +9,7 @@
 
 #include "mt2701-afe-common.h"
 #include "mt2701-afe-clock-ctrl.h"
+#include <linux/sprintf.h>
 
 static const char *const base_clks[] = {
 	[MT2701_INFRA_SYS_AUDIO] = "infra_sys_audio_clk",
diff --git a/sound/soc/mediatek/mt8186/mt8186-mt6366-da7219-max98357.c b/sound/soc/mediatek/mt8186/mt8186-mt6366-da7219-max98357.c
index d86dc45be30c..be8bacaaf854 100644
--- a/sound/soc/mediatek/mt8186/mt8186-mt6366-da7219-max98357.c
+++ b/sound/soc/mediatek/mt8186/mt8186-mt6366-da7219-max98357.c
@@ -10,6 +10,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/mediatek/mt8186/mt8186-mt6366-rt1019-rt5682s.c b/sound/soc/mediatek/mt8186/mt8186-mt6366-rt1019-rt5682s.c
index f78197c8e582..8867f5c5eb57 100644
--- a/sound/soc/mediatek/mt8186/mt8186-mt6366-rt1019-rt5682s.c
+++ b/sound/soc/mediatek/mt8186/mt8186-mt6366-rt1019-rt5682s.c
@@ -11,6 +11,7 @@
 #include <linux/input.h>
 #include <linux/module.h>
 #include <linux/of.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm_params.h>
 #include <sound/rt5682.h>
diff --git a/sound/soc/mediatek/mt8188/mt8188-dai-etdm.c b/sound/soc/mediatek/mt8188/mt8188-dai-etdm.c
index 2a48f5fd6826..0a11a854425d 100644
--- a/sound/soc/mediatek/mt8188/mt8188-dai-etdm.c
+++ b/sound/soc/mediatek/mt8188/mt8188-dai-etdm.c
@@ -11,6 +11,7 @@
 #include <linux/bitfield.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include "mt8188-afe-clk.h"
 #include "mt8188-afe-common.h"
diff --git a/sound/soc/mediatek/mt8188/mt8188-mt6359.c b/sound/soc/mediatek/mt8188/mt8188-mt6359.c
index a391066ab204..fc52c242162b 100644
--- a/sound/soc/mediatek/mt8188/mt8188-mt6359.c
+++ b/sound/soc/mediatek/mt8188/mt8188-mt6359.c
@@ -11,6 +11,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm_params.h>
 #include <sound/soc.h>
diff --git a/sound/soc/mediatek/mt8195/mt8195-dai-etdm.c b/sound/soc/mediatek/mt8195/mt8195-dai-etdm.c
index fd4f9f8f032d..8ccf568e016d 100644
--- a/sound/soc/mediatek/mt8195/mt8195-dai-etdm.c
+++ b/sound/soc/mediatek/mt8195/mt8195-dai-etdm.c
@@ -10,6 +10,7 @@
 #include <linux/delay.h>
 #include <linux/pm_runtime.h>
 #include <linux/regmap.h>
+#include <linux/sprintf.h>
 #include <sound/pcm_params.h>
 #include "mt8195-afe-clk.h"
 #include "mt8195-afe-common.h"
diff --git a/sound/soc/mediatek/mt8195/mt8195-mt6359.c b/sound/soc/mediatek/mt8195/mt8195-mt6359.c
index 53fd8a897b9d..5873b4087340 100644
--- a/sound/soc/mediatek/mt8195/mt8195-mt6359.c
+++ b/sound/soc/mediatek/mt8195/mt8195-mt6359.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/jack.h>
 #include <sound/pcm_params.h>
 #include <sound/rt5682.h>
diff --git a/sound/soc/meson/axg-card.c b/sound/soc/meson/axg-card.c
index 3180aa4d3a15..6b30424b0882 100644
--- a/sound/soc/meson/axg-card.c
+++ b/sound/soc/meson/axg-card.c
@@ -5,6 +5,7 @@
 
 #include <linux/module.h>
 #include <linux/of_platform.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <sound/soc-dai.h>
 
diff --git a/sound/soc/qcom/qdsp6/q6apm.h b/sound/soc/qcom/qdsp6/q6apm.h
index c248c8d2b1ab..5aa572a04a63 100644
--- a/sound/soc/qcom/qdsp6/q6apm.h
+++ b/sound/soc/qcom/qdsp6/q6apm.h
@@ -4,6 +4,7 @@
 #include <linux/types.h>
 #include <linux/slab.h>
 #include <linux/wait.h>
+#include <linux/idr.h>
 #include <linux/kernel.h>
 #include <linux/module.h>
 #include <linux/sched.h>
diff --git a/sound/soc/qcom/qdsp6/q6asm.c b/sound/soc/qcom/qdsp6/q6asm.c
index 06a802f9dba5..6c698e743c44 100644
--- a/sound/soc/qcom/qdsp6/q6asm.c
+++ b/sound/soc/qcom/qdsp6/q6asm.c
@@ -3,6 +3,7 @@
 // Copyright (c) 2018, Linaro Limited
 
 #include <dt-bindings/sound/qcom,q6asm.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mutex.h>
 #include <linux/wait.h>
 #include <linux/module.h>
diff --git a/sound/soc/qcom/qdsp6/topology.c b/sound/soc/qcom/qdsp6/topology.c
index 70572c83e101..9e11eb2ca251 100644
--- a/sound/soc/qcom/qdsp6/topology.c
+++ b/sound/soc/qcom/qdsp6/topology.c
@@ -7,6 +7,7 @@
 #include <sound/control.h>
 #include <sound/asound.h>
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <sound/soc-topology.h>
 #include <sound/soc-dpcm.h>
 #include <uapi/sound/snd_ar_tokens.h>
diff --git a/sound/soc/sh/fsi.c b/sound/soc/sh/fsi.c
index 84601ba43b7d..6ce2bdae7c05 100644
--- a/sound/soc/sh/fsi.c
+++ b/sound/soc/sh/fsi.c
@@ -17,6 +17,7 @@
 #include <linux/sh_dma.h>
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <sound/soc.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/sh/rcar/adg.c b/sound/soc/sh/rcar/adg.c
index 230c48648af3..878726633378 100644
--- a/sound/soc/sh/rcar/adg.c
+++ b/sound/soc/sh/rcar/adg.c
@@ -6,6 +6,7 @@
 #include <linux/clk-provider.h>
 #include <linux/clkdev.h>
 #include "rsnd.h"
+#include <linux/sprintf.h>
 
 #define CLKA	0
 #define CLKB	1
diff --git a/sound/soc/sh/rcar/core.c b/sound/soc/sh/rcar/core.c
index 0b1aa23c1189..4e53f2d77f24 100644
--- a/sound/soc/sh/rcar/core.c
+++ b/sound/soc/sh/rcar/core.c
@@ -93,6 +93,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/of_graph.h>
 #include "rsnd.h"
+#include <linux/sprintf.h>
 
 #define RSND_RATES SNDRV_PCM_RATE_8000_192000
 #define RSND_FMTS (SNDRV_PCM_FMTBIT_S8 |\
diff --git a/sound/soc/sh/rcar/ctu.c b/sound/soc/sh/rcar/ctu.c
index e39eb2ac7e95..9e84674722aa 100644
--- a/sound/soc/sh/rcar/ctu.c
+++ b/sound/soc/sh/rcar/ctu.c
@@ -5,6 +5,7 @@
 // Copyright (c) 2015 Kuninori Morimoto <kuninori.morimoto.gx@renesas.com>
 
 #include "rsnd.h"
+#include <linux/sprintf.h>
 
 #define CTU_NAME_SIZE	16
 #define CTU_NAME "ctu"
diff --git a/sound/soc/sh/rcar/debugfs.c b/sound/soc/sh/rcar/debugfs.c
index 26d3b310b9db..231999600e6a 100644
--- a/sound/soc/sh/rcar/debugfs.c
+++ b/sound/soc/sh/rcar/debugfs.c
@@ -13,6 +13,7 @@
 
 #include <linux/debugfs.h>
 #include "rsnd.h"
+#include <linux/sprintf.h>
 
 static int rsnd_debugfs_show(struct seq_file *m, void *v)
 {
diff --git a/sound/soc/sh/rcar/dvc.c b/sound/soc/sh/rcar/dvc.c
index 16befcbc312c..d4e79df2f7e9 100644
--- a/sound/soc/sh/rcar/dvc.c
+++ b/sound/soc/sh/rcar/dvc.c
@@ -28,6 +28,7 @@
  */
 
 #include "rsnd.h"
+#include <linux/sprintf.h>
 
 #define RSND_DVC_NAME_SIZE	16
 
diff --git a/sound/soc/sh/rcar/mix.c b/sound/soc/sh/rcar/mix.c
index 1de0e085804c..e784a1b49f6e 100644
--- a/sound/soc/sh/rcar/mix.c
+++ b/sound/soc/sh/rcar/mix.c
@@ -31,6 +31,7 @@
  */
 
 #include "rsnd.h"
+#include <linux/sprintf.h>
 
 #define MIX_NAME_SIZE	16
 #define MIX_NAME "mix"
diff --git a/sound/soc/sh/rcar/src.c b/sound/soc/sh/rcar/src.c
index 3241a1bdc9ea..7e6d180053cd 100644
--- a/sound/soc/sh/rcar/src.c
+++ b/sound/soc/sh/rcar/src.c
@@ -24,6 +24,7 @@
 
 #include <linux/of_irq.h>
 #include "rsnd.h"
+#include <linux/sprintf.h>
 
 #define SRC_NAME "src"
 
diff --git a/sound/soc/sh/rcar/ssi.c b/sound/soc/sh/rcar/ssi.c
index 0a46aa1975fa..9ccb32b1309c 100644
--- a/sound/soc/sh/rcar/ssi.c
+++ b/sound/soc/sh/rcar/ssi.c
@@ -21,6 +21,7 @@
 #include <linux/of_irq.h>
 #include <linux/delay.h>
 #include "rsnd.h"
+#include <linux/sprintf.h>
 #define RSND_SSI_NAME_SIZE 16
 
 /*
diff --git a/sound/soc/soc-component.c b/sound/soc/soc-component.c
index 4d7c2e3c929a..d01340ee33b0 100644
--- a/sound/soc/soc-component.c
+++ b/sound/soc/soc-component.c
@@ -10,6 +10,7 @@
 //
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include <linux/bitops.h>
 
diff --git a/sound/soc/soc-compress.c b/sound/soc/soc-compress.c
index a38fee48ee00..60eae0784aea 100644
--- a/sound/soc/soc-compress.c
+++ b/sound/soc/soc-compress.c
@@ -12,6 +12,7 @@
 #include <linux/init.h>
 #include <linux/delay.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <sound/core.h>
 #include <sound/compress_params.h>
diff --git a/sound/soc/soc-core.c b/sound/soc/soc-core.c
index 516350533e73..9d7e59474074 100644
--- a/sound/soc/soc-core.c
+++ b/sound/soc/soc-core.c
@@ -21,6 +21,7 @@
 #include <linux/moduleparam.h>
 #include <linux/init.h>
 #include <linux/delay.h>
+#include <linux/kstrtox.h>
 #include <linux/pm.h>
 #include <linux/bitops.h>
 #include <linux/debugfs.h>
@@ -32,6 +33,7 @@
 #include <linux/of_graph.h>
 #include <linux/dmi.h>
 #include <linux/acpi.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/soc-dapm.c b/sound/soc/soc-dapm.c
index bffeea80277f..d3daefa24227 100644
--- a/sound/soc/soc-dapm.c
+++ b/sound/soc/soc-dapm.c
@@ -31,6 +31,7 @@
 #include <linux/pinctrl/consumer.h>
 #include <linux/clk.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/pcm.h>
 #include <sound/pcm_params.h>
diff --git a/sound/soc/soc-pcm.c b/sound/soc/soc-pcm.c
index 77ee103b7cd1..046db2aab5aa 100644
--- a/sound/soc/soc-pcm.c
+++ b/sound/soc/soc-pcm.c
@@ -15,6 +15,7 @@
 #include <linux/delay.h>
 #include <linux/pinctrl/consumer.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/workqueue.h>
 #include <linux/export.h>
 #include <linux/debugfs.h>
diff --git a/sound/soc/soc-topology.c b/sound/soc/soc-topology.c
index ba4890991f0d..4eba37e4457e 100644
--- a/sound/soc/soc-topology.c
+++ b/sound/soc/soc-topology.c
@@ -29,6 +29,7 @@
 #include <sound/soc-dapm.h>
 #include <sound/soc-topology.h>
 #include <sound/tlv.h>
+#include <linux/completion.h>
 
 #define SOC_TPLG_MAGIC_BIG_ENDIAN            0x436F5341 /* ASoC in reverse */
 
diff --git a/sound/soc/sof/amd/acp-loader.c b/sound/soc/sof/amd/acp-loader.c
index d2d21478399e..daac9dced24d 100644
--- a/sound/soc/sof/amd/acp-loader.c
+++ b/sound/soc/sof/amd/acp-loader.c
@@ -12,8 +12,10 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/pci.h>
+#include <linux/sprintf.h>
 
 #include "../ops.h"
 #include "acp-dsp-offset.h"
diff --git a/sound/soc/sof/amd/acp-stream.c b/sound/soc/sof/amd/acp-stream.c
index 6f40ef7ba85e..03f1d0657c1d 100644
--- a/sound/soc/sof/amd/acp-stream.c
+++ b/sound/soc/sof/amd/acp-stream.c
@@ -14,6 +14,7 @@
 #include "../ops.h"
 #include "acp-dsp-offset.h"
 #include "acp.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 #define PTE_GRP1_OFFSET		0x00000000
 #define PTE_GRP2_OFFSET		0x00800000
diff --git a/sound/soc/sof/debug.c b/sound/soc/sof/debug.c
index d547318e0d32..1a87ed2f7568 100644
--- a/sound/soc/sof/debug.c
+++ b/sound/soc/sof/debug.c
@@ -14,6 +14,7 @@
 #include <linux/debugfs.h>
 #include <linux/io.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <sound/sof/ext_manifest.h>
 #include <sound/sof/debug.h>
 #include "sof-priv.h"
diff --git a/sound/soc/sof/fw-file-profile.c b/sound/soc/sof/fw-file-profile.c
index b56b14232444..945cc3a9e56a 100644
--- a/sound/soc/sof/fw-file-profile.c
+++ b/sound/soc/sof/fw-file-profile.c
@@ -7,6 +7,7 @@
 //
 
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <sound/sof.h>
 #include <sound/sof/ext_manifest4.h>
 #include "sof-priv.h"
diff --git a/sound/soc/sof/intel/hda-ctrl.c b/sound/soc/sof/intel/hda-ctrl.c
index 84bf01bd360a..a5339770671b 100644
--- a/sound/soc/sof/intel/hda-ctrl.c
+++ b/sound/soc/sof/intel/hda-ctrl.c
@@ -22,6 +22,7 @@
 #include <sound/hda-mlink.h>
 #include "../ops.h"
 #include "hda.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 
 /*
  * HDA Operations.
diff --git a/sound/soc/sof/intel/hda-loader-skl.c b/sound/soc/sof/intel/hda-loader-skl.c
index 1e77ca936f80..27ea2cf2a217 100644
--- a/sound/soc/sof/intel/hda-loader-skl.c
+++ b/sound/soc/sof/intel/hda-loader-skl.c
@@ -12,6 +12,7 @@
 #include <linux/firmware.h>
 #include <linux/fs.h>
 #include <linux/interrupt.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/mm.h>
 #include <linux/module.h>
 #include <linux/pci.h>
diff --git a/sound/soc/sof/intel/hda-loader.c b/sound/soc/sof/intel/hda-loader.c
index b81f231abee3..fa98e65b0cc1 100644
--- a/sound/soc/sof/intel/hda-loader.c
+++ b/sound/soc/sof/intel/hda-loader.c
@@ -16,6 +16,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <sound/hdaudio_ext.h>
 #include <sound/hda_register.h>
 #include <sound/sof.h>
diff --git a/sound/soc/sof/intel/hda-stream.c b/sound/soc/sof/intel/hda-stream.c
index f2ebadbbcc10..217cdee42ecb 100644
--- a/sound/soc/sof/intel/hda-stream.c
+++ b/sound/soc/sof/intel/hda-stream.c
@@ -22,6 +22,8 @@
 #include "../ops.h"
 #include "../sof-audio.h"
 #include "hda.h"
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
+#include <linux/sprintf.h>
 
 #define HDA_LTRP_GB_VALUE_US	95
 
diff --git a/sound/soc/sof/intel/hda.c b/sound/soc/sof/intel/hda.c
index fe4ae349dad5..c9bf6de9f226 100644
--- a/sound/soc/sof/intel/hda.c
+++ b/sound/soc/sof/intel/hda.c
@@ -17,6 +17,7 @@
 
 #include <sound/hdaudio_ext.h>
 #include <sound/hda_register.h>
+#include <linux/sprintf.h>
 
 #include <linux/acpi.h>
 #include <linux/module.h>
diff --git a/sound/soc/sof/intel/mtl.c b/sound/soc/sof/intel/mtl.c
index df05dc77b8d5..7d85ad52299e 100644
--- a/sound/soc/sof/intel/mtl.c
+++ b/sound/soc/sof/intel/mtl.c
@@ -10,6 +10,7 @@
  */
 
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <sound/sof/ipc4/header.h>
 #include <trace/events/sof_intel.h>
 #include "../ipc4-priv.h"
diff --git a/sound/soc/sof/ipc3-dtrace.c b/sound/soc/sof/ipc3-dtrace.c
index 0dca139322f3..bb01f2094d21 100644
--- a/sound/soc/sof/ipc3-dtrace.c
+++ b/sound/soc/sof/ipc3-dtrace.c
@@ -11,6 +11,7 @@
 #include "ops.h"
 #include "sof-utils.h"
 #include "ipc3-priv.h"
+#include <linux/sprintf.h>
 
 #define TRACE_FILTER_ELEMENTS_PER_ENTRY 4
 #define TRACE_FILTER_MAX_CONFIG_STRING_LENGTH 1024
diff --git a/sound/soc/sof/ipc4-loader.c b/sound/soc/sof/ipc4-loader.c
index c79479afa8d0..777dba705d15 100644
--- a/sound/soc/sof/ipc4-loader.c
+++ b/sound/soc/sof/ipc4-loader.c
@@ -6,6 +6,7 @@
 // Copyright(c) 2022 Intel Corporation. All rights reserved.
 
 #include <linux/firmware.h>
+#include <linux/sprintf.h>
 #include <sound/sof/ext_manifest4.h>
 #include <sound/sof/ipc4/header.h>
 #include <trace/events/sof.h>
diff --git a/sound/soc/sof/ipc4-mtrace.c b/sound/soc/sof/ipc4-mtrace.c
index 9f1e33ee8826..be4a6708afda 100644
--- a/sound/soc/sof/ipc4-mtrace.c
+++ b/sound/soc/sof/ipc4-mtrace.c
@@ -4,6 +4,7 @@
 
 #include <linux/debugfs.h>
 #include <linux/sched/signal.h>
+#include <linux/sprintf.h>
 #include <sound/sof/ipc4/header.h>
 #include "sof-priv.h"
 #include "ipc4-priv.h"
diff --git a/sound/soc/sof/loader.c b/sound/soc/sof/loader.c
index 2f8555f11c03..f698fc239007 100644
--- a/sound/soc/sof/loader.c
+++ b/sound/soc/sof/loader.c
@@ -13,6 +13,7 @@
 #include <linux/firmware.h>
 #include "sof-priv.h"
 #include "ops.h"
+#include <linux/sprintf.h>
 
 int snd_sof_load_firmware_raw(struct snd_sof_dev *sdev)
 {
diff --git a/sound/soc/sof/sof-audio.h b/sound/soc/sof/sof-audio.h
index f98242a404db..10bf0dacdf80 100644
--- a/sound/soc/sof/sof-audio.h
+++ b/sound/soc/sof/sof-audio.h
@@ -11,6 +11,7 @@
 #ifndef __SOUND_SOC_SOF_AUDIO_H
 #define __SOUND_SOC_SOF_AUDIO_H
 
+#include <linux/idr.h>
 #include <linux/workqueue.h>
 
 #include <sound/soc.h>
diff --git a/sound/soc/sof/sof-client-ipc-flood-test.c b/sound/soc/sof/sof-client-ipc-flood-test.c
index c0d6723aed59..bec1ea545fb1 100644
--- a/sound/soc/sof/sof-client-ipc-flood-test.c
+++ b/sound/soc/sof/sof-client-ipc-flood-test.c
@@ -9,11 +9,13 @@
 #include <linux/auxiliary_bus.h>
 #include <linux/completion.h>
 #include <linux/debugfs.h>
+#include <linux/kstrtox.h>
 #include <linux/ktime.h>
 #include <linux/mod_devicetable.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <sound/sof/header.h>
 
diff --git a/sound/soc/sof/sof-client-probes.c b/sound/soc/sof/sof-client-probes.c
index 30f771ac7bbf..1414bc5bfbde 100644
--- a/sound/soc/sof/sof-client-probes.c
+++ b/sound/soc/sof/sof-client-probes.c
@@ -12,6 +12,7 @@
 #include <linux/debugfs.h>
 #include <linux/module.h>
 #include <linux/pm_runtime.h>
+#include <linux/sprintf.h>
 #include <linux/string_helpers.h>
 #include <linux/stddef.h>
 
diff --git a/sound/soc/stm/stm32_adfsdm.c b/sound/soc/stm/stm32_adfsdm.c
index fb5dd9a68bea..9132072c2bc7 100644
--- a/sound/soc/stm/stm32_adfsdm.c
+++ b/sound/soc/stm/stm32_adfsdm.c
@@ -16,6 +16,7 @@
 #include <linux/iio/iio.h>
 #include <linux/iio/consumer.h>
 #include <linux/iio/adc/stm32-dfsdm-adc.h>
+#include <linux/sprintf.h>
 
 #include <sound/pcm.h>
 #include <sound/soc.h>
diff --git a/sound/soc/tegra/tegra30_ahub.c b/sound/soc/tegra/tegra30_ahub.c
index d2e8078e444a..f78631167295 100644
--- a/sound/soc/tegra/tegra30_ahub.c
+++ b/sound/soc/tegra/tegra30_ahub.c
@@ -15,6 +15,7 @@
 #include <linux/regmap.h>
 #include <linux/reset.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <sound/soc.h>
 #include "tegra30_ahub.h"
 
diff --git a/sound/soc/ti/j721e-evm.c b/sound/soc/ti/j721e-evm.c
index d9d1e021f5b2..dd46945021de 100644
--- a/sound/soc/ti/j721e-evm.c
+++ b/sound/soc/ti/j721e-evm.c
@@ -8,6 +8,7 @@
 #include <linux/module.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/soc/ti/omap-mcbsp-st.c b/sound/soc/ti/omap-mcbsp-st.c
index 901578896ef3..83f3d2a6907c 100644
--- a/sound/soc/ti/omap-mcbsp-st.c
+++ b/sound/soc/ti/omap-mcbsp-st.c
@@ -19,6 +19,7 @@
 #include <linux/delay.h>
 #include <linux/io.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 
 #include "omap-mcbsp.h"
 #include "omap-mcbsp-priv.h"
diff --git a/sound/soc/ti/omap-mcbsp.c b/sound/soc/ti/omap-mcbsp.c
index 2110ffe5281c..4d3d1ae4bbc0 100644
--- a/sound/soc/ti/omap-mcbsp.c
+++ b/sound/soc/ti/omap-mcbsp.c
@@ -9,6 +9,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/kstrtox.h>
 #include <linux/module.h>
 #include <linux/device.h>
 #include <linux/pm_runtime.h>
diff --git a/sound/soc/xilinx/xlnx_formatter_pcm.c b/sound/soc/xilinx/xlnx_formatter_pcm.c
index 299cfb5e2022..bae8cf923346 100644
--- a/sound/soc/xilinx/xlnx_formatter_pcm.c
+++ b/sound/soc/xilinx/xlnx_formatter_pcm.c
@@ -8,6 +8,7 @@
 
 #include <linux/clk.h>
 #include <linux/io.h>
+#include <linux/kernel.h> // for upper_32_bits(), lower_32_bits()
 #include <linux/module.h>
 #include <linux/of_address.h>
 #include <linux/of_irq.h>
diff --git a/sound/sound_core.c b/sound/sound_core.c
index d81fed1c1226..4c5617247996 100644
--- a/sound/sound_core.c
+++ b/sound/sound_core.c
@@ -13,6 +13,7 @@
 #include <linux/err.h>
 #include <linux/kdev_t.h>
 #include <linux/major.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 
 #ifdef CONFIG_SOUND_OSS_CORE
diff --git a/sound/sparc/amd7930.c b/sound/sparc/amd7930.c
index 0fea04acc3ea..12ef5e2be653 100644
--- a/sound/sparc/amd7930.c
+++ b/sound/sparc/amd7930.c
@@ -39,6 +39,7 @@
 #include <linux/of.h>
 #include <linux/platform_device.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/sparc/cs4231.c b/sound/sparc/cs4231.c
index c2ad3fa2f25a..d15178e45356 100644
--- a/sound/sparc/cs4231.c
+++ b/sound/sparc/cs4231.c
@@ -19,6 +19,7 @@
 #include <linux/io.h>
 #include <linux/of.h>
 #include <linux/platform_device.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/sparc/dbri.c b/sound/sparc/dbri.c
index 050e98f32d36..1de17cf87c62 100644
--- a/sound/sparc/dbri.c
+++ b/sound/sparc/dbri.c
@@ -60,6 +60,7 @@
 #include <linux/io.h>
 #include <linux/dma-mapping.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 
 #include <sound/core.h>
 #include <sound/pcm.h>
diff --git a/sound/spi/at73c213.c b/sound/spi/at73c213.c
index 1e8765d75d8f..82a4ea719966 100644
--- a/sound/spi/at73c213.c
+++ b/sound/spi/at73c213.c
@@ -18,6 +18,7 @@
 #include <linux/mutex.h>
 #include <linux/platform_device.h>
 #include <linux/io.h>
+#include <linux/sprintf.h>
 
 #include <sound/initval.h>
 #include <sound/control.h>
diff --git a/sound/synth/emux/emux_oss.c b/sound/synth/emux/emux_oss.c
index d8d32671f703..e0b9b2f8a675 100644
--- a/sound/synth/emux/emux_oss.c
+++ b/sound/synth/emux/emux_oss.c
@@ -11,6 +11,7 @@
 
 
 #include <linux/export.h>
+#include <linux/sprintf.h>
 #include <linux/uaccess.h>
 #include <sound/core.h>
 #include "emux_voice.h"
diff --git a/sound/synth/emux/emux_proc.c b/sound/synth/emux/emux_proc.c
index 7993e6a01e54..7271f9db934d 100644
--- a/sound/synth/emux/emux_proc.c
+++ b/sound/synth/emux/emux_proc.c
@@ -10,6 +10,7 @@
 #include <sound/emux_synth.h>
 #include <sound/info.h>
 #include "emux_voice.h"
+#include <linux/sprintf.h>
 
 static void
 snd_emux_proc_info_read(struct snd_info_entry *entry, 
diff --git a/sound/synth/emux/emux_seq.c b/sound/synth/emux/emux_seq.c
index b227c7e0bc2a..c46fba894241 100644
--- a/sound/synth/emux/emux_seq.c
+++ b/sound/synth/emux/emux_seq.c
@@ -9,6 +9,7 @@
 #include "emux_voice.h"
 #include <linux/slab.h>
 #include <linux/module.h>
+#include <linux/sprintf.h>
 
 /* Prototypes for static functions */
 static void free_port(void *private);
diff --git a/sound/usb/6fire/chip.c b/sound/usb/6fire/chip.c
index 33e962178c93..cc7c9fa72b68 100644
--- a/sound/usb/6fire/chip.c
+++ b/sound/usb/6fire/chip.c
@@ -15,6 +15,7 @@
 #include "control.h"
 #include "comm.h"
 #include "midi.h"
+#include <linux/sprintf.h>
 
 #include <linux/moduleparam.h>
 #include <linux/interrupt.h>
diff --git a/sound/usb/bcd2000/bcd2000.c b/sound/usb/bcd2000/bcd2000.c
index 392b4d8e9e76..a4b8fe1af6c9 100644
--- a/sound/usb/bcd2000/bcd2000.c
+++ b/sound/usb/bcd2000/bcd2000.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/bitmap.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/audio.h>
 #include <sound/core.h>
diff --git a/sound/usb/caiaq/device.c b/sound/usb/caiaq/device.c
index b5cbf1f195c4..7635f1e307c3 100644
--- a/sound/usb/caiaq/device.c
+++ b/sound/usb/caiaq/device.c
@@ -12,6 +12,7 @@
 #include <linux/module.h>
 #include <linux/init.h>
 #include <linux/gfp.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <sound/initval.h>
 #include <sound/core.h>
diff --git a/sound/usb/card.c b/sound/usb/card.c
index 1b2edc0fd2e9..60865634ba23 100644
--- a/sound/usb/card.c
+++ b/sound/usb/card.c
@@ -24,6 +24,7 @@
 #include <linux/init.h>
 #include <linux/list.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/ctype.h>
 #include <linux/usb.h>
diff --git a/sound/usb/line6/driver.c b/sound/usb/line6/driver.c
index b67617b68e50..fbc9d404c6ca 100644
--- a/sound/usb/line6/driver.c
+++ b/sound/usb/line6/driver.c
@@ -9,6 +9,7 @@
 #include <linux/module.h>
 #include <linux/export.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #include <sound/core.h>
diff --git a/sound/usb/line6/toneport.c b/sound/usb/line6/toneport.c
index e33df58740a9..609710569ba1 100644
--- a/sound/usb/line6/toneport.c
+++ b/sound/usb/line6/toneport.c
@@ -11,6 +11,7 @@
 #include <linux/slab.h>
 #include <linux/module.h>
 #include <linux/leds.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/control.h>
 
diff --git a/sound/usb/midi.c b/sound/usb/midi.c
index 6b0993258e03..e2fe0618574a 100644
--- a/sound/usb/midi.c
+++ b/sound/usb/midi.c
@@ -36,6 +36,7 @@
  */
 
 #include <linux/kernel.h>
+#include <linux/sprintf.h>
 #include <linux/types.h>
 #include <linux/bitops.h>
 #include <linux/interrupt.h>
diff --git a/sound/usb/midi2.c b/sound/usb/midi2.c
index 820d3e4b672a..2513fdb42b42 100644
--- a/sound/usb/midi2.c
+++ b/sound/usb/midi2.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/bitops.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/init.h>
 #include <linux/slab.h>
diff --git a/sound/usb/misc/ua101.c b/sound/usb/misc/ua101.c
index 4f6b20ed29dd..aefcd60e05f9 100644
--- a/sound/usb/misc/ua101.c
+++ b/sound/usb/misc/ua101.c
@@ -7,6 +7,7 @@
 #include <linux/init.h>
 #include <linux/module.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/audio.h>
 #include <sound/core.h>
diff --git a/sound/usb/mixer.c b/sound/usb/mixer.c
index 409fc1164694..53b73f6874f6 100644
--- a/sound/usb/mixer.c
+++ b/sound/usb/mixer.c
@@ -32,6 +32,7 @@
 #include <linux/list.h>
 #include <linux/log2.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/string.h>
 #include <linux/usb.h>
 #include <linux/usb/audio.h>
diff --git a/sound/usb/mixer_quirks.c b/sound/usb/mixer_quirks.c
index 065a4be0d771..037d8548fb16 100644
--- a/sound/usb/mixer_quirks.c
+++ b/sound/usb/mixer_quirks.c
@@ -18,6 +18,7 @@
 #include <linux/init.h>
 #include <linux/math64.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/audio.h>
 
diff --git a/sound/usb/mixer_scarlett.c b/sound/usb/mixer_scarlett.c
index 0d6e4f15bf77..f1b73e86ed06 100644
--- a/sound/usb/mixer_scarlett.c
+++ b/sound/usb/mixer_scarlett.c
@@ -118,6 +118,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/audio-v2.h>
 
diff --git a/sound/usb/mixer_scarlett2.c b/sound/usb/mixer_scarlett2.c
index 6de605a601e5..5b44ef78a6a2 100644
--- a/sound/usb/mixer_scarlett2.c
+++ b/sound/usb/mixer_scarlett2.c
@@ -150,6 +150,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/moduleparam.h>
 
diff --git a/sound/usb/proc.c b/sound/usb/proc.c
index e9bbaea7b2fa..5cf8ebaaa4b9 100644
--- a/sound/usb/proc.c
+++ b/sound/usb/proc.c
@@ -3,6 +3,7 @@
  */
 
 #include <linux/init.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 
 #include <sound/core.h>
diff --git a/sound/usb/stream.c b/sound/usb/stream.c
index 3d4add94e367..099ba3278d22 100644
--- a/sound/usb/stream.c
+++ b/sound/usb/stream.c
@@ -5,6 +5,7 @@
 
 #include <linux/init.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/audio.h>
 #include <linux/usb/audio-v2.h>
diff --git a/sound/usb/usx2y/us122l.c b/sound/usb/usx2y/us122l.c
index 709ccad972e2..602f61e4f5e5 100644
--- a/sound/usb/usx2y/us122l.c
+++ b/sound/usb/usx2y/us122l.c
@@ -4,6 +4,7 @@
  */
 
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/usb/audio.h>
 #include <linux/module.h>
diff --git a/sound/usb/usx2y/usX2Yhwdep.c b/sound/usb/usx2y/usX2Yhwdep.c
index 4937ede0b5d7..bbb637fd52fd 100644
--- a/sound/usb/usx2y/usX2Yhwdep.c
+++ b/sound/usb/usx2y/usX2Yhwdep.c
@@ -9,6 +9,7 @@
 
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <sound/core.h>
 #include <sound/memalloc.h>
diff --git a/sound/usb/usx2y/usbusx2y.c b/sound/usb/usx2y/usbusx2y.c
index 52f4e6652407..ebebb65d3448 100644
--- a/sound/usb/usx2y/usbusx2y.c
+++ b/sound/usb/usx2y/usbusx2y.c
@@ -121,6 +121,7 @@
 #include <linux/moduleparam.h>
 #include <linux/slab.h>
 #include <linux/interrupt.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <sound/core.h>
 #include <sound/initval.h>
diff --git a/sound/usb/usx2y/usbusx2yaudio.c b/sound/usb/usx2y/usbusx2yaudio.c
index ca7888495a9f..ccbef73a7ee9 100644
--- a/sound/usb/usx2y/usbusx2yaudio.c
+++ b/sound/usb/usx2y/usbusx2yaudio.c
@@ -19,6 +19,7 @@
 
 #include <linux/interrupt.h>
 #include <linux/slab.h>
+#include <linux/sprintf.h>
 #include <linux/usb.h>
 #include <linux/moduleparam.h>
 #include <sound/core.h>
diff --git a/sound/usb/usx2y/usx2yhwdeppcm.c b/sound/usb/usx2y/usx2yhwdeppcm.c
index 36f2e31168fb..0862d4248a72 100644
--- a/sound/usb/usx2y/usx2yhwdeppcm.c
+++ b/sound/usb/usx2y/usx2yhwdeppcm.c
@@ -41,6 +41,7 @@
 #include <linux/delay.h>
 #include <linux/gfp.h>
 #include "usbusx2yaudio.c"
+#include <linux/sprintf.h>
 
 #if defined(USX2Y_NRPACKS_VARIABLE) || USX2Y_NRPACKS == 1
 
diff --git a/sound/virtio/virtio_card.c b/sound/virtio/virtio_card.c
index 2da20c625247..be0e28ec48e7 100644
--- a/sound/virtio/virtio_card.c
+++ b/sound/virtio/virtio_card.c
@@ -5,6 +5,7 @@
  */
 #include <linux/module.h>
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/virtio_config.h>
 #include <sound/initval.h>
 #include <uapi/linux/virtio_ids.h>
diff --git a/sound/virtio/virtio_ctl_msg.c b/sound/virtio/virtio_ctl_msg.c
index 9dabea01277f..81ec8a9ec14e 100644
--- a/sound/virtio/virtio_ctl_msg.c
+++ b/sound/virtio/virtio_ctl_msg.c
@@ -5,6 +5,7 @@
  */
 #include <linux/moduleparam.h>
 #include <linux/virtio_config.h>
+#include <linux/completion.h>
 
 #include "virtio_card.h"
 
diff --git a/sound/virtio/virtio_pcm.c b/sound/virtio/virtio_pcm.c
index 967e4c45be9b..2a376022a868 100644
--- a/sound/virtio/virtio_pcm.c
+++ b/sound/virtio/virtio_pcm.c
@@ -4,6 +4,7 @@
  * Copyright (C) 2021 OpenSynergy GmbH
  */
 #include <linux/moduleparam.h>
+#include <linux/sprintf.h>
 #include <linux/virtio_config.h>
 
 #include "virtio_card.h"
diff --git a/sound/x86/intel_hdmi_audio.c b/sound/x86/intel_hdmi_audio.c
index 02f5a7f9b728..f0c0e4781ccf 100644
--- a/sound/x86/intel_hdmi_audio.c
+++ b/sound/x86/intel_hdmi_audio.c
@@ -22,6 +22,7 @@
 #include <linux/pm_runtime.h>
 #include <linux/dma-mapping.h>
 #include <linux/delay.h>
+#include <linux/sprintf.h>
 #include <sound/core.h>
 #include <sound/asoundef.h>
 #include <sound/pcm.h>
diff --git a/sound/xen/xen_snd_front.c b/sound/xen/xen_snd_front.c
index b66e037710d0..ec11f449a3ef 100644
--- a/sound/xen/xen_snd_front.c
+++ b/sound/xen/xen_snd_front.c
@@ -10,6 +10,7 @@
 
 #include <linux/delay.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 
 #include <xen/page.h>
 #include <xen/platform_pci.h>
diff --git a/sound/xen/xen_snd_front_cfg.c b/sound/xen/xen_snd_front_cfg.c
index 55ecf766ca67..4df39b6efb2e 100644
--- a/sound/xen/xen_snd_front_cfg.c
+++ b/sound/xen/xen_snd_front_cfg.c
@@ -9,6 +9,7 @@
  */
 
 #include <xen/xenbus.h>
+#include <linux/sprintf.h>
 
 #include <xen/interface/io/sndif.h>
 
diff --git a/sound/xen/xen_snd_front_evtchnl.c b/sound/xen/xen_snd_front_evtchnl.c
index 26d1b3987887..8c35e758d4fe 100644
--- a/sound/xen/xen_snd_front_evtchnl.c
+++ b/sound/xen/xen_snd_front_evtchnl.c
@@ -12,6 +12,8 @@
 #include <xen/grant_table.h>
 #include <xen/xen.h>
 #include <xen/xenbus.h>
+#include <linux/completion.h>
+#include <linux/sprintf.h>
 
 #include "xen_snd_front.h"
 #include "xen_snd_front_alsa.h"
diff --git a/tools/testing/nvdimm/test/iomap.c b/tools/testing/nvdimm/test/iomap.c
index ea956082e6a4..53beddb9ae07 100644
--- a/tools/testing/nvdimm/test/iomap.c
+++ b/tools/testing/nvdimm/test/iomap.c
@@ -4,6 +4,8 @@
  */
 #include <linux/memremap.h>
 #include <linux/rculist.h>
+#include <linux/completion.h>
+#include <linux/device.h>
 #include <linux/export.h>
 #include <linux/ioport.h>
 #include <linux/module.h>
diff --git a/virt/kvm/kvm_main.c b/virt/kvm/kvm_main.c
index 8f03b56dafbd..3565a0e12a5c 100644
--- a/virt/kvm/kvm_main.c
+++ b/virt/kvm/kvm_main.c
@@ -15,9 +15,11 @@
 
 #include <kvm/iodev.h>
 
+#include <linux/kernel.h> // for system_state
 #include <linux/kvm_host.h>
 #include <linux/kvm.h>
 #include <linux/module.h>
+#include <linux/completion.h>
 #include <linux/errno.h>
 #include <linux/percpu.h>
 #include <linux/mm.h>
@@ -51,6 +53,7 @@
 #include <linux/io.h>
 #include <linux/lockdep.h>
 #include <linux/kthread.h>
+#include <linux/kobject.h>
 #include <linux/suspend.h>
 
 #include <asm/processor.h>
diff --git a/virt/kvm/vfio.c b/virt/kvm/vfio.c
index ca24ce120906..54c814b1a2fc 100644
--- a/virt/kvm/vfio.c
+++ b/virt/kvm/vfio.c
@@ -8,6 +8,7 @@
 
 #include <linux/errno.h>
 #include <linux/file.h>
+#include <linux/kernel.h> // for u64_to_user_ptr()
 #include <linux/kvm_host.h>
 #include <linux/list.h>
 #include <linux/module.h>
-- 
2.39.2



Return-Path: <linux-kernel-owner@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from out1.vger.email (out1.vger.email [IPv6:2620:137:e000::1:20])
	by mail.lfdr.de (Postfix) with ESMTP id AD1077C7EC1
	for <lists+linux-kernel@lfdr.de>; Fri, 13 Oct 2023 09:41:31 +0200 (CEST)
Received: (majordomo@vger.kernel.org) by vger.kernel.org via listexpand
        id S229939AbjJMHl1 (ORCPT <rfc822;lists+linux-kernel@lfdr.de>);
        Fri, 13 Oct 2023 03:41:27 -0400
Received: from lindbergh.monkeyblade.net ([23.128.96.19]:52736 "EHLO
        lindbergh.monkeyblade.net" rhost-flags-OK-OK-OK-OK) by vger.kernel.org
        with ESMTP id S229688AbjJMHlX (ORCPT
        <rfc822;linux-kernel@vger.kernel.org>);
        Fri, 13 Oct 2023 03:41:23 -0400
Received: from jari.cn (unknown [218.92.28.115])
        by lindbergh.monkeyblade.net (Postfix) with ESMTP id 12EB783
        for <linux-kernel@vger.kernel.org>; Fri, 13 Oct 2023 00:41:19 -0700 (PDT)
Received: from wangkailong$jari.cn ( [182.148.14.172] ) by
 ajax-webmail-localhost.localdomain (Coremail) ; Fri, 13 Oct 2023 15:39:32
 +0800 (GMT+08:00)
X-Originating-IP: [182.148.14.172]
Date:   Fri, 13 Oct 2023 15:39:32 +0800 (GMT+08:00)
X-CM-HeaderCharset: UTF-8
From:   "KaiLong Wang" <wangkailong@jari.cn>
To:     mark@fasheh.com, jlbec@evilplan.org, akpm@linux-foundation.org
Cc:     ocfs2-devel@lists.linux.dev, linux-kernel@vger.kernel.org
Subject: [PATCH] ocfs2/dlm: Clean up errors in dlmdomain.c
X-Priority: 3
X-Mailer: Coremail Webmail Server Version 2023.1-cmXT6 build
 20230419(ff23bf83) Copyright (c) 2002-2023 www.mailtech.cn
 mispb-4e503810-ca60-4ec8-a188-7102c18937cf-zhkzyfz.cn
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset=UTF-8
MIME-Version: 1.0
Message-ID: <62e91e34.969.18b27f9ec40.Coremail.wangkailong@jari.cn>
X-Coremail-Locale: zh_CN
X-CM-TRANSID: AQAAfwD3lD809ChlLd_BAA--.756W
X-CM-SenderInfo: 5zdqwypdlo00nj6mt2flof0/1tbiAQADB2UnvzMAKwACsi
X-Coremail-Antispam: 1Ur529EdanIXcx71UUUUU7IcSsGvfJ3iIAIbVAYjsxI4VWxJw
        CS07vEb4IE77IF4wCS07vE1I0E4x80FVAKz4kxMIAIbVAFxVCaYxvI4VCIwcAKzIAtYxBI
        daVFxhVjvjDU=
X-Spam-Status: No, score=3.4 required=5.0 tests=BAYES_00,RCVD_IN_PBL,RDNS_NONE,
        T_SPF_HELO_PERMERROR,T_SPF_PERMERROR,XPRIO autolearn=no
        autolearn_force=no version=3.4.6
X-Spam-Level: ***
X-Spam-Checker-Version: SpamAssassin 3.4.6 (2021-04-09) on
        lindbergh.monkeyblade.net
Precedence: bulk
List-ID: <linux-kernel.vger.kernel.org>
X-Mailing-List: linux-kernel@vger.kernel.org

Rml4IHRoZSBmb2xsb3dpbmcgZXJyb3JzIHJlcG9ydGVkIGJ5IGNoZWNrcGF0Y2g6CgpFUlJPUjog
ImZvbyAqIGJhciIgc2hvdWxkIGJlICJmb28gKmJhciIKRVJST1I6IHNwYWNlcyByZXF1aXJlZCBh
cm91bmQgdGhhdCAnPScgKGN0eDpWeFYpCkVSUk9SOiBzcGFjZXMgcmVxdWlyZWQgYXJvdW5kIHRo
YXQgJz09JyAoY3R4OlZ4VikKRVJST1I6IGRvIG5vdCB1c2UgYXNzaWdubWVudCBpbiBpZiBjb25k
aXRpb24KClNpZ25lZC1vZmYtYnk6IEthaUxvbmcgV2FuZyA8d2FuZ2thaWxvbmdAamFyaS5jbj4K
LS0tCiBmcy9vY2ZzMi9kbG0vZGxtZG9tYWluLmMgfCAxOSArKysrKysrKysrLS0tLS0tLS0tCiAx
IGZpbGUgY2hhbmdlZCwgMTAgaW5zZXJ0aW9ucygrKSwgOSBkZWxldGlvbnMoLSkKCmRpZmYgLS1n
aXQgYS9mcy9vY2ZzMi9kbG0vZGxtZG9tYWluLmMgYi9mcy9vY2ZzMi9kbG0vZGxtZG9tYWluLmMK
aW5kZXggNWMwNGRkZTk5OTgxLi5hOTk1NWViOTc2MjUgMTAwNjQ0Ci0tLSBhL2ZzL29jZnMyL2Rs
bS9kbG1kb21haW4uYworKysgYi9mcy9vY2ZzMi9kbG0vZGxtZG9tYWluLmMKQEAgLTc2LDcgKzc2
LDggQEAgc3RhdGljIHZvaWQgKipkbG1fYWxsb2NfcGFnZXZlYyhpbnQgcGFnZXMpCiAJCXJldHVy
biBOVUxMOwogCiAJZm9yIChpID0gMDsgaSA8IHBhZ2VzOyBpKyspCi0JCWlmICghKHZlY1tpXSA9
ICh2b2lkICopX19nZXRfZnJlZV9wYWdlKEdGUF9LRVJORUwpKSkKKwkJdmVjW2ldID0gKHZvaWQg
KilfX2dldF9mcmVlX3BhZ2UoR0ZQX0tFUk5FTCk7CisJCWlmICghKHZlY1tpXSkpCiAJCQlnb3Rv
IG91dF9mcmVlOwogCiAJbWxvZygwLCAiQWxsb2NhdGVkIERMTSBoYXNoIHBhZ2V2ZWM7ICVkIHBh
Z2VzICglbHUgZXhwZWN0ZWQpLCAlbHUgYnVja2V0cyBwZXIgcGFnZVxuIiwKQEAgLTE3MCw3ICsx
NzEsNyBAQCB2b2lkIF9fZGxtX2luc2VydF9sb2NrcmVzKHN0cnVjdCBkbG1fY3R4dCAqZGxtLCBz
dHJ1Y3QgZGxtX2xvY2tfcmVzb3VyY2UgKnJlcykKIAkgICAgIHJlcy0+bG9ja25hbWUubmFtZSk7
CiB9CiAKLXN0cnVjdCBkbG1fbG9ja19yZXNvdXJjZSAqIF9fZGxtX2xvb2t1cF9sb2NrcmVzX2Z1
bGwoc3RydWN0IGRsbV9jdHh0ICpkbG0sCitzdHJ1Y3QgZGxtX2xvY2tfcmVzb3VyY2UgKl9fZGxt
X2xvb2t1cF9sb2NrcmVzX2Z1bGwoc3RydWN0IGRsbV9jdHh0ICpkbG0sCiAJCQkJCQkgICAgIGNv
bnN0IGNoYXIgKm5hbWUsCiAJCQkJCQkgICAgIHVuc2lnbmVkIGludCBsZW4sCiAJCQkJCQkgICAg
IHVuc2lnbmVkIGludCBoYXNoKQpAQCAtMjAzLDcgKzIwNCw3IEBAIHN0cnVjdCBkbG1fbG9ja19y
ZXNvdXJjZSAqIF9fZGxtX2xvb2t1cF9sb2NrcmVzX2Z1bGwoc3RydWN0IGRsbV9jdHh0ICpkbG0s
CiAgKiBjdXJyZW50bHkgaW4gdGhlIHByb2Nlc3Mgb2YgZHJvcHBpbmcgaXRzIG1hc3RlcnkgcmVm
ZXJlbmNlLgogICogdXNlIF9fZGxtX2xvb2t1cF9sb2NrcmVzX2Z1bGwgd2hlbiB5b3UgbmVlZCB0
aGUgbG9jayByZXNvdXJjZQogICogcmVnYXJkbGVzcyAoZS5nLiBkbG1fZ2V0X2xvY2tfcmVzb3Vy
Y2UpICovCi1zdHJ1Y3QgZGxtX2xvY2tfcmVzb3VyY2UgKiBfX2RsbV9sb29rdXBfbG9ja3Jlcyhz
dHJ1Y3QgZGxtX2N0eHQgKmRsbSwKK3N0cnVjdCBkbG1fbG9ja19yZXNvdXJjZSAqX19kbG1fbG9v
a3VwX2xvY2tyZXMoc3RydWN0IGRsbV9jdHh0ICpkbG0sCiAJCQkJCQljb25zdCBjaGFyICpuYW1l
LAogCQkJCQkJdW5zaWduZWQgaW50IGxlbiwKIAkJCQkJCXVuc2lnbmVkIGludCBoYXNoKQpAQCAt
MjI4LDcgKzIyOSw3IEBAIHN0cnVjdCBkbG1fbG9ja19yZXNvdXJjZSAqIF9fZGxtX2xvb2t1cF9s
b2NrcmVzKHN0cnVjdCBkbG1fY3R4dCAqZGxtLAogCXJldHVybiByZXM7CiB9CiAKLXN0cnVjdCBk
bG1fbG9ja19yZXNvdXJjZSAqIGRsbV9sb29rdXBfbG9ja3JlcyhzdHJ1Y3QgZGxtX2N0eHQgKmRs
bSwKK3N0cnVjdCBkbG1fbG9ja19yZXNvdXJjZSAqZGxtX2xvb2t1cF9sb2NrcmVzKHN0cnVjdCBk
bG1fY3R4dCAqZGxtLAogCQkJCSAgICBjb25zdCBjaGFyICpuYW1lLAogCQkJCSAgICB1bnNpZ25l
ZCBpbnQgbGVuKQogewpAQCAtMjQxLDcgKzI0Miw3IEBAIHN0cnVjdCBkbG1fbG9ja19yZXNvdXJj
ZSAqIGRsbV9sb29rdXBfbG9ja3JlcyhzdHJ1Y3QgZGxtX2N0eHQgKmRsbSwKIAlyZXR1cm4gcmVz
OwogfQogCi1zdGF0aWMgc3RydWN0IGRsbV9jdHh0ICogX19kbG1fbG9va3VwX2RvbWFpbl9mdWxs
KGNvbnN0IGNoYXIgKmRvbWFpbiwgaW50IGxlbikKK3N0YXRpYyBzdHJ1Y3QgZGxtX2N0eHQgKl9f
ZGxtX2xvb2t1cF9kb21haW5fZnVsbChjb25zdCBjaGFyICpkb21haW4sIGludCBsZW4pCiB7CiAJ
c3RydWN0IGRsbV9jdHh0ICp0bXA7CiAKQEAgLTI1MSw3ICsyNTIsNyBAQCBzdGF0aWMgc3RydWN0
IGRsbV9jdHh0ICogX19kbG1fbG9va3VwX2RvbWFpbl9mdWxsKGNvbnN0IGNoYXIgKmRvbWFpbiwg
aW50IGxlbikKIAkgKiBidXQgZG9tYWluIG1heSBub3QgYmUhICovCiAJbGlzdF9mb3JfZWFjaF9l
bnRyeSh0bXAsICZkbG1fZG9tYWlucywgbGlzdCkgewogCQlpZiAoc3RybGVuKHRtcC0+bmFtZSkg
PT0gbGVuICYmCi0JCSAgICBtZW1jbXAodG1wLT5uYW1lLCBkb21haW4sIGxlbik9PTApCisJCSAg
ICBtZW1jbXAodG1wLT5uYW1lLCBkb21haW4sIGxlbikgPT0gMCkKIAkJCXJldHVybiB0bXA7CiAJ
fQogCkBAIC0yNTksNyArMjYwLDcgQEAgc3RhdGljIHN0cnVjdCBkbG1fY3R4dCAqIF9fZGxtX2xv
b2t1cF9kb21haW5fZnVsbChjb25zdCBjaGFyICpkb21haW4sIGludCBsZW4pCiB9CiAKIC8qIEZv
ciBudWxsIHRlcm1pbmF0ZWQgZG9tYWluIHN0cmluZ3MgT05MWSAqLwotc3RhdGljIHN0cnVjdCBk
bG1fY3R4dCAqIF9fZGxtX2xvb2t1cF9kb21haW4oY29uc3QgY2hhciAqZG9tYWluKQorc3RhdGlj
IHN0cnVjdCBkbG1fY3R4dCAqX19kbG1fbG9va3VwX2RvbWFpbihjb25zdCBjaGFyICpkb21haW4p
CiB7CiAJYXNzZXJ0X3NwaW5fbG9ja2VkKCZkbG1fZG9tYWluX2xvY2spOwogCkBAIC04MjcsNyAr
ODI4LDcgQEAgc3RhdGljIGludCBkbG1fcXVlcnlfam9pbl9oYW5kbGVyKHN0cnVjdCBvMm5ldF9t
c2cgKm1zZywgdTMyIGxlbiwgdm9pZCAqZGF0YSwKIAkgKiBub2RlKHMpIHRoYXQganVzdCBsZWZ0
IGJ1dCBzdGlsbCBwYXJ0IG9mIHRoZSBjbHVzdGVyLiBESVNBTExPVwogCSAqIGpvaW4gcmVxdWVz
dCBpZiBqb2luaW5nIG5vZGUgaGFzIGRpZmZlcmVudCBub2RlIG1hcC4KIAkgKi8KLQlub2RlbnVt
PTA7CisJbm9kZW51bSA9IDA7CiAJd2hpbGUgKG5vZGVudW0gPCBPMk5NX01BWF9OT0RFUykgewog
CQlpZiAodGVzdF9iaXQobm9kZW51bSwgZGxtLT5kb21haW5fbWFwKSkgewogCQkJaWYgKCFieXRl
X3Rlc3RfYml0KG5vZGVudW0sIHF1ZXJ5LT5ub2RlX21hcCkpIHsKQEAgLTIwOTUsNyArMjA5Niw3
IEBAIHN0YXRpYyBpbnQgZGxtX3Byb3RvY29sX2NvbXBhcmUoc3RydWN0IGRsbV9wcm90b2NvbF92
ZXJzaW9uICpleGlzdGluZywKICAqIElmIHJlZ2lzdHJhdGlvbiB3YXMgc3VjY2Vzc2Z1bCwgcHJv
dG8gd2lsbCBjb250YWluIHRoZSBuZWdvdGlhdGVkCiAgKiBsb2NraW5nIHByb3RvY29sLgogICov
Ci1zdHJ1Y3QgZGxtX2N0eHQgKiBkbG1fcmVnaXN0ZXJfZG9tYWluKGNvbnN0IGNoYXIgKmRvbWFp
biwKK3N0cnVjdCBkbG1fY3R4dCAqZGxtX3JlZ2lzdGVyX2RvbWFpbihjb25zdCBjaGFyICpkb21h
aW4sCiAJCQkgICAgICAgdTMyIGtleSwKIAkJCSAgICAgICBzdHJ1Y3QgZGxtX3Byb3RvY29sX3Zl
cnNpb24gKmZzX3Byb3RvKQogewotLSAKMi4xNy4xCg==

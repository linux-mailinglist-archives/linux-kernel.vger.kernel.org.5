Return-Path: <linux-kernel+bounces-25797-lists+linux-kernel=lfdr.de@vger.kernel.org>
X-Original-To: lists+linux-kernel@lfdr.de
Delivered-To: lists+linux-kernel@lfdr.de
Received: from am.mirrors.kernel.org (am.mirrors.kernel.org [IPv6:2604:1380:4601:e00::3])
	by mail.lfdr.de (Postfix) with ESMTPS id 6914882D5E9
	for <lists+linux-kernel@lfdr.de>; Mon, 15 Jan 2024 10:28:22 +0100 (CET)
Received: from smtp.subspace.kernel.org (wormhole.subspace.kernel.org [52.25.139.140])
	(using TLSv1.2 with cipher ECDHE-RSA-AES256-GCM-SHA384 (256/256 bits))
	(No client certificate requested)
	by am.mirrors.kernel.org (Postfix) with ESMTPS id D35251F21E1C
	for <lists+linux-kernel@lfdr.de>; Mon, 15 Jan 2024 09:28:21 +0000 (UTC)
Received: from localhost.localdomain (localhost.localdomain [127.0.0.1])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id 6ED55CA7A;
	Mon, 15 Jan 2024 09:28:00 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org;
	dkim=fail reason="signature verification failed" (1024-bit key) header.d=163.com header.i=@163.com header.b="YvJalGtI"
Received: from m16.mail.163.com (m16.mail.163.com [220.197.31.5])
	by smtp.subspace.kernel.org (Postfix) with ESMTP id B072D101C1;
	Mon, 15 Jan 2024 09:27:56 +0000 (UTC)
Authentication-Results: smtp.subspace.kernel.org; dmarc=pass (p=none dis=none) header.from=163.com
Authentication-Results: smtp.subspace.kernel.org; spf=pass smtp.mailfrom=163.com
DKIM-Signature: v=1; a=rsa-sha256; c=relaxed/relaxed; d=163.com;
	s=s110527; h=Date:From:Subject:Content-Type:MIME-Version:
	Message-ID; bh=7jPbBV8/uCiH22kGZoNY4iohxgYKKx9kcajXppvJUbA=; b=Y
	vJalGtIKce8CE32KnPwCjEZWZdegtYzGEbMkc8LgoxRAsGgzvDjliVCLZGDsn7SN
	/0/63+ESxN3s9lliKxxpAJ02ZFzApV+FKCKW1zAfy+J1H7Vt8lTK77UtcqcDLB2f
	mXabCBs/9mDICHj/YdhgWi3eWbh9pNS/kEWRSddk9s=
Received: from wangkeqi_chris$163.com ( [36.110.17.19] ) by
 ajax-webmail-wmsvr-40-114 (Coremail) ; Mon, 15 Jan 2024 17:26:39 +0800
 (CST)
Date: Mon, 15 Jan 2024 17:26:39 +0800 (CST)
From: wangkeqi  <wangkeqi_chris@163.com>
To: "Yin, Fengwei" <fengwei.yin@intel.com>
Cc: davem@davemloft.net, edumazet@google.com, kuba@kernel.org, pabeni@redhat.com, 
	netdev@vger.kernel.org, linux-kernel@vger.kernel.org, 
	wangkeqi <wangkeqiwang@didiglobal.com>
Subject: Re:Re: [PATCH] connector: Change the judgment conditions for
 clearing proc_event_num_listeners
X-Priority: 3
X-Mailer: Coremail Webmail Server Version XT5.0.14 build 20230109(dcb5de15)
 Copyright (c) 2002-2024 www.mailtech.cn 163com
In-Reply-To: <7170ecaf-32e3-4bfc-b20d-a08a341ae381@intel.com>
References: <20240115075120.186143-1-wangkeqi_chris@163.com>
 <7170ecaf-32e3-4bfc-b20d-a08a341ae381@intel.com>
X-NTES-SC: AL_Qu2bB/+av08i7yafY+kXnEoUgeo7WMqyv/km3YVWOJ80oyTc9BsMRUdyG33a9+GqKgWNiCCWbjxw091rT4lAWIY/qatTOT/+XTGGjIUibklk
Content-Transfer-Encoding: base64
Content-Type: text/plain; charset=GBK
Precedence: bulk
X-Mailing-List: linux-kernel@vger.kernel.org
List-Id: <linux-kernel.vger.kernel.org>
List-Subscribe: <mailto:linux-kernel+subscribe@vger.kernel.org>
List-Unsubscribe: <mailto:linux-kernel+unsubscribe@vger.kernel.org>
MIME-Version: 1.0
Message-ID: <9ac38d2.916d.18d0c71c748.Coremail.wangkeqi_chris@163.com>
X-Coremail-Locale: zh_CN
X-CM-TRANSID:_____wD3P7dP+qRlttQ2AA--.53915W
X-CM-SenderInfo: 5zdqwy5htlsupkul2qqrwthudrp/1tbiQBlm3GVOBCo9iAAGsV
X-Coremail-Antispam: 1U5529EdanIXcx71UUUUU7vcSsGvfC2KfnxnUU==

CkZyb206IHdhbmdrZXFpIDx3YW5na2VxaXdhbmdAZGlkaWdsb2JhbC5jb20+CgpJdCBpcyBpbmFj
Y3VyYXRlIHRvIGp1ZGdlIHdoZXRoZXIgcHJvY19ldmVudF9udW1fbGlzdGVuZXJzIGlzCmNsZWFy
ZWQgYnkgY25fbmV0bGlua19zZW5kX211bHQgcmV0dXJuaW5nIC1FU1JDSC4KSW4gdGhlIGNhc2Ug
b2Ygc3RyZXNzLW5nIG5ldGxpbmstcHJvYywgLUVTUkNIIHdpbGwgYWx3YXlzIGJlIHJldHVybmVk
LApiZWNhdXNlIG5ldGxpbmtfYnJvYWRjYXN0X2ZpbHRlcmVkIHdpbGwgcmV0dXJuIC1FU1JDSCwK
d2hpY2ggbWF5IGNhdXNlIHN0cmVzcy1uZyBuZXRsaW5rLXByb2MgcGVyZm9ybWFuY2UgZGVncmFk
YXRpb24uClRoZXJlZm9yZSwgdGhlIGp1ZGdtZW50IGNvbmRpdGlvbiBpcyBtb2RpZmllZCB0byB3
aGV0aGVyCnRoZXJlIGlzIGEgbGlzdGVuZXIuCgpSZXBvcnRlZC1ieToga2VybmVsIHRlc3Qgcm9i
b3QgPG9saXZlci5zYW5nQGludGVsLmNvbT4KQ2xvc2VzOiBodHRwczovL2xvcmUua2VybmVsLm9y
Zy9vZS1sa3AvMjAyNDAxMTEyMjU5LmIyM2ExNTY3LW9saXZlci5zYW5nQGludGVsLmNvbQpTaWdu
ZWQtb2ZmLWJ5OiB3YW5na2VxaSA8d2FuZ2tlcWl3YW5nQGRpZGlnbG9iYWwuY29tPgpDYzogZmVu
Z3dlaS55aW5AaW50ZWwuY29tCi0tLQogZHJpdmVycy9jb25uZWN0b3IvY25fcHJvYy5jICAgfCA2
ICsrKystLQogZHJpdmVycy9jb25uZWN0b3IvY29ubmVjdG9yLmMgfCA2ICsrKysrKwogaW5jbHVk
ZS9saW51eC9jb25uZWN0b3IuaCAgICAgfCAxICsKIDMgZmlsZXMgY2hhbmdlZCwgMTEgaW5zZXJ0
aW9ucygrKSwgMiBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL2Nvbm5lY3Rvci9j
bl9wcm9jLmMgYi9kcml2ZXJzL2Nvbm5lY3Rvci9jbl9wcm9jLmMKaW5kZXggM2Q1ZTZkNzA1Li5i
MDlmNzRlZDMgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvY29ubmVjdG9yL2NuX3Byb2MuYworKysgYi9k
cml2ZXJzL2Nvbm5lY3Rvci9jbl9wcm9jLmMKQEAgLTEwOCw4ICsxMDgsMTAgQEAgc3RhdGljIGlu
bGluZSB2b2lkIHNlbmRfbXNnKHN0cnVjdCBjbl9tc2cgKm1zZykKIAkJZmlsdGVyX2RhdGFbMV0g
PSAwOwogCX0KIAotCWlmIChjbl9uZXRsaW5rX3NlbmRfbXVsdChtc2csIG1zZy0+bGVuLCAwLCBD
Tl9JRFhfUFJPQywgR0ZQX05PV0FJVCwKLQkJCSAgICAgY25fZmlsdGVyLCAodm9pZCAqKWZpbHRl
cl9kYXRhKSA9PSAtRVNSQ0gpCisJaWYgKG5ldGxpbmtfaGFzX2xpc3RlbmVycyhnZXRfY2Rldl9u
bHMoKSwgQ05fSURYX1BST0MpKQorCQljbl9uZXRsaW5rX3NlbmRfbXVsdChtc2csIG1zZy0+bGVu
LCAwLCBDTl9JRFhfUFJPQywgR0ZQX05PV0FJVCwKKwkJCSAgICAgY25fZmlsdGVyLCAodm9pZCAq
KWZpbHRlcl9kYXRhKTsKKwllbHNlCiAJCWF0b21pY19zZXQoJnByb2NfZXZlbnRfbnVtX2xpc3Rl
bmVycywgMCk7CiAKIAlsb2NhbF91bmxvY2soJmxvY2FsX2V2ZW50LmxvY2spOwpkaWZmIC0tZ2l0
IGEvZHJpdmVycy9jb25uZWN0b3IvY29ubmVjdG9yLmMgYi9kcml2ZXJzL2Nvbm5lY3Rvci9jb25u
ZWN0b3IuYwppbmRleCA3ZjdiOTRmNjEuLjFiMmNkNDEwZSAxMDA2NDQKLS0tIGEvZHJpdmVycy9j
b25uZWN0b3IvY29ubmVjdG9yLmMKKysrIGIvZHJpdmVycy9jb25uZWN0b3IvY29ubmVjdG9yLmMK
QEAgLTEyOSw2ICsxMjksMTIgQEAgaW50IGNuX25ldGxpbmtfc2VuZChzdHJ1Y3QgY25fbXNnICpt
c2csIHUzMiBwb3J0aWQsIHUzMiBfX2dyb3VwLAogfQogRVhQT1JUX1NZTUJPTF9HUEwoY25fbmV0
bGlua19zZW5kKTsKIAorc3RydWN0IHNvY2sgKmdldF9jZGV2X25scyh2b2lkKQoreworCXJldHVy
biBjZGV2Lm5sczsKK30KK0VYUE9SVF9TWU1CT0xfR1BMKGdldF9jZGV2X25scyk7CisKIC8qCiAg
KiBDYWxsYmFjayBoZWxwZXIgLSBxdWV1ZXMgd29yayBhbmQgc2V0dXAgZGVzdHJ1Y3RvciBmb3Ig
Z2l2ZW4gZGF0YS4KICAqLwpkaWZmIC0tZ2l0IGEvaW5jbHVkZS9saW51eC9jb25uZWN0b3IuaCBi
L2luY2x1ZGUvbGludXgvY29ubmVjdG9yLmgKaW5kZXggY2VjMmQ5OWFlLi4yNTU0NjZhZWEgMTAw
NjQ0Ci0tLSBhL2luY2x1ZGUvbGludXgvY29ubmVjdG9yLmgKKysrIGIvaW5jbHVkZS9saW51eC9j
b25uZWN0b3IuaApAQCAtMTI3LDYgKzEyNyw3IEBAIGludCBjbl9uZXRsaW5rX3NlbmRfbXVsdChz
dHJ1Y3QgY25fbXNnICptc2csIHUxNiBsZW4sIHUzMiBwb3J0aWQsCiAgKi8KIGludCBjbl9uZXRs
aW5rX3NlbmQoc3RydWN0IGNuX21zZyAqbXNnLCB1MzIgcG9ydGlkLCB1MzIgZ3JvdXAsIGdmcF90
IGdmcF9tYXNrKTsKIAorc3RydWN0IHNvY2sgKmdldF9jZGV2X25scyh2b2lkKTsKIGludCBjbl9x
dWV1ZV9hZGRfY2FsbGJhY2soc3RydWN0IGNuX3F1ZXVlX2RldiAqZGV2LCBjb25zdCBjaGFyICpu
YW1lLAogCQkJICBjb25zdCBzdHJ1Y3QgY2JfaWQgKmlkLAogCQkJICB2b2lkICgqY2FsbGJhY2sp
KHN0cnVjdCBjbl9tc2cgKiwgc3RydWN0IG5ldGxpbmtfc2tiX3Bhcm1zICopKTsKLS0gCgoyLjI3
LjAKCgpUaGUgbGFzdCBlbWFpbCBpcyBub3QgcGxhaW4gdGV4dCwgSSB3aWxsIHNlbmQgaXQgYWdh
aW4uCgoKCgoKCgoKCgoKQXQgMjAyNC0wMS0xNSAxNTo1NzoyMywgIllpbiwgRmVuZ3dlaSIgPGZl
bmd3ZWkueWluQGludGVsLmNvbT4gd3JvdGU6Cj4KPgo+T24gMS8xNS8yMDI0IDM6NTEgUE0sIHdh
bmdrZXFpIHdyb3RlOgo+PiBGcm9tOiB3YW5na2VxaSA8d2FuZ2tlcWl3YW5nQGRpZGlnbG9iYWwu
Y29tPgo+PiAKPj4gSXQgaXMgaW5hY2N1cmF0ZSB0byBqdWRnZSB3aGV0aGVyIHByb2NfZXZlbnRf
bnVtX2xpc3RlbmVycyBpcwo+PiBjbGVhcmVkIGJ5IGNuX25ldGxpbmtfc2VuZF9tdWx0IHJldHVy
bmluZyAtRVNSQ0guCj4+IEluIHRoZSBjYXNlIG9mIHN0cmVzcy1uZyBuZXRsaW5rLXByb2MsIC1F
U1JDSCB3aWxsIGFsd2F5cyBiZSByZXR1cm5lZCwKPj4gYmVjYXVzZSBuZXRsaW5rX2Jyb2FkY2Fz
dF9maWx0ZXJlZCB3aWxsIHJldHVybiAtRVNSQ0gsCj4+IHdoaWNoIG1heSBjYXVzZSBzdHJlc3Mt
bmcgbmV0bGluay1wcm9jIHBlcmZvcm1hbmNlIGRlZ3JhZGF0aW9uLgo+PiBUaGVyZWZvcmUsIHRo
ZSBqdWRnbWVudCBjb25kaXRpb24gaXMgbW9kaWZpZWQgdG8gd2hldGhlcgo+PiB0aGVyZSBpcyBh
IGxpc3RlbmVyLgo+PiAKPj4gU2lnbmVkLW9mZi1ieTogd2FuZ2tlcWkgPHdhbmdrZXFpd2FuZ0Bk
aWRpZ2xvYmFsLmNvbT4KPgo+UmVnYXJkaW5nIHRoZSBvcmlnaW5hbCByZXBvcnQ6Cj4KPklmIHlv
dSBmaXggdGhlIGlzc3VlIGluIGEgc2VwYXJhdGUgcGF0Y2gvY29tbWl0IChpLmUuIG5vdCBqdXN0
IGEgbmV3IAo+dmVyc2lvbiBvZgo+dGhlIHNhbWUgcGF0Y2gvY29tbWl0KSwga2luZGx5IGFkZCBm
b2xsb3dpbmcgdGFncwo+fCBSZXBvcnRlZC1ieToga2VybmVsIHRlc3Qgcm9ib3QgPG9saXZlci5z
YW5nQGludGVsLmNvbT4KPnwgQ2xvc2VzOiAKPmh0dHBzOi8vbG9yZS5rZXJuZWwub3JnL29lLWxr
cC8yMDI0MDExMTIyNTkuYjIzYTE1Njctb2xpdmVyLnNhbmdAaW50ZWwuY29tCj4KPgo+Q291bGQg
eW91IHBsZWFzZSBhZGQgdGhlIHRhZz8gVGhhbmtzLgo+Cj4+IC0tLQo+PiAgIGRyaXZlcnMvY29u
bmVjdG9yL2NuX3Byb2MuYyAgIHwgNiArKysrLS0KPj4gICBkcml2ZXJzL2Nvbm5lY3Rvci9jb25u
ZWN0b3IuYyB8IDYgKysrKysrCj4+ICAgaW5jbHVkZS9saW51eC9jb25uZWN0b3IuaCAgICAgfCAx
ICsKPj4gICAzIGZpbGVzIGNoYW5nZWQsIDExIGluc2VydGlvbnMoKyksIDIgZGVsZXRpb25zKC0p
Cj4+IAo+PiBkaWZmIC0tZ2l0IGEvZHJpdmVycy9jb25uZWN0b3IvY25fcHJvYy5jIGIvZHJpdmVy
cy9jb25uZWN0b3IvY25fcHJvYy5jCj4+IGluZGV4IDNkNWU2ZDcwNS4uYjA5Zjc0ZWQzIDEwMDY0
NAo+PiAtLS0gYS9kcml2ZXJzL2Nvbm5lY3Rvci9jbl9wcm9jLmMKPj4gKysrIGIvZHJpdmVycy9j
b25uZWN0b3IvY25fcHJvYy5jCj4+IEBAIC0xMDgsOCArMTA4LDEwIEBAIHN0YXRpYyBpbmxpbmUg
dm9pZCBzZW5kX21zZyhzdHJ1Y3QgY25fbXNnICptc2cpCj4+ICAgCQlmaWx0ZXJfZGF0YVsxXSA9
IDA7Cj4+ICAgCX0KPj4gICAKPj4gLQlpZiAoY25fbmV0bGlua19zZW5kX211bHQobXNnLCBtc2ct
PmxlbiwgMCwgQ05fSURYX1BST0MsIEdGUF9OT1dBSVQsCj4+IC0JCQkgICAgIGNuX2ZpbHRlciwg
KHZvaWQgKilmaWx0ZXJfZGF0YSkgPT0gLUVTUkNIKQo+PiArCWlmIChuZXRsaW5rX2hhc19saXN0
ZW5lcnMoZ2V0X2NkZXZfbmxzKCksIENOX0lEWF9QUk9DKSkKPj4gKwkJY25fbmV0bGlua19zZW5k
X211bHQobXNnLCBtc2ctPmxlbiwgMCwgQ05fSURYX1BST0MsIEdGUF9OT1dBSVQsCj4+ICsJCQkg
ICAgIGNuX2ZpbHRlciwgKHZvaWQgKilmaWx0ZXJfZGF0YSk7Cj4+ICsJZWxzZQo+PiAgIAkJYXRv
bWljX3NldCgmcHJvY19ldmVudF9udW1fbGlzdGVuZXJzLCAwKTsKPj4gICAKPj4gICAJbG9jYWxf
dW5sb2NrKCZsb2NhbF9ldmVudC5sb2NrKTsKPj4gZGlmZiAtLWdpdCBhL2RyaXZlcnMvY29ubmVj
dG9yL2Nvbm5lY3Rvci5jIGIvZHJpdmVycy9jb25uZWN0b3IvY29ubmVjdG9yLmMKPj4gaW5kZXgg
N2Y3Yjk0ZjYxLi4xYjJjZDQxMGUgMTAwNjQ0Cj4+IC0tLSBhL2RyaXZlcnMvY29ubmVjdG9yL2Nv
bm5lY3Rvci5jCj4+ICsrKyBiL2RyaXZlcnMvY29ubmVjdG9yL2Nvbm5lY3Rvci5jCj4+IEBAIC0x
MjksNiArMTI5LDEyIEBAIGludCBjbl9uZXRsaW5rX3NlbmQoc3RydWN0IGNuX21zZyAqbXNnLCB1
MzIgcG9ydGlkLCB1MzIgX19ncm91cCwKPj4gICB9Cj4+ICAgRVhQT1JUX1NZTUJPTF9HUEwoY25f
bmV0bGlua19zZW5kKTsKPj4gICAKPj4gK3N0cnVjdCBzb2NrICpnZXRfY2Rldl9ubHModm9pZCkK
Pj4gK3sKPj4gKwlyZXR1cm4gY2Rldi5ubHM7Cj4+ICt9Cj4+ICtFWFBPUlRfU1lNQk9MX0dQTChn
ZXRfY2Rldl9ubHMpOwo+PiArCj4+ICAgLyoKPj4gICAgKiBDYWxsYmFjayBoZWxwZXIgLSBxdWV1
ZXMgd29yayBhbmQgc2V0dXAgZGVzdHJ1Y3RvciBmb3IgZ2l2ZW4gZGF0YS4KPj4gICAgKi8KPj4g
ZGlmZiAtLWdpdCBhL2luY2x1ZGUvbGludXgvY29ubmVjdG9yLmggYi9pbmNsdWRlL2xpbnV4L2Nv
bm5lY3Rvci5oCj4+IGluZGV4IGNlYzJkOTlhZS4uMjU1NDY2YWVhIDEwMDY0NAo+PiAtLS0gYS9p
bmNsdWRlL2xpbnV4L2Nvbm5lY3Rvci5oCj4+ICsrKyBiL2luY2x1ZGUvbGludXgvY29ubmVjdG9y
LmgKPj4gQEAgLTEyNyw2ICsxMjcsNyBAQCBpbnQgY25fbmV0bGlua19zZW5kX211bHQoc3RydWN0
IGNuX21zZyAqbXNnLCB1MTYgbGVuLCB1MzIgcG9ydGlkLAo+PiAgICAqLwo+PiAgIGludCBjbl9u
ZXRsaW5rX3NlbmQoc3RydWN0IGNuX21zZyAqbXNnLCB1MzIgcG9ydGlkLCB1MzIgZ3JvdXAsIGdm
cF90IGdmcF9tYXNrKTsKPj4gICAKPj4gK3N0cnVjdCBzb2NrICpnZXRfY2Rldl9ubHModm9pZCk7
Cj4+ICAgaW50IGNuX3F1ZXVlX2FkZF9jYWxsYmFjayhzdHJ1Y3QgY25fcXVldWVfZGV2ICpkZXYs
IGNvbnN0IGNoYXIgKm5hbWUsCj4+ICAgCQkJICBjb25zdCBzdHJ1Y3QgY2JfaWQgKmlkLAo+PiAg
IAkJCSAgdm9pZCAoKmNhbGxiYWNrKShzdHJ1Y3QgY25fbXNnICosIHN0cnVjdCBuZXRsaW5rX3Nr
Yl9wYXJtcyAqKSk7Cg==

